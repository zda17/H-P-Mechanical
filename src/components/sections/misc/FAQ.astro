---
// Import the necessary AccordionItem component and JSON data
import AccordionItem from "@components/ui/blocks/AccordionItem.astro";

// Define props from Astro
const { title, faqs } = Astro.props;

// Define TypeScript interface for props
interface Faq {
  question: string;
  answer: string;
}

interface FaqGroup {
  subTitle?: string;
  faqs: Faq[];
}

interface Props {
  title: string;
  faqs: FaqGroup;
}
// Define a helper function to generate ids dynamically.
const makeId = (base: any, index: any) => `${base}${index + 1}`;
---

<!-- Main container that holds all content. Customized for different viewport sizes. -->
<section
  class="mx-auto max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14"
>
  <!-- Title section centered at top -->
  <div class="mb-12 text-center lg:mb-16">
    <p class="mb-4 text-base font-semibold uppercase tracking-wider text-red-500 dark:text-red-400 sm:text-lg">
      Frequently Asked Questions
    </p>
    <h2
      class="text-balance text-3xl font-bold leading-relaxed text-neutral-800 dark:text-neutral-200 sm:text-4xl lg:text-5xl"
    >
      Got Questions? We've Got Answers!
    </h2>
  </div>

  <!-- FAQ accordion items in 2-column grid -->
  <div class="grid gap-6 sm:grid-cols-2">
    <div class="hs-accordion-group space-y-6">
      {
        faqs.faqs.slice(0, Math.ceil(faqs.faqs.length / 2)).map((question, i) => {
          // Generate ids dynamically for each FAQ accordion item.
          let id = makeId(
            "hs-basic-with-title-and-arrow-stretched-heading-left-",
            i
          );
          let collapseId = makeId(
            "hs-basic-with-title-and-arrow-stretched-collapse-left-",
            i
          );

          return (
            <AccordionItem
              {...question}
              id={id}
              collapseId={collapseId}
              first={i === 0}
            />
          );
        })
      }
    </div>
    <div class="hs-accordion-group space-y-6">
      {
        faqs.faqs.slice(Math.ceil(faqs.faqs.length / 2)).map((question, i) => {
          // Generate ids dynamically for each FAQ accordion item.
          let id = makeId(
            "hs-basic-with-title-and-arrow-stretched-heading-right-",
            i
          );
          let collapseId = makeId(
            "hs-basic-with-title-and-arrow-stretched-collapse-right-",
            i
          );

          return (
            <AccordionItem
              {...question}
              id={id}
              collapseId={collapseId}
              first={false}
            />
          );
        })
      }
    </div>
  </div>
</section>
<!--Import the necessary Accordion plugin-->
<!--https://preline.co/plugins/html/accordion.html-->
<script>
  import "@preline/accordion/index.js";
</script>