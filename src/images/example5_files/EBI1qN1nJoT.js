;/*FB_PKG_DELIM*/

__d("getEmojiSize",["CometComposerStylingConstants","CometLexicalEmojiNode","getResolvedShouldShrink"],(function(t,n,r,o,a,i,l){"use strict";var e=["emojiSizeOverride","formattedTextStyling","textLength"];function s(t){var n,a=t.emojiSizeOverride,i=t.formattedTextStyling,l=t.textLength,s=babelHelpers.objectWithoutPropertiesLoose(t,e);if(a!=null)return a;var u=l>=o("CometComposerStylingConstants").MAX_DYNAMIC_TEXT_LENGTH,c=r("getResolvedShouldShrink")(babelHelpers.extends({formattedTextStyling:i,textExceedsLength:u},s));return(n=i==null?void 0:i.fontSize)!=null?n:c?o("CometLexicalEmojiNode").COMPOSER_EMOJI_SIZE_SMALL:o("CometLexicalEmojiNode").COMPOSER_EMOJI_SIZE_LARGE}l.default=s}),98);
__d("CometComposerEmojiPluginForLexical.react",["CometLexicalEmojiNode","Lexical","LexicalText","getEmojiSize","getUpgradedCometEmojiComposerHandler","react","react-compiler-runtime","useCometStatusAreaTextData","withComposerViewStatePart"],(function(t,n,r,o,a,i,l){"use strict";var e=["editor","emojiSizeOverride"],s,u=s||(s=o("react")),c=u.useLayoutEffect,d=u.useRef;function m(e){var t,n=o("react-compiler-runtime").c(35),a=e.activeAttachmentType,i=e.alwaysShrinkText,l=e.editor,s=e.emojiSizeOverride,u=e.formattedTextPreset,m=e.formattingType,_=(t=r("useCometStatusAreaTextData")(u))==null?void 0:t.formattedTextStyling,f;n[0]!==a||n[1]!==i||n[2]!==s||n[3]!==_||n[4]!==m?(f=s!=null?s:r("getEmojiSize")({activeAttachmentType:a,alwaysShrinkText:i,formattedTextStyling:_,formattingType:m,textLength:0}),n[0]=a,n[1]=i,n[2]=s,n[3]=_,n[4]=m,n[5]=f):f=n[5];var g=d(f),h;n[6]===Symbol.for("react.memo_cache_sentinel")?(h=new Set,n[6]=h):h=n[6];var y=d(h),C;n[7]===Symbol.for("react.memo_cache_sentinel")?(C=function(t,n){y.current.forEach(function(e){n.update(function(){var n=o("Lexical").$getNodeByKey(e);n!==null&&n.setSize(t)})}),g.current=t},n[7]=C):C=n[7];var b=C,v,S;n[8]!==l?(v=function(){if(l!=null){var e=y.current;return l.getEditorState().read(function(){o("Lexical").$nodesOfType(o("CometLexicalEmojiNode").EmojiNode).forEach(function(t){e.add(t.getKey())})}),l.registerMutationListener(o("CometLexicalEmojiNode").EmojiNode,function(t){t.forEach(function(t,n){t==="created"?e.add(n):t==="destroyed"&&e.delete(n)})},{skipInitialization:!0})}},S=[l],n[8]=l,n[9]=v,n[10]=S):(v=n[9],S=n[10]),c(v,S);var R,L;n[11]!==a||n[12]!==i||n[13]!==l||n[14]!==s||n[15]!==_||n[16]!==m?(R=function(){if(l!=null)return p({activeAttachmentType:a,alwaysShrinkText:i,editor:l,emojiSizeOverride:s,formattedTextStyling:_,formattingType:m})},L=[l,a,i,_,m,s],n[11]=a,n[12]=i,n[13]=l,n[14]=s,n[15]=_,n[16]=m,n[17]=R,n[18]=L):(R=n[17],L=n[18]),c(R,L);var E,k;n[19]!==a||n[20]!==i||n[21]!==l||n[22]!==s||n[23]!==_||n[24]!==m?(E=function(){l!=null&&l.update(function(){var e=l.getEditorState().read(o("LexicalText").$rootTextContent).length,t=r("getEmojiSize")({activeAttachmentType:a,alwaysShrinkText:i,emojiSizeOverride:s,formattedTextStyling:_,formattingType:m,textLength:e});g.current!==t&&b(t,l)})},k=[l,a,i,_,m,s],n[19]=a,n[20]=i,n[21]=l,n[22]=s,n[23]=_,n[24]=m,n[25]=E,n[26]=k):(E=n[25],k=n[26]),c(E,k);var I,T;n[27]!==a||n[28]!==i||n[29]!==l||n[30]!==s||n[31]!==_||n[32]!==m?(I=function(){if(l!=null)return l.registerTextContentListener(function(e){var t=r("getEmojiSize")({activeAttachmentType:a,alwaysShrinkText:i,emojiSizeOverride:s,formattedTextStyling:_,formattingType:m,textLength:e.length});g.current!==t&&b(t,l)})},T=[l,a,i,_,m,s],n[27]=a,n[28]=i,n[29]=l,n[30]=s,n[31]=_,n[32]=m,n[33]=I,n[34]=T):(I=n[33],T=n[34]),c(I,T)}function p(t){var n=t.editor,o=t.emojiSizeOverride,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=function(){},l=n.registerTextContentListener(function(e){var t=r("getEmojiSize")(babelHelpers.extends({emojiSizeOverride:o,textLength:e.length},a));i(),i=r("getUpgradedCometEmojiComposerHandler")(n,t)});return function(){i(),l()}}var _=r("withComposerViewStatePart")(m,function(e){var t,n;return{activeAttachmentType:(t=e.attachmentArea)==null?void 0:t.activeAttachmentType,editor:e.lexicalEditor,emojiSizeOverride:e.emojiSizeOverride,formattedTextPreset:(n=e.formattedText)==null?void 0:n.currentFormattedTextPreset,formattingType:e.formattingType}});l.default=_}),98);
__d("CometComposerHashtagPluginForLexical.react",["react","react-compiler-runtime","requireDeferred","useDeferredModuleOnReady","withComposerViewStatePart"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect,u=r("requireDeferred")("getUpgradedCometHashtagComposerHandler").__setRef("CometComposerHashtagPluginForLexical.react");function c(e){var t=o("react-compiler-runtime").c(4),n=e.editor,a=r("useDeferredModuleOnReady")(u),i,l;t[0]!==n||t[1]!==a?(i=function(){if(n!=null&&a!=null)return a(n)},l=[n,a],t[0]=n,t[1]=a,t[2]=i,t[3]=l):(i=t[2],l=t[3]),s(i,l)}var d=r("withComposerViewStatePart")(c,function(e){return{editor:e.lexicalEditor}});l.default=d}),98);
__d("FeedComposerCometHashtagTypeheadListItem.react",["CometSearchMentionsBaseViewItem.react","FDSTextPairing.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["entry"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(11),a,i;n[0]!==t?(a=t.entry,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l=a.label,s=a.rawData.subtext,c;n[3]===Symbol.for("react.memo_cache_sentinel")?(c={className:"x1y1aw1k xf159sx xwib8y2 xmzvs34 x168biu4"},n[3]=c):c=n[3];var d;n[4]!==l||n[5]!==s?(d=u.jsx("div",babelHelpers.extends({},c,{children:u.jsx(r("FDSTextPairing.react"),{headline:l,level:4,meta:s})})),n[4]=l,n[5]=s,n[6]=d):d=n[6];var m;return n[7]!==a||n[8]!==i||n[9]!==d?(m=u.jsx(r("CometSearchMentionsBaseViewItem.react"),babelHelpers.extends({},i,{entry:a,children:d})),n[7]=a,n[8]=i,n[9]=d,n[10]=m):m=n[10],m}l.default=c}),98);
__d("cometHashtagsLexicalCreateNodeStrategy",["CometLexicalGenericEntityNode","cometBaseMentionsLexicalCreateNodeStrategy","cometMentionsDataEntryText"],(function(t,n,r,o,a,i,l){"use strict";var e=r("cometBaseMentionsLexicalCreateNodeStrategy")(function(e){return o("CometLexicalGenericEntityNode").$createCometLexicalGenericEntityNode({id:e.key,text:r("cometMentionsDataEntryText")(e),type:"Hashtag"})}),s=e;l.default=s}),98);
__d("getHashtagRegexForTypeahead",["getHashtagRegexString"],(function(t,n,r,o,a,i,l){function e(){return new RegExp(r("getHashtagRegexString")()+"$","i")}l.default=e}),98);
__d("createCometHashtagMatchStrategy",["getHashtagRegexForTypeahead"],(function(t,n,r,o,a,i,l){"use strict";var e=["#","\\uFF03"];function s(t){var n=t.minMatchLength;return{findMentionableString:function(o){if(e.includes(o))return{leadOffset:0,matchingString:o,replaceableString:o};var t=new RegExp(r("getHashtagRegexForTypeahead")()),a=t.exec(o);if(a!==null){var i=a[1].length,l=a[0].substring(i);if(l!=null&&l.length>=n)return{leadOffset:i,matchingString:l,replaceableString:l}}return null},name:"HashtagMatchStrategy("+n.toString()+")"}}l.default=s}),98);
__d("createFeedComposerCometHashtagDataEntry_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[{kind:"RootArgument",name:"context"},{kind:"RootArgument",name:"scopeID"}],kind:"Fragment",metadata:{mask:!1},name:"createFeedComposerCometHashtagDataEntry_data",selections:[{alias:null,args:null,concreteType:"Hashtag",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[{kind:"Variable",name:"callsite",variableName:"context"},{kind:"Variable",name:"scope_id",variableName:"scopeID"}],kind:"ScalarField",name:"typeahead_snippets",storageKey:null}],storageKey:null}],type:"TypeaheadHashtagResultV2",abstractKey:null};a.exports=e}),null);
__d("createFeedComposerCometHashtagDataEntry",["createFeedComposerCometHashtagDataEntry_data.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;e!==void 0||(e=n("createFeedComposerCometHashtagDataEntry_data.graphql"));function s(e){var t=e==null?void 0:e.node;if(t==null)return null;var n=t.id,r=t.name,o=t.typeahead_snippets,a=o!=null&&o.length>=1?o[0]:null;return n==null||r==null?null:{key:n,label:r,rawData:{id:n,name:r,subtext:a},type:"entry"}}l.default=s}),98);
__d("useFeedComposerCometHashtagTypeaheadDataSourceQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="23922566980694168"}),null);
__d("useFeedComposerCometHashtagTypeaheadDataSourceQuery.graphql",["useFeedComposerCometHashtagTypeaheadDataSourceQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"context"},t={defaultValue:!1,kind:"LocalArgument",name:"includeImageUrls"},r={defaultValue:!1,kind:"LocalArgument",name:"includeMetatext"},o={defaultValue:null,kind:"LocalArgument",name:"limit"},a={defaultValue:null,kind:"LocalArgument",name:"query"},i={defaultValue:null,kind:"LocalArgument",name:"scopeID"},l={defaultValue:null,kind:"LocalArgument",name:"sessionID"},s={kind:"Variable",name:"scope_id",variableName:"scopeID"},u=[{alias:null,args:[{fields:[{kind:"Variable",name:"context",variableName:"context"},{kind:"Variable",name:"include_image_urls",variableName:"includeImageUrls"},{kind:"Variable",name:"include_metatext",variableName:"includeMetatext"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"query",variableName:"query"},s,{kind:"Variable",name:"session_id",variableName:"sessionID"}],kind:"ObjectValue",name:"argument"}],concreteType:"TypeaheadHashtagResultV2",kind:"LinkedField",name:"hashtag_typeahead_v2",plural:!0,selections:[{alias:null,args:null,concreteType:"Hashtag",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[{kind:"Variable",name:"callsite",variableName:"context"},s],kind:"ScalarField",name:"typeahead_snippets",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,t,r,o,a,i,l],kind:"Fragment",metadata:null,name:"useFeedComposerCometHashtagTypeaheadDataSourceQuery",selections:u,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,l,o,e,t,r,i],kind:"Operation",name:"useFeedComposerCometHashtagTypeaheadDataSourceQuery",selections:u},params:{id:n("useFeedComposerCometHashtagTypeaheadDataSourceQuery_facebookRelayOperation"),metadata:{},name:"useFeedComposerCometHashtagTypeaheadDataSourceQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useFeedComposerCometHashtagTypeaheadDataSource",["createFeedComposerCometHashtagDataEntry","react-compiler-runtime","useCometTypeaheadGraphQLDataSource","useFeedComposerCometHashtagTypeaheadDataSourceQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("useFeedComposerCometHashtagTypeaheadDataSourceQuery.graphql");function u(e){var t=o("react-compiler-runtime").c(8),n=e.context,a=e.includeMetatext,i=e.limit,l=e.scopeID,u;t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==l?(u=function(t){var e=t.query;return{context:n,includeMetatext:a,limit:i,query:e,scopeID:l,sessionID:""}},t[0]=n,t[1]=a,t[2]=i,t[3]=l,t[4]=u):u=t[4];var d;return t[5]!==i||t[6]!==u?(d={gqlQuery:s,limit:i,normalize:c,queryVariablesBuilderFunction:u},t[5]=i,t[6]=u,t[7]=d):d=t[7],r("useCometTypeaheadGraphQLDataSource")(d)}function c(e){var t=e==null?void 0:e.hashtag_typeahead_v2;return t==null?[]:t.map(function(e){if(e!=null)return r("createFeedComposerCometHashtagDataEntry")(e)}).filter(Boolean)}l.default=u}),98);
__d("useFeedComposerCometHashtagsDataSourceResolverConfig",["createCometHashtagMatchStrategy","react","react-compiler-runtime","useCometMentionsDataSourceResolverConfig","useCometTypeaheadCompositeDataSource","useFeedComposerCometHashtagTypeaheadDataSource"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(e){var t=o("react-compiler-runtime").c(14),n=e.context,a=e.includeMetatext,i=e.limit,l=e.payloadDecorators,s=e.scopeID,u;t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==s?(u={context:n,includeMetatext:a,limit:i,scopeID:s},t[0]=n,t[1]=a,t[2]=i,t[3]=s,t[4]=u):u=t[4];var c=r("useFeedComposerCometHashtagTypeaheadDataSource")(u),d;t[5]!==l?(d=l!=null?l:[],t[5]=l,t[6]=d):d=t[6];var m;t[7]!==i||t[8]!==c||t[9]!==d?(m={limit:i,networkDataSource:c,payloadDecorators:d},t[7]=i,t[8]=c,t[9]=d,t[10]=m):m=t[10];var p=r("useCometTypeaheadCompositeDataSource")(m),_;t[11]===Symbol.for("react.memo_cache_sentinel")?(_=r("createCometHashtagMatchStrategy")({minMatchLength:0}),t[11]=_):_=t[11];var f;t[12]!==p?(f=[{dataSource:p,matchStrategy:_}],t[12]=p,t[13]=f):f=t[13];var g=f;return r("useCometMentionsDataSourceResolverConfig")(g,!0)}l.default=u}),98);
__d("CometComposerHashtagTypeaheadPluginForLexical.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","FeedComposerCometHashtagTypeheadListItem.react","cometHashtagsLexicalCreateNodeStrategy","cr:2971","react","react-compiler-runtime","useCometTypeaheadViewListStrategy","useFeedComposerCometHashtagsDataSourceResolverConfig","withComposerViewStatePart"],(function(t,n,r,o,a,i,l){"use strict";var e=["editor"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(6),r,a;if(n[0]!==t?(r=t.editor,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=r,n[2]=a):(r=n[1],a=n[2]),r==null)return null;var i;return n[3]!==r||n[4]!==a?(i=u.jsx(d,babelHelpers.extends({},a,{editor:r})),n[3]=r,n[4]=a,n[5]=i):i=n[5],i}function d(e){var t=o("react-compiler-runtime").c(9),a=e.editor,i=e.groupID,l=i==null?"MAIN_COMPOSER":"GROUP_COMPOSER",s=i,c;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=n("cr:2971")!=null?[n("cr:2971")({limit:1})]:void 0,t[0]=c):c=t[0];var d;t[1]!==l||t[2]!==s?(d={context:l,includeMetatext:!0,limit:6,payloadDecorators:c,scopeID:s},t[1]=l,t[2]=s,t[3]=d):d=t[3];var m=r("useFeedComposerCometHashtagsDataSourceResolverConfig")(d),p;t[4]===Symbol.for("react.memo_cache_sentinel")?(p={viewItemStrategyRenderer:r("FeedComposerCometHashtagTypeheadListItem.react")},t[4]=p):p=t[4];var _=r("useCometTypeaheadViewListStrategy")(p),f;return t[5]!==m||t[6]!==a||t[7]!==_?(f=u.jsx(r("CometMentionsForLexical.react"),{createNodeStrategy:r("cometHashtagsLexicalCreateNodeStrategy"),dataSourceResolverConfig:m,editor:a,layoutStrategyRenderer:r("CometMentionsLayoutStrategy.react"),viewStrategyRenderer:_}),t[5]=m,t[6]=a,t[7]=_,t[8]=f):f=t[8],f}var m=r("withComposerViewStatePart")(c,function(e){return{editor:e.lexicalEditor}});l.default=m}),98);
__d("CometComposerIsDirtyPluginForLexical.react",["LexicalText","composerLexicalEditorViewStateReducer","react","react-compiler-runtime","useComposerViewStateDispatcher","useComposerViewStateReducer","withComposerViewStatePart"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e){var t=o("react-compiler-runtime").c(5),n=e.editor,a=e.lexicalIsDirty;r("useComposerViewStateReducer")(r("composerLexicalEditorViewStateReducer"));var i=r("useComposerViewStateDispatcher")(),l,u;t[0]!==i||t[1]!==n||t[2]!==a?(l=function(){if(n!=null){var e=n.getEditorState().read(o("LexicalText").$rootTextContent).length>0;return e===!0&&e!==a&&i({isDirty:!0,type:"SET_LEXICAL_DIRTY_STATE"}),n.registerTextContentListener(function(t){var n=t.length>0;n!==e&&i({isDirty:n,type:"SET_LEXICAL_DIRTY_STATE"})})}},u=[i,n,a],t[0]=i,t[1]=n,t[2]=a,t[3]=l,t[4]=u):(l=t[3],u=t[4]),s(l,u)}var c=r("withComposerViewStatePart")(u,function(e){return{editor:e.lexicalEditor,lexicalIsDirty:e.lexicalEditorIsDirty}});l.default=c}),98);
__d("composerLinkAttachmentChecker",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n,r,o=e==null||(n=e.attachmentArea)==null?void 0:n.activeAttachmentType,a=t==null||(r=t.attachmentArea)==null?void 0:r.activeAttachmentType,i=e==null?void 0:e.linkAttachment,l=t==null?void 0:t.linkAttachment;return o!=null&&a==null||i!=null&&l==null?"DELETED":(a==="LINK"||a==="SHARE")&&(i==null?void 0:i.url)!==(l==null?void 0:l.url)?"UPDATED":"UNCHANGED"}i.default=e}),66);
__d("composerLinkAttachmentReducer",["composerAttachmentAreaReducer","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r,o,a,i;if(((n=e.attachmentArea)==null?void 0:n.activeAttachmentType)==="FORMATTED_TEXT"||((r=e.attachmentArea)==null?void 0:r.activeAttachmentType)==="SHARE")return e;var l=t.url,s=[].concat(((o=(a=e.linkAttachment)==null?void 0:a.urlStack)!=null?o:[]).filter(function(e){return!e.startsWith(l)&&!l.startsWith(e)}),[l]),u=(i=e.linkAttachment)==null?void 0:i.selectedLinkPreview;return u!=null&&(s=s.filter(function(e){return e!==u}).concat(u)),babelHelpers.extends({},e,{linkAttachment:babelHelpers.extends({},e.linkAttachment,{url:s[s.length-1],urlStack:s})})}function s(e,t){var n,r,o,a,i=(n=(r=e.linkAttachment)==null?void 0:r.urlStack)!=null?n:[],l=i[i.length-1],s=((o=(a=e.linkAttachment)==null?void 0:a.removedAttachmentPreviewUrls)!=null?o:new Set).add(l);if(i.length<=1){var u;return t.onRemovedLast(!0),babelHelpers.extends({},e,{attachmentArea:{activeAttachmentType:void 0,previousAttachmentType:"LINK"},linkAttachment:{isLinkAttachmentEnabled:(u=e.linkAttachment)==null?void 0:u.isLinkAttachmentEnabled,removedAttachmentPreviewUrls:s}})}var c=i.slice(0,-1),d=c[c.length-1];return t.onRemovedLast(!1),babelHelpers.extends({},e,{linkAttachment:babelHelpers.extends({},e.linkAttachment,{removedAttachmentPreviewUrls:s,selectedLinkPreview:void 0,url:d,urlStack:c})})}function u(e){var t;return babelHelpers.extends({},e,{attachmentArea:{activeAttachmentType:void 0,previousAttachmentType:"LINK"},linkAttachment:{isLinkAttachmentEnabled:(t=e.linkAttachment)==null?void 0:t.isLinkAttachmentEnabled}})}function c(e,t){var n;return e.useOriginalContentLinkAttachment===!0?babelHelpers.extends({},e,{originalContentLinkAttachment:babelHelpers.extends({},e.originalContentLinkAttachment,{linkPreview:{share_scrape_data:t.shareScrapeData},url:t.url})}):((n=e.linkAttachment)==null?void 0:n.url)!==t.url?e:babelHelpers.extends({},e,{linkAttachment:babelHelpers.extends({},e.linkAttachment,{linkPreview:{share_scrape_data:t.shareScrapeData},url:t.url})})}function d(e,t){return babelHelpers.extends({},e,{useOriginalContentLinkAttachment:t.useOriginalContentLinkAttachment})}function m(e,t){var n,r,o=((n=(r=e.linkAttachment)==null?void 0:r.urlStack)!=null?n:[]).filter(function(e){return e!==t.selectedLinkPreview}).concat(t.selectedLinkPreview);return babelHelpers.extends({},e,{linkAttachment:babelHelpers.extends({},e.linkAttachment,{selectedLinkPreview:t.selectedLinkPreview,url:t.selectedLinkPreview,urlStack:o})})}function p(e,t){var n,r=e.linkAttachment,o=(n=r==null?void 0:r.customAttachments)!=null?n:[],a=o[0].throwback_card;return r==null||a==null?e:babelHelpers.extends({},e,{linkAttachment:babelHelpers.extends({},r,{customAttachments:[{throwback_card:babelHelpers.extends({},a,{media_ids:t.mediaIds})}]})})}function _(t,n){switch(n.type){case"ADD_LINK_URL":return e(t,n);case"REMOVE_LINK_URL":return s(t,n);case"REMOVE_ATTACHMENT_TYPE":{var a=o("composerAttachmentAreaReducer").getCanAlterAttachmentData(n,"LINK",t);return a?s(t,{onRemovedLast:r("emptyFunction"),type:"REMOVE_LINK_URL"}):t}case"REMOVE_ALL_LINKS":return u(t);case"SET_LINK_PREVIEW":return c(t,n);case"SET_USE_ORIGINAL_CONTENT":return d(t,n);case"SET_SELECTED_LINK_PREVIEW":return m(t,n);case"SET_THROWBACK_MEDIA":return p(t,n)}return t}l.default=_}),98);
__d("CometComposerLinksPluginForLexical.react",["CometDebounce","ConstUriUtils","Lexical","LexicalLink","LexicalUtils","Promise","URLMatcher","composerLinkAttachmentChecker","composerLinkAttachmentReducer","gkx","react","useComposerViewStateDispatcher","useComposerViewStateReducer","withComposerViewStatePart"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useEffect,m=/[,;\s]/;function p(e){return m.test(e)}function _(e){return e[e.length-1]}function f(e){return r("gkx")("14048")?r("URLMatcher").permissiveHostPathMatch(e):r("URLMatcher").match(e)}function g(e){return o("ConstUriUtils").isValidUri(e)}function h(e,t){for(var n=t,r="";n>0&&!p(e[n-1]);)r=e[n-1]+r,n--;for(var o=t;o<e.length&&!p(e[o]);)r+=e[o],o++;return{text:r,textOffset:n}}function y(e,t){var n=e.getKey(),r=e.getTextContent(),a=o("Lexical").$getSelection(),i=o("Lexical").$getEditor().getEditorState(),l=i.read(function(){var t=o("Lexical").$getNodeByKey(e.getKey()),n=null;return o("Lexical").$isTextNode(t)&&t.isSimpleText()&&(n=t.getTextContent()),[n,o("Lexical").$getSelection()]}),s=l[0],u=l[1];if(s===null||!o("Lexical").$isRangeSelection(u)||!u.isCollapsed()||u.anchor.key!==n||!o("Lexical").$isRangeSelection(a)||!a.isCollapsed()||a.anchor.key!==n)return null;var c=r.length,d=s.length,m=a.anchor.offset,p=u.anchor.offset,_=m===p+1&&c===d+1&&r.substring(0,m-1)+r.substring(m)===s,f=m+1===p&&c+1===d&&r===s.substring(0,m)+s.substring(m+1),g=m===p&&c+1===d&&r===s.substring(0,m)+s.substring(0,m+1);return _||f||g?h(r,m):null}function C(e){return o("Lexical").$getEditor().getEditorState().read(function(){var t=o("Lexical").$getNodeByKey(e);return o("Lexical").$isTextNode(t)&&t.isSimpleText()?t.getTextContent():null})}function b(e,t){var n,r=e.getTextContent(),o=(n=t==null?void 0:t.text)!=null?n:C(e.getKey());if(o===null)return null;for(var a=r.length,i=o.length,l=0;l<a&&l<i&&r[l]===o[l];)l++;for(var s=a,u=i;s>l&&u>l&&r[s-1]===o[s-1];)s--,u--;s++;for(var c=r.substring(l,s);l-1>=0&&!p(r[l-1]);)l--,c=r[l]+c;for(;s+1<r.length&&!p(r[s+1]);)s++,c+=r[s+1];return{text:c,textOffset:l}}function v(e,t){var n;return e.getTextContent()===((n=t==null?void 0:t.text)!=null?n:C(e.getKey()))?{text:"",textOffset:0}:null}function S(e,t,n,r,o){var a=e.getTextContent(),i=a,l=0;if(!r){var s,u,c=(s=(u=v(e,t))!=null?u:y(e,t))!=null?s:b(e,t);if(c!==null&&(i=c.text,l=c.textOffset,i.split(m).some(function(e){return e.length>100}))){var d=l+i.length,p={textOffsetEnd:d,textOffsetStart:l},_=n.get(e.getKey());_!=null&&(p.textOffsetStart=Math.min(p.textOffsetStart,_.textOffsetStart),p.textOffsetEnd=Math.max(p.textOffsetEnd,_.textOffsetEnd)),n.set(e.getKey(),p);return}}R(e,i,l,o)}function R(e,t,n,r){for(var a=e.getTextContent(),i=a.length,l=t,s=0,u=n,c=e,d=0,m;(m=f(l))!=null&&m!=null;){u+=l.indexOf(m);var h=s+u,y=m.length,C=void 0;if(h>0)C=p(a[h-1]);else{var b=e.getPreviousSibling();o("Lexical").$isElementNode(b)&&(b=b.getLastDescendant()),b===null?C=!0:C=o("Lexical").$isLineBreakNode(b)||o("Lexical").$isTextNode(b)&&p(_(b.getTextContent()))}var v=void 0;if(h+y<i)v=p(a[h+y]);else{var S=e.getNextSibling();if(o("Lexical").$isElementNode(S)&&(S=S.getFirstDescendant()),S===null)v=!0;else{var R;v=o("Lexical").$isLineBreakNode(S)||o("Lexical").$isTextNode(S)&&p((R=S.getTextContent()[0])!=null?R:"")}}if(C&&v&&g(m)){var L=void 0;if(u===0){var E=c.splitText(y);L=E[0],c=E[1]}else{var k=c.splitText(u+d,u+y+d);L=k[1],c=k[2]}var I=o("LexicalLink").$createAutoLinkNode(m);I.append(o("Lexical").$createTextNode(m)),L.replace(I),r(I),d=0}else d=u+y;var T=u+y;l=l.substring(T),s+=T,u=0}}function L(e){for(var t=e.getChildren(),n=t.length,r=0;r<n;r++){var a=t[r];if(!o("Lexical").$isTextNode(a)||!a.isSimpleText()){k(e);return}}var i=e.getTextContent();if(f(i)!==i||!g(i)){k(e);return}var l=e.getPreviousSibling();if(o("Lexical").$isElementNode(l)&&(l=l.getLastDescendant()),l!==null&&!(o("Lexical").$isLineBreakNode(l)||o("Lexical").$isTextNode(l)&&p(_(l.getTextContent())))){k(e);return}var s=e.getNextSibling();if(o("Lexical").$isElementNode(s)&&(s=s.getFirstDescendant()),s!==null&&!(o("Lexical").$isLineBreakNode(s)||o("Lexical").$isTextNode(s)&&p(s.getTextContent()[0]))){k(e);return}var u=e.getURL();u!==i&&e.setURL(i)}function E(e){var t=e.getPreviousSibling(),n=e.getNextSibling(),r=e.getTextContent();o("LexicalLink").$isAutoLinkNode(t)&&!o("Lexical").$isLineBreakNode(t)&&!p(r[0])&&k(t),o("LexicalLink").$isAutoLinkNode(n)&&!o("Lexical").$isLineBreakNode(n)&&!p(_(r))&&k(n)}function k(e){for(var t=e.getChildren(),n=t.length,r=n-1;r>=0;r--)e.insertAfter(t[r]);return e.remove(),t.map(function(e){return e.getLatest()})}function I(t){var a=t.editor,i=t.isLinkAttachmentEnabled,l=t.removedAttachmentPreviewUrls;r("useComposerViewStateReducer")(r("composerLinkAttachmentReducer"),r("composerLinkAttachmentChecker"));var s=r("useComposerViewStateDispatcher")(),u=c(function(t,r){l!=null&&l.has(t)&&r!==!0||(s({type:"ADD_LINK_URL",url:t}),(i||r===!0)&&s({attachmentType:"LINK",onRemove:function(r){return new(e||(e=n("Promise")))(function(e){r({onRemovedLast:e,type:"REMOVE_LINK_URL"})})},type:"ACTIVATE_ATTACHMENT_TYPE"}))},[s,i,l]);d(function(){if(a!=null){var e=function(r){var e=r.getParentOrThrow();if(o("LexicalLink").$isAutoLinkNode(e)){L(e);var a=e.getLatest();c(a)}else r.isSimpleText()&&S(r,n,t,l(),c),E(r)},t=new Map,n=null,i=a.getEditorState(),l=function(){return a.getEditorState()===i},s=r("CometDebounce")(function(e,t){u(e.__url,t)},{wait:1e3}),c=function(t){return s(t,!1)},d=function(t){return s(t,!0)},m=r("CometDebounce")(function(){var e=function(){var e=r[0];n=r[1];var t=n.textOffsetEnd,i=n.textOffsetStart;a.update(function(){var n=o("Lexical").$getNodeByKey(e);if(o("Lexical").$isTextNode(n)&&n.isSimpleText()){var r=n.getTextContent().substring(i,t);R(n,r,i,c)}})},n;for(var r of t.entries())e()},{wait:200});return o("LexicalUtils").mergeRegister(a.registerUpdateListener(function(){m()}),a.registerMutationListener(o("LexicalLink").AutoLinkNode,function(e){var t=new WeakSet;a.getEditorState().read(function(){var n=function(){var e=r[0],n=r[1],i=a.getElementByKey(e);(n==="created"||n==="updated")&&i!==null&&!t.has(i)&&(t.add(i),i.addEventListener("click",function(t){a.getEditorState().read(function(){var t=o("Lexical").$getNodeByKey(e);t!=null&&d(t)})}))};for(var r of e)n()})},{skipInitialization:!0}),a.registerNodeTransform(o("Lexical").RootNode,function(){var t=a._compositionKey;if(t!==null){if(n===null)n={key:t,text:C(t)};else if(n.key!==t){var r=o("Lexical").$getNodeByKey(n.key);o("Lexical").$isTextNode(r)&&r.isAttached()&&e(r),n={key:t,text:C(t)}}}else if(n!==null){var i=o("Lexical").$getNodeByKey(n.key);o("Lexical").$isTextNode(i)&&i.isAttached()&&e(i),n=null}}),a.registerNodeTransform(o("Lexical").TextNode,function(t){e(t)}),a.registerNodeTransform(o("LexicalLink").AutoLinkNode,function(e){L(e);var t=e.getLatest();c(t)}),function(){s.reset(),m.reset()})}},[u,a,i])}var T=r("withComposerViewStatePart")(I,function(e){var t,n,r;return{editor:e.lexicalEditor,isLinkAttachmentEnabled:(t=(n=e.linkAttachment)==null?void 0:n.isLinkAttachmentEnabled)!=null?t:!0,removedAttachmentPreviewUrls:(r=e.linkAttachment)==null?void 0:r.removedAttachmentPreviewUrls}});l.segment=h,l.$handleLinkCreationOnKeyboardInput=y,l.$getPreviousNodeTextForSimpleTextNode=C,l.$handleLinkCreationOnSingleDiff=b,l.$handleLinkCreationOnNoDiff=v,l.CometComposerLinksPlugin=T}),98);
__d("CometComposerLinksPluginForLexicalWithDefaultExport.react",["CometComposerLinksPluginForLexical.react"],(function(t,n,r,o,a,i,l){"use strict";l.default=o("CometComposerLinksPluginForLexical.react").CometComposerLinksPlugin}),98);
__d("getInitialComposerLinkData",["Lexical","LexicalLink"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null){var t=new Map;return e.getEditorState().read(function(){return o("Lexical").$nodesOfType(o("LexicalLink").AutoLinkNode).forEach(function(e){return t.set(e.getKey(),e.getTextContent())})}),t}return new Map}l.default=e}),98);
__d("handlePendingMisinformationOnComposerSubmit",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){for(var r=0;r<e.length;r++){var o=t[e[r]];if(o!=null){var a=o.status;switch(a){case"ACCEPTED":case"CLEAN":case"FAILED":break;case"DECISION_DEFERRED":{var i=[].concat(n.current);n.current.length=0,i.forEach(function(e){var t=e.onHalt;t()});return}case"DIRTY_AWAITING_DECISION":case"FETCHING":return;default:return a}}}var l=[].concat(n.current);n.current.length=0,l.forEach(function(e){var t=e.onContinue;t()})}i.default=e}),66);
__d("hasNoLinksToAnalyze",["Lexical","LexicalLink"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){var a,i=Array.from(e);if(n!=null){var l=new Set([]);n==null||n.getEditorState().read(function(){return o("Lexical").$nodesOfType(o("LexicalLink").AutoLinkNode).forEach(function(e){return l.add(e.getURL())})}),r!=null&&l.add(r),a=i.filter(function(e){return l.has(e)})}return(a!=null?a:i).every(function(e){var n=t[e];if(n==null)return!0;var r=n.status;switch(r){case"ACCEPTED":case"CLEAN":case"FAILED":return!0;case"DECISION_DEFERRED":case"DIRTY_AWAITING_DECISION":case"FETCHING":return!1;default:return r}})}l.default=e}),98);
__d("onCloseConfirmationDialog",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){switch(n){case"ACCEPTED":e({__type:"ACCEPT_URL",url:t});break;case"NO_DECISION":e({__type:"ENTER_COOLDOWN_PERIOD"});break;default:return n}}i.default=e}),66);
__d("maybeTriggerMisinformationDialog",["onCloseConfirmationDialog"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=e.composedURLs,o=e.composerPhase,a=e.composerType,i=e.dialogIsOpen,l=e.dispatch,s=e.misinformationRecords,u=t.onCloseDialog,c=t.onTriggerDialog,d=t.openConfirmationDialog;if(i.current!==!0){var m=Array.from(n).find(function(e){var t;return((t=s[e])==null?void 0:t.status)==="DIRTY_AWAITING_DECISION"});if(m!=null){var p=s[m];if(p==null)return;var _=p.confirmationRenderer;if(_==null)return;c(),d({composerPhase:o,composerType:a,confirmationRenderer:_},function(e){u(),r("onCloseConfirmationDialog")(l,m,e)})}}}l.default=e}),98);
__d("cometMisinformationLinkDetectorPluginInternalStateReducerQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29607129502264490"}),null);
__d("cometMisinformationLinkDetectorPluginInternalStateReducerQuery.graphql",["cometMisinformationLinkDetectorPluginInternalStateReducerQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],t=[{kind:"Variable",name:"params",variableName:"input"}],r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o=[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i=[a];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"cometMisinformationLinkDetectorPluginInternalStateReducerQuery",selections:[{alias:null,args:t,concreteType:"LinkPreviewRoot",kind:"LinkedField",name:"link_preview",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"composer_post_confirmation_renderer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometMisinformationLinkComposerConfirmationDialog_confirmationRenderer"}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"cometMisinformationLinkDetectorPluginInternalStateReducerQuery",selections:[{alias:null,args:t,concreteType:"LinkPreviewRoot",kind:"LinkedField",name:"link_preview",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"composer_post_confirmation_renderer",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"cid",storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title_for_comet",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"description_for_comet",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"ManualFactCheck",kind:"LinkedField",name:"fact_checks",plural:!0,selections:[a,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"subtitle",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"FactCheckProvider",kind:"LinkedField",name:"provider",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},a],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"external_uri",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachment_thumbnail",plural:!1,selections:[r,{alias:null,args:[{kind:"Literal",name:"height",value:60},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:60}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{kind:"InlineFragment",selections:i,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:i,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:i,type:"GenericAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:i,type:"MontageImage",abstractKey:null},{kind:"InlineFragment",selections:i,type:"MontageVideo",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_page_admin_warning",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_rating_badge",storageKey:null}],type:"MisinformationComposerPostConfirmationRenderer",abstractKey:null}],storageKey:null}],storageKey:null}]},params:{id:n("cometMisinformationLinkDetectorPluginInternalStateReducerQuery_facebookRelayOperation"),metadata:{},name:"cometMisinformationLinkDetectorPluginInternalStateReducerQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("cometMisinformationLinkDetectorPluginInternalStateReducer",["CometRelay","FBLogger","WebPixelRatio","cometMisinformationLinkDetectorPluginInternalStateReducerQuery.graphql","relay-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("cometMisinformationLinkDetectorPluginInternalStateReducerQuery.graphql");function u(e,t){return d(e,t,"ADD")}function c(e,t){return d(e,t,"REMOVE")}function d(e,t,n){if(e.composedURLs.has(t)===(n==="ADD"))return e;var r=new Set(e.composedURLs);return n==="ADD"?r.add(t):r.delete(t),babelHelpers.extends({},e,{composedURLs:r})}function m(e,t,n){var o,a=e.misinformationRecords[t];if(a==null)return r("FBLogger")("misinformation").mustfix("Tried to update a misinformation record for a URL that was not being tracked."),e;var i=Object.entries(n).find(function(e){var t=e[0],n=e[1];return a[t]!==n});return i===!1?e:babelHelpers.extends({},e,{misinformationRecords:babelHelpers.extends({},e.misinformationRecords,(o={},o[t]=babelHelpers.extends({},a,n),o))})}function p(e,t){var n;switch(t.__type){case"ACCEPT_URL":return m(e,t.url,{status:"ACCEPTED"});case"ENTER_COOLDOWN_PERIOD":return Object.keys(e.misinformationRecords).reduce(function(t,n){var r,o=(r=t.misinformationRecords[n])==null?void 0:r.status;if(o==null)return t;switch(o){case"ACCEPTED":case"CLEAN":case"DECISION_DEFERRED":case"FAILED":case"FETCHING":return e;case"DIRTY_AWAITING_DECISION":return m(t,n,{status:"DECISION_DEFERRED"});default:return o}},e);case"EXIT_COOLDOWN_PERIOD":return Object.keys(e.misinformationRecords).reduce(function(t,n){var r,o=(r=t.misinformationRecords[n])==null?void 0:r.status;if(o==null)return t;switch(o){case"ACCEPTED":case"CLEAN":case"DIRTY_AWAITING_DECISION":case"FAILED":case"FETCHING":return e;case"DECISION_DEFERRED":return m(t,n,{status:"DIRTY_AWAITING_DECISION"});default:return o}},e);case"MARK_URL_FAILED_DETECTION":return m(e,t.url,{status:"FAILED"});case"SET_DETECTION_RESULT":return m(e,t.url,{confirmationRenderer:t.confirmationRenderer,status:t.confirmationRenderer!=null?"DIRTY_AWAITING_DECISION":"CLEAN"});case"TRACK_COMPOSED_URL":if(e.misinformationRecords[t.url]!=null)return u(e,t.url);var r,a,i={confirmationRenderer:void 0,dispose:function(){r&&(r.unsubscribe(),r=null),a&&(a.dispose(),a=null)},status:"FETCHING"},l={input:{url:t.url},scale:o("WebPixelRatio").get()},d=o("relay-runtime").getRequest(s),p=o("relay-runtime").createOperationDescriptor(d,l);a=e.environment.retain(p);var _=!0;return r=o("CometRelay").fetchQuery(e.environment,s,l).subscribe({error:function(){t.dispatch({__type:"MARK_URL_FAILED_DETECTION",url:t.url})},next:function(n){var e,r=(e=n.link_preview)==null?void 0:e.composer_post_confirmation_renderer;_?i.confirmationRenderer=r:t.dispatch({__type:"SET_DETECTION_RESULT",confirmationRenderer:r,url:t.url})}}),_=!1,babelHelpers.extends({},u(e,t.url),{misinformationRecords:babelHelpers.extends({},e.misinformationRecords,(n={},n[t.url]=i,n))});case"UNTRACK_COMPOSED_URL":return c(e,t.url);default:return t.__type}}l.default=p}),98);
__d("useMisinformationState",["CometRelay","cometMisinformationLinkDetectorPluginInternalStateReducer","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useMemo,c=s.useReducer,d=s.useState;function m(e){var t=o("react-compiler-runtime").c(10),n=o("CometRelay").useRelayEnvironment(),a;t[0]!==e?(a=new Set(e==null?void 0:e.values()),t[0]=e,t[1]=a):a=t[1];var i;t[2]===Symbol.for("react.memo_cache_sentinel")?(i={},t[2]=i):i=t[2];var l;t[3]!==n||t[4]!==a?(l={composedURLs:a,environment:n,misinformationRecords:i},t[3]=n,t[4]=a,t[5]=l):l=t[5];var s=l,u=c(r("cometMisinformationLinkDetectorPluginInternalStateReducer"),s),m=u[0],p=u[1],_=m.composedURLs,f=m.misinformationRecords,g=d("COMPOSING"),h=g[0],y=g[1],C;return t[6]!==_||t[7]!==h||t[8]!==f?(C={composedURLs:_,composerPhase:h,dispatch:p,misinformationRecords:f,setComposerPhase:y},t[6]=_,t[7]=h,t[8]=f,t[9]=C):C=t[9],C}l.default=m}),98);
__d("CometComposerMisinformationLinkDetectorPluginForLexical.react",["JSResourceForInteraction","Lexical","LexicalLink","getInitialComposerLinkData","handlePendingMisinformationOnComposerSubmit","hasNoLinksToAnalyze","maybeTriggerMisinformationDialog","react","react-compiler-runtime","useCometLazyDialog","useComposerPreSubmitHook","useMisinformationState","withComposerViewStatePart"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useMemo,m=s.useRef,p=r("JSResourceForInteraction")("CometMisinformationLinkComposerConfirmationDialog.react").__setRef("CometComposerMisinformationLinkDetectorPluginForLexical.react");function _(e){var t=o("react-compiler-runtime").c(43),n=e.composerType,a=e.editor,i=e.linkAttachment,l;t[0]!==a?(l=r("getInitialComposerLinkData")(a),t[0]=a,t[1]=l):l=t[1];var s=l,u=r("useMisinformationState")(s),d=u.composedURLs,_=u.composerPhase,g=u.dispatch,h=u.misinformationRecords,y=u.setComposerPhase,C=m(s),b=m(null),v=r("useCometLazyDialog")(p),S=v[0],R=m(!1),L;t[2]!==d||t[3]!==g?(L=function(t,n){var e=n.getEditorState().read(function(){return t.getTextContent()}),r=C.current;r.has(t.getKey())||r.set(t.getKey(),e),d.has(e)||g({__type:"TRACK_COMPOSED_URL",dispatch:g,url:e})},t[2]=d,t[3]=g,t[4]=L):L=t[4];var E=L,k;t[5]!==g||t[6]!==(i==null?void 0:i.url)?(k=function(t){var e=C.current,n=e.get(t);n!=null&&(i==null?void 0:i.url)!==n&&g({__type:"UNTRACK_COMPOSED_URL",url:n}),e.delete(t)},t[5]=g,t[6]=i==null?void 0:i.url,t[7]=k):k=t[7],i==null||i.url;var I=k,T;t[8]!==d||t[9]!==g||t[10]!==(i==null?void 0:i.url)?(T=function(){var e=i==null?void 0:i.url;e!=null&&(d.has(e)||g({__type:"TRACK_COMPOSED_URL",dispatch:g,url:e}))},t[8]=d,t[9]=g,t[10]=i==null?void 0:i.url,t[11]=T):T=t[11];var D;t[12]!==d||t[13]!==g||t[14]!==i?(D=[d,g,i],t[12]=d,t[13]=g,t[14]=i,t[15]=D):D=t[15],c(T,D);var x,$;t[16]!==d||t[17]!==_||t[18]!==n||t[19]!==g||t[20]!==h||t[21]!==S?(x=function(){if(n!=="share"){b.current=h;var e=function(){R.current=!0},t=function(){R.current=!1};r("maybeTriggerMisinformationDialog")({composedURLs:d,composerPhase:_,composerType:n,dialogIsOpen:R,dispatch:g,misinformationRecords:h},{onCloseDialog:t,onTriggerDialog:e,openConfirmationDialog:S})}},$=[d,_,n,g,h,S],t[16]=d,t[17]=_,t[18]=n,t[19]=g,t[20]=h,t[21]=S,t[22]=x,t[23]=$):(x=t[22],$=t[23]),c(x,$);var P;t[24]===Symbol.for("react.memo_cache_sentinel")?(P=[],t[24]=P):P=t[24];var N=m(P),M,w;t[25]!==d||t[26]!==h?(w=function(){var e=Array.from(d);r("handlePendingMisinformationOnComposerSubmit")(e,h,N)},M=[d,h],t[25]=d,t[26]=h,t[27]=M,t[28]=w):(M=t[27],w=t[28]),c(w,M);var A;t[29]!==d||t[30]!==g||t[31]!==a||t[32]!==(i==null?void 0:i.url)||t[33]!==h||t[34]!==y?(A=function(t){var e=t.onContinue,n=t.onHalt;y("COMMITTING"),N.current.push({onContinue:function(){y("COMPOSING"),e()},onHalt:function(){y("COMPOSING"),n()}});var o=r("hasNoLinksToAnalyze")(d,h,a,i==null?void 0:i.url);if(o){var l=[].concat(N.current);N.current.length=0,l.forEach(f)}else g({__type:"EXIT_COOLDOWN_PERIOD"})},t[29]=d,t[30]=g,t[31]=a,t[32]=i==null?void 0:i.url,t[33]=h,t[34]=y,t[35]=A):A=t[35];var F=A;r("useComposerPreSubmitHook")(F);var O,B;t[36]===Symbol.for("react.memo_cache_sentinel")?(O=function(){return(function(){var e=b.current;e!==null&&Object.keys(e).forEach(function(t){var n=e[t];n!=null&&n.dispose()})})},B=[],t[36]=O,t[37]=B):(O=t[36],B=t[37]),c(O,B);var W,q;t[38]!==I||t[39]!==a||t[40]!==E?(W=function(){if(a!=null)return a.registerMutationListener(o("LexicalLink").AutoLinkNode,function(e){var t=a.getEditorState();e.forEach(function(e,n){var r=t.read(function(){return o("Lexical").$getNodeByKey(n)});e==="created"&&r!=null?E(r,a):e==="destroyed"&&I(n)})},{skipInitialization:!0})},q=[I,a,E],t[38]=I,t[39]=a,t[40]=E,t[41]=W,t[42]=q):(W=t[41],q=t[42]),c(W,q)}function f(e){var t=e.onContinue;t()}var g=r("withComposerViewStatePart")(_,function(e){return{editor:e.lexicalEditor,linkAttachment:e.linkAttachment}});l.default=g}),98);