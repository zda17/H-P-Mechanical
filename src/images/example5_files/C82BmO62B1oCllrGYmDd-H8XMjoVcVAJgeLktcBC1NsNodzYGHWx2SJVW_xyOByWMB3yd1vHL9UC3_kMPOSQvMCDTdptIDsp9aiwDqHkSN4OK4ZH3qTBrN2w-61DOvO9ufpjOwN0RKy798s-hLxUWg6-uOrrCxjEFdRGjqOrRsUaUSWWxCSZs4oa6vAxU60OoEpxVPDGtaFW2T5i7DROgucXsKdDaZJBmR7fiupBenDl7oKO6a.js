;/*FB_PKG_DELIM*/

__d("EncryptedBackupsResignCdnUrl",["MAWBridge","MAWConfig","MAWLoggerUtils","WAJids","WAPromiseDelays","WAResolvable","WAResultOrError","cr:10071","getSafeQplErrorMessage"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Map;function u(e){return s.get(e)}function c(t){var n=t.deliveryObjectId,r=t.logger,a=t.mediaDownloadFlow,i=t.mediaKey,l=t.mediaType,s=t.msgId,u=t.protocolMsgId,c=t.sortOrderMs;return a.addPoint("resign_cdn_url_start"),d({deliveryObjectId:n,mediaDownloadFlow:{addAnnotations:function(t){a==null||a.addAnnotations(babelHelpers.extends({},t))},addPoint:function(t,n){a==null||a.addPoint(t,babelHelpers.extends({},n))}},mediaKey:i,mediaType:l,msgId:s,protocolMsgId:u,sortOrderMs:c}).then(function(e){return e.success?(a==null||a.addPoint("resign_cdn_url_end"),e):(a.addPoint("resign_cdn_url_fail",{string:{resignCdnUrlFailReason:e.error}}),e)}).catch(function(t){return r.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["resignCdnUrl runtime-error: ",""])),t),a.addPoint("resign_cdn_url_fail",{string:{resignCdnUrlFailReason:o("getSafeQplErrorMessage").getSafeQPLErrorMessage(t)}}),o("WAResultOrError").makeError("resign-cdn-url-runtime-error")})}async function d(e){var t=e.deliveryObjectId,r=e.mediaDownloadFlow,a=e.mediaKey,i=e.mediaType,l=e.msgId,u=e.protocolMsgId,c=e.sortOrderMs;if(n("cr:10071")!==null){var d=await n("cr:10071").eblsResignCdnUrlWithGraphQL({chatJid:u.chat,deliveryObjectId:t,externalId:u.externalId,mediaDownloadFlow:r,mediaKey:a,mediaType:i,sortOrderMs:c});return d.success?o("WAResultOrError").makeResult(d.value):d}else{var m=o("MAWLoggerUtils").getInstanceKey(),p=new(o("WAResolvable")).Resolvable;return s.set(m,p),o("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"ResignAttachmentCDNUrl",value:{deliveryObjectId:t,mediaType:i,messageId:u.externalId,msgId:l,productType:o("MAWConfig").getConfig().productTypeForEBAttachments,skipLegacyMediaDownloadFlow:!0,sortOrder:c,threadId:o("WAJids").threadIdForChatJid(u.chat),threadJid:u.chat,traceId:m}}]}),o("WAPromiseDelays").withTimeout(p.promise,900*1e3,function(){return o("WAResultOrError").makeError("resign-cdn-url-timeout")}).finally(function(){s.delete(m)})}}l.getRestoredCdnUrlResolvable=u,l.resignCdnUrl=c}),98);
__d("MAWAdminWriteUserDeviceMsgTxn",["MAWAckLevel","MAWAdminMsgHelpers","MAWDbMsgTxns","MAWDexieTable","MAWExternalId","MAWGetUserDeviceChangeAdminType","MAWLocalizationType","MAWLocalizationUtils","MAWMsgType","MAWUserJidWrapper","MAWWriteMsgTxns","WAJids","WATimeUtils","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e={add:"add",remove:"remove",update:"update"};function s(e,t,n,a,i){return o("MAWDbMsgTxns").getIsThreadEmpty(e,n.jid).then(function(l){if(l)return o("MAWDexieTable").dexieResolve();var s=t===o("MAWUserJidWrapper").getMyUserJid(),u=o("MAWGetUserDeviceChangeAdminType").getUserDeviceAdminType(a,s),c=s?[]:[o("WAJids").userIdFromJid(t)],d=o("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:c,adminType:u,version:1},n.jid,o("MAWExternalId").generateExternalId(),i);return o("MAWWriteMsgTxns").writeMsg(e,d,n).then(r("emptyFunction"))})}function u(e,t,n,a){var i=o("MAWAdminMsgHelpers").UNKNOWN_USER,l=t===o("MAWUserJidWrapper").getMyUserJid(),s={ack:o("MAWAckLevel").ACK.received,altIndex:void 0,author:l?o("WAJids").AUTHOR_ME:t,externalId:o("MAWExternalId").generateExternalId(),msgContent:{adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE,authorName:i},threadJid:n.jid,ts:a!=null?a:o("WATimeUtils").unixTime(),type:o("MAWMsgType").MSG_TYPE.ICDC_ALERT};return o("MAWWriteMsgTxns").writeMsg(e,s,n).then(r("emptyFunction"))}l.DeviceChange=e,l.writeUserDeviceAdminMsg=s,l.writeICDCAlert=u}),98);
__d("MAWCreateMaybeAddPointForMediaRender",["MAWQplProxy","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return function(t,n){e!=null&&o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(25302828,"2195"),t,{annotations:n,instanceKey:e},!0)}}l.createMaybeAddPointForMediaRender=e}),98);
__d("MAWDbAddDeviceChangeAlertsTxn",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e.deviceChangeAlerts.add(t)}i.addDeviceChangeAlertsTxn=e}),66);
__d("MAWDbDeviceChangeAlerts",[],(function(t,n,r,o,a,i){"use strict";var e="add",l="keyChange",s="remove";function u(e){return e}i.ADD=e,i.KEY_CHANGE=l,i.REMOVE=s,i.unsafeCoerceToDeviceChangeAlertsID=u}),66);
__d("WAFindMostRecentMediaEntry",["WAMediaUtils","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=null;for(var n of e){var r,a,i=n[0],l=n[1],s=o("WAMediaUtils").decodeMediaEntryData(l);(((r=t)==null?void 0:r[1].mediaKeyTimestamp)==null||s.mediaKeyTimestamp!=null&&s.mediaKeyTimestamp>((a=t)==null?void 0:a[1].mediaKeyTimestamp))&&(t=[i,s])}return t!=null?o("WAResultOrError").makeResult(t):o("WAResultOrError").makeError("no-media-entry")}l.findMostRecentMediaEntry=e}),98);
__d("MAWGetMostRescentDecodedMediaEntry",["MAWDbMediaTxns","MAWIndexedDb","MAWTransactionMode","MWFBLogger","WAFindMostRecentMediaEntry","WAHashUtils","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("MWFBLogger").MWMediaLogger().tags(["getMostRecentDecodedMediaEntry"]),u=o("MAWIndexedDb").makeMsgrTransactor({media:o("MAWTransactionMode").READONLY},"getMediaEntries",function(t){return function(n){return o("MAWDbMediaTxns").maybeGetMediaFromPlaintextHash(t,n).then(function(t){return t?o("WAResultOrError").makeResult(t.mediaEntries):(s.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["No existing media entry found for plaintextHash ",". Returning new MsgMap."])),o("WAHashUtils").sanitisePlaintextHash(n)),o("WAResultOrError").makeError("no-media-by-plaintext-hash"))})}});async function c(e){var t=await u(e);if(t.success===!1)return t;var n=o("WAFindMostRecentMediaEntry").findMostRecentMediaEntry(t.value);return n.success===!1?n:o("WAResultOrError").makeResult(n.value[1])}l.getMediaEntries=u,l.getMostRecentDecodedMediaEntry=c}),98);
__d("MAWGetProtocolMsgIdAndSortOrderMsApi",["MAWIndexedDb","MAWTransactionMode","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MAWIndexedDb").makeMsgrTransactor({messages:o("MAWTransactionMode").READONLY},"getProtocolMsgIdAndSortOrderMs",function(e){return function(t){return e.messages.get({msgId:t}).then(function(e){if(e==null)return null;var t=e.sortOrderMs;if(t==null||o("WAJids").isAuthorSystem(e.author))return null;var n={author:e.author,chat:e.threadJid,externalId:e.externalId};return{protocolMsgId:n,sortOrderMs:t}})}});l.getProtocolMsgIdAndSortOrderMs=e}),98);
__d("WATypedArraysConcat",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){n===void 0&&(n=0);var r=t.reduce(function(e,t){return e+t.length},n),o=new e(r),a=0;return t.forEach(function(e){o.set(e,a),a+=e.length}),o}i.concatTypedArrays=e}),66);
__d("WACryptoAesCbc",["WABinary","WACryptoDependencies","WAPromiseDelays","WATypedArraysCast","WATypedArraysConcat","err"],(function(t,n,r,o,a,i,l){"use strict";var e=16,s=1024,u=16,c=1024*1024,d=e*c,m=(function(){function t(e,t,n,r){this.$4=null,this.$6=!1,this.$1=e,this.$2=t,this.$3=n;var a={name:"AES-CBC",iv:r};this.$5=o("WACryptoDependencies").getCrypto().subtle.importKey("raw",n,"AES-CBC",!1,[t]).then(function(e){return{algo:a,key:e}})}var n=t.prototype;return n.append=function(n){var t=this;this.$7("append");var r,a=this.$4;if(a)if(a.writeByteArray(n),a.size()>s){var i=a.size()%e;r=a.readByteArrayView(a.size()-i),a.size()||(this.$4=null)}else r=null;else if(n.length>s){var l=n.length%e;l?(this.$4=new(o("WABinary")).Binary(n),r=this.$4.readByteArrayView(n.length-l)):r=n}else this.$4=new(o("WABinary")).Binary(n),r=null;var u=r;return u&&(this.$5=this.$5.then(function(n){var r=n.key,a=n.algo;if(t.$2==="encrypt")return o("WACryptoDependencies").getCrypto().subtle.encrypt(a,r,u).then(function(n){return t.$1.writeByteArray(new Uint8Array(n,0,n.byteLength-e)),new Uint8Array(n,n.byteLength-2*e,e)});var i=u.slice(-e);return o("WACryptoDependencies").getCrypto().subtle.decrypt(a,r,u).then(function(e){return t.$1.writeBuffer(e),i})}).then(function(e){var n={name:"AES-CBC",iv:e};return o("WACryptoDependencies").getCrypto().subtle.importKey("raw",t.$3,"AES-CBC",!1,[t.$2]).then(function(e){return{algo:n,key:e}})})),this.$5.then(function(){})},n.finalize=function(t){var e=this;this.$7("finalize");var n;if(this.$4){var r=this.$4;t&&r.writeByteArray(t),n=r.readByteArrayView(),this.$4=null}else t&&(n=t);if(n){var a=n;return this.$5.then(function(t){var n=t.algo,r=t.key;return e.$2==="encrypt"?o("WACryptoDependencies").getCrypto().subtle.encrypt(n,r,a):o("WACryptoDependencies").getCrypto().subtle.decrypt(n,r,a)}).then(function(t){e.$1.writeBuffer(t)})}else return this.$5.then(function(){})},n.$7=function(t){if(this.$6)throw r("err")("AesCbcStream."+t+" called after finalize")},t})();function p(e){return{name:"AES-CBC",iv:o("WATypedArraysCast").castTypedArrays(Uint8Array,e)}}function _(e){return o("WACryptoDependencies").getCrypto().subtle.importKey("raw",o("WATypedArraysCast").castTypedArrays(Uint8Array,e),"AES-CBC",!1,["encrypt"])}function f(e){if(e)return o("WATypedArraysCast").castTypedArrays(Uint8Array,e);var t=new Uint8Array(u);return o("WACryptoDependencies").getCrypto().getRandomValues(t),t}function g(t){var n=t.byteLength,r=e-n%e;return Number.isNaN(r)?n:n+r}function h(e,t,n){var r=p(t);return Promise.resolve(o("WACryptoDependencies").getCrypto().subtle.importKey("raw",o("WATypedArraysCast").castTypedArrays(Uint8Array,e),"AES-CBC",!1,["decrypt"])).then(function(e){return o("WACryptoDependencies").getCrypto().subtle.decrypt(r,e,n)})}function y(e,t){return Promise.resolve().then(function(){var n=t.slice(0,u),r=t.slice(u);return h(e,n,r)})}function C(e,t,n){return Promise.resolve().then(function(){var r=f(n),a=p(r);return Promise.resolve(_(e)).then(function(e){return o("WACryptoDependencies").getCrypto().subtle.encrypt(a,e,t)}).then(function(e){return o("WATypedArraysConcat").concatTypedArrays(Uint8Array,[r,new Uint8Array(e)]).buffer})})}async function b(t){var n=t.encKey,a=t.plaintext,i=t.optionalIv,l=t.chunkSize,s=l===void 0?d:l,u=t.delayInBetween,c=u===void 0?!1:u;if(s%e!==0)throw r("err")("chunkSize must be a multiple of "+e+", "+s+" received");var m=await _(n),p=new Uint8Array(a),h=Math.ceil(p.byteLength/s),y=f(i),C=new Uint8Array(g(p)+y.byteLength);C.set(y);for(var b=0,S=y,R;b<h;b++){var L=b===h-1,E=b*s;R=p.subarray(E,E+s);var k=await v(L,R,S,m),I=k.encryptedChunk,T=k.nextIv;C.set(I,y.byteLength+b*s),S=T,c===!0&&await o("WAPromiseDelays").releaseToMainThread()}return C.buffer}async function v(t,n,r,a){var i=await o("WACryptoDependencies").getCrypto().subtle.encrypt(p(r),a,n).then(function(n){return t?new Uint8Array(n):new Uint8Array(n).subarray(0,-e)}),l=i.slice(-e);return{encryptedChunk:i,nextIv:l}}l.AES_CBC_BLOCK_SIZE=e,l.AesCbcStream=m,l.importRawKey=_,l.getIv=f,l.aesCbcDecrypt=h,l.aesCbcDecryptSplit=y,l.aesCbcEncrypt=C,l.aesCbcEncryptWithChunking=b,l.aesCbcEncryptChunk=v}),98);
__d("WAConcurrentIterate",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){for(var r=[],o=[],a=0,i=async function(){for(;a<e;){var n=a;a++,o[n]=await t(n)}},l=Math.min(e,n),s=0;s<l;s++)r.push(i());return Promise.all(r).then(function(){return o})}i.concurrentIterate=e}),66);
__d("WAMediaCryptoSidecar",["WAConcurrentIterate","WACryptoHmac","WAMediaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e==="video"}var s=16,u=10,c=64*1024;function d(e,t,n){n===void 0&&(n=1);var r=t.buffer.byteLength,a=Math.ceil((r-s)/c),i=new Uint8Array(u*a);return o("WAConcurrentIterate").concurrentIterate(a,function(n){var r=n*c,a=r+s+c,l=t.subarray(r,a);return o("WACryptoHmac").sign(e,l).then(function(e){var t=new Uint8Array(e,0,u);i.set(t,n*u)})},n).then(function(){return o("WAMediaUtils").castToStreamingSidecar(i.buffer)})}l.shouldHaveStreamingSidecar=e,l.calculateStreamingSidecar=d}),98);
__d("WAMediaHkdfInfo",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case"document":return"WhatsApp Document Keys";case"image":case"sticker":case"xma-image":return"WhatsApp Image Keys";case"video":case"gif":return"WhatsApp Video Keys";case"audio":case"ptt":return"WhatsApp Audio Keys";case"md-app-state":return"WhatsApp App State Keys";case"md-msg-hist":return"WhatsApp History Keys";default:throw r("err")("getMediaHkdfInfo: unexpected media type "+e)}}function s(){return"Messenger Preview Keys"}l.getMediaHkdfInfo=e,l.getPreviewMediaHkdfInfo=s}),98);
__d("WAMediaCrypto",["WABinary","WACryptoAesCbc","WACryptoDependencies","WACryptoHkdf","WACryptoHmac","WACryptoSha256","WACryptoUtils","WACustomError","WAHashUtils","WALogger","WAMediaCryptoSidecar","WAMediaHkdfInfo","WATagsLogger","WATypedArraysConcat","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("WATagsLogger").TAGS(["WAMediaCrypto"]),d=o("WACustomError").customError("HmacValidationError",!1),m=new Uint8Array([2,2]);function p(e,t){return o("WACryptoHkdf").extractAndExpand(new Uint8Array(e),t,112).then(function(e){return{iv:new Uint8Array(e,0,16),cipherKey:new Uint8Array(e,16,32),hmacKey:new Uint8Array(e,48,32),refKey:new Uint8Array(e,80,32)}})}function _(e,t){var n=o("WAMediaHkdfInfo").getMediaHkdfInfo(t);return p(e,n)}function f(e){var t=o("WAMediaHkdfInfo").getPreviewMediaHkdfInfo();return p(e,t)}async function g(e){var t=new Map,n=await f(e);t.set("preview",n);var r=["document","image","video","audio","md-app-state","md-msg-hist"];return await Promise.all(r.map(function(n){return _(e,n).then(function(e){t.set(n,e)})})),t}function h(e){switch(e){case"image":case"video":return e;default:return null}}var y=16,C=16,b=10,v=64*1024;async function S(e,t,n,r,a){var i=new(o("WABinary")).Binary;i.ensureCapacity(C+r.byteLength+y+b),i.writeByteArray(t);for(var l=new(o("WACryptoAesCbc")).AesCbcStream(i,"encrypt",e,t),s=0,u=s+v;u<r.byteLength;){var c=r.slice(s,u);await l.append(new Uint8Array(c)),s=u,u+=v}var d=await r.slice(s);await l.finalize(new Uint8Array(d));var m=i.peek(function(e){return e.readByteArrayView()}),p=await o("WACryptoHmac").encodeKeySha256(n),_=await o("WACryptoHmac").sign(p,m);i.writeByteArray(new Uint8Array(_,0,b));var f=i.readByteArrayView(),g=f.subarray(C),h=await Promise.all([o("WACryptoDependencies").getCrypto().subtle.digest("SHA-256",g),o("WAMediaCryptoSidecar").shouldHaveStreamingSidecar(a)?o("WAMediaCryptoSidecar").calculateStreamingSidecar(p,f):void 0]),S=h[0],R=h[1];return{ciphertext:g,ciphertextHash:S,sidecar:R,ivCiphertext:m,ivCiphertextHmac:f}}async function R(e,t,n){var r=await o("WACryptoHmac").encodeKeySha256(e),a=o("WABinary").Binary.build(t,n).readByteArrayView();return o("WACryptoHmac").sign(r,a)}async function L(e,t,n,r,a){if(!(10<=a.length&&a.length<=32))throw new d("Bad hmac size "+a.length);var i=o("WABinary").Binary.build(t,n).readByteArrayView(),l=await o("WACryptoHmac").hmacSha256(r,i).then(function(e){return new Uint8Array(e)}),s=l.slice(0,a.length);if(!T(s,a))throw new d("hmacAndDecrypt hmac mismatch");var u=await o("WACryptoAesCbc").aesCbcDecrypt(e,t,n),c=await o("WACryptoDependencies").getCrypto().subtle.digest("SHA-256",u);return{plaintextHash:o("WAHashUtils").toPlaintextHash(c),plaintext:u}}function E(e,t,n,r,a){if(!(10<=a.length&&a.length<=32))throw new d("Bad hmac size "+a.length);var i=o("WATypedArraysConcat").concatTypedArrays(Uint8Array,[t,n]);return o("WACryptoHmac").hmacSha256(r,i,a.length).then(function(e){return new Uint8Array(e)}).then(function(e){if(!o("WACryptoUtils").uint8ArraysEqual(e,a))throw new d("hmacAndDecrypt hmac mismatch")}).then(function(){var e=n.byteLength%y===b;return e===!0?n.subarray(0,-10):n}).then(function(n){return k(e,t,n)})}function k(e,t,n){var r=n.subarray(-y);return o("WACryptoAesCbc").aesCbcEncrypt(e,m,r).then(function(e){return e.slice(C)}).then(function(e){return o("WABinary").Binary.build(n,e).readByteArrayView()}).then(function(n){return o("WACryptoAesCbc").aesCbcDecrypt(e,t,n)}).then(function(e){return new Uint8Array(e,0,e.byteLength-m.byteLength)}).then(function(e){return{plaintext:e,nextIv:r}})}async function I(t,n,a,i,l,d){l>d.scanLengths.length&&c.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["decryptPartialChunks targetScan greater length of scanLength array"])));var m=Math.min(l,d.scanLengths.length);if(m<1)throw c.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Unable to decrypt partial due to invalid target scan"]))),r("err")("Unable to decrypt partial due to invalid target scan");for(var p=new(o("WABinary")).Binary,_=[],f=0;f<m;f++)_.push(new Uint8Array(d.sidecar,f*10,10));for(var g=0,h=n,y=0,C=0;C<m;C++){o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Processing scan ",""])),C);var b=d.alignedScanLengths[C],v=g+b,S=a.subarray(g,v),R=await E(t,h,S,i,_[C]),L=R.plaintext,k=R.nextIv;p.write(L),g+=b,h=k,y+=d.scanLengths[C]}var I=p.readBuffer(y),T=await o("WACryptoSha256").sha256(I);return{plaintextHash:o("WAHashUtils").toPlaintextHash(T),plaintext:I}}function T(e,t){if(e.length!==t.length)return!1;for(var n=1,r=e.length,o=0;o<r;o++)n&=e[o]===t[o]?1:0;return n!==0}l.HmacValidationError=d,l.DEFAULT_PADDING=m,l.computeMediaKeys=_,l.computeMediaKeysForPreview=f,l.deprecated_getAllCommonComputedMediaKeys=g,l.convertServerMediaTypeToPreviewMediaType=h,l.CBC_BLOCK_SIZE=y,l.IV_LENGTH=C,l.HMAC_LENGTH=b,l.encryptAndHmac=S,l.hmacCiphertext=R,l.hmacAndDecrypt=L,l.hmacAndDecryptPartial=E,l.decryptPartialChunks=I}),98);
__d("WAAlignChunkLengthsToMultipleOfAesBlockSize",[],(function(t,n,r,o,a,i){"use strict";function e(e){return parseInt((e+15)/16,10)*16}function l(t,n){for(var r=[],o=0,a=0,i=0,l=0;l<t.length;++l)if(o+=t[l],l===t.length-1&&n!=null&&n>0){o>a?r.push(n-a):(r.pop(),r.push(n-i));break}else if(o>a){var s=e(o-a);i=a,r.push(s),a+=s}return r}i.alignChunkSizeToMultipleAesBlockSize=e,i.alignChunkLengthsToMultipleOfAesBlockSize=l}),66);
__d("WAProgressiveJpegAlignScanLengths",["WAAlignChunkLengthsToMultipleOfAesBlockSize"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.scanLengths,n=e.totalEncryptedBytes;return o("WAAlignChunkLengthsToMultipleOfAesBlockSize").alignChunkLengthsToMultipleOfAesBlockSize(t.map(function(e){return e}),n).map(function(e){return e})}function s(e){return e}l.progressiveJpegAlignChunkLengthsToMultipleOfAesBlockSize=e,l.toProgressiveJpegAlignedScanLength=s}),98);
__d("WAProgressiveJpegGetPJpegDetails",["WAMediaCrypto","WAProgressiveJpegAlignScanLengths","WAProgressiveJpegGetScanLengths","WAResultOrError","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("WATagsLogger").TAGS(["WAProgressiveJpegDetails"]);function m(e){var t=e.progressiveJpegDetails,n=e.ciphertextLength;return babelHelpers.extends({},t,{alignedScanLengths:o("WAProgressiveJpegAlignScanLengths").progressiveJpegAlignChunkLengthsToMultipleOfAesBlockSize({scanLengths:t.scanLengths,totalEncryptedBytes:n})})}async function p(e,t,n){var r=t.byteLength-o("WAMediaCrypto").IV_LENGTH,a=o("WAProgressiveJpegGetScanLengths").getProgressiveJpegScanLengths(e),i=o("WAProgressiveJpegAlignScanLengths").progressiveJpegAlignChunkLengthsToMultipleOfAesBlockSize({scanLengths:a,totalEncryptedBytes:r}),l=await _(i,t,n);return{scanLengths:a,sidecar:l}}async function _(e,t,n){for(var r=new Uint8Array(e.length*10),a=0,i=0,l=t.slice(0,16),s=t.slice(16),u=0;u<e.length;u++){var c=e[u];i=a+c;var d=s.subarray(a,i),m=(await o("WAMediaCrypto").hmacCiphertext(n,l,d)).slice(0,10);r.set(new Uint8Array(m),u*10),l=d.slice(d.length-16,d.length),a=i}return r.buffer}function f(t){return t.sidecar.byteLength%o("WAMediaCrypto").HMAC_LENGTH!==0?(d.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Progressive Jpeg sidecar has an invalid length"]))),o("WAResultOrError").makeError("pjpeg-check-sidecar-invalid-length")):t.scanLengths.length>0&&t.sidecar.byteLength===0?(d.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Progressive Jpeg sidecar is missing"]))),o("WAResultOrError").makeError("pjpeg-check-no-sidecar")):t.scanLengths.length===0?o("WAResultOrError").makeResult(!1):t.scanLengths.length*o("WAMediaCrypto").HMAC_LENGTH!==t.sidecar.byteLength?(d.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Progressive Jpeg sidecar size mismatch"]))),o("WAResultOrError").makeError("pjpeg-check-scan-length-mismatch")):t.scanLengths.length<3?(d.WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Progressive Jpeg has too few scans"]))),o("WAResultOrError").makeError("pjpeg-too-few-scans")):o("WAResultOrError").makeResult(!0)}function g(e,t){var n=0;if(t===0)return 0;for(var r=0;r<t;r++){var o=e[r];o!=null&&(n+=o)}return n}function h(e){var t=e.progressiveJpegDetails;if(t==null)return o("WAResultOrError").makeResult(null);var n=f(t);return n.success===!1?n:n.value===!0?o("WAResultOrError").makeResult({scanLengths:t.scanLengths,sidecar:t.sidecar}):o("WAResultOrError").makeResult(null)}l.getExtendedProgressiveJpegDetails=m,l.getProgressiveJpegDetails=p,l.isValidProgressiveJpegDetails=f,l.getTotalByteSizeForScan=g,l.maybeGetProgressiveJpegDetailsUsingMediaEntry=h}),98);
__d("WADownloadDownloadablePreview",["WADownloadMedia","WAMediaCrypto","WAProgressiveJpegGetPJpegDetails","WAResultOrError","WAStartMediaDownloadQplFlow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_=o("WADownloadMedia").mediaDownloadLogger.TAGS(["DownloadDownloadablePreview"]);async function f(t,n,r,a,i,l,f){var g=l.handleMediaPreviewBeforeDownload,h=l.handleMediaPreviewDownloadFailed,y=a.downloadableThumbnail,C=y==null?void 0:y.directPath,b=C!=null,v=o("WAProgressiveJpegGetPJpegDetails").maybeGetProgressiveJpegDetailsUsingMediaEntry(a);if(_.LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["thumbnail_available: ",""])),b),y==null||C==null)return _.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["No downloadableThumbnail. Skipping..."]))),o("WAResultOrError").makeError("preview-not-supported");_.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["DownloadableThumbnail exists. Attempting to download."])));var S=y.fileEncSha256,R=y.fileSha256,L=y.mediaKey,E=y.objectId,k=o("WAStartMediaDownloadQplFlow").startMediaDownloadQplFlow({protocolMsgId:t,downloadEntry:i,msgType:null,triggerUIView:f,isPreview:!0});if(k.addAnnotations({bool:{duplicateDirectPath:C===a.directPath,isProgressiveJpeg:v.success===!0,hasObjectId:E!=null},string:{mediaType:"preview",fullSizeMediaType:a.serverMediaType}}),k.addPoint("wa_protocol_media_download_start"),C==null||S==null||R==null||L==null)return _.ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["media: mediaPreview - mediaEntryData "," is incomplete for media preview"])),a),k.endFail("wa_protocol_media_download_fail",{string:{wa_protocol_media_download_fail_reason:"preview-incomplete-media-entry"}}),o("WAResultOrError").makeError("media-entry-invalid");var I=o("WAMediaCrypto").convertServerMediaTypeToPreviewMediaType(r);if(I==null)return _.ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["media: mediaPreview - unsupported preview media type ",""])),r),k.endFail("wa_protocol_media_download_fail",{string:{wa_protocol_media_download_fail_reason:"preview-unsupported-type"}}),o("WAResultOrError").makeError("request-error");await g(n);var T=await o("WADownloadMedia").downloadMediaImpl({downloadFlow:k,mediaTypeDetails:{messageType:I,type:"preview"},directPath:C,fileEncSha256:S,fileSha256:R,mediaKey:L});return T.success===!1?(_.WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["failed to download media. Reason: ",""])),T.error),h(n,T.error),k.endFail("wa_protocol_media_download_fail",{string:{wa_protocol_media_download_fail_reason:T.error}}),T):(_.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["finished downloading"]))),k.addPoint("wa_protocol_media_download_end"),k.endSuccess(),o("WAResultOrError").makeResult(T.value))}l.maybeDownloadDownloadablePreview=f}),98);
__d("WADecryptMedia",["WAMediaCrypto","WAResultOrError","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_=o("WATagsLogger").TAGS(["WADecryptMedia"]);async function f(t,n,r,a){_.WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Encountered enc-hash-mismatch - looking for a potential working hmac salt"])));var i=r.type==="preview"?"preview":r.mediaType,l=await o("WAMediaCrypto").deprecated_getAllCommonComputedMediaKeys(a),d;for(var m of l){var p=m[0],f=m[1];try{if(p===i)continue;_.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Trying "," as an alternative hmac salt."])),p);var g=o("WAResultOrError").makeResult(await o("WAMediaCrypto").hmacAndDecrypt(f.cipherKey,f.iv,t,f.hmacKey,n));return d={hmacAndDecryptResult:g,alternativeHmacSaltUsed:p},_.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Found a working hmac salt using ","."])),p),d}catch(e){_.LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose([""," is not a working hmac salt."])),p);continue}}return{hmacAndDecryptResult:o("WAResultOrError").makeError("enc-hash-mismatch")}}async function g(e){var t=e.ciphertextHmac,n=e.mediaKey,r=e.mediaTypeDetails,a=e.plaintextHash;_.LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Using default plaintext verifier"])));var i=t.byteLength-o("WAMediaCrypto").HMAC_LENGTH,l=new Uint8Array(t,i),s=new Uint8Array(t,0,i),u;r.type==="preview"?u=o("WAMediaCrypto").computeMediaKeysForPreview(n):u=o("WAMediaCrypto").computeMediaKeys(n,r.mediaType);var c,g=null;if(c=await u.then(function(e){var t=e.iv,n=e.cipherKey,r=e.hmacKey;return o("WAMediaCrypto").hmacAndDecrypt(n,t,s,r,l)}).then(o("WAResultOrError").makeResult).catch(function(e){return _.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Download Plaintext Error ",""])),e),e instanceof o("WAMediaCrypto").HmacValidationError?o("WAResultOrError").makeError("enc-hash-mismatch"):o("WAResultOrError").makeError("decryption-error")}),c.success===!1&&c.error==="enc-hash-mismatch"){var h=await f(s,l,r,n);c=h.hmacAndDecryptResult,g=h.alternativeHmacSaltUsed}if(!c.success)return c;var y=c.value,C=y.plaintext,b=y.plaintextHash;return a!==b?o("WAResultOrError").makeError("hash-mismatch"):(_.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Download Plaintext Success"]))),o("WAResultOrError").makeResult({plaintext:C,alternativeHmacSaltUsed:g}))}l.decryptMedia=g}),98);
__d("WAArrayUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(e,t){var n=e.pop();t<e.length&&(e[t]=n)}function*s(e,t){for(var n=0;n<e.length;n+=t)yield e.slice(n,n+t)}function u(t,n){return c(t,n,e)}function c(e,t,n){var r=new Map;for(var o of e){var a,i=t(o),l=(a=r.get(i))!=null?a:[];l.push(n(o)),r.set(i,l)}return r}i.removeIndexWithoutPreservingOrder=l,i.peekEvery=s,i.groupBy=u,i.groupByAndMap=c}),66);
__d("WABaseGlobals",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=null;function s(t){e=t}function u(){if(e==null)throw r("err")("Trying to access WAGlobals before being set");return e}function c(e){var t=u();t.myJids=e}function d(){var e,t=(e=u().myJids)==null?void 0:e.deviceJid;if(t==null)throw r("err")("Trying to access myDeviceJid, but it's not set");return t}function m(){var e,t=(e=u().myJids)==null?void 0:e.userJid;if(t==null)throw r("err")("Trying to access myUserJid, but it's not set");return t}function p(){return u().jidUtils}function _(){return u().qpl}function f(){return e==null?!1:u().newClockSkewCalculation()}l.setGlobals=s,l.setMyJids=c,l.getMyDeviceJid=d,l.getMyUserJid=m,l.getJidUtilsApi=p,l.getQplConfig=_,l.newClockSkewCalculation=f}),98);
__d("WAErrors",["WACustomError"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=o("WACustomError")).customError("BufferTooLarge",!1),u=e.customError("Disconnected",!1),c=e.customError("Offline",!1,u),d=e.customError("MaxRetries",!1),m=e.customError("Aborted",!1);l.BufferTooLargeError=s,l.Disconnected=u,l.Offline=c,l.MaxRetries=d,l.Aborted=m}),98);
__d("WANotifyConnectionChangeFactory",[],(function(t,n,r,o,a,i){"use strict";var e=15e3;function l(t,n,r){r===void 0&&(r=e);var o={timeoutID:null,connectionStatus:"disconnected",optimismLevel:"optimist"},a=function(){var e=o.optimismLevel,t=o.connectionStatus;e==="optimist"?o.timeoutID=setTimeout(function(){o.optimismLevel="realist",n(t)},r):n(t)};return function(e){o.connectionStatus=e,e==="disconnected"||e==="in_handshake"?a():(o.timeoutID!=null&&(clearTimeout(o.timeoutID),o.timeoutID=null),n(e)),t(e)}}i.notifyConnectionChangeFactory=l}),66);
__d("WAPromiseRetryLoop",["Promise","WALogger","WAPromiseBackoffs","WAPromiseDelays","WAResolvable","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g=(function(){function t(e){var t=this;this.$2=new(o("WAResolvable")).Resolvable,this.$3=null,this.$4=null,this.$5=0,this.$6=new(o("WAResolvable")).Resolvable,this.endWithValue=function(e){t.$5++,t.$2.resolve(e)},this.$1=e}var a=t.prototype;return a.resetTimeoutAfter=function(t){this.$4=Date.now()+t},a.cancelReset=function(){this.$4=null},a.reset=function(){this.$2.resolveWasCalled()||(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: resetting ",""])),this.$1.name),this.$5++,this.$6.resolve(),this.$7())},a.start=function(){this.$2.resolveWasCalled()||(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: starting ",""])),this.$1.name),this.$5!==0&&o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop was called several times. You may have race conditions"]))),this.$5++,this.$6.resolve(),this.$7())},a.pauseOnNextIteration=function(){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: pause requested on next iteration"]))),this.$6.resolve(),this.$6=new(o("WAResolvable")).Resolvable},a.unpause=function(){this.$6.resolveWasCalled()||o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: loop unpaused"]))),this.$6.resolve()},a.$7=function(){var e=this,t=this.$1,r=this.$5,a=o("WAPromiseBackoffs").createTimer(this.$1.timer);a();var i=function(){return e.$1.isPauseEnabled!==!0?(f||(f=n("Promise"))).resolve():(e.$6.resolveWasCalled()||o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: loop paused - waiting for unpause"]))),e.$6.promise)},l=function(){if(!e.$2.resolveWasCalled()&&r===e.$5){var n=Date.now();return e.$3=(0,t.code)(e.endWithValue).then(function(){if(!e.$2.resolveWasCalled()){var r=t.resetDelay;(r!==void 0&&Date.now()>=n+r||e.$4!=null&&e.$4<=Date.now())&&(o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: resetting ",""])),t.name),a=o("WAPromiseBackoffs").createTimer(e.$1.timer)),e.$4=null;var s=a();return o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: retrying "," in ","ms"])),t.name,s),o("WAPromiseDelays").delayMs(s).then(i).then(l)}}),e.$3}};this.$3=(f||(f=n("Promise"))).resolve().then(l)},a.promise=function(){var e=this;return this.$2.resolveWasCalled()?this.$2.promise:this.$3?(f||(f=n("Promise"))).race([this.$2.promise,this.$3.then(function(){return e.$2.promise})]):(f||(f=n("Promise"))).reject(r("err")("PromiseRetryLoop "+this.$1.name+" had promise() called before start()"))},t})();l.PromiseRetryLoop=g}),98);
__d("WASmaxInPingsEnums",["WAJids"],(function(t,n,r,o,a,i,l){var e={validators:[o("WAJids").validateDomainJid,o("WAJids").validateUserJid],typeName:"DomainJid|UserJid"};l.DOMAINJID_USERJID=e}),98);
__d("WAWapJid",["$InternalEnum","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e={JID:0,JID_U:1,JID_AD:1,JID_FB:3,JID_INTEROP:4},s=n("$InternalEnum")({WHATSAPP:0,LID:1,HOSTED:128,HOSTED_LID:129}),u=(function(){function t(e){this.$1=e}t.createAD=function(r,o,a){return new t({type:e.JID_AD,user:r,device:a==null?0:a,agent:o==null?0:o,domainType:s.WHATSAPP})},t.createJidU=function(r,o,a){return new t({type:e.JID_U,user:r,device:a==null?0:a,domainType:o==null?s.WHATSAPP:o})},t.createFbJid=function(r,o){var n=o==null?0:o;return new t({type:e.JID_FB,user:r,device:n})},t.createInteropJid=function(r,o,a){var n=o==null?0:o;return new t({type:e.JID_INTEROP,user:r,device:n,integrator:a})},t.create=function(r,o){return new t({type:e.JID,user:r,server:o})};var n=t.prototype;return n.toString=function(){if(this.$1.type===e.JID_AD||this.$1.type===e.JID_U){var t=this.$1,n=t.user,r=t.device,a=t.domainType,i="";return a===s.WHATSAPP?i=o("WAJids").WA_USER_JID_SUFFIX:a===s.HOSTED?i=o("WAJids").HOSTED_SUFFIX:a===s.HOSTED_LID?i=o("WAJids").HOSTED_LID_SUFFIX:i=o("WAJids").LID_SUFFIX,r===0?n+"@"+i:n+":"+r+"@"+i}else if(this.$1.type===e.JID_FB){var l=this.$1,u=l.user,c=l.device,d=o("WAJids").MSGR_USER_JID_SUFFIX;return u+":"+c+"@"+d}else if(this.$1.type===e.JID_INTEROP){var m=this.$1,p=m.user,_=m.device,f=m.integrator,g=o("WAJids").INTEROP_USER_JID_SUFFIX;return f+"-"+p+":"+_+"@"+g}else{this.$1.type;var h=this.$1,y=h.user,C=h.server;return y!=null?y+"@"+C:C}},n.getInnerJid=function(){return this.$1},t})();l.WAP_JID_SUBTYPE=e,l.DomainType=s,l.WapJid=u}),98);
__d("WASmaxParseUtils",["WABase64","WABinary","WACryptoUtils","WADeepEquals","WAHasProperty","WAResultOrError","WAStanzaUtils","WAWapJid","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=o("WAResultOrError").makeResult();function s(t,n){return t.tag!==n?O(t,"to be <"+n+">"):e}function u(e,t){return B(e,t)?W(e,e.attrs[t]):O(e,'to have attribute "'+t+'"')}function c(e,t,n,r){var a=u(e,t);if(!a.success)return a;var i=n(a.value);return i!=null?o("WAResultOrError").makeResult(i):O(e,'to have "'+t+'"={'+r+'}, but instead has "'+a.value+'"')}function d(e,t,n){var r=P(e);if(!r.success)return r;var a=t(r.value);return a!=null?o("WAResultOrError").makeResult(a):O(e,"to have "+n+' content, but instead has "'+r.value+'"')}function m(t,n,r){var o=u(t,n);if(o.success){if(o.value!==r)return O(t,'to have "'+n+'"="'+r+'", but instead has "'+o.value+'"')}else return o;return e}function p(e,t){return c(e,t,o("WAStanzaUtils").toStanzaId,"stanzaID")}function _(e,t){return c(e,t,o("WAStanzaUtils").validateCallId,"callID")}function f(e,t){return c(e,t,q,"integer")}function g(e,t,n,r){var a=f(e,t);if(!a.success)return a;var i=a.value;return n!==void 0&&i<n?O(e,'to have "'+t+'"={at least '+n+"} but has value "+i):r!==void 0&&i>r?O(e,'to have "'+t+'"={at most '+r+"} but has value "+i):o("WAResultOrError").makeResult(i)}function h(e){var t=e.content;return t instanceof Uint8Array?O(e,"to have children"):o("WAResultOrError").makeResult(t)}function y(t,n){var r=h(t);if(!r.success)return r;var a=r.value;if(a==null)return e;for(var i=null,l=0;l<a.length;l++){var s=a[l];if(s.tag===n){if(i!=null)return O(t,"to have 1 child <"+n+">, but found more than 1");i=s}}return o("WAResultOrError").makeResult(i)}function C(t,n,r){var o=y(t,n);return o.success?o.value==null?e:r(o.value):o}function b(e,t,n){var r=C(e,t,n);if(!r.success)return r;var a=r.value;return a==null?O(e,"to have 1 child <"+t+">, but found 0"):o("WAResultOrError").makeResult(a)}function v(e,t){var n=y(e,t);return n.success?n.value==null?O(e,"to have 1 child <"+t+">, but found 0"):o("WAResultOrError").makeResult(n.value):n}function S(e,t,n,r,a){var i=U(e,t,n,r);if(!i.success)return i;for(var l=[],s=0;s<i.value.length;s++){var u=a(i.value[s]);if(!u.success)return u;l.push(u.value)}return o("WAResultOrError").makeResult(l)}function R(e,t,n,r,a){var i=U(e,t,n,r);if(!i.success)return i;for(var l=i.value.length,s=0;s<l;s++){var u=a(i.value[s]);if(!u.success)return u}return o("WAResultOrError").makeResult(l)}function L(e,t,n){var r=S(e,t,0,1/0,n);if(!r.success)return r;for(var a=0;a<r.value.length;a++)if(!o("WADeepEquals").deepEqual(r.value[0],r.value[a]))return O(e,"to have homogeneous children, but found two children that are not equal");return r}function E(e,t,n){var r=L(e,t,n);return r.success?o("WAResultOrError").makeResult(r.value.length):r}function k(t,n,r,o,a){return B(n,r)?t(n,r,o,a):e}function I(t,n,r,a){if(a==null)return e;var i=k(t,n,r);return i.success?i.value===a?o("WAResultOrError").makeResult(a):i.value==null?e:O(n,'to have "'+r+'"={'+a+'}, but instead has "'+i.value+'"'):i}function T(e,t,n,r){var a=e(t,n);return a.success?a.value===r?o("WAResultOrError").makeResult(r):O(t,'to have "'+n+'"={'+r+'}, but instead has "'+a.value+'"'):a}function D(e,t,n){var r=e(t);return r.success?r.value===n?o("WAResultOrError").makeResult(n):O(t,'to have content "'+n+'", but instead has "'+r.value+'"'):r}function x(e,t,n){var r=u(e,t);if(!r.success)return r;var a=n[r.value];if(a!=null)return o("WAResultOrError").makeResult(a);var i=Object.values(n).join("|");return O(e,'to have "'+t+'"={'+i+'}, but instead has "'+r.value+'"')}function $(e,t){var n=P(e);if(!n.success)return n;var r=t[n.value];if(r!=null)return o("WAResultOrError").makeResult(r);var a=Object.values(t).join("|");return O(e,'to have content "'+a+'", but instead has "'+n.value+'"')}function P(e){var t=N(e);if(t.success)try{var n=new(o("WABinary")).Binary(t.value),a=n.readString(n.size());return o("WAResultOrError").makeResult(a)}catch(t){return O(e,"to have string content, but run into decoding error: "+r("getErrorSafe")(t).message)}else return t}function N(e){var t=e.content;return t==null?O(e,"to have content"):Array.isArray(t)?O(e,"to have content, but has children instead"):o("WAResultOrError").makeResult(t)}function M(e,t){var n=N(e);return n.success?o("WACryptoUtils").uint8ArraysEqual(n.value,t)?o("WAResultOrError").makeResult(t):O(e,'to have content ":binary:'+o("WABase64").encodeB64(t)+'", but instead has ":binary:'+o("WABase64").encodeB64(n.value)+'"'):n}function w(e,t,n){var r=e.content;if(r==null)return t===void 0||t<1?o("WAResultOrError").makeResult(new Uint8Array([])):O(e,"to have content");if(Array.isArray(r))return O(e,"to have content, but has children instead");var a=r.length;return t!==void 0&&a<t?O(e,"to have binary content at least "+t+" bytes but has "+a+" bytes"):n!==void 0&&a>n?O(e,"to have binary content at most "+n+" bytes but has "+a+" bytes"):o("WAResultOrError").makeResult(r)}function A(e){return d(e,q,"integer")}function F(e){return e}function O(e,t){return o("WAResultOrError").makeError("expected <"+e.tag+">: "+t)}function B(e,t){return r("WAHasProperty")(e.attrs,t)}function W(e,t){return t instanceof o("WAWapJid").WapJid?o("WAResultOrError").makeResult(t.toString()):typeof t=="string"?o("WAResultOrError").makeResult(t):O(e,"decodeAsString: attribute is "+typeof t+" not a string: "+String(t))}function q(e){var t=parseInt(e,10);return Number.isNaN(t)?null:t}function U(e,t,n,r){var a=h(e);if(!a.success)return a;var i=a.value;if(i==null)return n!==0?O(e,"to have at least "+n+" <"+t+"> children, but found 0"):o("WAResultOrError").makeResult([]);for(var l=[],s=0;s<i.length;s++){var u=i[s];u.tag===t&&l.push(u)}var c=l.length;return c<n?O(e,"to have at least "+n+" <"+t+"> children, but found "+c):c>r?O(e,"to have at most "+r+" <"+t+"> children, but found "+c):o("WAResultOrError").makeResult(l)}var V={};function H(e,t,n){var r=t.map(function(e,t){return e+": "+n[t].error});return O(e,["to match any of following mixins: "+t.join(", ")+", but all mixins failed."].concat(r).join(" "))}l.voidSuccess=e,l.assertTag=s,l.attrString=u,l.attrValidate=c,l.contentValidate=d,l.assertAttr=m,l.attrStanzaId=p,l.attrCallId=_,l.attrInt=f,l.attrIntRange=g,l.maybeChildren=h,l.optionalChild=y,l.optionalChildWithTag=C,l.childWithTag=b,l.flattenedChildWithTag=v,l.mapChildrenWithTag=S,l.countChildrenWithTag=R,l.mapHomogeneousChildrenWithTag=L,l.countHomogeneousChildrenWithTag=E,l.optional=k,l.optionalLiteral=I,l.literal=T,l.literalContent=D,l.attrStringEnum=x,l.contentStringEnum=$,l.contentString=P,l.contentBytes=N,l.contentLiteralBytes=M,l.contentBytesRange=w,l.contentInt=A,l.identity=F,l.errorMessage=O,l.emptyObject=V,l.errorMixinDisjunction=H}),98);
__d("WASmaxParseJid",["WAJids","WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("WASmaxParseUtils").attrValidate(e,t,o("WAJids").validateUserJid,"UserJid")}function s(e,t){return o("WASmaxParseUtils").attrValidate(e,t,o("WAJids").validateLidUserJid,"LidUserJid")}function u(e,t){return o("WASmaxParseUtils").attrValidate(e,t,o("WAJids").validateDeviceJid,"DeviceJid")}function c(e,t){return o("WASmaxParseUtils").attrValidate(e,t,o("WAJids").validateGroupJid,"GroupJid")}function d(e,t){return o("WASmaxParseUtils").attrValidate(e,t,o("WAJids").validateCallJid,"CallJid")}function m(e,t){return o("WASmaxParseUtils").attrValidate(e,t,o("WAJids").validateDomainJid,"DomainJid")}function p(e,t){return o("WASmaxParseUtils").attrValidate(e,t,o("WAJids").validateBroadcastJid,"BroadcastJid")}function _(e,t){return o("WASmaxParseUtils").attrValidate(e,t,o("WAJids").validateStatusJid,"StatusJid")}function f(e,t){return o("WASmaxParseUtils").attrValidate(e,t,o("WAJids").validateNewsletterJid,"NewsletterJid")}function g(e,t,n){var r=o("WASmaxParseUtils").attrString(e,t);if(!r.success)return r;for(var a=n.validators,i=n.typeName,l=0;l<a.length;l++){var s=a[l](r.value);if(s!=null)return o("WAResultOrError").makeResult(s)}return o("WASmaxParseUtils").errorMessage(e,'to have "'+t+'"={'+i+'}, but instead has "'+r.value+'"')}function h(e,t,n,r){var a=e(t,n);return!a.success||a.value===r?a:o("WASmaxParseUtils").errorMessage(t,'to have "'+n+'"={'+r+'}, but instead has "'+a.value+'"')}function y(e,t,n,r){var a=o("WASmaxParseUtils").optional(e,t,n);return!a.success||a.value==null||a.value===r?a:o("WASmaxParseUtils").errorMessage(t,'to have "'+n+'"={'+r+'}, but instead has "'+a.value+'"')}l.attrUserJid=e,l.attrLidUserJid=s,l.attrDeviceJid=u,l.attrGroupJid=c,l.attrCallJid=d,l.attrDomainJid=m,l.attrBroadcastJid=p,l.attrStatusJid=_,l.attrNewsletterJid=f,l.attrJidEnum=g,l.literalJid=h,l.optionalLiteralJid=y}),98);
__d("WASmaxParseReference",["WAHasProperty","WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,o){var a=m(t,n);if(!a.success)return _(a);var i=e(a.value,n[n.length-1],r,o);return i.success?i:_(i)}function s(t,n,r,a,i){return p(n,r)?e(t,n,r,a,i):o("WASmaxParseUtils").voidSuccess}function u(t,n){return e(o("WASmaxParseUtils").attrString,t,n)}function c(e,t){return p(e,t)?u(e,t):o("WASmaxParseUtils").voidSuccess}function d(e,t){var n=m(e,t);if(!n.success)return _(n);var r=o("WASmaxParseUtils").contentString(n.value);return r.success?r:_(r)}function m(e,t){for(var n=t.length,r=e,a=0;a<n-1;a++){var i=t[a],l=o("WASmaxParseUtils").flattenedChildWithTag(r,i);if(!l.success)return l;r=l.value}return o("WAResultOrError").makeResult(r)}function p(e,t){var n=m(e,t);return n.success&&r("WAHasProperty")(n.value.attrs,t[t.length-1])}function _(e){return o("WAResultOrError").makeError("in the reference, "+e.error)}l.attrFromReference=e,l.optionalAttrFromReference=s,l.attrStringFromReference=u,l.optionalAttrStringFromReference=c,l.contentStringFromReference=d}),98);
__d("WASmaxInPingsClientResponseServerResponse",["WAResultOrError","WASmaxInPingsEnums","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseJid").attrJidEnum(e,"from",o("WASmaxInPingsEnums").DOMAINJID_USERJID);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","result");if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").attrInt(e,"t");return s.success?o("WAResultOrError").makeResult({from:r.value,type:a.value,t:s.value}):s}l.parseClientResponseServerResponse=e}),98);
__d("WAWapDict",[],(function(t,n,r,o,a,i){"use strict";var e=3,l=["xmlstreamstart","xmlstreamend","s.whatsapp.net","type","participant","from","receipt","id","notification","disappearing_mode","status","jid","broadcast","user","devices","device_hash","to","offline","message","result","class","xmlns","duration","notify","iq","t","ack","g.us","enc","urn:xmpp:whatsapp:push","presence","config_value","picture","verified_name","config_code","key-index-list","contact","mediatype","routing_info","edge_routing","get","read","urn:xmpp:ping","fallback_hostname","0","chatstate","business_hours_config","unavailable","download_buckets","skmsg","verified_level","composing","handshake","device-list","media","text","fallback_ip4","media_conn","device","creation","location","config","item","fallback_ip6","count","w:profile:picture","image","business","2","hostname","call-creator","display_name","relaylatency","platform","abprops","success","msg","offline_preview","prop","key-index","v","day_of_week","pkmsg","version","1","ping","w:p","download","video","set","specific_hours","props","primary","unknown","hash","commerce_experience","last","subscribe","max_buckets","call","profile","member_since_text","close_time","call-id","sticker","mode","participants","value","query","profile_options","open_time","code","list","host","ts","contacts","upload","lid","preview","update","usync","w:stats","delivery","auth_ttl","context","fail","cart_enabled","appdata","category","atn","direct_connection","decrypt-fail","relay_id","mmg-fallback.whatsapp.net","target","available","name","last_id","mmg.whatsapp.net","categories","401","is_new","index","tctoken","ip4","token_id","latency","recipient","edit","ip6","add","thumbnail-document","26","paused","true","identity","stream:error","key","sidelist","background","audio","3","thumbnail-image","biz-cover-photo","cat","gcm","thumbnail-video","error","auth","deny","serial","in","registration","thumbnail-link","remove","00","gif","thumbnail-gif","tag","capability","multicast","item-not-found","description","business_hours","config_expo_key","md-app-state","expiration","fallback","ttl","300","md-msg-hist","device_orientation","out","w:m","open_24h","side_list","token","inactive","01","document","te2","played","encrypt","msgr","hide","direct_path","12","state","not-authorized","url","terminate","signature","status-revoke-delay","02","te","linked_accounts","trusted_contact","timezone","ptt","kyc-id","privacy_token","readreceipts","appointment_only","address","expected_ts","privacy","7","android","interactive","device-identity","enabled","attribute_padding","1080","03","screen_height"],s=["read-self","active","fbns","protocol","reaction","screen_width","heartbeat","deviceid","2:47DEQpj8","uploadfieldstat","voip_settings","retry","priority","longitude","conflict","false","ig_professional","replaced","preaccept","cover_photo","uncompressed","encopt","ppic","04","passive","status-revoke-drop","keygen","540","offer","rate","opus","latitude","w:gp2","ver","4","business_profile","medium","sender","prev_v_id","email","website","invited","sign_credential","05","transport","skey","reason","peer_abtest_bucket","America/Sao_Paulo","appid","refresh","100","06","404","101","104","107","102","109","103","member_add_mode","105","transaction-id","110","106","outgoing","108","111","tokens","followers","ig_handle","self_pid","tue","dec","thu","joinable","peer_pid","mon","features","wed","peer_device_presence","pn","delete","07","fri","audio_duration","admin","connected","delta","rcat","disable","collection","08","480","sat","phash","all","invite","accept","critical_unblock_low","group_update","signed_credential","blinded_credential","eph_setting","net","09","background_location","refresh_id","Asia/Kolkata","privacy_mode_ts","account_sync","voip_payload_type","service_areas","acs_public_key","v_id","0a","fallback_class","relay","actual_actors","metadata","w:biz","5","connected-limit","notice","0b","host_storage","fb_page","subject","privatestats","invis","groupadd","010","note.m4r","uuid","0c","8000","sun","372","1020","stage","1200","720","canonical","fb","011","video_duration","0d","1140","superadmin","012","Opening.m4r","keystore_attestation","dleq_proof","013","timestamp","ab_key","w:sync:app:state","0e","vertical","600","p_v_id","6","likes","014","500","1260","creator","0f","rte","destination","group","group_info","syncd_anti_tampering_fatal_exception_enabled","015","dl_bw","Asia/Jakarta","vp8/h.264","online","1320","fb:multiway","10","timeout","016","nse_retry","urn:xmpp:whatsapp:dirty","017","a_v_id","web_shops_chat_header_button_enabled","nse_call","inactive-upgrade","none","web","groups","2250","mms_hot_content_timespan_in_seconds","contact_blacklist","nse_read","suspended_group_deletion_notification","binary_version","018","https://www.whatsapp.com/otp/copy/","reg_push","shops_hide_catalog_attachment_entrypoint","server_sync",".","ephemeral_messages_allowed_values","019","mms_vcache_aggregation_enabled","iphone","America/Argentina/Buenos_Aires","01a","mms_vcard_autodownload_size_kb","nse_ver","shops_header_dropdown_menu_item","dhash","catalog_status","communities_mvp_new_iqs_serverprop","blocklist","default","11","ephemeral_messages_enabled","01b","original_dimensions","8","mms4_media_retry_notification_encryption_enabled","mms4_server_error_receipt_encryption_enabled","original_image_url","sync","multiway","420","companion_enc_static","shops_profile_drawer_entrypoint","01c","vcard_as_document_size_kb","status_video_max_duration","request_image_url","01d","regular_high","s_t","abt","share_ext_min_preliminary_image_quality","01e","32","syncd_key_rotation_enabled","data_namespace","md_downgrade_read_receipts2","patch","polltype","ephemeral_messages_setting","userrate","15","partial_pjpeg_bw_threshold","played-self","catalog_exists","01f","mute_v2"],u=["reject","dirty","announcement","020","13","9","status_video_max_bitrate","fb:thrift_iq","offline_batch","022","full","ctwa_first_business_reply_logging","h.264","smax_id","group_description_length","https://www.whatsapp.com/otp/code","status_image_max_edge","smb_upsell_business_profile_enabled","021","web_upgrade_to_md_modal","14","023","s_o","smaller_video_thumbs_status_enabled","media_max_autodownload","960","blocking_status","peer_msg","joinable_group_call_client_version","group_call_video_maximization_enabled","return_snapshot","high","America/Mexico_City","entry_point_block_logging_enabled","pop","024","1050","16","1380","one_tap_calling_in_group_chat_size","regular_low","inline_joinable_education_enabled","hq_image_max_edge","locked","America/Bogota","smb_biztools_deeplink_enabled","status_image_quality","1088","025","payments_upi_intent_transaction_limit","voip","w:g2","027","md_pin_chat_enabled","026","multi_scan_pjpeg_download_enabled","shops_product_grid","transaction_id","ctwa_context_enabled","20","fna","hq_image_quality","alt_jpeg_doc_detection_quality","group_call_max_participants","pkey","America/Belem","image_max_kbytes","web_cart_v1_1_order_message_changes_enabled","ctwa_context_enterprise_enabled","urn:xmpp:whatsapp:account","840","Asia/Kuala_Lumpur","max_participants","video_remux_after_repair_enabled","stella_addressbook_restriction_type","660","900","780","context_menu_ios13_enabled","mute-state","ref","payments_request_messages","029","frskmsg","vcard_max_size_kb","sample_buffer_gif_player_enabled","match_last_seen","510","4983","video_max_bitrate","028","w:comms:chat","17","frequently_forwarded_max","groups_privacy_blacklist","Asia/Karachi","02a","web_download_document_thumb_mms_enabled","02b","hist_sync","biz_block_reasons_version","1024","18","web_is_direct_connection_for_plm_transparent","view_once_write","file_max_size","paid_convo_id","online_privacy_setting","video_max_edge","view_once_read","enhanced_storage_management","multi_scan_pjpeg_encoding_enabled","ctwa_context_forward_enabled","video_transcode_downgrade_enable","template_doc_mime_types","hq_image_bw_threshold","30","body","u_aud_limit_sil_restarts_ctrl","other","participating","w:biz:directory","1110","vp8","4018","meta","doc_detection_image_max_edge","image_quality","1170","02c","smb_upsell_chat_banner_enabled","key_expiry_time_second","pid","stella_interop_enabled","19","linked_device_max_count","md_device_sync_enabled","02d","02e","360","enhanced_block_enabled","ephemeral_icon_in_forwarding","paid_convo_status","gif_provider","project_name","server-error","canonical_url_validation_enabled","wallpapers_v2","syncd_clear_chat_delete_chat_enabled","medianotify","02f","shops_required_tos_version","vote","reset_skey_on_id_change","030","image_max_edge","multicast_limit_global","ul_bw","21","25","5000","poll","570","22","031","1280","WhatsApp","032","bloks_shops_enabled","50","upload_host_switching_enabled","web_ctwa_context_compose_enabled","ptt_forwarded_features_enabled","unblocked","partial_pjpeg_enabled","fbid:devices","height","ephemeral_group_query_ts","group_join_permissions","order","033","alt_jpeg_status_quality","migrate","popular-bank","win_uwp_deprecation_killswitch_enabled","web_download_status_thumb_mms_enabled","blocking","url_text","035","web_forwarding_limit_to_groups","1600","val","1000","syncd_msg_date_enabled","bank-ref-id","max_subject","payments_web_enabled","web_upload_document_thumb_mms_enabled","size","request","ephemeral","24","receipt_agg","ptt_remember_play_position","sampling_weight","enc_rekey","mute_always","037","034","23","036","action","click_to_chat_qr_enabled","width","disabled","038","md_blocklist_v2","played_self_enabled","web_buttons_message_enabled","flow_id","clear","450","fbid:thread","bloks_session_state","America/Lima","attachment_picker_refresh","download_host_switching_enabled","1792","u_aud_limit_sil_restarts_test2","custom_urls","device_fanout","optimistic_upload","2000","key_cipher_suite","web_smb_upsell_in_biz_profile_enabled","e","039","siri_post_status_shortcut","pair-device","lg","lc","stream_attribution_url","model","mspjpeg_phash_gen","catalog_send_all","new_multi_vcards_ui","share_biz_vcard_enabled","-","clean","200","md_blocklist_v2_server","03b","03a","web_md_migration_experience","ptt_conversation_waveform","u_aud_limit_sil_restarts_test1"],c=["64","ptt_playback_speed_enabled","web_product_list_message_enabled","paid_convo_ts","27","manufacturer","psp-routing","grp_uii_cleanup","ptt_draft_enabled","03c","business_initiated","web_catalog_products_onoff","web_upload_link_thumb_mms_enabled","03e","mediaretry","35","hfm_string_changes","28","America/Fortaleza","max_keys","md_mhfs_days","streaming_upload_chunk_size","5541","040","03d","2675","03f","...","512","mute","48","041","alt_jpeg_quality","60","042","md_smb_quick_reply","5183","c","1343","40","1230","043","044","mms_cat_v1_forward_hot_override_enabled","user_notice","ptt_waveform_send","047","Asia/Calcutta","250","md_privacy_v2","31","29","128","md_messaging_enabled","046","crypto","690","045","enc_iv","75","failure","ptt_oot_playback","AIzaSyDR5yfaG7OG8sMTUj8kfQEb8T9pN8BM6Lk","w","048","2201","web_large_files_ui","Asia/Makassar","812","status_collapse_muted","1334","257","2HP4dm","049","patches","1290","43cY6T","America/Caracas","web_sticker_maker","campaign","ptt_pausable_enabled","33","42","attestation","biz","04b","query_linked","s","125","04a","810","availability","1411","responsiveness_v2_m1","catalog_not_created","34","America/Santiago","1465","enc_p","04d","status_info","04f","key_version","..","04c","04e","md_group_notification","1598","1215","web_cart_enabled","37","630","1920","2394","-1","vcard","38","elapsed","36","828","peer","pricing_category","1245","invalid","stella_ios_enabled","2687","45","1528","39","u_is_redial_audio_1104_ctrl","1025","1455","58","2524","2603","054","bsp_system_message_enabled","web_pip_redesign","051","verify_apps","1974","1272","1322","1755","052","70","050","1063","1135","1361","80","1096","1828","1851","1251","1921","key_config_id","1254","1566","1252","2525","critical_block","1669","max_available","w:auth:backup:token","product","2530","870","1022","participant_uuid","web_cart_on_off","1255","1432","1867","41","1415","1440","240","1204","1608","1690","1846","1483","1687","1749","69","url_number","053","1325","1040","365","59","Asia/Riyadh","1177","test_recommended","057","1612","43","1061","1518","1635","055","1034","1375","750","1430","event_code","1682","503","55","865","78","1309","1365","44","America/Guayaquil","535","LIMITED","1377","1613","1420","1599","1822","05a","1681","password","1111","1214","1376","1478","47","1082","4282","Europe/Istanbul","1307","46","058","1124","256","rate-overlimit","retail","u_a_socket_err_fix_succ_test","1292","1370","1388","520","861","psa","regular","1181","1766","05b","1183","1213","1304","1537"],d=["1724","profile_picture","1071","1314","1605","407","990","1710","746","pricing_model","056","059","061","1119","6027","65","877","1607","05d","917","seen","1516","49","470","973","1037","1350","1394","1480","1796","keys","794","1536","1594","2378","1333","1524","1825","116","309","52","808","827","909","495","1660","361","957","google","1357","1565","1967","996","1775","586","736","1052","1670","bank","177","1416","2194","2222","1454","1839","1275","53","997","1629","6028","smba","1378","1410","05c","1849","727","create","1559","536","1106","1310","1944","670","1297","1316","1762","en","1148","1295","1551","1853","1890","1208","1784","7200","05f","178","1283","1332","381","643","1056","1238","2024","2387","179","981","1547","1705","05e","290","903","1069","1285","2436","062","251","560","582","719","56","1700","2321","325","448","613","777","791","51","488","902","Asia/Almaty","is_hidden","1398","1527","1893","1999","2367","2642","237","busy","065","067","233","590","993","1511","54","723","860","363","487","522","605","995","1321","1691","1865","2447","2462","NON_TRANSACTIONAL","433","871","432","1004","1207","2032","2050","2379","2446","279","636","703","904","248","370","691","700","1068","1655","2334","060","063","364","533","534","567","1191","1210","1473","1827","069","701","2531","514","prev_dhash","064","496","790","1046","1139","1505","1521","1108","207","544","637","final","1173","1293","1694","1939","1951","1993","2353","2515","504","601","857","modify","spam_request","p_121_aa_1101_test4","866","1427","1502","1638","1744","2153","068","382","725","1704","1864","1990","2003","Asia/Dubai","508","531","1387","1474","1632","2307","2386","819","2014","066","387","1468","1706","2186","2261","471","728","1147","1372","1961"],m=[s,u,c,d];i.DICT_VERSION=e,i.SINGLE_BYTE_TOKEN=l,i.DICTIONARY_0_TOKEN=s,i.DICTIONARY_1_TOKEN=u,i.DICTIONARY_2_TOKEN=c,i.DICTIONARY_3_TOKEN=d,i.DICTIONARIES=m}),66);
__d("WAXmlFormatter",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns:/g,"~::~xmlns:").replace(/\s*xmlns=/g,"~::~xmlns=").split("~::~"),n=t.length,r=!1,o=0,a="",i=0,s=["\n"];for(i=0;i<100;i++)s.push(s[i]+"    ");var u=function(t,n){var e=/^<[\w:\-.,]+/.exec(t[n-1]),r=/^<\/[\w:\-.,]+/.exec(t[n]);return e!=null&&r!=null&&e[0]===r[0]};for(i=0;i<n;i++)t[i].search(/<!/)>-1?(a+=s[o]+t[i],r=!0,(t[i].search(/-->/)>-1||t[i].search(/\]>/)>-1||t[i].search(/!DOCTYPE/)>-1)&&(r=!1)):t[i].search(/-->/)>-1||t[i].search(/\]>/)>-1?(a+=t[i],r=!1):u(t,i)?(a+=t[i],r||o--):t[i].search(/<\w/)>-1&&t[i].search(/<\//)===-1&&t[i].search(/\/>/)===-1?(t[i]=l(t[i]),a=r?a+=t[i]:a+=s[o++]+t[i]):t[i].search(/<\w/)>-1&&t[i].search(/<\//)>-1?a=r?a+=t[i]:a+=s[o]+t[i]:t[i].search(/<\//)>-1?a=r?a+=t[i]:a+=s[o===0?o:--o]+t[i]:t[i].search(/\/>/)>-1?a=r?a+=t[i]:a+=s[o]+t[i]:t[i].search(/<\?/)>-1||t[i].search(/xmlns:/)>-1||t[i].search(/xmlns=/)>-1?a+=s[o]+t[i]:a+=t[i];return a[0]==="\n"?a.slice(1):a}function l(e){var t=e.match(/(<query.*>|<result>)(\{.*\})/);if(t===null)return e;try{var n=t[1],r=JSON.stringify(JSON.parse(t[2]),null,2);return n+"\n"+r}catch(t){return e+"[Error formatting JSON]"}}i.default=e}),66);
__d("WAXmlNode",["WAHex"],(function(t,n,r,o,a,i,l){"use strict";var e={},s=(function(){function t(t,n,r){n===void 0&&(n=e),r===void 0&&(r=null),this.tag=t,this.attrs=n,this.content=r}var n=t.prototype;return n.toString=function(){var e="<"+this.tag;e+=u(this.attrs);var t=this.content;return Array.isArray(t)?e+=">"+t.map(String).join("")+"</"+this.tag+">":t instanceof Uint8Array?e+=">"+c(t)+"</"+this.tag+">":t!=null?e+=">"+String(t)+"</"+this.tag+">":e+=" />",e},t})();function u(e){for(var t=Object.keys(e),n="",r=0;r<t.length;r++){var o=t[r];n+=" "+o+'="'+e[o].toString()+'"'}return n}function c(e){var t="";return e.length===0?t="<!-- empty binary -->":e.length<50?t=o("WAHex").bytesToDebugString(e):t="<!-- "+e.length+" bytes -->",t}l.XmlNode=s,l.attrsToString=u,l.uint8ArrayToDebugString=c}),98);
__d("WAWap",["WAAssertUnreachable","WABinary","WACryptoDependencies","WAJids","WALogger","WALongInt","WATextEncoding","WAWapDict","WAWapJid","WAXmlFormatter","WAXmlNode","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=(c=o("WAJids")).MSGR_USER_DOMAIN.replace("@",""),p=c.WA_USER_DOMAIN.replace("@",""),_=c.LID_DOMAIN.replace("@",""),f=c.INTEROP_DOMAIN.replace("@",""),g=c.HOSTED_DOMAIN.replace("@",""),h=2,y=128,C=0,b=236,v=237,S=238,R=239,L=[b,v,S,R],E=245,k=246,I=247,T=248,D=249,x=250,$=251,P=252,N=253,M=254,w=255,A=["0","1","2","3","4","5","6","7","8","9","-",".","\uFFFD","\uFFFD","\uFFFD","\uFFFD"],F=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],O="",B=1,W={sentinel:"DROP_ATTR"},q=(d=o("WAWapJid")).WapJid.create(null,"g.us"),U=d.WapJid.create(null,c.WA_SERVER_JID_SUFFIX),V=d.WapJid.create("status","broadcast"),H=d.WapJid.create(null,"newsletter"),G=d.WapJid.create(null,"hosted"),z=d.WapJid.create(null,"hosted.lid"),j=d.WapJid.create(null,"call"),K={},Q=!1;function X(){Q=!0}var Y=o("WATextEncoding").newTextEncoder(),J=(function(){function e(e,t,n){t===void 0&&(t=K),n===void 0&&(n=null),this.tag=e,this.attrs=t,this.content=n}var t=e.prototype;return t.toString=function(){var e="<"+this.tag;e+=o("WAXmlNode").attrsToString(this.attrs);var t=this.content;return Array.isArray(t)?e+=">"+t.map(String).join("")+"</"+this.tag+">":t?e+=">"+o("WAXmlNode").uint8ArrayToDebugString(t)+"</"+this.tag+">":e+=" />",Q&&(e=r("WAXmlFormatter")(e)),e},e})();function Z(e,t,n){var a=null;if(t&&t.children!=null)throw r("err")('Children should not be passed via props (see eslint check "react/no-children-props")');if(Array.isArray(n))a=n.filter(Boolean);else if(typeof n=="string")a=o("WABinary").Binary.build(n).readByteArrayView();else if(n instanceof ArrayBuffer)a=new Uint8Array(n);else if(n instanceof Uint8Array)a=n;else{for(var i=[],l=2;l<arguments.length;l++){var s=arguments[l];s&&i.push(s)}a=i}Array.isArray(a)&&a.length===0&&(a=null);var u={};if(t){var c=t;Object.keys(c).forEach(function(t){if(!["__self","__source"].includes(t)){var n=c[t];if(n==null)throw r("err")("Attr "+t+" in <"+e+"> is null");n!==W&&(u[t]=n)}})}return new J(e,u,a)}var ee=Z;function te(e){return e instanceof o("WAWapJid").WapJid?e.toString():e}function ne(e){var t=e.content;return Array.isArray(t)?t=t.map(ne):typeof t=="string"&&(t=o("WABinary").Binary.build(t).readByteArrayView()),new J(e.tag,e.attrs||K,t)}function re(e){var t=e instanceof J?e:ne(e),n=new(o("WABinary")).Binary;oe(t,n);var r=0,a=n.readByteArrayView(),i=new Uint8Array(1+a.length);return i[0]=r,i.set(a,1),i}function oe(e,t){if(e==null)t.writeUint8(C);else if(e instanceof J)ie(e,t);else if(e instanceof o("WAWapJid").WapJid)ae(e,t);else if(typeof e=="string")ce(e,t);else if(e instanceof Uint8Array)me(e,t);else{var n=typeof e;throw r("err")("Invalid payload type "+n)}}function ae(e,t){var n=e.getInnerJid();if(n.type===o("WAWapJid").WAP_JID_SUBTYPE.JID_U){var r=n.user,a=n.device,i=n.domainType;t.writeUint8(I),t.writeUint8(i),t.writeUint8(a),oe(r,t)}else if(n.type===o("WAWapJid").WAP_JID_SUBTYPE.JID_FB){var l=n.user,s=n.device;t.writeUint8(k),oe(l,t),t.writeUint16(s),oe(m,t)}else if(n.type===o("WAWapJid").WAP_JID_SUBTYPE.JID_INTEROP){var u=n.user,c=n.device,d=n.integrator;t.writeUint8(E),oe(u,t),t.writeUint16(c),t.writeUint16(d)}else{var p=n.user,_=n.server;t.writeUint8(x),p!=null?oe(p,t):t.writeUint8(C),oe(_,t)}}function ie(e,t){if(e.tag===void 0){t.writeUint8(T),t.writeUint8(C);return}var n=1;e.attrs&&(n+=Object.keys(e.attrs).length*2),e.content&&n++,n<256?(t.writeUint8(T),t.writeUint8(n)):n<65536&&(t.writeUint8(D),t.writeUint16(n)),oe(e.tag,t),e.attrs&&Object.keys(e.attrs).forEach(function(n){ce(n,t),oe(e.attrs[n],t)});var r=e.content;if(Array.isArray(r)){r.length<256?(t.writeUint8(T),t.writeUint8(r.length)):r.length<65536&&(t.writeUint8(D),t.writeUint16(r.length));for(var o=0;o<r.length;o++)ie(r[o],t)}else r&&oe(r,t)}var le,se;function ue(e){for(var t=new Map,n=0;n<e.length;n++)t.set(e[n],n);return t}function ce(e,t){if(e===""){t.writeUint8(P),t.writeUint8(0);return}le==null&&(le=ue(o("WAWapDict").SINGLE_BYTE_TOKEN));var n=le.get(e);if(n!=null){t.writeUint8(n+1);return}if(se==null){se=[];for(var r=0;r<o("WAWapDict").DICTIONARIES.length;++r)se.push(ue(o("WAWapDict").DICTIONARIES[r]))}for(var a=0;a<se.length;++a){var i=se[a].get(e);if(i!=null){t.writeUint8(L[a]),t.writeUint8(i);return}}var l=o("WABinary").numUtf8Bytes(e);if(l<128){var s=/[^0-9.-]+?/,u=/[^0-9A-F]+?/;if(s.exec(e)){if(!u.exec(e)){de(e,$,t);return}}else{de(e,w,t);return}}pe(l,t),t.writeString(e)}function de(e,t,n){var o=e.length%2===1;n.writeUint8(t);var a=Math.ceil(e.length/2);o&&(a|=y),n.writeUint8(a);for(var i=0,l=0;l<e.length;l++){var s=e.charCodeAt(l),u=null;if(48<=s&&s<=57?u=s-48:t===w?s===45?u=10:s===46&&(u=11):t===$&&65<=s&&s<=70&&(u=s-55),u==null)throw r("err")("Cannot nibble encode "+s);l%2===0?(i=u<<4,l===e.length-1&&(i|=15,n.writeUint8(i))):(i|=u,n.writeUint8(i))}}function me(e,t){pe(e.length,t),t.writeByteArray(e)}function pe(e,t){if(e<256)t.writeUint8(P),t.writeUint8(e);else if(e<1048576)t.writeUint8(N),t.writeUint8(e>>>16&255),t.writeUint8(e>>>8&255),t.writeUint8(e&255);else if(e<4294967296)t.writeUint8(M),t.writeUint32(e);else throw r("err")("Binary with length "+e+" is too big for WAP protocol")}function _e(t,n){var r=new(o("WABinary")).Binary(t),a=r.readUint8(),i=a&h;return i?(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Decoding compressed stanza"]))),n(r.readByteArrayView()).then(function(e){return ye(new(o("WABinary")).Binary(e))})):Promise.resolve(ye(r))}function fe(e){var t=new(o("WABinary")).Binary(e),n=t.readUint8(),a=n&h;if(a)throw r("err")("Cannot pass compressed stanza to decodeStanzaDebug");return ye(t)}function ge(e,t){var n=e.readUint8();if(n===C)return null;if(n===T)return he(e,e.readUint8());if(n===D)return he(e,e.readUint16());if(n===P){var a=e.readUint8();return Ee(e,a,t)}if(n===N){var i=e.readUint8(),l=e.readUint8(),s=e.readUint8(),u=((i&15)<<16)+(l<<8)+s;return Ee(e,u,t)}if(n===M){var c=e.readUint32();return Ee(e,c,t)}if(n===x)return ve(e);if(n===k)return Se(e);if(n===E)return Re(e);if(n===I)return Le(e);if(n===w){var d=e.readUint8(),m=d>>>7,p=d&127;return ke(e,A,m,p)}if(n===$){var _=e.readUint8(),f=_>>>7,g=_&127;return ke(e,F,f,g)}if(n<=0||n>=240)throw r("err")("Unable to decode WAP buffer");if(n>=b&&n<=R){var h=n-b,y=o("WAWapDict").DICTIONARIES[h];if(y===void 0)throw r("err")("Missing WAP dictionary "+h);var v=e.readUint8(),S=y[v];if(S===void 0)throw r("err")("Invalid value index "+v+" in dict "+h);return S}var L=o("WAWapDict").SINGLE_BYTE_TOKEN[n-1];if(L===void 0)throw r("err")("Undefined token with index "+n);return L}function he(e,t){for(var n=[],r=0;r<t;r++)n.push(ye(e));return n}function ye(e){var t=e.readUint8(),n;if(t===T)n=e.readUint8();else if(t===D)n=e.readUint16();else throw r("err")("Failed to decode node since type byte "+String(t)+" is invalid");var a=void 0,i=null;if(n===0)throw r("err")("Failed to decode node, list cannot be empty");var l=Ce(e);for(n-=1;n>1;){a||(a={});var s=Ce(e),u=ge(e,!0);a[s]=u,n-=2}return n===1&&(i=ge(e,!1),i instanceof o("WAWapJid").WapJid&&(i=String(i)),typeof i=="string"&&(i=Y.encode(i))),new J(l,a,i)}function Ce(e){var t=ge(e,!0);if(typeof t!="string")throw o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["decodeString got invalid value: ",", string expected"])),String(t)),r("err")("WAWap:decodeString got invalid value, string expected");return t}function be(e){var t=ge(e,!0);if(t!=null&&typeof t!="string")throw o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["decodeNullableString got invalid value: ",", string expected"])),String(t)),r("err")("WAWap:decodeNullableString got invalid value, string expected");return t}function ve(e){var t=be(e),n=Ce(e);return o("WAWapJid").WapJid.create(t,n)}function Se(e){var t=Ce(e),n=e.readUint16();return Ce(e),o("WAWapJid").WapJid.createFbJid(t,n)}function Re(e){var t=Ce(e),n=e.readUint16(),r=e.readUint16();return Ce(e),o("WAWapJid").WapJid.createInteropJid(t,n,r)}function Le(e){var t=null,n=e.readUint8();if(n===0)t=o("WAWapJid").DomainType.WHATSAPP;else if(n===1)t=o("WAWapJid").DomainType.LID;else if((1&n)===0&&(128&n)!==0)t=o("WAWapJid").DomainType.HOSTED;else if(n===129)t=o("WAWapJid").DomainType.HOSTED_LID;else throw r("err")("decodeJidU - Invalid domain type encoding "+n);var a=e.readUint8(),i=Ce(e);return o("WAWapJid").WapJid.createJidU(i,t,a)}function Ee(e,t,n){return n===void 0&&(n=!1),n?e.readString(t):e.readByteArrayView(t)}function ke(e,t,n,r){for(var o=new Array(r*2-n),a=0;a<o.length-1;a+=2){var i=e.readUint8();o[a]=t[i>>>4],o[a+1]=t[i&15]}if(n){var l=e.readUint8();o[o.length-1]=t[l>>>4]}return o.join("")}function Ie(){if(!O){var e=new Uint16Array(2);o("WACryptoDependencies").getCrypto().getRandomValues(e),O=String(e[0])+"."+String(e[1])+"-"}return""+O+B++}function Te(e){switch(e.type){case"group":return e.groupJid;case"status":return o("WAJids").STATUS_JID;case"device":return e.deviceJid;case"newsletter":return e.newsletterJid;case"hosted":return e.hostedDeviceJid;case"hostedLid":return e.hostedLidDeviceJid;default:return e.type,e.broadcastJid}}function De(e){switch(e.type){case"group":return e.author;case"status":return e.author;case"broadcast":return e.author;default:return e.type,null}}function xe(e){return e.type==="status"||e.type==="group"||e.type==="broadcast"?Pe(e.author):W}function $e(e){return Pe(Te(e))}function Pe(e){var t=o("WAJids").validateDomainJid(e);if(t!=null)return Ne(t);var n=e.split("@"),a=n[0],i=n[1],l=null,s=null;if((i===p||i===m||i===f||i===_||i===g||i===o("WAJids").HOSTED_LID_SUFFIX)&&a.indexOf(":")!==-1){var u=a.split(":");a=u[0],l=u[1],s=parseInt(l,10)}if(i===f){var c=a.split("-"),d=c[0],h=c[1];return o("WAWapJid").WapJid.createInteropJid(h,s,parseInt(d,10))}else if(i===m)return o("WAWapJid").WapJid.createFbJid(a,s);var y=null;if(i===_)y=o("WAWapJid").DomainType.LID;else if(i===g){if(s!==99)throw r("err")("wid unexpected deviceId");y=o("WAWapJid").DomainType.HOSTED}else if(i===o("WAJids").HOSTED_LID_SUFFIX){if(s!==99)throw r("err")("lid invalid deviceId");y=o("WAWapJid").DomainType.HOSTED_LID}else y=o("WAWapJid").DomainType.WHATSAPP;return s!=null&&s!==0?o("WAWapJid").WapJid.createJidU(a,y,s):o("WAWapJid").WapJid.create(a,i)}function Ne(e){return e==="s.whatsapp.net"?U:e==="g.us"?q:e==="newsletter"?H:e==="call"?j:r("WAAssertUnreachable")(e)}function Me(e){return Pe(e)}function we(e){return Pe(e)}function Ae(e){return Pe(e)}function Fe(e){return Pe(e)}function Oe(e){return Pe(e)}function Be(e){return Pe(e)}function We(e){return e.jidType==="phoneDevice"||e.jidType==="msgrDevice"||e.jidType==="lidDevice"?Pe(e.deviceJid):e.jidType==="phoneUser"||e.jidType==="msgrUser"||e.jidType==="lidUser"?Pe(e.userJid):e.jidType==="group"?Pe(e.groupJid):e.jidType==="status"?Pe(e.statusJid):e.jidType==="call"?Pe(e.callJid):e.jidType==="interopDevice"?Pe(e.deviceJid):e.jidType==="interopUser"?Pe(e.userJid):e.jidType==="newsletter"?Pe(e.newsletterJid):e.jidType==="hosted"?Pe(e.hostedDeviceJid):e.jidType==="hostedLid"?Pe(e.hostedLidDeviceJid):e.jidType==="bot"?Pe(e.botJid):(e.jidType,Pe(e.broadcastJid))}function qe(e){return e}function Ue(e){return e.toString()}function Ve(e){return e}function He(e){return e}function Ge(e){return e==null?W:e}function ze(e){return e.toString()}function je(e){return o("WALongInt").longIntToDecimalString(e)}function Ke(e,t){t===void 0&&(t=4);for(var n=e,r=new Uint8Array(t),o=t-1;o>=0;o--)r[o]=n&255,n>>>=8;return r}l.DROP_ATTR=W,l.G_US=q,l.S_WHATSAPP_NET=U,l.STATUS_BROADCAST=V,l.NEWSLETTER=H,l.HOSTED=G,l.HOSTED_LID=z,l.CALL=j,l.enableXMLFormat=X,l.WapNode=J,l.makeWapNode=Z,l.wap=ee,l.decodeAsString=te,l.makeStanza=ne,l.encodeStanza=re,l.decodeStanza=_e,l.decodeStanzaDebug=fe,l.generateId=Ie,l.extractToJid=Te,l.extractParticipantJid=De,l.PARTICIPANT_JID=xe,l.TO_JID=$e,l.JID=Pe,l.DOMAIN_JID=Ne,l.USER_JID=Me,l.DEVICE_JID=we,l.GROUP_JID=Ae,l.BROADCAST_JID=Fe,l.CALL_JID=Oe,l.NEWSLETTER_JID=Be,l.TO_WAP_JID=We,l.STANZA_ID=qe,l.SMAX_ID=Ue,l.CUSTOM_STRING=Ve,l.CALL_ID=He,l.MAYBE_CUSTOM_STRING=Ge,l.INT=ze,l.LONG_INT=je,l.BIG_ENDIAN_CONTENT=Ke}),98);
__d("WASmaxJsx",["WAWap"],(function(t,n,r,o,a,i,l){"use strict";l.smax=o("WAWap").wap}),98);
__d("WASmaxMixins",["WAArrayBufferUtils","WAWapJid"],(function(t,n,r,o,a,i,l){"use strict";var e="smax$any";function s(e,t){return c(e,t),d(e,t),t.content instanceof Uint8Array?p(e,t.content):t.content!=null&&_(e,t.content),e}function u(e,t,n,r){return n!=null?e(t,n,r):t}function c(t,n){var r=t.tag,o=n.tag;if(o!==e&&r!==o)throw new Error("tag mismatch: "+r+" != "+o)}function d(e,t){var n=e.attrs,r=t.attrs;Object.keys(r).forEach(function(e){var t=r[e],o=n[e];if(t!=null&&o!=null){if(m(t,o))return;throw new Error("conflict for key: "+e)}n[e]=t})}function m(e,t){return typeof e=="string"&&typeof t=="string"?e===t:e instanceof o("WAWapJid").WapJid&&t instanceof o("WAWapJid").WapJid?e.toString()===t.toString():!1}function p(e,t){var n=e.content;if(n instanceof Uint8Array){if(!o("WAArrayBufferUtils").uint8ArraysEqualUNSAFE(n,t))throw new Error("elementValue mismatch: bytes dose not equal");return}if(n!=null)throw new Error("elementValue mismatch: destination has children");e.content=t}function _(e,t){var n=e.content;if(n instanceof Uint8Array)throw new Error("children mismatch: destination has element value");if(n==null||n.length===0){e.content=t;return}if(!f(n,t))throw new Error("children mismatch: child counts are not compatible");var r=[],o=Array.from(n);t.forEach(function(e){var t=o.findIndex(function(t){return t.tag===e.tag});if(t===-1)r.push(e);else{var n=o.splice(t,1),a=s(n[0],e);r.push(a)}}),o.forEach(function(e){return r.push(e)}),e.content=r}function f(e,t){for(var n=g(t),r=g(e),o=Object.keys(n),a=0;a<o.length;a++){var i=o[a],l=n[i],s=r[i];if(l!=null&&s!=null&&l!==s)return!1}return!0}function g(e){return e.reduce(function(e,t){var n=t.tag,r=e[n];return e[n]=r==null?1:r+1,e},{})}l.mergeStanzas=s,l.optionalMerge=u}),98);
__d("WASmaxOutPingsClientWellFormedToMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{to:o("WAWap").S_WHATSAPP_NET});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeClientWellFormedToMixin=s}),98);
__d("WASmaxOutPingsClientRequest",["WASmaxJsx","WASmaxOutPingsClientWellFormedToMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxOutPingsClientWellFormedToMixin").mergeClientWellFormedToMixin(o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),type:"get",xmlns:"w:p"}));return e}l.makeClientRequest=e}),98);
__d("WAComms",["WAArrayUtils","WABaseGlobals","WAErrors","WALogger","WANotifyConnectionChangeFactory","WAPromiseRetryLoop","WAResolvable","WAShiftTimer","WASmaxInPingsClientResponseServerResponse","WASmaxOutPingsClientRequest","WASmaxParseUtils","WATimeUtils","WAWap","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P,N,M,w,A,F,O,B,W=null,q=null,U=1,V=0,H=(function(){function t(t,n,r){var a=this,i,l,c;this.nextSocketId=1,this.pendingIqs=new Map,this.ackHandlers=[],this.pendingSmaxStanzas=new Map,this.$2=new(o("WAResolvable")).Resolvable,this.socketAbortController=null,this.activePing=null,this.$3=new Set,this.socketId=V,this.socket=null,this.softCloseSocket=null,this.handleStanza=function(t,n,r){var i=o("WASmaxParseUtils").attrString(t,"id");if(i.success&&t.tag!=="receipt"){var l=i.value,u=a.pendingSmaxStanzas.get(l);if(u)return a.pendingSmaxStanzas.delete(l),u.resolve(t),a.maybeScheduleHealthCheck(),"NO_ACK"}var c=_e(t);if(c!=null){var d=a.pendingIqs.get(c);d?(a.pendingIqs.delete(c),d.resolve(t),a.maybeScheduleHealthCheck()):(o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["handleIq no handler for iq with id ",""])),c),o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["handleIq no handler for iq"]))))}else if(t.tag==="ack")a.handleAck(t);else return t.tag==="failure"&&a.config.shouldBlockReceivingUntilSuccess?a.$1(t,n,r):a.$2.promise.then(function(){return a.$1(t,n,r)});return"NO_ACK"},this.healthCheckTimer=new(o("WAShiftTimer")).ShiftTimer(function(){a.socketId&&a.sendPing()}),this.deadSocketTimer=new(o("WAShiftTimer")).ShiftTimer(function(e){e===a.socketId&&(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," expired"])),e),a.softCloseSocket&&a.softCloseSocket())}),this.$1=t,this.onConnectionChange=o("WANotifyConnectionChangeFactory").notifyConnectionChangeFactory((i=n.handlers.onConnectionChange)!=null?i:function(){},(l=n.handlers.onOptimisticConnectionChange)!=null?l:function(){}),this.gzipInflate=r,this.config=n,this.socketLoop=new(o("WAPromiseRetryLoop")).PromiseRetryLoop({name:"MainSocketLoop",code:ne,timer:(c=n.socketReconnectBackoffAlgo)!=null?c:{jitter:.1,max:n.maxSocketLoopWaitTime,algo:{type:"fibonacci",first:1e4,second:1e4},relativeDelay:!0},resetDelay:3e4,isPauseEnabled:n.isPauseEnabled===!0})}var n=t.prototype;return n.filterPending=function(t){var e=[];function n(n){t(n)&&e.push(n)}return this.pendingIqs.forEach(n),this.ackHandlers.forEach(n),this.pendingSmaxStanzas.forEach(n),e},n.sendPendingStanza=function(t){t.cleanup==null||t.cleanup(),t.cleanup=void 0,this.callStanza(t.stanza)},n.maybeSendPendingStanza=function(t){if(t.attempt>=this.config.maxRetries){var e,n;(e=(n=this.config.handlers).onDropStanza)==null||e.call(n,t),t.cleanup==null||t.cleanup(),t.cleanup=void 0,this.removeHandler(t,"max-retries")}else if(this.socket){t.attempt+=1,this.sendPendingStanza(t);return}else o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Comms has no open socket, will resend stanza when socket opens"])))},n.callStanzaAsync=async function(t,n){var e=await this.callStanza(t,n);return e},n.callStanza=function(t,n){var e=this.castStanza(t,n);return this.deadSocketTimer.onOrBefore(this.config.deadSocketTime,this.socketId),this.healthCheckTimer.cancel(),e},n.castStanzaAsync=async function(t){var e=await this.castStanza(t);return e},n.castStanza=function(t,n){var e=this;try{var r,a,i=(r=(a=this.config.handlers).onBeforeCastStanzaForE2E)==null?void 0:r.call(a,t,n);if(i!=null)return o("WALogger").DEV_XMPP(d||(d=babelHelpers.taggedTemplateLiteralLoose([`Dropping stanza since onBeforeCastStanza matched:
`,". We return mock response directly."],["Dropping stanza since onBeforeCastStanza matched:\\n",". We return mock response directly."])),t),o("WALogger").DEV_XMPP(m||(m=babelHelpers.taggedTemplateLiteralLoose([`--- Receive (via SMAX+E2E) ---
`,""],["--- Receive (via SMAX+E2E) ---\\n",""])),i),o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Dropping stanza since onBeforeCastStanza matched. We return mock response directly."]))),Array.isArray(i)?Promise.all(i.map(function(t){return Promise.resolve(e.handleStanza(t,e.socketId,V))})):(this.handleStanza(i,this.socketId,V),Promise.resolve())}catch(e){o("WALogger").DEV_XMPP(_||(_=babelHelpers.taggedTemplateLiteralLoose([`Error in onBeforeCastStanza, we consumed and continue with normal stanza sending to the server:
`,""],["Error in onBeforeCastStanza, we consumed and continue with normal stanza sending to the server:\\n",""])),e)}var l=this.socketOrThrow("castStanza");try{return o("WALogger").DEV_XMPP(f||(f=babelHelpers.taggedTemplateLiteralLoose([`--- Sending ---
`,""],["--- Sending ---\\n",""])),t),l.sendFrame(o("WAWap").encodeStanza(t)).then(function(){e.config.handlers.onCastStanza==null||e.config.handlers.onCastStanza(t,n)}).catch(function(e){if(o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["castStanza async error ",""])),e).devConsole(e),e instanceof o("WAErrors").BufferTooLargeError)return Promise.reject(e)})}catch(e){o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["castStanza error ",""])),e).devConsole(e)}return Promise.resolve()},n.socketOrThrow=function(t){var e=this.socket;if(e)return e;throw r("err")("Comms."+t+" called while no socket")},n.startHandlingRequests=function(){return o("WALogger").LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Comms.startHandlingRequests"]))),this.$2.resolve(),this.$2.promise.then(function(){})},n.parseAndHandleStanza=function(t,n){var e=this;t===this.socketId&&(this.deadSocketTimer.cancel(),q&&(q.resolve(),q=null));var r=o("WAWap").decodeStanza(n,this.gzipInflate).catch(function(e){throw o("WALogger").ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(["Failure parsing stanza!"]))).devConsole(n),e}).then(function(r){o("WALogger").DEV_XMPP(b||(b=babelHelpers.taggedTemplateLiteralLoose([`--- Receiving ---
`,""],["--- Receiving ---\\n",""])),r),e.config.handlers.onHandleStanza==null||e.config.handlers.onHandleStanza(r,t,n.byteLength);var a=e.activePing;return a&&a.socketId===t&&a.stanzaId===_e(r)?(e.activePing=null,a.handler.resolve(r),e.maybeScheduleHealthCheck(),"NO_ACK"):e.handleStanza(r,t,n.byteLength)}).then(function(n){if(t===e.socketId){if(n==="CLOSE_SOCKET"){o("WALogger").LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["[comms] job response is CLOSE_SOCKET"])));var r=e.socket;r&&r.close()}else n==="NO_ACK"||e.castStanza(n);return"NO_ACK"}});this.$3.add(r),r.finally(function(){return void e.$3.delete(r)})},n.handleAck=function(t){for(var e=this.ackHandlers,n=-1,r=null;!r&&++n<e.length;)r=e[n].parseAndTest(t);if(r){var a,i,l=e[n];o("WAArrayUtils").removeIndexWithoutPreservingOrder(e,n),(a=(i=this.config.handlers).onHandleAck)==null||a.call(i,t),l.resolve(r),this.maybeScheduleHealthCheck()}else o("WALogger").WARN(S||(S=babelHelpers.taggedTemplateLiteralLoose(["handleAck: unrecognized ",""])),t)},n.removeHandler=function(t,n){if(n===void 0&&(n="disconnect"),t.type==="iq"||t.type==="smax"){var e=t.stanza.attrs.id;if(!e||typeof e!="string"||t.type==="iq"&&!this.pendingIqs.delete(e)||t.type==="smax"&&!this.pendingSmaxStanzas.delete(e))return}else{t.type;var r=this.ackHandlers.indexOf(t);if(r===-1)return;o("WAArrayUtils").removeIndexWithoutPreservingOrder(this.ackHandlers,r)}n==="disconnect"?t.resolve(Promise.reject(new(o("WAErrors")).Disconnected)):n==="abort"?t.resolve(Promise.reject(new(o("WAErrors")).Aborted)):t.resolve(Promise.reject(new(o("WAErrors")).MaxRetries))},n.maybeScheduleHealthCheck=function(){if(!this.healthCheckTimer.isScheduled()&&!(this.activePing||this.ackHandlers.length||this.pendingIqs.size||this.pendingSmaxStanzas.size)){var e=this.config.healthCheckInterval,t=Math.ceil(e*1e3*(1+Math.random()));this.healthCheckTimer.onOrBefore(t)}},n.sendPing=async function(){var e=pe("sendPing");if(!e.socketId)return o("WALogger").LOG(R||(R=babelHelpers.taggedTemplateLiteralLoose(["[comms] sendPing when socket dead"]))),!1;if(e.activePing&&e.activePing.socketId===e.socketId)return o("WALogger").LOG(L||(L=babelHelpers.taggedTemplateLiteralLoose(["[comms] sendPing ping still pending"]))),!1;e.activePing&&e.activePing.handler.resolve();var t=o("WASmaxOutPingsClientRequest").makeClientRequest(),n=t.attrs.id;if(typeof n!="string")return o("WALogger").ERROR(E||(E=babelHelpers.taggedTemplateLiteralLoose(["[comms] No stanzaId in ping request stanza"]))),!1;var r=new(o("WAResolvable")).Resolvable;e.activePing={socketId:e.socketId,stanzaId:n,handler:r};var a=Date.now();e.callStanza(t);var i=await r.promise,l=Date.now();if(i){var s=o("WASmaxInPingsClientResponseServerResponse").parseClientResponseServerResponse(i,t);if(s.success){var u=l-a,c=Math.round(u/2),d=o("WATimeUtils").castToUnixTime(s.value.t),m=o("WABaseGlobals").newClockSkewCalculation()?Math.round((a+c)/1e3-d):Math.round(Date.now()/1e3-d);return e.config.handlers.onClockSkewUpdate==null||e.config.handlers.onClockSkewUpdate(m),!0}}return!1},t})();function G(){return W}function z(e,t,n,r){r===void 0&&(r=!0),!W&&(W=new H(e,t,n),r&&setTimeout(Y,0))}function j(){var e=pe("stopComms");e.socketLoop.endWithValue(),e.socket&&re(),W=null}function K(){var e=pe("closeSocketAndPreventRetry");e.socketLoop.endWithValue(),e.socket&&(o("WALogger").LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["[comms] closeSocketAndPreventRetry called"]))),re())}function Q(){var e=pe("closeSocketAndPause");e.socketLoop.pauseOnNextIteration(),e.socket&&(o("WALogger").LOG(I||(I=babelHelpers.taggedTemplateLiteralLoose(["[comms] closeSocketAndPause called"]))),re())}function X(){var e=pe("closeSocketAndResume");e.socketLoop.unpause(),e.socket&&(o("WALogger").LOG(T||(T=babelHelpers.taggedTemplateLiteralLoose(["[comms] closeSocketAndResume called"]))),re())}function Y(){pe("openSocketLoop").socketLoop.start()}function J(){o("WALogger").LOG(D||(D=babelHelpers.taggedTemplateLiteralLoose(["[comms] maybeResetSocketLoop"]))),te()||pe("maybeResetSocketLoop").socketLoop.reset()}function Z(){pe("forceResetSocketLoop").socketLoop.reset()}function ee(){var e,t=pe("socketAbortController");(e=t.socketAbortController)==null||e.abort(),t.softCloseSocket==null||t.softCloseSocket()}function te(){var e;return!!((e=W)!=null&&e.socket)}function ne(){var e,t=pe("socketLoopIteration"),n=t.nextSocketId++;o("WALogger").LOG(x||(x=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," opening"])),n);var r=function(){t.onConnectionChange("in_handshake")};return t.config.handlers.onSocketLoopIteration==null||t.config.handlers.onSocketLoopIteration(t.socketAbortController),typeof AbortController=="function"&&(t.socketAbortController=new AbortController),t.config.openChatSocket(r,(e=t.socketAbortController)==null?void 0:e.signal).then(function(e){if(e.success){var r=e.value;t.config.handlers.onSocketOpen==null||t.config.handlers.onSocketOpen();var a=new(o("WAResolvable")).Resolvable;return o("WALogger").LOG($||($=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," opened"])),n),t.socketId=n,t.socket=r,t.softCloseSocket=function(){t.softCloseSocket=null,t.socket&&t.config.shouldCloseStaleSocket&&(re(),t.socket=null),a.resolve()},t.socketLoop.resetTimeoutAfter(1e4),t.deadSocketTimer.cancel(),t.maybeScheduleHealthCheck(),r.setOnFrame(function(e){return t.parseAndHandleStanza(n,e)}),r.setOnClose(function(){o("WALogger").LOG(P||(P=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," closed"])),n),t.activePing&&n===t.activePing.socketId&&(t.activePing.handler.resolve(),t.activePing=null),t.filterPending(function(e){return e.attachedToSocketId===n}).forEach(function(e){return void t.removeHandler(e)}),n===t.socketId&&(t.socketId=V,t.socket=null,t.onConnectionChange("disconnected"),t.config.handlers.onDisconnect==null||t.config.handlers.onDisconnect(),a.resolve())}),t.onConnectionChange("connected"),t.config.handlers.onConnect==null||t.config.handlers.onConnect(),t.filterPending(function(e){return!e.attachedToSocketId}).sort(function(e,t){return e.orderedId-t.orderedId}).forEach(function(e){switch(e.type){case"smax":case"iq":t.maybeSendPendingStanza(e);break;case"ack":t.callStanza(e.stanza);break;default:e.type;break}}),a.promise}else{var i=e.error;switch(i){case"max-hunters":o("WALogger").WARN(N||(N=babelHelpers.taggedTemplateLiteralLoose(["[comms] socketLoopIteration socket closed while in noise handshake using treasureHunt strategy"])));break;case"disconnected":o("WALogger").WARN(M||(M=babelHelpers.taggedTemplateLiteralLoose(["[comms] socketLoopIteration socket disconnected while in noise handshake"])));break;default:return}}}).catch(function(e){e instanceof o("WAErrors").Disconnected?o("WALogger").LOG(w||(w=babelHelpers.taggedTemplateLiteralLoose(["[comms] socketLoopIteration socket closed while in noise handshake"]))):o("WALogger").ERROR(A||(A=babelHelpers.taggedTemplateLiteralLoose(["[comms] socketLoopIteration failed ",""])),e).devConsole(e)})}function re(){var e=pe("closeSocket");e.socket&&(o("WALogger").LOG(F||(F=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," closed"])),e.socketId),o("WALogger").LOG(O||(O=babelHelpers.taggedTemplateLiteralLoose(["[comms] closeSocket called"]))),e.socket.close())}function oe(){pe("onStreamErrorReceived").socketLoop.cancelReset()}function ae(){return pe("waitForConnection").sendPing(),q||(q=new(o("WAResolvable")).Resolvable),q.promise}function ie(e,t){var n=pe("castStanza");n.socket?n.castStanza(e,t):o("WALogger").LOG(B||(B=babelHelpers.taggedTemplateLiteralLoose(["Comms has no open socket"])))}function le(e){var t=pe("castStanza");return t.socketId===e}function se(e,t,n,a,i){return n===void 0&&(n=0),i===void 0&&(i="iq"),new Promise(function(l){var s=pe("sendIq"),u=e.attrs.id;if(!u||typeof u!="string")throw r("err")("[comms] sendIq given iq without id: "+String(e));var c=s.socketId;if(t&&!c){l(Promise.reject(new(o("WAErrors")).Offline));return}var d=function(t){t===void 0&&(t="disconnect");var e=i==="iq"?s.pendingIqs.get(u):s.pendingSmaxStanzas.get(u);if(!e){l(Promise.reject(r("err")("[comms] _sendIq unexisting stanza to be cancelled: "+u)));return}s.removeHandler(e,t)},m=null;if(n>0){var p=setTimeout(d,n*1e3);m=function(){clearTimeout(p)}}if(a!=null)if(a.aborted){l(Promise.reject(new(o("WAErrors")).Disconnected));return}else{var _=function(){d("abort")};a.addEventListener("abort",_),m=function(){a.removeEventListener("abort",_)}}var f={resolve:l,stanza:e,attachedToSocketId:t?c:V,orderedId:U++,attempt:0,cleanup:m};if(i==="iq"){var g=babelHelpers.extends({type:i},f);s.pendingIqs.set(u,g),s.config.handlers.onSendIq==null||s.config.handlers.onSendIq(e),s.maybeSendPendingStanza(g)}else{var h=babelHelpers.extends({type:i},f);s.pendingSmaxStanzas.set(u,h),s.maybeSendPendingStanza(h)}})}function ue(e,t){var n,r,o,a=(n=t==null?void 0:t.withoutRetry)!=null?n:!1,i=(r=t==null?void 0:t.timeoutSeconds)!=null?r:0,l=(o=t==null?void 0:t.signal)!=null?o:null;return se(e,a,i,l,"smax")}function ce(){var e=pe("sendPing");return e.sendPing()}function de(){return pe("startHandlingRequests").startHandlingRequests()}function me(){W&&W.deadSocketTimer.cancel()}function pe(e){if(W)return W;throw r("err")("[comms] "+e+" called before startComms")}function _e(e){if(e.tag==="iq"){var t=e.attrs.type;if(t==="result"||t==="error")return o("WAWap").decodeAsString(e.attrs.id)||null}return null}function fe(){return U++}function ge(){W=null,q=new(o("WAResolvable")).Resolvable,U=1}l.DEFAULT_SOCKET_ID=V,l.getComms=G,l.startComms=z,l.stopComms=j,l.closeSocketAndPreventRetry=K,l.closeSocketAndPause=Q,l.closeSocketAndResume=X,l.openSocketLoop=Y,l.maybeResetSocketLoop=J,l.forceResetSocketLoop=Z,l.forceAbortSocketConnection=ee,l.isSocketConnected=te,l.socketLoopIteration=ne,l.closeSocket=re,l.onStreamErrorReceived=oe,l.waitForConnection=ae,l.castSmaxStanza=ie,l.isActiveSocket=le,l._sendIq=se,l.sendSmaxStanza=ue,l.sendPing=ce,l.startHandlingRequests=de,l.cancelDeadSocketTimer=me,l.singletonOrThrowIfUninitialized=pe,l.getAndIncrementNextOrderedId=fe,l.resetStateForTests=ge}),98);
__d("WADecimalStringMod",["WALogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){if(!/^\d+$/.test(t))throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid decimal string'])),t),r("err")("decimalStringMod is given an invalid decimal string");var a=t.length;if(a<16||a===16&&t<="9007199254740991")return Number(t)%n;if(a>20||a===20&&t>"18446744073709551615")throw o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(['"','" is over 64 bits'])),t),r("err")("decimalStringMod is given value over 64 bits");for(var i=0,l=0;l<t.length;l++){var u=Number(t[l]);i=(i*10+u)%n}return i}l.decimalStringMod=u}),98);
__d("WACreateGetVcaEnabledBucket",["WAArrayBufferUtils","WADecimalStringMod","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return function(){return t==null?null:o("WAArrayBufferUtils").arrayBufferMod(e,t)+100}}function u(t,n){return function(){if(n==null)return null;var r=t.split("/"),a=r[r.length-1],i=a.split("_")[1];return/^\d+$/.test(i)?i==null?(o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["mediaRouteSelection: can't get fbId from mediaDirectPath"]))),null):o("WADecimalStringMod").decimalStringMod(i,n)+100:null}}l.createGetVcaEnabledBucket=s,l.msgrCreateGetVcaEnabledBucket=u}),98);
__d("WAExtractNcHotTimestamp",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)return null;var t=s(e);if(t.has("_nc_hot")){var n=parseInt(t.get("_nc_hot"),10);return Number.isInteger(n)?o("WATimeUtils").castToUnixTime(n):null}else return null}function s(e){var t=e.split("?");return new URLSearchParams(t.length===2?t[1]:"")}l.extractNcHotTimestamp=e}),98);
__d("WAXmlParsingFailure",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.parser=e,this.reason=t}var t=e.prototype;return t.toString=function(){return"XmlParsingFailure: "+this.parser+": "+this.reason},e})();i.XmlParsingFailure=e}),66);
__d("WAParsableXmlNode",["WAHasProperty","WAXmlParsingFailure","err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){throw new TypeError('"'+e+'" is read-only')}var s=(function(){function e(e,t){var n=this;this.$1=e,this.$2=t,this.$3=Array.isArray(t.content)?t.content.map(function(t){return new n.constructor(e,t)}):null}var t=e.prototype;return t.name=function(){return this.$1},t.node=function(){return this.$2},t.hasAttr=function(t){return r("WAHasProperty")(this.$2.attrs,t)},t.assertTag=function(t){this.$2.tag!==t&&this.throw("to be <"+t+">")},t.tag=function(){return this.$2.tag},t.maybeChild=function(t){var e=this.$3;if(!e)return null;for(var n=0;n<e.length;n++)if(e[n].tag()===t)return e[n];return null},t.hasChild=function(t){return!!this.maybeChild(t)},t.child=function(t){var e=this.maybeChild(t);return e||this.throw("to have child <"+t+">")},t.assertAttr=function(t,n){var e=this.attrString(t);e!==n&&this.throw('to have "'+t+'"="'+n+'", but instead has "'+e+'"')},t.attrString=function(t){return r("WAHasProperty")(this.$2.attrs,t)?this.decodeAsString(this.$2.attrs[t]):this.throw('to have attribute "'+t+'"')},t.forEachAttributeKey=function(t){var e=this.$2.attrs;Object.keys(e).forEach(function(e){return t(e)})},t.maybeAttrString=function(t){return this.hasAttr(t)?this.decodeAsString(this.$2.attrs[t]):null},t.maybeAttrInt=function(t,n,r){return this.hasAttr(t)?this.attrInt(t,n,r):null},t.attrEnumValues=function(t,n,r){var e=new Set(n),o=this.attrString(t);if(!e.has(o)){if(r!=null)return r;var a=Array.from(e).join("|");return this.throw('to have "'+t+'"={'+a+'} but has value "'+o+'"')}return o},t.attrEnum=function(t,n){var e=this.attrString(t);if(!r("WAHasProperty")(n,e)){var o=Object.keys(n).join("|");return this.throw('to have "'+t+'"={'+o+'} but has value "'+e+'"')}return n[e]},t.attrEnumOrNullIfUnknown=function(t,n){var e=this.attrString(t);return r("WAHasProperty")(n,e)?n[e]:null},t.attrEnumOrDefault=function(t,n,r){return this.hasAttr(t)?this.attrEnum(t,n):r},t.attrInt=function(t,n,r){var e=this.attrString(t);return this.$4(e,t,n,r)},t.$4=function(t,n,r,o){var e=parseInt(t,10);return Number.isNaN(e)?this.throw('to have "'+n+'"={integer} but has value "'+t+'"'):r!==void 0&&e<r?this.throw('to have "'+n+'"={at least '+r+"} but has value "+e):o!==void 0&&e>=o?this.throw('to have "'+n+'"={below '+o+"} but has value "+e):e},t.forEachChild=function(t){var e=this.$3;if(e)e.forEach(function(e){return t(e)});else if(this.$2.content!=null)return this.throw("to have children")},t.forEachChildWithTag=function(t,n){this.forEachChild(function(e){e.tag()===t&&n(e)})},t.mapChildren=function(t){var e=this.$3;return!e&&this.$2.content!=null?this.throw("to have children"):e?e.map(function(e){return t(e)}):[]},t.mapChildrenWithTag=function(t,n){var e=this.$3;return!e&&this.$2.content!=null?this.throw("to have children"):e?e.filter(function(e){return e.tag()===t}).map(function(e){return n(e)}):[]},t.mapFirstChild=function(t){var e=this.$3;return!e||e.length===0?this.throw("to have children"):t(e[0])},t.hasContent=function(){return!this.$3&&!!this.$2.content},t.hasChildren=function(){return this.$3!=null},t.getChildren=function(){return this.$3},t.mapAttrKeys=function(t){var e=this.getAttrKeys();return e&&e.length?e.map(t):[]},t.getAttrKeys=function(){return Object.keys(this.$2.attrs)},t.hasAttrs=function(){var e=this.$2.attrs?Object.keys(this.$2.attrs):[];return e.length>0},t.getNode=function(){return this.$2},t.unsafeSetChildren=function(t){this.$3=t},t.unsafeSetNodeContent=function(t){this.$2.content=t},t.contentUint=function(t){var e=this.contentBytes(t);return u(e,t)},t.contentBytes=function(t){if(t===void 0&&(t=-1),this.$3)return this.throw("to have binary content, but has children instead");if(this.$2.content!=null){var e=this.$2.content;return t!==-1&&e.length!==t?this.throw("to be "+t+" bytes, but got "+e.length+" instead"):e}else return this.throw("to have content")},t.contentString=function(){return this.$3?this.throw("to have string content, but has children instead"):this.$2.content!=null?this.$2.content:this.throw("to have content")},t.contentInt=function(t,n){var e=this.contentString();return this.$4(e,"content",t,n)},t.contentEnum=function(t){var e=this.contentString();if(!r("WAHasProperty")(t,e)){var n=Object.keys(t).join("|");return this.throw("to have content {"+n+'} but has value "'+e+'"')}return t[e]},t.decodeAsString=function(t){if(typeof t!="string")throw r("err")("decodeAsString: attribute is "+typeof t+" not a string: "+t);return t},t.throw=function(t){throw new(o("WAXmlParsingFailure")).XmlParsingFailure(this.$1,"expected <"+this.$2.tag+"> "+t)},t.toString=function(){return this.$2.toString()},e})();function u(e,t){for(var n=0,r=0;r<t;r++)n=n*256+e[r];return n}l.ParsableXmlNode=s,l.convertBytesToUint=u}),98);
__d("WASignalLocalStorageProtocol.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={};s.internalSpec={sessionVersion:[1,(e=o("WAProtoConst")).TYPES.UINT32],localIdentityPublic:[2,e.TYPES.BYTES],remoteIdentityPublic:[3,e.TYPES.BYTES],rootKey:[4,e.TYPES.BYTES],previousCounter:[5,e.TYPES.UINT32],senderChain:[6,e.TYPES.MESSAGE,d],receiverChains:[7,e.FLAGS.REPEATED|e.TYPES.MESSAGE,d],pendingKeyExchange:[8,e.TYPES.MESSAGE,c],pendingPreKey:[9,e.TYPES.MESSAGE,u],remoteRegistrationId:[10,e.TYPES.UINT32],localRegistrationId:[11,e.TYPES.UINT32],needsRefresh:[12,e.TYPES.BOOL],aliceBaseKey:[13,e.TYPES.BYTES]},u.internalSpec={preKeyId:[1,e.TYPES.UINT32],signedPreKeyId:[3,e.TYPES.INT32],baseKey:[2,e.TYPES.BYTES]},c.internalSpec={sequence:[1,e.TYPES.UINT32],localBaseKey:[2,e.TYPES.BYTES],localBaseKeyPrivate:[3,e.TYPES.BYTES],localRatchetKey:[4,e.TYPES.BYTES],localRatchetKeyPrivate:[5,e.TYPES.BYTES],localIdentityKey:[7,e.TYPES.BYTES],localIdentityKeyPrivate:[8,e.TYPES.BYTES]},d.internalSpec={senderRatchetKey:[1,e.TYPES.BYTES],senderRatchetKeyPrivate:[2,e.TYPES.BYTES],chainKey:[3,e.TYPES.MESSAGE,p],messageKeys:[4,e.FLAGS.REPEATED|e.TYPES.MESSAGE,m]},m.internalSpec={index:[1,e.TYPES.UINT32],cipherKey:[2,e.TYPES.BYTES],macKey:[3,e.TYPES.BYTES],iv:[4,e.TYPES.BYTES]},p.internalSpec={index:[1,e.TYPES.UINT32],key:[2,e.TYPES.BYTES]},_.internalSpec={currentSession:[1,e.TYPES.MESSAGE,s],previousSessions:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,s]},f.internalSpec={id:[1,e.TYPES.UINT32],publicKey:[2,e.TYPES.BYTES],privateKey:[3,e.TYPES.BYTES]},g.internalSpec={id:[1,e.TYPES.UINT32],publicKey:[2,e.TYPES.BYTES],privateKey:[3,e.TYPES.BYTES],signature:[4,e.TYPES.BYTES],timestamp:[5,e.TYPES.FIXED64]},h.internalSpec={publicKey:[1,e.TYPES.BYTES],privateKey:[2,e.TYPES.BYTES]},y.internalSpec={senderKeyId:[1,e.TYPES.UINT32],senderChainKey:[2,e.TYPES.MESSAGE,v],senderSigningKey:[3,e.TYPES.MESSAGE,C],senderMessageKeys:[4,e.FLAGS.REPEATED|e.TYPES.MESSAGE,b]},C.internalSpec={public:[1,e.TYPES.BYTES],private:[2,e.TYPES.BYTES]},b.internalSpec={iteration:[1,e.TYPES.UINT32],seed:[2,e.TYPES.BYTES]},v.internalSpec={iteration:[1,e.TYPES.UINT32],seed:[2,e.TYPES.BYTES]},S.internalSpec={senderKeyStates:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,y]},l.SessionStructureSpec=s,l.SessionStructure$PendingPreKeySpec=u,l.SessionStructure$PendingKeyExchangeSpec=c,l.SessionStructure$ChainSpec=d,l.SessionStructure$Chain$MessageKeySpec=m,l.SessionStructure$Chain$ChainKeySpec=p,l.RecordStructureSpec=_,l.PreKeyRecordStructureSpec=f,l.SignedPreKeyRecordStructureSpec=g,l.IdentityKeyPairStructureSpec=h,l.SenderKeyStateStructureSpec=y,l.SenderKeyStateStructure$SenderSigningKeySpec=C,l.SenderKeyStateStructure$SenderMessageKeySpec=b,l.SenderKeyStateStructure$SenderChainKeySpec=v,l.SenderKeyRecordStructureSpec=S}),98);
__d("WASignalOther",["WACryptoDependencies","WACryptoHkdf","WACryptoUtils","WAParsableXmlNode","decodeProtobuf","encodeProtobuf","err"],(function(t,n,r,o,a,i,l){"use strict";var e={name:"AES-CBC"},s={name:"HMAC",hash:"SHA-256"};function u(e,t){if(e.length!==t)throw r("err")("Signal expected "+t+" bytes, given "+e.length);return e}function c(e,t){return u(new Uint8Array(e),t)}function d(e){var t=e.buffer,n=e.byteOffset,r=e.length;return n===0&&r===t.byteLength?t:t.slice(n,n+r)}function m(e,t){return e.readByteArrayView(t)}function p(e){return new Uint8Array(e)}function _(e,t,n){if(e.length-t<n)throw r("err")("Can not split off "+n+" bytes from index "+t+" of "+e.length+" bytes");return e.slice(t,t+n)}function f(e){var t=e==="extendedRange"?2147483646:16380;return o("WACryptoUtils").randomNumberLessThan(t)+1}function g(e){return b(e)}function h(e){return o("WAParsableXmlNode").convertBytesToUint(e,4)}function y(){var e=2147483647;return o("WACryptoUtils").randomNumberLessThan(e)+1}function C(e){return b(e)}function b(e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=4294967296),typeof e=="number"&&t<=e&&e<n&&Math.floor(e)===e)return e;throw r("err")("Expected integer in range ["+t+", "+n+"), given "+String(e))}function v(e,t){return o("encodeProtobuf").encodeProtobuf(e,t).readByteArrayView()}function S(e,t,n){return n(o("decodeProtobuf").decodeProtobuf(e,t))}function R(e,t,n,r){return o("WACryptoHkdf").extractWithSaltAndExpand(e,t,n,r).then(function(e){return new Uint8Array(e)})}function L(t,n){var r,a;return n==="hmac-sha256"?(r=s,a=["sign"]):(r=e,a=["encrypt","decrypt"]),o("WACryptoDependencies").getCrypto().subtle.importKey("raw",t,r,!1,a)}function E(e){return e}function k(e){return e}function I(e,t){return o("WACryptoUtils").arrayBuffersEqual(e,t)}l.AES_CBC=e,l.HMAC_SHA256=s,l.ensureSize=u,l.toBytes=c,l.toBuffer=d,l.readBytes=m,l.makeBytes=p,l.sliceBytes=_,l.makeRegistrationId=f,l.castRegistrationId=g,l.castRegistrationIdFromBytes=h,l.makeSenderKeyId=y,l.castSenderKeyId=C,l.ensureIntInRange=b,l.encodeSignalProto=v,l.decodeSignalProto=S,l.hkdf=R,l.makeCryptoKey=L,l.castToByteEncoded=E,l.castToSessionHash=k,l.areSessionHashesEqual=I}),98);
__d("WASignalKeys",["WACryptoDependencies","WACryptoPrimitives","WALogger","WASignalLocalStorageProtocol.pb","WASignalOther","decodeProtobuf","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=5,u=16777215;function c(e,t){return{publicKey:e,privateKey:t}}function d(e){var t=o("WACryptoPrimitives").keypairFromSecretKey(e),n=t.publicKey,r=t.secretKey;return c(o("WASignalOther").ensureSize(n,32),o("WASignalOther").ensureSize(r,32))}function m(e,t){return{publicKey:o("WASignalOther").toBytes(e,32),privateKey:o("WASignalOther").toBytes(t,32)}}function p(){var e=o("WACryptoPrimitives").keyPair(),t=e.publicKey,n=e.secretKey;return n[0]&=248,n[31]=64|n[31]&63,c(o("WASignalOther").ensureSize(t,32),o("WASignalOther").ensureSize(n,32))}function _(e,t){return c(o("WASignalOther").sliceBytes(t,1,32),e)}function f(e,t){return{serializedPubKey:t,privateKey:e}}function g(){var e=p();return f(e.privateKey,h(e))}function h(e){var t=o("WASignalOther").makeBytes(33);return t[0]=s,t.set(e.publicKey,1),t}function y(e){var t=o("WASignalOther").makeBytes(33);return t[0]=s,t.set(o("WASignalOther").ensureSize(e,32),1),t}function C(e){return f(e.privateKey,h(e))}function b(e,t){var n=(e-1)%u;n<=0&&(n+=u);for(var r=[],a=0;a<t;a++){var i=n===u?1:n+1,l=p(),s=o("WASignalOther").encodeSignalProto(o("WASignalLocalStorageProtocol.pb").PreKeyRecordStructureSpec,{id:i,publicKey:h(l),privateKey:l.privateKey});r.push({plainObject:{id:i,keyPair:l},record:s}),n=i}return r}function v(t){try{var n=o("decodeProtobuf").decodeProtobuf(o("WASignalLocalStorageProtocol.pb").PreKeyRecordStructureSpec,t),r=n.id,a=n.publicKey,i=n.privateKey;return r==null||a==null||i==null?null:{id:S(r),keyPair:_(o("WASignalOther").toBytes(i,32),L(new Uint8Array(a)))}}catch(t){return o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["deserializePreKey error ",""])),t),null}}function S(e){return o("WASignalOther").ensureIntInRange(e,1,u)}function R(e){return o("WASignalOther").ensureIntInRange(e,0,u)}function L(e){if(e.length===0||e[0]!==s)throw r("err")("Unrecognized public key type");return o("WASignalOther").ensureSize(e,33)}function E(){var e=o("WASignalOther").makeBytes(32);return o("WACryptoDependencies").getCrypto().getRandomValues(e),e}function k(e,t){return o("WACryptoPrimitives").scalarMult(e,t.subarray(1)).buffer}l.KEY_TYPE=s,l.makeKeyPairFrom=d,l.makeKeyPairFromArrayBuffers=m,l.makeKeyPair=p,l.makeKeyPairFromSerialized=_,l.makeSerializedKeyPairFrom=f,l.makeSerializedKeyPair=g,l.serializePubKey=h,l.serializeIdentity=y,l.toSerializedKeyPair=C,l.makePreKeys=b,l.deserializePreKey=v,l.castToPreKeyId=S,l.castToSignedPreKeyId=R,l.castToSerializedPubKey=L,l.makeRawSenderKey=E,l.ecdh=k}),98);
__d("WAParsableWapNode",["WABinary","WAJids","WALogger","WALongInt","WAParsableXmlNode","WASignalKeys","WATimeUtils","WAWap","WAWapJid","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(e){function t(t,n){var r;return r=e.call(this,"XmppParsingFailure: "+t+": "+n)||this,r.name="XmppParsingFailure",r.parser=t,r.reason=n,r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.toString=function(){return"XmppParsingFailure: "+this.parser+": "+this.reason},t})(babelHelpers.wrapNativeSuper(Error)),c=(function(t){function n(e,n){return t.call(this,e,n)||this}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.assertFromServer=function(){var e=this.attrString("from");e!==o("WAJids").WA_SERVER_JID_SUFFIX&&this.throw('to have "from"="s.whatsapp.net", but instead has "'+e+'"')},a.attrUserJid=function(t){var e=this.attrString(t),n=o("WAJids").interpretAndValidateJid(e);return n.botJid!=null?n.botJid:n.userJid==null?this.throw('to have "'+t+'"={UserJid}, but instead has "'+e+'"'):n.userJid},a.attrPhoneUserJid=function(t){var e=this.attrString(t),n=o("WAJids").interpretAndValidateJid(e);return n.jidType==="phoneUser"?n.userJid:this.throw('to have "'+t+'"={PhoneUserJid}, but instead has "'+e+'"')},a.attrLidUserJid=function(t){var e=this.attrString(t),n=o("WAJids").interpretAndValidateJid(e);return n.jidType==="lidUser"?n.userJid:this.throw('to have "'+t+'"={LidUserJid}, but instead has "'+e+'"')},a.maybeAttrUserJid=function(t){return this.hasAttr(t)?this.attrUserJid(t):null},a.maybeAttrPhoneUserJid=function(t){return this.hasAttr(t)?this.attrPhoneUserJid(t):null},a.maybeAttrLidUserJid=function(t){return this.hasAttr(t)?this.attrLidUserJid(t):null},a.attrGroupJid=function(t){var e=this.attrString(t),n=o("WAJids").interpretAndValidateJid(e);return n.groupJid==null?this.throw('to have "'+t+'"={GroupJid}, but instead has "'+e+'"'):n.groupJid},a.maybeAttrGroupJid=function(t){return this.hasAttr(t)?this.attrGroupJid(t):null},a.attrChatJid=function(t){var e=this.attrString(t),n=o("WAJids").interpretAndValidateJid(e);return n.userJid!=null?n.userJid:n.groupJid!=null?n.groupJid:n.botJid!=null?n.botJid:this.throw('to have "'+t+'"={ChatJid}, but instead has "'+e+'"')},a.attrPhoneChatJid=function(t){var e=this.attrString(t),n=o("WAJids").interpretAndValidateJid(e);return n.jidType==="phoneUser"?n.userJid:n.jidType==="group"?n.groupJid:this.throw('to have "'+t+'"={ChatJid}, but instead has "'+e+'"')},a.attrDeviceJid=function(t){var e=this.attrString(t),n=o("WAJids").interpretAndValidateJid(e);return n.deviceJid!=null?n.deviceJid:n.userJid!=null?o("WAJids").defaultDeviceJidForUser(n.userJid):n.hostedDeviceJid!=null?n.hostedDeviceJid:n.hostedLidDeviceJid!=null?n.hostedLidDeviceJid:n.botJid!=null?n.botJid:this.throw('to have "'+t+'"={DeviceJid}, but instead has "'+e+'"')},a.attrPhoneDeviceJid=function(t){var e=this.attrString(t),n=o("WAJids").interpretAndValidateJid(e);return n.jidType==="phoneDevice"?n.deviceJid:n.jidType==="phoneUser"?o("WAJids").defaultPhoneDeviceJidForUser(n.userJid):this.throw('to have "'+t+'"={PhoneDeviceJid}, but instead has "'+e+'"')},a.attrLidDeviceJid=function(t){var e=this.attrString(t),n=o("WAJids").interpretAndValidateJid(e);return n.jidType==="lidDevice"?n.deviceJid:n.jidType==="lidUser"?o("WAJids").defaultLidDeviceJidForLidUserJid(n.userJid):this.throw('to have "'+t+'"={LidDeviceJid}, but instead has "'+e+'"')},a.attrDeviceId=function(t){var e=this.attrInt(t);return o("WAJids").interpretAsDeviceId(e)},a.attrFromJidChat=function(){var t=this.attrJidWithType();switch(t.jidType){case"msgrUser":{var n=t.userJid,a=o("WAJids").defaultDeviceJidForUser(n);return{type:"device",chat:n,deviceJid:a,author:a}}case"interopUser":{var i=t.userJid,l=o("WAJids").defaultDeviceJidForUser(i);return{type:"device",chat:i,deviceJid:l,author:l}}case"phoneUser":{var s=t.userJid,u=o("WAJids").defaultDeviceJidForUser(s);return{type:"device",chat:s,deviceJid:u,author:u}}case"lidUser":{var c=t.userJid,d=o("WAJids").defaultLidDeviceJidForLidUserJid(c);return{type:"device",chat:c,deviceJid:d,author:d}}case"phoneDevice":{var m=t.deviceJid;return{type:"device",chat:o("WAJids").extractUserJid(m),deviceJid:m,author:m}}case"msgrDevice":{var p=t.deviceJid;return{type:"device",chat:o("WAJids").extractUserJid(p),deviceJid:p,author:p}}case"interopDevice":{var _=t.deviceJid;return{type:"device",chat:o("WAJids").extractUserJid(_),deviceJid:_,author:_}}case"lidDevice":{var f=t.deviceJid;return{type:"device",chat:o("WAJids").extractUserJid(f),deviceJid:f,author:f}}case"group":{var g=this.hasAttr("participant")?this.attrDeviceJid("participant"):null;return g==null?this.throw("expected to have participant JID for group"):{type:"group",chat:t.groupJid,groupJid:t.groupJid,author:g}}case"broadcast":{var h=this.hasAttr("participant")?this.attrDeviceJid("participant"):null;return h==null?this.throw("expected to have participant JID for group"):{type:"broadcast",broadcastJid:t.broadcastJid,chat:o("WAJids").extractUserJid(h),author:h}}case"hosted":{var y=t.hostedDeviceJid;return{type:"device",chat:o("WAJids").extractUserJid(y),deviceJid:y,author:y}}case"hostedLid":{var C=t.hostedLidDeviceJid;return{type:"device",chat:o("WAJids").extractUserJid(C),deviceJid:C,author:C}}case"call":throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["ParsableWapNode: attrFromJid() is called with ",""])),t.callJid),r("err")("ParsableWapNode: attrFromJid() does not support CallJid");default:return t.jidType,this.throw("attrFromJidChat should not be used with jid of type "+t.jidType)}},a.attrFromJidPhoneChat=function(){var e=this.attrJidWithType();switch(e.jidType){case"phoneUser":{var t=e.userJid,n=o("WAJids").defaultPhoneDeviceJidForUser(t);return{type:"device",chat:t,deviceJid:n,author:n}}case"phoneDevice":{var a=e.deviceJid;return{type:"device",chat:o("WAJids").extractPhoneUserJid(a),deviceJid:a,author:a}}case"group":{var i=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return i==null?this.throw("expected to have participant JID for group"):{type:"group",chat:e.groupJid,groupJid:e.groupJid,author:i}}case"broadcast":{var l=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return l==null?this.throw("expected to have participant JID for group"):{type:"broadcast",broadcastJid:e.broadcastJid,chat:o("WAJids").extractPhoneUserJid(l),author:l}}case"call":throw o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["ParsableWapNode: attrFromJid() is called with ",""])),e.callJid),r("err")("ParsableWapNode: attrFromJid() does not support CallJid");default:return e.jidType,this.throw("attrFromJidChat should not be used with jid of type "+e.jidType)}},a.attrFromPhoneJid=function(){var e=this.attrJidWithType();if(e.jidType==="status"){var t=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return t==null?this.throw("to have participant for status msg"):{type:"status",author:t}}else return this.attrFromJidPhoneChat()},a.attrFromJid=function(){var e=this.attrJidWithType();if(e.jidType==="status"){var t=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return t==null?this.throw("to have participant for status msg"):{type:"status",author:t}}return e.jidType==="newsletter"?{type:"newsletter",newsletterJid:e.newsletterJid}:e.jidType==="hosted"?{type:"hosted",hostedDeviceJid:e.hostedDeviceJid}:e.jidType==="hostedLid"?{type:"hostedLid",hostedLidDeviceJid:e.hostedLidDeviceJid}:this.attrFromJidChat()},a.attrJidWithType=function(t){t===void 0&&(t="from");var e=this.attrString(t),n=o("WAJids").interpretAndValidateJid(e);return n.jidType==="unknown"?this.throw('to have "'+t+'"={Jid}, but instead has "'+e+'"'):n},a.attrWapJid=function(t){t===void 0&&(t="from");var e=this.attrString(t),n=o("WAJids").interpretAndValidateJid(e);return n.jidType==="unknown"?o("WAWapJid").WapJid.create(null,e):o("WAWap").JID(o("WAJids").extractFromJid(n))},a.attrLongInt=function(t){var e=this.attrString(t);return o("WALongInt").decimalStringToLongInt(e)},a.attrTime=function(t){return o("WATimeUtils").castToUnixTime(this.attrInt(t))},a.attrFutureTime=function(t){var e=this.attrInt(t);return o("WATimeUtils").futureUnixTime(e)},a.contentString=function(){if(this.hasChildren())return this.throw("to have string content, but has children instead");if(this.hasContent()){var e=new(o("WABinary")).Binary(this.contentBytes());return e.readString(e.size())}else return this.throw("to have content")},a.decodeAsString=function(t){return o("WAWap").decodeAsString(t)},a.contentSerializedPubKey=function(){return this.hasContent()?o("WASignalKeys").serializeIdentity(this.contentBytes()):this.throw("to have content")},a.createParseError=function(t){return new u(this.name(),"expected <"+this.tag()+"> "+t)},a.throw=function(t){throw this.createParseError(t)},n})(o("WAParsableXmlNode").ParsableXmlNode);l.XmppParsingFailure=u,l.ParsableWapNode=c}),98);
__d("WADeprecatedWapParser",["WAParsableWapNode","err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){this.$1=e,this.$2=t}var t=e.prototype;return t.parse=function(t){var e=new(o("WAParsableWapNode")).ParsableWapNode(this.$1,t);try{return{success:this.$2(e)}}catch(e){if(e instanceof o("WAParsableWapNode").XmppParsingFailure)return{error:e};throw e}},t.parseOrThrow=function(t){var e=this.parse(t);if(e.error)throw r("err")(String(e.error));return e.success},e})();l.default=e}),98);
__d("WAAckParser",["WADeprecatedWapParser","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e=new(r("WADeprecatedWapParser"))("ack",function(e){return e.assertTag("ack"),{id:e.attrString("id"),ts:e.maybeAttrString("t"),class:e.attrString("class"),type:e.maybeAttrString("type"),from:e.attrJidWithType(),participant:e.hasAttr("participant")?e.attrDeviceJid("participant"):null,recipient:e.hasAttr("recipient")?e.attrUserJid("recipient"):null}});function s(e,t){return e.id===t.id&&(t.class===void 0||e.class===t.class)&&(t.type===void 0||e.type===t.type)&&(t.from===void 0||u(e.from,t.from))&&(t.participant===void 0||e.participant===t.participant)&&(t.recipient===void 0||e.recipient===t.recipient)&&(t.ts===void 0||e.ts===t.ts)}function u(e,t){if(o("WAJids").extractFromJid(e)===t)return!0;if(e.userJid!=null)return o("WAJids").defaultDeviceJidForUser(e.userJid)===t;if(e.deviceJid!=null){var n=e.deviceJid;return o("WAJids").extractDeviceId(n)===0&&o("WAJids").extractUserJid(n)===t}return!1}l.AckParser=e,l.ackMatchesTemplate=s,l.fromJidsAreEqual=u}),98);
__d("WAParseIqResponse",["WAWap"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var r=e.content;if(r&&Array.isArray(r)&&r[0]){var a=r[0];if(a.tag==="error"){var i=a.attrs||{},l;n&&(typeof n=="function"?l=n(e):l=n.parseOrThrow(a));var u=l;return{success:!1,errorCode:parseInt(i.code,10),errorText:o("WAWap").decodeAsString(i.text)||"",errorType:o("WAWap").decodeAsString(i.type)||"",errorBackoff:parseInt(i.backoff,10),toString:s,customError:u}}}return typeof t=="function"?{success:!0,result:t(e)}:{success:!0,result:t.parseOrThrow(e)}}function s(){return"IqError "+this.errorCode+": "+this.errorText}l.parseIqResponse=e}),98);
__d("WADeprecatedSendIq",["Promise","WAAckParser","WAArrayUtils","WAComms","WALogger","WAParseIqResponse"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){return o("WAComms")._sendIq(e,!1).then(function(e){return o("WAParseIqResponse").parseIqResponse(e,t)})}function c(e,t,n){return o("WAComms")._sendIq(e,!1).then(function(e){return o("WAParseIqResponse").parseIqResponse(e,t,n)})}function d(e,t,n){return o("WAComms")._sendIq(e,!1,n).then(function(e){return o("WAParseIqResponse").parseIqResponse(e,t)})}function m(e,t){return o("WAComms")._sendIq(e,!0).then(function(e){return o("WAParseIqResponse").parseIqResponse(e,t)})}function p(e,t){return _(e,t).then(function(){})}function _(t,r){return new(s||(s=n("Promise")))(function(a){var i=o("WAComms").singletonOrThrowIfUninitialized("deprecatedSendStanzaAndReturnAck"),l=function(t){var e=o("WAAckParser").AckParser.parse(t);return!e.error&&o("WAAckParser").ackMatchesTemplate(e.success,r)?t:null},u={type:"ack",parseAndTest:l,resolve:a,stanza:t,attachedToSocketId:o("WAComms").DEFAULT_SOCKET_ID,orderedId:o("WAComms").getAndIncrementNextOrderedId()};if(i.ackHandlers.push(u),!i.socket){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Comms has no open socket, will send stanza when socket opens"])));return}i.callStanza(t).catch(function(e){var t=i.ackHandlers.indexOf(u);t!==-1&&(o("WAArrayUtils").removeIndexWithoutPreservingOrder(i.ackHandlers,t),u.resolve((s||(s=n("Promise"))).reject(e)))})})}function f(e,t){o("WAComms").castSmaxStanza(e,t)}l.deprecatedSendIq=u,l.deprecatedSendIqErrorParser=c,l.deprecatedSendIqIfConnectedWithin=d,l.deprecatedSendIqWithoutRetry=m,l.deprecatedSendStanzaAndWaitForAck=p,l.deprecatedSendStanzaAndReturnAck=_,l.deprecatedCastStanza=f}),98);
__d("WAMediaConnParser",["WADeprecatedWapParser","WAServerMediaType"],(function(t,n,r,o,a,i,l){"use strict";var e=new(r("WADeprecatedWapParser"))("mediaConnParser",function(e){var t,n,r=e.child("media_conn"),o=c(r);return{hosts:o,authToken:r.attrString("auth"),authTokenExpiryTs:r.attrFutureTime("auth_ttl"),routesExpiryTs:r.attrFutureTime("ttl"),maxBuckets:r.attrInt("max_buckets"),maxManualRetry:(t=r.maybeAttrInt("max_manual_retry",0,4))!=null?t:3,maxAutoDownloadRetry:(n=r.maybeAttrInt("max_auto_download_retry",0,4))!=null?n:3}});function s(e){var t,n;if(e.hasAttr("fallback_hostname"))return{domain:e.attrString("fallback_hostname"),class:e.maybeAttrString("fallback_class"),ip4:(t=e.maybeAttrString("fallback_ip4"))!=null?t:void 0,ip6:(n=e.maybeAttrString("fallback_ip6"))!=null?n:void 0}}function u(e){var t,n,r,o;return{domain:e.attrString("hostname"),fallback:s(e),uploadable:d(e,"upload"),downloadable:d(e,"download"),isFallback:e.maybeAttrString("type")==="fallback",downloadBuckets:(t=(n=e.maybeChild("download_buckets"))==null?void 0:n.mapChildren(function(e){return parseInt(e.tag(),10)}))!=null?t:[],class:e.maybeAttrString("class"),ip4:(r=e.maybeAttrString("ip4"))!=null?r:void 0,ip6:(o=e.maybeAttrString("ip6"))!=null?o:void 0}}function c(e){return e.mapChildrenWithTag("host",u)}function d(e,t){return e.hasChild(t)?e.child(t).mapChildren(function(e){var t=e.tag();return o("WAServerMediaType").castToServerMediaType(t)}).filter(Boolean):o("WAServerMediaType").SERVER_MEDIA}l.mediaConnParser=e}),98);
__d("WAGatherMediaInfo",["WADeprecatedSendIq","WAErrors","WALogger","WAMediaConnParser","WAPromiseManagement","WAPromiseRetryLoop","WAResultOrError","WAWap"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=507,p=o("WAPromiseManagement").cacheWhilePending(function(){return"gatherMediaInfo"},_);function _(){var e=new(o("WAPromiseRetryLoop")).PromiseRetryLoop({name:"gatherMediaInfo",timer:{jitter:.25,max:987e3,algo:{type:"fibonacci",first:6e3,second:12e3},relativeDelay:!0},code:g});return e.start(),e.promise()}var f=60;function g(t){var n,r=(n=o("WAWap")).wap("iq",{id:n.generateId(),to:n.S_WHATSAPP_NET,type:"set",xmlns:"w:m"},n.wap("media_conn",null));return o("WADeprecatedSendIq").deprecatedSendIqIfConnectedWithin(r,o("WAMediaConnParser").mediaConnParser,f).then(function(n){if(n.success)o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["gatherMediaInfo got "," hosts"])),n.result.hosts.length),t(o("WAResultOrError").makeResult(n.result));else if(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["gatherMediaInfo failure ",""])),n),n.errorCode===m){var r=n.errorBackoff;o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["gatherMediaInfo got "," seconds backoff"])),r),t(o("WAResultOrError").makeError({type:"backoff",backoffMs:r*1e3}))}else n.errorCode<500&&(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["gatherMediaInfo got client error: ",""])),n.errorCode),t(o("WAResultOrError").makeError({type:"client-error",code:n.errorCode,text:n.errorText})))}).catch(function(e){e instanceof o("WAErrors").Disconnected?t(o("WAResultOrError").makeError("disconnected")):o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["gatherMediaInfo error ",""])),e)})}l.gatherMediaInfo=p}),98);
__d("WAMediaRouteSelection",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=null,n=null,r=null,a=e.hosts,i=e.operation,l=e.mediaType;if(e.operation==="download"){var s,u=e.catHotTimespan,c=e.ncHot,d=e.getVcaEnabledBucket,m=new Map;a.forEach(function(e){e.downloadBuckets.forEach(function(t){m.set(t,e)})});var p=m.get(0);u>0&&c!=null&&o("WATimeUtils").happenedWithin(o("WATimeUtils").castToUnixTime(c),u)?t=1:d&&(t=d());var _=null;t!=null&&(_=m.get(t)),(s=_)!=null&&s.downloadable.includes(l)?n=_:p!=null&&p.downloadable.includes(l)&&(n=p)}for(var f=0;f<a.length;f++){var g=a[f];if((i==="upload"&&g.uploadable.includes(l)||i==="download"&&g.downloadable.includes(l))&&(n==null?n=g:g.isFallback&&r==null&&(r=g)),n!=null&&r!=null)break}return{selectedHost:n,fallbackHost:r,bucket:t}}l.mediaRouteSelection=e}),98);
__d("WAGetMediaRoute",["$InternalEnum","WACreateGetVcaEnabledBucket","WAExtractNcHotTimestamp","WAGatherMediaInfo","WAMediaRouteSelection","WAPromiseManagement","WAResultOrError","WATagsLogger","WATimeUtils","WAWaitForComms","WAWorkerGlobalScope"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f=o("WATagsLogger").TAGS(["GetMediaRoute"]),g=86400,h=n("$InternalEnum")({Fresh:"fresh",Cached:"cached",Stale:"stale"}),y=null,C=!1,b=null;async function v(t,n){n==null||n.addPoint("get_cached_or_fresh_media_access_start");var r=await E();if(n==null||n.addPoint("get_cached_or_fresh_media_access_end"),!r.success)return f.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to get mediaAccess: ",""])),r.error),n==null||n.addPoint("get_media_access_failed",{string:{mediaAccessStatus:r.error}}),r;n==null||n.addAnnotations({string:{mediaAccessStatus:r.value.state}});var a=r.value.mediaAccess,i=a.authToken,l=a.hosts,u=a.maxBuckets,c=t.operation==="upload"?o("WAMediaRouteSelection").mediaRouteSelection({operation:"upload",mediaType:t.serverMediaType,hosts:l}):o("WAMediaRouteSelection").mediaRouteSelection({operation:"download",mediaType:t.serverMediaType,hosts:l,catHotTimespan:g,ncHot:o("WAExtractNcHotTimestamp").extractNcHotTimestamp(t.directPath),getVcaEnabledBucket:o("WACreateGetVcaEnabledBucket").msgrCreateGetVcaEnabledBucket(t.directPath,u)}),d=c.selectedHost,m=c.fallbackHost,p=c.bucket;return d==null?(f.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Error: no media host"]))),o("WAResultOrError").makeError("no-host")):o("WAResultOrError").makeResult({authToken:i,selectedHost:d,fallbackHost:m,bucket:p})}function S(){var e=b;e!=null&&(o("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(e),b=null)}function R(e){S();var t=Math.max(e.authTokenExpiryTs-o("WATimeUtils").unixTime(),0);if(!(t<=300)){var n=o("WATimeUtils").pastUnixTime(300,e.authTokenExpiryTs),r=o("WATimeUtils").pastUnixTime(Math.floor(t*.2),e.authTokenExpiryTs),a=n<r?n:r,i=o("WATimeUtils").cappedMillisecondsUntil(a),l=Math.floor(Math.random()*o("WATimeUtils").MINUTE_MILLISECONDS),s=o("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){f.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["AuthTTL approaching expiry, refreshing MediaAccess routes"]))),L().catch(function(e){f.ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Error occurred during authTTL automatic refresh: ",""])),e)})},i+l);b=s}}var L=o("WAPromiseManagement").cacheWhilePending(function(){return"all"},async function(){if(C)return f.LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["mediaAccess has gone, but we are still locked by backoff"]))),o("WAResultOrError").makeError("backoff");await o("WAWaitForComms").waitForComms(),f.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["mediaAccess has gone, gather a new one"]))),S();var e=await o("WAGatherMediaInfo").gatherMediaInfo();if(e.success)return y=e.value,R(e.value),o("WAResultOrError").makeResult({mediaAccess:e.value,state:h.Fresh});var t=e.error,n=t==="disconnected"?"disconnected":t.type;return f.WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Can not get mediaAccess: ",""])),n),t==="disconnected"||t.type==="client-error"?o("WAResultOrError").makeError("disconnected"):(t.type,C=!0,o("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){C=!1,L().catch(function(e){f.ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Error occurred on gather after backoff expiry: ",""])),e)})},t.backoffMs),o("WAResultOrError").makeError("backoff"))}),E=function(){var e=y;if(e==null)return L();if(o("WATimeUtils").isInFuture(e.routesExpiryTs))return Promise.resolve(o("WAResultOrError").makeResult({mediaAccess:e,state:h.Cached}));var t=L();return o("WATimeUtils").isInFuture(e.authTokenExpiryTs)?Promise.resolve(o("WAResultOrError").makeResult({mediaAccess:e,state:h.Stale})):t};function k(){y=null,C=!1,S()}l.getMediaRoute=v,l.getCachedOrFreshMediaAccess=E,l.clearCachedMediaAccessForTest=k}),98);
__d("WAMediaOperationsRetrier",["WALogger","WAPromiseBackoffs"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=4,c={algo:{type:"constant",delay:1e3},jitter:0},d=(function(){function t(e,t,n){this.$1=e,this.routesInfo=t,this.$2=o("WAPromiseBackoffs").createPromiseTimer(c),this.$3=0,this.$4=!1,this.$5=n}var n=t.prototype;return n.run=async function(n,r){for(;this.$3<u;){o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Running retrier"]))),await this.$2();var t=void 0;if(this.$3>0){var a;t=this.$3>=u-2&&!this.$4,o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["MediaOperationsRetrier:"," wait for internet, attempt = ",""])),this.$1,this.$3),await((a=this.$5)==null?void 0:a.call(this))}else t=!1;var i=this.routesInfo;if(!i)return null;var l=i.host;t&&i.fallbackHost&&(l=i.fallbackHost);var c=await n(l,i.authToken,this.$3,r);if(c.success)return c.value;++this.$3,this.$4=c.error.progressMade}return null},t})();l.MAX_ATTEMPTS=u,l.BACKOFF_OPTIONS=c,l.MediaOperationsRetrier=d}),98);
__d("WACreateMediaDownloadRetrier",["WAComms","WAGetMediaRoute","WAMediaOperationsRetrier","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){var t=e.directPath,n=e.eventFlow,r=e.fileEncSha256,a=e.mediaTypeDetails,i=a.type==="regular"?a.mediaType:"preview";n==null||n.addPoint("get_media_route_start");var l=await o("WAGetMediaRoute").getMediaRoute({operation:"download",serverMediaType:i,fileEncSha256:r,directPath:t},n);if(!l.success)return n==null||n.addPoint("get_media_route_fail"),l;n==null||n.addPoint("get_media_route_end");var s=l.value,u=s.selectedHost,c=s.fallbackHost,d=s.authToken,m=new(o("WAMediaOperationsRetrier")).MediaOperationsRetrier("download",{host:{domain:u.domain,class:u.class},fallbackHost:c&&{domain:c.domain,class:c.class},authToken:d,timeElapsed:null},o("WAComms").waitForConnection);return o("WAResultOrError").makeResult({retrier:m,mediaRouteDetails:l.value})}l.createMediaDownloadRetrier=e}),98);
__d("WAHttpDownloadMedia",["WAErrorMessage","WALogger","WAMediaQplHelper","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d="URL signature expired";async function m(t,n){var r=n!=null?n:{},a=r.mediaMetrics,i=r.abortSignal;a==null||a.addPoint("http_fetch_start");var l=await self.fetch(t,{method:"GET",mode:"cors",cache:"no-store",signal:i}).then(function(e){return a==null||a.addPoint("http_fetch_end"),o("WAResultOrError").makeResult(e)}).catch(function(t){var n=o("WAErrorMessage").maybeGetMessageFromError(t);return a==null||a.addPoint("http_fetch_fail",{string:{httpFetchError:n}}),o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["HttpDownloadMedia: fail to initiate fetch: ",", message: ",""])),t,n),t.name==="AbortError"?o("WAResultOrError").makeError("http-fetch-aborted"):o("WAResultOrError").makeError("http-fetch-exception")});if(l.success===!1)return l;var m=l.value,p=m.headers.get("content-length"),_=m.status;switch(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Fetch Media HTTP status ",""])),_),a==null||a.addAnnotations({string:{ciphertextMediaSizeBucket:p!=null?o("WAMediaQplHelper").convertIntegerSizeToStringBucket(Number(p)):null},int:{httpStatus:_}}),_){case 200:case 206:return o("WAResultOrError").makeResult(m);case 401:return o("WAResultOrError").makeError("access-expired");case 403:return m.text().then(function(e){return e===d?o("WAResultOrError").makeError("signature-expired"):o("WAResultOrError").makeError("access-expired")}).catch(function(e){return o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["HttpDownloadMedia: fail to parse request body: ",""])),e),o("WAResultOrError").makeError("access-expired")});case 404:case 410:return o("WAResultOrError").makeError("media-not-found");case 408:return o("WAResultOrError").makeError("server-timeout");case 416:return o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Download Media Error: can not resume from offset"]))),o("WAResultOrError").makeError("request-error");case 429:case 507:return o("WAResultOrError").makeError("download-throttled");default:return _>=400&&_<500?o("WAResultOrError").makeError("request-error"):o("WAResultOrError").makeError("unspecified-http-error")}}l.httpDownloadMedia=m}),98);
__d("WAHttpUtils",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){if(!/^https:\/\/[-\w.]+\.\w+$/.test(e))throw r("err")('buildUrl given invalid host "'+e+'"');if(!t.startsWith("/"))throw r("err")('buildUrl given invalid path "'+t+'"');var o=n,a=""+e+t;if(!o)return a;var i=Object.keys(o).map(function(e){var t=o[e];t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n=t instanceof Uint8Array?Array.from(t).map(function(e){return"%"+e.toString(16)}).join(""):encodeURIComponent(t.toString());return encodeURIComponent(e)+"="+n});if(i.length>0){var l=i.join("&");return a.includes("?")?a+"&"+l:a+"?"+l}else return a}l.buildUrl=e}),98);
__d("WAMediaUrl",["WABase64","WAGlobals","WAHttpUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=1;function s(t,n,r,a,i,l,s){var u=o("WAGlobals").getDependencies().mediaUploadRoot(),c=o("WABase64").encodeB64UrlSafe(r),d=o("WABase64").encodeB64UrlSafe(n),m={auth:i,token:d};return l&&(m.resume=e),s!=null&&s>0&&(m.bytestart=s),o("WAHttpUtils").buildUrl("https://"+a,u+"/"+t+"/"+c,m)}function u(e,t,n,r,a,i,l){var s=o("WABase64").encodeB64UrlSafe(t),u={hash:s,mode:r};return a!=null&&(u._nc_cat=a),i!=null&&i>=0&&(u.bytestart=i),l!=null&&l>0&&(u.byteend=l),o("WAHttpUtils").buildUrl("https://"+n,e,u)}l.RESUME_PARAM=e,l.buildUploadUrl=s,l.buildDownloadUrl=u}),98);
__d("WADownloadCiphertext",["WAAssertUnreachable","WABase64","WACreateMediaDownloadRetrier","WACryptoSha256","WACryptoUtils","WAHashUtils","WAHttpDownloadMedia","WALogger","WAMediaUrl","WAPromiseManagement","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p;async function _(t){var n=t.abortSignal,a=t.mediaTypeDetails,i=t.fileEncSha256,l=t.directPath,_=t.plaintextHash,f=t.eventFlow,h=t.fromBytes,y=t.toBytes;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Start download ciphertext for hash: ",""])),o("WAHashUtils").sanitisePlaintextHash(_)),f.addPoint("create_retrier_start");var C=await o("WACreateMediaDownloadRetrier").createMediaDownloadRetrier({mediaTypeDetails:a,directPath:l,eventFlow:f,fileEncSha256:i});if(!C.success)return f.addPoint("create_retrier_fail"),C;f.addPoint("create_retrier_end");var b=C.value,v=b.retrier,S=b.mediaRouteDetails,R=await v.run(function(e,t,r){var a=e.domain,m="http_download_media_"+r,p=o("WAMediaUrl").buildDownloadUrl(l,i,a,"manual",S.bucket,h,y);return o("WALogger").DEV_XMPP(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Downloading ciphertext for hash : "," from ",". Attempt: ",""])),o("WAHashUtils").sanitisePlaintextHash(_),p,r),f.addPoint(m+"_start"),o("WAHttpDownloadMedia").httpDownloadMedia(p,{mediaMetrics:f,abortSignal:n,cachePolicy:r>0?"no-store":"force-cache"}).then(function(e){if(e.success)return e.value.arrayBuffer().then(function(e){return f.addPoint(m+"_end"),o("WAResultOrError").makeResult(o("WAResultOrError").makeResult(e))}).catch(function(e){return f.addPoint("response_array_buffer_error"),f.addPoint(m+"_fail"),o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["HttpDownloadMedia: fail to parse request body ",""])),e),o("WAResultOrError").makeResult(o("WAResultOrError").makeError("body-network-error"))});f.addPoint(m+"_fail");var t=e.error;switch(o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Download Media Error: ",""])),t),f.addPoint(t),t){case"signature-expired":return o("WAResultOrError").makeResult(o("WAResultOrError").makeError("signature-expired"));case"http-fetch-aborted":return o("WAResultOrError").makeResult(o("WAResultOrError").makeError("http-fetch-aborted"));case"http-fetch-exception":case"server-timeout":case"unspecified-http-error":return o("WAResultOrError").makeError({progressMade:!0});default:return o("WAResultOrError").makeResult(o("WAResultOrError").makeError(t))}}).catch(function(e){return f.addPoint(m+"_fail"),o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["downloadCiphertext http download exception: ",""])),e),o("WAResultOrError").makeError({progressMade:!1})})});if(R==null)return o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["downloadMedia given up"]))),o("WAResultOrError").makeError("max-attempts-exceeded");if(R.success===!1){var L=R.error;switch(o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Download Plaintext failed: ",""])),L),L){case"signature-expired":case"http-fetch-aborted":case"media-not-found":case"download-throttled":case"body-network-error":case"request-error":return o("WAResultOrError").makeError(L);case"access-expired":return o("WAResultOrError").makeError("disconnected");default:throw r("WAAssertUnreachable")(L)}}else{var E=R.value;return!g(h,y)&&!o("WACryptoUtils").arrayBuffersEqual(await o("WACryptoSha256").sha256(E),i)?o("WAResultOrError").makeError("ciphertext-hash-mismatch"):(f.addPoint("download_finish",{int:{byteLength:E.byteLength},bool:{isPartialDownload:g(h,y)}}),o("WAResultOrError").makeResult(E))}}var f=o("WAPromiseManagement").cacheWhilePending(function(e){var t=e.fileEncSha256,n=e.fromBytes,r=e.toBytes;return o("WABase64").encodeB64UrlSafe(t)+"-"+(n!=null?n:"X")+"-"+(r!=null?r:"X")},_);function g(e,t){return e!=null&&e>0?!0:t!=null}l.cachedDownloadCiphertext=f}),98);
__d("WADownloadAndDecryptMedia",["WADecryptMedia","WADownloadCiphertext","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){var t=e.abortSignal,n=e.mediaTypeDetails,r=e.fileEncSha256,a=e.directPath,i=e.mediaKey,l=e.plaintextHash,s=e.eventFlow,u=await o("WADownloadCiphertext").cachedDownloadCiphertext({abortSignal:t,mediaTypeDetails:n,fileEncSha256:r,directPath:a,eventFlow:s,plaintextHash:l});if(u.success!==!0)return u;var c=await o("WADecryptMedia").decryptMedia({mediaKey:i,mediaTypeDetails:n,plaintextHash:l,ciphertextHmac:u.value});return c.success!==!0?c:(c.value.alternativeHmacSaltUsed!=null&&s.addAnnotations({string:{alternativeHmacSaltUsed:c.value.alternativeHmacSaltUsed}}),o("WAResultOrError").makeResult(c.value.plaintext))}l.downloadAndDecryptMedia=e}),98);
__d("WACreateMediaDecrypterStream",["WABinary","WAMediaCrypto","WAResultOrError","WATagsLogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_=o("WATagsLogger").TAGS(["WADecryptStream"]);function f(t,n,r,a,i){if(a.byteLength===0)return _.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["expectedHmacs must have at least one element"]))),o("WAResultOrError").makeError("missing-expected-hmacs");if(a.byteLength!==i.length*o("WAMediaCrypto").HMAC_LENGTH)return _.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["expectedHmacs and ciphertextLengths must have the same length"]))),o("WAResultOrError").makeError("hmac-chiphertext-array-mismatch");var l=g(a),m=n,p=new(o("WABinary")).Binary,f=0,y=async function(n,a){for(p.writeByteArray(n);f<l.length&&p.size()>=i[f];f++){var e=p.readByteArrayView(i[f]);_.DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Processing scan "," of size ",""])),f,e.length);var s=f===i.length-1;try{var d=await o("WAMediaCrypto").hmacAndDecryptPartial(t,m,e,r,l[f]),g=d.plaintext,y=d.nextIv;s?a.enqueue(h(g)):a.enqueue(g),m=y}catch(e){_.ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Unable to decrypt chunk. isLastChunk: "," error: ",""])),s,e),e instanceof o("WAMediaCrypto").HmacValidationError?a.error("enc-hash-mismatch"):a.error("decryption-error")}}},C=new TransformStream({transform:function(t,n){var e=t;return y(e,n)},flush:function(t){p.size()>0&&_.ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Unexpected ciphertext in buffer following flush"])))}});return o("WAResultOrError").makeResult(C)}function g(e){var t=[];if(e.byteLength%o("WAMediaCrypto").HMAC_LENGTH!==0)throw r("err")("Sidecar length is not a multiple of hmac length");for(var n=0;n<e.byteLength;n+=o("WAMediaCrypto").HMAC_LENGTH){var a=new Uint8Array(e,n,o("WAMediaCrypto").HMAC_LENGTH);t.push(a)}return t}function h(e){if(e.length<o("WAMediaCrypto").CBC_BLOCK_SIZE)return _.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Plaintext size is less than CBC_BLOCK_SIZE"]))),e;var t=e[e.length-1];return t===0||t>o("WAMediaCrypto").CBC_BLOCK_SIZE?(_.ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Invalid PKCS padding length"]))),e):e.subarray(0,-t)}l.createDefaultDecryptStream=f}),98);
__d("WAMediaProgressiveJpegTransformStream",["WABinary"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.scanLengths,n=[],r=0;for(var a of t)r+=a,n.push(r);var i=new(o("WABinary")).Binary,l=0,s=0,u=new TransformStream({transform:function(r,o){var e=r;for(s+=e.byteLength,i.writeByteArray(e);l<t.length&&n[l]<s;l++){var a=i.readByteArrayView(t[l]);o.enqueue(a)}},flush:function(t){t.enqueue(i.readByteArrayView())}});return u}l.makeProgressiveJpegHandlerTransformStream=e}),98);
__d("WADownloadProgressiveJpegPlaintextStreamerWithoutRetry",["WACreateMediaDecrypterStream","WAHttpDownloadMedia","WAMediaCrypto","WAMediaProgressiveJpegTransformStream","WAProgressiveJpegGetPJpegDetails","WAResultOrError","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("WATagsLogger").TAGS(["WADownloadProgressiveJpegPlaintextStreamer"]);function c(e){return e}async function d(t){var n=t.abortSignal,r=t.serverMediaType,a=t.downloadUrl,i=t.eventFlow,l=t.progressiveJpegDetails,c=t.mediaKey,d=t.cachePolicy,m=await o("WAHttpDownloadMedia").httpDownloadMedia(a,{mediaMetrics:i,abortSignal:n,cachePolicy:d});if(m.success!==!0)return m;var p=m.value.body;if(p==null)return o("WAResultOrError").makeError("body-network-error");var _=m.value.headers.get("Content-Length");if(_==null)return u.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Content-Length header is missing"]))),o("WAResultOrError").makeError("missing-content-length-header");var f=Number(_);if(Number.isNaN(f))return u.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Content-Length header is not a number"]))),o("WAResultOrError").makeError("invalid-content-length-header");var g=o("WAProgressiveJpegGetPJpegDetails").getExtendedProgressiveJpegDetails({progressiveJpegDetails:l,ciphertextLength:f}),h=await o("WAMediaCrypto").computeMediaKeys(c,r),y=o("WACreateMediaDecrypterStream").createDefaultDecryptStream(h.cipherKey,h.iv,h.hmacKey,g.sidecar,g.alignedScanLengths);if(y.success!==!0)return y;var C=y.value,b=o("WAMediaProgressiveJpegTransformStream").makeProgressiveJpegHandlerTransformStream(g),v=p.pipeThrough(C).pipeThrough(b);return o("WAResultOrError").makeResult(v)}l.unsafeCastToDownloadAndDecryptPJpegStream=c,l.downloadProgressiveJpegPlaintextUsingStreamsWithoutRetry=d}),98);
__d("WADownloadProgressiveJpegPlaintextStreamer",["WAAssertUnreachable","WACreateMediaDownloadRetrier","WADownloadProgressiveJpegPlaintextStreamerWithoutRetry","WAMediaUrl","WAResultOrError","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("WATagsLogger").TAGS(["WADownloadProgressiveJpegPlaintextStreamer"]);async function u(t){var n=t.abortSignal,a=t.serverMediaType,i=t.fileEncSha256,l=t.directPath,u=t.eventFlow,c=t.progressiveJpegDetails,d=t.mediaKey,m=await o("WACreateMediaDownloadRetrier").createMediaDownloadRetrier({directPath:l,eventFlow:u,fileEncSha256:i,mediaTypeDetails:{type:"regular",mediaType:a}});if(!m.success)return m;var p=m.value,_=p.retrier,f=p.mediaRouteDetails,g=f.bucket,h=await _.run(async function(e,t,s){var m=e.domain,p=o("WAMediaUrl").buildDownloadUrl(l,i,m,"manual",g),_=await o("WADownloadProgressiveJpegPlaintextStreamerWithoutRetry").downloadProgressiveJpegPlaintextUsingStreamsWithoutRetry({abortSignal:n,downloadUrl:p,eventFlow:u,mediaKey:d,progressiveJpegDetails:c,serverMediaType:a,cachePolicy:s>0?"no-store":"force-cache"});if(_.success===!0)return o("WAResultOrError").makeResult(_);var f=_.error;switch(f){case"http-fetch-exception":case"server-timeout":case"unspecified-http-error":case"invalid-content-length-header":case"missing-content-length-header":return o("WAResultOrError").makeError({progressMade:!0});case"access-expired":return o("WAResultOrError").makeResult(o("WAResultOrError").makeError("disconnected"));case"body-network-error":return o("WAResultOrError").makeResult(o("WAResultOrError").makeError("request-error"));case"media-not-found":case"request-error":case"download-throttled":case"signature-expired":case"http-fetch-aborted":return o("WAResultOrError").makeResult(o("WAResultOrError").makeError(f));case"missing-expected-hmacs":case"hmac-chiphertext-array-mismatch":return o("WAResultOrError").makeResult(o("WAResultOrError").makeError(f));default:throw r("WAAssertUnreachable")(f)}});return h==null?(s.WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Download with stream given up"]))),o("WAResultOrError").makeError("max-attempts-exceeded")):h}l.downloadProgressiveJpegPlaintextUsingStreams=u}),98);
__d("WAPrepareMediaDownload",["Promise","WAErrorMessage","WAGetAgeBucketForMediaKeyTimestamp","WAHashUtils","WAMediaQplHelper","WAProgressiveJpegGetPJpegDetails","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=typeof((e=navigator.storage)==null?void 0:e.getDirectory)=="function",m=typeof self.caches=="object",p=0;function _(e){var t,r=e.mediaDownloadFlow,a=e.mediaEntry,i=e.logger,l=e.hash,_=a.mediaKeyTimestamp,f=a.size,g=a.serverMediaType,h=a.downloadableThumbnail,y=a.directPath,C=o("WAGetAgeBucketForMediaKeyTimestamp").getAgeBucketForMediaKeyTimestamp(_);i.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["start download ",". mediaKeyTimestampAgeBucket: ",", size: ",", serverMediaType: ",""])),o("WAHashUtils").sanitisePlaintextHash(l),C,f,g);var b=(t=o("WAProgressiveJpegGetPJpegDetails").maybeGetProgressiveJpegDetailsUsingMediaEntry(a).value)!=null?t:null;return r.addPoint("wa_protocol_media_download_start",{string:{mediaType:g,mediaKeyTimestampAgeBucket:C,sanitisedMediaHash:o("WAHashUtils").sanitisePlaintextHash(l)},bool:{isOPFSSupported:d,isWebCacheSupported:m,duplicateDirectPath:(h==null?void 0:h.directPath)===y,hasDownloadableThumbnail:(h==null?void 0:h.directPath)!=null,isProgressiveJpeg:b!=null}}),{logDownloadResult:function(t){return p++,r.addAnnotations({int:{concurrentDownloadCount:p}}),t.then(function(e){if(e.success){var t=e.value.plaintext.byteLength;r.addPoint("wa_protocol_media_download_end",{string:{media_size:o("WAMediaQplHelper").convertIntegerSizeToStringBucket(t)}})}else r.addPoint("wa_protocol_media_download_fail",{string:{wa_protocol_media_download_fail_reason:e.error}});return e}).catch(function(e){r.addPoint("wa_protocol_media_download_fail",{string:{wa_protocol_media_download_fail_reason:"runtime-error"}});var t=o("WAErrorMessage").maybeGetMessageFromError(e);return i.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media due to runtime-error: ",""])),t),(c||(c=n("Promise"))).resolve(o("WAResultOrError").makeError("runtime-error"))}).finally(function(){p--})}}}l.prepareMediaDownload=_}),98);
__d("WAProgressiveJpegAddJPEGTrailingTag",["WATypedArraysConcat"],(function(t,n,r,o,a,i,l){"use strict";var e=new Uint8Array([255,217]);function s(t){return o("WATypedArraysConcat").concatTypedArrays(Uint8Array,[new Uint8Array(t),e]).buffer}l.JPEG_TRAILING_TAG=e,l.addJPEGTrailingTag=s}),98);
__d("WAStreamAsyncIterator",[],(function(t,n,r,o,a,i){"use strict";function e(e){return l.apply(this,arguments)}function l(){return l=babelHelpers.wrapAsyncGenerator(function*(e){var t=e.getReader();try{for(;;){var n=yield babelHelpers.awaitAsyncGenerator(t.read()),r=n.done,o=n.value;if(r)return;yield o}}finally{t.releaseLock()}}),l.apply(this,arguments)}i.streamAsyncIterator=e}),66);
__d("WADownloadMedia",["WAByteArray","WACryptoSha256","WACryptoUtils","WADownloadAndDecryptMedia","WADownloadDownloadablePreview","WADownloadProgressiveJpegPlaintextStreamer","WADownloadProgressiveJpegPreview","WAErrorMessage","WAHashUtils","WAMediaCrypto","WAMediaUtils","WAPrepareMediaDownload","WAProgressiveJpegAddJPEGTrailingTag","WAProgressiveJpegGetPJpegDetails","WAPromiseManagement","WAResultOrError","WAStreamAsyncIterator","WATagsLogger","WATypedArraysConcat"],(function(t,n,r,o,a,i,l){"use strict";var e=["hash"],s,u,c,d,m,p,_,f,g,h,y,C,b,v,S=o("WATagsLogger").TAGS(["MediaDownload"]);function R(e){var t=e.downloadMediaMetric,n=e.hash,r=e.mediaEntry,a=e.protocolMsgId,i=e.handleMediaPreviewDownload,l=e.handleMediaPreviewBeforeDownload,s=e.handleMediaPreviewDownloadFailed,u=o("WAPrepareMediaDownload").prepareMediaDownload({mediaDownloadFlow:t,mediaEntry:r,hash:n,logger:S}),c=u.logDownloadResult;return c(E({downloadMediaMetric:t,hash:n,mediaEntry:r,protocolMsgId:a,handleMediaPreviewDownload:i,handleMediaPreviewBeforeDownload:l,handleMediaPreviewDownloadFailed:s}))}var L=async function(t){var e=t.downloadMediaMetric,n=t.hash,r=t.mediaEntry,a=t.protocolMsgId,i=t.handleMediaPreviewDownload,l=t.handleMediaPreviewBeforeDownload,p=t.handleMediaPreviewDownloadFailed,_=o("WAMediaUtils").validateDecodedMediaEntryForDownload(r);if(!_.success)return S.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["mediaEntry is incomplete. ",""])),_.error),_;var f=_.value,g=f.directPath,h=f.fileEncSha256,y=f.fileSha256,C=f.mediaKey,b=f.serverMediaType,v=o("WAProgressiveJpegGetPJpegDetails").maybeGetProgressiveJpegDetailsUsingMediaEntry(r);v.success===!1&&(S.WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Failed to get ProgressiveJpeg details: ",""])),v.error),e.addPoint(v.error));var R=v.success===!0?v.value:null,L=function(t){if(t==null)return Promise.resolve();var e=o("WAMediaCrypto").convertServerMediaTypeToPreviewMediaType(b);return e==null?(S.ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["media: mediaPreview - unsupported preview media type ",""])),b),Promise.resolve()):i(n,t,e,a).then(function(){})};if(R!=null&&o("WAMediaUtils").isTransformStreamSupported()&&b==="image"){var E=await x({directPath:g,downloadFlow:e,fileEncSha256:h,handleMediaPreviewBlob:L,hash:n,mediaKey:C,progressiveJpegDetails:R,serverMediaType:b,fileSha256:y,handleMediaPreviewBeforeDownload:l,handleMediaPreviewDownloadFailed:p});if(E.success)return o("WAResultOrError").makeResult({mimeType:o("WAMediaUtils").getMimeTypeFromServerMediaType(b),plaintext:E.value,serverMediaType:b});var I=E.error;switch(S.WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Media Streaming failed to download progressive jpeg. Reason: ",". PlaintextHash: ",""])),I,o("WAHashUtils").sanitisePlaintextHash(n)),I){case"signature-expired":case"request-error":return S.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Skipping fallback for ",". PlaintextHash: ",""])),I,o("WAHashUtils").sanitisePlaintextHash(n)),o("WAResultOrError").makeError(I)}}e==null||e.addPoint("fallback_to_non_streaming_download");var T=D({hash:n,mediaEntry:r,progressiveJpegDetails:R,protocolMsgId:a,serverMediaType:b,handleMediaPreviewBeforeDownload:l,handleMediaPreviewDownloadFailed:p,downloadEntry:e.downloadEntry,triggerUIView:e.triggerUIView});return T.then(function(e){return e.success===!1?L(null):L(e.value)}),k({downloadMediaMetric:e,mediaEntry:_.value})},E=o("WAPromiseManagement").cacheWhilePending(function(e){var t=e.hash;return t},L),k=async function(t){var e=t.abortSignal,n=t.downloadMediaMetric,r=t.mediaEntry,a=r.directPath,i=r.fileEncSha256,l=r.fileSha256,s=r.mediaKey,u=r.serverMediaType,c=await T({abortSignal:e,downloadFlow:n,mediaTypeDetails:{mediaType:u,type:"regular"},directPath:a,fileEncSha256:i,fileSha256:l,mediaKey:s});return c.success?o("WAResultOrError").makeResult({mimeType:o("WAMediaUtils").getMimeTypeFromServerMediaType(u),plaintext:c.value,serverMediaType:u}):c},I=o("WAPromiseManagement").cacheWhilePending(function(e){var t=e.hash;return t},function(t){var n=t.hash,r=babelHelpers.objectWithoutPropertiesLoose(t,e),a=o("WAPrepareMediaDownload").prepareMediaDownload({hash:n,mediaDownloadFlow:r.downloadMediaMetric,mediaEntry:r.mediaEntry,logger:S}),i=a.logDownloadResult;return i(k(r))});async function T(e){var t=e.abortSignal,n=e.downloadFlow,r=e.mediaTypeDetails,a=e.directPath,i=e.fileEncSha256,l=e.fileSha256,s=e.mediaKey,u=o("WAHashUtils").toPlaintextHash(l),c=await o("WADownloadAndDecryptMedia").downloadAndDecryptMedia({abortSignal:t,directPath:a,eventFlow:n,fileEncSha256:i,mediaKey:s,mediaTypeDetails:r,plaintextHash:u});if(c.success===!1){var d=c.error;switch(d){case"signature-expired":case"media-not-found":return o("WAResultOrError").makeError(d);case"enc-hash-mismatch":return S.ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["downloadMedia: enc-hash-mismatch"]))),o("WAResultOrError").makeError(d);default:return o("WAResultOrError").makeError(d)}}else{var m=c.value;return o("WAResultOrError").makeResult(m)}}function D(e){var t=e.hash,n=e.mediaEntry,r=e.progressiveJpegDetails,a=e.protocolMsgId,i=e.serverMediaType,l=e.handleMediaPreviewBeforeDownload,s=e.handleMediaPreviewDownloadFailed,u=e.downloadEntry,c=e.triggerUIView;return r==null?o("WADownloadDownloadablePreview").maybeDownloadDownloadablePreview(a,t,i,n,u,{handleMediaPreviewBeforeDownload:l,handleMediaPreviewDownloadFailed:s},c):o("WADownloadProgressiveJpegPreview").maybeDownloadProgressiveJpegPreview({protocolMsgId:a,hash:t,serverMediaType:i,mediaEntry:n,progressiveJpegDetails:r,handleMediaPreviewBeforeDownload:l,handleMediaPreviewDownloadFailed:s,downloadEntry:u,triggerUIView:c}).then(function(e){return e.success!==!0?o("WADownloadDownloadablePreview").maybeDownloadDownloadablePreview(a,t,i,n,u,{handleMediaPreviewBeforeDownload:l,handleMediaPreviewDownloadFailed:s},c):e})}async function x(e){var t=e.directPath,n=e.downloadFlow,r=e.fileEncSha256,a=e.fileSha256,i=e.handleMediaPreviewBlob,l=e.hash,s=e.mediaKey,u=e.progressiveJpegDetails,c=e.serverMediaType,d=e.handleMediaPreviewBeforeDownload,m=e.handleMediaPreviewDownloadFailed,p=S.TAGS(["MediaStreaming"]);p.LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Using Media Streaming to download ProgressiveJpeg. PlaintextHash: ",""])),o("WAHashUtils").sanitisePlaintextHash(l)),n.addPoint("media_streaming_start");var R=o("WADownloadProgressiveJpegPreview").getPreviewTargetScan(u.scanLengths)-1;p.LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Targeting scanIndex "," for preview. PlaintextHash: ",""])),R,o("WAHashUtils").sanitisePlaintextHash(l)),n.addAnnotations({int:{scans:u.scanLengths.length}}),d(l);var L=await o("WADownloadProgressiveJpegPlaintextStreamer").downloadProgressiveJpegPlaintextUsingStreams({directPath:t,eventFlow:n,fileEncSha256:r,mediaKey:s,progressiveJpegDetails:u,serverMediaType:c});if(L.success===!1)return n.addPoint("media_streaming_fail",{string:{wa_media_download_streaming_fail_reason:L.error}}),m(l,L.error),L;n.addPoint("download_pjpeg_preview_start");var E=[],k=0;try{var I=!1,T=!1,D;try{for(var x=babelHelpers.asyncIterator(o("WAStreamAsyncIterator").streamAsyncIterator(L.value)),$;I=!($=await x.next()).done;I=!1){var P=$.value;{if(P==null)continue;if(p.LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Processing scan "," for plaintextHash ",""])),k,o("WAHashUtils").sanitisePlaintextHash(l)),E.push(P),k===R){n.addPoint("media_streaming_preview_processed"),p.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Handling preview from scan "," for plaintextHash ",""])),k,o("WAHashUtils").sanitisePlaintextHash(l));var N=o("WAByteArray").uint8ArrayToBuffer(o("WATypedArraysConcat").concatTypedArrays(Uint8Array,[].concat(E,[o("WAProgressiveJpegAddJPEGTrailingTag").JPEG_TRAILING_TAG])));i(N),n.addPoint("download_pjpeg_preview_end")}k++}}}catch(e){T=!0,D=e}finally{try{I&&x.return!=null&&await x.return()}finally{if(T)throw D}}k<R&&(p.ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["pjpeg stream ended before reaching previewTargetScanIndex for plaintextHash ",""])),o("WAHashUtils").sanitisePlaintextHash(l)),n.addPoint("download_pjpeg_preview_fail"));var M=o("WAByteArray").uint8ArrayToBuffer(o("WATypedArraysConcat").concatTypedArrays(Uint8Array,[].concat(E))),w=await o("WACryptoSha256").sha256(M);return o("WACryptoUtils").arrayBuffersEqual(a,w)?(p.LOG(b||(b=babelHelpers.taggedTemplateLiteralLoose(["Media streaming for ProgressiveJpeg download successful. PlaintextHash: ",""])),o("WAHashUtils").sanitisePlaintextHash(l)),n.addPoint("media_streaming_end"),o("WAResultOrError").makeResult(M)):(p.WARN(C||(C=babelHelpers.taggedTemplateLiteralLoose(["Media streaming for ProgressiveJpeg download failed due to plaintext hash mismatch. PlaintextHash: ",""])),o("WAHashUtils").sanitisePlaintextHash(l)),n.addPoint("media_streaming_fail",{string:{wa_media_download_streaming_fail_reason:"hash-mismatch"}}),o("WAResultOrError").makeError("hash-mismatch"))}catch(e){return p.ERROR(v||(v=babelHelpers.taggedTemplateLiteralLoose(["Exception occurred during Media Streaming: Reason: ",""])),e),k<R&&(n.addPoint("download_pjpeg_preview_fail"),m(l,o("WAErrorMessage").maybeGetMessageFromError(e))),n==null||n.addPoint("media_streaming_fail",{string:{wa_media_download_streaming_fail_reason:o("WAErrorMessage").maybeGetMessageFromError(e)}}),o("WAResultOrError").makeError("stream-error")}}l.mediaDownloadLogger=S,l.downloadMedia=R,l.downloadFullMediaOnly=k,l.cachedDownloadFullMediaOnly=I,l.downloadMediaImpl=T}),98);
__d("WADownloadProgressiveJpegPlaintext",["WADownloadCiphertext","WAMediaCrypto","WAProgressiveJpegAddJPEGTrailingTag","WAProgressiveJpegGetPJpegDetails","WAResultOrError","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("WATagsLogger").TAGS(["DownloadProgressiveJpeg"]);async function d(e){var t=e.abortSignal,n=e.mediaTypeDetails,r=e.fileEncSha256,a=e.directPath,i=e.mediaKey,l=e.eventFlow,s=e.progressiveJpegDetails,u=e.targetScan,c=e.plaintextHash,d=e.size,_=o("WAProgressiveJpegGetPJpegDetails").getExtendedProgressiveJpegDetails({progressiveJpegDetails:s,ciphertextLength:p(d)}),f=o("WAProgressiveJpegGetPJpegDetails").getTotalByteSizeForScan(_.alignedScanLengths,u),g=await o("WADownloadCiphertext").cachedDownloadCiphertext({abortSignal:t,mediaTypeDetails:n,fileEncSha256:r,directPath:a,fromBytes:0,toBytes:f-1,eventFlow:l,plaintextHash:c});return g.success!==!0?g:m(i,n,u,_,g.value)}async function m(t,n,r,a,i){c.LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Using progressiveJpeg decryptAndVerify"])));var l=new Uint8Array(i),d;n.type==="preview"?d=o("WAMediaCrypto").computeMediaKeysForPreview(t):d=o("WAMediaCrypto").computeMediaKeys(t,n.mediaType);var m=await d.then(function(e){var t=e.iv,n=e.cipherKey,i=e.hmacKey;return o("WAMediaCrypto").decryptPartialChunks(n,t,l,i,r,a)}).then(o("WAResultOrError").makeResult).catch(function(e){return c.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Download Plaintext Error ",""])),e),e instanceof o("WAMediaCrypto").HmacValidationError?o("WAResultOrError").makeError("enc-hash-mismatch"):o("WAResultOrError").makeError("decryption-error")});if(!m.success)return m;c.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["ProgressiveJpeg download and decrypt successful. Partial: ",""])),r<a.scanLengths.length);var p=o("WAProgressiveJpegAddJPEGTrailingTag").addJPEGTrailingTag(m.value.plaintext);return o("WAResultOrError").makeResult(p)}function p(e){if(e==null)return null;var t=o("WAMediaCrypto").CBC_BLOCK_SIZE-e%o("WAMediaCrypto").CBC_BLOCK_SIZE;return e+t+o("WAMediaCrypto").HMAC_LENGTH}l.downloadProgressiveJpegPlaintext=d}),98);
__d("WALoggerTag",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["CryptoManager","MediaPreview","PrekeyGenerateAndUpload","SignedPrekey","SignedPrekeyRotation","OneTimePrekey"]),l=e;i.default=l}),66);
__d("WAProgressiveJpegGetTargetScanLengthForBytes",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){for(var n=0,r=0,o=0;o<e.length&&(r=o+1,n+=e[o],!(n>=t));o++);return r}i.getTargetScanBasedOnByteSize=e}),66);
__d("WADownloadProgressiveJpegPreview",["WADownloadMedia","WADownloadProgressiveJpegPlaintext","WAGlobals","WALoggerTag","WAProgressiveJpegGetTargetScanLengthForBytes","WAResultOrError","WAStartMediaDownloadQplFlow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("WADownloadMedia").mediaDownloadLogger.TAGS([r("WALoggerTag").MediaPreview]),c=3;async function d(t){var n=t.protocolMsgId,r=t.hash,a=t.serverMediaType,i=t.mediaEntry,l=t.progressiveJpegDetails,c=t.handleMediaPreviewBeforeDownload,d=t.handleMediaPreviewDownloadFailed,p=t.downloadEntry,_=t.triggerUIView,f=i.directPath,g=i.fileEncSha256,h=i.mediaKey,y=i.size;if(f==null||g==null||h==null)return o("WAResultOrError").makeError("pjpeg-failed");var C=o("WAStartMediaDownloadQplFlow").startMediaDownloadQplFlow({protocolMsgId:n,downloadEntry:p,isPreview:!0,msgType:null,triggerUIView:_});C.addAnnotations({bool:{isProgressiveJpeg:!0},string:{mediaType:"preview",fullSizeMediaType:i.serverMediaType},int:{mediaEntrySize:i.size}}),u.LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Starting progressiveJpeg preview download"]))),C.addPoint("wa_protocol_media_download_start");var b=o("WAGlobals").getConfig().pjpegPreviewAvoidLastScan()===!0?l.scanLengths.length-1:l.scanLengths.length,v=Math.min(m(l.scanLengths,y),b);await c(r);var S=await o("WADownloadProgressiveJpegPlaintext").downloadProgressiveJpegPlaintext({directPath:f,eventFlow:C,fileEncSha256:g,mediaKey:h,mediaTypeDetails:{mediaType:a,type:"regular"},progressiveJpegDetails:l,plaintextHash:r,targetScan:v,size:y});if(!S.success)return d(r,S.error),C.endFail("wa_protocol_media_download_fail",{string:{wa_protocol_media_download_fail_reason:S.error}}),o("WAResultOrError").makeError("pjpeg-failed");var R=S.value;return u.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Finished progressiveJpeg preview download"]))),C.addPoint("wa_protocol_media_download_end"),C.endSuccess(),o("WAResultOrError").makeResult(R)}function m(e,t){var n=o("WAGlobals").getConfig().jpegThumbnailTargetByteSizeKB()*1024,r=o("WAProgressiveJpegGetTargetScanLengthForBytes").getTargetScanBasedOnByteSize(e,n);return(t==null||t===0)&&(r=Math.min(r,e.length-1)),r=Math.max(r,c),r}function p(e){var t=e.abortSignal,n=e.hash,r=e.serverMediaType,a=e.mediaEntry,i=e.progressiveJpegDetails,l=e.mediaDownloadFlow,s=a.directPath,u=a.fileEncSha256,c=a.mediaKey,d=a.size,p=o("WAGlobals").getConfig().pjpegPreviewAvoidLastScan()===!0?i.scanLengths.length-1:i.scanLengths.length,_=Math.min(m(i.scanLengths,d),p);return o("WADownloadProgressiveJpegPlaintext").downloadProgressiveJpegPlaintext({abortSignal:t,directPath:s,fileEncSha256:u,mediaKey:c,mediaTypeDetails:{mediaType:r,type:"regular"},progressiveJpegDetails:i,plaintextHash:n,targetScan:_,size:d,eventFlow:l})}l.maybeDownloadProgressiveJpegPreview=d,l.getPreviewTargetScan=m,l.maybeDownloadProgressiveJpegPreviewV2=p}),98);
__d("WAGetKaleidoscopeWasm",["WAWasmModuleCache","bx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("bx").getURL(r("bx")("33861")),s=function(){return o("WAWasmModuleCache").loadWasmModule(e)};l.getKaleidoscopeWasm=s}),98);
__d("WAMediaUtilsWasmUrl",["bx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("bx").getURL(r("bx")("237"));l.WAMediaUtilsWasmUrl=e}),98);
__d("WAPreloadWamediaUtilsWasm",["WAMediaUtilsWasmUrl","WAWasmModuleCache"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){o("WAWasmModuleCache").loadWasmModule(o("WAMediaUtilsWasmUrl").WAMediaUtilsWasmUrl)};l.preloadWamediaUtilsWasm=e}),98);
__d("WAPreloadWebpCheckWasm",["WAWasmModuleCache","bx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("bx").getURL(r("bx")("6946")),s=function(){o("WAWasmModuleCache").loadWasmModule(e)};l.preloadWebpCheckWasm=s}),98);
__d("WAPrewarmMediaValidate",["WAGetKaleidoscopeWasm","WALogger","WAPreloadWamediaUtilsWasm","WAPreloadWebpCheckWasm","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){if(r("gkx")("3272")){o("WAGetKaleidoscopeWasm").getKaleidoscopeWasm().catch(function(t){var n=r("getErrorSafe")(t);o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["prewarm Kaleidoscop wasm failed with error: ",""])),n.message)});return}if(t==null){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["prewarmMediaValidate: serverMediaType is null"])));return}(t==="sticker"||t==="image")&&o("WAPreloadWebpCheckWasm").preloadWebpCheckWasm(),(t==="video"||t==="audio")&&o("WAPreloadWamediaUtilsWasm").preloadWamediaUtilsWasm()}l.prewarmMediaValidate=u}),98);
__d("WAMediaManagerPrepareMediaDownload",["Promise","WAErrorMessage","WAGetAgeBucketForMediaKeyTimestamp","WAHashUtils","WAMediaQplHelper","WAPrewarmMediaValidate","WAProgressiveJpegGetPJpegDetails","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=0;function d(t){var r,a=t.hash,i=t.logger,l=t.mediaDownloadFlow,d=t.mediaEntry,m=d.directPath,p=d.downloadableThumbnail,_=d.mediaKeyTimestamp,f=d.serverMediaType,g=d.size;o("WAPrewarmMediaValidate").prewarmMediaValidate(f);var h=o("WAGetAgeBucketForMediaKeyTimestamp").getAgeBucketForMediaKeyTimestamp(_);i.LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["start download ",". entry: "," mediaKeyTimestampAgeBucket: ",", size: ",", serverMediaType: ",""])),o("WAHashUtils").sanitisePlaintextHash(a),l.downloadEntry,h,g,f);var y=(r=o("WAProgressiveJpegGetPJpegDetails").maybeGetProgressiveJpegDetailsUsingMediaEntry(d).value)!=null?r:null;return l.addPoint("wa_protocol_media_download_start",{bool:{duplicateDirectPath:(p==null?void 0:p.directPath)===m,hasDownloadableThumbnail:(p==null?void 0:p.directPath)!=null,isProgressiveJpeg:y!=null},string:{mediaKeyTimestampAgeBucket:h,mediaType:f}}),{logDownloadResult:function(t){return c++,l.addAnnotations({int:{concurrentDownloadCount:c}}),t.then(function(e){if(e.success){var t=e.value.validatedResult.validatedPlaintext.byteLength;l.addPoint("wa_protocol_media_download_end",{string:{media_size:o("WAMediaQplHelper").convertIntegerSizeToStringBucket(t)}})}else l.addPoint("wa_protocol_media_download_fail",{string:{wa_protocol_media_download_fail_reason:e.error}});return e}).catch(function(e){l.addPoint("wa_protocol_media_download_fail",{string:{wa_protocol_media_download_fail_reason:"runtime-error"}});var t=o("WAErrorMessage").maybeGetMessageFromError(e);return i.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media due to runtime-error: ",""])),t),(u||(u=n("Promise"))).resolve(o("WAResultOrError").makeError("runtime-error"))}).finally(function(){c--})}}}l.mediaManagerPrepareMediaDownload=d}),98);
__d("WAIsMp4",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.length<8?!1:e[4]===102&&e[5]===116&&e[6]===121&&e[7]===112}i.isMp4=e}),66);
__d("WAIsWebP",[],(function(t,n,r,o,a,i){"use strict";function e(e){return!(e.length<12||e[0]!==82||e[1]!==73||e[2]!==70||e[3]!==70||e[8]!==87||e[9]!==69||e[10]!==66||e[11]!==80)}i.isWebP=e}),66);
__d("WAKaleidoscopeLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){return r("FBLogger")("wmi").tags(["Kaleidoscope"])};l.ksLogger=e}),98);
__d("WAKaleidoscopeCheck",["WAGetKaleidoscopeWasm","WAKaleidoscopeLogger","WAResultOrError","WASI","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_="input",f="output",g="/"+_,h="/"+f;function y(e){var t,n=e.input,r=e.stdout,o=e.stderr,a=e.rawMimeType,i=e.mediaType;return{args:["kaleidoscope","check","--json-report="+f,"--mimetype-hint="+a,_],fs:(t={},t[g]={path:g,timestamps:{access:new Date,change:new Date,modification:new Date},mode:"binary",content:new Uint8Array(n)},t[h]={path:h,timestamps:{access:new Date,change:new Date,modification:new Date},mode:"string",content:""},t),stdout:r,stderr:o,moduleName:"WAKaleidoscopeCheck_CLI"}}function C(t){var n=t.getWasmModule;return async function(a){var t,i,l,_,f=a.input,g=a.rawMimeType,C=a.mediaType,b=o("WASI").createWasi(y({input:f,rawMimeType:g,mediaType:C,stderr:function(n){o("WAKaleidoscopeLogger").ksLogger().MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",""])),n)},stdout:function(t){o("WAKaleidoscopeLogger").ksLogger().DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["",""])),t)}})),v=b.getImportObject,S=b.start,R=await n(),L=await WebAssembly.instantiate(R,v()),E=S(L),k=E.exitCode,I=E.fs;if(k!==0)return o("WAKaleidoscopeLogger").ksLogger().MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["kaleidoscopeCheck failed with exit code ",""])),k),o("WAResultOrError").makeError("wasm-runtime-error");var T=(t=I[h])==null?void 0:t.content;if(typeof T!="string")return o("WAKaleidoscopeLogger").ksLogger().MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["kaleidoscopeCheck failed invalid result type"]))),o("WAResultOrError").makeError("wasm-result-not-json");var D={};try{D=JSON.parse(T)}catch(e){return o("WAKaleidoscopeLogger").ksLogger().catching(r("getErrorSafe")(e)).MUSTFIX(d||(d=babelHelpers.taggedTemplateLiteralLoose(["kaleidoscopeCheck failed to parse JSON"]))),o("WAResultOrError").makeError("wasm-invalid-json")}return typeof((i=D)==null?void 0:i.score)!="number"?(o("WAKaleidoscopeLogger").ksLogger().MUSTFIX(m||(m=babelHelpers.taggedTemplateLiteralLoose(["kaleidoscopeCheck score is null"]))),o("WAResultOrError").makeError("wasm-invalid-json")):(o("WAKaleidoscopeLogger").ksLogger().DEBUG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["kaleidoscopeCheck called with rawMimeType: ",", mediaType: ",""])),g,C),o("WAResultOrError").makeResult({mimetype:((l=D)==null?void 0:l.mimetype)||"application/octet-stream",extension:((_=D)==null?void 0:_.extension)||null,score:D.score}))}}var b=C({getWasmModule:o("WAGetKaleidoscopeWasm").getKaleidoscopeWasm});l.kaleidoscopeCheck=b}),98);
__d("WAMp4Check",["WAMediaUtilsWasmUrl","WAResultOrError","WASI","WAWasmModuleCache"],(function(t,n,r,o,a,i,l){"use strict";var e="input",s="output",u="/"+e,c="/"+s;function d(t){var n,r=t.input,o=t.stdout,a=t.stderr;return{args:["wamediautil","mp4check","--error-tolerance=2","--json-report="+s,e],fs:(n={},n[u]={path:u,timestamps:{access:new Date,change:new Date,modification:new Date},mode:"binary",content:new Uint8Array(r)},n[c]={path:c,timestamps:{access:new Date,change:new Date,modification:new Date},mode:"string",content:""},n),stdout:o,stderr:a,moduleName:"WAMp4Check_CLI"}}function m(e){var t=e.getWasmModule,n=e.logError,r=e.logMessage;return async function(a){var e,i,l,s,u,m,p,_,f,g,h,y,C,b=a.input,v=o("WASI").createWasi(d({input:b,stderr:n,stdout:r})),S=v.getImportObject,R=v.start,L=await t(),E=await WebAssembly.instantiate(L,S()),k=R(E),I=k.exitCode,T=k.fs;if(I!==0)return n("mp4Check failed with exit code "+I),o("WAResultOrError").makeError("invalid-media");var D=(e=T[c])==null?void 0:e.content;if(typeof D!="string")return n("mp4check failed invalid result type"),o("WAResultOrError").makeError("runtime-error");var x=(i=JSON.parse(D))!=null?i:{};return o("WAResultOrError").makeResult({videoStreamReport:(x==null?void 0:x.video_stream_report)==null?null:{streamType:(l=x.video_stream_report)==null?void 0:l.stream_type,calculatedFps:(s=x.video_stream_report)==null?void 0:s.calculated_fps,nominalFps:(u=x.video_stream_report)==null?void 0:u.nominal_fps,videoWidth:(m=x.video_stream_report)==null?void 0:m.video_width,videoHeight:(p=x.video_stream_report)==null?void 0:p.video_height,duration:(_=x.video_stream_report)==null?void 0:_.duration,avgBitsPerSecond:(f=x.video_stream_report)==null?void 0:f.avg_bits_per_second},audioStreamReport:(x==null?void 0:x.audio_stream_report)==null?null:{streamType:(g=x.audio_stream_report)==null?void 0:g.stream_type,samplingRate:(h=x.audio_stream_report)==null?void 0:h.sampling_rate,numberOfChannels:(y=x.audio_stream_report)==null?void 0:y.number_of_channels,avgBitsPerSecond:(C=x.audio_stream_report)==null?void 0:C.avg_bits_per_second}})}}var p=function(){return o("WAWasmModuleCache").loadWasmModule(o("WAMediaUtilsWasmUrl").WAMediaUtilsWasmUrl)};l.createMp4Check=m,l.getMp4CheckWasm=p}),98);
__d("WAParseWav",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=new DataView(e);return e.byteLength<44||t.getUint32(0)!==1380533830||t.getUint32(8)!==1463899717?null:e}function l(e){var t=new DataView(e),n=t.getUint16(22,!0),r=t.getUint32(24,!0);return{numChannels:n,sampleRate:r}}i.validateWav=e,i.parseWav=l}),66);
__d("WAWebPCheck",["WAResultOrError","WASI","WAWasmModuleCache","bx"],(function(t,n,r,o,a,i,l){"use strict";var e="input",s="/"+e;function u(t){var n,r=t.input,o=t.stdout,a=t.stderr;return{args:["webpcheck",e],fs:(n={},n[s]={path:s,timestamps:{access:new Date,change:new Date,modification:new Date},mode:"binary",content:new Uint8Array(r)},n),stdout:o,stderr:a,moduleName:"WAWebPCheck_CLI"}}function c(e){var t=e.getWasmModule,n=e.logError,r=e.logMessage;return async function(a){var e=a.input,i=o("WASI").createWasi(u({input:e,stderr:n,stdout:r})),l=i.getImportObject,s=i.start,c=await t(),d=await WebAssembly.instantiate(c,l()),m=s(d),p=m.exitCode;return p!==0?(n("WebPCheck failed with exit code "+p),o("WAResultOrError").makeError("invalid-media")):o("WAResultOrError").makeResult()}}var d=r("bx").getURL(r("bx")("6946")),m=function(){return o("WAWasmModuleCache").loadWasmModule(d)};l.createWebPCheck=c,l.getWebpCheckWasm=m}),98);
__d("WAValidateMedia",["FBLogger","WAIsMp4","WAIsOgg","WAIsWebP","WAKaleidoscopeCheck","WAMp4Check","WAParseWav","WAResultOrError","WAWebPCheck","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=function(){return r("FBLogger")("wmi").tags(["WAValidateMedia"])};function m(t,n){return n.addPoint("media_validation_start"),(r("gkx")("3272")?p(t):_(t)).then(function(e){return e.success?n.addPoint("media_validation_end",{bool:{is_validation_setup_failed:e.value.validationSetupFailed,is_validation_skipped:e.value.skipValidation},string:{validated_mime_type:e.value.mimeType}}):n.addPoint("media_validation_fail",{string:{validationError:e.error}}),e}).catch(function(a){var i=r("getErrorSafe")(a);return d().catching(i).MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["validateMedia threw an exception: ",""])),i.message),n.addPoint("media_validation_fail",{string:{validationError:i.message}}),o("WAResultOrError").makeResult({skipValidation:!0,mimeType:null,validatedPlaintext:t,validationSetupFailed:!0})})}async function p(e){var t=await o("WAKaleidoscopeCheck").kaleidoscopeCheck({input:e,rawMimeType:"application/octet-stream",mediaType:"unknown"});if(!t.success)return d().MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["kaleidoscopeCheck failed with error: ",""])),t.error),o("WAResultOrError").makeError("runtime-error");var n=t.value,r=n.score,a=n.mimetype;return r>=80?o("WAResultOrError").makeError("invalid-media"):o("WAResultOrError").makeResult({skipValidation:!1,mimeType:a,validatedPlaintext:e,validationSetupFailed:!1,isKaleidoscopeCheck:!0})}function _(e){var t=new Uint8Array(e);if(o("WAIsWebP").isWebP(t))return h(e);if(o("WAIsMp4").isMp4(t))return y(e);if(o("WAIsOgg").isOgg(t))return Promise.resolve(o("WAResultOrError").makeResult({skipValidation:!1,mimeType:"audio/ogg",validatedPlaintext:e,validationSetupFailed:!1,audioStreamReport:null}));var n=o("WAParseWav").validateWav(e);return n!=null?Promise.resolve(C(n)):Promise.resolve(o("WAResultOrError").makeResult({mimeType:null,skipValidation:!0,validatedPlaintext:e,validationSetupFailed:!1}))}var f=function(t){t!==""&&d().WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["",""])),t)},g=function(t){t!==""&&d().DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["",""])),t)};async function h(e){var t=o("WAWebPCheck").createWebPCheck({getWasmModule:o("WAWebPCheck").getWebpCheckWasm,logError:f,logMessage:g}),n=await t({input:e});return n.success?o("WAResultOrError").makeResult({skipValidation:!1,mimeType:"image/webp",validatedPlaintext:e,validationSetupFailed:!1}):n}async function y(e){var t=o("WAMp4Check").createMp4Check({getWasmModule:o("WAMp4Check").getMp4CheckWasm,logError:f,logMessage:g}),n=await t({input:e});if(!n.success)return o("WAResultOrError").makeError(n.error);var r=n.value,a=r.videoStreamReport,i=r.audioStreamReport;return a==null?i==null?o("WAResultOrError").makeError("invalid-media"):o("WAResultOrError").makeResult({skipValidation:!1,mimeType:"audio/mp4",validatedPlaintext:e,validationSetupFailed:!1,audioStreamReport:i}):o("WAResultOrError").makeResult({skipValidation:!1,mimeType:"video/mp4",validatedPlaintext:e,validationSetupFailed:!1,videoStreamReport:a,audioStreamReport:i})}function C(e){var t=o("WAParseWav").parseWav(e),n=t.numChannels,r=t.sampleRate;return o("WAResultOrError").makeResult({skipValidation:!1,mimeType:"audio/wav",validatedPlaintext:e,validationSetupFailed:!1,audioStreamReport:{streamType:"LPCM",samplingRate:r,numberOfChannels:n}})}l.validateMedia=m}),98);
__d("WADownloadFullSizeOnlyTask",["EncryptedBackupsResignCdnUrl","MAWCastToMsgrServerMediaType","MAWEBSwitch","WADownloadMedia","WAFindMostRecentMediaEntry","WAIsMediaExpiredError","WAMediaManagerPrepareMediaDownload","WAMediaUtils","WAResultOrError","WAValidateMedia","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;async function c(e){var t=e.abortSignal,n=e.dbCallbacks,r=e.fullSizePlaintextHash,a=e.logger,i=e.mediaDownloadFlow;i.addPoint("get_media_entries_start");var l=await n.getMediaEntries(r);if(!l.success)return i.addPoint("get_media_entries_fail"),{fullsizePromise:Promise.resolve(o("WAResultOrError").makeError("missing-media-entry"))};var s=l.value;i.addPoint("get_media_entries_end");var u=o("WAFindMostRecentMediaEntry").findMostRecentMediaEntry(s);if(!u.success)return{fullsizePromise:Promise.resolve(o("WAResultOrError").makeError("missing-media-entry"))};var c=u.value,m=c[0],p=c[1],_=o("WAMediaUtils").validateDecodedMediaEntryForDownload(p);if(!_.success)return{fullsizePromise:Promise.resolve(_)};var f=_.value,g=o("WAMediaManagerPrepareMediaDownload").mediaManagerPrepareMediaDownload({hash:r,logger:a,mediaDownloadFlow:i,mediaEntry:f}),h=g.logDownloadResult,y=d({abortSignal:t,dbCallbacks:n,logger:a,mediaDownloadFlow:i,mediaEntries:s,msgIdOfRecentMediaEntry:m,recentMediaEntry:f}).then(async function(e){if(!e.success)return e;var t=await o("WAValidateMedia").validateMedia(e.value.plaintext,i);return t.success?o("WAResultOrError").makeResult({msgIdAndMediaEntry:[m,f],serverMediaType:e.value.serverMediaType,unvalidatedMimeType:e.value.mimeType,validatedResult:t.value}):t});return{fullsizePromise:h(y)}}async function d(t){var n=t.abortSignal,a=t.dbCallbacks,i=t.logger,l=t.mediaDownloadFlow,c=t.mediaEntries,d=t.msgIdOfRecentMediaEntry,m=t.recentMediaEntry,p=r("MAWEBSwitch").isEnabled()&&r("gkx")("23960");p&&l.addPoint("forcing_eb_download");var _=p?o("WAResultOrError").makeError("signature-expired"):await o("WADownloadMedia").downloadFullMediaOnly({abortSignal:n,downloadMediaMetric:l,mediaEntry:m});if(_.success||!o("WAIsMediaExpiredError").isMediaExpiredError(_.error)||!r("MAWEBSwitch").isEnabled())return _;var f=await a.getProtocolMsgIdAndSortOrderMs(d);if(f==null)return o("WAResultOrError").makeError("missing-sort-order-ms-for-restore");var g=f.protocolMsgId,h=f.sortOrderMs,y=m,C=d,b=o("MAWCastToMsgrServerMediaType").castToMsgrServerMediaType(y.serverMediaType);if(b==null||y.objectId==null)return i.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media and can not restore: ",""])),_.error),_;var v=await o("EncryptedBackupsResignCdnUrl").resignCdnUrl({deliveryObjectId:y.objectId,logger:i,mediaDownloadFlow:l,mediaKey:y.mediaKey,mediaType:b,msgId:C,protocolMsgId:g,sortOrderMs:h});if(!v.success)return i.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media and restore failed: ",""])),v.error),v;var S=await o("WADownloadMedia").downloadFullMediaOnly({abortSignal:n,downloadMediaMetric:babelHelpers.extends({},l,{addPoint:function(t,n){l.addPoint("second_"+t,n)}}),mediaEntry:babelHelpers.extends({},y,{directPath:v.value})});return S.success?o("WAResultOrError").makeResult(S.value):(i.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media after restore CDN URL: ",""])),S.error),S)}l.startDownloadFullSizeTask=c,l.downloadOrRestoreFullSize=d}),98);
__d("WADownloadMediaPreviewV2",["WADownloadMedia","WADownloadProgressiveJpegPreview","WAMediaCrypto","WAMediaUtils","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t){var n=t.abortSignal,r=t.hash,a=t.mediaEntry,i=t.progressiveJpegDetails,l=t.mediaDownloadFlow,s=t.logger,u=a.serverMediaType,c=o("WAMediaUtils").getMimeTypeFromServerMediaType(u),d=i==null?o("WAResultOrError").makeError("jpeg-stream-not-supported"):await o("WADownloadProgressiveJpegPreview").maybeDownloadProgressiveJpegPreviewV2({abortSignal:n,hash:r,serverMediaType:u,mediaEntry:a,progressiveJpegDetails:i,mediaDownloadFlow:l});if(d.success===!0)return o("WAResultOrError").makeResult({plaintext:d.value,mimeType:c,serverMediaType:u});l.addPoint("fallback_to_downloadable_thumbnail");var m=a.downloadableThumbnail;if((m==null?void 0:m.directPath)==null)return o("WAResultOrError").makeError("media-not-found");var p=o("WAMediaUtils").validateDownloadableThumbnailForDownload(m);if(p.success===!1)return s.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["preview mediaEntry is incomplete: ",""])),p.error),o("WAResultOrError").makeError(p.error[0]);var _=p.value,f=_.directPath,g=_.fileEncSha256,h=_.fileSha256,y=_.mediaKey,C=o("WAMediaCrypto").convertServerMediaTypeToPreviewMediaType(u);if(C==null)return o("WAResultOrError").makeError("request-error");var b=await o("WADownloadMedia").downloadMediaImpl({abortSignal:n,downloadFlow:l,mediaTypeDetails:{messageType:C,type:"preview"},directPath:f,fileEncSha256:g,fileSha256:h,mediaKey:y});return b.success===!1?b:o("WAResultOrError").makeResult({plaintext:b.value,mimeType:c,serverMediaType:u})}l.downloadMediaPreview=s}),98);
__d("WAIsPreviewSupported",["$InternalEnum","WAProgressiveJpegGetPJpegDetails"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum").Mirrored(["NO","YES"]),s=n("$InternalEnum").Mirrored(["NO","YES","DuplicatedWithFullSize"]);function u(t){var n=t.serverMediaType;switch(n){case"image":{var r,a,i=(r=o("WAProgressiveJpegGetPJpegDetails").maybeGetProgressiveJpegDetailsUsingMediaEntry(t).value)!=null?r:null,l=i!=null?e.YES:e.NO;if(((a=t.downloadableThumbnail)==null?void 0:a.directPath)==null)return[l,s.NO];t.downloadableThumbnail.directPath;var u=t.downloadableThumbnail.directPath===t.directPath?s.DuplicatedWithFullSize:s.YES;return[l,u]}case"video":{var c;if(((c=t.downloadableThumbnail)==null?void 0:c.directPath)==null)return[e.NO,s.NO];t.downloadableThumbnail.directPath;var d=t.downloadableThumbnail.directPath===t.directPath?s.NO:s.YES;return[e.NO,d]}case"sticker":case"ptt":case"audio":case"document":case"gif":case"ppic":case"md-app-state":case"md-msg-hist":case"kyc-id":case"template":case"thumbnail-image":case"thumbnail-video":case"thumbnail-gif":case"thumbnail-document":case"thumbnail-link":case"novi-video":case"novi-image":case"payment-bg-image":case"xma-image":case"biz-cover-photo":case"preview":case"newsletter-audio":case"newsletter-document":case"newsletter-image":case"newsletter-gif":case"newsletter-music-artwork":case"newsletter-ptt":case"newsletter-sticker":case"newsletter-sticker-pack":case"newsletter-thumbnail-link":case"newsletter-video":case"newsletter-ptv":case"sticker-pack":case"thumbnail-sticker-pack":case"music-artwork":case"group-history":case"ads-image":case"ads-video":case"ptv":return[e.NO,s.NO];default:return[e.NO,s.NO]}}l.PjpegPreviewSupport=e,l.DownloadablePreviewSupport=s,l.checkPreviewSupport=u}),98);
__d("WADownloadPreviewOnlyTask",["EncryptedBackupsResignCdnUrl","MAWEBSwitch","WADownloadMediaPreviewV2","WAFindMostRecentMediaEntry","WAIsMediaExpiredError","WAIsPreviewSupported","WAMediaManagerPrepareMediaDownload","WAMediaUtils","WAProgressiveJpegGetPJpegDetails","WAResultOrError","WAValidateMedia","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(e){var t=e.abortSignal,n=e.dbCallbacks,r=e.fullSizePlaintextHash,a=e.logger,i=e.mediaDownloadFlow;i.addPoint("get_media_entries_start");var l=await n.getMediaEntries(r);if(!l.success)return i.addPoint("get_media_entries_fail"),{previewPromise:Promise.resolve(o("WAResultOrError").makeError("missing-media-entry"))};i.addPoint("get_media_entries_end");var s=l.value,u=o("WAFindMostRecentMediaEntry").findMostRecentMediaEntry(s);if(!u.success)return{previewPromise:Promise.resolve(o("WAResultOrError").makeError("missing-media-entry"))};var d=u.value,m=d[0],p=d[1],_=o("WAMediaUtils").validateDecodedMediaEntryForDownload(p);if(!_.success)return{previewPromise:Promise.resolve(_)};var f=_.value,g=o("WAMediaManagerPrepareMediaDownload").mediaManagerPrepareMediaDownload({hash:r,logger:a,mediaDownloadFlow:i,mediaEntry:f}),h=g.logDownloadResult,y=c({abortSignal:t,dbCallbacks:n,fullSizePlaintextHash:r,logger:a,mediaDownloadFlow:i,mediaEntries:l.value,msgIdOfRecentMediaEntry:m,recentMediaEntry:f}).then(async function(e){if(!e.success)return e;var t=await o("WAValidateMedia").validateMedia(e.value.plaintext,i);return t.success?o("WAResultOrError").makeResult({msgIdAndMediaEntry:[m,f],serverMediaType:e.value.serverMediaType,unvalidatedMimeType:e.value.mimeType,validatedResult:t.value}):t});return{previewPromise:h(y)}}async function c(t){var n,a=t.abortSignal,i=t.dbCallbacks,l=t.fullSizePlaintextHash,u=t.logger,c=t.mediaDownloadFlow,d=t.mediaEntries,m=t.msgIdOfRecentMediaEntry,p=t.recentMediaEntry,_=r("MAWEBSwitch").isEnabled()&&r("gkx")("23960");_&&c.addPoint("forcing_eb_download");var f=o("WAIsPreviewSupported").checkPreviewSupport(p),g=f[0],h=f[1];if(g===o("WAIsPreviewSupported").PjpegPreviewSupport.NO&&h===o("WAIsPreviewSupported").DownloadablePreviewSupport.NO)return o("WAResultOrError").makeError("preview-not-supported");var y=o("WAProgressiveJpegGetPJpegDetails").maybeGetProgressiveJpegDetailsUsingMediaEntry(p),C=y.success===!0?y.value:null,b={abortSignal:a,hash:l,logger:u,mediaDownloadFlow:c,progressiveJpegDetails:C};c.addPoint("download_preview_start",{string:{preview_downloadable_support:h,preview_pjpeg_support:g}});var v=_?o("WAResultOrError").makeError("signature-expired"):await o("WADownloadMediaPreviewV2").downloadMediaPreview(babelHelpers.extends({},b,{mediaEntry:p}));if(v.success)return c.addPoint("download_preview_end"),o("WAResultOrError").makeResult({mimeType:v.value.mimeType,plaintext:v.value.plaintext,serverMediaType:v.value.serverMediaType});if(c.addPoint("download_preview_fail"),!o("WAIsMediaExpiredError").isMediaExpiredError(v.error)||!r("MAWEBSwitch").isEnabled()||r("gkx")("1327")!==!0)return v;var S=await i.getProtocolMsgIdAndSortOrderMs(m);if(S==null)return o("WAResultOrError").makeError("missing-sort-order-ms-for-restore");var R=S.protocolMsgId,L=S.sortOrderMs,E=p,k=m,I=h===o("WAIsPreviewSupported").DownloadablePreviewSupport.NO||((n=E.downloadableThumbnail)==null?void 0:n.objectId)==null?null:o("EncryptedBackupsResignCdnUrl").resignCdnUrl({deliveryObjectId:E.downloadableThumbnail.objectId,logger:u,mediaDownloadFlow:c,mediaKey:E.mediaKey,mediaType:"preview",msgId:k,protocolMsgId:R,sortOrderMs:L}),T=g===o("WAIsPreviewSupported").PjpegPreviewSupport.NO||E.objectId==null?null:o("EncryptedBackupsResignCdnUrl").resignCdnUrl({deliveryObjectId:E.objectId,logger:u,mediaDownloadFlow:c,mediaKey:E.mediaKey,mediaType:"image",msgId:k,protocolMsgId:R,sortOrderMs:L}),D=await Promise.all([I,T]),x=D[0],$=D[1];if((x==null?void 0:x.success)!==!0&&($==null?void 0:$.success)!==!0){var P;return u.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media and restore failed. downloadableThumbnail error: ",". pjpegPreview error: ",""])),x==null?void 0:x.error,$==null?void 0:$.error),(P=$!=null?$:x)!=null?P:o("WAResultOrError").makeError("preview-not-supported")}c.addPoint("second_download_preview_start");var N=await o("WADownloadMediaPreviewV2").downloadMediaPreview(babelHelpers.extends({},b,{mediaDownloadFlow:babelHelpers.extends({},c,{addPoint:function(t,n){c.addPoint("second_"+t,n)}}),mediaEntry:babelHelpers.extends({},E,{directPath:($==null?void 0:$.success)===!0?$.value:E.directPath,downloadableThumbnail:E.downloadableThumbnail==null?null:babelHelpers.extends({},E.downloadableThumbnail,{directPath:(x==null?void 0:x.success)===!0?x.value:E.downloadableThumbnail.directPath})})}));return N.success?(c.addPoint("second_download_preview_end"),o("WAResultOrError").makeResult({mimeType:N.value.mimeType,plaintext:N.value.plaintext,serverMediaType:N.value.serverMediaType})):(u.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media after restore CDN URL: ",""])),N.error),c.addPoint("second_download_preview_fail"),N)}l.startDownloadPreviewTask=u,l.downloadOrRestorePreviewOnly=c}),98);
__d("WADownloadProgressiveJpegUsingMediaStreaming",["WAByteArray","WACryptoSha256","WACryptoUtils","WADownloadProgressiveJpegPlaintextStreamer","WADownloadProgressiveJpegPreview","WAErrorMessage","WAMediaUtils","WAProgressiveJpegAddJPEGTrailingTag","WAResolvable","WAResultOrError","WAStreamAsyncIterator","WATypedArraysConcat"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_;async function f(t){var n=t.abortSignal,r=t.directPath,a=t.downloadFlow,i=t.fileEncSha256,l=t.fileSha256,m=t.logger,p=t.mediaKey,_=t.progressiveJpegDetails,f=t.serverMediaType,h=m.TAGS(["MediaStreaming"]);h.LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Using Media Streaming to download ProgressiveJpeg."]))),a.addPoint("create_pjpeg_stream_start");var y=await o("WADownloadProgressiveJpegPlaintextStreamer").downloadProgressiveJpegPlaintextUsingStreams({abortSignal:n,directPath:r,eventFlow:a,fileEncSha256:i,mediaKey:p,progressiveJpegDetails:_,serverMediaType:f}).catch(function(e){return h.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["create DownloadAndDecryptPJpegStream unexpected runtime-error: ",""])),o("WAErrorMessage").maybeGetMessageFromError(e)),o("WAResultOrError").makeError("runtime-error")});if(y.success===!1)return a.addPoint("create_pjpeg_stream_fail"),y;a.addPoint("create_pjpeg_stream_end");var C=new(o("WAResolvable")).Resolvable,b=!1,v=g({downloadFlow:a,fileSha256:l,mediaStreamingLogger:h,previewResolvable:C,progressiveJpegDetails:_,progressiveJpegDownloadStream:y.value,serverMediaType:f}).then(function(e){return b=!0,h.DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["handleProgressiveJpegDownloadStream completed"]))),e}).catch(function(e){return b=!0,h.ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["handleProgressiveJpegDownloadStream unexpected runtime-error: ",""])),o("WAErrorMessage").maybeGetMessageFromError(e)),C.reject(e),o("WAResultOrError").makeError("runtime-error")}),S=o("WAMediaUtils").getMimeTypeFromServerMediaType(f);function R(e){return e.success===!1?e:o("WAResultOrError").makeResult({mimeType:S,plaintext:e.value,serverMediaType:f})}var L=v.then(R),E=C.promise.then(R),k=await C.promise;if(k.success===!0&&b===!0&&h.ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["fullsizeResolvable is settled before previewResolvable"]))),k.success===!0)return o("WAResultOrError").makeResult({fullsizePromise:L,previewPromise:E});var I=await v;return k.success,I.success===!0?o("WAResultOrError").makeResult({fullsizePromise:L,previewPromise:E}):(I.success,I)}async function g(e){var t=e.downloadFlow,n=e.fileSha256,r=e.mediaStreamingLogger,a=e.previewResolvable,i=e.progressiveJpegDetails,l=e.progressiveJpegDownloadStream;t.addPoint("download_pjpeg_preview_start");var s=0,u=o("WADownloadProgressiveJpegPreview").getPreviewTargetScan(i.scanLengths)-1;try{var c=[],d=!1,f=!1,g;try{for(var h=babelHelpers.asyncIterator(o("WAStreamAsyncIterator").streamAsyncIterator(l)),y;d=!(y=await h.next()).done;d=!1){var C=y.value;{if(C==null)continue;if(c.push(C),s===u){t.addPoint("media_streaming_preview_processed");var b=o("WAByteArray").uint8ArrayToBuffer(o("WATypedArraysConcat").concatTypedArrays(Uint8Array,[].concat(c,[o("WAProgressiveJpegAddJPEGTrailingTag").JPEG_TRAILING_TAG])));a.resolve(o("WAResultOrError").makeResult(b)),t.addPoint("download_pjpeg_preview_end")}s++}}}catch(e){f=!0,g=e}finally{try{d&&h.return!=null&&await h.return()}finally{if(f)throw g}}a.isSettled===!1&&(r.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["pjpeg stream ended before reaching previewTargetScanIndex"]))),a.resolve(o("WAResultOrError").makeError("runtime-error")),t.addPoint("download_pjpeg_preview_fail"));var v=o("WAByteArray").uint8ArrayToBuffer(o("WATypedArraysConcat").concatTypedArrays(Uint8Array,[].concat(c))),S=await o("WACryptoSha256").sha256(v);return o("WACryptoUtils").arrayBuffersEqual(n,S)?o("WAResultOrError").makeResult(v):(r.WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Media streaming for ProgressiveJpeg download failed due to plaintext hash mismatch."]))),o("WAResultOrError").makeError("hash-mismatch"))}catch(e){return r.ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Exception occurred during Media Streaming: Reason: ",""])),e),a.isSettled===!1&&(a.resolve(o("WAResultOrError").makeError("runtime-error")),t.addPoint("download_pjpeg_preview_fail")),o("WAResultOrError").makeError("runtime-error")}}l.downloadProgresiveJpegUsingMediaStreaming=f}),98);
__d("WADownloadFullSizeAndPreviewTask",["EncryptedBackupsResignCdnUrl","MAWCastToMsgrServerMediaType","MAWEBSwitch","UserAgent","WADownloadFullSizeOnlyTask","WADownloadPreviewOnlyTask","WADownloadProgressiveJpegUsingMediaStreaming","WAErrorMessage","WAFindMostRecentMediaEntry","WAHashUtils","WAIsMediaExpiredError","WAIsPreviewSupported","WAMediaManagerPrepareMediaDownload","WAMediaUtils","WAProgressiveJpegGetPJpegDetails","WAResultOrError","WAStartMediaDownloadQplFlow","WAValidateMedia","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h;async function y(t){var n=t.abortSignal,r=t.dbCallbacks,a=t.fullSizePlaintextHash,i=t.logger,l=t.mediaDownloadFlow;l.addPoint("get_media_entries_start");var c=await r.getMediaEntries(a);if(!c.success)return l.addPoint("get_media_entries_fail"),{fullsizePromise:Promise.resolve(o("WAResultOrError").makeError("missing-media-entry")),previewPromise:Promise.resolve(o("WAResultOrError").makeError("missing-media-entry"))};l.addPoint("get_media_entries_end");var d=c.value,m=o("WAFindMostRecentMediaEntry").findMostRecentMediaEntry(d);if(!m.success)return{fullsizePromise:Promise.resolve(o("WAResultOrError").makeError("missing-media-entry")),previewPromise:Promise.resolve(o("WAResultOrError").makeError("missing-media-entry"))};var p=m.value,_=p[0],f=p[1],g=o("WAMediaUtils").validateDecodedMediaEntryForDownload(f);return g.success?b({abortSignal:n,dbCallbacks:r,fullSizePlaintextHash:a,logger:i,mediaDownloadFlow:l,mediaEntries:d,msgIdOfRecentMediaEntry:_,recentMediaEntry:g.value}).then(function(e){return i.DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["outter promise: ",""])),e.success===!0?"success":e.error),e.success?e.value:(i.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["outter promise failed: ",""])),e.error),{fullsizePromise:Promise.resolve(e),previewPromise:Promise.resolve(e)})}):(i.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["invalid mediaEntry for download: ",""])),g.error),{fullsizePromise:Promise.resolve(g),previewPromise:Promise.resolve(g)})}async function C(e,t,n){var r=await e;if(!r.success)return Promise.resolve(r);var a=await o("WAValidateMedia").validateMedia(r.value.plaintext,n);return a.success?o("WAResultOrError").makeResult({msgIdAndMediaEntry:t,serverMediaType:r.value.serverMediaType,unvalidatedMimeType:r.value.mimeType,validatedResult:a.value}):a}async function b(e){var t=e.abortSignal,n=e.dbCallbacks,r=e.fullSizePlaintextHash,a=e.logger,i=e.mediaDownloadFlow,l=e.mediaEntries,s=e.msgIdOfRecentMediaEntry,u=e.recentMediaEntry,d=o("WAMediaManagerPrepareMediaDownload").mediaManagerPrepareMediaDownload({hash:r,logger:a,mediaDownloadFlow:i,mediaEntry:u}),m=d.logDownloadResult,p={abortSignal:t,dbCallbacks:n,logger:a,mediaDownloadFlow:i,mediaEntries:l,msgIdOfRecentMediaEntry:s,recentMediaEntry:u},_=await v(babelHelpers.extends({},p,{fullSizePlaintextHash:r}));if(_.success){var f=_.value,g=f.fullsizePromise,h=f.previewPromise,y=g.then(function(e){return e.success?e:(i.addPoint("fallback_to_non_streaming_download",{string:{streaming_fallback_reason:e.error}}),o("WADownloadFullSizeOnlyTask").downloadOrRestoreFullSize(p))}),b=[s,u];return o("WAResultOrError").makeResult({fullsizePromise:m(C(y,b,i)),previewPromise:C(h,b,i)})}var R=L(_.error);if(!R.shouldFallback)return o("WAResultOrError").makeError(R.error);i.addPoint("fallback_to_non_streaming_download",{string:{streaming_fallback_reason:R.error}}),a.LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["fallback to non-streaming download"])));var E=C(o("WADownloadFullSizeOnlyTask").downloadOrRestoreFullSize(p),[s,u],i),k=S(babelHelpers.extends({},p,{fullSizePlaintextHash:r,fullsizePromise:E}));return o("WAResultOrError").makeResult({fullsizePromise:m(E),previewPromise:k})}async function v(e){var t,n=e.abortSignal,a=e.dbCallbacks,i=e.logger,l=e.mediaDownloadFlow,s=e.mediaEntries,u=e.msgIdOfRecentMediaEntry,c=e.recentMediaEntry,g=r("MAWEBSwitch").isEnabled()&&r("gkx")("23960");g&&l.addPoint("forcing_eb_download");var h=c.directPath,y=c.fileEncSha256,C=c.fileSha256,b=c.mediaKey,v=c.serverMediaType,S=(t=o("WAProgressiveJpegGetPJpegDetails").maybeGetProgressiveJpegDetailsUsingMediaEntry(c).value)!=null?t:null;if(S==null||c.serverMediaType!=="image"||!o("WAMediaUtils").isTransformStreamSupported()||r("UserAgent").isBrowser("Safari < 18")||r("UserAgent").isBrowser("Mobile Safari < 18"))return c.serverMediaType==="image"&&S==null&&(i.LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["skip pjpeg streaming because pjpeg metadata is null"]))),i.DEV(m||(m=babelHelpers.taggedTemplateLiteralLoose(["media entry: ",""])),c)),o("WAResultOrError").makeError("jpeg-stream-not-supported");l.addPoint("media_streaming_start");var L=g?o("WAResultOrError").makeError("signature-expired"):await o("WADownloadProgressiveJpegUsingMediaStreaming").downloadProgresiveJpegUsingMediaStreaming({abortSignal:n,directPath:h,downloadFlow:l,fileEncSha256:y,fileSha256:C,logger:i,mediaKey:b,progressiveJpegDetails:S,serverMediaType:v}).catch(function(e){return i.ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["downloadProgresiveJpegUsingMediaStreaming unexpected runtime-error: ",""])),o("WAErrorMessage").maybeGetMessageFromError(e)),o("WAResultOrError").makeError("runtime-error")});if(L.success)return l.addPoint("media_streaming_end"),L;if(!o("WAIsMediaExpiredError").isMediaExpiredError(L.error)||!r("MAWEBSwitch").isEnabled())return R(l,L),L;var E=await a.getProtocolMsgIdAndSortOrderMs(u);if(E==null)return o("WAResultOrError").makeError("missing-sort-order-ms-for-restore");var k=E.protocolMsgId,I=E.sortOrderMs,T=c,D=u,x=T.fileEncSha256,$=T.fileSha256,P=T.mediaKey,N=T.serverMediaType,M=o("MAWCastToMsgrServerMediaType").castToMsgrServerMediaType(N);if(M==null||T.objectId==null)return i.ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media and can not restore: ",""])),L.error),L;var w=await o("EncryptedBackupsResignCdnUrl").resignCdnUrl({deliveryObjectId:T.objectId,logger:i,mediaDownloadFlow:l,mediaKey:T.mediaKey,mediaType:M,msgId:D,protocolMsgId:k,sortOrderMs:I});if(!w.success)return w;l.addPoint("second_media_streaming_start");var A=await o("WADownloadProgressiveJpegUsingMediaStreaming").downloadProgresiveJpegUsingMediaStreaming({abortSignal:n,directPath:w.value,downloadFlow:babelHelpers.extends({},l,{addPoint:function(t,n){l.addPoint("second_"+t,n)}}),fileEncSha256:x,fileSha256:$,logger:i,mediaKey:P,progressiveJpegDetails:S,serverMediaType:N}).catch(function(e){return i.ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["downloadProgresiveJpegUsingMediaStreaming unexpected runtime-error: ",""])),o("WAErrorMessage").maybeGetMessageFromError(e)),o("WAResultOrError").makeError("runtime-error")});return A.success?(l.addPoint("second_media_streaming_end"),A):(R(l,A),A)}function S(e){var t=e.abortSignal,n=e.dbCallbacks,r=e.fullSizePlaintextHash,a=e.fullsizePromise,i=e.logger,l=e.mediaDownloadFlow,s=e.mediaEntries,u=e.msgIdOfRecentMediaEntry,c=e.recentMediaEntry,d=c.serverMediaType,m=o("WAIsPreviewSupported").checkPreviewSupport(c),p=m[0],_=m[1];if(p===o("WAIsPreviewSupported").PjpegPreviewSupport.NO&&_===o("WAIsPreviewSupported").DownloadablePreviewSupport.NO)return i.LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["preview not supported"]))),Promise.resolve(o("WAResultOrError").makeError("preview-not-supported"));if(_===o("WAIsPreviewSupported").DownloadablePreviewSupport.DuplicatedWithFullSize)return i.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["preview duplicated with fullsize"]))),a;var f=o("WAStartMediaDownloadQplFlow").startMediaDownloadQplFlow({downloadEntry:l.downloadEntry,isPreview:!0,msgType:null,protocolMsgId:null,triggerUIView:null}),y=o("WAMediaManagerPrepareMediaDownload").mediaManagerPrepareMediaDownload({hash:r,logger:i,mediaDownloadFlow:f,mediaEntry:c}),b=y.logDownloadResult;f.addAnnotations({bool:{isMediaManager:!0},string:{downloadKind:"fullsizeAndPreview",fullSizeMediaType:d,mediaType:"preview",sanitisedMediaHash:o("WAHashUtils").sanitisePlaintextHash(r)}});var v=o("WADownloadPreviewOnlyTask").downloadOrRestorePreviewOnly({abortSignal:t,dbCallbacks:n,fullSizePlaintextHash:r,logger:i,mediaDownloadFlow:f,mediaEntries:s,msgIdOfRecentMediaEntry:u,recentMediaEntry:c});return b(C(v,[u,c],f)).then(function(e){return e.success?f.endSuccess():f.endFail(e.error,{string:{failReason:e.error}}),e}).catch(function(e){return f.endFail("runtime-error",{string:{failReason:o("WAErrorMessage").maybeGetMessageFromError(e)}}),o("WAResultOrError").makeError("runtime-error")})}function R(e,t){e.addPoint("media_streaming_fail",{string:{wa_media_download_streaming_fail_reason:o("WAErrorMessage").maybeGetMessageFromError(t.error)}})}function L(e){switch(e){case"runtime-error":case"jpeg-stream-not-supported":return{error:e,shouldFallback:!0};case"missing-expected-hmacs":case"hmac-chiphertext-array-mismatch":return{error:e,shouldFallback:!0};case"missing-media-entry":case"missing-media-entry-for-restore":case"missing-sort-order-ms-for-restore":case"preview-not-supported":return{error:e,shouldFallback:!1};case"derive-primary-key-secret-error":case"derive-access-token-secret-error":case"direct-path-undefined":case"direct-path-corrupted":case"direct-path-empty":case"create-payload-failed":case"resign-cdn-url-request-error":case"resign-cdn-url-runtime-error":case"resign-cdn-url-timeout":case"resign-cdn-url-gql-error":return{error:e,shouldFallback:!1};case"invalid-media":return{error:e,shouldFallback:!1};case"decryption-error":case"enc-hash-mismatch":case"hash-mismatch":case"ciphertext-hash-mismatch":return{error:e,shouldFallback:!0};case"access-expired":case"disconnected":case"backoff":case"body-network-error":case"http-fetch-exception":case"http-fetch-aborted":case"no-host":case"server-timeout":case"unspecified-http-error":case"media-not-found":case"download-throttled":case"request-error":case"max-attempts-exceeded":case"signature-expired":case"media-entry-invalid":return{error:e,shouldFallback:!1};case"media-entry-invalid-direct-path":case"media-entry-invalid-file-enc-sha256":case"media-entry-invalid-file-sha256":case"media-entry-invalid-media-key":case"media-entry-invalid-server-media-type":return{error:e,shouldFallback:!1}}}l.startDownloadFullSizeAndPreviewTask=y}),98);
__d("WAMediaManagerLogger",["WAHashUtils","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=o("WATagsLogger").TAGS(["MediaManager"]);function s(t){var n=t.downloadKind,r=t.fullSizePlaintextHash,a=e.TAGS(["download","hash:"+o("WAHashUtils").sanitisePlaintextHash(r),n]);return a}function u(t){var n=t.plaintextHash,r=t.uploadKind,a=e.TAGS(["upload","hash:"+o("WAHashUtils").sanitisePlaintextHash(n),r]);return a}l.baseLogger=e,l.createDownloadLogger=s,l.createUploadLogger=u}),98);
__d("WAMediaManagerTypes",["WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.success?o("WAResultOrError").makeResult({serverMediaType:e.value.serverMediaType,unvalidatedMimeType:e.value.unvalidatedMimeType,validatedResult:e.value.validatedResult}):e}l.transformInternalMediaDownloadResult=e}),98);
__d("WAMediaManagerWorkerScheduler",["WorkerScheduler"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return e==null&&(e=o("WorkerScheduler").makeScheduler("MediaManager",{concurrency:16,maxTaskLimit:32,maxThrottleMs:3e4,timeoutMs:6e4})),e}l.mediaManagerWorkerScheduler=s}),98);
__d("WACreateRetrier",["WAComms","WAGetMediaRoute","WAMediaOperationsRetrier","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){var n=await o("WAGetMediaRoute").getMediaRoute({operation:"upload",serverMediaType:e},t);if(!n.success)return n;var r=n.value,a=r.selectedHost,i=r.fallbackHost,l=r.authToken,s=new(o("WAMediaOperationsRetrier")).MediaOperationsRetrier("upload",{host:{domain:a.domain,class:a.class},fallbackHost:i&&{domain:i.domain,class:i.class},authToken:l,timeElapsed:null},o("WAComms").waitForConnection);return o("WAResultOrError").makeResult(s)}l.createUploadRetrier=e}),98);
__d("WAHttpRegularUploadMedia",["WADirectPath","WALogger","WAResultOrError","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;async function c(t,n){var a;try{a=await fetch(t,{method:"POST",mode:"cors",cache:"no-store",headers:{"Content-Type":"text/plain"},body:new Blob([n])})}catch(t){throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["HttpRegularUploadMedia: fail to initiate fetch ",""])),t),t}var i=a,l=i.status;switch(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Fetch Media HTTP status ",""])),l),l){case 200:return a.json().then(function(e){if(!Object.prototype.hasOwnProperty.call(e,"direct_path"))throw r("err")("direct_path not available in wa upload http response");if(typeof e.direct_path!="string")throw r("err")('directPath: "'+e.direct_path+'" is not a string');if(e.object_id&&typeof e.object_id!="string")throw r("err")('objectId: "'+e.object_id+'" is not a string');if(e.handle&&typeof e.handle!="string")throw r("err")('handle: "'+e.handle+'" is not a string');var t={directPath:o("WADirectPath").unsafeCastToDirectPath(e.direct_path),objectId:e.object_id,handle:e.handle};return o("WAResultOrError").makeResult(t)}).catch(function(e){return o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["HttpRegularUploadMedia: fail to parse request body ",""])),e),o("WAResultOrError").makeError("body-network-error")});case 408:return o("WAResultOrError").makeError("server-timeout");case 413:return o("WAResultOrError").makeError("payload-too-large");case 415:return o("WAResultOrError").makeError("invalid-media");case 429:case 507:return o("WAResultOrError").makeError("upload-throttled");default:return l>=400&&l<500?o("WAResultOrError").makeError("request-error"):o("WAResultOrError").makeError("unspecified-http-error")}}l.httpRegularUploadMedia=c}),98);
__d("WAHttpResumeCheck",["WADirectPath","WALogger","WAMediaUtils","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m;async function p(t){var n;try{n=await fetch(t,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"text/plain"}})}catch(t){throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["HttpResumeCheck: fail to initiate fetch ",""])),t),t}var r=n,a=r.status;switch(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["HttpResumeCheck: response status ",""])),a),a){case 200:return n.json().then(function(e){var t=e.resume,n=e.direct_path,r=e.object_id;if(t==="complete")return n==null?(o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["HttpResumeCheck: direct_path is missing"]))),o("WAResultOrError").makeResult({type:"media-not-found"})):r==null?(o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["HttpResumeCheck: object_id is missing"]))),o("WAResultOrError").makeResult({type:"media-not-found"})):o("WAResultOrError").makeResult({type:"media-found",directPath:o("WADirectPath").unsafeCastToDirectPath(n),objectId:o("WAMediaUtils").stringToDeliveryObjectId(r)});var a=parseInt(t,10);return a===0?o("WAResultOrError").makeResult({type:"media-not-found"}):Number.isNaN(a)?(o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["HttpResumeCheck: resume is NaN: ",""])),t),o("WAResultOrError").makeResult({type:"media-not-found"})):o("WAResultOrError").makeResult({type:"media-partial-found",resumeFromBytes:a})}).catch(function(e){return o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["HttpResumeCheck: fail to parse request body ",""])),e),o("WAResultOrError").makeError("body-network-error")});case 404:return o("WAResultOrError").makeResult({type:"media-not-found"});case 408:return o("WAResultOrError").makeError("server-timeout");case 429:case 507:return o("WAResultOrError").makeError("upload-throttled");default:return a>=400&&a<500?o("WAResultOrError").makeError("request-error"):o("WAResultOrError").makeError("unspecified-http-error")}}l.httpResumeCheck=p}),98);
__d("WAEncryptAndUploadPlaintext",["WABase64","WAErrorMessage","WAGlobals","WAHttpRegularUploadMedia","WAHttpResumeCheck","WALogger","WAMediaCrypto","WAMediaUrl","WAProgressiveJpegGetPJpegDetails","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_;async function f(t){var n=t.serverMediaType,r=t.plaintextHash,a=t.plaintext,i=t.mediaKey,l=t.mediaKeyTimestamp,f=t.uploadToken,g=t.uploadRetrier,h=t.mediaUploadFlow,y=t.fromOffset,C=y===void 0?0:y;h.addPoint("encrypt_and_upload_plaintext_start"),h.addPoint("compute_media_keys_start");var b=n==="preview"?await o("WAMediaCrypto").computeMediaKeysForPreview(i):await o("WAMediaCrypto").computeMediaKeys(i,n),v=b.iv,S=b.cipherKey,R=b.hmacKey;h.addPoint("compute_media_keys_end"),h.addPoint("encrypt_and_hmac_start");var L=await o("WAMediaCrypto").encryptAndHmac(S,v,R,a,n),E=L.ciphertext,k=L.ciphertextHash,I=L.sidecar,T=L.ivCiphertextHmac;h.addPoint("encrypt_and_hmac_end");var D=null;if(n==="image"){h.addPoint("get_progressive_jpeg_details_start");var x=await o("WAProgressiveJpegGetPJpegDetails").getProgressiveJpegDetails(new Uint8Array(a),T,R),$=o("WAProgressiveJpegGetPJpegDetails").isValidProgressiveJpegDetails(x);$.success===!1?(o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["encryptAndUploadPlaintext: Created invalid progressiveJpeg details during encrypt and upload: ",""])),$.error),h.addPoint($.error)):$.value===!0&&o("WAGlobals").getConfig().isProgressiveJpegSendEnabled()&&(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["encryptAndUploadPlaintext: Found valid progressiveJpeg details. Adding to media entry."]))),D=x,h.addPoint("get_progressive_jpeg_details_end"))}var P={fileSha256:o("WABase64").decodeB64UrlSafe(r),fileEncSha256:k,mediaKey:i,mediaKeyTimestamp:l,serverMediaType:n,uploadToken:f,sidecar:I,progressiveJpegDetails:D,size:a.byteLength,filename:void 0,lastDownloadAttemptTimestamp:void 0,directPath:void 0},N,M=await g.run(async function(e,t,r){var a=e.domain,i=C;if(r>0){h.addPoint("network_retry",{int:{network_retry_attempt:r}});try{h.addPoint("resume_check_start");var l=o("WAMediaUrl").buildUploadUrl(n,f,k,a,t,!0),s=await o("WAHttpResumeCheck").httpResumeCheck(l);if(s.success){h.addPoint("resume_check_end");var p=s.value;if(p.type==="media-found")return h.addAnnotations({bool:{existingMediaFound:!0}}),o("WAResultOrError").makeResult(o("WAResultOrError").makeResult({directPath:p.directPath,objectId:null,handle:null}));p.type==="media-partial-found"&&(i=p.resumeFromBytes)}h.addPoint("resume_check_fail",{string:{resume_check_error:s.error}})}catch(e){h.addPoint("resume_check_fail",{string:{resume_check_error:o("WAErrorMessage").maybeGetMessageFromError(e)}}),o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["encryptAndUploadPlaintext: error during retrier ",""])),e)}}i>0&&i<E.byteLength?(h.addAnnotations({int:{fromOffset:i},bool:{continuedFromOffset:!0}}),N=E.subarray(i)):N=E;var _=o("WAMediaUrl").buildUploadUrl(n,f,k,a,t,!1,i);return o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["encryptAndUploadPlaintext: start upload media to ",""])),_),h.addPoint("http_upload_start"),o("WAHttpRegularUploadMedia").httpRegularUploadMedia(_,N).then(function(e){if(e.success)return h.addPoint("http_upload_end",{int:{attempt:r}}),o("WAResultOrError").makeResult(e);var t=e.error;switch(h.addPoint("http_upload_fail",{string:{http_upload_error:t}}),o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["encryptAndUploadPlaintext error: ",""])),t),t){case"server-timeout":case"unspecified-http-error":return o("WAResultOrError").makeError({progressMade:!0});default:return o("WAResultOrError").makeResult(o("WAResultOrError").makeError(t))}}).catch(function(e){var t=o("WAErrorMessage").maybeGetMessageFromError(e);return h.addPoint("http_upload_fail",{string:{http_upload_error:t}}),o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["encryptAndUploadPlaintext error: ",""])),t),o("WAResultOrError").makeError({progressMade:!1})})});if(M==null)return o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["encryptAndUploadPlaintext given up"]))),o("WAResultOrError").makeError("max-attempts-exceeded");if(M.success===!1)return M;var w=M.value,A=w.directPath,F=w.objectId,O=w.handle,B=babelHelpers.extends({},P,{directPath:A,handle:O,objectId:F});return o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["encryptAndUploadPlaintext: upload success "," ",""])),{directPath:A},{objectId:F}),h.addPoint("encrypt_and_upload_plaintext_end"),o("WAResultOrError").makeResult(B)}l.encryptAndUploadPlaintext=f}),98);
__d("WAUploadMediaQuick",["WACreateRetrier","WAEncryptAndUploadPlaintext","WAMediaUtils","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t){var n=t.mediaUploadFlow,r=t.plaintext,a=t.plaintextHash,i=t.serverMediaType,l=t.logger;l.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["start uploadMediaQuick"]))),n.addPoint("create_upload_retrier_start");var s=await o("WACreateRetrier").createUploadRetrier(i,n);if(!s.success)return n.addPoint("create_upload_retrier_fail"),s;n.addPoint("create_upload_retrier_end"),n.addPoint("create_media_key_start");var u=o("WAMediaUtils").createMediaKey(),c=o("WAMediaUtils").createUploadToken(),d=o("WATimeUtils").unixTime();n.addPoint("create_media_key_end");var m=await o("WAEncryptAndUploadPlaintext").encryptAndUploadPlaintext({mediaKey:u,mediaKeyTimestamp:d,serverMediaType:i,mediaUploadFlow:n,plaintext:r,plaintextHash:a,uploadRetrier:s.value,uploadToken:c});return m}l.uploadMediaQuick=s}),98);
__d("mapWorkerSchedulerTask",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return babelHelpers.extends({},e,{promise:e.promise.then(t),run:function(){return e.run().then(t)}})}i.mapWorkerSchedulerTask=e}),66);
__d("WAMediaManager",["$InternalEnum","WADownloadFullSizeAndPreviewTask","WADownloadFullSizeOnlyTask","WADownloadPreviewOnlyTask","WAErrorMessage","WAHashUtils","WAMediaManagerCache","WAMediaManagerLogger","WAMediaManagerTypes","WAMediaManagerWorkerScheduler","WAResultOrError","WATimeUtils","WAUploadMediaQuick","WorkerScheduler","gkx","justknobx","mapWorkerSchedulerTask"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S=n("$InternalEnum").Mirrored(["HIGH","MEDIUM","LOW"]);function R(){return{fullsizeCache:new Map,previewCache:new Map,uploadCache:new Map}}function L(t){var n=t.createCacheState,a=t.dbCallbacks,i=o("WAMediaManagerWorkerScheduler").mediaManagerWorkerScheduler(),l=o("WAMediaManagerCache").createAttachmentCache(a.getProtocolMsgIdAndSortOrderMs,n),v=function(n){var t=o("WAMediaManagerLogger").createDownloadLogger({downloadKind:"fullsize",fullSizePlaintextHash:n.fullSizePlaintextHash}),r=l.getFullsize(n);if(t.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",""])),r.type),r.type==="cache-hit")return r.cache;var c=new AbortController,d=i.task({fn:function(){return o("WADownloadFullSizeOnlyTask").startDownloadFullSizeTask({abortSignal:c.signal,dbCallbacks:a,fullSizePlaintextHash:n.fullSizePlaintextHash,logger:t,mediaDownloadFlow:n.mediaDownloadFlow})},name:"media-manager-download-fullsize-only",priority:E(n.priority)}),m=d.run();return r.setDownloadCache({abortController:c,fullSizePlaintextHash:n.fullSizePlaintextHash,mediaDownloadFlow:n.mediaDownloadFlow,scheduledTask:o("mapWorkerSchedulerTask").mapWorkerSchedulerTask(d,function(e){return e.fullsizePromise})}),m.then(function(e){return e.fullsizePromise}).then(function(e){return $(n.fullSizePlaintextHash,e,r.setDownloadedAttachmentToUploadCache)}).catch(function(e){return t.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["runtime-error: ",""])),o("WAErrorMessage").maybeGetMessageFromError(e)),o("WAResultOrError").makeError("runtime-error")}).finally(function(){t.DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["end"])))})},S=function(t){var e=o("WAMediaManagerLogger").createDownloadLogger({downloadKind:"preview",fullSizePlaintextHash:t.fullSizePlaintextHash}),n=l.getPreview(t);if(e.DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["",""])),n.type),n.type==="cache-hit")return n.cache;var r=new AbortController,s=i.task({fn:function(){return o("WADownloadPreviewOnlyTask").startDownloadPreviewTask({abortSignal:r.signal,dbCallbacks:a,fullSizePlaintextHash:t.fullSizePlaintextHash,logger:e,mediaDownloadFlow:t.mediaDownloadFlow})},name:"media-manager-download-preview-only",priority:E(t.priority)});n.setDownloadCache({abortController:r,fullSizePlaintextHash:t.fullSizePlaintextHash,mediaDownloadFlow:t.mediaDownloadFlow,scheduledTask:o("mapWorkerSchedulerTask").mapWorkerSchedulerTask(s,function(e){return e.previewPromise})});var u=s.run();return u.then(function(e){return e.previewPromise}).then(function(e){return P(e,n.setDownloadedAttachmentToUploadCache)}).catch(function(t){return e.ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["runtime-error: ",""])),o("WAErrorMessage").maybeGetMessageFromError(t)),o("WAResultOrError").makeError("runtime-error")}).finally(function(){e.DEV(m||(m=babelHelpers.taggedTemplateLiteralLoose(["end"])))})},R=function(t){var e=o("WAMediaManagerLogger").createDownloadLogger({downloadKind:"fullsizeAndPreview",fullSizePlaintextHash:t.fullSizePlaintextHash}),n=l.getFullsizeAndPreview(t),r=n.fullsizeCacheResult,s=n.previewCacheResult;if(e.DEV(p||(p=babelHelpers.taggedTemplateLiteralLoose(["fullsize: ",", preview: ",""])),r.type,s.type),r.type==="cache-hit"&&s.type==="cache-hit")return{fullsizePromise:r.cache,previewPromise:s.cache};if(s.type==="cache-hit"){var u=v(t);return{fullsizePromise:u,previewPromise:s.cache}}if(r.type==="cache-hit"){var c=S(t);return{fullsizePromise:r.cache,previewPromise:c}}r.type,s.type;var d=new AbortController,m=i.task({fn:function(){return o("WADownloadFullSizeAndPreviewTask").startDownloadFullSizeAndPreviewTask({abortSignal:d.signal,dbCallbacks:a,fullSizePlaintextHash:t.fullSizePlaintextHash,logger:e,mediaDownloadFlow:t.mediaDownloadFlow})},name:"media-manager-download-fullsize-and-preview",priority:E(t.priority)});r.setDownloadCache({abortController:d,fullSizePlaintextHash:t.fullSizePlaintextHash,mediaDownloadFlow:t.mediaDownloadFlow,scheduledTask:o("mapWorkerSchedulerTask").mapWorkerSchedulerTask(m,function(e){return e.fullsizePromise})}),s.setDownloadCache({abortController:d,fullSizePlaintextHash:t.fullSizePlaintextHash,mediaDownloadFlow:t.mediaDownloadFlow,scheduledTask:o("mapWorkerSchedulerTask").mapWorkerSchedulerTask(m,function(e){return e.previewPromise})});var y=m.run();return{fullsizePromise:y.then(function(e){return e.fullsizePromise}).then(function(e){return $(t.fullSizePlaintextHash,e,r.setDownloadedAttachmentToUploadCache)}).catch(function(t){return e.ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["fullsizePromise runtime-error: ",""])),o("WAErrorMessage").maybeGetMessageFromError(t)),o("WAResultOrError").makeError("runtime-error")}).finally(function(){e.DEV(f||(f=babelHelpers.taggedTemplateLiteralLoose(["fullsize end"])))}),previewPromise:y.then(function(e){return e.previewPromise}).then(function(e){return P(e,s.setDownloadedAttachmentToUploadCache)}).catch(function(t){return e.ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["previewPromise runtime-error: ",""])),o("WAErrorMessage").maybeGetMessageFromError(t)),o("WAResultOrError").makeError("runtime-error")}).finally(function(){e.DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["preview end"])))})}},L=x(),k=L.isInMemoryMediaUploadCache,I=function(t){var e=o("WAMediaManagerLogger").createUploadLogger({plaintextHash:t.plaintextHash,uploadKind:"fullsize"}),n;if(r("gkx")("19103")&&(n=l.getUploadedAttachment(t),e.DEV(y||(y=babelHelpers.taggedTemplateLiteralLoose(["cache result: ",""])),n.type),t.mediaUploadFlow.addAnnotations({string:{dedupe_result:n.type}}),n.type==="in-thread-cache-hit"))return n.cache;if(r("justknobx")._("4810")){var a=k({chatJid:t.chatJid,plaintextHash:t.plaintextHash});t.mediaUploadFlow.addAnnotations({bool:{is_cross_thread_dedupe_candidate:a==="cross-thread",is_in_thread_dedupe_candidate:a==="in-thread"}})}var i=o("WAUploadMediaQuick").uploadMediaQuick({logger:e,mediaUploadFlow:t.mediaUploadFlow,plaintext:t.plaintext,plaintextHash:t.plaintextHash,serverMediaType:t.serverMediaType}).catch(function(t){return e.ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(["runtime-error: ",""])),o("WAErrorMessage").maybeGetMessageFromError(t)),o("WAResultOrError").makeError("runtime-error")}).finally(function(){e.DEV(b||(b=babelHelpers.taggedTemplateLiteralLoose(["upload end"])))});return n!=null&&r("gkx")("19103")&&n.setUploadCache({chatJid:t.chatJid,plaintextHash:t.plaintextHash,scheduledTask:i}),i};return{clearCache:l.clearCache,dequeueDownload:l.cancelTask,enqueueDownloadFullSize:T("fullsize",v),enqueueDownloadFullSizeAndPreview:T("fullsizeAndPreview",R),enqueueDownloadPreview:T("preview",S),enqueueUploadFullSize:D(I)}}function E(e){return e===S.HIGH?o("WorkerScheduler").BLOCKING_PRIORITY:e===S.MEDIUM?o("WorkerScheduler").REGULAR_PRIORITY:e===S.LOW?o("WorkerScheduler").BACKGROUND_PRIORITY:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}var k=typeof((v=navigator.storage)==null?void 0:v.getDirectory)=="function",I=typeof self.caches=="object";function T(e,t){return function(n){var r=n.fullSizePlaintextHash,a=n.mediaDownloadFlow;try{a.addPoint("enqueue_start",{bool:{isOPFSSupported:k,isWebCacheSupported:I},string:{downloadKind:e,sanitisedMediaHash:o("WAHashUtils").sanitisePlaintextHash(r)}});var i=t(n);return a.addPoint("enqueue_end"),i}catch(e){throw a.addPoint("enqueue_fail"),e}}}function D(e){return function(t){var n=t.mediaUploadFlow,r=t.plaintextHash;try{n.addPoint("enqueue_start",{string:{sanitisedMediaHash:o("WAHashUtils").sanitisePlaintextHash(r)}});var a=e(t);return n.addPoint("enqueue_end"),a}catch(e){throw n.addPoint("enqueue_fail"),e}}}function x(){var e=new Map;return{isInMemoryMediaUploadCache:function(n){var t=n.chatJid,r=n.plaintextHash,a=e.get(r);if(a==null)return a=new Map,e.set(r,a),a.set(t,o("WATimeUtils").futureUnixTime(2*o("WATimeUtils").DAY_SECONDS)),"no-cache";var i=a.get(t);if(i!=null&&o("WATimeUtils").isInFuture(i))return"in-thread";var l=!1;for(var s of a){var u=s[1];if(o("WATimeUtils").isInFuture(u)){l=!0;break}}return a.set(t,o("WATimeUtils").futureUnixTime(2*o("WATimeUtils").DAY_SECONDS)),l?"cross-thread":"no-cache"}}}function $(e,t,n){if(!t.success)return t;if(r("gkx")("19103")===!1)return o("WAMediaManagerTypes").transformInternalMediaDownloadResult(t);var a=t.value.msgIdAndMediaEntry,i=a[0],l=a[1];return n({mediaEntry:l,msgId:i,plaintextHash:e}),o("WAMediaManagerTypes").transformInternalMediaDownloadResult(t)}function P(e,t){if(!e.success)return e;if(r("gkx")("19103")===!1)return o("WAMediaManagerTypes").transformInternalMediaDownloadResult(e);var n=e.value.msgIdAndMediaEntry,a=n[0],i=n[1],l=i.downloadableThumbnail;return l==null||l.directPath==null||l.fileEncSha256==null||l.fileSha256==null||l.mediaKey==null||l.mediaKeyTimestamp==null||l.objectId==null||t({mediaEntry:babelHelpers.extends({},i,{directPath:l.directPath,downloadableThumbnail:null,fileSha256:l.fileSha256,mediaKey:l.mediaKey,mediaKeyTimestamp:l.mediaKeyTimestamp,objectId:l.objectId,serverMediaType:"preview",size:e.value.validatedResult.validatedPlaintext.byteLength}),msgId:a,plaintextHash:o("WAHashUtils").toPlaintextHash(l.fileSha256)}),o("WAMediaManagerTypes").transformInternalMediaDownloadResult(e)}l.MediaTaskPriority=S,l.createCacheState=R,l.createMediaManager=L,l.toWorkerSchedulerPriority=E}),98);
__d("WAMediaManagerCache",["Promise","WAErrorMessage","WAHashUtils","WAMediaManager","WAMediaManagerLogger","WAMediaManagerTypes","WAPromiseDelays","WAResultOrError","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=["mediaKeyTimestamp","objectId","size"],s,u,c,d,m,p,_,f=3e4,g=1e3*60*60*24*2;function h(e,t){t===void 0&&(t=o("WAMediaManager").createCacheState);var r=t(),a=r.fullsizeCache,i=r.previewCache,l=r.uploadCache,h=function(t){var e=t.abortController,n=t.fullSizePlaintextHash,r=t.mediaDownloadFlow,i=t.scheduledTask;a.set(n,{abortController:e,mediaDownloadFlow:r,task:i}),i.promise.then(function(e){var t=e.success;return t?o("WAPromiseDelays").delayMs(f):void 0}).finally(function(){a.delete(n)})},b=function(t){var e=t.abortController,n=t.fullSizePlaintextHash,r=t.mediaDownloadFlow,a=t.scheduledTask;i.set(n,{abortController:e,mediaDownloadFlow:r,task:a}),a.promise.then(function(e){var t=e.success;return t?o("WAPromiseDelays").delayMs(f):void 0}).finally(function(){i.delete(n)})},v=function(t){var e=t.chatJid,n=t.plaintextHash,r=t.scheduledTask,a=t.cacheTtlMs,i=a===void 0?g:a,s=l.get(n)||new Map;s.set(e,r),l.set(n,s),r.then(function(e){var t=e.success;return t?o("WAPromiseDelays").delayMs(i):void 0}).finally(function(){l.delete(n)})},S=function(r){var t=r.mediaEntry,a=r.msgId,i=r.plaintextHash;e(a).then(function(e){if(e==null){o("WAMediaManagerLogger").baseLogger.WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["missing chatJid, skip setDownloadedAttachmentToUploadCache"])));return}var r=e.protocolMsgId.chat,a=C(t);if(a==null){o("WAMediaManagerLogger").baseLogger.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["can not covert mediaEntry from download to upload for cache"])));return}var l=o("WATimeUtils").timeoutFor(a.mediaKeyTimestamp,g/1e3);if(l!==0){var c=o("WATimeUtils").pastUnixTime(o("WATimeUtils").DAY_SECONDS,a.mediaKeyTimestamp);o("WATimeUtils").isInFuture(c)||v({cacheTtlMs:l,chatJid:r,plaintextHash:i,scheduledTask:(_||(_=n("Promise"))).resolve(o("WAResultOrError").makeResult(a))})}}).catch(function(e){o("WAMediaManagerLogger").baseLogger.WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["setDownloadedAttachmentToUploadCache getProtocolMsgIdAndSortOrderMs: ",""])),o("WAErrorMessage").maybeGetMessageFromError(e))})};return{cancelTask:function(t){var e=o("WAMediaManagerLogger").baseLogger.TAGS(["hash:"+o("WAHashUtils").sanitisePlaintextHash(t),"cancelTask"]);e.LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["start"])));var n=[a,i];for(var r of n){var l=r.get(t);if(l!=null){var s=l.task.cancel();l.mediaDownloadFlow.addPoint("cancel_download_triggered"),s===!1?(l.abortController.abort(),l.mediaDownloadFlow.addPoint("http_abort_cancel"),e.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["http abort cancel"])))):(l.mediaDownloadFlow.addPoint("worker_task_cancel_cancel"),e.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["worker task cancel"])))),r.delete(t)}}},clearCache:function(){i.clear(),a.clear(),l.clear()},getFullsize:function(t){var e=a.get(t.fullSizePlaintextHash);return e!=null?(y(t.mediaDownloadFlow,"hit","fullsize"),e.task.promote(o("WAMediaManager").toWorkerSchedulerPriority(t.priority)),{cache:e.task.promise.then(o("WAMediaManagerTypes").transformInternalMediaDownloadResult),type:"cache-hit"}):(y(t.mediaDownloadFlow,"miss","fullsize"),{setDownloadCache:h,setDownloadedAttachmentToUploadCache:S,type:"cache-miss"})},getFullsizeAndPreview:function(t){var e=o("WAMediaManager").toWorkerSchedulerPriority(t.priority),n=a.get(t.fullSizePlaintextHash),r=i.get(t.fullSizePlaintextHash);return n!=null&&r!=null?(y(t.mediaDownloadFlow,"hit","fullsize-and-preview"),n.task.promote(e),r.task.promote(e),{fullsizeCacheResult:{cache:n.task.promise.then(o("WAMediaManagerTypes").transformInternalMediaDownloadResult),type:"cache-hit"},previewCacheResult:{cache:r.task.promise.then(o("WAMediaManagerTypes").transformInternalMediaDownloadResult),type:"cache-hit"}}):n!=null?(y(t.mediaDownloadFlow,"hit","fullsize"),n.task.promote(e),{fullsizeCacheResult:{cache:n.task.promise.then(o("WAMediaManagerTypes").transformInternalMediaDownloadResult),type:"cache-hit"},previewCacheResult:{setDownloadCache:b,setDownloadedAttachmentToUploadCache:S,type:"cache-miss"}}):r!=null?(y(t.mediaDownloadFlow,"hit","preview"),r.task.promote(e),{fullsizeCacheResult:{setDownloadCache:h,setDownloadedAttachmentToUploadCache:S,type:"cache-miss"},previewCacheResult:{cache:r.task.promise.then(o("WAMediaManagerTypes").transformInternalMediaDownloadResult),type:"cache-hit"}}):(y(t.mediaDownloadFlow,"miss","fullsize-and-preview"),{fullsizeCacheResult:{setDownloadCache:h,setDownloadedAttachmentToUploadCache:S,type:"cache-miss"},previewCacheResult:{setDownloadCache:b,setDownloadedAttachmentToUploadCache:S,type:"cache-miss"}})},getPreview:function(t){var e=i.get(t.fullSizePlaintextHash);return e!=null?(y(t.mediaDownloadFlow,"hit","preview"),e.task.promote(o("WAMediaManager").toWorkerSchedulerPriority(t.priority)),{cache:e.task.promise.then(o("WAMediaManagerTypes").transformInternalMediaDownloadResult),type:"cache-hit"}):(y(t.mediaDownloadFlow,"miss","preview"),{setDownloadCache:b,setDownloadedAttachmentToUploadCache:S,type:"cache-miss"})},getUploadedAttachment:function(t){var e=l.get(t.plaintextHash);if(e==null)return{setUploadCache:v,type:"cache-miss-no-plaintext-hash"};var n=e.get(t.chatJid);return n==null?{setUploadCache:v,type:"cache-miss-no-thread"}:{cache:n,type:"in-thread-cache-hit"}}}}function y(e,t,n){e.addAnnotations({string:{media_manager_cache_result:t,media_manager_cache_type:n}})}function C(t){var n=t.mediaKeyTimestamp,r=t.objectId,o=t.size,a=babelHelpers.objectWithoutPropertiesLoose(t,e);return n==null||r==null||o==null?null:babelHelpers.extends({},a,{mediaKeyTimestamp:n,objectId:r,size:o})}l.DOWNLOAD_TASK_CACHE_TTL_MS=f,l.UPLOAD_TASK_CACHE_TTL_MS=g,l.createAttachmentCache=h}),98);
__d("blobToDataUri",["err"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){var t=new FileReader,n=new Promise(function(e,n){t.onloadend=e,t.onerror=n});t.readAsDataURL(e),await n;var o=t.result;if(typeof o!="string")throw r("err")('Unexpected result type "%s" when reading Blob as DataURL.',o instanceof ArrayBuffer?"ArrayBuffer":typeof o);return o}l.default=e}),98);
__d("MAWGetThumbnailBlobDataUrlByMediaIdApi",["MAWCreateMaybeAddPointForMediaRender","MAWDbChunkTxns","MAWDbMedia","MAWDbMediaTxns","MAWIndexedDb","MAWMaybeWithTimeout","MAWMediaManager","MAWMediaPreviewDownloadManager","MAWMpsGating","MAWTransactionMode","MWFBLogger","WAErrorMessage","WAHashUtils","WAMediaManager","WAResultOrError","WAStartMediaDownloadQplFlow","blobToDataUri"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D=o("MWFBLogger").MWMediaLogger().tags(["getThumbnailBlobDataUrlByMediaId"]),x=async function(n,a,i){D.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Get thumbnail blob for "," from , from ",""])),n,a);var t=o("MAWCreateMaybeAddPointForMediaRender").createMaybeAddPointForMediaRender(i),l={string:{description:a,fetch_by:"mediaId"}};t("fetch_thumbnail_blob_api_start",l),t("get_media_from_db_start",l);var g=await M(n);if(t("get_media_from_db_finish",{bool:{db_media_found:g!=null}}),g==null)throw D.WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["No media found for ",""])),n),t("fetch_thumbnail_blob_api_fail_no_media_found_in_db",l),D.mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId because media is not in the media db. mediaId is %s, from %s",n,a);var h=A(g);if(h.success===!0){D.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Found jpegThumbnail entry for ",""])),n),t("fetch_thumbnail_blob_api_success",l);var y=await r("blobToDataUri")(h.value);if(!y)throw D.MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Failed to create thumbnail data uri from blob for ",""])),n),t("fetch_thumbnail_blob_api_fail_no_data_uri",l),D.mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId because data uri is null. mediaId is %s, from %s",n,a);return D.DEBUG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Returning data uri for ",""])),n),y}var C=h.error;switch(C){case"missing_jpeg_thumbnail":if(g.mediaType===o("MAWDbMedia").MEDIA_TYPE.IMAGE||g.mediaType===o("MAWDbMedia").MEDIA_TYPE.VIDEO){var b=await P(g,i);if(b!=null){t("fetch_thumbnail_blob_api_success",l);var v=await r("blobToDataUri")(b);if(!v)throw D.MUSTFIX(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Failed to create thumbnail data uri from blob for ",""])),n),t("fetch_thumbnail_blob_api_fail_no_data_uri",l),D.mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId because data uri is null. mediaId is %s, from %s",n,a);return D.DEBUG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Returning data uri for ",""])),n),v}if((g==null?void 0:g.mediaType)===o("MAWDbMedia").MEDIA_TYPE.VIDEO)throw t("fetch_thumbnail_blob_api_fail_not_able_to_generate_video_thumbnail_on_the_fly",l),D.mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId in time (for video). mediaId is %s, from %s",n,a);var S=await N(g,i);if(S==null)throw t("fetch_thumbnail_blob_api_fail_not_able_to_generate_image_thumbnail_on_the_fly",l),D.mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId in time or to generate thumnbail on the fly. mediaId is %s, from %s",n,a);t("fetch_thumbnail_blob_api_success",l);var R=await r("blobToDataUri")(S);if(!R)throw D.MUSTFIX(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Failed to create thumbnail data uri from blob for ",""])),n),t("fetch_thumbnail_blob_api_fail_no_data_uri",l),D.mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId because data uri is null. mediaId is %s, from %s",n,a);return D.DEBUG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Returning data uri for ",""])),n),R}throw t("fetch_thumbnail_blob_api_fail_missing_thumbnail",l),D.mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId, invalid media (missing_jpeg_thumbnail). mediaId is %s, from %s",n,a);case"invalid_media":throw t("fetch_thumbnail_blob_api_fail_invalid_media",l),D.mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId, invalid media. mediaId is %s, from %s",n,a)}},$=async function(t,n,a){var e=o("MAWCreateMaybeAddPointForMediaRender").createMaybeAddPointForMediaRender(a),i={string:{description:n,fetch_by:"hashedPlaintextHash"}};if(e("fetch_thumbnail_blob_api_start",i),D.DEBUG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Get thumbnail blob for "," from ",""])),o("WAHashUtils").sanitisePlaintextHash(t),n),o("MAWMpsGating").isMpsMessageRendering()){var l=o("WAStartMediaDownloadQplFlow").startMediaDownloadQplFlow({downloadEntry:"UILayout",msgType:null,protocolMsgId:null,triggerUIView:null}),s=await o("MAWMediaManager").getMawMediaManager(),u=s.enqueueDownloadFullSizeAndPreview({fullSizePlaintextHash:t,mediaDownloadFlow:l,priority:o("WAMediaManager").MediaTaskPriority.HIGH}),c=await u.previewPromise;if(c.success){var d;l.endSuccess();var m=c.value.validatedResult.validatedPlaintext,p=new Blob([m],{type:(d=c.value.validatedResult.mimeType)!=null?d:void 0}),_=await r("blobToDataUri")(p);return _}if(c.error!=="preview-not-supported")throw l.endFail(c.error,{string:{failReason:c.error}}),o("MWFBLogger").MPSLogger().mustfixThrow("Failed to getThumbnailBlobDataUrlByHashedPlaintextHash. plaintextHash is %s, from %s, error: %s",o("WAHashUtils").sanitisePlaintextHash(t),n,c.error);var f=await u.fullsizePromise;if(f.success){var E;l.endSuccess();var k=f.value.validatedResult.validatedPlaintext,I=new Blob([k],{type:(E=f.value.validatedResult.mimeType)!=null?E:void 0}),T=await r("blobToDataUri")(I);return T}throw l.endFail(f.error,{string:{failReason:f.error}}),o("MWFBLogger").MPSLogger().mustfixThrow("Failed to getThumbnailBlobDataUrlByHashedPlaintextHash. plaintextHash is %s, from %s, error: %s",o("WAHashUtils").sanitisePlaintextHash(t),n,f.error)}var x=await w(t);if(x==null)throw D.WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["No media found for ",""])),o("WAHashUtils").sanitisePlaintextHash(t)),e("fetch_thumbnail_blob_api_fail_no_media_found_in_db",i),D.mustfixThrow("Failed to getThumbnailBlobDataUrlByHashedPlaintextHash because media is not in the media db. plaintextHash is %s, from %s",o("WAHashUtils").sanitisePlaintextHash(t),n);var $=A(x);if($.success===!0){D.DEBUG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Found jpegThumbnail entry for ",""])),o("WAHashUtils").sanitisePlaintextHash(t)),e("fetch_thumbnail_blob_api_success",i);var M=await r("blobToDataUri")($.value);if(!M)throw D.MUSTFIX(C||(C=babelHelpers.taggedTemplateLiteralLoose(["Failed to create thumbnail data uri from blob for ",""])),o("WAHashUtils").sanitisePlaintextHash(t)),e("fetch_thumbnail_blob_api_fail_no_data_uri",i),D.mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId because data uri is null. plaintextHash is %s, from %s",o("WAHashUtils").sanitisePlaintextHash(t),n);return D.DEBUG(b||(b=babelHelpers.taggedTemplateLiteralLoose(["Returning data uri for ",""])),o("WAHashUtils").sanitisePlaintextHash(t)),M}var F=$.error;switch(F){case"missing_jpeg_thumbnail":if(x.mediaType===o("MAWDbMedia").MEDIA_TYPE.IMAGE||x.mediaType===o("MAWDbMedia").MEDIA_TYPE.VIDEO){var O=await P(x,a);if(O!=null){e("fetch_thumbnail_blob_api_success",i);var B=await r("blobToDataUri")(O);if(!B)throw D.MUSTFIX(v||(v=babelHelpers.taggedTemplateLiteralLoose(["Failed to create thumbnail data uri from blob for ",""])),o("WAHashUtils").sanitisePlaintextHash(t)),e("fetch_thumbnail_blob_api_fail_no_data_uri",i),D.mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId because data uri is null. plaintextHash is %s, from %s",o("WAHashUtils").sanitisePlaintextHash(t),n);return D.DEBUG(S||(S=babelHelpers.taggedTemplateLiteralLoose(["Returning data uri for ",""])),o("WAHashUtils").sanitisePlaintextHash(t)),B}if((x==null?void 0:x.mediaType)===o("MAWDbMedia").MEDIA_TYPE.VIDEO)throw e("fetch_thumbnail_blob_api_fail_not_able_to_generate_video_thumbnail_on_the_fly",i),D.mustfixThrow("Failed to getThumbnailBlobDataUrlByHashedPlaintextHash in time (for video). plaintextHash is %s, from %s",o("WAHashUtils").sanitisePlaintextHash(t),n);var W=await N(x,a);if(W==null)throw e("fetch_thumbnail_blob_api_fail_not_able_to_generate_image_thumbnail_on_the_fly",i),D.mustfixThrow("Failed to getThumbnailBlobDataUrlByHashedPlaintextHash in time or to generate thumnbail on the fly. plaintextHash is %s, from %s",o("WAHashUtils").sanitisePlaintextHash(t),n);var q=await r("blobToDataUri")(W);if(!q)throw D.MUSTFIX(R||(R=babelHelpers.taggedTemplateLiteralLoose(["Failed to create thumbnail data uri from blob for ",""])),o("WAHashUtils").sanitisePlaintextHash(t)),e("fetch_thumbnail_blob_api_fail_no_data_uri",i),D.mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId because data uri is null. plaintextHash is %s, from %s",o("WAHashUtils").sanitisePlaintextHash(t),n);return D.DEBUG(L||(L=babelHelpers.taggedTemplateLiteralLoose(["Returning data uri for ",""])),o("WAHashUtils").sanitisePlaintextHash(t)),q}throw e("fetch_thumbnail_blob_api_fail_missing_thumbnail",i),D.mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId, invalid media (missing_jpeg_thumbnail). plaintextHash is %s, from %s",o("WAHashUtils").sanitisePlaintextHash(t),n);case"invalid_media":throw e("fetch_thumbnail_blob_api_fail_invalid_media",i),D.mustfixThrow("Failed to getThumbnailBlobDataUrlByMediaId, invalid media. plaintextHash is %s, from %s",o("WAHashUtils").sanitisePlaintextHash(t),n)}},P=function(t,n){var e=o("MAWCreateMaybeAddPointForMediaRender").createMaybeAddPointForMediaRender(n);e("fetch_thumbnail_blob_api_thumbnail_download_start");var r=o("MAWMediaPreviewDownloadManager").getMediaPreviewDownloadingResolvable(t.plaintextHash);return r==null?(e("fetch_thumbnail_blob_api_thumbnail_download_fail_no_resolvable"),Promise.resolve(null)):o("MAWMaybeWithTimeout").maybeWithTimeout(r.promise,1e4,function(){throw D.mustfixThrow("timeout waiting for thumbnail to download")}).then(function(t){return e("fetch_thumbnail_blob_api_thumbnail_download_success"),t}).catch(function(t){var n=o("WAErrorMessage").maybeGetMessageFromError(t);return D.MUSTFIX(E||(E=babelHelpers.taggedTemplateLiteralLoose(["Exception when waiting for thumbnail to download: ",""])),n),e("fetch_thumbnail_blob_api_thumbnail_download_fail_exception",{string:{wait_for_thumbnail_download_exception:n}}),null})},N=o("MAWIndexedDb").makeMsgrTransactor({chunk:(T=o("MAWTransactionMode")).READONLY,media:T.READONLY},"generateThumbnailFromMediaChunk",function(e){return function(t,n){var r=o("MAWCreateMaybeAddPointForMediaRender").createMaybeAddPointForMediaRender(n);return r("fetch_thumbnail_blob_api_thumbnail_generate_from_media_start"),o("MAWDbChunkTxns").maybeGetChunkFromHash(e,t.hashedPlaintextHash).then(function(e){if(e==null){D.MUSTFIX(k||(k=babelHelpers.taggedTemplateLiteralLoose(["getImageThumbnail: unable to get a thumbnail as the media chunk is missing"]))),r("fetch_thumbnail_blob_api_thumbnail_generate_from_media_fail_chunk_missing");return}return D.WARN(I||(I=babelHelpers.taggedTemplateLiteralLoose(["getImageThumbnail: using media chunk as the thumbnail"]))),r("fetch_thumbnail_blob_api_thumbnail_generate_from_media_success"),new Blob([e.blobData],{type:e.mimetype})})}}),M=o("MAWIndexedDb").makeMsgrTransactor({media:T.READONLY},"getFullMedia",function(e){return function(t){return o("MAWDbMediaTxns").maybeGetMediaFromMediaId(e,t)}}),w=o("MAWIndexedDb").makeMsgrTransactor({media:T.READONLY},"getFullMedia",function(e){return function(t){return o("MAWDbMediaTxns").maybeGetMediaFromPlaintextHash(e,t)}}),A=function(t){var e=F(t);if(e.success===!1)return e;var n=e.value.jpegThumbnail;return n!=null?o("WAResultOrError").makeResult(new Blob([n],{type:"image/jpeg"})):o("WAResultOrError").makeError("missing_jpeg_thumbnail")},F=function(t){var e,n;switch(t.mediaType){case o("MAWDbMedia").MEDIA_TYPE.IMAGE:return o("WAResultOrError").makeResult({jpegThumbnail:(e=t.validatedImageInfo)==null?void 0:e.jpegThumbnail});case o("MAWDbMedia").MEDIA_TYPE.VIDEO:return o("WAResultOrError").makeResult({jpegThumbnail:(n=t.validatedVideoInfo)==null?void 0:n.jpegThumbnail});case o("MAWDbMedia").MEDIA_TYPE.PTT:case o("MAWDbMedia").MEDIA_TYPE.STICKER:case o("MAWDbMedia").MEDIA_TYPE.GIF:case o("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE:return o("WAResultOrError").makeError("invalid_media");default:return t.mediaType,o("WAResultOrError").makeError("invalid_media")}};l.getThumbnailBlobDataUrlByMediaId=x,l.getThumbnailBlobDataUrlByHashedPlaintextHash=$,l.getFullMediaWithPlaintextHash=w}),98);
__d("MAWMediaManager",["MAWGetMostRescentDecodedMediaEntry","MAWGetProtocolMsgIdAndSortOrderMsApi","MAWMpsGating","MpsMediaManager","WAMediaManager","memoize"],(function(t,n,r,o,a,i,l){"use strict";var e=r("memoize")(function(){return o("WAMediaManager").createCacheState()}),s=r("memoize")(function(){return o("MpsMediaManager").getMpsMediaManager(e)}),u=r("memoize")(function(){return o("WAMediaManager").createMediaManager({createCacheState:e,dbCallbacks:{getMediaEntries:o("MAWGetMostRescentDecodedMediaEntry").getMediaEntries,getProtocolMsgIdAndSortOrderMs:o("MAWGetProtocolMsgIdAndSortOrderMsApi").getProtocolMsgIdAndSortOrderMs}})}),c=function(){return o("MAWMpsGating").isMpsMessageRendering()?s():u()};l.getMawMediaManager=c}),98);
__d("WmiChunkApi",["CoalescingLoader","MAWDbChunkTxns","MAWDexieTable","MAWIndexedDb","MAWMediaUtils","MAWTransactionMode","emptyFunction","memoizeWithArgsLFUCache"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=o("MAWIndexedDb").makeMsgrTransactor({chunk:o("MAWTransactionMode").READONLY},"wms_getCachedChunkResult",function(e){return function(t){return o("MAWDbChunkTxns").maybeBulkGetChunksFromPlaintextHash(e,t)}}),n=o("MAWIndexedDb").makeMsgrTransactor({chunk:o("MAWTransactionMode").READWRITE},"wms_storeChunk",function(t){return function(n){return n.map(function(t){return e(t[0])}),o("MAWDexieTable").dexieAll(n.map(function(e){return o("MAWDbChunkTxns").getOrCreateMediaChunkWithPlaintextHash(t,e[0],e[1],e[2],e[3])})).then(r("emptyFunction"))}}),a=new(o("CoalescingLoader")).CoalescingLoader(async function(n){var r=await t(n);return n.map(function(t){var n=r.get(t);return n==null&&e(t),n})}),i=new(o("CoalescingLoader")).CoalescingLoader(async function(e){return await n(e),[]}),l=r("memoizeWithArgsLFUCache")(function(e){return a.gen(e)},function(e){return e},1,function(t){e=t}),s=o("MAWIndexedDb").makeMsgrTransactor({chunk:o("MAWTransactionMode").READWRITE},"wms_deleteChunk",function(t){return function(n){n.map(e);var r=n.map(o("MAWMediaUtils").genHMACPlaintextHash);return t.chunk.where("hashedPlaintextHash").anyOf(r).delete()}});return{delete:s,get:l,store:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.gen(t)}}}l.getChunkApi=e}),98);
__d("MediaServiceLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return r("FBLogger")("wmi_media_service",t)};l.MediaServiceLogger=e}),98);
__d("WmiMediaServiceSchema",["MAWWormOdsLogger","MediaServiceLogger","WAHex","Worm","WormEAR","WormIDbDriver","WormMemoryDriver"],(function(t,n,r,o,a,i,l){"use strict";var e={autoIncrement:!0,indexes:{"[plaintextHash+updatedAtMs]":{fields:["plaintextHash","updatedAtMs"],unique:!1},"[threadId+messageId+plaintextHash]":{fields:["threadId","messageId","plaintextHash"],unique:!0}},nonEncryptedFields:["updatedAtMs","messageId"],primaryKey:"pk",secure:!0},s={messageChunk:e};function u(e){var t=e.blockingErrorThreshold,n=e.dbName,r=e.onBlockingError,a=e.qplEvent,i=e.strEncKey,l=o("WAHex").parseHex(i),u="wmi_media_service",c=new(o("WormEAR")).WormEAR(s,u,l),d=new(o("Worm")).WormDatabase(new(o("WormIDbDriver")).WormIDbDriver(n,u,s,c,o("MAWWormOdsLogger").wormOdsWorkerLogger,{blockingErrorThreshold:t,onBlockingError:r,onTransactionError:function(t){if(t instanceof o("WormEAR").DecryptionError){var e=t;o("MediaServiceLogger").MediaServiceLogger().mustfix("EAR decryption error in store: %s. Dropping corrupted entity %s",e.store,e.maybeHashedPk),d.runInTransaction([e.store],"readwrite",function(t){var n=t.stores[e.store];return e.maybeHashedPk!=null?n.delete(e.maybeHashedPk):n.clear()},"delete-corrupted-entity")}}}),a);return d}function c(e){return new(o("Worm")).WormDatabase(new(o("WormMemoryDriver")).WormMemoryDriver(s),e)}l.SCHEMA=s,l.makeSchema=u,l.makeInMemorySchema_TEST_ONLY=c}),98);
__d("WmiMediaServiceDb",["MediaServiceLogger","WAResolvable","WmiMediaServiceSchema","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("WAResolvable")).Resolvable;async function u(t){try{var n=o("WmiMediaServiceSchema").makeSchema(t);return e=n,await n.init(),s.resolve(n),n}catch(e){throw o("MediaServiceLogger").MediaServiceLogger().catching(r("getErrorSafe")(e)).mustfix("Error performing Media Service init"),e}}function c(){if(e==null)throw r("err")("DB is not initialized");return e}l.makeMediaServiceDb=u,l.getDb=c}),98);
__d("WmiMediaService",["MpsTypes","WmiChunkApi","WmiMediaServiceDb","err","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e,this.$2=o("WmiChunkApi").getChunkApi()}var t=e.prototype;return t.getChunk=async function(t){var e,n=await this.$2.get(t);return n==null?null:{blobData:n.blobData,isProgressivePreview:(e=n.isProgressivePreview)!=null?e:!1,mimetype:n.mimetype,plaintextHash:n.plaintextHash}},t.getMessageChunkForHash=function(t){return this.$1.runInTransaction(["messageChunk"],"readonly",async function(e){var n=await e.stores.messageChunk.readIndexRange("[plaintextHash+updatedAtMs]",{only:[t]},{limit:1,order:"desc"});return n.at(0)},"WmiGetMessagesForHash")},t.handleMessageDeletion=function(t,n){return this.$3(function(e){return e.stores.messageChunk.readIndexRange("[threadId+messageId+plaintextHash]",{only:[t,n]})})},t.handleThreadDeletion=function(t){return this.$3(function(e){return e.stores.messageChunk.readIndexRange("[threadId+messageId+plaintextHash]",{only:[t]})})},t.storeChunk=function(t){var e=t.blobData,n=t.isProgressivePreview,r=t.mimetype,o=t.plaintextHash;return this.$2.store(o,e,r,n)},t.storeMessageChunks=function(t){return this.$1.runInTransaction(["messageChunk"],"readwrite",async function(e){await e.stores.messageChunk.bulkUpsert("[threadId+messageId+plaintextHash]",t.map(function(e){return{item:{messageId:e.messageId,plaintextHash:e.plaintextHash,threadId:e.threadId,updatedAtMs:o("MpsTypes").toTimestamp(Date.now())},selector:[e.threadId,e.messageId,e.plaintextHash]}}))},"WmiMediaServiceStoreChunkMessage")},t.$3=async function(t){var e=await this.$1.runInTransaction(["messageChunk"],"readwrite",async function(e){var n=await t(e);await e.stores.messageChunk.bulkDelete(n.map(function(e){return e.pk}));var r=new Set(n.map(function(e){return e.plaintextHash})),o=await e.stores.messageChunk.readIndexAnyOf("[plaintextHash+updatedAtMs]",Array.from(r).map(function(e){return[e]}));return o.forEach(function(e){return r.delete(e.plaintextHash)}),Array.from(r)},"WmiMediaServiceDeleteMessageChunkEntries");e.length>0&&await this.$2.delete(Array.from(e))},e})(),s=null;async function u(t){if(s!=null)throw r("err")("Media Service already initialised");var n=await o("WmiMediaServiceDb").makeMediaServiceDb(t);s=new e(n)}function c(){return r("nullthrows")(s,"Media Service not initialised")}function d(){s=null}l.MediaService=e,l.wmiMediaServiceSetup=u,l.mediaService=c,l.wmiMediaServiceClear__TESTONLY=d}),98);
__d("MpsMediaManager",["MAWGetThumbnailBlobDataUrlByMediaIdApi","MpsMediaEntryCache","MpsMessageToBridgeWrapper","MpsToBridgeMessageId","WAIsPreviewSupported","WAJids","WAMediaManager","WAMediaManagerCache","WAMediaUtils","WAResultOrError","WAStanzaUtils","WAValidateMedia","WebMps","WmiMediaService","getErrorSafe","memoize","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=["kind"];function s(e){throw new TypeError('"'+e+'" is read-only')}async function u(e){var t=e.fullSizePlaintextHash,n=e.mediaDownloadFlow,r=o("MpsMediaEntryCache").getEntry(t);if(r!=null)return n.addPoint("media_entry_cache_hit"),r;var a=await o("WmiMediaService").mediaService().getMessageChunkForHash(t);if(a==null){n.addPoint("media_entry_cache_miss",{string:{media_entry_recache_result:"missing_message_chunk"}});return}var i=await o("WebMps").mps().loadMessage({config:{shouldFetchSupplementals:!1,shouldFetchTags:!1,strategy:"local-only"},debug:{purpose:"MpsMediaManager-getEntryWithFallback"},messageId:a.messageId,threadId:a.threadId}),l=i.value;if(l==null){n.addPoint("media_entry_cache_miss",{string:{media_entry_recache_result:"missing_reverb_message"}});return}o("MpsMediaEntryCache").hydrateCache(l.toplevelProtobuf);var s=o("MpsMediaEntryCache").getEntry(t);return s==null?(n.addPoint("media_entry_cache_miss",{string:{media_entry_recache_result:"unable_to_cache"}}),null):(n.addPoint("media_entry_cache_miss",{string:{media_entry_recache_result:"success"}}),s)}async function c(e){var t=o("MpsToBridgeMessageId").bridgeMsgIdToMps(e),n=t.messageId,r=t.threadId,a=await o("WebMps").mps().loadMessage({config:{shouldFetchSupplementals:!1,shouldFetchTags:!1,strategy:"local-first"},debug:{purpose:"mps_media_manager"},messageId:n,threadId:r});if(a.value){var i=o("MpsMessageToBridgeWrapper").MpsMessageToBridgeWrapper.fromTopLevel(a.value.toplevelProtobuf),l=i.getAuthor();if(!o("WAJids").isAuthorSystem(l))return{protocolMsgId:{author:l,chat:i.getChatJid(),externalId:o("WAStanzaUtils").toStanzaId(i.getExternalId())},sortOrderMs:i.message.timestampMs}}}var d=function(t){return o("WAMediaManager").createMediaManager({createCacheState:t,dbCallbacks:{getMediaEntries:function(t){var e=o("MpsMediaEntryCache").getEntry(t);if(e==null)return Promise.resolve(o("WAResultOrError").makeError("no-media-by-plaintext-hash"));var n=e.mediaEntry,r=e.message,a=o("MpsToBridgeMessageId").mpsToBridgeMsgId(r.threadId,r.messageId);return Promise.resolve(o("WAResultOrError").makeResult(new Map([[a,n]])))},getProtocolMsgIdAndSortOrderMs:c}})};function m(e){var t=o("WAIsPreviewSupported").checkPreviewSupport(e.decodedMediaEntry),n=t[0],r=t[1];return(function(t){if(Array.isArray(t)&&t.length===2&&t[0]===o("WAIsPreviewSupported").PjpegPreviewSupport.YES)return{kind:"progressive",thumbnailHash:e.plaintextHash};if(Array.isArray(t)&&t.length===2&&t[1]===o("WAIsPreviewSupported").DownloadablePreviewSupport.YES)return e.thumbnailHash!=null?{kind:"withThumbnail",thumbnailHash:e.thumbnailHash}:{kind:"noPreview"};if(Array.isArray(t)&&t.length===2&&t[1]===o("WAIsPreviewSupported").DownloadablePreviewSupport.DuplicatedWithFullSize)return{kind:"duplicatedWithFullSize",thumbnailHash:e.plaintextHash};if(Array.isArray(t)&&t.length===2&&t[1]===o("WAIsPreviewSupported").DownloadablePreviewSupport.NO)return{kind:"noPreview"};throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t)})([n,r])}async function p(e,t,n){if(e!=null){var r=await o("WAValidateMedia").validateMedia(e,t);if(r.value!=null)return o("WAResultOrError").makeResult({serverMediaType:n,unvalidatedMimeType:o("WAMediaUtils").getMimeTypeFromServerMediaType(n),validatedResult:r.value})}}async function _(e,t,n){var r=await o("WmiMediaService").mediaService().getChunk(e),a=await p(r==null?void 0:r.blobData,t,n);if(!(r==null||a==null))return t.addAnnotations({bool:{from_chunk:!0}}),{chunk:r,result:a}}function f(e,t,n,a){if(n.success===!0){var i;o("WmiMediaService").mediaService().storeChunk({blobData:n.value.validatedResult.validatedPlaintext,isProgressivePreview:a,mimetype:(i=n.value.validatedResult.mimeType)!=null?i:n.value.unvalidatedMimeType,plaintextHash:e}).then(function(){return t.addAnnotations({string:{chunk_store_result:"success"}})}).catch(function(e){var n=r("getErrorSafe")(e).message;t.addAnnotations({string:{chunk_store_result:n}})})}}async function g(e,t,n){var r,a=n.fullSizePlaintextHash,i=n.mediaDownloadFlow;if(e.success||e.error!=="signature-expired")return e;var l=await o("MAWGetThumbnailBlobDataUrlByMediaIdApi").getFullMediaWithPlaintextHash(a);if(l==null)return i.addAnnotations({string:{signature_expired_fallback:"media not found"}}),e;var s=(r=l.validatedAudioInfo)!=null?r:l.validatedVideoInfo,u=s==null?void 0:s.jpegThumbnail;if(u==null)return i.addAnnotations({string:{signature_expired_fallback:"thumbnail not found"}}),e;var c=await o("WAValidateMedia").validateMedia(u,i);return c.value==null?(i.addAnnotations({string:{signature_expired_fallback:"validation failed"}}),e):(i.addAnnotations({string:{signature_expired_fallback:"success"}}),o("WAResultOrError").makeResult({serverMediaType:t.serverMediaType,unvalidatedMimeType:o("WAMediaUtils").getMimeTypeFromServerMediaType("image"),validatedResult:c.value}))}var h=function(n){var t=d(n),a=o("WAMediaManagerCache").createAttachmentCache(c,n),i={clearCache:t.clearCache,dequeueDownload:t.dequeueDownload,enqueueDownloadFullSize:async function(n){n.mediaDownloadFlow.addAnnotations({string:{downloadKind:"fullsize"}});var e=a.getFullsize(n);if(e.type==="cache-hit")return e.cache;var r=await u(n);if(!r)return o("WAResultOrError").makeError("missing-media-entry");var i=await _(n.fullSizePlaintextHash,n.mediaDownloadFlow,r.serverMediaType);if(i!=null&&!i.chunk.isProgressivePreview)return i.result;n.mediaDownloadFlow.addPoint("mps_actual_download");var l=await t.enqueueDownloadFullSize(n);return f(n.fullSizePlaintextHash,n.mediaDownloadFlow,l,!1),l},enqueueDownloadFullSizeAndPreview:function(i){i.mediaDownloadFlow.addAnnotations({string:{downloadKind:"fullsizeAndPreview"}});var n=a.getFullsizeAndPreview(i),l=n.fullsizeCacheResult,s=n.previewCacheResult;if(l.type==="cache-hit"&&s.type==="cache-hit")return{fullsizePromise:l.cache,previewPromise:s.cache};var c=r("memoize")(function(){return u(i)}),d=r("memoize")(async function(){var e=r("nullthrows")(await c()),t=_(i.fullSizePlaintextHash,i.mediaDownloadFlow,e.serverMediaType);return t});i.mediaDownloadFlow.addPoint("mps_actual_download");var p=r("memoize")(function(){return t.enqueueDownloadFullSizeAndPreview(i)});return{fullsizePromise:(async function(){var e=await c();if(e==null)return o("WAResultOrError").makeError("missing-media-entry");var t=await d();if(t!=null&&!t.chunk.isProgressivePreview)return t.result;var n=await p().fullsizePromise;return f(i.fullSizePlaintextHash,i.mediaDownloadFlow,n,!1),n})(),previewPromise:(async function(){var t=await c();if(t==null)return o("WAResultOrError").makeError("missing-media-entry");var n=m(t);if(n.kind==="noPreview")return o("WAResultOrError").makeError("preview-not-supported");var r=await(function(n){if((typeof n=="object"&&n!==null||typeof n=="function")&&n.kind==="duplicatedWithFullSize"||(typeof n=="object"&&n!==null||typeof n=="function")&&n.kind==="progressive")return d();if((typeof n=="object"&&n!==null||typeof n=="function")&&n.kind==="withThumbnail"){var r=n.kind,o=babelHelpers.objectWithoutPropertiesLoose(n,e);return _(o.thumbnailHash,i.mediaDownloadFlow,t.serverMediaType)}throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+n)})(n);if(r!=null)return r.result;var a=await p().previewPromise,l=await g(a,t,i);return n.kind==="withThumbnail"&&f(n.thumbnailHash,i.mediaDownloadFlow,l,!1),l})()}},enqueueDownloadPreview:async function(n){n.mediaDownloadFlow.addAnnotations({string:{downloadKind:"preview"}});var e=a.getPreview(n);if(e.type==="cache-hit")return e.cache;var r=await u(n);if(r==null)return o("WAResultOrError").makeError("missing-media-entry");var i=m(r),l=i.kind==="progressive";if(i.kind==="noPreview")return o("WAResultOrError").makeError("preview-not-supported");var s=i.thumbnailHash,c=await _(s,n.mediaDownloadFlow,r.serverMediaType);if(c!=null)return c.result;n.mediaDownloadFlow.addPoint("mps_actual_download");var d=await t.enqueueDownloadPreview(n),p=await g(d,r,n);return f(s,n.mediaDownloadFlow,p,l),p},enqueueUploadFullSize:function(){return t.enqueueUploadFullSize.apply(t,arguments)}};return i};l.getMpsMediaManager=h}),98);
__d("MpsFutureProofKey",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({WCEPlaintextPayloadFutureProofPlaceholder:0,WCEPlaintextPayloadFutureProofNoPlaceholder:1,WCEPlaintextPayloadFutureProofIgnore:2});i.WCEPlaintextPayloadFutureProof=e}),66);
__d("WABuildMpsPayload",["MpsFutureProofKey","MpsTypes","WAArmadilloBackupMessage.pb","WAArmadilloMiTransportAdminMessage.pb","WAArmadilloTransportEvent.pb","WAGlobals","WAJids","WALogger","WATimeUtils","encodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){var n=o("WAJids").extractUserId(t.senderJid),r;t.hideDecryptionFailure!=null&&(r=t.hideDecryptionFailure?o("MpsFutureProofKey").WCEPlaintextPayloadFutureProof.WCEPlaintextPayloadFutureProofNoPlaceholder:o("MpsFutureProofKey").WCEPlaintextPayloadFutureProof.WCEPlaintextPayloadFutureProofPlaceholder);var a=o("encodeProtobuf").encodeProtobuf(o("WAArmadilloBackupMessage.pb").BackupMessageSpec,babelHelpers.extends({},e,{metadata:{frankingMetadata:{frankingTag:t.frankingTag,reportingTag:t.reportingTag},messageId:t.externalId,payloadVersion:2,senderId:n,futureProofBehavior:r,timestampMs:t.timestampMs}})).readBuffer();return a}function d(e,t){var n=o("WAJids").extractUserId(t.senderJid),r=o("MpsTypes").toThreadId(t.threadId),a=t.millisServerTs!=null?t.millisServerTs:t.serverTs*1e3+o("WAGlobals").getDependencies().extractMsFromStanzaId(t.externalId),i=c(e,{senderJid:t.senderJid,externalId:t.externalId,frankingTag:t.frankingTag,reportingTag:t.reportingTag,hideDecryptionFailure:t.hideDecryptionFailure,threadId:t.threadId,timestampMs:o("MpsTypes").toTimestamp(a)});return{messageId:o("MpsTypes").toMessageId(t.externalId),payload:o("MpsTypes").toBytes(i),senderId:n,threadId:r,timestampMs:o("MpsTypes").toTimestamp(a)}}function m(t,n,r){try{var a={};switch(r.type){case"message":a={encryptedTransportMessage:r.applicationPayload};break;case"ciphertext":a={encryptedTransportEvent:{payload:o("encodeProtobuf").encodeProtobuf(o("WAArmadilloTransportEvent.pb").TransportEventSpec,{placeholder:{type:o("WAArmadilloTransportEvent.pb").TransportEvent$Placeholder$Type.DECRYPTION_FAILURE}}).readBuffer(),version:3}};break;case"unavailable":a={encryptedTransportEvent:{payload:o("encodeProtobuf").encodeProtobuf(o("WAArmadilloTransportEvent.pb").TransportEventSpec,{placeholder:{type:o("WAArmadilloTransportEvent.pb").TransportEvent$Placeholder$Type.DECRYPTION_FAILURE}}).readBuffer(),version:3}};break;default:r.type}return d(a,{senderJid:o("WAJids").extractUserJid(n.from),externalId:t.stanzaId,serverTs:t.serverTs,frankingTag:t.frankingTag,reportingTag:t.reportingTag,hideDecryptionFailure:t.hideDecryptionFailure,threadId:n.chat})}catch(t){return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["buildMpsMessagePayload: ",""])),t),null}}function p(e,t,n){if(n.payload==null)return o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["buildMpsAppdataPayload: No appdata payload"]))),null;try{return d({encryptedTransportMessage:n.payload},{senderJid:o("WAJids").extractUserJid(e.from),externalId:e.stanzaId,serverTs:t,threadId:o("WAJids").extractUserJid(e.from)})}catch(e){return o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["buildMpsAppdataPayload: ",""])),e),null}}function _(e,t,n,r,a){var i={payload:o("encodeProtobuf").encodeProtobuf(o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessageSpec,{groupMembershipAddModeChanged:{mode:n}}).readBuffer(),version:3};return d({miTransportAdminMessage:i},{serverTs:r!=null?r:o("WATimeUtils").unixTime(),externalId:a,hideDecryptionFailure:!1,senderJid:t,threadId:e})}function f(e,t,n,r,a,i){var l={payload:o("encodeProtobuf").encodeProtobuf(o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessageSpec,{groupAdminChanged:{targetUserId:n.map(o("WAJids").extractUserId),action:r}}).readBuffer(),version:3};return d({miTransportAdminMessage:l},{serverTs:a!=null?a:o("WATimeUtils").unixTime(),externalId:i,hideDecryptionFailure:!1,senderJid:t,threadId:e})}function g(e,t,n,r,a,i){var l={payload:o("encodeProtobuf").encodeProtobuf(o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessageSpec,{groupParticipantChanged:{targetUserId:n.map(o("WAJids").extractUserId),action:r}}).readBuffer(),version:3};return d({miTransportAdminMessage:l},{serverTs:a!=null?a:o("WATimeUtils").unixTime(),externalId:i,hideDecryptionFailure:!1,senderJid:t,threadId:e})}function h(e,t,n,r,a){var i={payload:o("encodeProtobuf").encodeProtobuf(o("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessageSpec,{groupNameChanged:{groupName:n}}).readBuffer(),version:3};return d({miTransportAdminMessage:i},{serverTs:r!=null?r:o("WATimeUtils").unixTime(),externalId:a,hideDecryptionFailure:!1,senderJid:t,threadId:e})}function y(e,t,n){var r={payload:o("encodeProtobuf").encodeProtobuf(o("WAArmadilloTransportEvent.pb").TransportEventSpec,{event:{icdcAlert:{type:o("WAArmadilloTransportEvent.pb").TransportEvent$Event$IcdcAlert$Type.DETECTED}}}).readBuffer(),version:3};return d({encryptedTransportEvent:r},{serverTs:t!=null?t:o("WATimeUtils").unixTime(),externalId:n,hideDecryptionFailure:!1,senderJid:e,threadId:e})}function C(e,t,n,r,a,i){var l={payload:o("encodeProtobuf").encodeProtobuf(o("WAArmadilloTransportEvent.pb").TransportEventSpec,{event:{deviceChange:{type:r,devicePlatform:a,deviceModel:i}}}).readBuffer(),version:3};return d({encryptedTransportEvent:l},{serverTs:t!=null?t:o("WATimeUtils").unixTime(),externalId:n,hideDecryptionFailure:!1,senderJid:e,threadId:e})}l.buildBackupProtobufBytes=c,l.buildMpsMessage=d,l.buildMpsMessageFromIncomingMessage=m,l.buildMpsAppdataPayload=p,l.buildMpsGroupMemberAddType=_,l.buildMpsGroupAdminChangedMsg=f,l.buildMpsGroupParticipantsChanged=g,l.buildMpsGroupNameChangedMsg=h,l.buildMpsIcdcAdminMessage=y,l.buildMpsDeviceChangeAdminMessage=C}),98);/*FB_PKG_DELIM*/
__d("AsyncStorage",["Promise","WebAsyncStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s={getItem:function(o,a){return new(e||(e=n("Promise")))(function(e,t){r("WebAsyncStorage").getItem(o,function(n,r){a&&a(n,r),n!=null?t(n):e(r)})})},removeItem:function(o,a){return new(e||(e=n("Promise")))(function(e,t){r("WebAsyncStorage").removeItem(o,function(n){a&&a(n),n!=null?t(n):e()})})},setItem:function(o,a,i){return new(e||(e=n("Promise")))(function(e,t){r("WebAsyncStorage").setItem(o,a,function(n){i&&i(n),n!=null?t(n):e()})})}},u=s;l.default=u}),98);
__d("useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef,m=s.useState;function p(e,t){var n=o("react-compiler-runtime").c(9),r=e.dataSource,a=t===void 0?!1:t,i=m(a),l=i[0],s=i[1],u=d(null),p;n[0]!==r?(p=function(t){var e,n=t.onResolvePayload,o=t.requestParams;(e=u.current)==null||e.unsubscribe(),u.current=r.fetchNetwork(o).subscribe({complete:function(){s(!1)},error:function(t){s(!1)},next:function(t){return n(t)},start:function(t){s(!0)},unsubscribe:function(){s(!1)}})},n[0]=r,n[1]=p):p=n[1];var _=p,f,g;n[2]===Symbol.for("react.memo_cache_sentinel")?(f=function(){return(function(){var e;(e=u.current)==null||e.unsubscribe()})},g=[],n[2]=f,n[3]=g):(f=n[2],g=n[3]),c(f,g);var h;n[4]!==l?(h={isLoading:l},n[4]=l,n[5]=h):h=n[5];var y;return n[6]!==_||n[7]!==h?(y=[h,_],n[6]=_,n[7]=h,n[8]=y):y=n[8],y}l.default=p}),98);
__d("useBaseTypeaheadSubscriptionDataSourceFetchResolver",["FBLogger","cometTypeaheadODSLogFetchNetworkEvent","react","react-compiler-runtime","useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork","useDebouncedComet"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef;function m(e,t){var n=o("react-compiler-runtime").c(17),a=e.dataSource,i=e.dataSourceFetchConfigParams,l=e.onResolvePayload,s;n[0]!==i?(s=i===void 0?{}:i,n[0]=i,n[1]=s):s=n[1];var u=s,m=u.requestFlow,p=u.shouldDebounceNetwork,_=p===void 0?!0:p,f;n[2]!==a?(f={dataSource:a},n[2]=a,n[3]=f):f=n[3];var g=r("useBaseTypeaheadSubscriptionDataSourceFetchResolverNetwork")(f),h=g[0],y=g[1],C=h.isLoading,b=r("useDebouncedComet")(y),v;n[4]!==l?(v=function(t,n){var e=n.isTraceComplete,o=n.source;try{l(t,{isTraceComplete:e,source:o})}catch(e){r("FBLogger")("search").mustfix("Failed to resolve fetched payload")}return o},n[4]=l,n[5]=v):v=n[5];var S=v,R=d(m),L;n[6]!==S?(L=function(t){S(t,{isTraceComplete:!0,source:t.entries.length>0?"network":"network-no-results"}),r("cometTypeaheadODSLogFetchNetworkEvent")&&r("cometTypeaheadODSLogFetchNetworkEvent")("comet.ta.fetch",!0,1)},n[6]=S,n[7]=L):L=n[7];var E=L,k,I;n[8]!==y||n[9]!==b||n[10]!==t||n[11]!==E||n[12]!==_?(k=function(){var e=function(t){var e=t.requestParams,n=e.requestFlow;n!=null&&(R.current=n);var r={onResolvePayload:E,requestParams:babelHelpers.extends({},e,{requestFlow:R.current})};_?b(r):y(r)};t!=null&&e(t)},I=[y,b,t,E,_],n[8]=y,n[9]=b,n[10]=t,n[11]=E,n[12]=_,n[13]=k,n[14]=I):(k=n[13],I=n[14]),c(k,I);var T;return n[15]!==C?(T=[{isLoading:C}],n[15]=C,n[16]=T):T=n[16],T}l.default=m}),98);
__d("useBaseTypeaheadSubscriptionDataSourceFetch",["FBLogger","react","react-compiler-runtime","useBaseTypeaheadSubscriptionDataSourceFetchResolver"],(function(t,n,r,o,a,i,l){"use strict";var e=["loggingEventTrace"],s,u=s||(s=o("react")),c=u.useCallback,d=u.useState;function m(t){var n,a=o("react-compiler-runtime").c(9),i=d(null),l=i[0],s=i[1],u=r("useBaseTypeaheadSubscriptionDataSourceFetchResolver")(t,l),c=u[0],m=c.isLoading,p;a[0]===Symbol.for("react.memo_cache_sentinel")?(p=function(t,n){var e=n===void 0?"all":n;s({requestParams:t,source:e})},a[0]=p):p=a[0];var _=p,f;a[1]!==l?(f=function(n){var t=n||{},o=t.requestFlow,a=t.source;if(l==null){r("FBLogger")("search").mustfix("Refetch cannot be called with undefined `fetchParams`");return}var i=l.requestParams,s=i.loggingEventTrace,u=babelHelpers.objectWithoutPropertiesLoose(i,e),c=babelHelpers.extends({loggingEventTrace:babelHelpers.extends({},s,{sequenceID:String(Date.now())}),requestFlow:o},u);_(c,a)},a[1]=l,a[2]=f):f=a[2];var g=f,h=(n=l==null?void 0:l.source)!=null?n:"all",y;a[3]!==m||a[4]!==h?(y={isLoading:m,source:h},a[3]=m,a[4]=h,a[5]=y):y=a[5];var C;return a[6]!==g||a[7]!==y?(C=[y,_,g],a[6]=g,a[7]=y,a[8]=C):C=a[8],C}l.default=m}),98);
__d("TypeaheadLoggingFetchRequestFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1880031"),s=o("FalcoLoggerInternal").create("typeahead_logging_fetch_request",e),u=s;l.default=u}),98);
__d("CometTypeaheadVolumeLoggingProvider",["FBLogger","TypeaheadLoggingFetchRequestFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){return Math.random().toString()},s=(function(){function t(t){this.$2=null,this.$1=t,this.$2=e()}var n=t.prototype;return n.getContext=function(){return this.$1},n.getSessionID=function(){return this.$2==null&&r("FBLogger")("search").mustfix("Logging sessionID requested from %s surface does not exist.",this.getContext()),this.$2},n.logRequest=function(t){var e={context:this.getContext(),requestType:t,sessionID:this.getSessionID()};r("TypeaheadLoggingFetchRequestFalcoEvent").log(function(){return{fetchRequest:e}})},t})();l.default=s}),98);
__d("useCometTypeaheadVolumeLoggingProvider",["CometTypeaheadVolumeLoggingProvider","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(e){var t=o("react-compiler-runtime").c(2),n=e===void 0?"UNKNOWN":e,a;return t[0]!==n?(a=new(r("CometTypeaheadVolumeLoggingProvider"))(n),t[0]=n,t[1]=a):a=t[1],a}l.default=u}),98);
__d("CometInternalTypeaheadSubscriptionProvider",["CometInternalTypeaheadEmptyFetchProvider","CometInternalTypeaheadFetchContext","react","useBaseTypeaheadSubscriptionDataSourceFetch","useCometInternalTypeaheadStateDispatcher","useCometTypeaheadVolumeLoggingProvider"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useMemo;function m(e){var t=e.children,n=e.dataSource,o=e.dataSourceFetchConfigParams,a=e.loggingContext,i=e.onFetchEntries_DO_NOT_USE,l=e.traceProvider,u=r("useCometInternalTypeaheadStateDispatcher")(),m=u.dispatchActiveEntries,p=r("useCometTypeaheadVolumeLoggingProvider")(a),_=r("useBaseTypeaheadSubscriptionDataSourceFetch")({dataSource:n,dataSourceFetchConfigParams:o,onResolvePayload:c(function(e,t){var n=e.entries,r=t.isTraceComplete,o=t.source;m(n!=null?n:[]),p.logRequest(h),i&&i(n),l&&!l.isResolved()&&r&&(o==="cache"&&n.length>=l.getEntriesCountForVisualComplete()?l.setEndReason("max_suggestions_reached"):o==="network"?l.setEndReason("all_queries_completed"):o==="network-no-results"&&l.setEndReason("all_queries_completed_no_network_results"),l.resolve())},[m,i,l])}),f=_[0],g=f.isLoading,h=f.source,y=_[1],C=_[2],b=d(function(){return{fetch:y,isLoading:g,refetch:C,source:h}},[y,g,C,h]);return s.jsx(r("CometInternalTypeaheadFetchContext").Provider,{value:b,children:s.jsx(r("CometInternalTypeaheadEmptyFetchProvider"),{isLoading:g,source:h,children:t})})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("BaseSubscriptionTypeahead.react",["CometHeroInteractionContextPassthrough.react","CometInternalTypeahead.react","CometInternalTypeaheadStateProvider","CometInternalTypeaheadSubscriptionProvider","emptyFunction","react","react-compiler-runtime","withCometTypeaheadInputStrategyShouldQueryStringFollowHighlightedEntry"],(function(t,n,r,o,a,i,l){"use strict";var e=["autoOpen","autoFocus","isDisabled","errorMessage","inputStrategyRenderer","dataSource","dataSourceFetchConfigParams","decorators","emptyEntries_DO_NOT_USE","id","label","loggingContext","onBackspace","onBlur","onChange","onClose","onEnter","onEscape","onFetchEntries_DO_NOT_USE","onFocus","onOpen","onPressEntry","placeholder","shouldQueryStringFollowHighlightedEntry","shouldQueryStringUpdateFromSelectedEntryOnClick","testid","traceProvider","inputRef","viewRole","viewStrategyRenderer"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useId,p=c.useMemo;function _(t){var n=o("react-compiler-runtime").c(77),a,i,l,s,c,d,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P,N,M,w,A,F;n[0]!==t?(y=t.autoOpen,T=t.autoFocus,D=t.isDisabled,x=t.errorMessage,a=t.inputStrategyRenderer,l=t.dataSource,s=t.dataSourceFetchConfigParams,$=t.decorators,c=t.emptyEntries_DO_NOT_USE,_=t.id,P=t.label,p=t.loggingContext,N=t.onBackspace,M=t.onBlur,f=t.onChange,w=t.onClose,C=t.onEnter,b=t.onEscape,g=t.onFetchEntries_DO_NOT_USE,v=t.onFocus,S=t.onOpen,h=t.onPressEntry,R=t.placeholder,L=t.shouldQueryStringFollowHighlightedEntry,E=t.shouldQueryStringUpdateFromSelectedEntryOnClick,k=t.testid,A=t.traceProvider,d=t.inputRef,I=t.viewRole,i=t.viewStrategyRenderer,F=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=d,n[7]=p,n[8]=_,n[9]=f,n[10]=g,n[11]=h,n[12]=y,n[13]=C,n[14]=b,n[15]=v,n[16]=S,n[17]=R,n[18]=L,n[19]=E,n[20]=k,n[21]=I,n[22]=T,n[23]=D,n[24]=x,n[25]=$,n[26]=P,n[27]=N,n[28]=M,n[29]=w,n[30]=A,n[31]=F):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],d=n[6],p=n[7],_=n[8],f=n[9],g=n[10],h=n[11],y=n[12],C=n[13],b=n[14],v=n[15],S=n[16],R=n[17],L=n[18],E=n[19],k=n[20],I=n[21],T=n[22],D=n[23],x=n[24],$=n[25],P=n[26],N=n[27],M=n[28],w=n[29],A=n[30],F=n[31]);var O=y===void 0?!1:y,B=T===void 0?!1:T,W=D===void 0?!1:D,q=x===void 0?null:x,U;n[32]!==$?(U=$===void 0?[]:$,n[32]=$,n[33]=U):U=n[33];var V=U,H=P===void 0?"":P,G=N===void 0?r("emptyFunction"):N,z=M===void 0?r("emptyFunction"):M,j=w===void 0?r("emptyFunction"):w,K=C===void 0?r("emptyFunction"):C,Q=b===void 0?r("emptyFunction"):b,X=v===void 0?r("emptyFunction"):v,Y=S===void 0?r("emptyFunction"):S,J=R===void 0?"":R,Z=L===void 0?!0:L,ee=E===void 0?!0:E,te=k===void 0?"":k,ne=I===void 0?"listbox":I,re=m(),oe;n[34]!==V?(oe=r("CometInternalTypeahead.react"),V.forEach(function(e){var t=e.decorate,n=e.params;oe=t(oe,n)}),n[34]=V,n[35]=oe):oe=n[35];var ae=oe,ie;n[36]!==f||n[37]!==h||n[38]!==ee?(ie=function(t){ee&&f(t.label),h&&h(t)},n[36]=f,n[37]=h,n[38]=ee,n[39]=ie):ie=n[39];var le=ie,se;n[40]!==a||n[41]!==Z?(se=r("withCometTypeaheadInputStrategyShouldQueryStringFollowHighlightedEntry")(a,{shouldQueryStringFollowHighlightedEntry:Z}),n[40]=a,n[41]=Z,n[42]=se):se=n[42];var ue=se,ce=H||J,de=_!=null?_:re,me;if(n[43]!==ue||n[44]!==ae||n[45]!==i||n[46]!==B||n[47]!==q||n[48]!==d||n[49]!==G||n[50]!==z||n[51]!==K||n[52]!==Q||n[53]!==X||n[54]!==le||n[55]!==W||n[56]!==f||n[57]!==J||n[58]!==ce||n[59]!==de||n[60]!==te||n[61]!==F||n[62]!==ne){var pe;me=u.jsx(ae,babelHelpers.extends({},F,{autoFocus:B,errorMessage:q,id:de,inputRef:d,inputStrategyRenderer:ue,isDisabled:W,label:ce,onBackspace:G,onBlur:z,onChange:f,onDownArrow:pe=r("emptyFunction"),onEnter:K,onEscape:Q,onFocus:X,onHighlightEntry:pe,onPressEntry:le,onShiftTab:pe,onTab:pe,onUpArrow:pe,placeholder:J,testid:void 0,viewRole:ne,viewStrategyRenderer:i})),n[43]=ue,n[44]=ae,n[45]=i,n[46]=B,n[47]=q,n[48]=d,n[49]=G,n[50]=z,n[51]=K,n[52]=Q,n[53]=X,n[54]=le,n[55]=W,n[56]=f,n[57]=J,n[58]=ce,n[59]=de,n[60]=te,n[61]=F,n[62]=ne,n[63]=me}else me=n[63];var _e;n[64]!==l||n[65]!==s||n[66]!==p||n[67]!==g||n[68]!==me||n[69]!==A?(_e=u.jsx(r("CometInternalTypeaheadSubscriptionProvider"),{dataSource:l,dataSourceFetchConfigParams:s,loggingContext:p,onFetchEntries_DO_NOT_USE:g,traceProvider:A,children:me}),n[64]=l,n[65]=s,n[66]=p,n[67]=g,n[68]=me,n[69]=A,n[70]=_e):_e=n[70];var fe;return n[71]!==O||n[72]!==c||n[73]!==j||n[74]!==Y||n[75]!==_e?(fe=u.jsx(r("CometHeroInteractionContextPassthrough.react"),{clear:!0,children:u.jsx(r("CometInternalTypeaheadStateProvider"),{autoOpen:O,emptyEntries_DO_NOT_USE:c,onClose:j,onOpen:Y,children:_e})}),n[71]=O,n[72]=c,n[73]=j,n[74]=Y,n[75]=_e,n[76]=fe):fe=n[76],fe}l.default=_}),98);
__d("CancellablePromise",["Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s="CancellationToken.TokenCancelled";function u(t,o,a){return a.then(function(a){return t.isCancelled()?(e||(e=n("Promise"))).reject(r("err")(s)):o(a)})}function c(t,o){return o.catch(function(o){return o instanceof Error&&o.message===s?(e||(e=n("Promise"))).resolve(t):(e||(e=n("Promise"))).reject(r("err"))})}l.then_=u,l.ignoreFailed=c}),98);
__d("CancellationToken",[],(function(t,n,r,o,a,i){"use strict";function e(){var e={contents:!1};return{cancel:function(){e.contents=!0},isCancelled:function(){return e.contents}}}i.default=e}),66);
__d("MWTopNavListDropdownTitle.react",["fbt","BaseHeading.react","Locale","MWXCircleButton.react","MWXIconArrowLeft","MWXIconArrowRight","MWXRow.react","MWXRowItem.react","MWXText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=[];function d(e){var t=o("react-compiler-runtime").c(16),n=e.actions,a=e.onReturn,i=e.testid,l=e.title,d=n===void 0?c:n,p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p={className:"x6s0dn4 x78zum5 x2lah0s x1qughib x21xpn4 x1whwgri x1hndj7l xdwfu72 xnx504b"},t[0]=p):p=t[0];var _;t[1]!==a?(_=a!=null?u.jsx(r("MWXRowItem.react"),{children:u.jsx(r("MWXCircleButton.react"),{"aria-label":s._(/*BTDS*/"Back"),icon:o("Locale").isRTL()?r("MWXIconArrowRight"):r("MWXIconArrowLeft"),iconRatio:"large",onPress:a,size:32,type:"deemphasized"})}):null,t[1]=a,t[2]=_):_=t[2];var f;t[3]!==l?(f=u.jsx(r("MWXRowItem.react"),{verticalAlign:"center",children:u.jsx(r("BaseHeading.react"),{isPrimaryHeading:!0,children:u.jsx(r("MWXText.react"),{type:"headlineEmphasized1",children:l})})}),t[3]=l,t[4]=f):f=t[4];var g;t[5]!==_||t[6]!==f?(g=u.jsxs(r("MWXRow.react"),{paddingHorizontal:0,paddingTop:0,spacingHorizontal:8,children:[_,f]}),t[5]=_,t[6]=f,t[7]=g):g=t[7];var h;t[8]!==d?(h=d.map(m),t[8]=d,t[9]=h):h=t[9];var y;t[10]!==h?(y=u.jsx(r("MWXRow.react"),{paddingHorizontal:0,paddingTop:0,spacingHorizontal:8,children:h}),t[10]=h,t[11]=y):y=t[11];var C;return t[12]!==g||t[13]!==y||t[14]!==i?(C=u.jsxs("header",babelHelpers.extends({},p,{"data-testid":void 0,children:[g,y]})),t[12]=g,t[13]=y,t[14]=i,t[15]=C):C=t[15],C}function m(e,t){return u.jsx(r("MWXRowItem.react"),{children:e},t)}m.displayName=m.name+" [from "+i.id+"]",l.default=d}),226);
__d("CometMessagingJewelDropdownContentGlimmer.react",["FDSListCellGlimmer.react","MWTopNavListDropdownTitle.react","emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(9),n=e.isFullHeight,a=e.title,i=e.withBackButton,l=n===void 0?!1:n,u=i===void 0?!1:i,c;t[0]!==l?(c={0:{},1:{className:"x9f619 x20eyyc xvv7f4i x1cvmir6"}}[!!l<<0],t[0]=l,t[1]=c):c=t[1];var d;t[2]!==a||t[3]!==u?(d=a!=null&&s.jsx(r("MWTopNavListDropdownTitle.react"),{onReturn:u?r("emptyFunction"):void 0,title:a}),t[2]=a,t[3]=u,t[4]=d):d=t[4];var m;t[5]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx(r("FDSListCellGlimmer.react"),{imageSize:56,imageStyle:"circle",numberOfItems:Math.max(Math.ceil((window.innerHeight-72-45)/76),1)}),t[5]=m):m=t[5];var p;return t[6]!==c||t[7]!==d?(p=s.jsxs("div",babelHelpers.extends({},c,{children:[d,m]})),t[6]=c,t[7]=d,t[8]=p):p=t[8],p}l.default=u}),98);
__d("CometMessagingJewelDropdownEBUpsellContainerQuery.graphql",["CometMessagingJewelDropdownEBUpsellContainerQuery_facebookRelayOperation","MWEBNewUserOnboardingShouldLoadUpsells.relayprovider","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometMessagingJewelDropdownEBUpsellContainerQuery",selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsJewelNuxWrapper_query"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometMessagingJewelDropdownQPBannerContainer_viewer"}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider"}],kind:"Operation",name:"CometMessagingJewelDropdownEBUpsellContainerQuery",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null},e],storageKey:null},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'},e,t],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[r,{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_auto_eb_upsells",plural:!1,selections:[t],storageKey:null},{condition:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_new_user_onboarding_upsells",plural:!1,selections:[{args:null,documentName:"MWEncryptedBackupsJewelNuxWrapper_query",fragmentName:"MWEBNewUserOnboardingThreadListUpsellWrapper_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null}]},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]},{alias:"jewel_qp",args:[{kind:"Literal",name:"surface_nux_id",value:8439},{kind:"Literal",name:"trigger",value:"MESSAGING_JEWEL_OPEN"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"7v0g"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[t,{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMWXCardRendererStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometQuickPromotionMWXCardRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"7v0g")'}],storageKey:null},e],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:8439,trigger:"MESSAGING_JEWEL_OPEN")'}],storageKey:null},{if:null,kind:"Defer",label:"MWEncryptedBackupsJewelNuxWrapper_query$defer$MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query",selections:[{if:null,kind:"Defer",label:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query$defer$MWEncryptedBackupsThreadListRestoreQPWrapper_query",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[r,{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null},e],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"qp_with_pin_state",storageKey:null}]}],storageKey:null}]}]}]},params:{id:n("CometMessagingJewelDropdownEBUpsellContainerQuery_facebookRelayOperation"),metadata:{},name:"CometMessagingJewelDropdownEBUpsellContainerQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider:n("MWEBNewUserOnboardingShouldLoadUpsells.relayprovider")}}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("CometMessagingJewelDropdownQPBannerContainer_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometMessagingJewelDropdownQPBannerContainer_viewer",selections:[{alias:"jewel_qp",args:[{kind:"Literal",name:"surface_nux_id",value:8439},{kind:"Literal",name:"trigger",value:"MESSAGING_JEWEL_OPEN"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"7v0g"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMWXCardRendererStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometQuickPromotionMWXCardRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"7v0g")'}],storageKey:null}],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:8439,trigger:"MESSAGING_JEWEL_OPEN")'}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("CometMessagingJewelDropdownQPBannerContainer.react",["CometMessagingJewelDropdownQPBannerContainer_viewer.graphql","CometMessagingJewelDropdownQPBannerPlaceholder.react","CometPageletWithDiv.react","CometQuickPromotionLoggerContext.react","CometRelay","react","react-compiler-runtime","useQuickPromotionFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a,i,l=o("react-compiler-runtime").c(9),s=t.viewer,c=o("CometRelay").useFragment(e!==void 0?e:e=n("CometMessagingJewelDropdownQPBannerContainer_viewer.graphql"),s),m;l[0]===Symbol.for("react.memo_cache_sentinel")?(m={context_surface_id:8439,context_trigger:"messaging_jewel_open"},l[0]=m):m=l[0];var p=r("useQuickPromotionFalcoEvent")(m),_;if(l[1]!==(c==null||(a=c.jewel_qp)==null?void 0:a.nodes)){var f,g;_=c==null||(f=c.jewel_qp)==null||(f=f.nodes)==null?void 0:f.find(d),l[1]=c==null||(g=c.jewel_qp)==null?void 0:g.nodes,l[2]=_}else _=l[2];var h=_,y=h==null||(i=h.comet_qp_sections)==null?void 0:i.renderer_strategy;if(y==null)return null;var C;l[3]===Symbol.for("react.memo_cache_sentinel")?(C=u.jsx(r("CometMessagingJewelDropdownQPBannerPlaceholder.react"),{}),l[3]=C):C=l[3];var b;l[4]!==y?(b=u.jsx(o("CometRelay").MatchContainer,{match:y}),l[4]=y,l[5]=b):b=l[5];var v;return l[6]!==p||l[7]!==b?(v=u.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:C,name:"CometMessagingJewelDropdownQPBannerContainer",children:u.jsx(r("CometQuickPromotionLoggerContext.react").Provider,{value:p,children:b})}),l[6]=p,l[7]=b,l[8]=v):v=l[8],v}function d(e){var t;return((t=e.comet_qp_sections)==null?void 0:t.renderer_strategy)!=null}l.default=c}),98);
__d("MWEncryptedBackupsJewelNuxWrapperDeferred.react",["deferredLoadComponent","react","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWEncryptedBackupsJewelNuxWrapper.react").__setRef("MWEncryptedBackupsJewelNuxWrapperDeferred.react"));function c(e){return s.jsx(u,babelHelpers.extends({},e))}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("MWInboxQuickPromotionWrapper.react",["CometErrorBoundary.react","CometPageletWithDiv.react","deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MAWUserVisibleErrorsNuxWrapper.react").__setRef("MWInboxQuickPromotionWrapper.react"));function c(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.onError,i;t[0]!==n?(i=s.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWInboxQuickPromotionWrapper",children:s.jsx(u,{children:n})}),t[0]=n,t[1]=i):i=t[1];var l;return t[2]!==a||t[3]!==i?(l=s.jsx(r("CometErrorBoundary.react"),{onError:a,children:i}),t[2]=a,t[3]=i,t[4]=l):l=t[4],l}l.default=c}),98);
__d("CometMessagingJewelDropdownEBUpsellContainer.react",["CometMessagingJewelDropdownEBUpsellContainerQuery.graphql","CometMessagingJewelDropdownQPBannerContainer.react","CometRelay","FBLogger","MWEncryptedBackupsJewelNuxWrapperDeferred.react","MWInboxContextSwitcherUtils","MWInboxQuickPromotionWrapper.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(e){var t=o("react-compiler-runtime").c(4),n=e.ebSoftblockUpsell,a=e.ebUpsellContainerQueryRef,i=e.selectedFilterTab,l;return t[0]!==n||t[1]!==a||t[2]!==i?(l=o("MWInboxContextSwitcherUtils").shouldShowEBUpsellFromFilter(i)&&n==null?u.jsx(r("MWInboxQuickPromotionWrapper.react"),{onError:d,children:u.jsx(m,{ebUpsellContainerQueryRef:a})}):null,t[0]=n,t[1]=a,t[2]=i,t[3]=l):l=t[3],l}function d(e){r("FBLogger")("messenger_web_entrypoints").catching(e).mustfix("CometMessagingJewelDropdownQPBannerContainer failed to render")}function m(t){var a=o("react-compiler-runtime").c(5),i=t.ebUpsellContainerQueryRef,l=o("CometRelay").usePreloadedQuery(e!==void 0?e:e=n("CometMessagingJewelDropdownEBUpsellContainerQuery.graphql"),i),s;a[0]!==l.viewer?(s=u.jsx(r("CometMessagingJewelDropdownQPBannerContainer.react"),{viewer:l.viewer}),a[0]=l.viewer,a[1]=s):s=a[1];var c;return a[2]!==l||a[3]!==s?(c=u.jsx(r("MWEncryptedBackupsJewelNuxWrapperDeferred.react"),{query:l,children:s}),a[2]=l,a[3]=s,a[4]=c):c=a[4],c}l.default=c}),98);
__d("MWInboxContextSwitcherDeferred.react",["deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWInboxContextSwitcher.react").__setRef("MWInboxContextSwitcherDeferred.react"));function c(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=s.jsx(u,babelHelpers.extends({},e)),t[0]=e,t[1]=n):n=t[1],n}l.default=c}),98);
__d("MWInboxContextSwitcherGlimmer.react",["MDSGlimmer.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={tabPlaceholder:{borderStartStartRadius:"x1xn7y0n",borderStartEndRadius:"x1uxb8k9",borderEndEndRadius:"x1vmbcc8",borderEndStartRadius:"x16xm01d",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0}};function c(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx("div",{className:"x78zum5 xu0aao5 x1y1aw1k xwib8y2 xf7dkkf xv54qhq x3bhodz",children:s.jsx(r("MDSGlimmer.react"),{index:0,xstyle:u.tabPlaceholder})}),e[0]=t):t=e[0],t}l.default=c}),98);
__d("useMWJewelSettingsButtonBadge",["cr:4042","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e,t=(e=n("cr:4042")==null?void 0:n("cr:4042")())!=null?e:{},r=t.badge,o=r===void 0?null:r;return{badge:o,onButtonPress:function(){}}}l.default=u}),98);
__d("MWJewelDropdownHeader.react",["fbt","CometHomeChatSettings.entrypoint","FDSCircleButton.react","FDSComposeFilled16Icon","FDSDots3HorizontalFilled20Icon","FDSEntryPointPopoverTrigger.react","FDSTooltip.react","LSThreadAttributionStore","MWJewelDropdownHeaderSeeAllButton.react","MWJewelPopoverDialogContext.react","MWPSearchSystem","MWTopNavListDropdownTitle.react","MessengerWebUXLogger","emptyFunction","react","react-compiler-runtime","useCometPreloader","useMWChatOpenNewTab","useMWJewelSettingsButtonBadge","useMWNewChatTabContainerPreload","useReStore","useShouldShowMessagingEntrypointInCometRoot"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useContext;function _(e){var t=o("react-compiler-runtime").c(13),n=e.onOpenArchivedChats,a=e.onOpenMessageRequests,i=e.onOpenRestrictedAccountsList,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=s._(/*BTDS*/"Options"),t[0]=l):l=t[0];var u=l,d=p(r("MWJewelPopoverDialogContext.react")),m=d.setIsOpenForDialog,_=r("useMWJewelSettingsButtonBadge")(),f=_.badge,g=_.onButtonPress,h;t[1]===Symbol.for("react.memo_cache_sentinel")?(h={},t[1]=h):h=t[1];var y=n!=null?n:void 0,C=a!=null?a:void 0,b=i!=null?i:void 0,v;t[2]!==y||t[3]!==C||t[4]!==b?(v={onOpenArchivedChats:y,onOpenMessageRequests:C,onOpenRestrictedAccountsList:b},t[2]=y,t[3]=C,t[4]=b,t[5]=v):v=t[5];var S;t[6]!==f||t[7]!==g||t[8]!==m?(S=function(t,n,o,a,i,l){return c.jsxs(r("FDSTooltip.react"),{align:"end",tooltip:u,children:[f,c.jsx(r("FDSCircleButton.react"),{"aria-label":u,color_DEPRECATED:"secondary",icon:r("FDSDots3HorizontalFilled20Icon"),onHoverIn:a,onHoverOut:i,onPress:function(){m(!1),n(),g()},onPressIn:l,ref:t,size:32,testid:void 0,type_DEPRECATED:"deemphasized"})]})},t[6]=f,t[7]=g,t[8]=m,t[9]=S):S=t[9];var R;return t[10]!==v||t[11]!==S?(R=c.jsx(r("FDSEntryPointPopoverTrigger.react"),{align:"end",entryPointParams:h,otherProps:v,popoverEntryPoint:r("CometHomeChatSettings.entrypoint"),position:"below",preloadTrigger:"button",children:S}),t[10]=v,t[11]=S,t[12]=R):R=t[12],R}function f(t){var n=o("react-compiler-runtime").c(35),a=t.inboxUrl,i=t.onClose,l=t.onOpenArchivedChats,u=t.onOpenMessageRequests,d=t.onOpenRestrictedAccountsList,m=t.onReturn,p=t.title,f=r("useShouldShowMessagingEntrypointInCometRoot")("CHAT"),g=r("useMWChatOpenNewTab")("jewelNewMessage"),h=r("MessengerWebUXLogger").useInteractionLogger(),y;n[0]!==f||n[1]!==h||n[2]!==i||n[3]!==g?(y=function(){o("LSThreadAttributionStore").setSourceForNewThread("jewelNewMessage"),f&&(g(!1),i()),h==null||h({eventName:"create_thread"})},n[0]=f,n[1]=h,n[2]=i,n[3]=g,n[4]=y):y=n[4];var C=y,b=r("useMWNewChatTabContainerPreload")(),v=b[0],S=b[1],R=(e||(e=r("useReStore")))(),L;n[5]!==R?(L=function(){return o("MWPSearchSystem").makeAll(R)},n[5]=R,n[6]=L):L=n[6];var E=L,k=r("useCometPreloader")("button_aggressive",r("emptyFunction"),E),I=k.onHoverInPreloader,T=k.onHoverMovePreloader,D=k.onHoverOutPreloader,x;n[7]===Symbol.for("react.memo_cache_sentinel")?(x=s._(/*BTDS*/"New message"),n[7]=x):x=n[7];var $=x,P;n[8]!==l||n[9]!==u||n[10]!==d?(P=c.jsx(_,{onOpenArchivedChats:l,onOpenMessageRequests:u,onOpenRestrictedAccountsList:d},"mw-jewel-settings"),n[8]=l,n[9]=u,n[10]=d,n[11]=P):P=n[11];var N;n[12]!==a||n[13]!==i?(N=c.jsx(r("MWJewelDropdownHeaderSeeAllButton.react"),{onClose:i,testid:void 0,url:a},"mw-jewel-see-all-button"),n[12]=a,n[13]=i,n[14]=N):N=n[14];var M;n[15]!==v||n[16]!==I?(M=function(t){v(t),I(t)},n[15]=v,n[16]=I,n[17]=M):M=n[17];var w;n[18]!==S||n[19]!==D?(w=function(){S(),D()},n[18]=S,n[19]=D,n[20]=w):w=n[20];var A;n[21]!==C||n[22]!==E||n[23]!==T||n[24]!==M||n[25]!==w?(A=c.jsx(r("FDSTooltip.react"),{align:"end",tooltip:$,children:c.jsx(r("FDSCircleButton.react"),{"aria-label":$,color_DEPRECATED:"secondary",icon:r("FDSComposeFilled16Icon"),onFocusIn:E,onHoverIn:M,onHoverMove:T,onHoverOut:w,onPress:C,role:"button",size:32,testid:void 0,type_DEPRECATED:"deemphasized"})},"mw-jewel-new-message"),n[21]=C,n[22]=E,n[23]=T,n[24]=M,n[25]=w,n[26]=A):A=n[26];var F;n[27]!==P||n[28]!==N||n[29]!==A?(F=[P,N,A].filter(Boolean),n[27]=P,n[28]=N,n[29]=A,n[30]=F):F=n[30];var O;return n[31]!==m||n[32]!==F||n[33]!==p?(O=c.jsx(r("MWTopNavListDropdownTitle.react"),{actions:F,onReturn:m,title:p}),n[31]=m,n[32]=F,n[33]=p,n[34]=O):O=n[34],O}l.default=f}),226);
__d("MWJewelNestedFolderThreadListHeader.react",["MWTopNavListDropdownTitle.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.onReturn,a=e.title,i;return t[0]!==n||t[1]!==a?(i=s.jsx(r("MWTopNavListDropdownTitle.react"),{onReturn:n,title:a}),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}l.default=u}),98);
__d("MWXListCellStrict.react",["cr:1357","cr:2004","cr:321","cr:3296","cr:6221","cr:842","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var r=o("react-compiler-runtime").c(22),a,i;if(r[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i):(a=r[1],i=r[2]),n("cr:1357")!=null){var l;return r[3]!==a||r[4]!==i?(l=u.jsx(n("cr:1357"),babelHelpers.extends({},a,{ref:i})),r[3]=a,r[4]=i,r[5]=l):l=r[5],l}if(n("cr:321")!=null&&n("cr:6221")!=null&&n("cr:3296")!=null&&n("cr:842")!=null&&n("cr:2004")!=null){var s=a,c=s.addOnStart,d=s.disabled,m=s.headline,p=s.linkProps,_=s.onHoverIn,f=s.onHoverOut,g=s.onPress,h=s.onPressIn,y=s.selected,C=s.testid,b;r[6]!==c||r[7]!==d?(b=c!=null?u.jsx(n("cr:3296"),{addOnStart:c,disabled:d!=null?d:!1}):void 0,r[6]=c,r[7]=d,r[8]=b):b=r[8];var v=b,S;r[9]!==m?(S=u.jsx(n("cr:6221"),{type:"headline4",children:m}),r[9]=m,r[10]=S):S=r[10];var R;return r[11]!==p||r[12]!==_||r[13]!==f||r[14]!==g||r[15]!==h||r[16]!==i||r[17]!==y||r[18]!==S||r[19]!==C||r[20]!==v?(R=u.jsx(n("cr:842"),{paddingHorizontal:8,paddingVertical:0,children:u.jsx(n("cr:2004"),{children:u.jsx(n("cr:321"),{addOnStart:v,content:S,linkProps:p,onHoverIn:_,onHoverOut:f,onPress:g,onPressIn:h,ref:i,selected:y,size:"medium",testid:void 0})})}),r[11]=p,r[12]=_,r[13]=f,r[14]=g,r[15]=h,r[16]=i,r[17]=y,r[18]=S,r[19]=C,r[20]=v,r[21]=R):R=r[21],R}return null}l.default=c}),98);
__d("MWJewelMessageRequestsThread.react",["fbt","FDSChevronLeftFilled16Icon","FDSChevronRightFilled16Icon","FDSIcon.react","FDSMessagesFilled24Icon","I64","LSIntEnum","Locale","MWJewelThreadSnippet.react","MWXListCellStrict.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=o("react"));function p(){var t=o("react-compiler-runtime").c(5),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.contacts||t[1]!==n.tables.threads?(a=function(){return o("ReQL").fromTableDescending(n.tables.threads.index("parentThreadKeyLastActivityTimestampMs")).getKeyRange((u||(u=o("LSIntEnum"))).ofNumber(-1)).filter(_).map(function(e){var t=e.snippetSenderContactId;if(t!=null){var r=o("ReQLSuspense").first(o("ReQL").fromTableAscending(n.tables.contacts).getKeyRange(t),i.id+":51");return r?r.name:void 0}})},t[0]=n.tables.contacts,t[1]=n.tables.threads,t[2]=a):a=t[2];var l;return t[3]!==n?(l=[n],t[3]=n,t[4]=l):l=t[4],o("ReQLSuspense").useFirst(a,l,i.id+":36")}function _(e){return(c||(c=o("I64"))).gt(e.lastActivityTimestampMs,e.lastReadWatermarkTimestampMs)}function f(e){var t=o("react-compiler-runtime").c(17),n=e.onOpenMessageRequests,a=e.unreadRequestsCount,i;t[0]!==a?(i=s._(/*BTDS*/"_j{\"*\":\"New message requests\",\"_1\":\"New message request\"}",[s._plural(a)]),t[0]=a,t[1]=i):i=t[1];var l=i,u;t[2]!==a?(u=s._(/*BTDS*/"_j{\"someone\":\"From someone you may know\",\"people\":\"From people you may know\"}",[s._enum(a===1?"someone":"people",{someone:"someone",people:"people"})]),t[2]=a,t[3]=u):u=t[3];var c=u,d=p();if(d!=null)if(a===1){var _;t[4]!==d?(_=s._(/*BTDS*/"From {name}",[s._param("name",d)]),t[4]=d,t[5]=_):_=t[5],c=_}else{var f;t[6]!==d||t[7]!==a?(f=s._(/*BTDS*/"From {name} and {count} more",[s._param("name",d),s._param("count",a-1)]),t[6]=d,t[7]=a,t[8]=f):f=t[8],c=f}var g,h;t[9]===Symbol.for("react.memo_cache_sentinel")?(g={addOn:m.jsx(r("FDSIcon.react"),{color:"secondary",icon:o("Locale").isRTL()?r("FDSChevronLeftFilled16Icon"):r("FDSChevronRightFilled16Icon")}),type:"body"},h={icon:r("FDSMessagesFilled24Icon"),size:56,type:"contained-icon"},t[9]=g,t[10]=h):(g=t[9],h=t[10]);var y;t[11]!==c?(y=m.jsx(r("MWJewelThreadSnippet.react"),{isUnread:!0,text:c}),t[11]=c,t[12]=y):y=t[12];var C;return t[13]!==n||t[14]!==y||t[15]!==l?(C=m.jsx(r("MWXListCellStrict.react"),{addOnEnd:g,addOnStart:h,body:y,headline:l,level:4,onPress:n}),t[13]=n,t[14]=y,t[15]=l,t[16]=C):C=t[16],C}l.default=f}),226);
__d("useMWLSJewelLoadMoreThreads",["Int64Hooks","loadMoreLSThreads","promiseDone","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=o("react-compiler-runtime").c(4),a=(e||(e=r("useReStore")))(),l,s;return n[0]!==t||n[1]!==a?(l=function(){return(function(){var e=a.runInTransaction(function(e){return r("loadMoreLSThreads")(e,t)},"readwrite",void 0,void 0,i.id+":26");r("promiseDone")(e)})},s=[a,t],n[0]=t,n[1]=a,n[2]=l,n[3]=s):(l=n[2],s=n[3]),o("Int64Hooks").useMemoInt64(l,s)}l.default=s}),98);
__d("useMWLSLoadThreadFolderIfNotPresent",["CancellablePromise","CancellationToken","I64","Int64Hooks","ReQL","promiseDone","react-compiler-runtime","useMWLSJewelLoadMoreThreads","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n=o("react-compiler-runtime").c(8),a=(s||(s=r("useReStore")))(),i=r("useMWLSJewelLoadMoreThreads")(t),l;n[0]!==a.tables.threads_ranges_v2__generated||n[1]!==i||n[2]!==t?(l=function(){var n=r("CancellationToken")();return r("promiseDone")(o("CancellablePromise").ignoreFailed(void 0,o("CancellablePromise").then_(n,function(e){e==null&&i()},o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.threads_ranges_v2__generated).filter(function(n){return(e||(e=o("I64"))).equal(n.parentThreadKey,t)}))))),n.cancel},n[0]=a.tables.threads_ranges_v2__generated,n[1]=i,n[2]=t,n[3]=l):l=n[3];var u;n[4]!==a||n[5]!==i||n[6]!==t?(u=[i,a,t],n[4]=a,n[5]=i,n[6]=t,n[7]=u):u=n[7],o("Int64Hooks").useEffectInt64(l,u)}l.default=u}),98);
__d("MWLSJewelMessageRequestsThreadContainer.react",["I64","LSIntEnum","MWJewelMessageRequestsThread.react","ReQL","ReQLSuspense","gkx","react","react-compiler-runtime","useMWLSLoadThreadFolderIfNotPresent","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react"));function m(){var t=o("react-compiler-runtime").c(4),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.threads?(a=function(){return o("ReQL").fromTableDescending(n.tables.threads.index("parentThreadKeyLastActivityTimestampMs")).getKeyRange((s||(s=o("LSIntEnum"))).ofNumber(-1)).filter(p)},t[0]=n.tables.threads,t[1]=a):a=t[1];var l;t[2]!==n?(l=[n],t[2]=n,t[3]=l):l=t[3];var u=o("ReQLSuspense").useArray(a,l,i.id+":27");return u.length}function p(e){return(u||(u=o("I64"))).gt(e.lastActivityTimestampMs,e.lastReadWatermarkTimestampMs)}function _(e){var t=o("react-compiler-runtime").c(4),n=e.onOpenMessageRequests,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=(s||(s=o("LSIntEnum"))).ofNumber(-1),t[0]=a):a=t[0],r("useMWLSLoadThreadFolderIfNotPresent")(a);var i=m();if(n==null||i===0||r("gkx")("17132"))return null;var l;return t[1]!==n||t[2]!==i?(l=d.jsx(r("MWJewelMessageRequestsThread.react"),{onOpenMessageRequests:n,unreadRequestsCount:i}),t[1]=n,t[2]=i,t[3]=l):l=t[3],l}l.default=_}),98);
__d("LSFilteredThreadsRangesQuery",["LSGetCursor","LSIssueNewTaskAndGetTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.i64.neq(e[10],void 0)?r[0]=e[10]:r[0]=t.i64.cast([0,0]),e[11]!==void 0?r[1]=e[11]:r[1]="",(e[2]&&t.i64.neq(e[7],void 0)&&t.i64.neq(e[4],void 0)||e[3]&&t.i64.neq(e[6],void 0)&&t.i64.neq(e[5],void 0))&&!(e[2]&&t.i64.neq(e[7],void 0)&&t.i64.neq(e[4],void 0)&&e[3]&&t.i64.neq(e[6],void 0)&&t.i64.neq(e[5],void 0))?t.sequence([function(o){return r[3]=e[4]==null?t.i64.cast([-2147483648,0]):e[4],r[4]=e[7]==null?t.i64.cast([0,1]):e[7],r[10]=t.i64.gt(r[4],t.i64.cast([0,1]))&&t.i64.gt(r[3],t.i64.cast([-2147483648,0])),t.storedProcedure(n("LSGetCursor"),t.i64.cast([0,1])).then(function(e){var t;return t=e,r[2]=t[0],t})},function(o){return r[5]=new t.Map,r[5].set("cursor",r[2]),r[5].set("filter",e[1]),r[5].set("is_after",e[3]),r[5].set("parent_thread_key",e[0]),r[5].set("reference_activity_timestamp",e[3]?e[6]:e[7]),r[5].set("reference_thread_key",e[3]?e[5]:e[4]),r[5].set("secondary_filter",r[0]),r[5].set("filter_value",r[1]),r[5].set("sync_group",t.i64.cast([0,1])),t.i64.gt(t.i64.cast([0,0]),t.i64.cast([0,0]))?(r[11]=t.i64.of_float(Date.now()),r[6]=t.i64.add(r[11],t.i64.cast([0,0]))):r[6]=t.i64.cast([0,0]),r[7]=t.toJSON(r[5]),t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),"trq",t.i64.cast([0,313]),r[7],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,r[6],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[8]=t[0],t})},function(n){return t.filter(t.db.table(247).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.parentThreadKey,e[0])&&t.i64.eq(n.threadRangeFilter,e[1])&&t.i64.eq(n.secondaryThreadRangeFilter,r[0])&&n.threadRangeFilterValue===r[1]}).next().then(function(n,o){var a=n.done,i=n.value;return a?t.db.table(247).add({folderName:"",parentThreadKey:e[0],minThreadKey:r[3]==null?t.i64.cast([-2147483648,0]):r[3],minLastActivityTimestampMs:r[4]==null?t.i64.cast([0,1]):r[4],threadRangeFilter:e[1],secondaryThreadRangeFilter:r[0],threadRangeFilterValue:r[1],maxLastActivityTimestampMs:t.i64.cast([0,1]),maxThreadKey:t.i64.cast([-2147483648,0]),isLoadingBefore:!0,isLoadingAfter:!1,hasMoreBefore:r[10],hasMoreAfter:!1,syncGroup:t.i64.cast([0,1])}):(o=i.item,t.forEach(t.filter(t.db.table(247).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.parentThreadKey,e[0])&&t.i64.eq(n.threadRangeFilter,e[1])&&t.i64.eq(n.secondaryThreadRangeFilter,r[0])&&n.threadRangeFilterValue===r[1]}),function(e){var t=e.update,n=e.item;return t({isLoadingBefore:!0,isLoadingAfter:!1,hasMoreBefore:r[10],hasMoreAfter:!1})}))})}]):t.resolve()},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxFilteredThreadsRangesQueryStoredProcedure",e.__tables__=["filtered_threads_ranges_v3__generated"],a.exports=e}),null);
__d("LSFilteredThreadsRangesQueryStoredProcedure",["LSFilteredThreadsRangesQuery","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSFilteredThreadsRangesQuery"),a.parentThreadKey,a.filter,a.isLoadingBefore,a.isLoadingAfter,a.minThreadKey,a.maxThreadKey,a.maxLastActivityTimestampMs,a.minLastActivityTimestampMs,a.numThreads,a.numMessages,a.secondaryFilter,a.filterValue);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MWPBaseThreadListUtils",["I64","LSFactory","LSFilteredThreadsRangesQueryStoredProcedure","LSIntEnum","LSThreadRangeFilter","LSThreadsRangesQueryStoredProcedure","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a,l,u,c){c===void 0&&(c=!1);var d=(e||(e=o("I64"))).equal(a,(s||(s=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE));r("promiseDone")((async function(){var m=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.sync_groups).getKeyRange((s||(s=o("LSIntEnum"))).ofNumber(1)));m!=null&&(e||(e=o("I64"))).equal(m.syncStatus,(s||(s=o("LSIntEnum"))).ofNumber(2))&&await t.runInTransaction(function(t){return u==null||u(),d?r("LSThreadsRangesQueryStoredProcedure")(r("LSFactory")(t),{additionalPagesToFetch:(e||(e=o("I64"))).zero,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:e.max_int,maxThreadKey:e.max_int,minLastActivityTimestampMs:e.max_int,minThreadKey:e.max_int,parentThreadKey:n,shouldSkipE2eeThreadsRanges:c}):r("LSFilteredThreadsRangesQueryStoredProcedure")(r("LSFactory")(t),{filter:a,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:(e||(e=o("I64"))).max_int,maxThreadKey:e.max_int,minLastActivityTimestampMs:e.max_int,minThreadKey:e.max_int,parentThreadKey:n,secondaryFilter:l})},"readwrite","ui",void 0,i.id+":56")})())}l.loadMoreThreadsForEmptyRangeDefault=u}),98);
__d("ReQLScrollAnchored.react",["BaseScrollableAreaContext","BaseThemeProvider.react","CometPlaceholder.react","CometSSRSuspendOnServer.react","MWXScrollableAreaStyles","intersectionObserverEntryIsIntersecting","react","react-compiler-runtime","stylex","useResizeObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useContext,p=c.useEffect,_=c.useImperativeHandle,f=c.useLayoutEffect,g=c.useMemo,h=c.useRef,y=c.useState,C=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.render=function(){return t.props.children},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidUpdate=function(t,n,r){var e=t.children;this.props.componentDidUpdate(e,r)},n.getSnapshotBeforeUpdate=function(t){var e=t.children;return this.props.getSnapshotBeforeUpdate(e)},t})(u.PureComponent),b={hideScrollbar:{MsOverflowStyle:"x1pq812k",scrollbarWidth:"x1rohswg","::-webkit-scrollbar_height":"x1yqm8si","::-webkit-scrollbar_width":"xjx87ck",$$css:!0},overscrollBehaviorContain:{overscrollBehavior:"xish69e",$$css:!0},scrollArea:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",overflowAnchor:"x1xzczws",overflowX:"x6ikm8r",overflowY:"x1odjw0f",position:"x1n2onr6",width:"xh8yej3",$$css:!0}},v=typeof ResizeObserver!="undefined";function S(e){var t=e.clientHeight,n=e.scrollTop;return n>t*2}function R(e,t){return e-t.scrollTop>t.clientHeight*2}var L=5;function E(t){var n=o("react-compiler-runtime").c(99),a=t.ref,i=t.hasReachedBottom,l=t.hasReachedTop,s=t.setScrollTopInResetForBottomAnchor,c=t.initialAnchor,d=t.initialRenderComplete,g=t.onReachingBottom,E=t.onReachingTop,k=t.onScroll,I=t.onUserScroll,T=t.renderEmptyContent,D=t.renderFooter,x=t.renderHeader,$=t.renderHeaderContentSpacer,P=t.renderLoadingAnimation,N=t.isSufficientContentLoadedAbove,M=t.isSufficientContentLoadedBelow,w=t.headerStyle,A=t.hideScrollbar,F=t.snapThreshold,O=t.xstyle,B=t.shouldOverscrollBehaviourContain,W=t.elements,q=i===void 0?!0:i,U=l===void 0?!0:l,V=s===void 0?!0:s,H=N===void 0?S:N,G=M===void 0?R:M,z=F===void 0?5:F,j=m(r("BaseScrollableAreaContext")),K=h(),Q;n[0]===Symbol.for("react.memo_cache_sentinel")?(Q={getDOMNode:function(){return K==null?void 0:K.current}},n[0]=Q):Q=n[0];var X;n[1]!==j?(X=[].concat(j,[Q]),n[1]=j,n[2]=X):X=n[2];var Y=X,J=h(),Z=h(),ee=y(c),te=ee[0],ne=ee[1],re=h(c),oe=h(null),ae;n[3]!==q||n[4]!==U||n[5]!==H||n[6]!==G||n[7]!==g||n[8]!==E?(ae=function(){var e=K.current,t=Z.current;if(!(e==null||t==null||e.offsetParent===null||t.offsetParent===null)){var n=G(t.clientHeight,e);if(oe.current=e.scrollTop,!n&&!q&&g!=null){g();return}var r=H(e);oe.current=e.scrollTop,!r&&!U&&E!=null&&E()}},n[3]=q,n[4]=U,n[5]=H,n[6]=G,n[7]=g,n[8]=E,n[9]=ae):ae=n[9];var ie=ae,le;n[10]!==W.length||n[11]!==ie?(le=[ie,W.length],n[10]=W.length,n[11]=ie,n[12]=le):le=n[12],p(ie,le);var se;n[13]!==q||n[14]!==z?(se=function(t){if(t.scrollHeight!==t.clientHeight){var e=t.scrollHeight-t.clientHeight-t.scrollTop<z&&q?"bottom":"top";ne(re.current=e),oe.current=t.scrollTop}},n[13]=q,n[14]=z,n[15]=se):se=n[15];var ue=se,ce;n[16]!==k?(ce=function(){var e=K.current,t=oe.current;t==null||e==null||e.scrollTop!==t&&(e.scrollTop=t,k&&k(e))},n[16]=k,n[17]=ce):ce=n[17];var de=ce,me;n[18]!==q||n[19]!==U||n[20]!==c||n[21]!==k||n[22]!==V||n[23]!==z?(me=function(){var e=K.current,t=Z.current;e==null||t==null||(c==="bottom"?(V&&(e.scrollTop=e.scrollHeight),k&&k(e)):U||(e.scrollTop=t.offsetTop,k&&k(e)),q&&e.scrollHeight-e.clientHeight-e.scrollTop<z?ne(re.current="bottom"):ne(re.current=c),oe.current=e.scrollTop)},n[18]=q,n[19]=U,n[20]=c,n[21]=k,n[22]=V,n[23]=z,n[24]=me):me=n[24];var pe=me,_e=h(!1),fe,ge;n[25]!==pe?(fe=function(){_e.current||(pe(),_e.current=!0)},ge=[pe],n[25]=pe,n[26]=fe,n[27]=ge):(fe=n[26],ge=n[27]),f(fe,ge);var he;n[28]!==d||n[29]!==k?(he=function(){var e=K.current;e!=null&&(d&&e.scrollHeight>e.clientHeight&&d(),re.current==="bottom"&&(e.scrollTop=e.scrollHeight,k&&k(e)),oe.current=e.scrollTop)},n[28]=d,n[29]=k,n[30]=he):he=n[30];var ye=he,Ce;n[31]!==ie||n[32]!==k||n[33]!==I||n[34]!==ue?(Ce=function(){var e=K.current;e!=null&&(k&&k(e),e.scrollTop!==oe.current&&(oe.current=null,ie(),ue(e),I&&I()))},n[31]=ie,n[32]=k,n[33]=I,n[34]=ue,n[35]=Ce):Ce=n[35];var be=Ce,ve;n[36]!==ie||n[37]!==ye?(ve=function(){ye(),ie()},n[36]=ie,n[37]=ye,n[38]=ve):ve=n[38];var Se=ve,Re;n[39]!==ye?(Re=function(){return ye()},n[39]=ye,n[40]=Re):Re=n[40];var Le=Re,Ee=r("useResizeObserver")(Le),ke=r("useResizeObserver")(Se),Ie;n[41]!==Ee?(Ie=function(t){Ee(t),Z.current=t},n[41]=Ee,n[42]=Ie):Ie=n[42];var Te=Ie,De;n[43]!==ke?(De=function(t){ke(t),K.current=t},n[43]=ke,n[44]=De):De=n[44];var xe=De,$e;n[45]!==k?($e=function(t,n){if(n!=null){var e=n.element,r=n.height,o=n.scrollAreaElement,a=e.clientHeight;oe.current=o.scrollTop,a!==r&&!(a<=r&&re.current==="bottom")&&(o.scrollTop=o.scrollTop+(a-r),oe.current=o.scrollTop,k&&k(o))}},n[45]=k,n[46]=$e):$e=n[46];var Pe=$e,Ne;n[47]!==q||n[48]!==k?(Ne=function(){if(K.current!=null){var e=K.current;e.scrollTop=e.scrollHeight,oe.current=e.scrollTop,k&&k(e)}ne(re.current=q?"bottom":"top")},n[47]=q,n[48]=k,n[49]=Ne):Ne=n[49];var Me=Ne,we;n[50]===Symbol.for("react.memo_cache_sentinel")?(we=function(){if(K.current!=null){var e=K.current,t=e.scrollHeight-e.scrollTop-e.clientHeight<L;return oe.current=e.scrollTop,t}else return!1},n[50]=we):we=n[50];var Ae=we,Fe=h(null),Oe;n[51]===Symbol.for("react.memo_cache_sentinel")?(Oe=function(t,n){var e=Fe.current,o=K.current;if(e!=null&&o!=null){var a=new IntersectionObserver(function(e){var t=e[0];(t.boundingClientRect.height!==0||t.boundingClientRect.width!==0)&&n(r("intersectionObserverEntryIsIntersecting")(t))},{root:o,rootMargin:t+"px"});return a.observe(e),(function(){return a.disconnect()})}},n[51]=Oe):Oe=n[51];var Be=Oe,We;n[52]===Symbol.for("react.memo_cache_sentinel")?(We=function(){var e=K.current;if(e!=null){var t=e.scrollHeight-e.clientHeight>0;return oe.current=e.scrollTop,t}return!1},n[52]=We):We=n[52];var qe=We,Ue;n[53]===Symbol.for("react.memo_cache_sentinel")?(Ue=function(){var e=K.current;if(e==null)return null;var t={clientHeight:e.clientHeight,scrollHeight:e.scrollHeight,scrollTop:e.scrollTop};return oe.current=e.scrollTop,t},n[53]=Ue):Ue=n[53];var Ve=Ue,He,Ge;n[54]!==pe||n[55]!==de||n[56]!==Me?(He=function(){return{doesContentFillScroll:qe,getScrollAreaElement:function(){return K.current},getScrollerMeasurements:Ve,isAtBottom:Ae,onCloseToBottom:Be,resetScrollPosition:pe,restoreScrollPosition:de,scrollToBottom:Me}},Ge=[qe,Be,pe,de,Me],n[54]=pe,n[55]=de,n[56]=Me,n[57]=He,n[58]=Ge):(He=n[57],Ge=n[58]),_(a,He,Ge);var ze;n[59]!==W[0]||n[60]!==W.length||n[61]!==U?(ze=function(t){var e=Z.current,n=K.current;if(e!=null&&n!=null&&!(U&&n.scrollTop===0)&&(!t.length||W.length&&t[0].key!==W[0].key&&t.length!==W.length)){var r=e.clientHeight;return oe.current=n.scrollTop,{element:e,height:r,scrollAreaElement:n}}return null},n[59]=W[0],n[60]=W.length,n[61]=U,n[62]=ze):ze=n[62];var je;n[63]!==W||n[64]!==Pe||n[65]!==ze?(je=u.jsx(C,{componentDidUpdate:Pe,getSnapshotBeforeUpdate:ze,children:W}),n[63]=W,n[64]=Pe,n[65]=ze,n[66]=je):je=n[66];var Ke=je,Qe;n[67]!==O?(Qe=(e||(e=r("stylex"))).props(O),n[67]=O,n[68]=Qe):Qe=n[68];var Xe;n[69]!==te?(Xe={0:{className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62 x1n2onr6"},1:{className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62 x1n2onr6 x1xzczws"}}[(te==="bottom")<<0],n[69]=te,n[70]=Xe):Xe=n[70];var Ye;n[71]!==Te||n[72]!==W.length||n[73]!==Ke||n[74]!==Pe||n[75]!==ye||n[76]!==be||n[77]!==Se||n[78]!==q||n[79]!==U||n[80]!==w||n[81]!==A||n[82]!==T||n[83]!==D||n[84]!==x||n[85]!==$||n[86]!==P||n[87]!==xe||n[88]!==B?(Ye=u.jsx(r("BaseThemeProvider.react"),{children:function(n,o){return u.jsxs("div",{className:(e||(e=r("stylex")))(b.scrollArea,B===!0&&b.overscrollBehaviorContain,A===!0&&b.hideScrollbar,r("MWXScrollableAreaStyles").themed,n),"data-testid":void 0,onScroll:be,ref:xe,style:o,children:[u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"ReQLScrollAnchored.ScrollArea",children:u.jsx(r("CometSSRSuspendOnServer.react"),{children:!v&&u.jsx("iframe",{className:"x76ihet xtmcdsl x112ta8 x4gj9lk x5yr21d x1o0tod x1ty9z65 xg01cxk x47corl x10l6tqk x1yhy09f xh8yej3",ref:function(t){t!=null&&(t.contentWindow.onresize=Se)}})})}),u.jsxs(C,{componentDidUpdate:Pe,getSnapshotBeforeUpdate:function(){var e=J.current,t=K.current;if(e!=null&&t!=null&&(oe.current=t.scrollTop,oe.current!==0)){var n=e.clientHeight;return{element:e,height:n,scrollAreaElement:t}}return null},children:[u.jsx("div",babelHelpers.extends({},e.props(w),{ref:J,children:U?x&&x():P&&P("onTop",W.length)})),T!=null?T():null]}),$!=null&&$(),u.jsx("div",babelHelpers.extends({},{0:{},1:{className:"x1us19tq"}}[(W.length!==0&&!U&&!q)<<0],{children:u.jsxs("div",{className:"x1n2onr6",ref:Te,children:[u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"ReQLScrollAnchored.elementsHOC",children:u.jsx(r("CometSSRSuspendOnServer.react"),{children:!v&&u.jsx("iframe",{className:"x76ihet xtmcdsl x112ta8 x4gj9lk x5yr21d x1o0tod x1ty9z65 xg01cxk x47corl x10l6tqk x1yhy09f xh8yej3",ref:function(t){t!=null&&(t.contentWindow.onresize=ye)}})})}),Ke,u.jsx("div",{className:"x1ey2m1c xjm9jq1 x1y332i5 x47corl x10l6tqk",ref:Fe}),q?D&&D():P&&P("onBottom",W.length)]})}))]})}}),n[71]=Te,n[72]=W.length,n[73]=Ke,n[74]=Pe,n[75]=ye,n[76]=be,n[77]=Se,n[78]=q,n[79]=U,n[80]=w,n[81]=A,n[82]=T,n[83]=D,n[84]=x,n[85]=$,n[86]=P,n[87]=xe,n[88]=B,n[89]=Ye):Ye=n[89];var Je;n[90]!==Xe||n[91]!==Ye?(Je=u.jsx("div",babelHelpers.extends({},Xe,{children:Ye})),n[90]=Xe,n[91]=Ye,n[92]=Je):Je=n[92];var Ze;n[93]!==Qe||n[94]!==Je?(Ze=u.jsx("div",babelHelpers.extends({},Qe,{children:Je})),n[93]=Qe,n[94]=Je,n[95]=Ze):Ze=n[95];var et;return n[96]!==Y||n[97]!==Ze?(et=u.jsx(r("BaseScrollableAreaContext").Provider,{value:Y,children:Ze}),n[96]=Y,n[97]=Ze,n[98]=et):et=n[98],et}l.default=E}),98);
__d("useStableValue",["I64","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useRef;function c(e){return d(e,(s||(s=o("I64"))).equal)}function d(e,t){var n=u(e);return t(n.current,e)||(n.current=e),n.current}l.useStableI64=c,l.useStableValue=d}),98);
__d("useStableBounds",["deepEquals","useStableValue"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("useStableValue").useStableValue(e,r("deepEquals"))}l.default=e}),98);
__d("ReQLPaginatedList.react",["FBLogger","I64","PromiseOrValue","ReQL","ReQLScrollAnchored.react","ReQLSuspense","SortedAsyncIterable","deepEquals","getErrorSafe","promiseDone","react","react-compiler-runtime","useMergeRefs","useStableBounds","useStableValue"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=e,m=d.useCallback,p=d.useEffect,_=d.useLayoutEffect,f=d.useMemo,g=d.useRef,h=d.useState,y=d.useTransition;function C(e,t){return t==null?e:e.bounds(t)}function b(e){if(e instanceof Promise)throw e;return e}function v(e){return{direction:e.direction,iterator:function(n,r){var t=e.iterator(n,r);return{next:function(n){return(s||(s=o("PromiseOrValue"))).map(t.next(n),function(e){return e.done?e:{done:!1,value:[e.value[0],e.value]}})}}},keyLength:e.keyLength,subscribe:function(n,r){return e.subscribe(async function(e,t,r){t.operation==="delete"?await n(e,t,r):t.operation==="add"?await n(e,{operation:"add",value:[e,t.value]},r):t.operation==="put"&&await n(e,{operation:"put",value:[e,t.value]},r)},r)}}}function S(e){var t=e.clientHeight,n=e.scrollTop;return n>t*2}function R(e){var t,n,a,l=o("react-compiler-runtime").c(163),s=e.bounds,u=e.direction,d=e.hasReachedBottom,m=e.hasReachedTop,f=e.imperativeRef,R=e.initialAnchor,T=e.initialRenderComplete,D=e.onDataLoaded,x=e.onPageLoaded,$=e.onReachingBottom,P=e.onReachingTop,N=e.onScroll,M=e.onUserScroll,w=e.pageSize,A=e.renderEmptyContent,F=e.renderFooter,O=e.renderHeader,B=e.renderHeaderContentSpacer,W=e.renderItem,q=e.renderLoadingAnimation,U=e.headerStyle,V=e.isSufficientContentLoadedAbove,H=e.isSufficientContentLoadedBelow,G=e.snapThreshold,z=e.setScrollTopInResetForBottomAnchor,j=e.data,K=e.xstyle,Q=e.isLogDuplicatedItemEnabled,X=e.shouldOverscrollBehaviourContain,Y=u===void 0?"asc":u,J=d===void 0?!0:d,Z=m===void 0?!0:m,ee=w===void 0?15:w,te=V===void 0?S:V,ne=G===void 0?5:G,re=z===void 0?!0:z,oe=j.ascending,ae=j.descending,ie=Q===void 0?!1:Q,le=y(),se=le[1],ue=r("useStableBounds")(s);if(R!=null&&R!=="top"&&R!=="bottom"){var ce;l[0]!==ue||l[1]!==ae||l[2]!==R?(ce=C(ae,ue).bounds({lt:R}).iterator(new WeakMap).next(),l[0]=ue,l[1]=ae,l[2]=R,l[3]=ce):ce=l[3];var de=ce;if(de instanceof Promise)throw de;R=de.done?"top":de.value[0]}var me=o("useStableValue").useStableValue(R,r("deepEquals")),pe,_e;if(me==="top"||me==null){var fe;l[4]===Symbol.for("react.memo_cache_sentinel")?(fe=o("ReQL").empty(),l[4]=fe):fe=l[4],pe=fe,_e=Y==="asc"?oe:ae}else if(me==="bottom"){pe=Y==="asc"?ae:oe;var ge;l[5]===Symbol.for("react.memo_cache_sentinel")?(ge=o("ReQL").empty(),l[5]=ge):ge=l[5],_e=ge}else{var he;l[6]!==oe||l[7]!==ae||l[8]!==Y||l[9]!==me?(he=Y==="asc"?ae.bounds({lt:me}):oe.bounds({gt:me}),l[6]=oe,l[7]=ae,l[8]=Y,l[9]=me,l[10]=he):he=l[10],pe=he;var ye;l[11]!==oe||l[12]!==ae||l[13]!==Y||l[14]!==me?(ye=Y==="asc"?oe.bounds({gte:me}):ae.bounds({lte:me}),l[11]=oe,l[12]=ae,l[13]=Y,l[14]=me,l[15]=ye):ye=l[15],_e=ye}var Ce;l[16]!==_e||l[17]!==pe?(Ce={after:_e,before:pe},l[16]=_e,l[17]=pe,l[18]=Ce):Ce=l[18];var be=Ce,ve=g(!1),Se;l[19]!==ue||l[20]!==me||l[21]!==be.before||l[22]!==ee?(Se=b(o("SortedAsyncIterable").toArray(C(be.before,ue).take(me==="bottom"?ee:0),i.id+":204")).reverse(),l[19]=ue,l[20]=me,l[21]=be.before,l[22]=ee,l[23]=Se):Se=l[23];var Re=Se,Le;l[24]!==ue||l[25]!==be.after||l[26]!==ee?(Le=b(o("SortedAsyncIterable").toArray(C(be.after,ue).take(ee),i.id+":211")),l[24]=ue,l[25]=be.after,l[26]=ee,l[27]=Le):Le=l[27];var Ee=Le,ke=me==="bottom"?!0:Ee.length<ee,Ie=me==="top"||me==null?!0:me==="bottom"?Re.length<ee:!1,Te=Ie?void 0:me==="bottom"?(t=Re[0])==null?void 0:t[0]:(n=Ee[0])==null?void 0:n[0],De=ke||(a=Ee[Ee.length-1])==null?void 0:a[0],xe;l[28]!==Te||l[29]!==De?(xe={firstKey:Te,lastKey:De},l[28]=Te,l[29]=De,l[30]=xe):xe=l[30];var $e=xe,Pe;l[31]!==me||l[32]!==$e||l[33]!==be?(Pe=function(){return{anchor:me,iterables:be,values:$e}},l[31]=me,l[32]=$e,l[33]=be,l[34]=Pe):Pe=l[34];var Ne=h(Pe),Me=Ne[0],we=Ne[1],Ae=Me.iterables===be&&Me.anchor===me,Fe=Ae?Me.values:$e,Oe=Fe.firstKey,Be=Fe.lastKey,We,qe;l[35]!==ue||l[36]!==Y||l[37]!==Oe||l[38]!==be.before||l[39]!==ee?(We=function(){return v(Oe==null?C(be.before,ue).take(ee):C(be.before,ue).bounds(Y==="asc"?{gte:Oe}:{lte:Oe}))},qe=[ue,Y,Oe,be.before,ee],l[35]=ue,l[36]=Y,l[37]=Oe,l[38]=be.before,l[39]=ee,l[40]=We,l[41]=qe):(We=l[40],qe=l[41]);var Ue=o("ReQLSuspense").useArray(We,qe,i.id+":246"),Ve;l[42]!==Ue?(Ve=[].concat(Ue).reverse(),l[42]=Ue,l[43]=Ve):Ve=l[43];var He=Ve,Ge;l[44]!==He[0]||l[45]!==He.length||l[46]!==Oe||l[47]!==me||l[48]!==be||l[49]!==Be||l[50]!==ee?(Ge=function(){He.length===ee&&Oe==null&&se(function(){return we({anchor:me,iterables:be,values:{firstKey:He[0][0],lastKey:Be}})})},l[44]=He[0],l[45]=He.length,l[46]=Oe,l[47]=me,l[48]=be,l[49]=Be,l[50]=ee,l[51]=Ge):Ge=l[51];var ze;l[52]!==He||l[53]!==Oe||l[54]!==me||l[55]!==be||l[56]!==Be||l[57]!==ee?(ze=[He,Oe,me,be,Be,ee],l[52]=He,l[53]=Oe,l[54]=me,l[55]=be,l[56]=Be,l[57]=ee,l[58]=ze):ze=l[58],p(Ge,ze);var je,Ke;l[59]!==ue||l[60]!==Y||l[61]!==be.after||l[62]!==Be||l[63]!==ee?(je=function(){return v(Be==null?C(be.after,ue).take(ee):C(be.after,ue).bounds(Y==="asc"?{lte:Be}:{gte:Be}))},Ke=[ue,Y,be.after,Be,ee],l[59]=ue,l[60]=Y,l[61]=be.after,l[62]=Be,l[63]=ee,l[64]=je,l[65]=Ke):(je=l[64],Ke=l[65]);var Qe=o("ReQLSuspense").useArray(je,Ke,i.id+":273"),Xe,Ye;l[66]!==Qe||l[67]!==Oe||l[68]!==me||l[69]!==be||l[70]!==Be||l[71]!==ee?(Xe=function(){Qe.length===ee&&Be==null&&se(function(){return we({anchor:me,iterables:be,values:{firstKey:Oe,lastKey:Qe[Qe.length-1][0]}})})},Ye=[Qe,Oe,me,be,Be,ee],l[66]=Qe,l[67]=Oe,l[68]=me,l[69]=be,l[70]=Be,l[71]=ee,l[72]=Xe,l[73]=Ye):(Xe=l[72],Ye=l[73]),p(Xe,Ye);var Je;l[74]!==Qe||l[75]!==He?(Je=[].concat(He,Qe),l[74]=Qe,l[75]=He,l[76]=Je):Je=l[76];var Ze=Je,et,tt;l[77]!==Ze||l[78]!==D?(et=function(){D==null||D(Ze)},tt=[Ze,D],l[77]=Ze,l[78]=D,l[79]=et,l[80]=tt):(et=l[79],tt=l[80]),p(et,tt);var nt;l[81]!==ue||l[82]!==Y||l[83]!==Ze[0]||l[84]!==Ze.length||l[85]!==be.before?(nt=function(){return Ze.length===0?o("ReQL").empty():C(be.before,ue).bounds(Y==="asc"?{lt:Ze[0][0]}:{gt:Ze[0][0]})},l[81]=ue,l[82]=Y,l[83]=Ze[0],l[84]=Ze.length,l[85]=be.before,l[86]=nt):nt=l[86];var rt;l[87]!==ue||l[88]!==Y||l[89]!==Ze||l[90]!==be.before?(rt=[Ze,ue,Y,be.before],l[87]=ue,l[88]=Y,l[89]=Ze,l[90]=be.before,l[91]=rt):rt=l[91];var ot=o("ReQLSuspense").useFirst(nt,rt,i.id+":305")==null,at,it;l[92]!==ue||l[93]!==Y||l[94]!==Ze||l[95]!==be.after?(at=function(){return Ze.length===0?o("ReQL").empty():C(be.after,ue).bounds(Y==="asc"?{gt:Ze[Ze.length-1][0]}:{lt:Ze[Ze.length-1][0]})},it=[Ze,ue,Y,be.after],l[92]=ue,l[93]=Y,l[94]=Ze,l[95]=be.after,l[96]=at,l[97]=it):(at=l[96],it=l[97]);var lt=o("ReQLSuspense").useFirst(at,it,i.id+":315")==null,st=y(),ut=st[0],ct=st[1],dt;l[98]!==oe||l[99]!==ue||l[100]!==ae||l[101]!==Y||l[102]!==Ze||l[103]!==Oe||l[104]!==lt||l[105]!==J||l[106]!==me||l[107]!==ut||l[108]!==be||l[109]!==x||l[110]!==$||l[111]!==ee?(dt=function(){if(!(ve.current||ut))if(lt){if(!J&&$!=null)return $()}else{ve.current=!0,r("promiseDone")(Promise.resolve(o("SortedAsyncIterable").toArray(C(Y==="asc"?oe:ae,ue).bounds(Y==="asc"?{gt:Ze[Ze.length-1][0]}:{lt:Ze[Ze.length-1][0]}).take(ee),i.id+":342")),function(e){ve.current=!1,x!=null&&x("bottom",Ze[Ze.length-1][1],e.map(k)),ct(function(){var t,n;return we({anchor:me,iterables:be,values:{firstKey:Oe,lastKey:(t=(n=e[e.length-1])==null?void 0:n[0])!=null?t:Ze[Ze.length-1][0]}})})});return}},l[98]=oe,l[99]=ue,l[100]=ae,l[101]=Y,l[102]=Ze,l[103]=Oe,l[104]=lt,l[105]=J,l[106]=me,l[107]=ut,l[108]=be,l[109]=x,l[110]=$,l[111]=ee,l[112]=dt):dt=l[112];var mt=dt,pt=y(),_t=pt[0],ft=pt[1],gt=g(!0),ht;l[113]!==oe||l[114]!==ue||l[115]!==ae||l[116]!==Y||l[117]!==Ze||l[118]!==ot||l[119]!==Z||l[120]!==me||l[121]!==_t||l[122]!==be||l[123]!==Be||l[124]!==x||l[125]!==P||l[126]!==ee?(ht=function(){if(!(ve.current||_t)){if(ot)return Z||P==null?void 0:P();ve.current=!0,r("promiseDone")(Promise.resolve(o("SortedAsyncIterable").toArray(C(Y==="asc"?ae:oe,ue).bounds(Y==="asc"?{lt:Ze[0][0]}:{gt:Ze[0][0]}).take(ee),i.id+":414")),function(e){ve.current=!1,x!=null&&(gt.current?(gt.current=!1,x("top",null,Ze.slice(0,ee).map(E).reverse())):x("top",Ze[0][1],e.map(L))),e.reverse(),ft(function(){var t,n;return we({anchor:me,iterables:be,values:{firstKey:(t=(n=e[0])==null?void 0:n[0])!=null?t:Ze[0][0],lastKey:Be}})})})}},l[113]=oe,l[114]=ue,l[115]=ae,l[116]=Y,l[117]=Ze,l[118]=ot,l[119]=Z,l[120]=me,l[121]=_t,l[122]=be,l[123]=Be,l[124]=x,l[125]=P,l[126]=ee,l[127]=ht):ht=l[127];var yt=ht,Ct=ot&&Z?0:1,bt=Ze.length-(lt&&J?0:1),vt;if(l[128]!==Ze||l[129]!==Ct||l[130]!==W||l[131]!==bt){vt=new Array(bt>Ct?bt-Ct:0);for(var St=Ct;St<bt;St++){var Rt,Lt;vt[St-Ct]=W(Ze[St][1],{nextItem:(Rt=Ze[St+1])==null?void 0:Rt[1],previousItem:(Lt=Ze[St-1])==null?void 0:Lt[1]},bt-Ct-St)}l[128]=Ze,l[129]=Ct,l[130]=W,l[131]=bt,l[132]=vt}else vt=l[132];var Et=vt,kt=g(null),It=r("useMergeRefs")(kt,f),Tt;l[133]===Symbol.for("react.memo_cache_sentinel")?(Tt=function(){var e;(e=kt.current)==null||e.resetScrollPosition()},l[133]=Tt):Tt=l[133];var Dt;l[134]!==me?(Dt=[me],l[134]=me,l[135]=Dt):Dt=l[135],_(Tt,Dt);var xt;l[136]!==Ze||l[137]!==F?(xt=function(){return F==null?void 0:F(Ze.length>0?Ze[Ze.length-1][1]:void 0)},l[136]=Ze,l[137]=F,l[138]=xt):xt=l[138];var $t=xt;I(ie,Ze);var Pt=lt&&J,Nt=ot&&Z,Mt=me==="bottom"?"bottom":"top",wt;return l[139]!==Et||l[140]!==U||l[141]!==T||l[142]!==te||l[143]!==H||l[144]!==mt||l[145]!==yt||l[146]!==N||l[147]!==M||l[148]!==ee||l[149]!==It||l[150]!==A||l[151]!==$t||l[152]!==O||l[153]!==B||l[154]!==q||l[155]!==re||l[156]!==X||l[157]!==ne||l[158]!==Pt||l[159]!==Nt||l[160]!==Mt||l[161]!==K?(wt=c.jsx(r("ReQLScrollAnchored.react"),{elements:Et,hasReachedBottom:Pt,hasReachedTop:Nt,headerStyle:U,initialAnchor:Mt,initialRenderComplete:T,isSufficientContentLoadedAbove:te,isSufficientContentLoadedBelow:H,onReachingBottom:mt,onReachingTop:yt,onScroll:N,onUserScroll:M,pageSize:ee,ref:It,renderEmptyContent:A,renderFooter:$t,renderHeader:O,renderHeaderContentSpacer:B,renderLoadingAnimation:q,setScrollTopInResetForBottomAnchor:re,shouldOverscrollBehaviourContain:X,snapThreshold:ne,xstyle:K}),l[139]=Et,l[140]=U,l[141]=T,l[142]=te,l[143]=H,l[144]=mt,l[145]=yt,l[146]=N,l[147]=M,l[148]=ee,l[149]=It,l[150]=A,l[151]=$t,l[152]=O,l[153]=B,l[154]=q,l[155]=re,l[156]=X,l[157]=ne,l[158]=Pt,l[159]=Nt,l[160]=Mt,l[161]=K,l[162]=wt):wt=l[162],wt}function L(e){return e[1]}function E(e){return e[1]}function k(e){return e[1]}function I(e,t){var n=h(!1),a=n[0],i=n[1];p(function(){try{if(e&&!a){var n=new Set,l=[];for(var s of t){var c=s[1];if(typeof c=="object"&&(c==null?void 0:c.threadKey)!=null&&(u||(u=o("I64"))).isI64(c==null?void 0:c.threadKey)){var d=(u||(u=o("I64"))).to_string(c==null?void 0:c.threadKey);n.has(d)&&l.push(d),n.add(d)}}n.size!==t.length&&(i(!0),r("FBLogger")("messenger_web").warn("Duplicated thread item detected in ReQLPaginatedList %s",l.join(",")))}}catch(e){var m=r("getErrorSafe")(e);r("FBLogger")("messenger_web").warn("Duplicated thread item error",m.message)}},[t,a,e])}l.default=R}),98);
__d("useMWCMMarkBumpedThreadsSeen",["Int64Hooks","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MWCMMarkBumpedThreadsSeen").__setRef("useMWCMMarkBumpedThreadsSeen");function s(t){var n=o("react-compiler-runtime").c(3),r,a;return n[0]!==t?(r=function(){return{load:async function(){var n=await e.load();return(function(e){return n.MWCMMarkBumpedThreadsSeen(t,e)})}}},a=[t],n[0]=t,n[1]=r,n[2]=a):(r=n[1],a=n[2]),o("Int64Hooks").useMemoInt64(r,a)}l.default=s}),98);
__d("useMarkSeenWhenVisible",["CometDebounce","Int64Hooks","ReQL","UserActivity","promiseDone","react","useMWCMMarkBumpedThreadsSeen","useMWPMarkSeen","useMWPWatchFolderFocusChanges","useReStore","useSimpleImpression","useVisibilityObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useRef;function m(t){var n=(e||(e=r("useReStore")))(),a=d(!1),l=r("useMWCMMarkBumpedThreadsSeen")(t),s=r("useVisibilityObserver")({onHidden:function(){a.current=!1},onVisible:function(){a.current=!0}}),u=r("useMWPMarkSeen")(t),m=r("CometDebounce")(c(function(){r("promiseDone")((async function(){var e=await Promise.all([u.load(),l.load()]),t=e[0],r=e[1];await n.runInTransaction(async function(e){await t(e),await r(e)},"readwrite",void 0,void 0,i.id+":56")})())},[u,l,n]),{leading:!0,wait:500});return r("useMWPWatchFolderFocusChanges")(m,a),r("useSimpleImpression")(m),o("Int64Hooks").useEffectInt64(function(){return o("ReQL").fromTableDescending(n.tables.threads.index("parentThreadKeyLastActivityTimestampMs"),[]).getKeyRange(t).take(1).subscribe(function(){r("UserActivity").isOnTab()&&a.current===!0&&m()})},[n,t,m]),s}l.default=m}),98);
__d("MWPBaseThreadList.react",["Box.react","FBLogger","I64","Int64Hooks","LSFactory","LSFilteredThreadsRangesQueryStoredProcedure","LSIntEnum","LSThreadRangeFilter","LSThreadsRangesQueryStoredProcedure","MAWMaybeWithTimeout","MWPBaseThreadListHooks","MWPBaseThreadListUtils","MWThreadListFocusableTable.react","ReQL","ReQLPaginatedList.react","ReQLSuspense","react","react-compiler-runtime","useMarkSeenWhenVisible","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=s||(s=o("react")),m=s,p=m.useCallback,_=m.useEffect,f={container:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},emptyContentContainer:{alignItems:"x6s0dn4",display:"x78zum5",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0},list:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},g=1e4;function h(e,t,n,a){a===void 0&&(a=!1),o("MAWMaybeWithTimeout").maybeWithTimeout(e.runInTransaction(async function(e){var i,l=await(i=e.threads_ranges_v2__generated).get.apply(i,t);if(!(l==null||l.isLoadingBefore))return n&&n(),r("LSThreadsRangesQueryStoredProcedure")(r("LSFactory")(e),{additionalPagesToFetch:(u||(u=o("I64"))).zero,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:l.maxLastActivityTimestampMs,maxThreadKey:l.maxThreadKey,minLastActivityTimestampMs:l.minLastActivityTimestampMs,minThreadKey:l.minThreadKey,parentThreadKey:l.parentThreadKey,shouldSkipE2eeThreadsRanges:a})},"readwrite","ui",void 0,i.id+":91"),g,function(){r("FBLogger")("messenger_web").warn("Paginated threads load took longer than "+g/1e3+` seconds.
        parent_thread_key: `+(u||(u=o("I64"))).to_string(t[0])+`
        min_thread_key: `+u.to_string(t[1])+`
        min_last_activity_timestamp_ms: `+u.to_string(t[2]))})}function y(e,t,n,a,l){a===void 0&&(a=(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE)),o("MAWMaybeWithTimeout").maybeWithTimeout(e.runInTransaction(async function(e){var o,i=await(o=e.filtered_threads_ranges_v3__generated).get.apply(o,t);if(!(i==null||i.isLoadingBefore))return l&&l(),r("LSFilteredThreadsRangesQueryStoredProcedure")(r("LSFactory")(e),{filter:n,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:i.maxLastActivityTimestampMs,maxThreadKey:i.maxThreadKey,minLastActivityTimestampMs:i.minLastActivityTimestampMs,minThreadKey:i.minThreadKey,parentThreadKey:i.parentThreadKey,secondaryFilter:a})},"readwrite","ui",void 0,i.id+":150"),g,function(){r("FBLogger")("messenger_web").warn("Filtered paginated threads load took longer than "+g/1e3+` seconds.
        parent_thread_key: `+(u||(u=o("I64"))).to_string(t[0])+`
        min_thread_key: `+u.to_string(t[1])+`
        min_last_activity_timestamp_ms: `+u.to_string(t[2])+`
        thread_range_filter: `+u.to_string(t[3])+`
        secondary_thread_range_filter: `+u.to_string(t[5]))})}function C(e,t,n,a,i,l){if(a===void 0&&(a=(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE)),l===void 0&&(l=!1),t!=null)if(t.threadRangeFilter){var u=[t.parentThreadKey,t.minThreadKey,t.minLastActivityTimestampMs,t.threadRangeFilter,t.folderName,t.secondaryThreadRangeFilter,t.threadRangeFilterValue];y(e,u,n,a,i)}else{var s=[t.parentThreadKey,t.minThreadKey,t.minLastActivityTimestampMs];h(e,s,i,l)}}function b(e,t,n,a){var l=o("react-compiler-runtime").c(14),s;l[0]!==n?(s=(u||(u=o("I64"))).equal(n,(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE)),l[0]=n,l[1]=s):s=l[1];var d=s,m,p;l[2]!==e||l[3]!==d||l[4]!==t?(m=function(){return d?o("ReQL").fromTableDescending(e.tables.threads_ranges_v2__generated).getKeyRange(t):o("ReQL").empty()},p=[e,t,d],l[2]=e,l[3]=d,l[4]=t,l[5]=m,l[6]=p):(m=l[5],p=l[6]);var _=o("ReQLSuspense").useFirst(m,p,i.id+":250"),f,g;l[7]!==e||l[8]!==n||l[9]!==d||l[10]!==t||l[11]!==a?(f=function(){return d?o("ReQL").empty():o("ReQL").fromTableDescending(e.tables.filtered_threads_ranges_v3__generated).getKeyRange(t).filter(function(e){return(u||(u=o("I64"))).equal(e.threadRangeFilter,n)&&(a==null||(u||(u=o("I64"))).equal(e.secondaryThreadRangeFilter,a))})},g=[e,n,t,a,d],l[7]=e,l[8]=n,l[9]=d,l[10]=t,l[11]=a,l[12]=f,l[13]=g):(f=l[12],g=l[13]);var h=o("ReQLSuspense").useFirst(f,g,i.id+":257");return d?_:h}function v(t){var n=o("react-compiler-runtime").c(71),a=t.afterContent,l=t.beforeContent,s=t.containerStyle,m=t.customThreadFilter,p=t.emptyContent,g=t.filter,h=t.gridLabel,y=t.imperativeRef,v=t.isSufficientContentLoadedBelow,S=t.loadMoreThreads,R=t.loadMoreThreadsForEmptyRange,L=t.onDataLoaded,E=t.onLoadMoreThreads,k=t.onReachingTop,I=t.onScroll,T=t.onThreadsLoaded,D=t.pageSize,x=t.parentThreadKey,$=t.renderItem,P=t.renderLoadingAnimation,N=t.role,M=t.secondaryFilter,w=t.setIsEmptyInbox,A=t.shouldSkipE2eeThreadsRanges,F;n[0]!==g?(F=g===void 0?(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE):g,n[0]=g,n[1]=F):F=n[1];var O=F,B=S===void 0?C:S,W=R===void 0?o("MWPBaseThreadListUtils").loadMoreThreadsForEmptyRangeDefault:R,q=N===void 0?"grid":N,U=A===void 0?!1:A,V=(e||(e=r("useReStore")))(),H=b(V,x,O,M);H!=null&&!H.isLoadingBefore&&T&&T();var G=o("MWPBaseThreadListHooks").useMWPBaseThreadListBounds(H),z;n[2]!==m||n[3]!==V||n[4]!==x?(z={customThreadFilter:m,db:V,parentThreadKey:x},n[2]=m,n[3]=V,n[4]=x,n[5]=z):z=n[5];var j=o("MWPBaseThreadListHooks").useMWPBaseThreadListFilteredData(z),K;n[6]!==G||n[7]!==j.descending?(K=function(){return j.descending.bounds(G)},n[6]=G,n[7]=j.descending,n[8]=K):K=n[8];var Q;n[9]!==G||n[10]!==j?(Q=[G,j],n[9]=G,n[10]=j,n[11]=Q):Q=n[11];var X=o("ReQLSuspense").useFirst(K,Q,i.id+":345")==null,Y,J;n[12]!==X||n[13]!==w?(Y=function(){w&&w(X)},J=[X,w],n[12]=X,n[13]=w,n[14]=Y,n[15]=J):(Y=n[14],J=n[15]),_(Y,J);var Z,ee;n[16]!==V||n[17]!==H||n[18]!==O||n[19]!==W||n[20]!==E||n[21]!==x||n[22]!==M?(Z=function(){H==null&&W(V,x,O,M,E)},ee=[x,H,V,O,M,E,W],n[16]=V,n[17]=H,n[18]=O,n[19]=W,n[20]=E,n[21]=x,n[22]=M,n[23]=Z,n[24]=ee):(Z=n[23],ee=n[24]),o("Int64Hooks").useEffectInt64(Z,ee);var te=r("useMarkSeenWhenVisible")(x),ne;n[25]!==V||n[26]!==H||n[27]!==O||n[28]!==B||n[29]!==E||n[30]!==M||n[31]!==U?(ne=function(){B(V,H,O,M,E,U)},n[25]=V,n[26]=H,n[27]=O,n[28]=B,n[29]=E,n[30]=M,n[31]=U,n[32]=ne):ne=n[32];var re=ne,oe;n[33]!==$?(oe=function(t){return d.jsx(d.Fragment,{children:$(t)},(u||(u=o("I64"))).to_string(t.threadKey))},n[33]=$,n[34]=oe):oe=n[34];var ae=oe,ie;if(H==null){var le;n[35]!==P?(le=P!=null?P("nullState",0):null,n[35]=P,n[36]=le):le=n[36],ie=le}else{var se=!H.hasMoreBefore,ue=!H.hasMoreAfter,ce;n[37]!==H.isLoadingAfter||n[38]!==H.isLoadingBefore||n[39]!==p||n[40]!==X?(ce=function(){return X&&!H.isLoadingAfter&&!H.isLoadingBefore?d.jsx(r("Box.react"),{xstyle:f.emptyContentContainer,children:p}):null},n[37]=H.isLoadingAfter,n[38]=H.isLoadingBefore,n[39]=p,n[40]=X,n[41]=ce):ce=n[41];var de;n[42]!==a?(de=function(){return a},n[42]=a,n[43]=de):de=n[43];var me;n[44]!==l?(me=function(){return l},n[44]=l,n[45]=me):me=n[45];var pe;n[46]!==G||n[47]!==j||n[48]!==y||n[49]!==v||n[50]!==L||n[51]!==re||n[52]!==k||n[53]!==I||n[54]!==D||n[55]!==ae||n[56]!==P||n[57]!==se||n[58]!==ue||n[59]!==ce||n[60]!==de||n[61]!==me?(pe=d.jsx(o("MWThreadListFocusableTable.react").MWThreadListFocusableTable,{children:d.jsx(r("ReQLPaginatedList.react"),{bounds:G,data:j,direction:"desc",hasReachedBottom:se,hasReachedTop:ue,imperativeRef:y,isLogDuplicatedItemEnabled:!0,isSufficientContentLoadedBelow:v,onDataLoaded:L,onReachingBottom:re,onReachingTop:k,onScroll:I,pageSize:D,renderEmptyContent:ce,renderFooter:de,renderHeader:me,renderItem:ae,renderLoadingAnimation:P,shouldOverscrollBehaviourContain:!0,xstyle:f.list})}),n[46]=G,n[47]=j,n[48]=y,n[49]=v,n[50]=L,n[51]=re,n[52]=k,n[53]=I,n[54]=D,n[55]=ae,n[56]=P,n[57]=se,n[58]=ue,n[59]=ce,n[60]=de,n[61]=me,n[62]=pe):pe=n[62],ie=pe}var _e;n[63]!==s?(_e=[f.container,s],n[63]=s,n[64]=_e):_e=n[64];var fe;return n[65]!==ie||n[66]!==h||n[67]!==q||n[68]!==_e||n[69]!==te?(fe=d.jsx(r("Box.react"),{"aria-label":h,"data-testid":void 0,ref:te,role:q,xstyle:_e,children:ie}),n[65]=ie,n[66]=h,n[67]=q,n[68]=_e,n[69]=te,n[70]=fe):fe=n[70],fe}l.default=v}),98);
__d("MWPParentThreadKeyContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null);l.default=u}),98);
__d("MWThreadListFolderItem.react",["BaseView.react","CometTextWithEntities.react","I64","MAWVault","MWAddOnCircleContainer.react","MWCMThreadTypes.react","MWChatTextTransform","MWPIsThreadUnread","MWThreadListFocusableTable.react","MWThreadListLastMessage.react","MWXListCellPressable.react","MWXTextPairing.react","react","react-compiler-runtime","useMatchMedia"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useMemo;function p(e){var t=o("react-compiler-runtime").c(28),n=e.icon,a=e.onClick,i=e.responsive,l=e.selected,c=e.size,d=e.thread,m=e.threadName,p=r("useMatchMedia")("(min-width: 900px)")||!i,_;t[0]!==d.snippet?(_=d.snippet!=null?o("MAWVault").unvault(d.snippet):null,t[0]=d.snippet,t[1]=_):_=t[1];var f=_,g;t[2]!==d.lastActivityTimestampMs?(g=(s||(s=o("I64"))).to_float(d.lastActivityTimestampMs),t[2]=d.lastActivityTimestampMs,t[3]=g):g=t[3];var h=g,y=o("MWPIsThreadUnread").useIsThreadUnread(d.threadKey),C;t[4]!==n||t[5]!==c?(C=u.jsx(r("MWAddOnCircleContainer.react"),{size:c,children:n}),t[4]=n,t[5]=c,t[6]=C):C=t[6];var b=C,v=m!=null?m:d.threadName,S;t[7]!==a?(S=function(){return a()},t[7]=a,t[8]=S):S=t[8];var R=S,L;t[9]===Symbol.for("react.memo_cache_sentinel")?(L={className:"xmzvs34 xf159sx"},t[9]=L):L=t[9];var E;t[10]!==p||t[11]!==y||t[12]!==h||t[13]!==f||t[14]!==d.threadType?(E=p?u.jsx(r("MWThreadListLastMessage.react"),{hasOngoingCall:!1,isUnread:y,lastMessageCtaType:null,lastMessageTimestamp:h,showTimestamp:!o("MWCMThreadTypes.react").isUnjoinedCMThread(d.threadType),snippet:f}):null,t[10]=p,t[11]=y,t[12]=h,t[13]=f,t[14]=d.threadType,t[15]=E):E=t[15];var k;t[16]!==v||t[17]!==p?(k=p?u.jsx(r("CometTextWithEntities.react"),{text:v.toString(),transforms:o("MWChatTextTransform").textTransforms}):null,t[16]=v,t[17]=p,t[18]=k):k=t[18];var I=!y,T;t[19]!==E||t[20]!==k||t[21]!==I?(T=u.jsx(r("MWXTextPairing.react"),{body:E,bodyLineLimit:1,headline:k,headlineLineLimit:1,level:4,reduceEmphasis:I}),t[19]=E,t[20]=k,t[21]=I,t[22]=T):T=t[22];var D;return t[23]!==b||t[24]!==R||t[25]!==l||t[26]!==T?(D=u.jsx(r("BaseView.react"),{testid:void 0,children:u.jsx(o("MWThreadListFocusableTable.react").MWThreadListFocusableTableRow,{children:u.jsx("div",{role:"row",children:u.jsx(o("MWThreadListFocusableTable.react").MWThreadListFocusableTableCell,{children:u.jsx("div",babelHelpers.extends({},L,{role:"gridcell",children:u.jsx(r("MWXListCellPressable.react"),{addOnStart:b,content:T,onPress:R,selected:l,size:"large"})}))})})})}),t[23]=b,t[24]=R,t[25]=l,t[26]=T,t[27]=D):D=t[27],D}l.default=p}),98);
__d("MWThreadListJobsItem.react",["fbt","ix","LSIntEnum","MWThreadListFolderItem.react","MWXIcon_DEPRECATED.react","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react"));function m(e){var t=o("react-compiler-runtime").c(11),n=e.onClick,a=e.responsive,i=e.selected,l=e.size,m=e.thread,p;t[0]!==n?(p=function(){return n((c||(c=o("LSIntEnum"))).ofNumber(-13))},t[0]=n,t[1]=p):p=t[1];var _=p,f;t[2]===Symbol.for("react.memo_cache_sentinel")?(f=d.jsx(r("MWXIcon_DEPRECATED.react"),{color:"primary",icon:o("fbicon")._(u("512668"),32),size:48}),t[2]=f):f=t[2];var g;t[3]===Symbol.for("react.memo_cache_sentinel")?(g=(c||(c=o("LSIntEnum"))).ofNumber(-13),t[3]=g):g=t[3];var h;t[4]===Symbol.for("react.memo_cache_sentinel")?(h=s._(/*BTDS*/"Jobs").toString(),t[4]=h):h=t[4];var y;return t[5]!==_||t[6]!==a||t[7]!==i||t[8]!==l||t[9]!==m?(y=d.jsx(r("MWThreadListFolderItem.react"),{icon:f,onClick:_,responsive:a,selected:i,size:l,systemFolder:g,thread:m,threadName:h}),t[5]=_,t[6]=a,t[7]=i,t[8]=l,t[9]=m,t[10]=y):y=t[10],y}l.default=m}),226);
__d("MWThreadList.react",["CometHeroHoldTrigger.react","CometHideableComponentExperiment.react","CometPageletWithDiv.react","CometRouterFocusRegion.react","CometTransientDialogProvider.react","CometVisualCompletion","CurrentEnvironment","FBLogger","FocusRegion.react","FocusRegionType","GroupsCometChatsEngagementLogger","I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","LSThreadBitOffset","MWCMGetValidId","MWCreatorMessagingUtils","MWJewelPopoverThreadlistContext.react","MWLSJewelMessageRequestsThreadContainer.react","MWPBaseThreadList.react","MWPBumpEntityKey","MWPParentThreadKeyContext","MWPThreadIsPage.react","MWPThreadsForThreadList","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","MWThreadKey.react","MWThreadListEmptyContainer.react","MWThreadListGlimmer.react","MWThreadListItem.react","MWThreadListJobsItem.react","MWThreadListSupportedThreadTypes","MWXacGating","MessagingFolderTag","MessengerWebUXLogger","QPLUserFlow","ReQL","ReQLSuspense","VirtualizationContainerContext","cr:12043","cr:13568","cr:21161","cr:21162","cr:2261","cr:6055","emptyFunction","focusScopeQueries","gkx","isMWXacGroupThread","mwCMIsThreadBumped","qpl","react","react-compiler-runtime","useCommunityFolder","useEmptyFunction","useGroupsCometIsInCCNegativeTest","useMWGetInboxFocusTargetFromRoute","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_=d||(d=o("react")),f=d,g=f.useCallback,h=f.useContext,y=f.useId,C=f.useMemo,b=f.useRef,v=(m||(m=o("I64"))).of_string("1766237507597786");function S(e){var t=o("react-compiler-runtime").c(1),n;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n={computeInboxFollowUps:R,reminders:[]},t[0]=n):n=t[0],n}function R(){}var L=(e=n("cr:12043"))!=null?e:{useInboxFollowUps:S},E=(s=(u=n("cr:21162"))==null?void 0:u.useFilterPinnedThreads)!=null?s:r("useEmptyFunction"),k=n("cr:6055")||r("useEmptyFunction");function I(e){return(m||(m=o("I64"))).equal(e.threadType,(p||(p=o("LSIntEnum"))).ofNumber(15))&&(m||(m=o("I64"))).equal(e.authorityLevel,(p||(p=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))&&(m||(m=o("I64"))).equal(e.lastReadWatermarkTimestampMs,(m||(m=o("I64"))).of_int32(-1))&&(m||(m=o("I64"))).equal(e.lastActivityTimestampMs,(m||(m=o("I64"))).of_int32(-1))}var T=5;function D(e){var t=e.lsEntryPoint,a=e.lsSubEntryPoint,i=e.messagingEntrypoint,l=e.onClickNestedFolderThread,s=e.onClose,u=e.responsive,c=e.selected,d=e.showFollowUpReminder,f=e.thread,g=h(r("MWJewelPopoverThreadlistContext.react")),y=r("useCommunityFolder")({parentThreadKey:(m||(m=o("I64"))).equal(f.threadType,(p||(p=o("LSIntEnum"))).ofNumber(17))?f.threadKey:f.parentThreadKey}),C=h(r("MWResponsiveLayoutContext.react")),v=C.pushCard,S=f.threadKey;o("Int64Hooks").useEffectInt64(function(){if(n("cr:2261")!=null)return g==null||g.add(S),function(){g==null||g.delete(S)}},[g,S]);var R=b({loggingTimeout:null,threadKey:(m||(m=o("I64"))).of_int32(-1)}),L=b(m.of_int32(-1)),E=h(r("MWPParentThreadKeyContext"));o("Int64Hooks").useEffectInt64(function(){if(E!=null){var e=(m||(m=o("I64"))).to_string(f.parentThreadKey),t=m.to_string(E);!(m||(m=o("I64"))).equal(L.current,S)&&f.folderName!==r("MessagingFolderTag").COMMUNITY&&e!==t&&r("FBLogger")("messenger_threadlist_folder_inconsistency").mustfix("Render thread item expected folder %s but receive %s",t,e)}I(f)?(m||(m=o("I64"))).equal(R.current.threadKey,S)||(R.current.threadKey=S,R.current.loggingTimeout=window.setTimeout(function(){r("FBLogger")("messenger_web").mustfix("Thread ID %s showing up as ghost",(m||(m=o("I64"))).to_string(S)),R.current.loggingTimeout=null},5e3)):(m||(m=o("I64"))).equal(R.current.threadKey,S)&&R.current.loggingTimeout!=null&&window.clearTimeout(R.current.loggingTimeout)},[E,f,S]);var k=o("Int64Hooks").useCallbackInt64(function(){o("MWCreatorMessagingUtils").isAPPlusMessageRequest(f)&&r("QPLUserFlow").start(r("qpl")._(421070823,"2981"),{annotations:{string:{entrypoint:o("MWCreatorMessagingUtils").fetchQPLEntrypoint(f)}},instanceKey:(m||(m=o("I64"))).to_int32(f.threadKey)}),r("mwCMIsThreadBumped")({secondaryParentThreadKey:f.secondaryParentThreadKey,threadType:f.threadType})&&o("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{is_bumped:"true"},community_id:y?(m||(m=o("I64"))).to_string(y.folderId):(m||(m=o("I64"))).to_string(f.parentThreadKey),event:"thread_open",group_id:o("MWCMGetValidId").MWCMHasValidFbGroupId(y==null?void 0:y.fbGroupId)?(m||(m=o("I64"))).to_string(y.fbGroupId):null,source:"chat_row",surface:t==="jewel"?"jewel_tray":"messenger_inbox",thread_id:(m||(m=o("I64"))).to_string(S)}),c&&v(o("MWResponsiveLayoutConstants").MWLayoutPanel.MESSAGE_LIST_PANEL)},[f.secondaryParentThreadKey,f.threadType,f.parentThreadKey,y,t,S,c,v]);return(m||(m=o("I64"))).equal(f.threadType,(p||(p=o("LSIntEnum"))).ofNumber(6))?(m||(m=o("I64"))).equal(S,(p||(p=o("LSIntEnum"))).ofNumber(-13))?_.jsx(r("MWThreadListJobsItem.react"),{onClick:l,responsive:u,selected:c,size:56,thread:f}):n("cr:2261")!=null&&(m||(m=o("I64"))).equal(S,(p||(p=o("LSIntEnum"))).ofNumber(-12))&&!r("gkx")("17132")?_.jsx(n("cr:2261"),{onClick:l,responsive:u,selected:c,size:56,thread:f}):n("cr:13568")!=null&&(m||(m=o("I64"))).equal(S,(p||(p=o("LSIntEnum"))).ofNumber(-18))?_.jsx(n("cr:13568"),{onClick:l,responsive:u,selected:c,size:56,thread:f}):null:_.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:_.jsx(r("MWThreadListGlimmer.react"),{parentComponentForDebug:"MWThreadListItem"}),name:"MWThreadListThreadListRow",children:_.jsx(o("MWPThreadIsPage.react").Provider,{threadKey:f.threadKey,children:_.jsx(o("MWThreadKey.react").MWThreadKeyProvider,{id:f.threadKey,children:_.jsx(r("CometTransientDialogProvider.react"),{children:_.jsx(r("MWThreadListItem.react"),{lsEntryPoint:t,lsSubEntryPoint:a,messagingEntrypoint:i,onClose:s,onThreadSelected:k,selected:c,showFollowUpReminder:d,size:56,thread:f})})})})})}D.displayName=D.name+" [from "+i.id+"]";var x=_.memo(D);function $(e){var t=e.gridLabel,a=e.filter,l=e.customThreadFilter,s=e.header,u=e.lsEntryPoint,d=e.onOpenMessageRequests,f=e.lsSubEntryPoint,h=e.parentThreadKey,S=e.responsive,R=e.selectedThreadKey,I=e.setHasScrolled,D=e.setIsEmptyInbox,$=e.threadListMessagingEntrypoint,N=e.onClose,M=N===void 0?r("emptyFunction"):N,w=e.onClickNestedFolderThread,A=w===void 0?r("emptyFunction"):w,F=e.preamble,O=(c||(c=r("useReStore")))(),B=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(O.tables.threads_ranges_v2__generated).getKeyRange(h)},[O,h],i.id+":387"),W=o("ReQLSuspense").useArray(function(){return o("MWPThreadsForThreadList").createIterable(O,h,B,["lastActivityTimestampMs","threadType"].concat(o("LSThreadBitOffset").threadCapabilityFields)).filter(function(e){return r("MWThreadListSupportedThreadTypes").some(function(t){return(m||(m=o("I64"))).equal(e.threadType,t)})?o("MWXacGating").isGroupsEnabled()?!0:!r("isMWXacGroupThread")(e):!1}).take(5)},[O,h,B],i.id+":400").pop(),q=y(),U=o("ReQLSuspense").useFirst(function(){return R!=null?o("ReQL").fromTableAscending(O.tables.threads,["parentThreadKey"]).getKeyRange(R):o("ReQL").empty()},[O,R],i.id+":426");k(q);var V=o("useGroupsCometIsInCCNegativeTest").useShouldDisableBumpToInboxForNegativeTest(),H=L.useInboxFollowUps(O),G=H.computeInboxFollowUps,z=H.reminders,j=g(function(e){if(e==null)return _.jsx("div",{});if((m||(m=o("I64"))).equal(e.threadKey,v)){var t=r("gkx")("14196");if(!t)return _.jsx("div",{})}if(o("CurrentEnvironment").facebookdotcom&&r("mwCMIsThreadBumped")({secondaryParentThreadKey:e.secondaryParentThreadKey,threadType:e.threadType})&&V)return _.jsx("div",{});var n;return(m||(m=o("I64"))).equal(e.threadKey,(p||(p=o("LSIntEnum"))).ofNumber(-13))||(m||(m=o("I64"))).equal(e.threadKey,(p||(p=o("LSIntEnum"))).ofNumber(-12))||(m||(m=o("I64"))).equal(e.threadKey,(p||(p=o("LSIntEnum"))).ofNumber(-18))?n=U!=null&&(m||(m=o("I64"))).equal(e.threadKey,U.parentThreadKey):n=R!=null&&(m||(m=o("I64"))).equal(R,e.threadKey),e!=null?_.jsx(r("CometHideableComponentExperiment.react"),{callingSurface:"thread_list",disableHiding:!0,children:_.jsx(x,{lsEntryPoint:u==="inboxThreadList"?W!=null&&(m||(m=o("I64"))).le(e.lastActivityTimestampMs,W.lastActivityTimestampMs)?"inboxRecentThreads":"inboxRemainingThreads":u,lsSubEntryPoint:f,messagingEntrypoint:$!=null?$:"jewel",onClickNestedFolderThread:A,onClose:M,responsive:S,selected:n,showFollowUpReminder:z.find(function(t){return(m||(m=o("I64"))).equal(t,e.threadKey)})!=null,thread:e})}):_.jsx("div",{})},[u,W,$,A,M,S,U,R,V,z]),K=g(function(e){I&&I(function(t){return e.scrollTop>0})},[I]),Q=r("MessengerWebUXLogger").useImpressionLoggerRef({eventName:"threadlist_impression"}),X=b(null),Y=C(function(){return{rootElementRef:X}},[X]),J=g(function(e){var t;X.current=(t=e==null?void 0:e.getScrollAreaElement())!=null?t:null},[]),Z=E(),ee=g(function(e){return(Z!=null?Z(e):!0)&&(l!=null?l(e):!0)},[Z,l]),te=r("useMWGetInboxFocusTargetFromRoute")(),ne=te===1,re=_.jsx(o("CometPageletWithDiv.react").Placeholder,{className:"x78zum5 xmz0i5r x6ikm8r x10wlt62",fallback:null,name:"MWThreadList",children:_.jsx(r("MWPParentThreadKeyContext").Provider,{value:h,children:_.jsx(r("VirtualizationContainerContext").Provider,{value:Y,children:_.jsx(r("MWPBaseThreadList.react"),{beforeContent:_.jsxs(_.Fragment,{children:[_.jsx(r("MWLSJewelMessageRequestsThreadContainer.react"),{onOpenMessageRequests:d}),F,n("cr:21161")&&_.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWPinnedThreadsList",children:_.jsx(n("cr:21161"),{customThreadFilter:l,parentThreadKey:h,renderItem:j})})]}),customThreadFilter:ee,emptyContent:_.jsx(r("MWThreadListEmptyContainer.react"),{filter:a,parentThreadKey:h}),filter:a,gridLabel:t,imperativeRef:J,onDataLoaded:G,onLoadMoreThreads:function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.threadlist","load_more_threads"),r("CometVisualCompletion").addFirstMarkerPoint("threadListLoadMoreThreads")},onScroll:K,pageSize:15,parentThreadKey:h,renderItem:j,renderLoadingAnimation:function(t,n){var e=t==="onBottom"&&n>T;return _.jsxs("div",{children:[_.jsx(r("MWThreadListGlimmer.react"),{numberOfItems:2,parentComponentForDebug:"MWThreadListLoadingAnimation",vcIgnore:e}),_.jsx(r("CometHeroHoldTrigger.react"),{description:"ThreadListLoadingMoreItems."+t,hold:!e})]})},setIsEmptyInbox:D})})})});return _.jsxs("div",{className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62",id:q,ref:Q,children:[s!=null?_.jsx(o("FocusRegion.react").FocusRegion,{children:s}):null,_.jsx(P,{autoFocusQuery:o("focusScopeQueries").tabbableScopeQuery,enabled:ne,children:_.jsx(o("FocusRegion.react").FocusRegion,{autoFocusQuery:ne?o("focusScopeQueries").tabbableScopeQuery:void 0,recoverFocusQuery:o("focusScopeQueries").tabbableScopeQuery,recoverFocusStrategy:o("FocusRegionType").RecoverFocusStrategy.Nearest,children:re})})]})}$.displayName=$.name+" [from "+i.id+"]";function P(e){var t=o("react-compiler-runtime").c(3),n=e.autoFocusQuery,a=e.children,i=e.enabled;if(!i)return a;var l;return t[0]!==n||t[1]!==a?(l=_.jsx(r("CometRouterFocusRegion.react"),{autoFocusQuery:n,children:a}),t[0]=n,t[1]=a,t[2]=l):l=t[2],l}l.default=$}),98);
__d("MWJewelNestedFolderThreadList.react",["CometScrollView.react","CometTopNavListDropdownCard.react","MWJewelNestedFolderThreadListHeader.react","MWThreadList.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(13),n=e.folder,a=e.onClose,i=e.onReturn,l=e.title,u;t[0]!==i||t[1]!==l?(u=s.jsx(r("MWJewelNestedFolderThreadListHeader.react"),{onReturn:i,title:l}),t[0]=i,t[1]=l,t[2]=u):u=t[2];var c;t[3]!==l?(c=typeof l=="string"?l:l.toString(),t[3]=l,t[4]=c):c=t[4];var d;t[5]!==n||t[6]!==a||t[7]!==c?(d=s.jsx(r("MWThreadList.react"),{gridLabel:c,lsEntryPoint:"jewelNestedFolder",onClose:a,parentThreadKey:n,responsive:!1}),t[5]=n,t[6]=a,t[7]=c,t[8]=d):d=t[8];var m;t[9]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx("div",{className:"x1qx5ct2"}),t[9]=m):m=t[9];var p;return t[10]!==u||t[11]!==d?(p=s.jsx(r("CometTopNavListDropdownCard.react"),{useMaxHeight:!0,children:s.jsxs(r("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!0,children:[u,d,m]})}),t[10]=u,t[11]=d,t[12]=p):p=t[12],p}l.default=u}),98);
__d("MWSearchLoggingTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Jewel:"jewel",Inbox:"inbox"});i.SearchSurface=e}),66);
__d("UniversalSearchQueryChangedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("843"),s=o("FalcoLoggerInternal").create("universal_search_query_changed",e),u=s;l.default=u}),98);
__d("UniversalSearchStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("840"),s=o("FalcoLoggerInternal").create("universal_search_start",e),u=s;l.default=u}),98);
__d("MWJewelLightspeedSearchTypeaheadViewList.react",["CometScrollView.react","MWChatSearchLightspeedTypeaheadViewList.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["xstyle"],s,u=s||(s=o("react")),c={scroll:{maxHeight:"x1wxkln1",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(10),a,i;n[0]!==t?(i=t.xstyle,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l;n[3]!==i?(l=[c.scroll,i],n[3]=i,n[4]=l):l=n[4];var s;n[5]!==a?(s=u.jsx(r("MWChatSearchLightspeedTypeaheadViewList.react"),babelHelpers.extends({showActionItems:!1},a)),n[5]=a,n[6]=s):s=n[6];var d;return n[7]!==l||n[8]!==s?(d=u.jsx(r("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,xstyle:l,children:s}),n[7]=l,n[8]=s,n[9]=d):d=n[9],d}l.default=d}),98);
__d("MWJewelSearchEmptyState.react",["fbt","MWXText.react","react","react-compiler-runtime","useCometTypeaheadEmptyState"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(3),n=e.queryString,a=r("useCometTypeaheadEmptyState")(),i;return t[0]!==a||t[1]!==n?(i=a?u.jsxs("div",{className:"xz9dl7a xpdmqnj xsag5q8 x1g0dm76",children:[u.jsx(r("MWXText.react"),{align:"center",type:"body2",children:s._(/*BTDS*/"Nothing found")}),u.jsx("br",{}),u.jsx(r("MWXText.react"),{align:"center",color:"tertiary",type:"body3",children:s._(/*BTDS*/"We couldn't find any matches for \"{query}.\" Try checking for typos or using complete words.",[s._param("query",n)])})]}):null,t[0]=a,t[1]=n,t[2]=i):i=t[2],i}l.default=c}),226);
__d("createMWJewelSearchTypeaheadViewStrategy.react",["CometTypeaheadProgressGlimmer.react","MWJewelLightspeedSearchTypeaheadViewList.react","MWJewelSearchEmptyState.react","MWJewelSearchTypeaheadViewItem.react","gkx","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ariaProps","entries","extraViewProps","highlightedEntry","isLoading","onAbandonTypeahead_DO_NOT_USE"],s,u=s||(s=o("react"));function c(t,n,o){return function(i){var a=i.ariaProps,l=i.entries,s=i.extraViewProps,c=i.highlightedEntry,d=i.isLoading,m=i.onAbandonTypeahead_DO_NOT_USE,p=babelHelpers.objectWithoutPropertiesLoose(i,e),_=l.length===0&&p.queryString.length>0,f=l.length>0&&d,g=l.length===0&&d&&p.queryString.length===0&&r("gkx")("15587");return g?u.jsx(r("CometTypeaheadProgressGlimmer.react"),{}):_?u.jsx(r("MWJewelSearchEmptyState.react"),{queryString:p.queryString}):u.jsxs(u.Fragment,{children:[u.jsx(r("MWJewelLightspeedSearchTypeaheadViewList.react"),{ariaProps:a,entries:l,highlightedEntry:c,xstyle:t,children:function(t){var e=t.entry,a=t.isActive,i=t.itemRole;return u.createElement(r("MWJewelSearchTypeaheadViewItem.react"),babelHelpers.extends({},p,{entry:e,extraViewItemProps:{loggingSessionId:n,onBeforeTokenAdded:o},isActive:a,key:e.key,role:i}))}}),f&&u.jsx(r("CometTypeaheadProgressGlimmer.react"),{})]})}}l.default=c}),98);
__d("MWJewelSearchSubscriptionTypeahead.react",["fbt","BaseSubscriptionTypeahead.react","CometTypeaheadBackButton.react","CometTypeaheadInputRoundedStrategy.react","CometTypeaheadLayoutContextualStrategy.react","MWChatSearchResultType","MWChatSearchSurfaces","MWChatSearchTypeaheadLightspeedSubscriptionDataSource","MWFacebookUserWithoutMessengerAccess","MWInboxRouteBuilder","MWLSSearchIssueSearchQuerySupportedTypes","MWLSThreadDisplayContext","MWPConversationSearchLogger","MWSearchLogging","MWSearchLoggingTypes","MWSearchQPLLogger","UniversalSearchEndFalcoEvent","UniversalSearchQueryChangedFalcoEvent","UniversalSearchStartFalcoEvent","cr:2012305","cr:8414","createMWJewelSearchTypeaheadViewStrategy.react","gkx","isArmadillo","react","useCometRouterDispatcher","useReStore","uuidv4","xplatToDOMRef"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["onChange","onFocus","onPressEntry","onSelectFreeformQuery"],u,c,d=c||(c=o("react")),m=c,p=m.useCallback,_=m.useEffect,f=m.useMemo,g=m.useRef,h=m.useState,y={searchInput:{marginTop:"x1xmf6yo",marginInlineEnd:"x14z9mp",marginBottom:"x1e56ztr",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xv54qhq",paddingBottom:"x18d9i69",paddingInlineStart:"xf7dkkf",$$css:!0},searchView:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",boxShadow:"x1gnnqk1",display:"x78zum5",minHeight:"xphu8jj",$$css:!0}},C=function(t){return r("createMWJewelSearchTypeaheadViewStrategy.react")(null,t)},b=r("gkx")("23390");function v(t){var a=t.onChange,i=t.onFocus,l=t.onPressEntry,c=t.onSelectFreeformQuery,m=babelHelpers.objectWithoutPropertiesLoose(t,e),v=h(null),S=v[0],R=v[1],L=g(null),E=(u||(u=r("useReStore")))(),k=g(!1),I=n("cr:8414")();_(function(){var e=L.current;return n("cr:2012305")!==null&&e!=null&&n("cr:2012305").trackTypingPerf(e,"MWJewelSearchTypeahead"),function(){n("cr:2012305")!==null&&e!=null&&n("cr:2012305").unregisterTypingPerf(e)}},[L]);var T=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),D=f(function(){return new(r("MWChatSearchTypeaheadLightspeedSubscriptionDataSource"))({database:E,excludedIDs:[],includeGroupSearch:T!=="ChatTab",includeMessageSearchEntry:r("gkx")("5801"),includeRecommendations:!0,lightspeedSupportedTypes:o("MWLSSearchIssueSearchQuerySupportedTypes").allSupportedTypes,source:r("MWChatSearchSurfaces").universal})},[E,T]),x=p(function(){R(null),S!=null&&(k.current||(r("UniversalSearchEndFalcoEvent").log(function(){return{end_action:8,is_epd:b,session_id:S,transport_type:null}}),k.current=!0)),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplCancel("abandon"),a("")},[a,S]),$=r("useCometRouterDispatcher")(),P=p(function(e){var t=e.rawData.resultType;if(t===r("MWChatSearchResultType").MESSAGE&&e.rawData.query!=null&&r("gkx")("5801")){var n=o("MWInboxRouteBuilder").buildMultiThreadMesageSearchURL({search:e.rawData.query});$!=null&&n!=null&&(r("MWPConversationSearchLogger").logUniversalMessageSearch(),$.go(n,{}))}else I==null||I(e);var a=function(){l!=null&&l(e)};if(S==null){a();return}o("MWSearchLogging").logResultSelected(S,m.queryString,e,k),a()},[l,S,m.queryString,$,I]);_(function(){return function(){o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplCancel("abandon")}},[]);var N=p(function(){var e=r("uuidv4")();R(e),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplStart({queryString:"",sessionInstanceId:e,surface:o("MWSearchLoggingTypes").SearchSurface.Jewel}),k.current=!1,r("UniversalSearchStartFalcoEvent").log(function(){return{is_epd:b,search_surface:0,session_id:e}}),r("UniversalSearchQueryChangedFalcoEvent").log(function(){return{query_length:"0",query_string:null,session_id:e}})},[E]),M=p(function(e){S!=null&&(r("UniversalSearchQueryChangedFalcoEvent").log(function(){return{query_length:e.length.toString(),query_string:e,session_id:S}}),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplStart({queryString:e,sessionInstanceId:S,surface:o("MWSearchLoggingTypes").SearchSurface.Jewel})),a(e)},[a,S]),w=function(){i()},A=o("MWFacebookUserWithoutMessengerAccess").useIsFacebookUserWithoutMessengerAccess(),F=s._(/*BTDS*/"Search Messenger"),O=s._(/*BTDS*/"Search messages"),B=A?O:F;return d.jsx(r("BaseSubscriptionTypeahead.react"),{dataSource:D,dataSourceFetchConfigParams:r("isArmadillo")()?{requestFlow:"network-upon-approve"}:void 0,inputExtraProps:{hideIconAnimation:!0,hideIconOnFocus:!0},inputRef:o("xplatToDOMRef").xplatToInputRef(L),inputStartContent:S!=null?d.jsx(r("CometTypeaheadBackButton.react"),{testid:void 0}):null,inputStrategyRenderer:r("CometTypeaheadInputRoundedStrategy.react"),layoutStrategyRenderer:r("CometTypeaheadLayoutContextualStrategy.react"),loggingContext:"messenger_jewel",onChange:M,onClose:x,onFocus:w,onOpen:N,onPressEntry:P,onSelectFreeformQuery:c,placeholder:B,queryString:m.queryString,shouldCloseOnEnter:!1,shouldHandleCloseAfterHandlePressEntry:!0,shouldQueryStringUpdateFromSelectedEntryOnClick:!1,viewStrategyRenderer:C(S),xstyles:{inputXStyle:y.searchInput,viewXStyle_DO_NOT_USE:y.searchView}})}v.displayName=v.name+" [from "+i.id+"]",l.default=v}),226);
__d("MWJewelThreadListSearchTypeahead.react",["CometRelay","FBLogger","I64","MWChatSearchFilteringUtils","MWChatSearchResultType","MWJewelSearchSubscriptionTypeahead.react","MWLogInboxFiltersInteraction","MWLogInteraction","MWPSearchSystem","MWThreadCreationUtil","QPLUserFlow","emptyFunction","qpl","react","react-compiler-runtime","setTimeoutCometSpeculative","useCometPreloader","useMWChatOpenTabForGroup","useMWChatOpenTabForPage","useMWChatOpenTabForUser","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useEffect,_=d.useState;function f(t){var n=o("react-compiler-runtime").c(25),a=t.onClose,i=_(""),l=i[0],u=i[1],d=r("useMWChatOpenTabForGroup")("jewelSearch"),m=d[0],f=r("useMWChatOpenTabForPage")("jewelSearch"),h=r("useMWChatOpenTabForUser")("jewelSearch"),y=h.openTabByThreadKey,C=h.openTabForUserWithoutPreloadedNavigationData,b=(e||(e=r("useReStore")))(),v=o("CometRelay").useRelayEnvironment(),S;n[0]!==b?(S=function(){return o("MWPSearchSystem").makeAll(b)},n[0]=b,n[1]=S):S=n[1];var R=S,L;n[2]!==R?(L=function(){r("setTimeoutCometSpeculative")(R,1e4)},n[2]=R,n[3]=L):L=n[3],p(L,void 0);var E;n[4]!==b||n[5]!==v||n[6]!==y||n[7]!==C?(E=function(t,n){var e=o("MWChatSearchFilteringUtils").getIsE2ee(n.rawData);if(e)return y(t,!0);o("MWThreadCreationUtil").getIsSecureBasedOnContactCapabilitiesForOneToOneThreadV2(n,v,b).then(async function(e){var r=e.isSecureThread,a=e.reason;if(a==="default_e2ee")C({unpreloadedReason:"jewelsearch_not_support_gql",userId:t});else{var i,l,u,c,d=await b.tables.threads.get((s||(s=o("I64"))).of_string(t));C({isSecureThread:r,reason:"MWJewelThreadListSearchTypeahead, FBID: "+t+", reason: "+(a!=null?a:"")+", searchSource: "+((i=n.rawData.searchSource)!=null?i:"")+", otherUserId: "+((l=n.rawData.otherUserId)!=null?l:"")+", hasCutoverThread: "+((u=(c=n.rawData.hasCutoverThread)==null?void 0:c.toString())!=null?u:"false")+", threadAuthorityLevel: "+(d!=null?(s||(s=o("I64"))).to_string(d.authorityLevel):"null"),unpreloadedReason:"jewelsearch_not_support_gql",userId:t})}}).catch(g)},n[4]=b,n[5]=v,n[6]=y,n[7]=C,n[8]=E):E=n[8];var k=E,I;n[9]!==a||n[10]!==m||n[11]!==f||n[12]!==k?(I=function(t){var e=t.rawData,n=e.id,o=e.resultType;e:switch(o){case r("MWChatSearchResultType").MESSAGE:break e;case r("MWChatSearchResultType").GROUP:{m(n);break e}case r("MWChatSearchResultType").USER:case r("MWChatSearchResultType").AI_BOT:{k(n,t);break e}case r("MWChatSearchResultType").PAGE:f(n)}a()},n[9]=a,n[10]=m,n[11]=f,n[12]=k,n[13]=I):I=n[13];var T=I,D=r("useCometPreloader")("button_aggressive",r("emptyFunction"),R),x=D.onHoverInPreloader,$=D.onHoverMovePreloader,P=D.onHoverOutPreloader,N;n[14]!==R?(N=function(){o("MWLogInteraction").logPopoverOpenCancel("initiate_search"),o("MWLogInboxFiltersInteraction").logInboxFiltersNavigationCancel("initiate_search"),R(),r("QPLUserFlow").start(r("qpl")._(25312244,"1683"))},n[14]=R,n[15]=N):N=n[15];var M;n[16]!==T||n[17]!==l||n[18]!==N?(M=c.jsx(r("MWJewelSearchSubscriptionTypeahead.react"),{onChange:u,onFocus:N,onPressEntry:T,queryString:l}),n[16]=T,n[17]=l,n[18]=N,n[19]=M):M=n[19];var w;return n[20]!==x||n[21]!==$||n[22]!==P||n[23]!==M?(w=c.jsx("div",{onMouseEnter:x,onMouseLeave:P,onMouseMove:$,children:M}),n[20]=x,n[21]=$,n[22]=P,n[23]=M,n[24]=w):w=n[24],w}function g(e){r("FBLogger")("messenger_search").mustfix("Error fetching contact capabilities: %s",e)}var h=c.memo(f);l.default=h}),98);
__d("CometMessagingJewelDropdownContent.react",["fbt","CometErrorBoundary.react","CometHeroInteractionWithDiv.react","CometMessagingJewelDropdownContentGlimmer.react","CometMessagingJewelDropdownEBUpsellContainer.react","CometPageletWithDiv.react","CometPlaceholder.react","CometRelay","CometTopNavListDropdownCard.react","FBLogger","I64","InteractionTracing","JSResourceForInteraction","LSContactBitOffset","LSIntEnum","LSPlatformErrorsCatcher.react","LSThreadRangeFilter","MAWUnrecoverableErrorBoundary.react","MWCMJewelContext","MWInboxContextSwitcherDeferred.react","MWInboxContextSwitcherGlimmer.react","MWInboxContextSwitcherUtils","MWJewelDropdownHeader.react","MWJewelMessengerLink.react","MWJewelNestedFolderThreadList.react","MWJewelPopoverDialogContext.react","MWJewelThreadListSearchTypeahead.react","MWThreadList.react","ODS","ReQL","ReQLSuspense","WebUXLoggingEntryPointContextProvider","XCometMessengerControllerRouteBuilder","gkx","lazyLoadComponent","qpl","react","react-compiler-runtime","useCometInteractionTracing","useMWChatSearchClearSearchResults","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m,p=m||(m=o("react")),_=m,f=_.memo,g=_.useCallback,h=_.useContext,y=_.useEffect,C=_.useState,b=r("lazyLoadComponent")(r("JSResourceForInteraction")("MAWJewelMessageRequestsAndSpamDropdownWithTab.react").__setRef("CometMessagingJewelDropdownContent.react")),v=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWRestrictedAccountsList.react").__setRef("CometMessagingJewelDropdownContent.react")),S=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWJewelArchivedChatsDropdown.react").__setRef("CometMessagingJewelDropdownContent.react")),R=r("lazyLoadComponent")(r("JSResourceForInteraction")("CometMessagingJewelDropdownErrorState.react").__setRef("CometMessagingJewelDropdownContent.react")),L=s._(/*BTDS*/"Chats");function E(e){r("FBLogger")("messenger_web_entrypoints").catching(e).mustfix("CometMessagingJewelDropdownQPBannerContainer failed to render")}var k=r("gkx")("22839")===!0;function I(t){var n=o("react-compiler-runtime").c(97),a=t.ebSoftblockUpsell,l=t.ebUpsellContainerQueryRef,m=t.onClose,_=t.pushPage,f=h(r("MWJewelPopoverDialogContext.react")),g=f.setIsOpenForDialog,R=r("useMWChatSearchClearSearchResults")(),I;n[0]!==R||n[1]!==m?(I=function(){R(),m()},n[0]=R,n[1]=m,n[2]=I):I=n[2];var D=I,x,$;n[3]!==R?(x=function(){return R},$=[R],n[3]=R,n[4]=x,n[5]=$):(x=n[4],$=n[5]),y(x,$);var P;n[6]===Symbol.for("react.memo_cache_sentinel")?(P=r("XCometMessengerControllerRouteBuilder").buildURL({}),n[6]=P):P=n[6];var N=P,M=h(r("MWCMJewelContext")),w=M.MWCMBlendedThreadListEntrypointRef,A=M.selectedFilterTab,F=M.setSelectedFilterTab,O=C(),B=O[0],W=O[1],q;n[7]===Symbol.for("react.memo_cache_sentinel")?(q=r("qpl")._(30610001,"3003"),n[7]=q):q=n[7];var U=r("useCometInteractionTracing")(q,"fast","INTERACTION"),V=(e||(e=r("useReStore")))(),H;n[8]!==V.tables._user_info?(H=function(){return o("ReQL").fromTableAscending(V.tables._user_info).map(T)},n[8]=V.tables._user_info,n[9]=H):H=n[9];var G;n[10]!==V?(G=[V],n[10]=V,n[11]=G):G=n[11];var z=o("ReQLSuspense").useFirst(H,G,i.id+":148"),j;n[12]!==V.tables.contacts||n[13]!==z?(j=function(){return z!=null?o("ReQL").fromTableAscending(V.tables.contacts,["capabilities","capabilities2"]).getKeyRange(z):o("ReQL").empty()},n[12]=V.tables.contacts,n[13]=z,n[14]=j):j=n[14];var K;n[15]!==V||n[16]!==z?(K=[V,z],n[15]=V,n[16]=z,n[17]=K):K=n[17];var Q=o("ReQLSuspense").useFirst(j,K,i.id+":152"),X;n[18]!==D||n[19]!==_?(X=function(){var e=r("InteractionTracing").startInteraction({interactionClass:"fast",qplEvent:r("qpl")._(30607516,"756"),tracePolicy:"comet.jewel.message_requests",traceType:"INTERACTION"});_(function(t){var n=t.onReturn;return p.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:p.jsx(r("CometMessagingJewelDropdownContentGlimmer.react"),{isFullHeight:!1,title:L,withBackButton:!0}),name:"MAWJewelMessageRequestsAndSpamDropdownWithTab",children:p.jsx(b,{interactionID:e,onClose:D,onReturn:n})})})},n[18]=D,n[19]=_,n[20]=X):X=n[20];var Y=X,J;n[21]!==Y||n[22]!==A?(J=o("MWInboxContextSwitcherUtils").shouldShowMessageRequestsFromFilter(A)?Y:void 0,n[21]=Y,n[22]=A,n[23]=J):J=n[23];var Z=J,ee;n[24]!==D||n[25]!==_?(ee=function(){_(function(e){var t=e.onReturn;return p.jsx(v,{hidePage:t,onClose:D})})},n[24]=D,n[25]=_,n[26]=ee):ee=n[26];var te=ee,ne;n[27]!==D||n[28]!==_?(ne=function(){(u||(u=o("ODS"))).bumpEntityKey(3185,"mw_jewel","archived_chats"),_(function(e){var t=e.onReturn;return p.jsx(S,{onClose:D,onReturn:t})})},n[27]=D,n[28]=_,n[29]=ne):ne=n[29];var re=ne,oe;n[30]!==D||n[31]!==_||n[32]!==Q?(oe=function(t){_(function(e){var n=e.onReturn;switch((c||(c=o("I64"))).to_int32(t)){case-13:return p.jsx(r("MWJewelNestedFolderThreadList.react"),{folder:t,onClose:D,onReturn:n,title:s._(/*BTDS*/"Jobs")});case-12:{var a=Q!=null&&o("LSContactBitOffset").has(86,Q),i=s._(/*BTDS*/"Marketplace");return a&&(i=s._(/*BTDS*/"_j[\"Buy and sell groups\",\"6a9a0529abd169ff91b49b4022dbf5a5\",1]")),p.jsx(r("MWJewelNestedFolderThreadList.react"),{folder:t,onClose:D,onReturn:n,title:i})}default:return r("FBLogger")("messenger_web_entrypoints").mustfix("Attempted to show an unimplemented nested system folder"),null}})},n[30]=D,n[31]=_,n[32]=Q,n[33]=oe):oe=n[33];var ae=oe,ie;n[34]!==a||n[35]!==l||n[36]!==A?(ie=p.jsx(r("CometMessagingJewelDropdownEBUpsellContainer.react"),{ebSoftblockUpsell:a,ebUpsellContainerQueryRef:l,selectedFilterTab:A}),n[34]=a,n[35]=l,n[36]=A,n[37]=ie):ie=n[37];var le=ie,se;n[38]!==A?(se=o("MWInboxContextSwitcherUtils").getCustomThreadFilter(A),n[38]=A,n[39]=se):se=n[39];var ue=se,ce;n[40]!==A?(ce=o("MWInboxContextSwitcherUtils").getParentThreadKeyFromFilter(A),n[40]=A,n[41]=ce):ce=n[41];var de=ce,me;n[42]!==a||n[43]!==A?(me=a!=null&&o("MWInboxContextSwitcherUtils").shouldShowEBUpsellFromFilter(A),n[42]=a,n[43]=A,n[44]=me):me=n[44];var pe=!me,_e;n[45]!==D||n[46]!==re||n[47]!==Y||n[48]!==te?(_e=p.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWJewelDropdownHeader",children:p.jsx(r("MWJewelDropdownHeader.react"),{inboxUrl:N,onClose:D,onOpenArchivedChats:re,onOpenMessageRequests:Y,onOpenRestrictedAccountsList:te,title:L})}),n[45]=D,n[46]=re,n[47]=Y,n[48]=te,n[49]=_e):_e=n[49];var fe;n[50]===Symbol.for("react.memo_cache_sentinel")?(fe={className:"x1c4vz4f"},n[50]=fe):fe=n[50];var ge;n[51]!==D||n[52]!==_?(ge=p.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWJewelThreadListSearchTypeahead",children:p.jsx(r("MWJewelThreadListSearchTypeahead.react"),{onClose:D,pushPage:_})}),n[51]=D,n[52]=_,n[53]=ge):ge=n[53];var he;n[54]===Symbol.for("react.memo_cache_sentinel")?(he=p.jsx(r("MWInboxContextSwitcherGlimmer.react"),{}),n[54]=he):he=n[54];var ye;n[55]!==U||n[56]!==g||n[57]!==F?(ye=function(t){U(function(e){W(e.getTraceId())},void 0,void 0,"comet.jewel.messenger."+o("MWInboxContextSwitcherUtils").getTracePolicyFromFilter(t)),g(!1),F==null||F(t)},n[55]=U,n[56]=g,n[57]=F,n[58]=ye):ye=n[58];var Ce;n[59]!==ae||n[60]!==Y||n[61]!==de||n[62]!==A||n[63]!==ye?(Ce=p.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:he,name:"MWInboxContextSwitcher",children:p.jsx(r("MWInboxContextSwitcherDeferred.react"),{entryPoint:"jewel",onTabChange:ye,parentThreadKey:de,selectedFilterTab:A,showMessageRequests:Y,showNestedFolderThreads:ae})}),n[59]=ae,n[60]=Y,n[61]=de,n[62]=A,n[63]=ye,n[64]=Ce):Ce=n[64];var be;n[65]!==ge||n[66]!==Ce?(be=p.jsxs("div",babelHelpers.extends({},fe,{children:[ge,Ce]})),n[65]=ge,n[66]=Ce,n[67]=be):be=n[67];var ve=pe&&le,Se;n[68]!==_e||n[69]!==be||n[70]!==ve?(Se=p.jsxs(p.Fragment,{children:[_e,be,ve]}),n[68]=_e,n[69]=be,n[70]=ve,n[71]=Se):Se=n[71];var Re=Se,Le;n[72]!==A?(Le=o("MWInboxContextSwitcherUtils").getJewelEntryPointFromFilter(A),n[72]=A,n[73]=Le):Le=n[73];var Ee=Le,ke;n[74]!==A?(ke=o("MWInboxContextSwitcherUtils").getJewelLsSubEntryPointFromFilter(A),n[74]=A,n[75]=ke):ke=n[75];var Ie=ke,Te;n[76]!==w||n[77]!==ue||n[78]!==a||n[79]!==Ie||n[80]!==ae||n[81]!==D||n[82]!==Z||n[83]!==de||n[84]!==A?(Te=a!=null&&o("MWInboxContextSwitcherUtils").shouldShowEBUpsellFromFilter(A)?p.jsx(p.Fragment,{children:a}):p.jsxs(p.Fragment,{children:[k&&(c||(c=o("I64"))).equal(A,(d||(d=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").COMMUNITIES))?p.jsx(r("CometPlaceholder.react"),{fallback:p.jsx(r("CometMessagingJewelDropdownContentGlimmer.react"),{isFullHeight:!0}),name:"CometMessagingJewelDropdownContent.MWCMBlendedThreadList",children:w!=null?p.jsx(o("CometRelay").EntryPointContainer,{entryPointReference:w,props:{filter:A,gridLabel:L.toString(),header:null,lsEntryPoint:"jewel",lsSubEntryPoint:Ie,onDropdownClose:D,onError:E,parentThreadKey:de}}):null}):p.jsx(r("MWThreadList.react"),{customThreadFilter:ue,filter:A,gridLabel:L.toString(),lsEntryPoint:"jewel",lsSubEntryPoint:Ie,onClickNestedFolderThread:ae,onClose:D,onOpenMessageRequests:Z,parentThreadKey:de,responsive:!1},(c||(c=o("I64"))).to_string(A)),p.jsx(r("MWJewelMessengerLink.react"),{onClick:D,url:N})]}),n[76]=w,n[77]=ue,n[78]=a,n[79]=Ie,n[80]=ae,n[81]=D,n[82]=Z,n[83]=de,n[84]=A,n[85]=Te):Te=n[85];var De;n[86]!==Re||n[87]!==Te?(De=p.jsxs(r("CometTopNavListDropdownCard.react"),{testid:void 0,useFullHeight:!0,useMaxHeight:!0,children:[Re,Te]}),n[86]=Re,n[87]=Te,n[88]=De):De=n[88];var xe=De,$e;n[89]===Symbol.for("react.memo_cache_sentinel")?($e=p.jsx(r("CometMessagingJewelDropdownContentGlimmer.react"),{isFullHeight:!0,title:L}),n[89]=$e):$e=n[89];var Pe;n[90]!==B||n[91]!==A||n[92]!==xe?(Pe=B!=null?p.jsx(r("CometHeroInteractionWithDiv.react"),{interactionDesc:"JewelThreadList."+o("MWInboxContextSwitcherUtils").getInteractionDescFromFilter(A),interactionUUID:B,children:xe}):xe,n[90]=B,n[91]=A,n[92]=xe,n[93]=Pe):Pe=n[93];var Ne;return n[94]!==Pe||n[95]!==Ee?(Ne=p.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:$e,name:"MWJewelDropdownContent",children:p.jsx(o("WebUXLoggingEntryPointContextProvider").WebUXLoggingEntryPointContextProvider,{value:Ee,children:Pe})}),n[94]=Pe,n[95]=Ee,n[96]=Ne):Ne=n[96],Ne}function T(e){return e.facebookUserId}function D(e){var t=o("react-compiler-runtime").c(2),n=x,a;return t[0]!==e?(a=p.jsx(r("MAWUnrecoverableErrorBoundary.react"),{fallback:n,children:p.jsx(r("CometErrorBoundary.react"),{fallback:n,children:p.jsx(r("LSPlatformErrorsCatcher.react"),{fallback:n,children:p.jsx(I,babelHelpers.extends({},e))})})}),t[0]=e,t[1]=a):a=t[1],a}function x(e){return p.jsx(R,{error:e})}x.displayName=x.name+" [from "+i.id+"]";var $=f(D);l.default=$}),226);
__d("CometMessagingJewelDropdown.react",["fbt","BaseMultiStepContainer.react","BasePopoverReflowSheetContext","CometMessagingJewelDropdownContent.react","CometTopNavListDropdown.react","MWLogInboxFiltersInteraction","MWLogInteraction","justknobx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useContext;function p(e){var t=o("react-compiler-runtime").c(9),n=e.props,a=e.queries,i=n.onClose,l=a.ebUpsellContainerQueryRef,c=o("MWLogInteraction").getPopoverTrace();c==null||c.addAnnotation("PopoverEntrypoint","CometMessagingJewelDropdown");var d=m(r("BasePopoverReflowSheetContext")),p=d.isReflowSheet,f=_,g;t[0]===Symbol.for("react.memo_cache_sentinel")?(g=s._(/*BTDS*/"Messenger"),t[0]=g):g=t[0];var h;t[1]!==p?(h={0:{className:"x1cvmir6"},1:{className:"x14atkfc"}}[!!p<<0],t[1]=p,t[2]=h):h=t[2];var y;t[3]!==l||t[4]!==i?(y=u.jsx(r("BaseMultiStepContainer.react"),{fitContentWidth:!0,onPageChange:f,children:function(t){return u.jsx(r("CometMessagingJewelDropdownContent.react"),{ebUpsellContainerQueryRef:l,onClose:i,pushPage:t})}}),t[3]=l,t[4]=i,t[5]=y):y=t[5];var C;return t[6]!==h||t[7]!==y?(C=u.jsx(r("CometTopNavListDropdown.react"),{label:g,name:"MWJewelDropdown",children:u.jsx("div",babelHelpers.extends({},h,{children:y}))}),t[6]=h,t[7]=y,t[8]=C):C=t[8],C}function _(e){e>0&&r("justknobx")._("3802")&&(o("MWLogInteraction").logPopoverOpenCancel("popover_page_change"),o("MWLogInboxFiltersInteraction").logInboxFiltersNavigationCancel("popover_page_change"))}l.default=p}),226);
__d("FDSResizeFreeFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("580260"),20),u=e;l.default=u}),98);
__d("LSVerifyThreadsActivityStatus",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("server_mode",e[1]),r[0].set("from_timestamp_ms",e[2]),r[0].set("threads",e[3]),r[0].set("session_id",e[0]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),"verify_threads_activity_status",t.i64.cast([0,648]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxVerifyThreadsActivityStatusStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSVerifyThreadsActivityStatusStoredProcedure",["LSSynchronousPromise","LSVerifyThreadsActivityStatus","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSVerifyThreadsActivityStatus"),a.sessionId,a.serverMode,a.fromTimestampMs,a.threads);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWUnsupportedIndexedDBNuxKey",["WebStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="maw_unsupported_browser_nux_dismissed",u="dismissed",c=function(){var t;return((t=(e||(e=r("WebStorage"))).getLocalStorageForRead())==null?void 0:t.getItem(s))===u},d=function(){var t;(t=(e||(e=r("WebStorage"))).getLocalStorage())==null||t.setItem(s,u)};l.getIsDismissed=c,l.setIsDismissed=d}),98);
__d("MAWUserVisibleErrorsNux.react",["ix","MAWLoggerUtils","MWXIconCautionTriangle","MWXQPCard.react","QPLUserFlow","gkx","qpl","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useEffect,d={hasNoMargin:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(17),n=e.hasNoMargin,a=e.icon,i=e.nuxBodyText,l=e.nuxButtonProps,m=e.nuxTitleText,p=e.onCloseButtonClick,_=e.ref,f=e.secondaryButtonProps,g;t[0]===Symbol.for("react.memo_cache_sentinel")?(g=o("MAWLoggerUtils").getInstanceKey(),t[0]=g):g=t[0];var h=g,y,C;t[1]!==m?(y=function(){return r("QPLUserFlow").start(r("qpl")._(1056846286,"652"),{annotations:{string:{nuxTitleText:m.toString()}},instanceKey:h}),(function(){return r("QPLUserFlow").endSuccess(r("qpl")._(1056846286,"652"),{instanceKey:h})})},C=[h,m],t[1]=m,t[2]=y,t[3]=C):(y=t[2],C=t[3]),c(y,C);var b;t[4]===Symbol.for("react.memo_cache_sentinel")?(b=r("gkx")("4425")?s("428841"):s("212797"),t[4]=b):b=t[4];var v=b,S;t[5]===Symbol.for("react.memo_cache_sentinel")?(S=r("gkx")("4425")?{props:{src:s("1745665")},type:"image"}:{props:{color:"negative",icon:r("MWXIconCautionTriangle"),size:24},type:"icon"},t[5]=S):S=t[5];var R=S,L;t[6]!==a?(L=a!=null?a:r("gkx")("23219")?{props:{src:v},type:"image"}:R,t[6]=a,t[7]=L):L=t[7];var E=n===!0?d.hasNoMargin:void 0,k;return t[8]!==i||t[9]!==l||t[10]!==m||t[11]!==p||t[12]!==_||t[13]!==f||t[14]!==L||t[15]!==E?(k=u.jsx("div",{"data-testid":void 0,children:u.jsx(r("MWXQPCard.react"),{addOnPrimary:l,addOnSecondary:f,body:i,headline:m,icon:L,onClose:p,ref:_,xstyle:E})}),t[8]=i,t[9]=l,t[10]=m,t[11]=p,t[12]=_,t[13]=f,t[14]=L,t[15]=E,t[16]=k):k=t[16],k}l.default=m}),98);
__d("MAWUserVisibleErrorsNuxWrapper.react",["fbt","CometPlaceholder.react","MAWIssueNewUserVisibleErrors","MAWUnsupportedIndexedDBNuxKey","cr:4216","cr:9767","promiseDone","react","react-compiler-runtime","requireDeferred","useMAWGetUserVisibleErrors","useMAWUnsupportedBrowserNUX"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useState,p=r("requireDeferred")("MAWEncryptionErrorHandler").__setRef("MAWUserVisibleErrorsNuxWrapper.react");function _(e){var t=o("react-compiler-runtime").c(23),a=e.children,i=e.hasNoMargin,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=o("MAWUnsupportedIndexedDBNuxKey").getIsDismissed(),t[0]=l):l=t[0];var c=m(l),d=c[0],_=c[1],g;if(t[1]===Symbol.for("react.memo_cache_sentinel")){var h;g=(h=n("cr:4216").buildUri({cms_id:"597429858389632"}).setDomain("www.facebook.com"))==null||(h=h.setProtocol("https"))==null?void 0:h.toString(),t[1]=g}else g=t[1];var y=g,C;t[2]===Symbol.for("react.memo_cache_sentinel")?(C={label:s._(/*BTDS*/"Learn more"),linkProps:{target:"_blank",url:y}},t[2]=C):C=t[2];var b=C,v=o("useMAWUnsupportedBrowserNUX").useMAWUnsupportedBrowserNUX(),S=v.shouldShowQP,R=m(!1),L=R[0],E=R[1],k=r("useMAWGetUserVisibleErrors")(),I=k[0],T=k[1],D;t[3]!==T||t[4]!==(I==null?void 0:I.errorExtraData)?(D=function(){r("promiseDone")((async function(){if(E(!0),(I==null?void 0:I.errorExtraData)==="MAWEARKeychainDecryptionError"){var e=await p.load();await e.handleEARKeychainError()}return T()})(),f,function(){E(!1)})},t[3]=T,t[4]=I==null?void 0:I.errorExtraData,t[5]=D):D=t[5];var x=D,$;t[6]!==(I==null?void 0:I.errorBodyText)?($=o("MAWIssueNewUserVisibleErrors").errorMsgBodyToFbtMap.get(I==null?void 0:I.errorBodyText),t[6]=I==null?void 0:I.errorBodyText,t[7]=$):$=t[7];var P=$,N;t[8]!==(I==null?void 0:I.errorTitleText)?(N=o("MAWIssueNewUserVisibleErrors").errorMsgTitleToFbtMap.get(I==null?void 0:I.errorTitleText),t[8]=I==null?void 0:I.errorTitleText,t[9]=N):N=t[9];var M=N,w;t[10]!==a||t[11]!==T||t[12]!==d||t[13]!==P||t[14]!==M||t[15]!==I||t[16]!==i||t[17]!==L||t[18]!==x||t[19]!==S?(w=n("cr:9767")&&S&&!d?u.jsx(n("cr:9767"),{hasNoMargin:i,nuxBodyText:o("MAWIssueNewUserVisibleErrors").MAWUnsupportedIndexedDBErrorMsg,nuxButtonProps:b,nuxTitleText:o("MAWIssueNewUserVisibleErrors").MAWUnsupportedIndexedDBErrorMsgTitle,onCloseButtonClick:function(){_(!0),o("MAWUnsupportedIndexedDBNuxKey").setIsDismissed()}}):I&&n("cr:9767")&&M!=null&&P!=null?u.jsx(n("cr:9767"),{nuxBodyText:P,nuxButtonProps:{disabled:L,label:s._(/*BTDS*/"Refresh"),loading:L,onPress:x},nuxTitleText:M,onCloseButtonClick:function(){r("promiseDone")(T())}}):a,t[10]=a,t[11]=T,t[12]=d,t[13]=P,t[14]=M,t[15]=I,t[16]=i,t[17]=L,t[18]=x,t[19]=S,t[20]=w):w=t[20];var A;return t[21]!==w?(A=u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MAWUserVisibleErrorsNuxWrapper",children:w}),t[21]=w,t[22]=A):A=t[22],A}function f(){window.location.reload(!0)}l.default=_}),226);
__d("MWEBRestoreJewelSoftblockPersistentBannerWrapperDeferred.withSegmentationCheck.react",["cr:1266"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:1266")}),98);
__d("MWEBVirtualDevicesContextProvider.react",["MAWOneTimeCodeGating","MWEBVirtualDevicesContext.react","cr:12343","react","react-compiler-runtime","useMWEncryptedBackupsListenForChangesToVirtualDevicesV2"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=o("react-compiler-runtime").c(16),a=e.children,i=e.hasOtcEligibleDevicesInitialValue,l=e.hsmCreationTimeInitialValue,u=e.offlineDevicesCountInitialValue,c=e.vestaClientIDInitialValue,d=u===void 0?-1:u,m=c!=null?c:void 0,p;t[0]!==l||t[1]!==d||t[2]!==m?(p={hsmCreationTimeInitialValue:l,offlineDevicesCountInitialValue:d,vestaClientIDInitialValue:m},t[0]=l,t[1]=d,t[2]=m,t[3]=p):p=t[3];var _=r("useMWEncryptedBackupsListenForChangesToVirtualDevicesV2")(p),f=_.hsmCreationTime,g=_.offlineDevicesCount,h=_.vestaClientID,y=n("cr:12343")(),C=y.hasOtcEligibleDevices,b;t[4]!==C||t[5]!==i?(b=o("MAWOneTimeCodeGating").isOneTimeCodeEnabled()&&(i===!0||C),t[4]=C,t[5]=i,t[6]=b):b=t[6];var v=b,S=h!=null,R;t[7]!==v||t[8]!==f||t[9]!==g||t[10]!==S||t[11]!==h?(R={virtualDeviceInfo:{doesUserHaveOtcEligibleDevices:v,hsmCreationTime:f,isPINCodeRegistered:S,offlineDevicesCount:g,vestaClientID:h}},t[7]=v,t[8]=f,t[9]=g,t[10]=S,t[11]=h,t[12]=R):R=t[12];var L=R,E;return t[13]!==a||t[14]!==L?(E=s.jsx(o("MWEBVirtualDevicesContext.react").MWEBVirtualDevicesContext.Provider,{value:L,children:a}),t[13]=a,t[14]=L,t[15]=E):E=t[15],E}l.default=c}),98);
__d("MWEncryptedBackupsJewelNuxWrapper_query.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider"}],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsJewelNuxWrapper_query",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup"},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'}],storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MWEBVestaUserInfoContextProvider_viewer"},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_auto_eb_upsells",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{condition:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_new_user_onboarding_upsells",plural:!1,selections:[{args:null,documentName:"MWEncryptedBackupsJewelNuxWrapper_query",fragmentName:"MWEBNewUserOnboardingThreadListUpsellWrapper_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null}]}],storageKey:null},action:"THROW",path:"viewer"},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query"}]},{args:null,kind:"FragmentSpread",name:"useEncryptedBackupsProcessStatePreLoaded_query"}],type:"Query",abstractKey:null};a.exports=e}),null);
__d("useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup",selections:[{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null}],storageKey:null}],type:"XFBEncryptedBackup",abstractKey:null};a.exports=e}),null);
__d("useMWEncryptedBackupsGetVirtualDevicesPreloaded",["CometRelay","react","react-compiler-runtime","useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback;function c(t){var r=o("react-compiler-runtime").c(4),a=t.encryptedBackup,i=o("CometRelay").useFragment(e!==void 0?e:e=n("useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup.graphql"),a),l;r[0]!==(i==null?void 0:i.virtual_devices)?(l=function(){var e=0,t=null;return i==null||i.virtual_devices.forEach(function(n){e:switch(n.device_type){case"HSM":{t=n.client_generated_id;break e}case"OFFLINE":{e=e+1;break e}default:}}),{offlineDevicesCount:e,vestaClientID:t}},r[0]=i==null?void 0:i.virtual_devices,r[1]=l):l=r[1],i==null||i.virtual_devices;var s=l,u;return r[2]!==s?(u={getVirtualDevices:s},r[2]=s,r[3]=u):u=r[3],u}l.default=c}),98);
__d("MWEncryptedBackupsJewelNuxWrapper.react",["CometErrorBoundary.react","CometPlaceholder.react","CometRelay","HeroInteractionIgnoreWithDiv.react","JSResourceForInteraction","MWChatEncryptedBackupsQPLSource.enum","MWEBEntrypointsKillswitch.enum","MWEBMobileOnboardingEligibility","MWEBRestoreJewelSoftblockPersistentBannerWrapperDeferred.withSegmentationCheck.react","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEBVirtualDevicesContextProvider.react","MWEBWebOnboardingUpsellUtils","MWEncryptedBackupsJewelNuxWrapper_query.graphql","MWEncryptedBackupsThreadListQPWrapper.react","cr:10269","cr:11983","cr:12316","cr:20045","cr:2046","react","react-compiler-runtime","useEncryptedBackupsProcessStatePreLoaded","useMWEncryptedBackupsGetVirtualDevicesPreloaded"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=(s=n("cr:12316"))!=null?s:n("cr:11983"),m=o("MWEBMobileOnboardingEligibility").requireMobileOnboardingIfEligible(r("JSResourceForInteraction")("MWEBMobileOnboardingQPBannerWrapper.react").__setRef("MWEncryptedBackupsJewelNuxWrapper.react"));function p(t){var a,i,l=o("react-compiler-runtime").c(19),s=t.children,u=t.query,d=o("CometRelay").useFragment(e!==void 0?e:e=n("MWEncryptedBackupsJewelNuxWrapper_query.graphql"),u),m;l[0]!==d?(m={entrypoint:r("MWEBEntrypointsKillswitch.enum").JEWEL_THREADLIST,query:d},l[0]=d,l[1]=m):m=l[1];var p=r("useEncryptedBackupsProcessStatePreLoaded")(m),f=d==null?void 0:d.xfb_backup,g;l[2]!==f?(g={encryptedBackup:f},l[2]=f,l[3]=g):g=l[3];var h=r("useMWEncryptedBackupsGetVirtualDevicesPreloaded")(g),y=h.getVirtualDevices,C;l[4]!==y?(C=y(),l[4]=y,l[5]=C):C=l[5];var b=C,v=b.offlineDevicesCount,S=b.vestaClientID,R=(a=d==null||(i=d.xfb_backup)==null?void 0:i.has_otc_eligible_devices)!=null?a:void 0,L=d.viewer.if_viewer_can_see_messenger_eb_auto_eb_upsells!=null,E;l[6]!==p||l[7]!==s||l[8]!==d||l[9]!==L?(E=c.jsx(_,{backupState:p,children:s,fragment:d,isUserEligibleForAutoEB:L}),l[6]=p,l[7]=s,l[8]=d,l[9]=L,l[10]=E):E=l[10];var k;l[11]!==d.viewer||l[12]!==E?(k=c.jsx(o("MWEBVestaUserInfoContext.react").MWEBVestaUserInfoContextProvider,{viewer$key:d.viewer,children:E}),l[11]=d.viewer,l[12]=E,l[13]=k):k=l[13];var I;return l[14]!==v||l[15]!==R||l[16]!==k||l[17]!==S?(I=c.jsx(r("MWEBVirtualDevicesContextProvider.react"),{hasOtcEligibleDevicesInitialValue:R,offlineDevicesCountInitialValue:v,vestaClientIDInitialValue:S,children:k}),l[14]=v,l[15]=R,l[16]=k,l[17]=S,l[18]=I):I=l[18],I}function _(e){var t=o("react-compiler-runtime").c(15),a=e.backupState,i=e.children,l=e.fragment,s=e.isUserEligibleForAutoEB,u=s===void 0?!1:s,p=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),_=p.virtualDeviceInfo;switch(a){case 3:{if(d!=null&&!_.isPINCodeRegistered){var f;return t[0]!==i?(f=c.jsx(d,{bannerSource:r("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_PERSISTENT_BANNER,source:r("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP,children:i}),t[0]=i,t[1]=f):f=t[1],f}return i}case 4:{var g;return t[2]!==i||t[3]!==l?(g=n("cr:2046")||r("MWEBRestoreJewelSoftblockPersistentBannerWrapperDeferred.withSegmentationCheck.react")?c.jsx(r("HeroInteractionIgnoreWithDiv.react"),{children:c.jsx(r("CometErrorBoundary.react"),{fallback:function(){return i},children:r("MWEBRestoreJewelSoftblockPersistentBannerWrapperDeferred.withSegmentationCheck.react")!=null?c.jsx(r("MWEBRestoreJewelSoftblockPersistentBannerWrapperDeferred.withSegmentationCheck.react"),{trigger:o("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsQPTrigger.JEWEL,children:i}):n("cr:2046")!=null&&c.jsx(n("cr:2046"),{fragmentKey:l,trigger:o("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsQPTrigger.JEWEL,children:i})})}):i,t[2]=i,t[3]=l,t[4]=g):g=t[4],g}case 2:{if(o("MWEBWebOnboardingUpsellUtils").IS_E2E_TEST_UNRELATED_TO_ENCRYPTED_BACKUPS||u)return i;var h;t[5]!==i?(h=n("cr:20045")?c.jsx(n("cr:20045"),{source:r("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP,children:i}):i,t[5]=i,t[6]=h):h=t[6];var y=h,C;t[7]!==y?(C=function(){return y},t[7]=y,t[8]=C):C=t[8];var b;t[9]!==y||t[10]!==l.viewer.if_viewer_can_see_messenger_eb_new_user_onboarding_upsells?(b=l.viewer.if_viewer_can_see_messenger_eb_new_user_onboarding_upsells!=null?c.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWEncryptedBackupsJewelNuxWrapper.OnboardingThreadListQP",children:c.jsx(o("CometRelay").MatchContainer,{match:l.viewer.if_viewer_can_see_messenger_eb_new_user_onboarding_upsells,props:{bannerSource:r("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_PERSISTENT_BANNER,children:y,qpSource:r("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_ONBOARDING_QP}})}):n("cr:10269")?c.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWEncryptedBackupsJewelNuxWrapper.OnboardingThreadListQP",children:c.jsx(n("cr:10269"),{source:r("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP,children:y})}):c.jsx(m,{fallback:y,props:{children:y,source:r("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_ONBOARDING_QP,trigger:o("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsQPTrigger.JEWEL}}),t[9]=y,t[10]=l.viewer.if_viewer_can_see_messenger_eb_new_user_onboarding_upsells,t[11]=b):b=t[11];var v;return t[12]!==C||t[13]!==b?(v=c.jsx(r("HeroInteractionIgnoreWithDiv.react"),{children:c.jsx(r("CometErrorBoundary.react"),{fallback:C,children:b})}),t[12]=C,t[13]=b,t[14]=v):v=t[14],v}default:return i}}l.default=p}),98);
__d("MWEncryptedBackupsQPWithPinPlaceholder.react",["MWXColumn.react","MWXGlimmer.react","MWXRow.react","MWXRowItem.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("gkx")("23433"),c={logoGlimmer:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"xxk0z11",width:"xvy4d1p",$$css:!0},pinInputGlimmer:{borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",height:"xc9qbxq",$$css:!0},root:{backgroundColor:"xlhe6ec",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x972fbf",borderInlineEndWidth:"x10w94by",borderBottomWidth:"x1qhh985",borderInlineStartWidth:"x14e42zd",boxShadow:"xjf5wm9",boxSizing:"x9f619",minWidth:"xeuugli",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"x1iorvi4",paddingInlineEnd:"x11lfxj5",paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",$$css:!0},textGlimmer:{borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",height:"x1qx5ct2",$$css:!0}};function d(){var e=o("react-compiler-runtime").c(6),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={0:{className:"xlhe6ec x1obq294 x5a5i1n xde0f50 x15x8krk x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x972fbf x10w94by x1qhh985 x14e42zd xjf5wm9 x9f619 xeuugli x6ikm8r x10wlt62 x11lfxj5 x135b78x xw7yly9 x1ys307a x1yztbdb xyqm7xq x1l90r2v xyamay9"},1:{className:"xlhe6ec x1obq294 x5a5i1n xde0f50 x15x8krk x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x972fbf x10w94by x1qhh985 x14e42zd xjf5wm9 x9f619 xeuugli x6ikm8r x10wlt62 x11lfxj5 x135b78x xw7yly9 x1ys307a x1yztbdb xyqm7xq x2lwn1j xsag5q8 xz9dl7a"}}[!!u<<0],e[0]=t):t=e[0];var n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx(r("MWXRowItem.react"),{verticalAlign:"center",children:s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:c.logoGlimmer})}),e[1]=n):n=e[1];var a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsxs(r("MWXRow.react"),{spacingVertical:0,verticalAlign:"center",children:[n,s.jsx(r("MWXRowItem.react"),{expanding:!0,children:s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:c.textGlimmer})})]}),e[2]=a):a=e[2];var i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx(r("MWXRow.react"),{wrap:"none",children:s.jsx(r("MWXRowItem.react"),{expanding:!0,children:s.jsx("div",{className:"x16ngw23 xwib8y2",children:s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:c.textGlimmer})})})}),e[3]=i):i=e[3];var l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(r("MWXRow.react"),{direction:"forward",wrap:"none",children:s.jsx(r("MWXRowItem.react"),{expanding:!0,children:s.jsx(r("MWXGlimmer.react"),{index:1,xstyle:c.pinInputGlimmer})})}),e[4]=l):l=e[4];var d;return e[5]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx("div",babelHelpers.extends({},t,{children:s.jsxs(r("MWXColumn.react"),{spacing:8,style:c.root,children:[a,i,l,s.jsx(r("MWXRow.react"),{wrap:"none",children:s.jsx(r("MWXRowItem.react"),{expanding:!0,children:s.jsx("div",{className:"x18xe386 xpdvgm7 x1y1aw1k",children:s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:c.textGlimmer})})})})]})})),e[5]=d):d=e[5],d}l.default=d}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query",selections:[{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsThreadListRestoreQPWrapper_query"}]}],type:"Query",abstractKey:null};a.exports=e}),null);
__d("useMWEBIsUpsellDeferred",["MWEncryptedBackupsDeferLocalStorageUpsell","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useMemo;function c(t){var n=o("react-compiler-runtime").c(18),a=t.upsellType,l=(e||(e=r("useReStore")))(),s;n[0]!==a?(s=o("MWEncryptedBackupsDeferLocalStorageUpsell").getLocalStorageKeys(a),n[0]=a,n[1]=s):s=n[1];var u=s,c=u.countdownInMS,d=u.impressionsCountKey,m=u.lastImpressionTimeKey,p=u.maxImpressionLimit,_;n[2]!==c||n[3]!==l.tables.experiences_shared_state||n[4]!==m?(_=function(){return o("ReQL").fromTableAscending(l.tables.experiences_shared_state).getKeyRange(m).map(function(e){var t=e.stateValue;return t!=null&&+t+c>Date.now()})},n[2]=c,n[3]=l.tables.experiences_shared_state,n[4]=m,n[5]=_):_=n[5];var f;n[6]!==c||n[7]!==l||n[8]!==m?(f=[c,l,m],n[6]=c,n[7]=l,n[8]=m,n[9]=f):f=n[9];var g=o("ReQLSuspense").useFirst(_,f,i.id+":41"),h;n[10]!==l.tables.experiences_shared_state||n[11]!==d||n[12]!==p?(h=function(){return o("ReQL").fromTableAscending(l.tables.experiences_shared_state).getKeyRange(d).map(function(e){var t=e.stateValue;return!(p===o("MWEncryptedBackupsDeferLocalStorageUpsell").INFINITE_IMPRESSIONS_LIMIT||+t<p)})},n[10]=l.tables.experiences_shared_state,n[11]=d,n[12]=p,n[13]=h):h=n[13];var y;n[14]!==l||n[15]!==d||n[16]!==p?(y=[l,d,p],n[14]=l,n[15]=d,n[16]=p,n[17]=y):y=n[17];var C=o("ReQLSuspense").useFirst(h,y,i.id+":56");return g===!0||C===!0}l.default=c}),98);
__d("useMWEncryptedBackupsIsUpsellDismissed",["MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEncryptedBackupsDeferLocalStorageUpsell","react","react-compiler-runtime","useMWEBIsUpsellDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useState;function u(e){var t=o("react-compiler-runtime").c(5),n=e.upsellType,a=o("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),i=s(!1),l=i[0],u=i[1],c;t[0]!==n?(c={upsellType:n},t[0]=n,t[1]=c):c=t[1];var d=r("useMWEBIsUpsellDeferred")(c),m=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),p=m.virtualDeviceInfo,_=p.doesUserHaveOtcEligibleDevices;if(a&&n===o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_WITH_PIN_JEWEL&&!_){var f;return t[2]===Symbol.for("react.memo_cache_sentinel")?(f=[!0,u],t[2]=f):f=t[2],f}var g=d===!0||l,h;return t[3]!==g?(h=[g,u],t[3]=g,t[4]=h):h=t[4],h}l.default=u}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred.react",["CometPlaceholder.react","CometRelay","EncryptedBackupsSupportedPlatformUtils","MWEBVestaUserInfoContext.react","MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsQPWithPinPlaceholder.react","MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query.graphql","deferredLoadComponent","gkx","react","react-compiler-runtime","requireDeferred","useHasRestoreInterstitialSoftblockBeenDismissed","useMWEBGetUpsellState","useMWEncryptedBackupsIsUpsellDismissed"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=r("deferredLoadComponent")(r("requireDeferred")("MWEncryptedBackupsThreadListRestoreQPWrapper.react").__setRef("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred.react")),d=r("gkx")("3952");function m(t){var a=o("react-compiler-runtime").c(15),i=t.children,l=t.fragmentKey,s=t.trigger,m=o("CometRelay").useFragment(e!==void 0?e:e=n("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query.graphql"),l),p=o("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),_=r("useMWEBGetUpsellState")(),f=_.isRestoreUpsellsDismissed,g;a[0]===Symbol.for("react.memo_cache_sentinel")?(g={upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_JEWEL},a[0]=g):g=a[0];var h=r("useMWEncryptedBackupsIsUpsellDismissed")(g),y=h[0],C=h[1],b;a[1]===Symbol.for("react.memo_cache_sentinel")?(b={upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_WITH_PIN_JEWEL},a[1]=b):b=a[1];var v=r("useMWEncryptedBackupsIsUpsellDismissed")(b),S=v[0],R=v[1],L;a[2]===Symbol.for("react.memo_cache_sentinel")?(L={upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.PERSISTENT_BANNER_JEWEL},a[2]=L):L=a[2];var E=r("useMWEncryptedBackupsIsUpsellDismissed")(L),k=E[0],I=E[1],T;a[3]!==p?(T={backupState:4,isCooldownOrLockOutState:p},a[3]=p,a[4]=T):T=a[4];var D=r("useHasRestoreInterstitialSoftblockBeenDismissed")(T),x=o("EncryptedBackupsSupportedPlatformUtils").useMWEncryptedBackupsGetCurrentSupportedPlatform(),$=y||S;if(f||$&&!d||$&&d&&k)return i;var P;a[5]===Symbol.for("react.memo_cache_sentinel")?(P=u.jsx(r("MWEncryptedBackupsQPWithPinPlaceholder.react"),{}),a[5]=P):P=a[5];var N;a[6]!==i||a[7]!==x||a[8]!==m||a[9]!==$||a[10]!==I||a[11]!==C||a[12]!==R||a[13]!==s?(N=u.jsx(r("CometPlaceholder.react"),{fallback:P,name:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred",children:u.jsx(c,{children:i,currentSupportedPlatform:x,fragmentKey:m,hasDismissedQps:$,setHasDismissedBanner:I,setHasDismissedQp:C,setHasDismissedQpWithPin:R,trigger:s})}),a[6]=i,a[7]=x,a[8]=m,a[9]=$,a[10]=I,a[11]=C,a[12]=R,a[13]=s,a[14]=N):N=a[14];var M=N;switch(x){case o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.INSTAGRAM_DIRECT_INBOX:return i;case o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.MESSENGER_DOT_COM:case o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_INBOX:return D?M:i;case o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM:return M}}l.default=m}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapperDeferredWithEBCheck.react",["cr:9938"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:9938")}),98);
__d("MWFDSMarketplace.svg.react",["cr:21707"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21707")}),98);
__d("useHasUnjoinedCMThreads",["LSIntEnum","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){var t=o("react-compiler-runtime").c(4),n=(s||(s=r("useReStore")))(),a;t[0]!==n.tables.threads?(a=function(){return o("ReQL").union(o("ReQL").fromTableDescending(n.tables.threads.index("threadTypeLastActivityTimestampMs")).getKeyRange((e||(e=o("LSIntEnum"))).ofNumber(24)),o("ReQL").fromTableDescending(n.tables.threads.index("threadTypeLastActivityTimestampMs")).getKeyRange(e.ofNumber(19)))},t[0]=n.tables.threads,t[1]=a):a=t[1];var l;return t[2]!==n?(l=[n],t[2]=n,t[3]=l):l=t[3],!!o("ReQLSuspense").useFirst(a,l,i.id+":22")}l.default=u}),98);
__d("MessengerAsyncStorage",["AsyncStorage"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("AsyncStorage")}),98);
__d("useMWCMVerifyActivityStatusOnMountAndFocus",["FBLogger","I64","LSDict","LSFactory","LSVec","LSVerifyThreadsActivityStatusStoredProcedure","MessengerAsyncStorage","MetaConfig","ServerTime","VisibilityAPI","clearInterval","promiseDone","react","react-compiler-runtime","setInterval","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=c.useCallback,m=c.useEffect,p=c.useMemo,_=c.useRef,f=c.useState,g=1e3*60*60,h=g*3;function y(e){return(u||(u=o("I64"))).add(u.lsl_(u.of_float(e[0]),32),u.of_float(e[1]))}function C(e){return[(u||(u=o("I64"))).to_float(u.lsr_(e,32)),u.to_float(u.and_(e,u.of_int32(4294967295)))]}function b(t,n){var a=o("react-compiler-runtime").c(30),l=(e||(e=r("useReStore")))(),s=_(null),c="__"+t+".fromTimestampMs__",d;a[0]===Symbol.for("react.memo_cache_sentinel")?(d=C((u||(u=o("I64"))).of_float(o("ServerTime").getMillis()-h)),a[0]=d):d=a[0];var p=d,b=f(p),S=b[0],R=b[1],L=_(S),E,k;a[1]!==S?(E=function(){L.current=S},k=[S],a[1]=S,a[2]=E,a[3]=k):(E=a[2],k=a[3]),m(E,k);var I=_(!1),T;a[4]===Symbol.for("react.memo_cache_sentinel")?(T=r("MetaConfig")._("55")?["JOINED_PUBLIC_CHANNELS"]:[],a[4]=T):T=a[4];var D=T,x;if(a[5]!==t){var $=r("MetaConfig")._("95")||t==="ContextSwitcher"?["JOINED_COMMUNITY_CHANNELS"]:[];x=[].concat(D,$),a[5]=t,a[6]=x}else x=a[6];var P=x,N;a[7]!==l||a[8]!==c||a[9]!==P?(N=function(){P.length>0&&r("promiseDone")(r("MessengerAsyncStorage").getItem(c).then(function(e){if(e!=null){var t=JSON.parse(e);t!=null&&r("promiseDone")(l.runInTransaction(function(e){return r("LSVerifyThreadsActivityStatusStoredProcedure")(r("LSFactory")(e),{fromTimestampMs:y(t),serverMode:r("LSVec").ofArray(P),threads:new(r("LSDict"))([])})},"readwrite",void 0,void 0,i.id+":98"))}}).catch(v),function(){I.current=!0;var e=C((u||(u=o("I64"))).of_float(o("ServerTime").getMillis()));r("promiseDone")(r("MessengerAsyncStorage").setItem(c,JSON.stringify(e)),function(){R(e)})})},a[7]=l,a[8]=c,a[9]=P,a[10]=N):N=a[10];var M=N,w;a[11]===Symbol.for("react.memo_cache_sentinel")?(w=function(){s.current!=null&&(r("clearInterval")(s.current),s.current=null)},a[11]=w):w=a[11];var A=w,F;a[12]!==M?(F=function(){if(s.current==null&&r("MetaConfig")._("96")){var e;s.current=r("setInterval")(M,(e=r("MetaConfig")._("43"))!=null?e:g)}},a[12]=M,a[13]=F):F=a[13];var O=F,B;a[14]!==O||a[15]!==M?(B=function(){var e,t=o("ServerTime").getMillis()-(u||(u=o("I64"))).to_float(y(L.current));s.current==null&&O(),t>=((e=r("MetaConfig")._("43"))!=null?e:g)&&M()},a[14]=O,a[15]=M,a[16]=B):B=a[16];var W=B,q;a[17]!==W||a[18]!==n?(q=function(){o("VisibilityAPI").isVisibilityHidden()?A():n&&r("MetaConfig")._("97")&&W()},a[17]=W,a[18]=n,a[19]=q):q=a[19];var U=q,V;a[20]!==O||a[21]!==M||a[22]!==U?(V=function(){var e=null;return I.current||(M(),o("VisibilityAPI").canUseVisibilityAPI&&(e=o("VisibilityAPI").onVisibilityChange(U)),O()),(function(){e!=null&&o("VisibilityAPI").removeVisibiltyChangeListener(e),s.current!=null&&(r("clearInterval")(s.current),s.current=null)})},a[20]=O,a[21]=M,a[22]=U,a[23]=V):V=a[23];var H;a[24]!==W||a[25]!==O||a[26]!==n||a[27]!==M||a[28]!==U?(H=[A,W,O,n,M,U],a[24]=W,a[25]=O,a[26]=n,a[27]=M,a[28]=U,a[29]=H):H=a[29],m(V,H)}function v(e){r("FBLogger")("messenger_web").catching(e).mustfix("Failed to set timestamp for thread activity status")}l.default=b}),98);
__d("useMWInboxContextSwitcherFilterPreloaderCond",["cr:4651","emptyFunction","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){var a=o("react-compiler-runtime").c(1),i;return a[0]===Symbol.for("react.memo_cache_sentinel")?(i={onHoverIn:r("emptyFunction"),onHoverOut:r("emptyFunction"),onPressIn:r("emptyFunction")},a[0]=i):i=a[0],i}var u=(e=n("cr:4651"))!=null?e:s,c=u;l.default=c}),98);
__d("MWInboxContextSwitcher.react",["fbt","C4GFalcoLoggerDeferred","FDSPivotLinkTabs.react","I64","LSIntEnum","LSThreadRangeFilter","MWChatBadgeCountUpdates.react","MWInboxPersistedUIState","MWPBumpEntityKey","MWVerticalRhythm","Promise","gkx","promiseDone","react","react-compiler-runtime","useHasUnjoinedCMThreads","useMWCMVerifyActivityStatusOnMountAndFocus","useMWInboxContextSwitcherFilterPreloaderCond","useReStore","useSinglePartialViewImpression"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["filter","hasNewContentBadge","isShown","logClick","odsAction","overrideTabChange","ref"],u,c,d,m,p,_=p||(p=o("react")),f=p.useEffect,g={tabContainerWithFilters:{paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",paddingInlineStart:"xwn43p0",paddingInlineEnd:"x1x5flf6",paddingLeft:null,paddingRight:null,$$css:!0},tabWithFilters:{paddingInlineStart:"xyiysdx",paddingInlineEnd:"x14vy60q",paddingLeft:null,paddingRight:null,$$css:!0}};function h(t){var n=o("react-compiler-runtime").c(29),a=t.entryPoint,l=t.onTabChange,u=t.parentThreadKey,p=t.selectedFilterTab,h=t.showMessageRequests,b=t.showNestedFolderThreads,v=(c||(c=r("useReStore")))();r("useMWCMVerifyActivityStatusOnMountAndFocus")("ContextSwitcher",a==="inbox");var S,R;n[0]!==v?(S=function(){r("promiseDone")(v.runInTransaction(C,"readwrite",void 0,void 0,i.id+":83"))},R=[v],n[0]=v,n[1]=S,n[2]=R):(S=n[1],R=n[2]),f(S,R);var L=r("useHasUnjoinedCMThreads")(),E=o("MWInboxPersistedUIState").usePersistedUIState(L,"__MWInboxContextSwitcher.hasViewedSuggestedChats__"),k=E[0],I=E[1],T;n[3]===Symbol.for("react.memo_cache_sentinel")?(T=(d||(d=o("LSIntEnum"))).ofNumber(0),n[3]=T):T=n[3];var D=o("MWChatBadgeCountUpdates.react").useUnseenThreadCount(T),x=D!=null&&D>0,$=o("MWChatBadgeCountUpdates.react").useHasUnseenCommunityThreads(),P=L&&!k,N=a==="jewel"?"jewel_tray":"messenger_inbox",M=a==="inbox"?"jewel_inbox":"chats_inbox",w;n[4]!==M||n[5]!==N?(w={onImpressionStart:function(){o("C4GFalcoLoggerDeferred").logC4GEngagementFalcoEvent({action:"impression",event:"blended_threadlist_community_tab_rendered",parent_surface:M,source:"blended_threadlist_community_tab",surface:N})}},n[4]=M,n[5]=N,n[6]=w):w=n[6];var A=r("useSinglePartialViewImpression")(w),F;n[7]===Symbol.for("react.memo_cache_sentinel")?(F=(d||(d=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").GROUPS_ONLY),n[7]=F):F=n[7];var O=r("useMWInboxContextSwitcherFilterPreloaderCond")(v,u,F),B=O.onPressIn,W;n[8]===Symbol.for("react.memo_cache_sentinel")?(W=(d||(d=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").UNREAD_ONLY),n[8]=W):W=n[8];var q=r("useMWInboxContextSwitcherFilterPreloaderCond")(v,u,W),U=q.onPressIn,V;if(n[9]!==a||n[10]!==L||n[11]!==P||n[12]!==$||n[13]!==x||n[14]!==k||n[15]!==A||n[16]!==B||n[17]!==U||n[18]!==l||n[19]!==M||n[20]!==p||n[21]!==I||n[22]!==h||n[23]!==b||n[24]!==N){var H=[{filter:(d||(d=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").NONE),hasNewContentBadge:x,isShown:!0,label:s._(/*BTDS*/"All"),odsAction:"inbox_tab_click"},{filter:d.ofNumber(r("LSThreadRangeFilter").UNREAD_ONLY),hasNewContentBadge:!1,isShown:!0,label:s._(/*BTDS*/"Unread"),odsAction:"unread_tab_click",onPressIn:U},{filter:d.ofNumber(r("LSThreadRangeFilter").GROUPS_ONLY),hasNewContentBadge:!1,isShown:!0,label:s._(/*BTDS*/"Groups"),odsAction:"groups_tab_click",onPressIn:B}].concat(r("gkx")("2165")?[{filter:(d||(d=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").COMMUNITIES),hasNewContentBadge:$||P,isShown:!0,label:s._(/*BTDS*/"Communities"),logClick:function(){o("C4GFalcoLoggerDeferred").logC4GEngagementFalcoEvent({action:"tap",event:"blended_threadlist_community_tab_clicked",parent_surface:M,source:"blended_threadlist_community_tab",surface:N})},odsAction:"communities_tab_click",ref:A}]:[],r("gkx")("6437")?[{filter:(d||(d=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").DRAFTS),hasNewContentBadge:!1,isShown:!0,label:s._(/*BTDS*/"Drafts"),odsAction:"drafts_tab_click"}]:[],r("gkx")("17132")?[{filter:(d||(d=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").MARKETPLACE),hasNewContentBadge:!1,isShown:!0,label:s._(/*BTDS*/"Marketplace"),odsAction:"marketplace_tab_click",overrideTabChange:function(){b!=null&&b((d||(d=o("LSIntEnum"))).ofNumber(-12))}},{filter:(d||(d=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").MESSAGE_REQUESTS),hasNewContentBadge:!1,isShown:!0,label:s._(/*BTDS*/"Message requests"),odsAction:"message_request_tab_click",overrideTabChange:function(){h==null||h()}}]:[]);V=H.filter(y).map(function(t,n){var i=t.filter,s=t.hasNewContentBadge,u=t.isShown,c=t.logClick,_=t.odsAction,f=t.overrideTabChange,h=t.ref,y=babelHelpers.objectWithoutPropertiesLoose(t,e);return babelHelpers.extends({},y,{hasNewContentBadge:s,onPress:function(){if((m||(m=o("I64"))).equal(i,(d||(d=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").COMMUNITIES))&&L&&!k&&I(!0),o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.contextswitcher."+a,_),c==null||c(),f!=null){f();return}l(i)},ref:h,selected:(m||(m=o("I64"))).equal(i,p),testid:(m||(m=o("I64"))).equal(i,(d||(d=o("LSIntEnum"))).ofNumber(r("LSThreadRangeFilter").COMMUNITIES))?"communities_tab":void 0,xstyle:g.tabWithFilters})}),n[9]=a,n[10]=L,n[11]=P,n[12]=$,n[13]=x,n[14]=k,n[15]=A,n[16]=B,n[17]=U,n[18]=l,n[19]=M,n[20]=p,n[21]=I,n[22]=h,n[23]=b,n[24]=N,n[25]=V}else V=n[25];var G=V;if(G.length<=1){var z;return n[26]===Symbol.for("react.memo_cache_sentinel")?(z=_.jsx(r("MWVerticalRhythm"),{height:8}),n[26]=z):z=n[26],z}var j;return n[27]!==G?(j=_.jsx(r("FDSPivotLinkTabs.react"),{linkType:"deemphasized",tabs:G,tabsContainerStyle:g.tabContainerWithFilters}),n[27]=G,n[28]=j):j=n[28],j}function y(e){return e.isShown}function C(e){return(u||(u=n("Promise"))).resolve()}l.default=h}),226);
__d("MWXIconMarketplace",["MWXSvgIcon","SVGIcon","cr:22393","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22393")),r("gkx")("23219"));l.default=e}),98);
__d("MWThreadListMarketplaceItem.react",["fbt","CometMarketplaceLogger","LSContactBitOffset","LSIntEnum","MWPBumpEntityKey","MWThreadListFolderItem.react","MWXIconGroup","MWXIconMarketplace","MWXIconStrict.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useLogMarketplaceClick","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=c.useEffect;function p(t){var n=o("react-compiler-runtime").c(27),a=t.onClick,l=t.responsive,c=t.selected,p=t.size,g=t.thread,h=r("useLogMarketplaceClick")("marketplace_inbox_folder"),y=(e||(e=r("useReStore")))(),C;n[0]!==y.tables._user_info?(C=function(){return o("ReQL").fromTableAscending(y.tables._user_info).map(f)},n[0]=y.tables._user_info,n[1]=C):C=n[1];var b;n[2]!==y?(b=[y],n[2]=y,n[3]=b):b=n[3];var v=o("ReQLSuspense").useFirst(C,b,i.id+":51"),S;n[4]!==y.tables.contacts||n[5]!==v?(S=function(){return v!=null?o("ReQL").fromTableAscending(y.tables.contacts,[].concat(o("LSContactBitOffset").contactCapabilityFields)).getKeyRange(v):o("ReQL").empty()},n[4]=y.tables.contacts,n[5]=v,n[6]=S):S=n[6];var R;n[7]!==y||n[8]!==v?(R=[y,v],n[7]=y,n[8]=v,n[9]=R):R=n[9];var L=o("ReQLSuspense").useFirst(S,R,i.id+":56"),E=L!=null&&o("LSContactBitOffset").has(86,L),k;n[10]===Symbol.for("react.memo_cache_sentinel")?(k=[],n[10]=k):k=n[10],m(_,k);var I;n[11]===Symbol.for("react.memo_cache_sentinel")?(I=s._(/*BTDS*/"Marketplace").toString(),n[11]=I):I=n[11];var T=I,D=r("MWXIconMarketplace");if(E===!0){var x;n[12]===Symbol.for("react.memo_cache_sentinel")?(x=s._(/*BTDS*/"_j[\"Buy and sell groups\",\"3a9a1e192465754ec4427995fe1cffb4\",1]").toString(),n[12]=x):x=n[12],T=x,D=r("MWXIconGroup")}var $;n[13]!==D?($=d.jsx(r("MWXIconStrict.react"),{color:"primary",icon:D,size:36}),n[13]=D,n[14]=$):$=n[14];var P;n[15]!==h||n[16]!==a?(P=function(){return h(),a((u||(u=o("LSIntEnum"))).ofNumber(-12)),o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","marketplace_threads")},n[15]=h,n[16]=a,n[17]=P):P=n[17];var N;n[18]===Symbol.for("react.memo_cache_sentinel")?(N=(u||(u=o("LSIntEnum"))).ofNumber(-12),n[18]=N):N=n[18];var M;return n[19]!==l||n[20]!==c||n[21]!==p||n[22]!==$||n[23]!==P||n[24]!==g||n[25]!==T?(M=d.jsx(r("MWThreadListFolderItem.react"),{icon:$,onClick:P,responsive:l,selected:c,size:p,systemFolder:N,thread:g,threadName:T}),n[19]=l,n[20]=c,n[21]=p,n[22]=$,n[23]=P,n[24]=g,n[25]=T,n[26]=M):M=n[26],M}function _(){return o("CometMarketplaceLogger").logImpression("marketplace_inbox_folder")}function f(e){return e.facebookUserId}l.default=p}),226);
__d("useHasOTCEligibleDevicesFromReStore",["MAWOneTimeCodeGating","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("react-compiler-runtime").c(8),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.encrypted_backups?(a=function(){return o("ReQL").fromTableAscending(n.tables.encrypted_backups)},t[0]=n.tables.encrypted_backups,t[1]=a):a=t[1];var l;t[2]!==n?(l=[n],t[2]=n,t[3]=l):l=t[3];var s=o("ReQLSuspense").useFirst(a,l,i.id+":21"),u;t[4]!==s?(u=s==null||!o("MAWOneTimeCodeGating").isOneTimeCodeEnabled()?!1:s.hasOtcEligibleDevices,t[4]=s,t[5]=u):u=t[5];var c;return t[6]!==u?(c={hasOtcEligibleDevices:u},t[6]=u,t[7]=c):c=t[7],c}l.default=s}),98);
__d("useMWInboxContextSwitcherFilterPreloader",["MWPBaseThreadListHooks","MWPBaseThreadListUtils","react","react-compiler-runtime","useCometPreloader"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useMemo;function d(e,t,n){var a=o("react-compiler-runtime").c(12),i=o("MWPBaseThreadListHooks").useMWPBaseThreadListDefaultThreadsRange(e,t,n),l;a[0]!==e||a[1]!==i||a[2]!==n||a[3]!==t?(l=function(){i==null&&o("MWPBaseThreadListUtils").loadMoreThreadsForEmptyRangeDefault(e,t,n)},a[0]=e,a[1]=i,a[2]=n,a[3]=t,a[4]=l):l=a[4];var s=l,u=r("useCometPreloader")("button",s,s),c=u.onHighIntentPreloader,d=u.onHoverInPreloader,m=u.onHoverOutPreloader,p=u.onPressInPreloader,_;a[5]!==c||a[6]!==d?(_=function(t){d(t),c(!0)},a[5]=c,a[6]=d,a[7]=_):_=a[7];var f;return a[8]!==m||a[9]!==p||a[10]!==_?(f={onHoverIn:_,onHoverOut:m,onPressIn:p},a[8]=m,a[9]=p,a[10]=_,a[11]=f):f=a[11],f}l.default=d}),98);
__d("useMWJewelSettingsButtonSecurityAlertsBadge",["FDSBadge.react","react","react-compiler-runtime","useDeviceAlertCount","useMAWSecurityAlertsPreferences"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(){var e=o("react-compiler-runtime").c(5),t=r("useMAWSecurityAlertsPreferences")(),n=t.securityAlertsPreferences,a=o("useDeviceAlertCount").useDeviceAlertCount();n==null||n.allowSecurityAlertForSelf;var i;e[0]!==(n==null?void 0:n.allowSecurityAlertForSelf)||e[1]!==a?(i=n!=null&&n.allowSecurityAlertForSelf&&a>0?s.jsx("div",{className:"x12u5thl x10l6tqk x12ibf10",children:s.jsx(r("FDSBadge.react"),{testid:void 0})}):null,e[0]=n==null?void 0:n.allowSecurityAlertForSelf,e[1]=a,e[2]=i):i=e[2];var l;return e[3]!==i?(l={badge:i},e[3]=i,e[4]=l):l=e[4],l}l.default=c}),98);/*FB_PKG_DELIM*/
__d("BladeRunnerConfig",["RTISubscriptionManagerConfig","WebDriverConfig","cr:3024","gkx","isEmpty"],(function(t,n,r,o,a,i,l){var e,s="javascript-sandbox",u="OverrideServer",c="www_sandbox",d="www_tier",m=(function(){function t(){}var o=t.prototype;return o.patchRequestHeaders=function(o){var t={},a=r("RTISubscriptionManagerConfig").bladerunner_www_sandbox,i=r("RTISubscriptionManagerConfig").is_intern;if((e||(e=r("isEmpty")))(r("WebDriverConfig").auxiliaryServiceInfo))a!=null&&(t[s]=a);else{var l,m=(l=r("WebDriverConfig").auxiliaryServiceInfo.BladeRunner)!=null?l:r("WebDriverConfig").auxiliaryServiceInfo["BladeRunner-sandcastle"];m!=null?(typeof m.ip_address=="string"?t[u]=m.ip_address+":18295":typeof m.hostname=="string"&&(t[u]=m.hostname+":18295"),typeof r("WebDriverConfig").originHost=="string"&&(t[c]="www."+r("WebDriverConfig").originHost)):a!=null&&(t[s]=a)}if(i===!0&&(t[d]="intern"),r("WebDriverConfig").isTestRunning&&r("gkx")("20919")){var p=n("cr:3024")==null?void 0:n("cr:3024").get();p!=null&&(t.is_test="true",t.original_request_id=p)}r("gkx")("20929")&&(t["Accept-Ack"]="RSAck");for(var _ in o)t[_]=o[_];return t.http_referer=window.location.href,t},t})(),p=new m,_=p;l.default=_}),98);
__d("BladeRunnerLogger",["FBLogger","ODS"],(function(t,n,r,o,a,i,l){var e,s="bladerunner_js_client",u={info:"info",warning:"warning",exception:"exception"},c=(function(){function t(){this.setFBLoggerLevel(1)}var n=t.prototype;return n.info=function(t){this.$2>=2&&r("FBLogger")(s).info("BladeRunner info: %s",t),this.$3(u.info,t)},n.warn=function(t){this.$2>=1&&r("FBLogger")(s).warn("BladeRunner warn: %s",t),this.$3(u.warning,t)},n.exception=function(t,n){n===void 0&&(n="");var e=n+" "+t.toString();this.$2>=0&&r("FBLogger")(s).warn("BladeRunner exception: %s, %s",n,t.toString()),this.$3(u.exception,e)},n.trimForLogging=function(t){var e=1024;return typeof t=="string"&&t.length>e?"[trimmed]:"+t.substring(0,e)+"...":t},n.bumpCounter=function(n,r){r===void 0&&(r=1),(e||(e=o("ODS"))).bumpEntityKey(2966,"BladeRunnerClient",n,r)},n.setClientSessionId=function(t){this.$1=t},n.setFBLoggerLevel=function(t){this.$2=t},n.$3=function(t,n){},t})(),d=new c,m=d;l.default=m}),98);
__d("BladeRunnerTypes",[],(function(t,n,r,o,a,i,l){var e={REQUEST:1,DATA:2,DATA_ACK:3,STATUS_UPDATE:4,REWRITE_REQUEST:5,LOG:6},s={BLADE_RUNNER:1,GATEWAY:2};l.StreamFrameType=e,l.StreamRequestType=s}),98);
__d("BladeRunnerTypesInternal",["Base64","BladeRunnerLogger","BladeRunnerTypes"],(function(t,n,r,o,a,i,l){var e=(function(){function e(){}var t=e.prototype;return t.getHeaders=function(){if(this.headers!=null)return this.headers;throw new Error("Expected headers")},t.getInstrumentationData=function(){if(this.instrumentationData!=null&&this.instrumentationData.length>0)try{return JSON.parse(this.instrumentationData)}catch(e){return null}else return null},t.updateRetryRequestPayload=function(t){t!=null?this.payload=r("Base64").encode(t):this.payload=null},e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.requestType=f(n.requestType),t.payload=y(n.payload),t.headers=v(n.headers),t.extraHeader=y(n.extraHeader),t.requestTarget=y(n.requestTarget),t.instrumentationData=y(n.instrumentationData),t},e})(),s=(function(){function e(){}e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.dataId=g(n.dataId),t.data=y(n.data),t.shouldAck=R(n.shouldAck),t};var t=e.prototype;return t.rawData=function(){if(this.data==null)throw new Error("Expected data");return this.data},t.rawDataSize=function(){return this.data==null?0:this.data.length},t.decodeData=function(){if(this.data==null)throw new Error("Expected data");return r("Base64").decode(this.data)},t.setData=function(t){this.data=r("Base64").encode(t)},t.getInstrumentationData=function(){return this.instrumentationData!=null?JSON.parse(this.instrumentationData):null},e})(),u=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.dataId=f(n.dataId),t.success=S(n.success),t.message=y(n.message),t.code=g(n.code),t},e})();u.ACK_CODE_LANDED_AND_ACCEPTED=20,u.ACK_CODE_LANDED_BUT_NOT_ACCEPTED=21,u.ACK_CODE_FAILED_TO_LAND=50;var c=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=g(n.streamId),t.message=y(n.message),t},e})(),d=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.status=f(n.status),t.message=y(n.message),t.code=g(n.code),t.shouldRetry=R(n.shouldRetry),t.retryDelayMs=g(n.retryDelayMs),t},e})(),m=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.newBody=y(n.newBody),t.newExtraHeader=y(n.newExtraHeader),t.patchExtraHeader=y(n.patchExtraHeader),t.killBody=R(n.killBody),t.temporary=R(n.temporary),t},e})(),p=(function(){function t(){}var n=t.prototype;return n.getRequest=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request;throw new Error("Expected request")},n.getData=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data;throw new Error("Expected data")},n.getDataAck=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck;throw new Error("Expected dataAck")},n.getStatusUpdate=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate;throw new Error("Expected status update")},n.getLog=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log;throw new Error("Expected log")},n.getRewriteRequest=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest;throw new Error("Expected rewrite request")},n.getStreamId=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck.streamId;throw new Error("Frame with unexpected type")},n.isInstrumented=function(){return this.type===o("BladeRunnerTypes").StreamFrameType.REQUEST?this.getRequest().instrumentationData!=null:this.type===o("BladeRunnerTypes").StreamFrameType.DATA?this.getData().instrumentationData!=null:!1},t.readObject=function(a){var n=new t;switch(n.type=f(a.type),n.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:n.request=e.readObject(C(a.request));break;case o("BladeRunnerTypes").StreamFrameType.DATA:n.data=s.readObject(C(a.data));break;case o("BladeRunnerTypes").StreamFrameType.DATA_ACK:n.dataAck=u.readObject(C(a.dataAck));break;case o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:n.statusUpdate=d.readObject(C(a.statusUpdate));break;case o("BladeRunnerTypes").StreamFrameType.LOG:n.log=c.readObject(C(a.log));break;case o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:n.rewriteRequest=m.readObject(C(a.rewriteRequest));break;default:return r("BladeRunnerLogger").warn("Frame with unexpected type: "+n.type),null}return n},t.newRequestFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.REQUEST,e.request=n,e},t.newDataFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.DATA,e.data=n,e},t.newDataAckFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.DATA_ACK,e.dataAck=n,e},t.newStatusUpdateFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE,e.statusUpdate=n,e},t.newLogFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.LOG,e.log=n,e},t.newRewriteRequestFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST,e.rewriteRequest=n,e},t})(),_=(function(){function e(e,t,n){this.batchId=e,this.frames=t,this.instrumentationData=n}var t=e.prototype;return t.getFrames=function(){if(this.frames!=null)return this.frames;throw new Error("Expected frames")},t.getInstrumentationData=function(){if(this.instrumentationData!=null)try{return JSON.parse(this.instrumentationData)}catch(e){return null}else return null},t.getInstrumentationDataDfTraceId=function(){if(this.instrumentationData!=null)try{var e,t=JSON.parse(this.instrumentationData);return(e=t.dataFlowTracingData)==null?void 0:e.traceId}catch(e){return null}else return null},t.write=function(){return JSON.stringify(this)},t.isInstrumented=function(){return this.getFrames().some(function(e){return e.isInstrumented()})},e.read=function(n){var t=JSON.parse(n),r=t.batchId||0,o=[];for(var a of t.frames){var i=p.readObject(a);i!=null&&o.push(i)}var l=t.instrumentationData||null;return new e(r,o,l)},e})();function f(e){if(typeof e=="number")return e;throw new Error("Expected number")}function g(e){return e==null?null:f(e)}function h(e){if(typeof e=="string")return e;throw new Error("Expected string")}function y(e){return e==null?null:h(e)}function C(e){if(typeof e=="object"&&e!=null)return e;throw new Error("Expected object")}function b(e){if(typeof e=="object"&&e!=null){var t=e,n={};return Object.keys(t).forEach(function(e){var r=t[e];typeof r=="string"&&r!=null&&(n[e]=r)}),n}throw new Error("Expected string map")}function v(e){return e==null?null:b(e)}function S(e){if(typeof e=="boolean"&&e!=null)return e;throw new Error("Expected boolean")}function R(e){return e==null?null:S(e)}l.GatewayStreamRequest=e,l.GatewayStreamData=s,l.GatewayStreamDataAck=u,l.GatewayStreamLog=c,l.GatewayStreamStatusUpdate=d,l.GatewayStreamRewriteRequest=m,l.GatewayStreamFrame=p,l.GatewayStreamBatch=_}),98);
__d("RequestStreamE2EClientLoggerEvent",[],(function(t,n,r,o,a,i){var e=Object.freeze({RECEIVED:"received",SENT:"sent",FAILURE:"failure",PUBACK:"puback"});i.default=e}),66);
__d("RequestStreamE2EClientLoggerMessageType",[],(function(t,n,r,o,a,i){var e=Object.freeze({REQUEST_STREAM:"request_stream",AMENDMENT:"amendment",AMENDMENT_ACK:"amendment_ack",CANCEL:"cancel",RESPONSE:"response",RESPONSE_ACK:"response_ack",TIMED_REQUEST:"timed_request",INTERRUPT:"interrupt"});i.default=e}),66);
__d("BladeRunnerEventHandler",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","getErrorSafe","setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){var e=1e3,s=(function(){function t(e,t,n){this.$2=e,this.$1=t,this.$3=n}var n=t.prototype;return n.onProxyResponse=function(t){var e,n;this.$4(t);var a=[];for(var i of t.getFrames())this.$2.witnessFrame(i)&&a.push(i);var l=this.$2.getRequest();(e=l.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").SENT,{},(n=t.getInstrumentationData())==null?void 0:n.auxId,null,t.getInstrumentationDataDfTraceId()),a.length>0&&this.$5(new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(t.batchId,a,t.instrumentationData))},n.onDisconnect=function(){this.$2.resetErrors();var e=new(o("BladeRunnerTypesInternal")).GatewayStreamStatusUpdate;e.streamId=this.$2.getRequest().streamId,e.status=o("BladeRunnerStreamStatus").StreamStatus.CLOSED,e.shouldRetry=!0,e.retryDelayMs=0;var t=new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(null,[o("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(e)]);this.onProxyResponse(t)},n.$4=function(n){var t=this,a=n.getFrames().filter(function(e){return e.type==o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE});for(var i of a){var l=i.getStatusUpdate();if(l.status==o("BladeRunnerStreamStatus").StreamStatus.CLOSED||l.status==o("BladeRunnerStreamStatus").StreamStatus.REJECTED){this.$2.onError();var s=l.shouldRetry!=null&&l.shouldRetry,u=l.message!=null?l.message:"null";if(s&&this.$2.getErrorCount()<=this.$2.getRetriesAllowed()){l.status=o("BladeRunnerStreamStatus").StreamStatus.STOPPED;var c=e;l.retryDelayMs!=null&&(c=l.retryDelayMs),r("BladeRunnerLogger").info("Can retry: stream "+l.streamId+" closed with status "+l.status+", message "+u+". Error count: "+this.$2.getErrorCount()+", retryDelay "+c+"ms. Already retrying: "+this.$2.getRetryRequestScheduled().toString()),this.$2.getRetryRequestScheduled()?r("BladeRunnerLogger").bumpCounter("stream_closed_already_retrying"):(r("BladeRunnerLogger").bumpCounter("stream_closed_will_retry"),this.$2.setRetryRequestScheduled(!0),c>0?r("setTimeoutAcrossTransitions")(function(){return t.$6()},c):this.$6())}else r("BladeRunnerLogger").info("Will not retry: stream "+l.streamId+" closed with status "+l.status+", message "+u+". Error count: "+this.$2.getErrorCount()+", shouldRetry "+s.toString()+". Already retrying: "+this.$2.getRetryRequestScheduled().toString()),s?r("BladeRunnerLogger").bumpCounter("stream_closed_retry_exceeded"):r("BladeRunnerLogger").bumpCounter("stream_closed_no_retry"),this.$3.removeStream(l.streamId)}}},n.$6=function(){if(this.$2.setRetryRequestScheduled(!1),this.$2.isAlive()){var e=this.$1.getUpdatedRequestBody();e!=null&&this.$2.updateRetryRequestPayload(e),this.$3.sendRetryStreamRequest(this.$2)}},n.$5=function(t){r("BladeRunnerLogger").bumpCounter("send_to_handler");var e=[];this.$1.onBatch(t);for(var n of t.getFrames())try{switch(n.type){case o("BladeRunnerTypes").StreamFrameType.DATA:this.$1.onData(n.getData()),e.push(n.getData());break;case o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:this.$1.onStatusUpdate(n.getStatusUpdate().status);break;case o("BladeRunnerTypes").StreamFrameType.LOG:var a=n.getLog().message;a!=null&&this.$1.onLog(a);break;case o("BladeRunnerTypes").StreamFrameType.DATA_ACK:break;default:throw new Error("Frame with unexpected type")}}catch(e){var i=r("getErrorSafe")(e);r("BladeRunnerLogger").bumpCounter("send_to_handler_error"),r("BladeRunnerLogger").exception(i,"Failed sending frame to stream handler")}this.$7(e)},n.$7=function(t){var e=[];for(var n of t)if(n.shouldAck===!0&&n.dataId!=null){var r=new(o("BladeRunnerTypesInternal")).GatewayStreamDataAck;r.streamId=n.streamId,r.dataId=n.dataId,r.success=!0,e.push(r)}this.$3.sendDataAcks(e)},t})();l.default=s}),98);
__d("RtiRequestStreamE2eClientBatchFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("819"),s=o("FalcoLoggerInternal").create("rti_request_stream_e2e_client_batch",e),u=s;l.default=u}),98);
__d("RtiRequestStreamE2eClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1857112"),s=o("FalcoLoggerInternal").create("rti_request_stream_e2e_client",e),u=s;l.default=u}),98);
__d("RequestStreamE2ELogger",["ConstUriUtils","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RtiRequestStreamE2eClientBatchFalcoEvent","RtiRequestStreamE2eClientFalcoEvent","WebStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="rs_debug_logging",u=["FBGQLS:COMMENT_CREATE_SUBSCRIBE","FBGQLS:COMMENT_LIKE_SUBSCRIBE","FBGQLS:FEEDBACK_COMMENT_PERMISSION_TOGGLE_SUBSCRIBE","FBGQLS:FEEDBACK_TYPING_SUBSCRIBE","GRAPHQL:CometNotificationsReceiveLiveQuery"],c=0;function d(){var e=Date.now();return c>=e?c+=1:c=e,c.toString()}var m=(function(){function e(e,t,n,r,a,i,l,s,u,c){this.$10=[],this.$11=!1,this.$1=e,this.$2=t,this.$3=n,this.$4=r,this.$5=a,this.$6=i,this.$7=l,this.$8=s,this.$9=u,this.$12=c!=null?c:!1;var d=o("ConstUriUtils").getUri(window.location.href);d&&(this.$13=d.getDomain())}var t=e.prototype;return t.logE2EEvent=function(t,n,r,o,a,i,l){if(r===void 0&&(r=null),o===void 0&&(o=null),a===void 0&&(a=null),i===void 0&&(i=null),l===void 0&&(l=null),this.$3!=="Falco"){var e={request_id:this.$1,resume_id:"0",retry_id:a,transport:this.$2,method:this.$3,use_case:this.$4,request_log_context:this.$5,force_log_context:this.$6,e2e_sample_rate:this.$7,message_type:t,event:n,timestamp_ms:d(),aux_id:o,additional_data:r,dgw_stream_group_logging_id:this.$8,dgw_count_prior_streams_in_group:this.$9,domain:this.$13,df_trace_id:i};this.$14(e,l)}},t.$14=function(t,n){if(!this.$12){r("RtiRequestStreamE2eClientFalcoEvent").log(function(){return t});return}if(this.$10.push(t),this.$11||t.event==r("RequestStreamE2EClientLoggerEvent").FAILURE||t.message_type==r("RequestStreamE2EClientLoggerMessageType").RESPONSE){var e={events:this.$10};r("RtiRequestStreamE2eClientBatchFalcoEvent").log(function(){return e}),this.$10=[],this.$11=!0}},t.getRequestId=function(){return this.$1},e})();function p(e,t,n){if(e==null||e.method==null)return null;var r=!1;if(u.includes(e.method)&&(r=!0),t==null||t.length==0)return null;var o=JSON.parse(t);return o.requestId==null?null:new m(o.requestId,n,e.method,_(e.method,e),o.requestLogContext,o.forceLogContext,o.sampleRate,o.dgwStreamGroupLoggingId,o.dgwCountPriorStreamsInGroup,r)}function _(e,t){if(e==="FBLQ"&&t.config_id)return t.config_id;if(e==="SKY"){if(t.topic){var n=t.topic.lastIndexOf("/");return n>0?t.topic.substr(0,n):t.topic}return}return e}function f(e,t,n,o,a,i){if(a===void 0&&(a=null),i===void 0&&(i=null),!(e==null||e.requestId==null||e.clientLoggingDisabled!=null)){var l={request_id:e.requestId,resume_id:"0",transport:t,e2e_sample_rate:e.sampleRate,message_type:n,event:o,timestamp_ms:d(),aux_id:e.auxId,additional_data:a,df_trace_id:i};r("RtiRequestStreamE2eClientFalcoEvent").log(function(){return l})}}l.RequestStreamE2ELogger=m,l.createStreamLogger=p,l.logRequestStreamE2EEventStatic=f}),98);
__d("RequestStreamTransport",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["WEB_BR_MQTT","WEB_RS_MQTT","WEB_RS_STARGATE"]);i.RequestStreamTransport=e}),66);
__d("BladeRunnerSocket",["BladeRunnerEventHandler","BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","CurrentUser","FBMqttChannel","MqttPublishListener","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamTransport","getErrorSafe","justknobx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s="Connected",u="Disconnected",c="/br_sr",d="/sr_res",m=null;function p(e){var t,n;switch(e.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:return(t=e.request)==null?void 0:t.getInstrumentationData();case o("BladeRunnerTypes").StreamFrameType.DATA:return(n=e.data)==null?void 0:n.getInstrumentationData()}return null}function _(e){switch(e.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:return r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM;case o("BladeRunnerTypes").StreamFrameType.DATA:return r("RequestStreamE2EClientLoggerMessageType").AMENDMENT}return null}function f(e){if(e===null)return null;switch(e){case o("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:return"Accepted";case o("BladeRunnerStreamStatus").StreamStatus.REJECTED:return"Rejected";case o("BladeRunnerStreamStatus").StreamStatus.STARTED:return"Started";case o("BladeRunnerStreamStatus").StreamStatus.STOPPED:return"Stopped";case o("BladeRunnerStreamStatus").StreamStatus.CLOSED:return"Closed"}return null}function g(e){var t,n={};return e==null||(t=e.frames)==null||t.forEach(function(e){if(e.type===o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE){var t,r=(t=e.statusUpdate)==null?void 0:t.status,a=f(r);a!==null&&(n.flow_status=a)}}),n}function h(e,t){var n,r;switch(e.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:t.data_base64_size=(n=e.request)==null||(n=n.payload)==null||(n=n.length)==null?void 0:n.toString();break;case o("BladeRunnerTypes").StreamFrameType.DATA:t.data_base64_size=(r=e.data)==null||(r=r.rawDataSize())==null?void 0:r.toString();break}return null}function y(e,t,n){var a,i=p(e);if(i!=null){var l=_(e);if(l!=null){var s=null;switch(t){case o("MqttPublishListener").MqttPublishEvent.SENT:s=r("RequestStreamE2EClientLoggerEvent").SENT;break;case o("MqttPublishListener").MqttPublishEvent.ACKED:s=r("RequestStreamE2EClientLoggerEvent").PUBACK;break;case o("MqttPublishListener").MqttPublishEvent.NOT_ACKED:case o("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED:case o("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR:s=r("RequestStreamE2EClientLoggerEvent").FAILURE,n.reason==null&&(n.reason=t);break}if(s!=null)if(h(e,n),((a=e.request)==null?void 0:a.e2eLogger)!=null&&i.clientLoggingDisabled==null){var u;(u=e.request)==null||u.e2eLogger.logE2EEvent(l,s,n,i.auxId)}else o("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(i,o("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,l,s,n)}}}var C=(function(){function t(e){this.$1=[],this.$2=0,this.$3=0,this.$4=null,this.$5=0,this.$6=new Map,this.$7=e!=null?e:r("FBMqttChannel"),this.$8=new Map,r("BladeRunnerLogger").setClientSessionId(r("uuidv4")()),this.$9()}t.get=function(){return m==null&&(m=new t(r("FBMqttChannel"))),m};var a=t.prototype;return a.sendNewStreamRequest=function(n,o){var e=new(r("BladeRunnerEventHandler"))(n,o,this),a=n.getRequest();if(this.$6.set(a.streamId,e),!this.$10()){this.$11(e,a.streamId);return}this.getStreamCount()<=t.maxStreamCount?this.$12(a):(r("BladeRunnerLogger").bumpCounter("socket_request_throttled_max_streams"),r("BladeRunnerLogger").warn("Maximum stream count reached, will not send request: "+JSON.stringify(n.getRequest().getHeaders())),this.$11(e,a.streamId))},a.sendRetryStreamRequest=function(t){this.$12(t.getRequest())},a.sendCancel=function(t){r("BladeRunnerLogger").bumpCounter("socket_send_cancel");var e=new(o("BladeRunnerTypesInternal")).GatewayStreamStatusUpdate;e.streamId=t.streamId,e.status=o("BladeRunnerStreamStatus").StreamStatus.CLOSED,this.$13(e,t),this.removeStream(t.streamId)},a.sendAmendment=function(t,n,a){r("BladeRunnerLogger").bumpCounter("socket_send_amendment");var e=new(o("BladeRunnerTypesInternal")).GatewayStreamData;e.streamId=t,e.setData(n),a!=null&&(e.instrumentationData=a),this.$14(e)},a.sendAmendmentWithAck=function(a,i,l){var t=this;r("BladeRunnerLogger").bumpCounter("socket_send_amendment");var s=this.$15(),u=new(o("BladeRunnerTypesInternal")).GatewayStreamData;u.streamId=a,u.setData(i),u.shouldAck=!0,u.dataId=s,l!=null&&(u.instrumentationData=l);var c=new(e||(e=n("Promise")))(function(e,n){t.$8.set(s,{resolve:e,reject:n})});return this.$14(u),c},a.$14=function(t){this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newDataFrame(t)),this.$16()},a.sendDataAcks=function(t){r("BladeRunnerLogger").bumpCounter("socket_send_data_ack",t.length),this.$17(t)},a.removeStream=function(t){this.$6.delete(t)},a.getStreamCount=function(){return this.$6.size},a.getNextStreamId=function(){return this.$5++,this.$5},a.onMQTTStateChanged=function(t){this.$16(),!(t!=u&&t!=s||this.$4==t)&&(this.$4=t,r("BladeRunnerLogger").info("MQTTStateChanged: "+t),t==u?(r("BladeRunnerLogger").bumpCounter("mqtt_state_disconnected"),this.$18()):t==s&&r("BladeRunnerLogger").bumpCounter("mqtt_state_connected"))},a.$12=function(t){if(r("BladeRunnerLogger").bumpCounter("socket_send_request"),this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newRequestFrame(t)),!this.$16()){var e;(e=t.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"MQTT Not Connected"})}},a.$13=function(t,n){if(this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(t)),this.$16()){var e;(e=n.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").CANCEL,r("RequestStreamE2EClientLoggerEvent").SENT)}},a.$17=function(t){for(var e of t)this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newDataAckFrame(e));this.$16()},a.$19=function(){return this.$2++,this.$2},a.$15=function(){return this.$3++,this.$3},a.$16=function(){var e=!1;if(this.$7.getConnectionState()===s&&this.$1.length>0)try{this.$20(this.$1),e=!0}catch(e){}finally{this.$1=[]}return e},a.$20=function(t){var e=this,n=new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(this.$19(),t),a=n.write();if(a.length>this.$21()){var i=Math.floor(t.length/2);if(i===0){t.forEach(function(e){return y(e,o("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR,{reason:"too long"})});var l=new Error("Publish is too long: "+a.length);throw l.stack,this.$22(n,l,"Publish is too long"),l}this.$20(t.slice(0,i)),this.$20(t.slice(i,t.length))}else try{r("BladeRunnerLogger").info("send message to "+c+" ("+a.length+" bytes)");var s={qos:1,skipBuffer:!1};if(n.isInstrumented()){var u=Date.now();s.listener={onEvent:function(n){var e=(Date.now()-u).toString();t.forEach(function(t){y(t,n,{latency:e})})}}}this.$7.publish(c,a,s).catch(function(t){e.$22(n,t,"Failed publishing to MQTT")}),r("BladeRunnerLogger").bumpCounter("mqtt_publish_success")}catch(e){var d=r("getErrorSafe")(e);throw this.$22(n,d,"Failed publishing to MQTT"),d}},a.$9=function(){var e=this;r("BladeRunnerLogger").info("Starting socket with endpoint "+this.$7.getEndpoint()+" useragent "+navigator.userAgent),this.onMQTTStateChanged(this.$7.getConnectionState()),this.$7.subscribeChannelEvents({onMQTTStateChanged:function(n){e.onMQTTStateChanged(n)},onJSError:function(t){var e=t!=null&&typeof t.isRecoverable=="boolean"?t.isRecoverable:!1;e?r("BladeRunnerLogger").bumpCounter("mqtt_channel_recoverable_error"):(r("BladeRunnerLogger").warn("JS error in MQTTChannel: "+(typeof t=="object"&&t!=null?t.toString():"unknown error")+", "+JSON.stringify(t)),r("BladeRunnerLogger").bumpCounter("mqtt_channel_error"))}}),this.$7.subscribe(c,function(e){throw new Error("Unexpected response: "+c+" "+e.toString())}),this.$7.subscribe(d,function(t){e.$23(t)})},a.$23=function(t){var e=o("BladeRunnerTypesInternal").GatewayStreamBatch.read(t);this.processBatch(e)},a.$22=function(t,n,a){for(var e of t.getFrames())if(e.type===o("BladeRunnerTypes").StreamFrameType.REQUEST){var i=e.getRequest(),l=this.$6.get(i.streamId);l!=null&&this.$24(l,i.streamId,o("BladeRunnerStreamStatus").StreamStatus.CLOSED,!0,null)}else if(e.type===o("BladeRunnerTypes").StreamFrameType.DATA){var s=e.getData(),u=s.dataId;if(s.shouldAck!=null&&s.shouldAck&&u!=null){var c=new(o("BladeRunnerTypesInternal")).GatewayStreamDataAck;c.streamId=s.streamId,c.dataId=u,c.success=!1,c.code=o("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_FAILED_TO_LAND,c.message=a,this.$25(c)}}r("BladeRunnerLogger").info("Failed publishing to MQTT: "+n.message),r("BladeRunnerLogger").bumpCounter("mqtt_publish_error")},a.$25=function(t){var e=this.$8.get(t.dataId);e!=null&&(this.$8.delete(t.dataId),t.success?e.resolve(!0):t.code===o("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_LANDED_BUT_NOT_ACCEPTED?e.resolve(!1):e.reject(t.message))},a.processBatch=function(t){try{o("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(t.getInstrumentationData(),o("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").RECEIVED,g(t),t.getInstrumentationDataDfTraceId()),r("BladeRunnerLogger").bumpCounter("socket_process_batch");var e=JSON.stringify(t);r("BladeRunnerLogger").info("Received batch ("+e.length+" bytes)");var n=null;for(var a of t.getFrames()){var i=a.getStreamId();if(n==null&&(n=i),i!=null&&n!=i)throw new Error("Received batch with frames for multiple streams");a.type==o("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.$25(a.getDataAck())}if(n!=null){var l=this.$6.get(n);l!=null?l.onProxyResponse(t):r("BladeRunnerLogger").info("Received batch with frames for unknown stream id: "+n)}else r("BladeRunnerLogger").info("Received batch with no frames")}catch(e){var s=r("getErrorSafe")(e);throw r("BladeRunnerLogger").exception(s,"Failed processing batch from MQTT"),r("BladeRunnerLogger").bumpCounter("socket_process_batch_error"),s}},a.$18=function(){this.$6.forEach(function(e,t,n){e.onDisconnect()})},a.$11=function(t,n){this.$24(t,n,o("BladeRunnerStreamStatus").StreamStatus.REJECTED,!1,0)},a.$24=function(t,n,r,a,i){var e=new(o("BladeRunnerTypesInternal")).GatewayStreamStatusUpdate;e.streamId=n,e.status=r,e.shouldRetry=a,e.retryDelayMs=i;var l=new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(null,[o("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(e)]);t.onProxyResponse(l)},a.$10=function(){return r("CurrentUser").isLoggedIn()?!0:(r("BladeRunnerLogger").bumpCounter("request_stream_user_logged_out"),!1)},a.$21=function(){var e=1048576,t=512*1024;try{var n=r("justknobx")._("317");t=n*e}catch(e){}return Math.max(t-1024,0)},t})();C.maxStreamCount=2e3,l.default=C}),98);
__d("BladeRunnerStream",[],(function(t,n,r,o,a,i){var e=(function(){function e(e){this.$1=e}var t=e.prototype;return t.getStreamHandler=function(){return this.$1},t.cancel=function(){},t.amendWithAck=async function(t){return!1},t.amendFireAndForget=function(t){},t.amendWithoutAck=function(t){},t.start=function(){return Promise.resolve()},t.isAlive=function(){return!1},t.canAmend=function(){return!1},t.getStatus=function(){return null},t.getStreamId=function(){return 0},e})();i.default=e}),66);
__d("BladeRunnerStreamState",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this.$1=e,this.$2=null,this.$3=0,this.$4=!1,this.$5=0,this.$6=!1}var t=e.prototype;return t.getRequest=function(){return this.$1},t.updateRetryRequestPayload=function(t){this.$1.updateRetryRequestPayload(t)},t.isAlive=function(){return!(this.$2==o("BladeRunnerStreamStatus").StreamStatus.CLOSED||this.$2==o("BladeRunnerStreamStatus").StreamStatus.REJECTED)},t.canAmend=function(){return this.$2==o("BladeRunnerStreamStatus").StreamStatus.ACCEPTED||this.$2==o("BladeRunnerStreamStatus").StreamStatus.STARTED||this.$2==o("BladeRunnerStreamStatus").StreamStatus.STOPPED},t.getLastStatus=function(){return this.$2},t.setLastStatus=function(t){this.$2=t},t.onError=function(){this.$3+=1},t.getErrorCount=function(){return this.$3},t.resetErrors=function(){this.$3=0},t.getRetryRequestScheduled=function(){return this.$6},t.setRetryRequestScheduled=function(t){this.$6=t},t.witnessFrame=function(t){switch(t.type){case o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:var e=t.getStatusUpdate(),n=!0;switch(e.status){case o("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:n=!this.$4,this.$4||(this.$4=!0);break;case o("BladeRunnerStreamStatus").StreamStatus.STARTED:n=this.getLastStatus()!=o("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case o("BladeRunnerStreamStatus").StreamStatus.STOPPED:n=this.getLastStatus()==o("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case o("BladeRunnerStreamStatus").StreamStatus.CLOSED:case o("BladeRunnerStreamStatus").StreamStatus.REJECTED:default:n=!0}return this.setLastStatus(e.status),n;case o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:return this.$7(t.getRewriteRequest()),!1;default:return!0}},t.setRetriesAllowed=function(t){this.$5=t},t.getRetriesAllowed=function(){return this.$5},t.$7=function(t){if(!(t.temporary!=null||t.temporary==!0)){if(t.newBody!=null&&(this.$1.payload=t.newBody),t.newExtraHeader!=null&&(this.$1.extraHeader=t.newExtraHeader,this.$1.headers=JSON.parse(t.newExtraHeader)),t.patchExtraHeader!=null)try{var e=JSON.parse(t.patchExtraHeader),n=this.$1.extraHeader!=null?JSON.parse(this.$1.extraHeader):{};this.$1.headers==null&&(this.$1.headers={});for(var o of Object.keys(e))this.$1.headers[o]=e[o],n[o]=e[o];this.$1.extraHeader=JSON.stringify(n)}catch(e){r("BladeRunnerLogger").warn("Failed to patch header: "+t.patchExtraHeader)}t.killBody!=null&&t.killBody==!0&&(this.$1.payload=null)}},e})();l.default=e}),98);
__d("BladeRunnerSocketStream",["BladeRunnerStream","BladeRunnerStreamState","BladeRunnerStreamStatus","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","uuidv4"],(function(t,n,r,o,a,i,l){var e=4,s={reason:"stream_dead"},u=(function(t){function n(n,o,a){var i;return i=t.call(this,n)||this,i.$BladeRunnerSocketStream$p_1=a,i.$BladeRunnerSocketStream$p_2=new(r("BladeRunnerStreamState"))(o),i.$BladeRunnerSocketStream$p_2.setRetriesAllowed(e),i}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.start=function(){var e=this;return new Promise(function(t){e.send(),t()})},a.send=function(){var e,t,n=this.$BladeRunnerSocketStream$p_2.getRequest();(e=n.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_base64_size:(t=n.payload)==null||(t=t.length)==null?void 0:t.toString()}),this.$BladeRunnerSocketStream$p_1.sendNewStreamRequest(this.$BladeRunnerSocketStream$p_2,this.getStreamHandler())},a.amendWithAck=async function(t){var e,n=this.$BladeRunnerSocketStream$p_2.getRequest(),o=n.getInstrumentationData();if(o){var a,i;o.auxId=r("uuidv4")(),(a=n.e2eLogger)==null||a.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:t==null||(i=t.length)==null?void 0:i.toString()},o.auxId)}if(this.canAmend()){if(o){var l,u;(l=n.e2eLogger)==null||l.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").SENT,{data_size:t==null||(u=t.length)==null?void 0:u.toString()},o.auxId)}return this.$BladeRunnerSocketStream$p_1.sendAmendmentWithAck(n.streamId,this.$BladeRunnerSocketStream$p_3(t),o==null?null:JSON.stringify(o))}return(e=n.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,s,o==null?void 0:o.auxId),Promise.reject("Stream is closed or not accepted")},a.amendFireAndForget=function(t){var e=this.$BladeRunnerSocketStream$p_2.getRequest(),n=e.getInstrumentationData();if(n){var o,a;n.auxId=r("uuidv4")(),(o=e.e2eLogger)==null||o.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:t==null||(a=t.length)==null?void 0:a.toString()},n.auxId)}if(this.canAmend()){if(this.$BladeRunnerSocketStream$p_1.sendAmendment(this.$BladeRunnerSocketStream$p_2.getRequest().streamId,this.$BladeRunnerSocketStream$p_3(t),n==null?null:JSON.stringify(n)),n){var i,l;(i=e.e2eLogger)==null||i.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").SENT,{data_size:t==null||(l=t.length)==null?void 0:l.toString()},n.auxId)}}else{var u;throw(u=e.e2eLogger)==null||u.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,s,n==null?void 0:n.auxId),new Error("Stream is closed or not accepted")}},a.amendWithoutAck=function(t){this.amendFireAndForget(t)},a.$BladeRunnerSocketStream$p_3=function(t){return typeof t=="object"?btoa(new TextDecoder("utf8").decode(t)):t},a.cancel=function(){var e,t=this.$BladeRunnerSocketStream$p_2.getRequest();(e=t.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").CANCEL,r("RequestStreamE2EClientLoggerEvent").RECEIVED),this.isAlive()&&(this.$BladeRunnerSocketStream$p_1.sendCancel(this.$BladeRunnerSocketStream$p_2.getRequest()),this.$BladeRunnerSocketStream$p_2.setLastStatus(o("BladeRunnerStreamStatus").StreamStatus.CLOSED),this.getStreamHandler().onClientCancel())},a.isAlive=function(){return this.$BladeRunnerSocketStream$p_2.isAlive()},a.canAmend=function(){return this.$BladeRunnerSocketStream$p_2.canAmend()},a.getStatus=function(){return this.$BladeRunnerSocketStream$p_2.getLastStatus()},a.getStreamId=function(){return this.$BladeRunnerSocketStream$p_2.getRequest().streamId},n})(r("BladeRunnerStream"));l.default=u}),98);
__d("RequestStreamE2ESampling",["invariant","Random","RequestStreamE2EClientSamplingConfig","uuidv4"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){return e==null?!1:e.requestId!=null&&typeof e.requestId=="string"&&e.forceLogContext!=null&&typeof e.forceLogContext=="string"}function u(e,t){var n=r("RequestStreamE2EClientSamplingConfig").sampleRate;if(n>1&&e!=null){var o=r("RequestStreamE2EClientSamplingConfig").methodToSamplingMultiplier[e];o==0?n=0:o!=null&&(n/=o)}return n==1?1:n/t}function c(e,t,n,o){var a=r("uuidv4")();(t.requestId==null||t.requestId===""||typeof t.requestId!="string")&&(e.requestId!=null&&typeof e.requestId=="string"?t.requestId=e.requestId:t.requestId=a),t.requestId+="/_"+a.substring(0,4),t.resumeId="0",n!=null?t.sampleRate=n:t.sampleRate=void 0;var i="";o!=null&&o.length>0&&(i=o),i.length>0&&(t.requestLogContext!=null&&t.requestLogContext.length>0?t.requestLogContext+=":":t.requestLogContext="",t.requestLogContext+=i),(e==null?void 0:e.method)==="Falco"&&(t.clientLoggingDisabled="Falco");var l={};for(var s of Object.keys(t).sort())l[s]=t[s];return JSON.stringify(l)}function d(t,n,o,a){n&&(!n.requestId.includes("/")&&!n.requestId.includes("#")||s(0,41721));var i=u(t.method,a!=null?a:1);return r("Random").coinflip(i)?c(t,n||{requestId:""},i,o):e(n)?c(t,n||{requestId:""},null,o):""}l.isForceLogged=e,l.getSampleRateForLogging=u,l.normalizeInstrumentationData=c,l.validateInstrumentationData=d}),98);
__d("BladeRunnerClient",["Base64","BladeRunnerConfig","BladeRunnerLogger","BladeRunnerSocket","BladeRunnerSocketStream","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamTransport","cr:2046346"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t){this.$2=o("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,this.$1=e!=null?e:r("BladeRunnerSocket").get(),t&&(this.$2=t)}var t=e.prototype;return t.createStream=function(t,n,r,o){return this.$3(t,n,r,o)},t.requestStream=function(t,r,o,a){var e=this.$3(t,r,o,a);return e.send(),n("cr:2046346")!=null&&n("cr:2046346").startPulsarTest(),e},t.logInfo=function(t){r("BladeRunnerLogger").info(t)},t.bumpCounter=function(t){r("BladeRunnerLogger").bumpCounter(t)},t.$3=function(t,n,a,i){var e=new(o("BladeRunnerTypesInternal")).GatewayStreamRequest;return e.streamId=this.$1.getNextStreamId(),e.requestType=o("BladeRunnerTypes").StreamRequestType.BLADE_RUNNER,e.headers=r("BladeRunnerConfig").patchRequestHeaders(t),e.extraHeader=JSON.stringify(e.headers),e.payload=n!=null?r("Base64").encode(n):null,i!=null&&(i.transport="WEB_RS_MQTT"),e.instrumentationData=o("RequestStreamE2ESampling").validateInstrumentationData(e.headers||{},i),e.e2eLogger=o("RequestStreamE2ELogger").createStreamLogger(e.headers,e.instrumentationData,this.$2),new(r("BladeRunnerSocketStream"))(a,e,this.$1)},e})();l.default=e}),98);
__d("jsbi",[],(function(t,n,r,o,a,i){(function(e,t){typeof i=="object"&&typeof a!="undefined"?a.exports=t():typeof define=="function"&&define.amd?define(t):e.JSBI=t()})(this,function(){"use strict";function e(t){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function l(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function s(){return s=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=Function.bind.apply(e,r),a=new o;return n&&i(a,n.prototype),a},s.apply(null,arguments)}function u(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function c(e){var t=typeof Map=="function"?new Map:void 0;return c=function(e){function n(){return s(e,arguments,a(this).constructor)}if(e===null||!u(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,e)},c(e)}function d(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return t&&(typeof t=="object"||typeof t=="function")?t:d(e)}var p=(function(n){var i=Math.abs,l=Math.max,s=Math.imul,u=Math.clz32;function c(e,n){var r;if(t(this,c),e>c.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return r=m(this,a(c).call(this,e)),r.sign=n,r}return o(c,n),r(c,[{key:"toDebugString",value:function(){var e=["BigInt["],t=!0,n=!1,r=void 0;try{for(var o,a,i=this[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)a=o.value,e.push((a&&(a>>>0).toString(16))+", ")}catch(e){n=!0,r=e}finally{try{t||i.return==null||i.return()}finally{if(n)throw r}}return e.push("]"),e.join("")}},{key:"toString",value:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:10;if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":(e&e-1)==0?c.__toStringBasePowerOfTwo(this,e):c.__toStringGeneric(this,e,!1)}},{key:"__copy",value:function(){for(var e=new c(this.length,this.sign),t=0;t<this.length;t++)e[t]=this[t];return e}},{key:"__trim",value:function(){for(var e=this.length,t=this[e-1];t===0;)e--,t=this[e-1],this.pop();return e===0&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var e=0;e<this.length;e++)this[e]=0}},{key:"__clzmsd",value:function(){return u(this[this.length-1])}},{key:"__inplaceMultiplyAdd",value:function(e,t,n){n>this.length&&(n=this.length);for(var r=65535&e,o=e>>>16,a=0,i=65535&t,l=t>>>16,u=0;u<n;u++){var c=this.__digit(u),d=65535&c,m=c>>>16,p=s(d,r),_=s(d,o),f=s(m,r),g=s(m,o),h=i+(65535&p),y=l+a+(h>>>16)+(p>>>16)+(65535&_)+(65535&f);i=(_>>>16)+(f>>>16)+(65535&g)+(y>>>16),a=i>>>16,i&=65535,l=g>>>16,this.__setDigit(u,65535&h|y<<16)}if(a!==0||i!==0||l!==0)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(e,t,n){for(var r,o=0,a=0;a<n;a++)r=this.__halfDigit(t+a)+e.__halfDigit(a)+o,o=r>>>16,this.__setHalfDigit(t+a,r);return o}},{key:"__inplaceSub",value:function(e,t,n){var r=0;if(1&t){t>>=1;for(var o=this.__digit(t),a=65535&o,i=0;i<n-1>>>1;i++){var l=e.__digit(i),s=(o>>>16)-(65535&l)-r;r=1&s>>>16,this.__setDigit(t+i,s<<16|65535&a),o=this.__digit(t+i+1),a=(65535&o)-(l>>>16)-r,r=1&a>>>16}var u=e.__digit(i),c=(o>>>16)-(65535&u)-r;if(r=1&c>>>16,this.__setDigit(t+i,c<<16|65535&a),t+i+1>=this.length)throw new RangeError("out of bounds");(1&n)==0&&(o=this.__digit(t+i+1),a=(65535&o)-(u>>>16)-r,r=1&a>>>16,this.__setDigit(t+e.length,4294901760&o|65535&a))}else{t>>=1;for(var d=0;d<e.length-1;d++){var m=this.__digit(t+d),p=e.__digit(d),_=(65535&m)-(65535&p)-r;r=1&_>>>16;var f=(m>>>16)-(p>>>16)-r;r=1&f>>>16,this.__setDigit(t+d,f<<16|65535&_)}var g=this.__digit(t+d),h=e.__digit(d),y=(65535&g)-(65535&h)-r;r=1&y>>>16;var C=0;(1&n)==0&&(C=(g>>>16)-(h>>>16)-r,r=1&C>>>16),this.__setDigit(t+d,C<<16|65535&y)}return r}},{key:"__inplaceRightShift",value:function(e){if(e!==0){for(var t,n=this.__digit(0)>>>e,r=this.length-1,o=0;o<r;o++)t=this.__digit(o+1),this.__setDigit(o,t<<32-e|n),n=t>>>e;this.__setDigit(r,n)}}},{key:"__digit",value:function(e){return this[e]}},{key:"__unsignedDigit",value:function(e){return this[e]>>>0}},{key:"__setDigit",value:function(e,t){this[e]=0|t}},{key:"__setDigitGrow",value:function(e,t){this[e]=0|t}},{key:"__halfDigitLength",value:function(){var e=this.length;return 65535>=this.__unsignedDigit(e-1)?2*e-1:2*e}},{key:"__halfDigit",value:function(e){return 65535&this[e>>>1]>>>((1&e)<<4)}},{key:"__setHalfDigit",value:function(e,t){var n=e>>>1,r=this.__digit(n),o=1&e?65535&r|t<<16:4294901760&r|65535&t;this.__setDigit(n,o)}}],[{key:"BigInt",value:function(t){var n=Math.floor,r=Number.isFinite;if(typeof t=="number"){if(t===0)return c.__zero();if((0|t)===t)return 0>t?c.__oneDigit(-t,!0):c.__oneDigit(t,!1);if(!r(t)||n(t)!==t)throw new RangeError("The number "+t+" cannot be converted to BigInt because it is not an integer");return c.__fromDouble(t)}if(typeof t=="string"){var o=c.__fromString(t);if(o===null)throw new SyntaxError("Cannot convert "+t+" to a BigInt");return o}if(typeof t=="boolean")return t===!0?c.__oneDigit(1,!1):c.__zero();if(e(t)==="object"){if(t.constructor===c)return t;var a=c.__toPrimitive(t);return c.BigInt(a)}throw new TypeError("Cannot convert "+t+" to a BigInt")}},{key:"toNumber",value:function(e){var t=e.length;if(t===0)return 0;if(t===1){var n=e.__unsignedDigit(0);return e.sign?-n:n}var r=e.__digit(t-1),o=u(r),a=32*t-o;if(1024<a)return e.sign?-1/0:1/0;var i=a-1,l=r,s=t-1,d=o+1,m=d===32?0:l<<d;m>>>=12;var p=d-12,_=12<=d?0:l<<20+d,f=20+d;0<p&&0<s&&(s--,l=e.__digit(s),m|=l>>>32-p,_=l<<p,f=p),0<f&&0<s&&(s--,l=e.__digit(s),_|=l>>>32-f,f-=32);var g=c.__decideRounding(e,f,s,l);if((g===1||g===0&&(1&_)==1)&&(_=_+1>>>0,_===0&&(m++,m>>>20!=0&&(m=0,i++,1023<i))))return e.sign?-1/0:1/0;var h=e.sign?-2147483648:0;return i=i+1023<<20,c.__kBitConversionInts[1]=h|i|m,c.__kBitConversionInts[0]=_,c.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(e){if(e.length===0)return e;var t=e.__copy();return t.sign=!e.sign,t}},{key:"bitwiseNot",value:function(e){return e.sign?c.__absoluteSubOne(e).__trim():c.__absoluteAddOne(e,!0)}},{key:"exponentiate",value:function(e,t){if(t.sign)throw new RangeError("Exponent must be positive");if(t.length===0)return c.__oneDigit(1,!1);if(e.length===0)return e;if(e.length===1&&e.__digit(0)===1)return e.sign&&(1&t.__digit(0))==0?c.unaryMinus(e):e;if(1<t.length)throw new RangeError("BigInt too big");var n=t.__unsignedDigit(0);if(n===1)return e;if(n>=c.__kMaxLengthBits)throw new RangeError("BigInt too big");if(e.length===1&&e.__digit(0)===2){var r=1+(n>>>5),o=e.sign&&(1&n)!=0,a=new c(r,o);a.__initializeDigits();var i=1<<(31&n);return a.__setDigit(r-1,i),a}var l=null,s=e;for((1&n)!=0&&(l=e),n>>=1;n!==0;n>>=1)s=c.multiply(s,s),(1&n)!=0&&(l===null?l=s:l=c.multiply(l,s));return l}},{key:"multiply",value:function(e,t){if(e.length===0)return e;if(t.length===0)return t;var n=e.length+t.length;32<=e.__clzmsd()+t.__clzmsd()&&n--;var r=new c(n,e.sign!==t.sign);r.__initializeDigits();for(var o=0;o<e.length;o++)c.__multiplyAccumulate(t,e.__digit(o),r,o);return r.__trim()}},{key:"divide",value:function(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>c.__absoluteCompare(e,t))return c.__zero();var n,r=e.sign!==t.sign,o=t.__unsignedDigit(0);if(t.length===1&&65535>=o){if(o===1)return r===e.sign?e:c.unaryMinus(e);n=c.__absoluteDivSmall(e,o,null)}else n=c.__absoluteDivLarge(e,t,!0,!1);return n.sign=r,n.__trim()}},{key:"remainder",value:function(t,n){if(n.length===0)throw new RangeError("Division by zero");if(0>c.__absoluteCompare(t,n))return t;var e=n.__unsignedDigit(0);if(n.length===1&&65535>=e){if(e===1)return c.__zero();var r=c.__absoluteModSmall(t,e);return r===0?c.__zero():c.__oneDigit(r,t.sign)}var o=c.__absoluteDivLarge(t,n,!1,!0);return o.sign=t.sign,o.__trim()}},{key:"add",value:function(e,t){var n=e.sign;return n===t.sign?c.__absoluteAdd(e,t,n):0<=c.__absoluteCompare(e,t)?c.__absoluteSub(e,t,n):c.__absoluteSub(t,e,!n)}},{key:"subtract",value:function(e,t){var n=e.sign;return n===t.sign?0<=c.__absoluteCompare(e,t)?c.__absoluteSub(e,t,n):c.__absoluteSub(t,e,!n):c.__absoluteAdd(e,t,n)}},{key:"leftShift",value:function(e,t){return t.length===0||e.length===0?e:t.sign?c.__rightShiftByAbsolute(e,t):c.__leftShiftByAbsolute(e,t)}},{key:"signedRightShift",value:function(e,t){return t.length===0||e.length===0?e:t.sign?c.__leftShiftByAbsolute(e,t):c.__rightShiftByAbsolute(e,t)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(e,t){return 0>c.__compareToBigInt(e,t)}},{key:"lessThanOrEqual",value:function(e,t){return 0>=c.__compareToBigInt(e,t)}},{key:"greaterThan",value:function(e,t){return 0<c.__compareToBigInt(e,t)}},{key:"greaterThanOrEqual",value:function(e,t){return 0<=c.__compareToBigInt(e,t)}},{key:"equal",value:function(e,t){if(e.sign!==t.sign||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e.__digit(n)!==t.__digit(n))return!1;return!0}},{key:"notEqual",value:function(e,t){return!c.equal(e,t)}},{key:"bitwiseAnd",value:function(e,t){if(!e.sign&&!t.sign)return c.__absoluteAnd(e,t).__trim();if(e.sign&&t.sign){var n=l(e.length,t.length)+1,r=c.__absoluteSubOne(e,n),o=c.__absoluteSubOne(t);return r=c.__absoluteOr(r,o,r),c.__absoluteAddOne(r,!0,r).__trim()}if(e.sign){var a=[t,e];e=a[0],t=a[1]}return c.__absoluteAndNot(e,c.__absoluteSubOne(t)).__trim()}},{key:"bitwiseXor",value:function(e,t){if(!e.sign&&!t.sign)return c.__absoluteXor(e,t).__trim();if(e.sign&&t.sign){var n=l(e.length,t.length),r=c.__absoluteSubOne(e,n),o=c.__absoluteSubOne(t);return c.__absoluteXor(r,o,r).__trim()}var a=l(e.length,t.length)+1;if(e.sign){var i=[t,e];e=i[0],t=i[1]}var s=c.__absoluteSubOne(t,a);return s=c.__absoluteXor(s,e,s),c.__absoluteAddOne(s,!0,s).__trim()}},{key:"bitwiseOr",value:function(e,t){var n=l(e.length,t.length);if(!e.sign&&!t.sign)return c.__absoluteOr(e,t).__trim();if(e.sign&&t.sign){var r=c.__absoluteSubOne(e,n),o=c.__absoluteSubOne(t);return r=c.__absoluteAnd(r,o,r),c.__absoluteAddOne(r,!0,r).__trim()}if(e.sign){var a=[t,e];e=a[0],t=a[1]}var i=c.__absoluteSubOne(t,n);return i=c.__absoluteAndNot(i,e,i),c.__absoluteAddOne(i,!0,i).__trim()}},{key:"asIntN",value:function(e,t){if(t.length===0)return t;if(e===0)return c.__zero();if(e>=c.__kMaxLengthBits)return t;var n=e+31>>>5;if(t.length<n)return t;var r=t.__unsignedDigit(n-1),o=1<<(31&e-1);if(t.length===n&&r<o)return t;if((r&o)!==o)return c.__truncateToNBits(e,t);if(!t.sign)return c.__truncateAndSubFromPowerOfTwo(e,t,!0);if((r&o-1)==0){for(var a=n-2;0<=a;a--)if(t.__digit(a)!==0)return c.__truncateAndSubFromPowerOfTwo(e,t,!1);return t.length===n&&r===o?t:c.__truncateToNBits(e,t)}return c.__truncateAndSubFromPowerOfTwo(e,t,!1)}},{key:"asUintN",value:function(e,t){if(t.length===0)return t;if(e===0)return c.__zero();if(t.sign){if(e>c.__kMaxLengthBits)throw new RangeError("BigInt too big");return c.__truncateAndSubFromPowerOfTwo(e,t,!1)}if(e>=c.__kMaxLengthBits)return t;var n=e+31>>>5;if(t.length<n)return t;var r=31&e;if(t.length==n){if(r==0)return t;var o=t.__digit(n-1);if(!(o>>>r))return t}return c.__truncateToNBits(e,t)}},{key:"ADD",value:function(e,t){if(e=c.__toPrimitive(e),t=c.__toPrimitive(t),typeof e=="string")return typeof t!="string"&&(t=t.toString()),e+t;if(typeof t=="string")return e.toString()+t;if(e=c.__toNumeric(e),t=c.__toNumeric(t),c.__isBigInt(e)&&c.__isBigInt(t))return c.add(e,t);if(typeof e=="number"&&typeof t=="number")return e+t;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(e,t){return c.__compare(e,t,0)}},{key:"LE",value:function(e,t){return c.__compare(e,t,1)}},{key:"GT",value:function(e,t){return c.__compare(e,t,2)}},{key:"GE",value:function(e,t){return c.__compare(e,t,3)}},{key:"EQ",value:function(t,n){for(;;){if(c.__isBigInt(t))return c.__isBigInt(n)?c.equal(t,n):c.EQ(n,t);if(typeof t=="number"){if(c.__isBigInt(n))return c.__equalToNumber(n,t);if(e(n)!=="object")return t==n;n=c.__toPrimitive(n)}else if(typeof t=="string"){if(c.__isBigInt(n))return t=c.__fromString(t),t!==null&&c.equal(t,n);if(e(n)!=="object")return t==n;n=c.__toPrimitive(n)}else if(typeof t=="boolean"){if(c.__isBigInt(n))return c.__equalToNumber(n,+t);if(e(n)!=="object")return t==n;n=c.__toPrimitive(n)}else if(e(t)==="symbol"){if(c.__isBigInt(n))return!1;if(e(n)!=="object")return t==n;n=c.__toPrimitive(n)}else if(e(t)==="object"){if(e(n)==="object"&&n.constructor!==c)return t==n;t=c.__toPrimitive(t)}else return t==n}}},{key:"NE",value:function(e,t){return!c.EQ(e,t)}},{key:"__zero",value:function(){return new c(0,!1)}},{key:"__oneDigit",value:function(e,t){var n=new c(1,t);return n.__setDigit(0,e),n}},{key:"__decideRounding",value:function(e,t,n,r){if(0<t)return-1;var o;if(0>t)o=-t-1;else{if(n===0)return-1;n--,r=e.__digit(n),o=31}var a=1<<o;if((r&a)==0)return-1;if(a-=1,(r&a)!=0)return 1;for(;0<n;)if(n--,e.__digit(n)!==0)return 1;return 0}},{key:"__fromDouble",value:function(e){c.__kBitConversionDouble[0]=e;var t,n=2047&c.__kBitConversionInts[1]>>>20,r=n-1023,o=(r>>>5)+1,a=new c(o,0>e),i=1048575&c.__kBitConversionInts[1]|1048576,l=c.__kBitConversionInts[0],s=20,u=31&r,d=0;if(u<s){var m=s-u;d=m+32,t=i>>>m,i=i<<32-m|l>>>m,l<<=32-m}else if(u===s)d=32,t=i,i=l;else{var p=u-s;d=32-p,t=i<<p|l>>>32-p,i=l<<p}a.__setDigit(o-1,t);for(var _=o-2;0<=_;_--)0<d?(d-=32,t=i,i=l):t=0,a.__setDigit(_,t);return a.__trim()}},{key:"__isWhitespace",value:function(e){return 13>=e&&9<=e||(159>=e?e==32:131071>=e?e==160||e==5760:196607>=e?(e&=131071,10>=e||e==40||e==41||e==47||e==95||e==4096):e==65279)}},{key:"__fromString",value:function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=0,r=e.length,o=0;if(o===r)return c.__zero();for(var a=e.charCodeAt(o);c.__isWhitespace(a);){if(++o===r)return c.__zero();a=e.charCodeAt(o)}if(a===43){if(++o===r)return null;a=e.charCodeAt(o),n=1}else if(a===45){if(++o===r)return null;a=e.charCodeAt(o),n=-1}if(t===0){if(t=10,a===48){if(++o===r)return c.__zero();if(a=e.charCodeAt(o),a===88||a===120){if(t=16,++o===r)return null;a=e.charCodeAt(o)}else if(a===79||a===111){if(t=8,++o===r)return null;a=e.charCodeAt(o)}else if(a===66||a===98){if(t=2,++o===r)return null;a=e.charCodeAt(o)}}}else if(t===16&&a===48){if(++o===r)return c.__zero();if(a=e.charCodeAt(o),a===88||a===120){if(++o===r)return null;a=e.charCodeAt(o)}}for(;a===48;){if(++o===r)return c.__zero();a=e.charCodeAt(o)}var i=r-o,l=c.__kMaxBitsPerChar[t],s=c.__kBitsPerCharTableMultiplier-1;if(i>1073741824/l)return null;var u=l*i+s>>>c.__kBitsPerCharTableShift,d=new c(u+31>>>5,!1),m=10>t?t:10,p=10<t?t-10:0;if((t&t-1)==0){l>>=c.__kBitsPerCharTableShift;var _=[],f=[],g=!1;do{for(var h,y=0,C=0;;){if(h=void 0,a-48>>>0<m)h=a-48;else if((32|a)-97>>>0<p)h=(32|a)-87;else{g=!0;break}if(C+=l,y=y<<l|h,++o===r){g=!0;break}if(a=e.charCodeAt(o),32<C+l)break}_.push(y),f.push(C)}while(!g);c.__fillFromParts(d,_,f)}else{d.__initializeDigits();var b=!1,v=0;do{for(var S,R=0,L=1;;){if(S=void 0,a-48>>>0<m)S=a-48;else if((32|a)-97>>>0<p)S=(32|a)-87;else{b=!0;break}var E=L*t;if(4294967295<E)break;if(L=E,R=R*t+S,v++,++o===r){b=!0;break}a=e.charCodeAt(o)}s=32*c.__kBitsPerCharTableMultiplier-1;var k=l*v+s>>>c.__kBitsPerCharTableShift+5;d.__inplaceMultiplyAdd(L,R,k)}while(!b)}if(o!==r){if(!c.__isWhitespace(a))return null;for(o++;o<r;o++)if(a=e.charCodeAt(o),!c.__isWhitespace(a))return null}return n!==0&&t!==10?null:(d.sign=n===-1,d.__trim())}},{key:"__fillFromParts",value:function(e,t,n){for(var r=0,o=0,a=0,i=t.length-1;0<=i;i--){var l=t[i],s=n[i];o|=l<<a,a+=s,a===32?(e.__setDigit(r++,o),a=0,o=0):32<a&&(e.__setDigit(r++,o),a-=32,o=l>>>s-a)}if(o!==0){if(r>=e.length)throw new Error("implementation bug");e.__setDigit(r++,o)}for(;r<e.length;r++)e.__setDigit(r,0)}},{key:"__toStringBasePowerOfTwo",value:function(e,t){var n=e.length,r=t-1;r=(85&r>>>1)+(85&r),r=(51&r>>>2)+(51&r),r=(15&r>>>4)+(15&r);var o=r,a=t-1,i=e.__digit(n-1),l=u(i),s=0|(32*n-l+o-1)/o;if(e.sign&&s++,268435456<s)throw new Error("string too long");for(var d=Array(s),m=s-1,p=0,_=0,f=0;f<n-1;f++){var g=e.__digit(f),h=(p|g<<_)&a;d[m--]=c.__kConversionChars[h];var y=o-_;for(p=g>>>y,_=32-y;_>=o;)d[m--]=c.__kConversionChars[p&a],p>>>=o,_-=o}var C=(p|i<<_)&a;for(d[m--]=c.__kConversionChars[C],p=i>>>o-_;p!==0;)d[m--]=c.__kConversionChars[p&a],p>>>=o;if(e.sign&&(d[m--]="-"),m!==-1)throw new Error("implementation bug");return d.join("")}},{key:"__toStringGeneric",value:function(e,t,n){var r=e.length;if(r===0)return"";if(r===1){var o=e.__unsignedDigit(0).toString(t);return n===!1&&e.sign&&(o="-"+o),o}var a=32*r-u(e.__digit(r-1)),i=c.__kMaxBitsPerChar[t],l=i-1,s=a*c.__kBitsPerCharTableMultiplier;s+=l-1,s=0|s/l;var d,m,p=s+1>>1,_=c.exponentiate(c.__oneDigit(t,!1),c.__oneDigit(p,!1)),f=_.__unsignedDigit(0);if(_.length===1&&65535>=f){d=new c(e.length,!1),d.__initializeDigits();for(var g,h=0,y=2*e.length-1;0<=y;y--)g=h<<16|e.__halfDigit(y),d.__setHalfDigit(y,0|g/f),h=0|g%f;m=h.toString(t)}else{var C=c.__absoluteDivLarge(e,_,!0,!0);d=C.quotient;var b=C.remainder.__trim();m=c.__toStringGeneric(b,t,!0)}d.__trim();for(var v=c.__toStringGeneric(d,t,!0);m.length<p;)m="0"+m;return n===!1&&e.sign&&(v="-"+v),v+m}},{key:"__unequalSign",value:function(e){return e?-1:1}},{key:"__absoluteGreater",value:function(e){return e?-1:1}},{key:"__absoluteLess",value:function(e){return e?1:-1}},{key:"__compareToBigInt",value:function(e,t){var n=e.sign;if(n!==t.sign)return c.__unequalSign(n);var r=c.__absoluteCompare(e,t);return 0<r?c.__absoluteGreater(n):0>r?c.__absoluteLess(n):0}},{key:"__compareToNumber",value:function(e,t){if(!0|t){var n=e.sign,r=0>t;if(n!==r)return c.__unequalSign(n);if(e.length===0){if(r)throw new Error("implementation bug");return t===0?0:-1}if(1<e.length)return c.__absoluteGreater(n);var o=i(t),a=e.__unsignedDigit(0);return a>o?c.__absoluteGreater(n):a<o?c.__absoluteLess(n):0}return c.__compareToDouble(e,t)}},{key:"__compareToDouble",value:function(e,t){if(t!==t)return t;if(t===1/0)return-1;if(t===-1/0)return 1;var n=e.sign;if(n!==0>t)return c.__unequalSign(n);if(t===0)throw new Error("implementation bug: should be handled elsewhere");if(e.length===0)return-1;c.__kBitConversionDouble[0]=t;var r=2047&c.__kBitConversionInts[1]>>>20;if(r==2047)throw new Error("implementation bug: handled elsewhere");var o=r-1023;if(0>o)return c.__absoluteGreater(n);var a=e.length,i=e.__digit(a-1),l=u(i),s=32*a-l,d=o+1;if(s<d)return c.__absoluteLess(n);if(s>d)return c.__absoluteGreater(n);var m=1048576|1048575&c.__kBitConversionInts[1],p=c.__kBitConversionInts[0],_=20,f=31-l;if(f!==(s-1)%31)throw new Error("implementation bug");var g,h=0;if(f<_){var y=_-f;h=y+32,g=m>>>y,m=m<<32-y|p>>>y,p<<=32-y}else if(f===_)h=32,g=m,m=p;else{var C=f-_;h=32-C,g=m<<C|p>>>32-C,m=p<<C}if(i>>>=0,g>>>=0,i>g)return c.__absoluteGreater(n);if(i<g)return c.__absoluteLess(n);for(var b=a-2;0<=b;b--){0<h?(h-=32,g=m>>>0,m=p,p=0):g=0;var v=e.__unsignedDigit(b);if(v>g)return c.__absoluteGreater(n);if(v<g)return c.__absoluteLess(n)}if(m!==0||p!==0){if(h===0)throw new Error("implementation bug");return c.__absoluteLess(n)}return 0}},{key:"__equalToNumber",value:function(e,t){return t|t===0?t===0?e.length===0:e.length===1&&e.sign===0>t&&e.__unsignedDigit(0)===i(t):c.__compareToDouble(e,t)===0}},{key:"__comparisonResultToBool",value:function(e,t){switch(t){case 0:return 0>e;case 1:return 0>=e;case 2:return 0<e;case 3:return 0<=e}throw new Error("unreachable")}},{key:"__compare",value:function(e,t,n){if(e=c.__toPrimitive(e),t=c.__toPrimitive(t),typeof e=="string"&&typeof t=="string")switch(n){case 0:return e<t;case 1:return e<=t;case 2:return e>t;case 3:return e>=t}if(c.__isBigInt(e)&&typeof t=="string")return t=c.__fromString(t),t!==null&&c.__comparisonResultToBool(c.__compareToBigInt(e,t),n);if(typeof e=="string"&&c.__isBigInt(t))return e=c.__fromString(e),e!==null&&c.__comparisonResultToBool(c.__compareToBigInt(e,t),n);if(e=c.__toNumeric(e),t=c.__toNumeric(t),c.__isBigInt(e)){if(c.__isBigInt(t))return c.__comparisonResultToBool(c.__compareToBigInt(e,t),n);if(typeof t!="number")throw new Error("implementation bug");return c.__comparisonResultToBool(c.__compareToNumber(e,t),n)}if(typeof e!="number")throw new Error("implementation bug");if(c.__isBigInt(t))return c.__comparisonResultToBool(c.__compareToNumber(t,e),2^n);if(typeof t!="number")throw new Error("implementation bug");return n===0?e<t:n===1?e<=t:n===2?e>t:n===3?e>=t:void 0}},{key:"__absoluteAdd",value:function(e,t,n){if(e.length<t.length)return c.__absoluteAdd(t,e,n);if(e.length===0)return e;if(t.length===0)return e.sign===n?e:c.unaryMinus(e);var r=e.length;(e.__clzmsd()===0||t.length===e.length&&t.__clzmsd()===0)&&r++;for(var o=new c(r,n),a=0,i=0;i<t.length;i++){var l=t.__digit(i),s=e.__digit(i),u=(65535&s)+(65535&l)+a,d=(s>>>16)+(l>>>16)+(u>>>16);a=d>>>16,o.__setDigit(i,65535&u|d<<16)}for(;i<e.length;i++){var m=e.__digit(i),p=(65535&m)+a,_=(m>>>16)+(p>>>16);a=_>>>16,o.__setDigit(i,65535&p|_<<16)}return i<o.length&&o.__setDigit(i,a),o.__trim()}},{key:"__absoluteSub",value:function(e,t,n){if(e.length===0)return e;if(t.length===0)return e.sign===n?e:c.unaryMinus(e);for(var r=new c(e.length,n),o=0,a=0;a<t.length;a++){var i=e.__digit(a),l=t.__digit(a),s=(65535&i)-(65535&l)-o;o=1&s>>>16;var u=(i>>>16)-(l>>>16)-o;o=1&u>>>16,r.__setDigit(a,65535&s|u<<16)}for(;a<e.length;a++){var d=e.__digit(a),m=(65535&d)-o;o=1&m>>>16;var p=(d>>>16)-o;o=1&p>>>16,r.__setDigit(a,65535&m|p<<16)}return r.__trim()}},{key:"__absoluteAddOne",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length;n===null?n=new c(r,t):n.sign=t;for(var o=!0,a=0;a<r;a++){var i=e.__digit(a),l=i===-1;o&&(i=0|i+1),o=l,n.__setDigit(a,i)}return o&&n.__setDigitGrow(r,1),n}},{key:"__absoluteSubOne",value:function(e,t){var n=e.length;t=t||n;for(var r=new c(t,!1),o=!0,a=0;a<n;a++){var i=e.__digit(a),l=i===0;o&&(i=0|i-1),o=l,r.__setDigit(a,i)}for(var s=n;s<t;s++)r.__setDigit(s,0);return r}},{key:"__absoluteAnd",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length,o=t.length,a=o;if(r<o){a=r;var i=e,l=r;e=t,r=o,t=i,o=l}var s=a;n===null?n=new c(s,!1):s=n.length;for(var u=0;u<a;u++)n.__setDigit(u,e.__digit(u)&t.__digit(u));for(;u<s;u++)n.__setDigit(u,0);return n}},{key:"__absoluteAndNot",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length,o=t.length,a=o;r<o&&(a=r);var i=r;n===null?n=new c(i,!1):i=n.length;for(var l=0;l<a;l++)n.__setDigit(l,e.__digit(l)&~t.__digit(l));for(;l<r;l++)n.__setDigit(l,e.__digit(l));for(;l<i;l++)n.__setDigit(l,0);return n}},{key:"__absoluteOr",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length,o=t.length,a=o;if(r<o){a=r;var i=e,l=r;e=t,r=o,t=i,o=l}var s=r;n===null?n=new c(s,!1):s=n.length;for(var u=0;u<a;u++)n.__setDigit(u,e.__digit(u)|t.__digit(u));for(;u<r;u++)n.__setDigit(u,e.__digit(u));for(;u<s;u++)n.__setDigit(u,0);return n}},{key:"__absoluteXor",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length,o=t.length,a=o;if(r<o){a=r;var i=e,l=r;e=t,r=o,t=i,o=l}var s=r;n===null?n=new c(s,!1):s=n.length;for(var u=0;u<a;u++)n.__setDigit(u,e.__digit(u)^t.__digit(u));for(;u<r;u++)n.__setDigit(u,e.__digit(u));for(;u<s;u++)n.__setDigit(u,0);return n}},{key:"__absoluteCompare",value:function(e,t){var n=e.length-t.length;if(n!=0)return n;for(var r=e.length-1;0<=r&&e.__digit(r)===t.__digit(r);)r--;return 0>r?0:e.__unsignedDigit(r)>t.__unsignedDigit(r)?1:-1}},{key:"__multiplyAccumulate",value:function(e,t,n,r){if(t!==0){for(var o=65535&t,a=t>>>16,i=0,l=0,u=0,c=0;c<e.length;c++,r++){var d=n.__digit(r),m=65535&d,p=d>>>16,_=e.__digit(c),f=65535&_,g=_>>>16,h=s(f,o),y=s(f,a),C=s(g,o),b=s(g,a);m+=l+(65535&h),p+=u+i+(m>>>16)+(h>>>16)+(65535&y)+(65535&C),i=p>>>16,l=(y>>>16)+(C>>>16)+(65535&b)+i,i=l>>>16,l&=65535,u=b>>>16,d=65535&m|p<<16,n.__setDigit(r,d)}for(;i!==0||l!==0||u!==0;r++){var v=n.__digit(r),S=(65535&v)+l,R=(v>>>16)+(S>>>16)+u+i;l=0,u=0,i=R>>>16,v=65535&S|R<<16,n.__setDigit(r,v)}}}},{key:"__internalMultiplyAdd",value:function(e,t,n,r,o){for(var a=n,i=0,l=0;l<r;l++){var u=e.__digit(l),c=s(65535&u,t),d=(65535&c)+i+a;a=d>>>16;var m=s(u>>>16,t),p=(65535&m)+(c>>>16)+a;a=p>>>16,i=m>>>16,o.__setDigit(l,p<<16|65535&d)}if(o.length>r)for(o.__setDigit(r++,a+i);r<o.length;)o.__setDigit(r++,0);else if(a+i!==0)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(e,t,n){n===null&&(n=new c(e.length,!1));for(var r=0,o=2*e.length-1;0<=o;o-=2){var a=(r<<16|e.__halfDigit(o))>>>0,i=0|a/t;r=0|a%t,a=(r<<16|e.__halfDigit(o-1))>>>0;var l=0|a/t;r=0|a%t,n.__setDigit(o>>>1,i<<16|l)}return n}},{key:"__absoluteModSmall",value:function(e,t){for(var n,r=0,o=2*e.length-1;0<=o;o--)n=(r<<16|e.__halfDigit(o))>>>0,r=0|n%t;return r}},{key:"__absoluteDivLarge",value:function(e,t,n,r){var o=t.__halfDigitLength(),a=t.length,i=e.__halfDigitLength()-o,l=null;n&&(l=new c(i+2>>>1,!1),l.__initializeDigits());var u=new c(o+2>>>1,!1);u.__initializeDigits();var d=c.__clz16(t.__halfDigit(o-1));0<d&&(t=c.__specialLeftShift(t,d,0));for(var m=c.__specialLeftShift(e,d,1),p=t.__halfDigit(o-1),_=0,f=i;0<=f;f--){var g=65535,h=m.__halfDigit(f+o);if(h!==p){var y=(h<<16|m.__halfDigit(f+o-1))>>>0;g=0|y/p;for(var C=0|y%p,b=t.__halfDigit(o-2),v=m.__halfDigit(f+o-2);s(g,b)>>>0>(C<<16|v)>>>0&&(g--,C+=p,!(65535<C)););}c.__internalMultiplyAdd(t,g,0,a,u);var S=m.__inplaceSub(u,f,o+1);S!==0&&(S=m.__inplaceAdd(t,f,o),m.__setHalfDigit(f+o,m.__halfDigit(f+o)+S),g--),n&&(1&f?_=g<<16:l.__setDigit(f>>>1,_|g))}return r?(m.__inplaceRightShift(d),n?{quotient:l,remainder:m}:m):n?l:void 0}},{key:"__clz16",value:function(e){return u(e)-16}},{key:"__specialLeftShift",value:function(e,t,n){var r=e.length,o=new c(r+n,!1);if(t===0){for(var a=0;a<r;a++)o.__setDigit(a,e.__digit(a));return 0<n&&o.__setDigit(r,0),o}for(var i,l=0,s=0;s<r;s++)i=e.__digit(s),o.__setDigit(s,i<<t|l),l=i>>>32-t;return 0<n&&o.__setDigit(r,l),o}},{key:"__leftShiftByAbsolute",value:function(e,t){var n=c.__toShiftAmount(t);if(0>n)throw new RangeError("BigInt too big");var r=n>>>5,o=31&n,a=e.length,i=o!==0&&e.__digit(a-1)>>>32-o!=0,l=a+r+(i?1:0),s=new c(l,e.sign);if(o===0){for(var u=0;u<r;u++)s.__setDigit(u,0);for(;u<l;u++)s.__setDigit(u,e.__digit(u-r))}else{for(var d=0,m=0;m<r;m++)s.__setDigit(m,0);for(var p,_=0;_<a;_++)p=e.__digit(_),s.__setDigit(_+r,p<<o|d),d=p>>>32-o;if(i)s.__setDigit(a+r,d);else if(d!==0)throw new Error("implementation bug")}return s.__trim()}},{key:"__rightShiftByAbsolute",value:function(e,t){var n=e.length,r=e.sign,o=c.__toShiftAmount(t);if(0>o)return c.__rightShiftByMaximum(r);var a=o>>>5,i=31&o,l=n-a;if(0>=l)return c.__rightShiftByMaximum(r);var s=!1;if(r){if((e.__digit(a)&(1<<i)-1)!=0)s=!0;else for(var u=0;u<a;u++)if(e.__digit(u)!==0){s=!0;break}}if(s&&i===0){var d=e.__digit(n-1);~d==0&&l++}var m=new c(l,r);if(i===0)for(var p=a;p<n;p++)m.__setDigit(p-a,e.__digit(p));else{for(var _,f=e.__digit(a)>>>i,g=n-a-1,h=0;h<g;h++)_=e.__digit(h+a+1),m.__setDigit(h,_<<32-i|f),f=_>>>i;m.__setDigit(g,f)}return s&&(m=c.__absoluteAddOne(m,!0,m)),m.__trim()}},{key:"__rightShiftByMaximum",value:function(e){return e?c.__oneDigit(1,!0):c.__zero()}},{key:"__toShiftAmount",value:function(e){if(1<e.length)return-1;var t=e.__unsignedDigit(0);return t>c.__kMaxLengthBits?-1:t}},{key:"__toPrimitive",value:function(t){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"default";if(e(t)!=="object"||t.constructor===c)return t;var r=t[Symbol.toPrimitive];if(r){var o=r(n);if(e(o)!=="object")return o;throw new TypeError("Cannot convert object to primitive value")}var a=t.valueOf;if(a){var i=a.call(t);if(e(i)!=="object")return i}var l=t.toString;if(l){var s=l.call(t);if(e(s)!=="object")return s}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(e){return c.__isBigInt(e)?e:+e}},{key:"__isBigInt",value:function(t){return e(t)==="object"&&t.constructor===c}},{key:"__truncateToNBits",value:function(e,t){for(var n=e+31>>>5,r=new c(n,t.sign),o=n-1,a=0;a<o;a++)r.__setDigit(a,t.__digit(a));var i=t.__digit(o);if((31&e)!=0){var l=32-(31&e);i=i<<l>>>l}return r.__setDigit(o,i),r.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(e,t,n){for(var r=Math.min,o=e+31>>>5,a=new c(o,n),i=0,l=o-1,s=0,u=r(l,t.length);i<u;i++){var d=t.__digit(i),m=0-(65535&d)-s;s=1&m>>>16;var p=0-(d>>>16)-s;s=1&p>>>16,a.__setDigit(i,65535&m|p<<16)}for(;i<l;i++)a.__setDigit(i,0|-s);var _,f=l<t.length?t.__digit(l):0,g=31&e;if(g===0){var h=0-(65535&f)-s;s=1&h>>>16;var y=0-(f>>>16)-s;_=65535&h|y<<16}else{var C=32-g;f=f<<C>>>C;var b=1<<32-C,v=(65535&b)-(65535&f)-s;s=1&v>>>16;var S=(b>>>16)-(f>>>16)-s;_=65535&v|S<<16,_&=b-1}return a.__setDigit(l,_),a.__trim()}},{key:"__digitPow",value:function(e,t){for(var n=1;0<t;)1&t&&(n*=e),t>>>=1,e*=e;return n}}]),c})(c(Array));return p.__kMaxLength=33554432,p.__kMaxLengthBits=p.__kMaxLength<<5,p.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],p.__kBitsPerCharTableShift=5,p.__kBitsPerCharTableMultiplier=1<<p.__kBitsPerCharTableShift,p.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],p.__kBitConversionBuffer=new ArrayBuffer(8),p.__kBitConversionDouble=new Float64Array(p.__kBitConversionBuffer),p.__kBitConversionInts=new Int32Array(p.__kBitConversionBuffer),p})}),null);
__d("TCompactProtocolPolyfill",["StringToUtf8","ThriftTypes","Utf8ToString","jsbi"],(function(t,n,r,o,a,i,l){var e,s,u=Object.freeze({CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12,CT_FLOAT:13}),c=Object.freeze({NONE:-1,CT_BOOLEAN_TRUE:u.CT_BOOLEAN_TRUE,CT_BOOLEAN_FALSE:u.CT_BOOLEAN_FALSE}),d=[u.CT_STOP,0,u.CT_BOOLEAN_TRUE,u.CT_BYTE,u.CT_DOUBLE,0,u.CT_I16,0,u.CT_I32,0,u.CT_I64,u.CT_BINARY,u.CT_STRUCT,u.CT_MAP,u.CT_SET,u.CT_LIST,0,0,0,u.CT_FLOAT],m=Math.pow(2,7)-1,p=-1*Math.pow(2,7),_=Math.pow(2,15)-1,f=-1*Math.pow(2,15),g=Math.pow(2,31)-1,h=-1*Math.pow(2,31),y=Math.pow(2,32)-1,C=(s=r("jsbi")).BigInt("9223372036854775807"),b=s.BigInt("-9223372036854775808"),v=s.BigInt("18446744073709551615"),S=s.BigInt(63),R=s.BigInt(1),L=s.BigInt(0),E=s.BigInt(7),k=s.BigInt(70),I=s.BigInt(127),T=s.BigInt(128),D=Math.pow(2,4),x=(function(){function t(e){this.$4=null,this.$5=null,this.$1=e,this.$2=[],this.$3=0,this.$6=new DataView(new ArrayBuffer(1))}var n=t.prototype;return n.readStructBegin=function(){this.$2.push(this.$3),this.$3=0},n.readStructEnd=function(){return this.$3=this.$2.pop(),0},n.writeStructBegin=function(t){return this.$2.push(this.$3),this.$3=0,0},n.writeStructEnd=function(){return this.$3=this.$2.pop(),0},n.writeFieldBegin=function(n){return n.ftype===(e||(e=r("ThriftTypes"))).BOOL?(this.$4={fid:n.fid,fname:n.fname,ftype:n.ftype},0):this.$7(n,c.NONE)},n.writeListBegin=function(t){return this.$8(t)},n.writeListEnd=function(){return 0},n.writeSetBegin=function(t){return this.$8(t)},n.writeSetEnd=function(){return 0},n.writeMapBegin=function(t){var e=0;if(t.size===0)e+=this.$1.writeByte(0);else if(e+=this.writeVarint32(t.size),t.ktype!=null&&t.vtype!=null)e+=this.$1.writeByte(this.$9(t.ktype)<<4|this.$9(t.vtype));else throw new Error("received invalid map info: "+JSON.stringify(t));return e},n.writeMapEnd=function(){return 0},n.$7=function(t,n){var e=0,r=n===c.NONE?this.$9(t.ftype):n;return t.fid>this.$3&&t.fid-this.$3<=D-1?e+=this.$1.writeByte(t.fid-this.$3<<4|r):(e+=this.$1.writeByte(r),e+=this.writeI16(t.fid)),this.$3=t.fid,e},n.$8=function(t){var e=0,n=this.$9(t.etype);return t.size<=D-2?e+=this.$1.writeByte(t.size<<4|n):(e+=this.$1.writeByte(240|n),e+=this.writeVarint32(t.size)),e},n.readFieldBegin=function(){var t=this.$1.readByte(),n=t&15;if(n===(e||(e=r("ThriftTypes"))).STOP)return{ftype:(e||(e=r("ThriftTypes"))).STOP,fid:0};var o=(t&240)>>>4,a;o===0?a=this.readI16():a=this.$3+o;var i=this.$10(n);return(n===u.CT_BOOLEAN_TRUE||n===u.CT_BOOLEAN_FALSE)&&(this.$5=n===u.CT_BOOLEAN_TRUE),this.$3=a,{ftype:i,fid:a}},n.readListBegin=function(){return this.$11()},n.readListEnd=function(){return 0},n.readSetBegin=function(){return this.$11()},n.readSetEnd=function(){return 0},n.readMapBegin=function(){var e=this.readVarint32();if(e>0){var t=this.$1.readByte(),n=this.$12(t>>4,"readMapBegin:key"),r=this.$12(t&15,"readMapBegin:value");return{ktype:this.$10(n),vtype:this.$10(r),size:e}}return{size:e}},n.readMapEnd=function(){return 0},n.$12=function(t,n){if(t<0||t>13)throw new Error(n+" read invalid compact type: "+t);return t},n.$11=function(){var e=this.$1.readByte(),t=this.$12(e&15,"_readListOrSetBegin"),n=this.$10(t),r=e>>4&15;return r===15&&(r=this.readVarint32()),{etype:n,size:r}},n.readFieldEnd=function(){return 0},n.readByte=function(){return this.$6.setUint8(0,this.$1.readByte()),this.$6.getInt8(0)},n.writeByte=function(t){if(t<p||t>m)throw new Error("byte to write is out of range: "+t);return this.$6.setInt8(0,t),this.$1.writeByte(this.$6.getUint8(0))},n.readFloat=function(){return this.$1.readFloatBE()},n.writeFloat=function(t){return this.$1.writeFloatBE(t)},n.readDouble=function(){return this.$1.readDoubleBE()},n.writeDouble=function(t){return this.$1.writeDoubleBE(t)},n.writeString=function(t){return this.writeBinary(o("StringToUtf8").StringToUtf8(t))},n.skip=function(n){switch(n){case(e||(e=r("ThriftTypes"))).STOP:return;case(e||(e=r("ThriftTypes"))).BOOL:this.readBool();break;case(e||(e=r("ThriftTypes"))).BYTE:this.readByte();break;case(e||(e=r("ThriftTypes"))).DOUBLE:this.readDouble();break;case(e||(e=r("ThriftTypes"))).I16:this.readI16();break;case(e||(e=r("ThriftTypes"))).I32:this.readI32();break;case(e||(e=r("ThriftTypes"))).I64:this.readI64();break;case(e||(e=r("ThriftTypes"))).STRING:this.readString();break;case(e||(e=r("ThriftTypes"))).STRUCT:{this.readStructBegin();for(var t;t=this.readFieldBegin(),t.ftype!==(e||(e=r("ThriftTypes"))).STOP;)this.skip(t.ftype);this.readStructEnd();break}case(e||(e=r("ThriftTypes"))).MAP:{var o=this.readMapBegin();if(o.size>0&&o.ktype!=null&&o.vtype!=null)for(var a=o.ktype,i=o.vtype,l=0;l<o.size;l++)this.skip(a),this.skip(i);break}case(e||(e=r("ThriftTypes"))).SET:case(e||(e=r("ThriftTypes"))).LIST:{for(var s=this.$11(),u=0;u<s.size;u++)this.skip(s.etype);break}case(e||(e=r("ThriftTypes"))).FLOAT:this.readFloat();break;default:throw new Error("encoutered unknow thrift type: "+n+" in skip")}},n.toByteArray=function(){return this.$1.toByteArray()},n.writeFieldEnd=function(){return 0},n.writeFieldStop=function(){return this.$1.writeByte((e||(e=r("ThriftTypes"))).STOP)},n.writeI16=function(t){if(t<f||t>_)throw new Error("trying to write i16 out of range: "+t);return this.writeVarint32(this.i32ToZigzag(t))},n.readI16=function(){var e=this.zigzagToI32(this.readVarint32());if(e<f||e>_)throw new Error("read invalid i16: "+e);return e},n.writeI32=function(t){if(t<h||t>g)throw new Error("i32 out of range: "+t);return this.writeVarint32(this.i32ToZigzag(t))},n.readI32=function(){return this.zigzagToI32(this.readVarint32())},n.writeI64=function(t){return this.writeVarint64(this.i64ToZigzag(t))},n.readI64=function(){return this.zigzagToI64(this.readVarint64())},n.readBool=function(){var e;return this.$5!=null?(e=this.$5,this.$5=null):e=this.$1.readByte()===u.CT_BOOLEAN_TRUE,e},n.writeBool=function(t){var e=0;return this.$4!=null?(e+=this.$7(this.$4,t?c.CT_BOOLEAN_TRUE:c.CT_BOOLEAN_FALSE),this.$4=null):e+=this.$1.writeByte(t?u.CT_BOOLEAN_TRUE:u.CT_BOOLEAN_FALSE),e},n.readBinary=function(){var e=this.readVarint32();return e===0?new Uint8Array(0):this.$1.readBytes(e)},n.writeBinary=function(t){var e=0;return e+=this.writeVarint32(t.length),e+=this.$1.write(t),e},n.i32ToZigzag=function(t){if(t<h||t>g)throw new Error("number: "+t+" is out of range of i32");return(t<<1^(t<0?4294967295:0))>>>0},n.zigzagToI32=function(t){if(t<0||t>y)throw new Error("number: "+t+" is out of range of uint32");return t>>>1^-1*(t&1)},n.i64ToZigzag=function(t){if(r("jsbi").greaterThan(t,C)||r("jsbi").lessThan(t,b))throw new Error("i64 out of range: "+t.toString());return r("jsbi").bitwiseXor(r("jsbi").signedRightShift(t,S),r("jsbi").leftShift(t,R))},n.zigzagToI64=function(t){if(r("jsbi").lessThan(t,0)||r("jsbi").greaterThan(t,v))throw new Error("invalid uint64: "+t.toString());return r("jsbi").equal(r("jsbi").bitwiseAnd(t,R),R)?r("jsbi").bitwiseNot(r("jsbi").signedRightShift(t,R)):r("jsbi").signedRightShift(t,R)},n.writeVarint32=function(t){if(t<0||t>y)throw new Error("writeVarint32 received out of range uint32: "+t);for(var e=t,n=0;;)if(e>>>7)this.$1.writeByte(e&127|128),n++,e>>>=7;else{this.$1.writeByte(e),n++;break}return n},n.readVarint32=function(){for(var e=0,t=0,n;;){if(n=this.$1.readByte(),e=(e|(n&127)<<t)>>>0,t+=7,(n&128)==0){if(t===35&&(n&240)!=0)throw new Error("result exceeded 32 bit limit");break}if(t>28)throw new Error("result exceeded 32 bit limit")}return e},n.writeVarint64=function(t){if(r("jsbi").lessThan(t,L)||r("jsbi").greaterThan(t,v))throw new Error("invalid uint64: "+t.toString());for(var e=t,n=0;;)if(r("jsbi").equal(r("jsbi").signedRightShift(e,E),L)){this.$1.writeByte(r("jsbi").toNumber(e)),n++;break}else{var o,a=(o=r("jsbi")).toNumber(o.bitwiseOr(o.bitwiseAnd(e,I),T));this.$1.writeByte(a),n++,e=o.signedRightShift(e,E)}return n},n.readVarint64=function(){for(var e=L,t=L,n;;){var o;if(n=(o=r("jsbi")).BigInt(this.$1.readByte()),e=o.bitwiseOr(e,o.leftShift(o.bitwiseAnd(n,I),t)),t=o.add(t,E),r("jsbi").equal(r("jsbi").bitwiseAnd(n,T),L)){if(r("jsbi").equal(t,k)&&r("jsbi").notEqual(n,R))throw new Error("result exceeded 64 bit limit");break}if(r("jsbi").greaterThan(t,S))throw new Error("result exceeded 64 bit limit")}return e},n.readString=function(){return o("Utf8ToString").Utf8ToString(this.readBinary())},n.getLastFieldId=function(){return this.$3},n.getLastField=function(){return this.$2},n.getBooleanFieldInfo=function(){return this.$4},n.getBooleanValue=function(){return this.$5},n.$9=function(t){return d[t]},n.$10=function(n){switch(n){case u.CT_STOP:return(e||(e=r("ThriftTypes"))).STOP;case u.CT_BOOLEAN_FALSE:case u.CT_BOOLEAN_TRUE:return(e||(e=r("ThriftTypes"))).BOOL;case u.CT_BYTE:return(e||(e=r("ThriftTypes"))).BYTE;case u.CT_I16:return(e||(e=r("ThriftTypes"))).I16;case u.CT_I32:return(e||(e=r("ThriftTypes"))).I32;case u.CT_I64:return(e||(e=r("ThriftTypes"))).I64;case u.CT_DOUBLE:return(e||(e=r("ThriftTypes"))).DOUBLE;case u.CT_FLOAT:return(e||(e=r("ThriftTypes"))).FLOAT;case u.CT_BINARY:return(e||(e=r("ThriftTypes"))).STRING;case u.CT_LIST:return(e||(e=r("ThriftTypes"))).LIST;case u.CT_SET:return(e||(e=r("ThriftTypes"))).SET;case u.CT_MAP:return(e||(e=r("ThriftTypes"))).MAP;case u.CT_STRUCT:return(e||(e=r("ThriftTypes"))).STRUCT;default:throw new Error("don't know what type")}},t})();l.default=x}),98);
__d("CompactSerializerPolyfill",["TCompactProtocolPolyfill","TNoOpWriteBuffer","TReadBuffer","TWriteBuffer"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=new(r("TReadBuffer"))(e),o=new(r("TCompactProtocolPolyfill"))(n);return t(o)}function s(t,n,r){try{return e(t,n)}catch(e){r!=null&&r(e)}return null}function u(e,t,n){n===void 0&&(n=!1);var o;if(n){var a=new(r("TNoOpWriteBuffer")),i=new(r("TCompactProtocolPolyfill"))(a);t(e,i),o=new(r("TWriteBuffer"))(a.currentSize())}else o=new(r("TWriteBuffer"));var l=new(r("TCompactProtocolPolyfill"))(o);return t(e,l),l.toByteArray()}function c(e,t,n,r){n===void 0&&(n=!1);try{return u(e,t,n)}catch(e){r!=null&&r(e)}return null}l.deserialize=e,l.deserializeNoThrow=s,l.serialize=u,l.serializeNoThrow=c}),98);
__d("ContextualConfigConstants",[],(function(t,n,r,o,a,i){"use strict";var e=1e3,l=", ",s={SAME:"same",NULL:"null",NNULL:"nnull",CATCH_ALL:"catch_all",EQ:"eq",NEQ:"neq",LT:"lt",LTE:"lte",GT:"gt",GTE:"gte",COR:"cor",CONTAINS:"contains",REGEX:"regex",IN:"in",NIN:"nin"},u={DENSE:"dense",MULTI_OUTPUT_RESOLVED:"multi-output-resolved",TABLE:"table"},c=[],d=[],m=[],p={BAD_BOOLEAN_FORMAT:"Bad boolean format",BAD_CONFIG:"Bad config",BAD_CONTEXT_IDENTIFIER:"Bad context identifier",BAD_CONTEXT_VALUE:"Bad context value",BAD_MONITORED_CONTEXTS:"Bad monitored contexts",BAD_NUMBER_FORMAT:"Bad number format",BAD_OUTPUT_NAME:"Bad output name",BAD_OUTPUT_TYPE:"Bad output type",BAD_VALUE_ORDER:"Bad values order",DUPLICATE_OUTPUT_NAME:"Duplicate output name",ILLEGAL_BOOLEAN_STRATEGY:"Illegal boolean strategy",ILLEGAL_BUCKET_VALUES:"Illegal bucket values",ILLEGAL_NUMERIC_STRATEGY:"Illegal numeric strategy",ILLEGAL_STRING_STRATEGY:"Illegal string strategy",INVALID_BOOLEAN:"Invalid boolean",INVALID_FLOAT:"Invalid float",INVALID_INTEGER:"Invalid integer",INVALID_STRING:"Invalid string",INVALID_VALUE_TYPE:"Invalid value type",MISMATCH_NUMBER_OF_VALUES:"Mismatching number of values",MISSING_BUCKETS:"Missing buckets",MISSING_BUCKET_MATCH:"Missing bucket match",MISSING_BUCKET_NAME:"Missing bucket name",MISSING_BUCKET_STRATEGY:"Missing bucket strategy",MISSING_CONTEXT_IN_CONFIG:"Missing context in config",MISSING_DEFAULT_VALUE:"Missing default value",MISSING_OUTPUTS_DEFINITION:"Missing outputs field definition",MISSING_RESULTS:"Missing results",MISSING_TABLE:"Missing table",MISSING_TABLE_ITEM_BUCKET:"Missing table item bucket",MISSING_TABLE_ITEM_VALUES:"Missing table item values",MISSING_VECTOR:"Missing vector",REGEX_SYNTAX_ERROR:"Regex syntax error",REQUESTED_PARAM_NOT_FOUND:"Requested param not found",RESULTS_VECTOR_SIZE_MISMATCH:"Results vector size mismatch",UNDECLARED_OUTPUT_PARAM:"Undeclared output param",UNKNOWN_BUCKET_DEFINITION:"Unknown bucket definition",UNKNOWN_CONFIG_TYPE:"Unknown config type",UNSUPPORTED_CONFIG_VERSION:"Unsupported config version"},_=10,f=", ",g={BOOL:"BOOL",FLOAT:"FLOAT",INT:"INT",STRING:"STRING"};i.ANALYTICS_SAMPLE_RATE=e,i.BUCKET_DELIMITER=l,i.CONTEXT_BUCKET_STRATEGY=s,i.CONFIG_TYPE=u,i.EMPTY_RESOLVED_CONTEXTS=c,i.EMPTY_RESOLVED_MONITORS=d,i.EMPTY_RESULT_PARAMS=m,i.ERROR=p,i.JSON_SUB_SAMPLE_RATE=_,i.LIST_DELIMITER=f,i.TYPE=g}),66);
__d("ContextualConfigResolvedContextsUtils",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){var e=[];for(var n of t){var r=n.bucketIndex;if(r==null)break;e.push(r)}return e},l=function(t){var e=[];for(var n of t){var r=n.bucketName;if(r===void 0)break;e.push(r)}return e},s=function(t){return t.name},u=function(t){return t.map(s)},c=function(t){var e=[];for(var n of t){var r=n.value;if(r===void 0)break;e.push(r)}return e};i.getBucketIndices=e,i.getBucketNames=l,i.getContextNames=u,i.getContextValues=c}),66);
__d("ContextualConfigCollateExposureData",["ContextualConfigConstants","ContextualConfigResolvedContextsUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=["cfg_ver_timestamp","policy_id","version","sample_rate"],s=function(t){return t.join(o("ContextualConfigConstants").LIST_DELIMITER)},u=function(n,r){for(var t of e)r[t]!=null&&(n[t]=r[t]);r.name&&(n.config_name=r.name)},c=function(t,n){var e=n[0],r=n[1],a=n[2],i=n[3];e!=null&&(t.exception=e.message),t.result=s(r.map(function(e){return e.value}))||"INVALID",t.context=s(o("ContextualConfigResolvedContextsUtils").getContextNames(a)),t.context_value=s(o("ContextualConfigResolvedContextsUtils").getContextValues(a)),t.bucket_name=s(o("ContextualConfigResolvedContextsUtils").getBucketNames(a)),t.monitor=s(o("ContextualConfigResolvedContextsUtils").getContextNames(i)),t.monitor_value=s(o("ContextualConfigResolvedContextsUtils").getContextValues(i))};function d(e,t,n){var r={sample_rate:o("ContextualConfigConstants").ANALYTICS_SAMPLE_RATE};return u(r,e),c(r,t),n&&(r.config_contents=JSON.stringify(e)),r}l.default=d}),98);
__d("ContextualConfigExposureEvent",["Random"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$2=e,this.$4=o("Random").random()<1/e.sample_rate,this.$3=t,this.$1=n}var t=e.prototype;return t.getData=function(){return this.$2},t.log=function(t){var e=this.$2,n=this.$3,r=this.$4;return t&&n(e),r&&this.$1(e),this},t.isSampled=function(){return this.$4},e})();l.default=e}),98);
__d("ContextualConfigExposureLoggerFactory",["ContextualConfigExposureEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){this.$2=e,this.$1=t}var t=e.prototype;return t.createEvent=function(t){var e=new(r("ContextualConfigExposureEvent"))(t,this.$2,this.$1);return e},e})();function s(t,n){return new e(t,n)}l.default=s}),98);
__d("ContextualConfigExposureLogger",["ContextualConfigExposureLoggerFactory","MarauderLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){},s=function(t){o("MarauderLogger").log("contextual_config_exposure","",t)},u=r("ContextualConfigExposureLoggerFactory")(e,s);l.default=u}),98);
__d("ContextualConfigAssert",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){if(e===!1)throw new Error(t)}i.default=e}),66);
__d("ContextualConfigValidators",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return Array.isArray(t)},s=function(t){return typeof t=="boolean"},u=function(t){return t!=null},c=function(t){return(function(e){return Object.prototype.hasOwnProperty.call(t,e)})},d=function(t){return p(t)&&t%1===0},m=function(t){return _(t)&&t.length>0},p=function(t){return typeof t=="number"&&!isNaN(t)&&t!==1/0&&t!==-1/0},_=function(t){return typeof t=="string"},f=function(t){switch(t){case o("ContextualConfigConstants").TYPE.BOOL:case o("ContextualConfigConstants").TYPE.FLOAT:case o("ContextualConfigConstants").TYPE.INT:case o("ContextualConfigConstants").TYPE.STRING:return!0;default:return!1}};l.isArray=e,l.isBoolean=s,l.isDefined=u,l.isKey=c,l.isInteger=d,l.isNonEmptyString=m,l.isNumber=p,l.isString=_,l.isType=f}),98);
__d("ContextualConfigParseBoolean",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e.toUpperCase()){case"TRUE":return!0;case"FALSE":return!1;default:throw new Error(o("ContextualConfigConstants").ERROR.BAD_BOOLEAN_FORMAT)}}l.default=e}),98);
__d("ContextualConfigParsePredBoolean",["ContextualConfigConstants","ContextualConfigParseBoolean"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n;switch(t){case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var a=r("ContextualConfigParseBoolean")(e);n=function(t){return t===a};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:n=function(t){return t==null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:n=function(t){return t!=null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:n=function(t){return!0};break;default:throw new Error(o("ContextualConfigConstants").ERROR.ILLEGAL_BOOLEAN_STRATEGY)}return function(e){return n(e)}}l.default=e}),98);
__d("ContextualConfigParseFloat",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=/^[-\+]?([1-9]\d*|0)(\.\d+)?$/,u=function(t){return s.test(t)};function c(t){(e||(e=r("ContextualConfigAssert")))(u(t),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);var n=parseFloat(t);return e(o("ContextualConfigValidators").isNumber(n),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT),n}l.default=c}),98);
__d("ContextualConfigParseInteger",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=/^[-\+]?([1-9]\d*|0)$/,u=function(t){return s.test(t)};function c(t){(e||(e=r("ContextualConfigAssert")))(u(t),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);var n=parseInt(t,10);return e(o("ContextualConfigValidators").isNumber(n),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT),n}l.default=c}),98);
__d("ContextualConfigPredAssertions",["ContextualConfigAssert","ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(n>0,o("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)},u=function(n,a){return(e||(e=r("ContextualConfigAssert")))(n===a,o("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)},c=function(n,a){return(e||(e=r("ContextualConfigAssert")))(n<a,o("ContextualConfigConstants").ERROR.BAD_VALUE_ORDER)};l.assertHasValues=s,l.assertNumberOfValues=u,l.assertValueOrder=c}),98);
__d("ContextualConfigParsePredNumeric",["ContextualConfigConstants","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigPredAssertions","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a,i){var l=a.map(i?r("ContextualConfigParseInteger"):e||(e=r("ContextualConfigParseFloat"))),s;switch(n){case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var u=i?r("ContextualConfigParseInteger")(t):(e||(e=r("ContextualConfigParseFloat")))(t);s=function(t){return i&&!o("ContextualConfigValidators").isInteger(t)?!1:t===u};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:s=function(t){return t==null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:s=function(t){return t!=null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:s=function(t){return!0};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.COR:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,2),o("ContextualConfigPredAssertions").assertValueOrder(l[0],l[1]),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t>=l[0]&&t<l[1]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LT:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t<l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LTE:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t<=l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.EQ:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t===l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NEQ:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t!==l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GT:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t>l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GTE:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t>=l[0]};break;default:throw new Error(o("ContextualConfigConstants").ERROR.ILLEGAL_NUMERIC_STRATEGY)}return function(e){return s(e)}}l.default=s}),98);
__d("ContextualConfigParseRegExp",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=/^\/(.+)\/(.*)$/;function s(t){try{var n=t.match(e);return n!=null?new RegExp(n[1],n[2]):new RegExp(t)}catch(e){throw new Error(o("ContextualConfigConstants").ERROR.REGEX_SYNTAX_ERROR)}}l.default=s}),98);
__d("ContextualConfigParsePredString",["ContextualConfigConstants","ContextualConfigParseRegExp","ContextualConfigPredAssertions"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){if(typeof t!="string")throw new Error(o("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE);return t},s=function(n){var t=[];for(var r of n)t.push(e(r));return t};function u(e,t,n){var a=s(n),i;switch(t){case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:i=function(n){return typeof n!="string"?!1:n===e};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:i=function(t){return t==null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:i=function(t){return t!=null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:i=function(t){return!0};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.IN:o("ContextualConfigPredAssertions").assertHasValues(a.length),i=function(t){return typeof t!="string"?!1:a.indexOf(t)!==-1};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NIN:o("ContextualConfigPredAssertions").assertHasValues(a.length),i=function(t){return typeof t!="string"?!1:a.indexOf(t)===-1};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CONTAINS:o("ContextualConfigPredAssertions").assertNumberOfValues(a.length,1),i=function(t){return typeof t!="string"?!1:t.indexOf(a[0])!==-1};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.REGEX:o("ContextualConfigPredAssertions").assertNumberOfValues(a.length,1);var l=r("ContextualConfigParseRegExp")(a[0]);i=function(t){return typeof t!="string"?!1:l.test(t)};break;default:throw new Error(o("ContextualConfigConstants").ERROR.ILLEGAL_STRING_STRATEGY)}return function(e){return i(e)}}l.default=u}),98);
__d("ContextualConfigParseContextBuckets",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParsePredBoolean","ContextualConfigParsePredNumeric","ContextualConfigParsePredString","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},c=o("ContextualConfigValidators").isKey(o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY),d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isString(n)&&c(n.toUpperCase()),o("ContextualConfigConstants").ERROR.MISSING_BUCKET_STRATEGY)},m=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.ILLEGAL_BUCKET_VALUES)},p=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.MISSING_BUCKET_NAME)},_=function(t,n){var e=n.name;p(e);var a=n.strategy;d(a);var i=n.values||[];switch(m(i),t){case o("ContextualConfigConstants").TYPE.BOOL:return r("ContextualConfigParsePredBoolean")(e,a);case o("ContextualConfigConstants").TYPE.FLOAT:return r("ContextualConfigParsePredNumeric")(e,a,i,!1);case o("ContextualConfigConstants").TYPE.INT:return r("ContextualConfigParsePredNumeric")(e,a,i,!0);case o("ContextualConfigConstants").TYPE.STRING:return r("ContextualConfigParsePredString")(e,a,i);default:throw new Error(o("ContextualConfigConstants").ERROR.UNKNOWN_BUCKET_DEFINITION)}},f=function(t,n){s(n);var e=n.name;return p(e),{name:e,pred:_(t,n)}};function g(e,t){return u(t),t.map(function(t){return f(e,t)})}l.default=g}),98);
__d("ContextualConfigParseContexts",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContextBuckets","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n)&&n.length>0,o("ContextualConfigConstants").ERROR.MISSING_CONTEXT_IN_CONFIG)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(t){s(t);var e=t.name,n=t.type,o=t.buckets;return c(e),d(n),{name:e,type:n,buckets:r("ContextualConfigParseContextBuckets")(n,o)}};function p(e){return u(e),e.map(m)}l.default=p}),98);
__d("ContextualConfigIsEqualParams",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n+=1){var r=e[n],o=t[n];if(r.name!==o.name||r.type!==o.type)return!1}return!0}i.default=e}),66);
__d("ContextualConfigParseResultParamValue",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseBoolean","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isString(n),o("ContextualConfigConstants").ERROR.INVALID_STRING)};function c(e,t){switch(u(t),e){case o("ContextualConfigConstants").TYPE.BOOL:return r("ContextualConfigParseBoolean")(t);case o("ContextualConfigConstants").TYPE.FLOAT:return(s||(s=r("ContextualConfigParseFloat")))(t);case o("ContextualConfigConstants").TYPE.INT:return r("ContextualConfigParseInteger")(t);case o("ContextualConfigConstants").TYPE.STRING:return t;default:throw new Error(o("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE)}}l.default=c}),98);
__d("ContextualConfigParseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_RESULTS)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},m=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},p=function(t,n){for(var e of t)if(e.name===n)return e.type;throw new Error(o("ContextualConfigConstants").ERROR.UNDECLARED_OUTPUT_PARAM)},_=function(t){return(function(e){c(e);var n=e.name;d(n);var o=p(t,n);m(o);var a=(s||(s=r("ContextualConfigParseResultParamValue")))(o,e.value);return{name:n,type:o,value:a}})};function f(e,t){return u(t),t.map(_(e))}l.default=f}),98);
__d("ContextualConfigParseDenseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n,a){return(e||(e=r("ContextualConfigAssert")))(r("ContextualConfigIsEqualParams")(n,a),o("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)};function u(e,t){var n=r("ContextualConfigParseResultParams")(e,t.map(function(t,n){return{name:e[n].name,value:t}}));return s(e,n),n}l.default=u}),98);
__d("ContextualConfigParseDenseDefaults",["ContextualConfigConstants","ContextualConfigParseDenseResultParams"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){try{return r("ContextualConfigParseDenseResultParams")(e,t)}catch(e){throw new Error(o("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)}}l.default=e}),98);
__d("ContextualConfigParseMonitors",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.BAD_MONITORED_CONTEXTS)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(t){s(t);var e=t.name,n=t.type;return c(e),d(n),{name:e,type:n}};function p(e){return u(e),e.map(m)}l.default=p}),98);
__d("ContextualConfigParseOutputParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_OUTPUTS_DEFINITION)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_OUTPUT_TYPE)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_OUTPUT_NAME)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(m(n),o("ContextualConfigConstants").ERROR.DUPLICATE_OUTPUT_NAME)},m=function(t){var e={};for(var n of t){if(e[n.name])return!1;e[n.name]=!0}return!0},p=function(t){return c(t.name),u(t.type),t};function _(e){s(e);var t=e.map(p);return d(t),t}l.default=_}),98);
__d("ContextualConfigParseVector",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_VECTOR)},c=function(n,a){return(e||(e=r("ContextualConfigAssert")))(n===a,o("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)},d=function(t,n){c(t.length,n.length);for(var e=0;e<t.length;e+=1){var o=t[e].type,a=n[e];(s||(s=r("ContextualConfigParseResultParamValue")))(o,a)}},m=function(t){return t.reduce(function(e,t){var n=t.buckets;return e*n.length},1)};function p(e,t,n){u(n);var r=m(t),o=e.length;c(r*o,n.length);for(var a=0;a<r;a+=1){var i=a*o;d(e,n.slice(i,i+o))}return n}l.default=p}),98);
__d("ContextualConfigResolveContexts",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n){for(var e=0;e<t.length;e+=1){var r=t[e];try{if(r.pred(n))return[r.name,e]}catch(e){return null}}return null};function s(t,n,r){var a=null,i=t.map(function(t){var i=t.name,l={name:i};if(a!=null)return l;var s;if(r[i]!=null?s=r[i]:n[i]!=null?s=n[i]():s=null,l.value=s,t.buckets!=null){var u=e(t.buckets,s);if(u==null)return a=new Error(o("ContextualConfigConstants").ERROR.MISSING_BUCKET_MATCH),l;var c=u[0],d=u[1];l.bucketName=c,l.bucketIndex=d}return l});return[a,i]}l.default=s}),98);
__d("DenseContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContexts","ContextualConfigParseDenseDefaults","ContextualConfigParseDenseResultParams","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseVector","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},u=function(t){for(var e=[],n=1,r=t.length-1;r>=0;r-=1)e.push(n),n*=t[r].buckets.length;return e.reverse()},c=function(t,n,o,a){try{var e=n.slice(o,o+t.length);return[null,r("ContextualConfigParseDenseResultParams")(t,e)]}catch(e){return[r("getErrorSafe")(e),a]}},d=function(n,o,a){try{var t=a.reduce(function(t,o,a){return(e||(e=r("ContextualConfigAssert")))(a<n.length,"Auxillery index out of range."),t+n[a]*o},0);return[null,t*o]}catch(e){return[r("getErrorSafe")(e),-1]}},m=(function(){function e(e,t){s(e),this.globalContextProviders=babelHelpers.extends({},t);var n=r("ContextualConfigParseOutputParams")(e.outputs),o=r("ContextualConfigParseContexts")(e.contexts);this.aux=u(o),this.contexts=o,this.defaults=r("ContextualConfigParseDenseDefaults")(n,e.vectorDefaults),this.monitors=e.monitors!=null?r("ContextualConfigParseMonitors")(e.monitors):[],this.outputs=n,this.vector=r("ContextualConfigParseVector")(n,o,e.vector)}var t=e.prototype;return t.resolve=function(t){try{return this.unsafeResolve(t)}catch(e){return[r("getErrorSafe")(e),this.defaults,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}},t.unsafeResolve=function(t){var e=this.aux,n=this.globalContextProviders,a=this.contexts,i=this.defaults,l=this.monitors,s=this.outputs,u=this.vector,m=r("ContextualConfigResolveContexts")(a,n,t),p=m[0],_=m[1];if(p!=null)return[p,i,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];var f=d(e,s.length,o("ContextualConfigResolvedContextsUtils").getBucketIndices(_)),g=f[0],h=f[1];if(g!=null)return[g,i,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];var y=c(s,u,h,i),C=y[0],b=y[1];if(C!=null)return[C,b,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];var v=r("ContextualConfigResolveContexts")(l,n,t),S=v[0],R=v[1];return S!=null?[S,b,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,b,_,R]},e})();l.default=m}),98);
__d("MultiOutputResolvedContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseResultParams","ContextualConfigResolveContexts","ContextualConfigValidators","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},u=(function(){function e(e,t){s(e),this.globalContextProviders=babelHelpers.extends({},t);var n=r("ContextualConfigParseOutputParams")(e.outputs);this.monitors=e.monitors!=null?r("ContextualConfigParseMonitors")(e.monitors):[],this.values=r("ContextualConfigParseResultParams")(n,e.values)}var t=e.prototype;return t.resolve=function(t){try{return this.unsafeResolve(t)}catch(e){return[r("getErrorSafe")(e),this.values,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}},t.unsafeResolve=function(t){var e=this.globalContextProviders,n=this.monitors,a=this.values,i=r("ContextualConfigResolveContexts")(n,e,t),l=i[0],s=i[1];return l!=null?[l,a,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,a,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,s]},e})();l.default=u}),98);
__d("ContextualConfigMergePartialResultParams",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n={};for(var r of t)n[r.name]=r;var o=[];for(var a of e){var i=n[a.name];o.push(i!=null&&i.name===a.name&&i.type===a.type?i:a)}return o}i.default=e}),66);
__d("ContextualConfigParseDefaults",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n,a){return(e||(e=r("ContextualConfigAssert")))(r("ContextualConfigIsEqualParams")(n,a),o("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)};function u(e,t){var n=r("ContextualConfigParseResultParams")(e,t);return s(e,n),n}l.default=u}),98);
__d("ContextualConfigParseTable",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParams","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_BUCKET)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_VALUES)},m=function(t,n){u(n);var e=n.bucket,o=n.values;return c(e),d(o),{bucket:e,values:r("ContextualConfigParseResultParams")(t,o)}};function p(e,t){return s(t),t.reduce(function(t,n){var r=m(e,n);return t[r.bucket]=r.values,t},{})}l.default=p}),98);
__d("TableContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigMergePartialResultParams","ContextualConfigParseContexts","ContextualConfigParseDefaults","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseTable","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[],u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},c=(function(){function e(e,t){u(e),this.globalContextProviders=babelHelpers.extends({},t);var n=r("ContextualConfigParseOutputParams")(e.outputs);this.contexts=r("ContextualConfigParseContexts")(e.contexts),this.defaults=r("ContextualConfigParseDefaults")(n,e.defaults),this.monitors=e.monitors!=null?r("ContextualConfigParseMonitors")(e.monitors):[],this.table=r("ContextualConfigParseTable")(n,e.table)}var t=e.prototype;return t.resolve=function(t){try{return this.unsafeResolve(t)}catch(e){return[e,this.defaults,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}},t.unsafeResolve=function(t){var e=this.globalContextProviders,n=this.contexts,a=this.defaults,i=this.monitors,l=this.table,u=r("ContextualConfigResolveContexts")(n,e,t),c=u[0],d=u[1];if(c!=null)return[c,a,d,[]];var m=o("ContextualConfigResolvedContextsUtils").getBucketNames(d).join(o("ContextualConfigConstants").BUCKET_DELIMITER),p=l[m]||s,_=r("ContextualConfigMergePartialResultParams")(a,p),f=r("ContextualConfigResolveContexts")(i,e,t),g=f[0],h=f[1];return g!=null?[g,_,d,[]]:[null,_,d,h]},e})();l.default=c}),98);
__d("ContextualConfigParseConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators","DenseContextualConfig","MultiOutputResolvedContextualConfig","TableContextualConfig"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[1],u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n)&&o("ContextualConfigValidators").isDefined(n.version),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(s.indexOf(n)!==-1,o("ContextualConfigConstants").ERROR.UNSUPPORTED_CONFIG_VERSION)};function d(e,t){switch(u(e),c(e.version),e.cctype){case o("ContextualConfigConstants").CONFIG_TYPE.DENSE:return new(r("DenseContextualConfig"))(e,t);case o("ContextualConfigConstants").CONFIG_TYPE.MULTI_OUTPUT_RESOLVED:return new(r("MultiOutputResolvedContextualConfig"))(e,t);case o("ContextualConfigConstants").CONFIG_TYPE.TABLE:return new(r("TableContextualConfig"))(e,t);default:throw new Error(o("ContextualConfigConstants").ERROR.UNKNOWN_CONFIG_TYPE)}}l.default=d}),98);
__d("ContextualConfigWarn",[],(function(t,n,r,o,a,i){"use strict";function e(e){}i.default=e}),66);
__d("ContextualConfigResult",["ContextualConfigConstants","ContextualConfigWarn","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e.reduce(function(e,t){var n=t.name,r=t.value;return e[n]=r,e},{}),this.$2=e}var t=e.prototype;return t.get=function(t,n){try{var e=this.$1[t];return typeof e!=typeof n?(r("ContextualConfigWarn")(o("ContextualConfigConstants").ERROR.REQUESTED_PARAM_NOT_FOUND),n):e}catch(e){return r("ContextualConfigWarn")(r("getErrorSafe")(e).message),n}},t.getParams=function(){return this.$2},e})();l.default=e}),98);
__d("ErrorContextualConfig",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.error=e}var t=e.prototype;return t.resolve=function(t){return[this.error,o("ContextualConfigConstants").EMPTY_RESULT_PARAMS,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]},e})();l.default=e}),98);
__d("ContextualConfig",["ContextualConfigCollateExposureData","ContextualConfigConstants","ContextualConfigExposureLogger","ContextualConfigParseConfig","ContextualConfigResult","ErrorContextualConfig","Random","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=1/o("ContextualConfigConstants").JSON_SUB_SAMPLE_RATE,s=1,u=(function(){function t(e,t){t===void 0&&(t={}),this.isDebugLoggingEnabled=!1,this.$3=!1,this.$4=e,this.$2=t}var n=t.prototype;return n.$5=function(){if(this.$1)return this.$1;var e=this.$2,t=this.$4,n;try{n=r("ContextualConfigParseConfig")(t,e)}catch(e){n=new(r("ErrorContextualConfig"))(r("getErrorSafe")(e))}return this.$1=n,n},n.$6=function(n){var t=this.isDebugLoggingEnabled,a=this.$3,i=!a&&o("Random").random()<e;i&&(this.$3=!0);var l=r("ContextualConfigCollateExposureData")(this.$4,n,i),s=r("ContextualConfigExposureLogger").createEvent(l);s.log(t)},n.resolve=function(t){t===void 0&&(t={});var e=this.$1||this.$5(),n=e.resolve(t);return this.$6(n),new(r("ContextualConfigResult"))(n[s])},t})();l.default=u}),98);
__d("DGWRequestStreamUtils",["Base64","WebDriverConfig","cr:3024","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,o,a){var i={};for(var l of Object.entries(e)){var s=l[0],u=l[1];typeof u=="string"?i["XRSS-"+s]=u:typeof u=="number"?i["XRSN-"+s]=u.toString():typeof u=="boolean"?i["XRSB-"+s]=u.toString():typeof u=="object"&&u!=null&&(i["XRSO-"+s]=r("Base64").encode(JSON.stringify(u)))}if(t&&(i["xrs-body"]="true"),o!=null&&o.length>0&&(i["xrs-instrumentation"]=r("Base64").encode(o)),i["XRS-Accept-Ack"]="RSAck",a!=null&&a.ackTimeoutSec!=null&&(i["XRS-SRAck-Timeout"]=a.ackTimeoutSec.toString()),i["XRSS-http_referer"]=window.location.href,r("WebDriverConfig").isTestRunning&&r("gkx")("20919")){var c=n("cr:3024")==null?void 0:n("cr:3024").get();c!=null&&(i["XRSB-is_test"]="true",i["XRSS-original_request_id"]=c)}return i}function s(e){return Object.keys(e).reduce(function(t,n){return(typeof e[n]=="string"||typeof e[n]=="boolean"||typeof e[n]=="number"||typeof e[n]=="object")&&(t[n]=e[n]),t},{})}function u(e){if(e.response&&e.response.instrumentation_data!=null&&e.response.instrumentation_data.length>0)try{var t,n=JSON.parse(new TextDecoder("utf-8").decode(e.response.instrumentation_data));return{auxId:n.auxId,dfTraceId:(t=n.dataFlowTracingData)==null?void 0:t.traceId}}catch(e){}return null}function c(e,t){var n=e.headers,r=e.body;if(t.kill_body===!0&&(r=null),t.new_body!=null&&(r=t.new_body),t.new_headers!=null)try{n=s(JSON.parse(t.new_headers))}catch(e){}if(t.patch_headers!=null)try{n=babelHelpers.extends({},n,s(JSON.parse(t.patch_headers)))}catch(e){}return{headers:n,body:r}}l.convertHeaders=e,l.cleanHeaders=s,l.getInstrumentationDataFieldsFromPayload=u,l.transformContextWithRewriteDelta=c}),98);
__d("DGWStreamHandler",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t,n,r,o){this.$2=e,this.$3=t,this.$4=n,this.$5=r,this.$6=o,this.$1=!0}var t=e.prototype;return t.onClose=function(t){this.$1&&this.$2(t)},t.onDataReceived=function(t){this.$1&&this.$3(t)},t.onError=function(t){this.$1&&this.$4(t)},t.onStreamMustDrain=function(t,n){this.$1&&this.$5(t,n)},t.onServerHasFinishedSendingData=function(t){this.$1&&this.$6(t)},t.stop=function(){this.$1=!1},t.isStopped=function(){return!this.$1},e})();i.default=e}),66);
__d("InflightAmends",["Deferred","err"],(function(t,n,r,o,a,i,l){"use strict";var e="inflight_amends_timeout",s="inflight_amends_duplicate_id",u=(function(){function t(e,t,n){this.$1=e,this.$3=t,this.$4=n,this.$2=new Map}var n=t.prototype;return n.add=function(n){var t=this;if(this.$2.has(n))throw r("err")(s);var o=new(r("Deferred")),a=Date.now(),i=setTimeout(function(){t.$2.has(n)&&t.reject(n,r("err")(e))},this.$1);return this.$2.set(n,{id:n,deferred:o,createdTimestampMs:a,timeoutId:i}),o.getPromise()},n.getPromise=function(t){var e;return(e=this.$5(t))==null?void 0:e.deferred.getPromise()},n.resolve=function(t,n){var e=this.$5(t);e&&(e.deferred.resolve==null||e.deferred.resolve(n),this.$3(e.id,Date.now()-e.createdTimestampMs),this.$6(e))},n.reject=function(t,n){var e=this.$5(t);e&&(e.deferred.reject==null||e.deferred.reject(n),this.$4(e.id,n),this.$6(e))},n.rejectAll=function(t){for(var e of this.$2.entries()){var n=e[0],r=e[1];this.reject(n,t)}},n.getSize=function(){return this.$2.size},n.getAllPromises=function(){var e=[];for(var t of this.$2.values())e.push(t.deferred.getPromise());return e},n.$6=function(t){clearTimeout(t.timeoutId),this.$2.delete(t.id)},n.$5=function(t){return this.$2.get(t)},t})();l.default=u}),98);
__d("RequestStreamCloseReason",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["UserIntention","StartStreamFailure","StreamError","RemoteTermination","ServerDataEnd","ServerDrain","ReestablishError","ClientError"]);i.RequestStreamCloseReason=e}),66);
__d("RequestStreamCommonRequestStreamCommonSerializers",["RequestStreamCommonRequestStreamCommonTypes","ThriftTypes","jsbi"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{}}function u(){return{expected_existing_headers:"",patch_headers_if_match:""}}function c(){return{bytes:Uint8Array.of()}}function d(){return{message:""}}function m(){return{reason:o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)}}function p(){return{}}function _(){return{stream_id:"0",last_sequencer:0,amendment_count:0,last_status:o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)}}function f(){return{caller_timestamp_ms:"0"}}function g(){return{original_ping_timestamp_ms:"0"}}function h(){return{}}function y(t,n){n.writeStructBegin("ResponseRewriteRequest"),t.new_headers!=null&&(n.writeFieldBegin({fname:"new_headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.new_headers),n.writeFieldEnd()),t.new_body!=null&&(n.writeFieldBegin({fname:"new_body",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeBinary(t.new_body),n.writeFieldEnd()),t.patch_headers!=null&&(n.writeFieldBegin({fname:"patch_headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.patch_headers),n.writeFieldEnd()),t.kill_body!=null&&(n.writeFieldBegin({fname:"kill_body",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:4}),n.writeBool(t.kill_body),n.writeFieldEnd()),t.temporary!=null&&(n.writeFieldBegin({fname:"temporary",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:5}),n.writeBool(t.temporary),n.writeFieldEnd()),t.conditional_patch_headers!=null&&(n.writeFieldBegin({fname:"conditional_patch_headers",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),C(t.conditional_patch_headers,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function C(t,n){if(n.writeStructBegin("ResponseRewriteConditionalPatchHeaders"),n.writeFieldBegin({fname:"expected_existing_headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.expected_existing_headers!=null)n.writeString(t.expected_existing_headers);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"patch_headers_if_match",ftype:e.STRING,fid:2}),t.patch_headers_if_match!=null)n.writeString(t.patch_headers_if_match);else{var a="";n.writeString(a)}n.writeFieldEnd(),t.patch_headers_otherwise!=null&&(n.writeFieldBegin({fname:"patch_headers_otherwise",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.patch_headers_otherwise),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function b(t,n){if(n.writeStructBegin("ResponseData"),n.writeFieldBegin({fname:"bytes",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.bytes!=null)n.writeBinary(t.bytes);else{var o=Uint8Array.of();n.writeBinary(o)}n.writeFieldEnd(),t.metadata!=null&&(n.writeFieldBegin({fname:"metadata",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.metadata),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function v(t,n){if(n.writeStructBegin("LogMessage"),n.writeFieldBegin({fname:"message",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.message!=null)n.writeString(t.message);else{var o="";n.writeString(o)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function S(t,n){if(n.writeStructBegin("Termination"),n.writeFieldBegin({fname:"reason",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.reason!=null){var a;n.writeI32((a=t.reason)!=null?a:0)}else{var i=o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),t.message!=null&&(n.writeFieldBegin({fname:"message",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.message),n.writeFieldEnd()),t.retry_delay_ms!=null&&(n.writeFieldBegin({fname:"retry_delay_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:3}),n.writeI64(r("jsbi").BigInt(t.retry_delay_ms)),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function R(t,n){n.writeStructBegin("AmendStreamAck"),t.amendment_id!=null&&(n.writeFieldBegin({fname:"amendment_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.amendment_id)),n.writeFieldEnd()),t.accepted!=null&&(n.writeFieldBegin({fname:"accepted",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:2}),n.writeBool(t.accepted),n.writeFieldEnd()),t.result!=null&&(n.writeFieldBegin({fname:"result",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeBinary(t.result),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function L(t,n){if(n.writeStructBegin("StreamCheck"),n.writeFieldBegin({fname:"stream_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.stream_id!=null)n.writeI64(r("jsbi").BigInt(t.stream_id));else{var a="0";n.writeI64(r("jsbi").BigInt(a))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"last_sequencer",ftype:e.I32,fid:2}),t.last_sequencer!=null)n.writeI32(t.last_sequencer);else{var i=0;n.writeI32(i)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"amendment_count",ftype:e.I32,fid:4}),t.amendment_count!=null)n.writeI32(t.amendment_count);else{var l=0;n.writeI32(l)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"last_status",ftype:e.I32,fid:3}),t.last_status!=null){var s;n.writeI32((s=t.last_status)!=null?s:0)}else{var u=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0);n.writeI32(u!=null?u:0)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function E(t,n){if(n.writeStructBegin("Ping"),n.writeFieldBegin({fname:"caller_timestamp_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.caller_timestamp_ms!=null)n.writeI64(r("jsbi").BigInt(t.caller_timestamp_ms));else{var o="0";n.writeI64(r("jsbi").BigInt(o))}if(n.writeFieldEnd(),t.streams_to_check!=null){n.writeFieldBegin({fname:"streams_to_check",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.STRUCT,size:t.streams_to_check.length});for(var a of t.streams_to_check)L(a,n);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function k(t,n){if(n.writeStructBegin("Pong"),n.writeFieldBegin({fname:"original_ping_timestamp_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.original_ping_timestamp_ms!=null)n.writeI64(r("jsbi").BigInt(t.original_ping_timestamp_ms));else{var o="0";n.writeI64(r("jsbi").BigInt(o))}if(n.writeFieldEnd(),t.stream_ids_missing!=null){n.writeFieldBegin({fname:"stream_ids_missing",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.I64,size:t.stream_ids_missing.length});for(var a of t.stream_ids_missing)n.writeI64(r("jsbi").BigInt(a));n.writeListEnd(),n.writeFieldEnd()}if(t.stream_ids_behind!=null){n.writeFieldBegin({fname:"stream_ids_behind",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:3}),n.writeListBegin({etype:e.I64,size:t.stream_ids_behind.length});for(var i of t.stream_ids_behind)n.writeI64(r("jsbi").BigInt(i));n.writeListEnd(),n.writeFieldEnd()}if(t.stream_ids_with_lost_amendments!=null){n.writeFieldBegin({fname:"stream_ids_with_lost_amendments",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:4}),n.writeListBegin({etype:e.I64,size:t.stream_ids_with_lost_amendments.length});for(var l of t.stream_ids_with_lost_amendments)n.writeI64(r("jsbi").BigInt(l));n.writeListEnd(),n.writeFieldEnd()}if(t.stream_ids_with_wrong_status!=null){n.writeFieldBegin({fname:"stream_ids_with_wrong_status",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:5}),n.writeListBegin({etype:e.I64,size:t.stream_ids_with_wrong_status.length});for(var s of t.stream_ids_with_wrong_status)n.writeI64(r("jsbi").BigInt(s));n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function I(t,n){if(n.writeStructBegin("StreamResponseDelta"),t.flow_status!=null){var o;n.writeFieldBegin({fname:"flow_status",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),n.writeI32((o=t.flow_status)!=null?o:0),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.log!=null){n.writeFieldBegin({fname:"log",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),v(t.log,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.rewrite!=null){n.writeFieldBegin({fname:"rewrite",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),y(t.rewrite,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.data!=null){n.writeFieldBegin({fname:"data",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),b(t.data,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.termination!=null){n.writeFieldBegin({fname:"termination",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),S(t.termination,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.amend_ack!=null){n.writeFieldBegin({fname:"amend_ack",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),R(t.amend_ack,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}n.writeFieldStop(),n.writeStructEnd()}function T(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.new_headers=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.new_body=t.readBinary():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.patch_headers=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).BOOL?n.kill_body=t.readBool():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).BOOL?n.temporary=t.readBool():t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).STRUCT?n.conditional_patch_headers=D(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function D(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.expected_existing_headers=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.patch_headers_if_match=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.patch_headers_otherwise=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.expected_existing_headers===void 0&&(n.expected_existing_headers=""),n.patch_headers_if_match===void 0&&(n.patch_headers_if_match=""),n}function x(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.bytes=t.readBinary():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.metadata=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.bytes===void 0&&(n.bytes=Uint8Array.of()),n}function $(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.message=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.message===void 0&&(n.message=""),n}function P(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.reason=o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.message=t.readString():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I64?n.retry_delay_ms=t.readI64().toString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.reason===void 0&&(n.reason=o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)),n}function N(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.amendment_id=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).BOOL?n.accepted=t.readBool():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.result=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function M(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.stream_id=t.readI64().toString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.last_sequencer=t.readI32():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).I32?n.amendment_count=t.readI32():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.last_status=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.stream_id===void 0&&(n.stream_id="0"),n.last_sequencer===void 0&&(n.last_sequencer=0),n.amendment_count===void 0&&(n.amendment_count=0),n.last_status===void 0&&(n.last_status=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)),n}function w(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.caller_timestamp_ms=t.readI64().toString():t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.streams_to_check=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=M(t);n.streams_to_check.push(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.caller_timestamp_ms===void 0&&(n.caller_timestamp_ms="0"),n}function A(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.original_ping_timestamp_ms=t.readI64().toString():t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_missing=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=t.readI64().toString();n.stream_ids_missing.push(u)}}else t.skip(a);break;case 3:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_behind=[];for(var c=t.readListBegin(),d=0;d<c.size;d++){var m=t.readI64().toString();n.stream_ids_behind.push(m)}}else t.skip(a);break;case 4:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_with_lost_amendments=[];for(var p=t.readListBegin(),_=0;_<p.size;_++){var f=t.readI64().toString();n.stream_ids_with_lost_amendments.push(f)}}else t.skip(a);break;case 5:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_with_wrong_status=[];for(var g=t.readListBegin(),h=0;h<g.size;h++){var y=t.readI64().toString();n.stream_ids_with_wrong_status.push(y)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.original_ping_timestamp_ms===void 0&&(n.original_ping_timestamp_ms="0"),n}function F(t){var n,a={};for(t.readStructBegin();;){var i=t.readFieldBegin(),l=i.ftype,s=i.fid;if(l===(e||(e=r("ThriftTypes"))).STOP)break;switch(s){case 1:if(l===(e||(e=r("ThriftTypes"))).I32)if(n==null)a.flow_status=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(t.readI32()),n="flow_status";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: flow_status, previous deserialized field: "+n);else t.skip(l);break;case 2:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.log=$(t),n="log";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: log, previous deserialized field: "+n);else t.skip(l);break;case 3:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.rewrite=T(t),n="rewrite";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: rewrite, previous deserialized field: "+n);else t.skip(l);break;case 4:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.data=x(t),n="data";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: data, previous deserialized field: "+n);else t.skip(l);break;case 5:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.termination=P(t),n="termination";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: termination, previous deserialized field: "+n);else t.skip(l);break;case 6:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.amend_ack=N(t),n="amend_ack";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: amend_ack, previous deserialized field: "+n);else t.skip(l);break;default:t.skip(l)}t.readFieldEnd()}return t.readStructEnd(),a}l.ResponseRewriteRequest$DefaultConstructor=s,l.ResponseRewriteConditionalPatchHeaders$DefaultConstructor=u,l.ResponseData$DefaultConstructor=c,l.LogMessage$DefaultConstructor=d,l.Termination$DefaultConstructor=m,l.AmendStreamAck$DefaultConstructor=p,l.StreamCheck$DefaultConstructor=_,l.Ping$DefaultConstructor=f,l.Pong$DefaultConstructor=g,l.StreamResponseDelta$DefaultConstructor=h,l.serializeResponseRewriteRequest=y,l.serializeResponseRewriteConditionalPatchHeaders=C,l.serializeResponseData=b,l.serializeLogMessage=v,l.serializeTermination=S,l.serializeAmendStreamAck=R,l.serializeStreamCheck=L,l.serializePing=E,l.serializePong=k,l.serializeStreamResponseDelta=I,l.deserializeResponseRewriteRequest=T,l.deserializeResponseRewriteConditionalPatchHeaders=D,l.deserializeResponseData=x,l.deserializeLogMessage=$,l.deserializeTermination=P,l.deserializeAmendStreamAck=N,l.deserializeStreamCheck=M,l.deserializePing=w,l.deserializePong=A,l.deserializeStreamResponseDelta=F}),98);
__d("RequestStreamSingleChannelSingleChannelRequestStreamTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Ignored:100,Success:200,Queued:250,UnknownStream:400,HandledUnknownResult:450,Failure:500}),l=n("$InternalEnum")({Request_headers:"request_headers",Request_body:"request_body",Amend:"amend",Ack:"ack",Response:"response",Ping:"ping",Pong:"pong"});a.exports={Ack:e,Payload$Types:l}}),null);
__d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers",["RequestStreamCommonRequestStreamCommonSerializers","RequestStreamCommonRequestStreamCommonTypes","RequestStreamSingleChannelSingleChannelRequestStreamTypes","ThriftTypes","jsbi"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{}}function u(){return{body:Uint8Array.of()}}function c(){return{amendment:Uint8Array.of()}}function d(){return{ack:o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)}}function m(){return{delta:[]}}function p(){return{}}function _(t,n){n.writeStructBegin("RequestStreamHeaders"),t.headers!=null&&(n.writeFieldBegin({fname:"headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeBinary(t.headers),n.writeFieldEnd()),t.instrumentation_data!=null&&(n.writeFieldBegin({fname:"instrumentation_data",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeBinary(t.instrumentation_data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function f(t,n){if(n.writeStructBegin("RequestStreamBody"),n.writeFieldBegin({fname:"body",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.body!=null)n.writeBinary(t.body);else{var o=Uint8Array.of();n.writeBinary(o)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function g(t,n){if(n.writeStructBegin("AmendStream"),t.amendment_id!=null&&(n.writeFieldBegin({fname:"amendment_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.amendment_id)),n.writeFieldEnd()),n.writeFieldBegin({fname:"amendment",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),t.amendment!=null)n.writeBinary(t.amendment);else{var o=Uint8Array.of();n.writeBinary(o)}n.writeFieldEnd(),t.is_query!=null&&(n.writeFieldBegin({fname:"is_query",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:3}),n.writeBool(t.is_query),n.writeFieldEnd()),t.instrumentation_data!=null&&(n.writeFieldBegin({fname:"instrumentation_data",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeBinary(t.instrumentation_data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function h(t,n){if(n.writeStructBegin("StreamResponseAck"),t.response_id!=null&&(n.writeFieldBegin({fname:"response_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.response_id)),n.writeFieldEnd()),n.writeFieldBegin({fname:"ack",ftype:(e||(e=r("ThriftTypes"))).I32,fid:2}),t.ack!=null){var a;n.writeI32((a=t.ack)!=null?a:0)}else{var i=o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),t.query_result!=null&&(n.writeFieldBegin({fname:"query_result",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeBinary(t.query_result),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function y(t,n){if(n.writeStructBegin("StreamResponse"),t.response_id!=null&&(n.writeFieldBegin({fname:"response_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.response_id)),n.writeFieldEnd()),n.writeFieldBegin({fname:"delta",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),t.delta!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:t.delta.length});for(var a of t.delta)o("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(a,n);n.writeListEnd()}else{var i=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:i.length});for(var l of i)o("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(l,n);n.writeListEnd()}if(n.writeFieldEnd(),t.ack_level!=null){var s;n.writeFieldBegin({fname:"ack_level",ftype:(e||(e=r("ThriftTypes"))).I32,fid:3}),n.writeI32((s=t.ack_level)!=null?s:0),n.writeFieldEnd()}t.query_request!=null&&(n.writeFieldBegin({fname:"query_request",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeBinary(t.query_request),n.writeFieldEnd()),t.instrumentation_data!=null&&(n.writeFieldBegin({fname:"instrumentation_data",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeBinary(t.instrumentation_data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function C(t,n){if(n.writeStructBegin("Payload"),t.request_headers!=null){n.writeFieldBegin({fname:"request_headers",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),_(t.request_headers,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.request_body!=null){n.writeFieldBegin({fname:"request_body",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),f(t.request_body,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.amend!=null){n.writeFieldBegin({fname:"amend",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),g(t.amend,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.ack!=null){n.writeFieldBegin({fname:"ack",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),h(t.ack,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.response!=null){n.writeFieldBegin({fname:"response",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),y(t.response,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.ping!=null){n.writeFieldBegin({fname:"ping",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),o("RequestStreamCommonRequestStreamCommonSerializers").serializePing(t.ping,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.pong!=null){n.writeFieldBegin({fname:"pong",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:7}),o("RequestStreamCommonRequestStreamCommonSerializers").serializePong(t.pong,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}n.writeFieldStop(),n.writeStructEnd()}function b(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.headers=t.readBinary():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.instrumentation_data=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function v(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.body=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.body===void 0&&(n.body=Uint8Array.of()),n}function S(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.amendment_id=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.amendment=t.readBinary():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).BOOL?n.is_query=t.readBool():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.instrumentation_data=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.amendment===void 0&&(n.amendment=Uint8Array.of()),n}function R(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.response_id=t.readI64().toString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.ack=o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(t.readI32()):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.query_result=t.readBinary():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.ack===void 0&&(n.ack=o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)),n}function L(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.response_id=t.readI64().toString():t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).LIST){n.delta=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=o("RequestStreamCommonRequestStreamCommonSerializers").deserializeStreamResponseDelta(t);n.delta.push(c)}}else t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.ack_level=o("RequestStreamCommonRequestStreamCommonTypes").AckLevel.cast(t.readI32()):t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRING?n.query_request=t.readBinary():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRING?n.instrumentation_data=t.readBinary():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.delta===void 0&&(n.delta=[]),n}function E(t){var n,a={};for(t.readStructBegin();;){var i=t.readFieldBegin(),l=i.ftype,s=i.fid;if(l===(e||(e=r("ThriftTypes"))).STOP)break;switch(s){case 1:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.request_headers=b(t),n="request_headers";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_headers, previous deserialized field: "+n);else t.skip(l);break;case 2:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.request_body=v(t),n="request_body";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_body, previous deserialized field: "+n);else t.skip(l);break;case 3:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.amend=S(t),n="amend";else throw new Error("more than one field have been deserialized in union type: Payload; current field: amend, previous deserialized field: "+n);else t.skip(l);break;case 4:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.ack=R(t),n="ack";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ack, previous deserialized field: "+n);else t.skip(l);break;case 5:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.response=L(t),n="response";else throw new Error("more than one field have been deserialized in union type: Payload; current field: response, previous deserialized field: "+n);else t.skip(l);break;case 6:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.ping=o("RequestStreamCommonRequestStreamCommonSerializers").deserializePing(t),n="ping";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ping, previous deserialized field: "+n);else t.skip(l);break;case 7:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.pong=o("RequestStreamCommonRequestStreamCommonSerializers").deserializePong(t),n="pong";else throw new Error("more than one field have been deserialized in union type: Payload; current field: pong, previous deserialized field: "+n);else t.skip(l);break;default:t.skip(l)}t.readFieldEnd()}return t.readStructEnd(),a}l.RequestStreamHeaders$DefaultConstructor=s,l.RequestStreamBody$DefaultConstructor=u,l.AmendStream$DefaultConstructor=c,l.StreamResponseAck$DefaultConstructor=d,l.StreamResponse$DefaultConstructor=m,l.Payload$DefaultConstructor=p,l.serializeRequestStreamHeaders=_,l.serializeRequestStreamBody=f,l.serializeAmendStream=g,l.serializeStreamResponseAck=h,l.serializeStreamResponse=y,l.serializePayload=C,l.deserializeRequestStreamHeaders=b,l.deserializeRequestStreamBody=v,l.deserializeAmendStream=S,l.deserializeStreamResponseAck=R,l.deserializeStreamResponse=L,l.deserializePayload=E}),98);
__d("RequestStreamState",["RequestStreamCommonRequestStreamCommonTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(t){case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:return e.seenAccepted||e.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?e:{flowStatus:o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted,seenAccepted:!0};default:return!e.seenAccepted||e.flowStatus===t?e:{flowStatus:t,seenAccepted:!0}}}l.getNextState=e}),98);
__d("StreamRetryState",[],(function(t,n,r,o,a,i){"use strict";var e=1e3,l=120*1e3,s=(function(){function t(){this.$1=0}var n=t.prototype;return n.resetErrorAndRetryCount=function(){this.$1=0},n.onRetry=function(){this.$1+=1},n.getRetryCount=function(){return this.$1},n.getBackoffDelayMs=function(){if(this.$1<=1)return 0;if(this.$1===2)return e*Math.random();var t=e*Math.pow(2,this.$1-3),n=t*Math.random(),r=t+n;return Math.min(r,l)},t})();i.default=s}),66);
__d("DGWRequestStreamRef",["CompactSerializerPolyfill","DGWRequestStreamUtils","DGWStream","DGWStreamHandler","InflightAmends","ODS","RequestStreamCloseReason","RequestStreamCommonRequestStreamCommonTypes","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamSingleChannelSingleChannelRequestStreamSerializers","RequestStreamSingleChannelSingleChannelRequestStreamTypes","RequestStreamState","RequestStreamTransport","RtiWebRequestStreamClient","StreamRetryState","err","gkx","justknobx","qex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=4,d=0,m=1e3,p=2,_=r("gkx")("20915")?3e4:5e3,f="dgw_stream_send_ack_failure",g=(e=r("qex")._("2097"))!=null?e:!1,h=(s=r("qex")._("2100"))!=null?s:!1;function y(e){if(!e){var t=r("err")(f);throw t.stack,t}}function C(e,t){if(e==null||e.length===0)return null;var n=JSON.parse(e);return n.auxId=t,new TextEncoder().encode(JSON.stringify(n))}function b(e){var t={},n=e.delta;return n.forEach(function(e){if(e.flow_status)switch(t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Flow_status,e.flow_status){case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:t.flow_status="Accepted";break;case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started:t.flow_status="Started";break;case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped:t.flow_status="Stopped";break}else e.log?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Log:e.rewrite?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Rewrite:e.data?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Data:e.termination?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Termination:e.amend_ack&&(t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Amend_ack)}),t}var v=(function(){function e(e,t,n,a,i,l){var s=this,u,d,m;this.$6=null,this.$7={},this.$10=!1,this.$15=new(r("StreamRetryState")),this.$16=0,this.$17=0,this.$18=0,this.$21=0;var p=null;typeof t=="string"?p=new TextEncoder().encode(t):typeof t=="object"&&(p=t),this.$1={headers:e,body:p},this.$3=n,this.$4=a,this.$12=c,this.$9=!1,this.$14=!1,this.$20=l;var g=a==null?void 0:a.serviceId;i!=null&&(this.$22()||(i.dgwStreamGroupLoggingId=this.$20.getStreamGroupLoggingId(g)),i.dgwCountPriorStreamsInGroup=this.$20.guessStreamGroupPriorStreamCount(g),i.transport="WEB_RS_STARGATE"),this.$5=o("RequestStreamE2ESampling").validateInstrumentationData(e,i,a==null?void 0:a.requestLogContext,a==null?void 0:a.upsampleMultiplier),this.$22()?this.$7.disableFalcoLogging=!0:this.$6=o("RequestStreamE2ELogger").createStreamLogger(e,this.$5,o("RequestStreamTransport").RequestStreamTransport.WEB_RS_STARGATE),(a==null?void 0:a.deviceId)!=null&&(this.$7.deviceId=a.deviceId),this.$6&&(this.$7.loggingId=this.$6.getRequestId()),a&&a.overrideUrl!=null&&(this.$7.overrideUrl=a.overrideUrl),g!=null&&(this.$7.serviceId=g),this.$8={flowStatus:o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped,seenAccepted:!1},this.$19=new(r("InflightAmends"))(_,function(e,t){var n;(n=s.$6)==null||n.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,r("RequestStreamE2EClientLoggerEvent").RECEIVED,babelHelpers.extends({},s.$23(),{latency:t.toString()}),e)},function(e,t){if(t.message!==f){var n;(n=s.$6)==null||n.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,r("RequestStreamE2EClientLoggerEvent").FAILURE,babelHelpers.extends({},s.$23(),{reason:t.message}),e)}}),(u=this.$6)==null||u.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:(d=t==null||(m=t.length)==null?void 0:m.toString())!=null?d:"0"},"0","0")}var t=e.prototype;return t.getInstrumentationData=function(){return this.$5},t.getE2EClientLogger=function(){return this.$6},t.amendWithAck=function(t){var e=this.$24(t,!0);return e==null?Promise.resolve(!1):this.$19.getPromise(e)||Promise.resolve(!1)},t.amendWithoutAck=function(t){this.$24(t,!1)},t.cancel=function(){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").CANCEL,r("RequestStreamE2EClientLoggerEvent").RECEIVED),this.$9=!0,this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)},t.start=function(t){var e=this;t===void 0&&(t=!1);var n=String(this.$16++),a=Date.now();return this.$26(n).then(function(){var t;e.$14=!1,e.$21=0;var o=(Date.now()-a).toString();(t=e.$6)==null||t.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:o},n,String(e.$18))}).catch(function(a){if(a.stack,!(a.message===f&&e.$10))if(e.$14=!1,a!==o("DGWStream").StreamError.ESTABLISHMENT_ERROR){var i,l=a.message;if(a===o("DGWStream").StreamError.UNAUTHENTICATED?l="UNAUTHENTICATED":a===o("DGWStream").StreamError.UNAUTHORIZED&&(l="UNAUTHORIZED"),(i=e.$6)==null||i.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:l},n,String(e.$18)),e.$25(t?o("RequestStreamCloseReason").RequestStreamCloseReason.ReestablishError:o("RequestStreamCloseReason").RequestStreamCloseReason.StartStreamFailure,l,!0),a===o("DGWStream").StreamError.UNAUTHENTICATED||a===o("DGWStream").StreamError.UNAUTHORIZED)return;throw a}else{var s,u;(s=e.$6)==null||s.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:(u=a.message)!=null?u:a},n,String(e.$18)),e.$15.onRetry();var c=r("gkx")("20916")?e.$15.getBackoffDelayMs():m*Math.pow(p,e.$21);return new Promise(function(e){return window.setTimeout(e,c)}).then(function(){return e.$21++,e.$18++,e.start()})}})},t.getFlowStatus=function(){return this.$8.flowStatus},t.shouldTerminateOrRetry=function(t,n,a,i){var e=this;if(!this.$14){var l=n;if(this.$12||(l="cannot retry for error: "+n+" because of hit max retry limitation"),t!==o("RequestStreamCloseReason").RequestStreamCloseReason.ClientError){var s;(s=this.$6)==null||s.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:l},null,String(this.$18))}var u=a&&(r("gkx")("20916")||this.$12);if(this.$25(t,l,!u),u){var c=r("gkx")("20916")?Math.max(i!=null?i:0,this.$15.getBackoffDelayMs()):i!=null?i:d;return this.$14=!0,new Promise(function(e){return window.setTimeout(e,c)}).then(function(){return e.$27()}).catch(function(e){})}}},t.$28=function(){return this.$11!=null},t.$24=function(t,n){var e,a=this,i=typeof t=="string"?new TextEncoder().encode(t):t,l=String(this.$17++);(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{},l);var s=C(this.$5,l),u={amend:{amendment:i,instrumentation_data:s}};n&&u.amend&&(u.amend.amendment_id=l);var c=o("CompactSerializerPolyfill").serialize(u,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload),d=Date.now();if(this.$29()&&this.$11!=null){var m,p,_;return n&&this.$19.add(l),this.$11.send(c).then(function(e){var t;y(e);var n=(Date.now()-d).toString();(t=a.$6)==null||t.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:n},l)}).catch(function(e){var t;(t=a.$6)==null||t.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:e.message},l),a.$19.reject(l,e)}),(m=this.$6)==null||m.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").SENT,{data_size:(p=t==null||(_=t.length)==null?void 0:_.toString())!=null?p:"0"},l),l}else{var f;(f=this.$6)==null||f.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},l)}},t.$26=async function(t){var e=this;if(this.$9)throw new Error("stream_already_canceled");var n,a=this.$2||this.$1;try{var i=this.$30();this.$13=i;var l=a.headers.graphiql_sandbox,s=babelHelpers.extends({},a.headers,this.$31());l!=null&&(s=babelHelpers.extends({},s,{www_sandbox:l,distillery_sandbox:l+":8086"}));var u=o("DGWRequestStreamUtils").convertHeaders(s,a.body!=null,this.$5);this.$11=await this.$20.establishStream(u,i,this.$7)}catch(e){if(e===o("DGWStream").StreamError.ESTABLISHMENT_ERROR||o("DGWStream").StreamError.isValid(e)&&!o("DGWStream").isRetryableError(e))throw e;if(o("DGWStream").StreamError.isValid(e)&&o("DGWStream").isRetryableError(e)){this.$32(e);return}throw e}if(this.$9){this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0);return}var d=new Uint8Array([]);if(a.body!=null){var m={request_body:{body:a.body}};d=o("CompactSerializerPolyfill").serialize(m,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload)}if(!this.$11)throw new Error("dgwstream_is_null");var p=this.$11.send(d).then(function(t){y(t),e.$9&&e.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)});return(n=this.$6)==null||n.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").SENT,{},t,String(this.$18)),this.$12=c,p},t.$29=function(){return this.$8.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started||this.$8.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted},t.$25=function(t,n,r){var e;this.$11&&t!==o("RequestStreamCloseReason").RequestStreamCloseReason.StreamError&&t!==o("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination&&this.$11.close(),(e=this.$13)==null||e.stop(),this.$11=null,this.$10=!0,this.$33(o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped)&&this.$3.onFlowStatus(o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped),r&&!this.$9&&this.$3.onTermination("terminate stream because "+t+" with msg : "+n)},t.$33=function(t){var e=this.$8;return this.$8=o("RequestStreamState").getNextState(e,t),e!==this.$8},t.$27=function(){return this.$12--,this.$18++,this.$15.onRetry(),this.start(!0)},t.$34=function(t){var e=this,n=o("CompactSerializerPolyfill").deserialize(t,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").deserializePayload);if(n.response){var a,i,l=o("DGWRequestStreamUtils").getInstrumentationDataFieldsFromPayload(n),s=l==null?void 0:l.auxId,c=l==null?void 0:l.dfTraceId;if(!this.$28()){var d;(d=this.$6)==null||d.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"response_received_after_close"},s,String(this.$18),c);return}var m;(a=this.$6)==null||a.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").RECEIVED,b(n.response),s,String(this.$18),c,m);var p=n.response.delta;p.forEach(function(t){if(t.data)e.$15.resetErrorAndRetryCount(),r("justknobx")._("4109")?e.$3.onData(new TextDecoder("utf-8").decode(t.data.bytes)):e.$8.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?e.$3.onData(new TextDecoder("utf-8").decode(t.data.bytes)):(u||(u=o("ODS"))).bumpEntityKey(110,"RequestStream","data_before_started_"+(e.$22()?"falco":"graphql"));else if(t.flow_status){var n=t.flow_status;n===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started&&e.$15.resetErrorAndRetryCount(),e.$33(n)&&e.$3.onFlowStatus(n)}else if(t.termination){var a,i=(a=t.termination.message)!=null?a:"unknown termination msg";e.$2=null,e.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,i,t.termination.reason===o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.TryAgain,t.termination.retry_delay_ms!=null?parseInt(t.termination.retry_delay_ms,10):null)}else if(t.log)e.$3.onLog(t.log.message);else if(t.amend_ack){var l=t.amend_ack.amendment_id;if(l!=null){var s=t.amend_ack.accepted||!1;e.$19.resolve(l,s)}}else if(t.rewrite){var c=o("DGWRequestStreamUtils").transformContextWithRewriteDelta(e.$1,t.rewrite);t.rewrite.temporary===!0?e.$2=c:e.$1=c}}),(i=this.$6)==null||i.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").SENT,b(n.response),s,String(this.$18),c),n.response.ack_level===o("RequestStreamCommonRequestStreamCommonTypes").AckLevel.Device&&n.response.response_id!=null&&this.$35(n.response.response_id,s)}else{var _;(_=this.$6)==null||_.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"unexpected_payload_type"},null,String(this.$18))}},t.$35=function(t,n){var e={ack:{response_id:t,ack:o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.Success}},a=o("CompactSerializerPolyfill").serialize(e,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);if(this.$11!=null){var i;this.$11.send(a),(i=this.$6)==null||i.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,r("RequestStreamE2EClientLoggerEvent").SENT,{},n,String(this.$18))}else{var l;(l=this.$6)==null||l.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},n,String(this.$18))}},t.$22=function(){return this.$1.headers.method==="Falco"},t.$30=function(){var e=this;return new(r("DGWStreamHandler"))(function(t){return e.$36(t)},function(t){return e.$37(t)},function(t){return e.$32(t)},function(t,n){return e.$38(t,n)},function(t){return e.$39(t)})},t.$39=function(t){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Has FinishedSendingData"},null,String(this.$18)),this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.ServerDataEnd,"Client receive OnServerHasFinishedSendingData and Server will not send more data",!0)},t.$36=function(t){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Close Connection"},null,String(this.$18)),this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,"Client receive OnClose and Server will not send more data",!0)},t.$37=function(t){try{this.$34(t)}catch(t){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:t.message},null,String(this.$18)),this.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.ClientError,t.message,!1)}},t.$32=function(t){var e="",n=o("DGWStream").isRetryableError(t);e="StreamError: Received "+t;var r=g?this.$12>0:n,a=h?m*p:void 0;this.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.StreamError,e,r,a)},t.$38=function(t,n){this.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.ServerDrain,n,!0)},t.$31=function(){return r("RtiWebRequestStreamClient").overrideHeaders},t.$23=function(){var e={};return r("gkx")("20918")&&(e.pending_amendments_size=this.$19.getSize().toString()),e},e})();l.default=v}),98);
__d("DGWStreamFactory",["DGWClient","DGWStreamGroupHandler","Promise","gkx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s="realtime",u=1e4,c=null,d=(function(){function t(){this.$1={}}t.get=function(){return c==null&&(c=new t),c};var o=t.prototype;return o.$2=function(t){var e;this.$1=(e={},e[t]={dgwStreamGroup:null,multiStreamGroupLoggingId:null,multiStreamGroupPriorStreamCountGuess:0},e)},o.getStreamGroupLoggingId=function(t){var e;return t===void 0&&(t=null),(e=this.$1[t!=null?t:s])==null?void 0:e.multiStreamGroupLoggingId},o.guessStreamGroupPriorStreamCount=function(t){var e;return t===void 0&&(t=null),((e=this.$1[t!=null?t:s])==null?void 0:e.multiStreamGroupPriorStreamCountGuess)||0},o.establishStream=function(o,a,i){var t,l=this,c=i.serviceId==null?s:i.serviceId,d=(t=this.$1[c])==null?void 0:t.dgwStreamGroup;if(d==null||!d.canCreateGroupedStream()){var m={deviceId:i.deviceId,serviceId:c,disableFalcoLogging:i.disableFalcoLogging,streamGroupAppHeaders:{"stream-group":"group1"},authToken:i.authToken,authType:i.authType};i.overrideUrl!=null&&(m.overrideUrl=i.overrideUrl),m.keepAliveMs=u,r("gkx")("20920")&&(m.loggingId=r("uuidv4")());try{d=r("DGWClient")().createStreamGroup(new(r("DGWStreamGroupHandler"))(function(){l.$2(c)},function(){l.$2(c)},function(){l.$2(c)}),m),this.$1[c]={dgwStreamGroup:d,multiStreamGroupLoggingId:m.loggingId,multiStreamGroupPriorStreamCountGuess:0}}catch(t){return(e||(e=n("Promise"))).reject(t)}}return this.$1[c].multiStreamGroupPriorStreamCountGuess++,d.establishStream({loggingId:i.loggingId,disableFalcoLogging:i.disableFalcoLogging,groupedStreamHeaders:o},a)},t})();l.default=d}),98);
__d("DGWRequestStreamClient",["DGWRequestStreamRef","DGWStreamFactory","Promise","cr:2046346","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){this.$1=e!=null?e:r("DGWStreamFactory").get()}var o=t.prototype;return o.createStream=function(o,a,i,l,s){n("cr:2046346")!=null&&n("cr:2046346").startPulsarTest();var t=i;return(e||(e=n("Promise"))).resolve(new(r("DGWRequestStreamRef"))(o,a,l,s,t,this.$1))},t})();l.default=s}),98);/*FB_PKG_DELIM*/
__d("BizInboxUnifiedThreadsQuery.graphql",["relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"before"},t={defaultValue:[],kind:"LocalArgument",name:"businessAssets"},n={defaultValue:!1,kind:"LocalArgument",name:"getShouldUnifyConfigQueries"},r={defaultValue:480,kind:"LocalArgument",name:"height"},o={defaultValue:null,kind:"LocalArgument",name:"ig_params"},a={defaultValue:!0,kind:"LocalArgument",name:"includeDeliveryReceipts"},i={defaultValue:!1,kind:"LocalArgument",name:"includeSeqID"},l={defaultValue:!1,kind:"LocalArgument",name:"isDependencyOfRemovePageDependencyEnabledTool"},s={defaultValue:!1,kind:"LocalArgument",name:"isWorkUser"},u={defaultValue:!1,kind:"LocalArgument",name:"is_work_teamwork_not_putting_muted_in_unreads"},c={defaultValue:null,kind:"LocalArgument",name:"item_after"},d={defaultValue:null,kind:"LocalArgument",name:"item_limit"},m={defaultValue:!1,kind:"LocalArgument",name:"loadThreadItems"},p={defaultValue:!0,kind:"LocalArgument",name:"loadThreads"},_={defaultValue:!1,kind:"LocalArgument",name:"load_delivery_receipts"},f={defaultValue:!0,kind:"LocalArgument",name:"load_items"},g={defaultValue:!0,kind:"LocalArgument",name:"load_messages"},h={defaultValue:!0,kind:"LocalArgument",name:"load_read_receipts"},y={defaultValue:null,kind:"LocalArgument",name:"message_limit"},C={defaultValue:null,kind:"LocalArgument",name:"msgr_params"},b={defaultValue:null,kind:"LocalArgument",name:"msgr_pending_params"},v={defaultValue:null,kind:"LocalArgument",name:"page_id"},S={defaultValue:null,kind:"LocalArgument",name:"selected_item_id"},R={defaultValue:!1,kind:"LocalArgument",name:"shouldSkipMessage"},L={defaultValue:!1,kind:"LocalArgument",name:"shouldSkipPageQuery"},E={defaultValue:!1,kind:"LocalArgument",name:"shouldUnifyContextCardQueries"},k={defaultValue:null,kind:"LocalArgument",name:"source"},I={defaultValue:!1,kind:"LocalArgument",name:"threadlistViewFieldsOnly"},T={defaultValue:null,kind:"LocalArgument",name:"wa_params"},D={defaultValue:null,kind:"LocalArgument",name:"wa_pending_params"},x={defaultValue:480,kind:"LocalArgument",name:"width"},$={alias:"unused",args:[{kind:"Variable",name:"string",variableName:"source"}],kind:"ScalarField",name:"xfb_returns_zero_make_parameter_used",storageKey:null},P=[{kind:"Variable",name:"ig_params",variableName:"ig_params"},{kind:"Variable",name:"msgr_params",variableName:"msgr_params"},{kind:"Variable",name:"selected_item_id",variableName:"selected_item_id"},{kind:"Variable",name:"wa_params",variableName:"wa_params"}],N={alias:null,args:null,kind:"ScalarField",name:"sync_sequence_id",storageKey:null},M={condition:"includeSeqID",kind:"Condition",passingValue:!0,selections:[N]},w={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"thread_fbid",storageKey:null},F={alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"thread_key",plural:!1,selections:[A,{alias:null,args:null,kind:"ScalarField",name:"other_user_id",storageKey:null}],storageKey:null},O={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},B=[{kind:"Literal",name:"last",value:1}],W={alias:null,args:null,kind:"ScalarField",name:"snippet",storageKey:null},q=[w],U={alias:null,args:null,kind:"ScalarField",name:"timestamp_precise",storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"commerce_message_type",storageKey:null},H={alias:null,args:null,kind:"ScalarField",name:"legacy_attachment_id",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},z=[G],j={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"description",plural:!1,selections:z,storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},X={alias:null,args:null,kind:"ScalarField",name:"action_url",storageKey:null},Y={alias:null,args:null,kind:"ScalarField",name:"native_url",storageKey:null},J=[K,Q,X,Y,{alias:null,args:null,kind:"ScalarField",name:"target_id",storageKey:null}],Z={alias:null,args:null,concreteType:"MessengerGenericXMATemplateExtraFields",kind:"LinkedField",name:"messenger_generic_xma_template_extra_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"media_owner_profile_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"media_owner_profile_pic_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"favicon_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"favicon_url_fallback",storageKey:null},{alias:null,args:null,concreteType:"MessengerGenericXMATemplateCTA",kind:"LinkedField",name:"default_cta",plural:!1,selections:J,storageKey:null},{alias:null,args:null,concreteType:"MessengerGenericXMATemplateCTA",kind:"LinkedField",name:"cta1",plural:!1,selections:J,storageKey:null},{alias:null,args:null,concreteType:"MessengerGenericXMATemplateCTA",kind:"LinkedField",name:"cta2",plural:!1,selections:J,storageKey:null},{alias:null,args:null,concreteType:"MessengerGenericXMATemplateCTA",kind:"LinkedField",name:"cta3",plural:!1,selections:J,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"list_item_id_1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"list_item_contact_url_list_1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"list_item_contact_url_expiration_timestamp_list_1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"list_item_contact_url_fallback_list_1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"list_item_title_text_1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"list_item_accessibility_text_1",storageKey:null}],storageKey:null},ee={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},te=[{kind:"Literal",name:"height",value:240},{kind:"Literal",name:"width",value:240}],ne={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},re=[ne],oe=[{kind:"Literal",name:"height",value:120},{kind:"Literal",name:"width",value:120}],ae={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},ie={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},le={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},se=[w,{alias:null,args:null,concreteType:"StickerPack",kind:"LinkedField",name:"pack",plural:!1,selections:q,storageKey:null},ee,{alias:null,args:null,kind:"ScalarField",name:"frame_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"frame_rate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"frames_per_row",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"frames_per_column",storageKey:null},{alias:"sprite_image_2x",args:te,concreteType:"Image",kind:"LinkedField",name:"sprite_image",plural:!1,selections:re,storageKey:"sprite_image(height:240,width:240)"},{alias:null,args:oe,concreteType:"Image",kind:"LinkedField",name:"sprite_image",plural:!1,selections:re,storageKey:"sprite_image(height:120,width:120)"},{alias:null,args:oe,concreteType:"Image",kind:"LinkedField",name:"padded_sprite_image",plural:!1,selections:re,storageKey:"padded_sprite_image(height:120,width:120)"},{alias:"padded_sprite_image_2x",args:te,concreteType:"Image",kind:"LinkedField",name:"padded_sprite_image",plural:!1,selections:re,storageKey:"padded_sprite_image(height:240,width:240)"},ae,ie,le],ue={kind:"InlineFragment",selections:se,type:"Sticker",abstractKey:null},ce=[ne,ie,le],de={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"animated_image",plural:!1,selections:ce,storageKey:null},me={kind:"Literal",name:"sizing",value:"contain-fit"},pe=[me],_e={alias:null,args:pe,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:ce,storageKey:'image(sizing:"contain-fit")'},fe={alias:null,args:null,kind:"ScalarField",name:"playable_duration_in_ms",storageKey:null},ge={alias:null,args:null,kind:"ScalarField",name:"is_playable",storageKey:null},he={alias:null,args:null,kind:"ScalarField",name:"playable_url",storageKey:null},ye={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[ue,de,_e,fe,ge,he],storageKey:null},Ce={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"source",plural:!1,selections:z,storageKey:null},be={alias:null,args:null,kind:"ScalarField",name:"style_list",storageKey:null},ve={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title_with_entities",plural:!1,selections:z,storageKey:null},Se={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},Re={alias:null,args:null,concreteType:"AttachmentProperty",kind:"LinkedField",name:"properties",plural:!0,selections:[Se,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"value",plural:!1,selections:z,storageKey:null}],storageKey:null},Le={alias:"url",args:null,kind:"ScalarField",name:"messenger_dot_com_url",storageKey:null},Ee={alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null},ke={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_links",plural:!0,selections:[Q,ae],storageKey:null},Ie={alias:null,args:null,concreteType:"MessagingAttribution",kind:"LinkedField",name:"messaging_attribution",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attribution_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attribution_id",storageKey:null},O,{alias:null,args:null,kind:"ScalarField",name:"icon_url",storageKey:null}],storageKey:null},Te={alias:"action_link",args:null,kind:"ScalarField",name:"action_url",storageKey:null},De={alias:null,args:null,kind:"ScalarField",name:"action_open_type",storageKey:null},xe={alias:null,args:null,kind:"ScalarField",name:"preview_title",storageKey:null},$e={alias:null,args:null,kind:"ScalarField",name:"preview_subtitle",storageKey:null},Pe={alias:null,args:null,kind:"ScalarField",name:"target_display",storageKey:null},Ne={alias:null,args:null,kind:"ScalarField",name:"image_url",storageKey:null},Me={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_objects",plural:!0,selections:[{kind:"InlineFragment",selections:[w,xe,$e,Pe,Ne],type:"MessengerPlatformEntPreview",abstractKey:"__isMessengerPlatformEntPreview"}],storageKey:null},we={alias:"title",args:null,kind:"ScalarField",name:"action_title",storageKey:null},Ae={alias:null,args:null,concreteType:"MessengerCTAUserConfirmation",kind:"LinkedField",name:"user_confirmation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"cancel_button_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"continue_button_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"confirmation_message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"confirmation_title",storageKey:null}],storageKey:null},Fe={alias:null,args:null,kind:"ScalarField",name:"is_disabled",storageKey:null},Oe={alias:null,args:null,kind:"ScalarField",name:"is_mutable_by_server",storageKey:null},Be={alias:null,args:null,kind:"ScalarField",name:"logging_token",storageKey:null},We={alias:"render_style",args:null,kind:"ScalarField",name:"cta_render_style",storageKey:null},qe={alias:null,args:null,concreteType:"MessengerPlatformWebviewMetadata",kind:"LinkedField",name:"webview_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fallback_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"messenger_extensions",storageKey:null},{alias:"webview_height_ratio",args:null,kind:"ScalarField",name:"height_ratio",storageKey:null},{alias:"webview_share_button",args:null,kind:"ScalarField",name:"hide_share_button",storageKey:null}],storageKey:null},Ue={alias:null,args:null,kind:"ScalarField",name:"page_id",storageKey:null},Ve={alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null},He={alias:null,args:null,kind:"ScalarField",name:"subtitle",storageKey:null},Ge={alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},ze={alias:null,args:null,kind:"ScalarField",name:"format",storageKey:null},je={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"form_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"form_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"form_num_screens",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"form_current_screen_index",storageKey:null},{alias:null,args:null,concreteType:"MessengerPIIFormScreenObject",kind:"LinkedField",name:"form_first_screen",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"screen_title",storageKey:null},{alias:null,args:null,concreteType:"MessengerPIIQuestionObject",kind:"LinkedField",name:"questions",plural:!0,selections:[w,K,Q,Ve,He,Ge,ze,{alias:null,args:null,kind:"ScalarField",name:"mask",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MessengerPIIBusinessPrivacyObject",kind:"LinkedField",name:"business_privacy",plural:!1,selections:[G,ae],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"form_color_theme",storageKey:null}],type:"MessengerDirectSendCallToActionData",abstractKey:null},Ke={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"feedback_form_current_screen_index",storageKey:null},{alias:null,args:null,concreteType:"MessengerFeedbackFormScreenObject",kind:"LinkedField",name:"feedback_form_first_screen",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerFeedbackQuestionObject",kind:"LinkedField",name:"feedback_questions",plural:!0,selections:[w,Q,K,{alias:null,args:null,kind:"ScalarField",name:"score_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"left_score_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"right_score_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score_option",storageKey:null},{alias:null,args:null,concreteType:"MessengerFeedBackQuestionFollowup",kind:"LinkedField",name:"follow_up",plural:!1,selections:[K,Ve],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"feedback_form_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"feedback_form_num_screens",storageKey:null},{alias:null,args:null,concreteType:"MessengerFeedbackBusinessPrivacyObject",kind:"LinkedField",name:"feedback_form_privacy_policy",plural:!1,selections:[G,ee,ae],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"feedback_form_state",storageKey:null}],type:"MessengerFeedbackFormOpenCallToActionData",abstractKey:null},Qe={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"cta_data",plural:!1,selections:[je,Ke],storageKey:null},Xe={alias:null,args:null,kind:"ScalarField",name:"is_high_confidence",storageKey:null},Ye={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"messenger_call_to_actions",plural:!0,selections:[Te,De,Me,we,Ae,w,Fe,Oe,Be,We,qe,Ue,Qe,Xe,Y],storageKey:null},Je={alias:null,args:null,concreteType:"XMALayoutInfo",kind:"LinkedField",name:"xma_layout_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout_type",storageKey:null}],storageKey:null},Ze={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},et={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"listing_type",storageKey:null},{alias:null,args:null,concreteType:"CrisisListingCategoryWrapper",kind:"LinkedField",name:"listing_category",plural:!1,selections:[{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"offer_image",plural:!1,selections:re,storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"request_image",plural:!1,selections:re,storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Literal",name:"height",value:315},{kind:"Literal",name:"width",value:851}],concreteType:"Image",kind:"LinkedField",name:"map_image",plural:!1,selections:re,storageKey:"map_image(height:315,width:851)"}],type:"CrisisListing",abstractKey:null},tt={alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},nt={alias:null,args:null,kind:"ScalarField",name:"url_shimhash",storageKey:null},rt={alias:null,args:null,kind:"ScalarField",name:"extension",storageKey:null},ot={alias:null,args:null,kind:"ScalarField",name:"filesize",storageKey:null},at={alias:null,args:null,kind:"ScalarField",name:"duration",storageKey:null},it={alias:"transfer_id",args:null,kind:"ScalarField",name:"id",storageKey:null},lt={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:re,storageKey:null},st=[w,{alias:"name",args:null,kind:"ScalarField",name:"short_name",storageKey:null},{alias:"full_name",args:null,kind:"ScalarField",name:"name",storageKey:null},lt,ae],ut={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sender",plural:!1,selections:st,storageKey:null},ct={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"receiver",plural:!1,selections:st,storageKey:null},dt={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},mt={alias:"actionDatas",args:null,concreteType:"PaymentActivityActionData",kind:"LinkedField",name:"action_datas",plural:!0,selections:[Ze,{alias:"additionalInfo",args:null,concreteType:"PaymentActivityActionDataAdditionalInfo",kind:"LinkedField",name:"additional_info",plural:!0,selections:[Se,dt],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"identifier",storageKey:null},{alias:"inputType",args:null,kind:"ScalarField",name:"input_type",storageKey:null},Ge,{alias:null,args:null,kind:"ScalarField",name:"optional",storageKey:null},{alias:"placeholderText",args:null,kind:"ScalarField",name:"placeholder_text",storageKey:null}],storageKey:null},pt={alias:"actionIdentifier",args:null,kind:"ScalarField",name:"action_identifier",storageKey:null},_t={alias:null,args:null,kind:"ScalarField",name:"style",storageKey:null},ft={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:z,storageKey:null},gt={kind:"InlineFragment",selections:[{alias:"receiptView",args:null,concreteType:"PaymentReceiptView",kind:"LinkedField",name:"receipt_view",plural:!1,selections:[{alias:"additionalInstruction",args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"additional_instruction",plural:!1,selections:z,storageKey:null},w,{alias:"otherParticipant",args:null,concreteType:"PaymentActivityParticipantView",kind:"LinkedField",name:"other_participant",plural:!1,selections:[{alias:"imageUrl",args:null,kind:"ScalarField",name:"image_url",storageKey:null},He,Q],storageKey:null},{alias:null,args:null,concreteType:"PaymentActivityViewSection",kind:"LinkedField",name:"sections",plural:!0,selections:[{alias:"preferredPosition",args:null,kind:"ScalarField",name:"preferred_position",storageKey:null}],storageKey:null},ft],storageKey:null}],type:"P2POpenReceiptActionButton",abstractKey:null},ht={alias:null,args:null,kind:"ScalarField",name:"amount",storageKey:null},yt={alias:null,args:null,kind:"ScalarField",name:"currency",storageKey:null},Ct=[ht,yt,{alias:"formattedAmount",args:null,kind:"ScalarField",name:"formatted_amount",storageKey:null}],bt={alias:"amount",args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"currency_amount",plural:!1,selections:Ct,storageKey:null},vt=[Ze,mt,pt,_t,Q,gt,{kind:"InlineFragment",selections:[{alias:"moneyTransfer",args:null,concreteType:null,kind:"LinkedField",name:"generic_money_transfer",plural:!1,selections:[it,ut,ct,bt],storageKey:null}],type:"P2PPaymentActionButtonWithTransfer",abstractKey:null}],St={alias:"componentType",args:null,kind:"ScalarField",name:"component_type",storageKey:null},Rt={alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},Lt={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"amount",plural:!1,selections:Ct,storageKey:null},Rt],type:"P2PBubbleAmountComponent",abstractKey:null},Et=[{alias:"dimensionlessCacheKey",args:null,kind:"ScalarField",name:"dimensionless_cache_key",storageKey:null},ie,{alias:"isSilhouette",args:null,kind:"ScalarField",name:"is_silhouette",storageKey:null},{alias:"mimeType",args:null,kind:"ScalarField",name:"mime_type",storageKey:null},O,{alias:null,args:null,kind:"ScalarField",name:"scale",storageKey:null},ne,le],kt={kind:"InlineFragment",selections:[{alias:"aspectRatio",args:null,kind:"ScalarField",name:"aspect_ratio",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:Et,storageKey:null}],type:"P2PBubbleImageComponent",abstractKey:null},It={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"alignment",storageKey:null},Rt,{alias:"facepileUsers",args:null,concreteType:"User",kind:"LinkedField",name:"facepile_users",plural:!0,selections:[w,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:Et,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"images",plural:!0,selections:Et,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null},G],type:"P2PBubbleTextComponent",abstractKey:null},Tt={alias:"iconCurrencyCode",args:null,kind:"ScalarField",name:"icon_currency_code",storageKey:null},Dt={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"P2PBubbleView",kind:"LinkedField",name:"bubble_view",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actions",plural:!0,selections:vt,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"components",plural:!0,selections:[St,Lt,kt,It],storageKey:null},{alias:null,args:null,concreteType:"P2PBubbleRobotext",kind:"LinkedField",name:"robotext",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action",plural:!1,selections:vt,storageKey:null},Rt,Tt,G],storageKey:null},{alias:"rootAction",args:null,concreteType:null,kind:"LinkedField",name:"root_action",plural:!1,selections:vt,storageKey:null}],storageKey:null}],type:"PaymentViewData",abstractKey:"__isPaymentViewData"},xt={alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null},$t={kind:"InlineFragment",selections:[xt,ae],type:"User",abstractKey:null},Pt={alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"transaction_amount",plural:!1,selections:[ht,{alias:null,args:null,kind:"ScalarField",name:"formatted_amount",storageKey:null}],storageKey:null},Nt={alias:null,args:null,kind:"ScalarField",name:"transfer_status",storageKey:null},Mt={alias:"completedTime",args:null,kind:"ScalarField",name:"completed_time",storageKey:null},wt={alias:"updatedTime",args:null,kind:"ScalarField",name:"updated_time",storageKey:null},At={alias:"creationTime",args:null,kind:"ScalarField",name:"creation_time",storageKey:null},Ft={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:re,storageKey:null},Ot=[Ft],Bt={alias:null,args:null,concreteType:"MessengerPayTheme",kind:"LinkedField",name:"transfer_theme",plural:!1,selections:q,storageKey:null},Wt={alias:null,args:null,kind:"ScalarField",name:"formatted",storageKey:null},qt=[Wt],Ut={alias:null,args:null,concreteType:"CurrencyQuantity",kind:"LinkedField",name:"amount_fb_discount",plural:!1,selections:qt,storageKey:null},Vt={alias:null,args:null,kind:"ScalarField",name:"funds_availability",storageKey:null},Ht={alias:null,args:null,kind:"ScalarField",name:"group_thread_fbid",storageKey:null},Gt={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},zt={alias:null,args:null,kind:"ScalarField",name:"status_description",storageKey:null},jt={alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"currency_amount",plural:!1,selections:[yt],storageKey:null},Kt={alias:null,args:null,kind:"ScalarField",name:"memo_text",storageKey:null},Qt=[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sender",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"P2PSenderReceiver"}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"receiver_profile",plural:!1,selections:[w,O,lt,$t],storageKey:null},Pt,Nt,it,Mt,wt,At,{alias:null,args:null,concreteType:"PeerToPeerTransferContext",kind:"LinkedField",name:"transfer_context",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageImage",kind:"LinkedField",name:"memo_images",plural:!0,selections:Ot,storageKey:null},Bt],storageKey:null},Ut,Vt,Ht,{alias:null,args:null,concreteType:"PeerToPeerPlatformSoldItemDetail",kind:"LinkedField",name:"platform_item",plural:!1,selections:[O,Gt,{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photos",plural:!0,selections:Ot,storageKey:null},ae],storageKey:null},w,zt,jt,Kt,Dt],Xt={alias:null,args:null,concreteType:"CurrencyQuantity",kind:"LinkedField",name:"amount",plural:!1,selections:[Wt,yt],storageKey:null},Yt={alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"transaction_amount",plural:!1,selections:[ht],storageKey:null},Jt=[O,w,lt,$t],Zt={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"requester",plural:!1,selections:Jt,storageKey:null},en={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"requestee",plural:!1,selections:Jt,storageKey:null},tn={alias:null,args:null,kind:"ScalarField",name:"request_status",storageKey:null},nn={alias:null,args:null,concreteType:"MessengerPayTheme",kind:"LinkedField",name:"request_theme",plural:!1,selections:q,storageKey:null},rn={alias:null,args:null,concreteType:"PeerToPeerTransfer",kind:"LinkedField",name:"transfer",plural:!1,selections:Qt,storageKey:null},on={alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null},an={alias:null,args:null,kind:"ScalarField",name:"updated_time",storageKey:null},ln={alias:"message",args:null,kind:"ScalarField",name:"snippet",storageKey:null},sn=[Te,De,Me,we,Ae,w,Fe,Oe,Be,We,qe,Ue,Qe],un={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"call_to_actions",plural:!0,selections:sn,storageKey:null},cn={alias:null,args:null,kind:"ScalarField",name:"image_aspect_ratio",storageKey:null},dn={alias:null,args:null,kind:"ScalarField",name:"first_metaline",storageKey:null},mn={alias:null,args:null,kind:"ScalarField",name:"source_name",storageKey:null},pn={alias:null,args:null,kind:"ScalarField",name:"target_url",storageKey:null},_n={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"default_action",plural:!1,selections:sn,storageKey:null},fn=[w,{alias:"large_preview",args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:ce,storageKey:null}],gn={kind:"InlineFragment",selections:fn,type:"MessageImage",abstractKey:null},hn={kind:"InlineFragment",selections:fn,type:"Photo",abstractKey:null},yn={kind:"Literal",name:"media_type",value:"image/gif"},Cn={alias:null,args:[yn],concreteType:"Image",kind:"LinkedField",name:"animated_image",plural:!1,selections:ce,storageKey:'animated_image(media_type:"image/gif")'},bn={alias:"preview_image",args:[{kind:"Literal",name:"height",value:206},yn,{kind:"Literal",name:"width",value:206}],concreteType:"Image",kind:"LinkedField",name:"animated_image",plural:!1,selections:ce,storageKey:'animated_image(height:206,media_type:"image/gif",width:206)'},vn={kind:"InlineFragment",selections:[Cn,bn,{alias:"large_preview",args:[{kind:"Literal",name:"height",value:420},me,{kind:"Literal",name:"width",value:420}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:ce,storageKey:'image(height:420,sizing:"contain-fit",width:420)'}],type:"MessageAnimatedImage",abstractKey:null},Sn={alias:null,args:null,concreteType:"Application",kind:"LinkedField",name:"attribution_app",plural:!1,selections:[w,O,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"square_logo",plural:!1,selections:re,storageKey:null}],storageKey:null},Rn={alias:null,args:null,kind:"ScalarField",name:"attribution_metadata",storageKey:null},Ln=[ie,le,ne],En=[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],kn={alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"original_dimensions",plural:!1,selections:En,storageKey:null},In={kind:"InlineFragment",selections:[Sn,Rn,tt,he,{alias:"chat_image",args:[{kind:"Literal",name:"height",value:200},me,{kind:"Literal",name:"width",value:168}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:Ln,storageKey:'image(height:200,sizing:"contain-fit",width:168)'},H,{alias:null,args:null,kind:"ScalarField",name:"video_type",storageKey:null},kn,fe,{alias:"large_image",args:[{kind:"Literal",name:"height",value:640},me,{kind:"Literal",name:"width",value:640}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:Ln,storageKey:'image(height:640,sizing:"contain-fit",width:640)'},{alias:"inbox_image",args:[{kind:"Literal",name:"height",value:450},me,{kind:"Literal",name:"width",value:450}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:Ln,storageKey:'image(height:450,sizing:"contain-fit",width:450)'}],type:"MessageVideo",abstractKey:null},Tn={kind:"InlineFragment",selections:[le,ie,w,he],type:"Video",abstractKey:null},Dn=[{alias:null,args:null,concreteType:"MessengerRetailItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,Gt,cn,Ne,dn,O,mn,pn,_n,un,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_blob_attachments",plural:!0,selections:[Ze,gn,hn,vn,In,Tn],storageKey:null}],storageKey:null}],xn={kind:"InlineFragment",selections:[{alias:"video_id",args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Video",abstractKey:null},$n={alias:null,args:null,kind:"ScalarField",name:"expiration_time",storageKey:null},Pn={alias:null,args:null,kind:"ScalarField",name:"latitude",storageKey:null},Nn={alias:null,args:null,kind:"ScalarField",name:"longitude",storageKey:null},Mn=[Pn,Nn],wn={kind:"InlineFragment",selections:[{alias:"live_location_id",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_expired",storageKey:null},$n,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sender",plural:!1,selections:q,storageKey:null},{alias:null,args:null,concreteType:"Coordinate",kind:"LinkedField",name:"coordinate",plural:!1,selections:Mn,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"location_title",storageKey:null},{alias:null,args:null,concreteType:"LiveLocationDestination",kind:"LinkedField",name:"sender_destination",plural:!1,selections:[Pn,Nn,ee],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"stop_reason",storageKey:null}],type:"MessageLiveLocation",abstractKey:null},An={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"kept_by",plural:!1,selections:q,storageKey:null},Fn={alias:null,args:null,kind:"ScalarField",name:"kept_at",storageKey:null},On={alias:null,args:null,kind:"ScalarField",name:"is_keep_disabled",storageKey:null},Bn={alias:null,args:null,kind:"ScalarField",name:"blob_media_type",storageKey:null},Wn=[he,ae,Ft],qn={kind:"InlineFragment",selections:Wn,type:"MessageVideo",abstractKey:null},Un={kind:"InlineFragment",selections:Wn,type:"MessageImage",abstractKey:null},Vn={alias:null,args:null,kind:"ScalarField",name:"montage_container_id",storageKey:null},Hn={alias:null,args:null,kind:"ScalarField",name:"story_id",storageKey:null},Gn={alias:null,args:null,kind:"ScalarField",name:"calendar_sync_type",storageKey:null},zn={alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[w,Gn,{alias:null,args:null,concreteType:"ServicesVerticalPageBasedInfo",kind:"LinkedField",name:"services_vertical_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_eligible_for_appointment_calendar",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_eligible_for_mbs_calendar",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_page_sp_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"time_zone_name",storageKey:null}],storageKey:null}],storageKey:null},jn={alias:null,args:null,kind:"ScalarField",name:"message_bubble_type",storageKey:null},Kn={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:q,storageKey:null},Qn={alias:null,args:null,kind:"ScalarField",name:"ls_xma_title",storageKey:null},Xn={alias:null,args:null,kind:"ScalarField",name:"ls_xma_subtitle",storageKey:null},Yn={alias:"availability",args:null,kind:"ScalarField",name:"user_availability",storageKey:null},Jn={alias:null,args:null,kind:"ScalarField",name:"request_flow_type",storageKey:null},Zn={alias:null,args:null,kind:"ScalarField",name:"service_general_info",storageKey:null},er={alias:null,args:null,kind:"ScalarField",name:"has_saved_to_calendar",storageKey:null},tr=[w,O,lt],nr={alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:tr,storageKey:null},rr={alias:null,args:null,kind:"ScalarField",name:"start",storageKey:null},or={alias:null,args:null,kind:"ScalarField",name:"end",storageKey:null},ar=[rr,or],ir={alias:null,args:null,concreteType:"TimeRange",kind:"LinkedField",name:"suggested_time_range",plural:!1,selections:ar,storageKey:null},lr={alias:"duration",args:null,kind:"ScalarField",name:"duration_in_seconds",storageKey:null},sr={alias:null,args:null,kind:"ScalarField",name:"duration_type",storageKey:null},ur=[{kind:"Literal",name:"first",value:1}],cr={alias:null,args:[{kind:"Literal",name:"sizing",value:"cover-fill-cropped"}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:re,storageKey:'image(sizing:"cover-fill-cropped")'},dr={alias:"price",args:null,kind:"ScalarField",name:"display_price",storageKey:null},mr={alias:null,args:null,kind:"ScalarField",name:"requested_time",storageKey:null},pr={alias:null,args:null,kind:"ScalarField",name:"special_request",storageKey:null},_r={alias:null,args:null,kind:"ScalarField",name:"booking_status_value",storageKey:null},fr={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},gr={alias:null,args:null,kind:"ScalarField",name:"archived_status",storageKey:null},hr={alias:null,args:null,kind:"ScalarField",name:"reminder_bubble_text",storageKey:null},yr={alias:null,args:null,kind:"ScalarField",name:"request_admin_approval_type",storageKey:null},Cr={alias:null,args:null,concreteType:"JobApplication",kind:"LinkedField",name:"job_application",plural:!1,selections:q,storageKey:null},br={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[w,xt,lt],storageKey:null},vr={alias:null,args:null,concreteType:"ServicesNativeBookingRequestAdditionalInfoField",kind:"LinkedField",name:"additional_info",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"field_key",storageKey:null},dt,ee],storageKey:null},Sr={alias:null,args:null,concreteType:"PhoneNumber",kind:"LinkedField",name:"consumer_phone_number",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"display_number",storageKey:null}],storageKey:null},Rr={alias:null,args:null,kind:"ScalarField",name:"recur_message",storageKey:null},Lr={alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:q,storageKey:null},Er={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"consumer",plural:!1,selections:q,storageKey:null},kr={alias:null,args:null,concreteType:"TimeRange",kind:"LinkedField",name:"formatted_available_time_ranges",plural:!0,selections:ar,storageKey:null},Ir={alias:null,args:null,kind:"ScalarField",name:"has_booking_request_created",storageKey:null},Tr={alias:null,args:null,kind:"ScalarField",name:"cta_click_events",storageKey:null},Dr={alias:null,args:null,kind:"ScalarField",name:"cta_texts",storageKey:null},xr={alias:null,args:null,concreteType:"ServicesWWWURL",kind:"LinkedField",name:"www_url",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_async",storageKey:null},ne],storageKey:null},$r={alias:null,args:null,kind:"ScalarField",name:"render_template",storageKey:null},Pr={alias:null,args:null,kind:"ScalarField",name:"primary_text",storageKey:null},Nr={alias:null,args:null,kind:"ScalarField",name:"visible_on_platforms",storageKey:null},Mr=[w,O],wr=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:Mr,storageKey:null}],Ar={alias:"eventID",args:null,kind:"ScalarField",name:"id",storageKey:null},Fr={alias:"guestStatus",args:null,kind:"ScalarField",name:"viewer_guest_status",storageKey:null},Or={alias:"canViewerJoin",args:null,kind:"ScalarField",name:"can_viewer_join",storageKey:null},Br={alias:"timeString",args:null,kind:"ScalarField",name:"start_time_sentence",storageKey:null},Wr=[O],qr={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"social_context",plural:!1,selections:z,storageKey:null},Ur={alias:"watchStatus",args:null,kind:"ScalarField",name:"viewer_watch_status",storageKey:null},Vr={alias:null,args:null,kind:"ScalarField",name:"connection_style",storageKey:null},Hr={alias:"canViewerWatch",args:null,kind:"ScalarField",name:"can_viewer_watch",storageKey:null},Gr={alias:null,args:[{kind:"Literal",name:"width",value:300}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:re,storageKey:"profile_picture(width:300)"},zr={alias:null,args:null,kind:"ScalarField",name:"start_timestamp",storageKey:null},jr={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"application_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"artist_names",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"duration_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"music_title",storageKey:null}],type:"ExternalSong",abstractKey:null},Kr={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"lwa_state",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lwa_type",storageKey:null}],type:"LightweightAction",abstractKey:null},Qr={alias:"desc",args:null,kind:"ScalarField",name:"description",storageKey:null},Xr={alias:"thumb_url",args:null,kind:"ScalarField",name:"image_url",storageKey:null},Yr={alias:"item_url",args:null,kind:"ScalarField",name:"target_url",storageKey:null},Jr={alias:"source",args:null,kind:"ScalarField",name:"source_name",storageKey:null},Zr={alias:null,args:null,kind:"ScalarField",name:"second_metaline",storageKey:null},eo={alias:null,args:null,kind:"ScalarField",name:"third_metaline",storageKey:null},to={alias:"total_cost",args:null,kind:"ScalarField",name:"formated_price",storageKey:null},no={alias:"merchant_name",args:null,kind:"ScalarField",name:"seller_info",storageKey:null},ro={alias:"raw_amount",args:null,kind:"ScalarField",name:"price_amount",storageKey:null},oo={alias:null,args:null,concreteType:"MessengerCommercePayment",kind:"LinkedField",name:"payment",plural:!1,selections:q,storageKey:null},ao={alias:null,args:null,kind:"ScalarField",name:"price_currency",storageKey:null},io={alias:null,args:null,kind:"ScalarField",name:"price_amount",storageKey:null},lo={alias:null,args:null,kind:"ScalarField",name:"can_donate",storageKey:null},so={alias:null,args:null,kind:"ScalarField",name:"has_viewer_donated",storageKey:null},uo={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"fundraiser_detailed_progress_text",plural:!1,selections:z,storageKey:null},co={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"fundraiser_subtitle_text",plural:!1,selections:z,storageKey:null},mo=[ne,le,ie],po={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:mo,storageKey:null},_o={alias:null,args:null,kind:"ScalarField",name:"recipient_name",storageKey:null},fo={alias:null,args:null,kind:"ScalarField",name:"merchant_name",storageKey:null},go={alias:null,args:null,kind:"ScalarField",name:"account_holder_name",storageKey:null},ho={alias:null,args:null,kind:"ScalarField",name:"receipt_id",storageKey:null},yo={alias:null,args:null,kind:"ScalarField",name:"shipping_method",storageKey:null},Co={alias:null,args:null,kind:"ScalarField",name:"order_payment_method",storageKey:null},bo={alias:null,args:null,kind:"ScalarField",name:"receipt_url",storageKey:null},vo={alias:null,args:null,kind:"ScalarField",name:"cancellation_url",storageKey:null},So={alias:null,args:null,kind:"ScalarField",name:"receipient_address",storageKey:null},Ro={alias:null,args:null,kind:"ScalarField",name:"streets",storageKey:null},Lo={alias:null,args:null,kind:"ScalarField",name:"city",storageKey:null},Eo={alias:null,args:null,kind:"ScalarField",name:"country",storageKey:null},ko={alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null},Io={alias:null,args:null,kind:"ScalarField",name:"state",storageKey:null},To={alias:null,args:null,concreteType:"MessengerCommerceBusinessLocation",kind:"LinkedField",name:"structured_address",plural:!1,selections:[Ro,Lo,Eo,ko,Io],storageKey:null},Do={alias:null,args:null,kind:"ScalarField",name:"total",storageKey:null},xo={alias:null,args:null,kind:"ScalarField",name:"tax",storageKey:null},$o={alias:null,args:null,kind:"ScalarField",name:"shipping_cost",storageKey:null},Po={alias:null,args:null,kind:"ScalarField",name:"subtotal",storageKey:null},No={alias:null,args:null,kind:"ScalarField",name:"bubble_type",storageKey:null},Mo={alias:null,args:null,kind:"ScalarField",name:"order_time_for_display",storageKey:null},wo={alias:null,args:null,concreteType:"RetailReceiptAdjustment",kind:"LinkedField",name:"retail_adjustments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"adjustment_amount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"adjustment_type",storageKey:null}],storageKey:null},Ao={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"partner_logo",plural:!1,selections:re,storageKey:null},Fo={alias:null,args:null,kind:"ScalarField",name:"payment_modules_client",storageKey:null},Oo={alias:null,args:null,kind:"ScalarField",name:"is_viewer_seller",storageKey:null},Bo={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"payment_snippet",plural:!1,selections:z,storageKey:null},Wo={alias:null,args:null,kind:"ScalarField",name:"item_id",storageKey:null},qo={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"subtitle",plural:!1,selections:z,storageKey:null},Uo=[ht,yt],Vo={alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"unit_price",plural:!1,selections:Uo,storageKey:null},Ho={alias:null,args:oe,concreteType:"Image",kind:"LinkedField",name:"images",plural:!0,selections:re,storageKey:"images(height:120,width:120)"},Go={alias:null,args:null,kind:"ScalarField",name:"quantity",storageKey:null},zo={alias:null,args:null,concreteType:"PaymentPlatformAttachmentComponent",kind:"LinkedField",name:"components",plural:!0,selections:[ft,qo,{alias:null,args:oe,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:re,storageKey:"image(height:120,width:120)"}],storageKey:null},jo=[Io,{alias:null,args:null,kind:"ScalarField",name:"action_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_detail",storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"label",plural:!1,selections:z,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"checkmark",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"extra_data",storageKey:null}],Ko={alias:null,args:null,concreteType:"PaymentPlatformAttachmentCallToAction",kind:"LinkedField",name:"payment_call_to_actions",plural:!0,selections:jo,storageKey:null},Qo={alias:null,args:null,concreteType:"PaymentPlatformAttachmentCallToAction",kind:"LinkedField",name:"click_action",plural:!1,selections:jo,storageKey:null},Xo={alias:null,args:null,concreteType:"PaymentPlatformAttachmentCallToAction",kind:"LinkedField",name:"summary_action",plural:!1,selections:jo,storageKey:null},Yo={alias:null,args:null,kind:"ScalarField",name:"invoicer_id",storageKey:null},Jo={alias:null,args:null,kind:"ScalarField",name:"is_last_attachment",storageKey:null},Zo={alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"payment_total",plural:!1,selections:Uo,storageKey:null},ea={alias:null,args:null,kind:"ScalarField",name:"product_detail",storageKey:null},ta={alias:null,args:null,concreteType:"PaymentPlatformAttachmentIcon",kind:"LinkedField",name:"payment_status_icon",plural:!1,selections:[fr],storageKey:null},na={alias:null,args:null,kind:"ScalarField",name:"user_facing_payment_status",storageKey:null},ra={alias:null,args:null,kind:"ScalarField",name:"payment_sub_statuses",storageKey:null},oa={alias:null,args:null,kind:"ScalarField",name:"should_show_new_xma",storageKey:null},aa={alias:null,args:null,kind:"ScalarField",name:"buyer_name",storageKey:null},ia={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"group_commerce_item_description",plural:!1,selections:z,storageKey:null},la={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"formatted_price",plural:!1,selections:z,storageKey:null},sa={alias:null,args:null,kind:"ScalarField",name:"group_commerce_item_title",storageKey:null},ua={alias:null,args:pe,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:re,storageKey:'image(sizing:"contain-fit")'},ca={alias:"primary_photo",args:null,concreteType:null,kind:"LinkedField",name:"primary_listing_photo",plural:!1,selections:[ua],storageKey:null},da={alias:null,args:null,concreteType:"StreetAddress",kind:"LinkedField",name:"address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"single_line_full_address",storageKey:null}],storageKey:null},ma={alias:null,args:null,kind:"ScalarField",name:"top_category_name",storageKey:null},pa={alias:null,args:null,concreteType:"FocusedPhoto",kind:"LinkedField",name:"cover_photo",plural:!1,selections:[{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:[w,{alias:null,args:[{kind:"Literal",name:"height",value:720},me,{kind:"Literal",name:"width",value:720}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:mo,storageKey:'image(height:720,sizing:"contain-fit",width:720)'}],storageKey:null}],storageKey:null},_a={alias:null,args:null,concreteType:"Location",kind:"LinkedField",name:"location",plural:!1,selections:Mn,storageKey:null},fa={alias:null,args:null,concreteType:"Rating",kind:"LinkedField",name:"overall_star_rating",plural:!1,selections:[dt],storageKey:null},ga={alias:null,args:null,kind:"ScalarField",name:"price_range_description",storageKey:null},ha={alias:null,args:null,kind:"ScalarField",name:"event_title",storageKey:null},ya={alias:null,args:null,kind:"ScalarField",name:"time",storageKey:null},Ca={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},ha,ya],type:"MessengerEventReminder",abstractKey:null},ba={alias:null,args:null,kind:"ScalarField",name:"tracking_number",storageKey:null},va={alias:null,args:null,kind:"ScalarField",name:"shipdate_for_display",storageKey:null},Sa={alias:null,args:null,kind:"ScalarField",name:"estimated_delivery_time_for_display",storageKey:null},Ra={alias:null,args:null,kind:"ScalarField",name:"timezone",storageKey:null},La=[Eo,Lo,ko,Nn,Pn,Io,Ro,Ra],Ea={alias:null,args:null,concreteType:"MessengerCommerceBusinessLocation",kind:"LinkedField",name:"commerce_origin",plural:!1,selections:La,storageKey:null},ka={alias:null,args:null,concreteType:"MessengerCommerceBusinessLocation",kind:"LinkedField",name:"commerce_destination",plural:!1,selections:La,storageKey:null},Ia={alias:null,args:null,concreteType:"RetailShipmentItemsConnection",kind:"LinkedField",name:"retail_shipment_items",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerRetailItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,O,Qr,Xr,Yr,Jr,cn,dn,Zr,eo,un],storageKey:null}],storageKey:null},Ta={alias:null,args:null,kind:"ScalarField",name:"carrier_tracking_url",storageKey:null},Da=[le,ie,ne],xa={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"logo",plural:!1,selections:Da,storageKey:null},$a={alias:null,args:null,concreteType:"MessengerRetailCarrier",kind:"LinkedField",name:"retail_carrier",plural:!1,selections:[O,Ta,xa],storageKey:null},Pa={alias:null,args:null,concreteType:"MessengerCommerceBusinessLocation",kind:"LinkedField",name:"messenger_commerce_location",plural:!1,selections:La,storageKey:null},Na={alias:null,args:null,concreteType:"RetailShipmentTrackingEventsConnection",kind:"LinkedField",name:"shipment_tracking_events",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerRetailShipmentTrackingEvent",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,Pa],storageKey:null}],storageKey:null},Ma={alias:null,args:null,kind:"ScalarField",name:"tracking_event_time_for_display",storageKey:null},wa={alias:null,args:null,kind:"ScalarField",name:"shipment_tracking_event_type",storageKey:null},Aa={alias:null,args:null,kind:"ScalarField",name:"tracking_event_description",storageKey:null},Fa={alias:null,args:null,concreteType:"MessengerRetailCarrier",kind:"LinkedField",name:"retail_carrier",plural:!1,selections:[O,Ta,xa,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"legal_terms_of_service_text",plural:!1,selections:z,storageKey:null}],storageKey:null},Oa={alias:null,args:null,concreteType:"RetailShipmentTrackingEventsConnection",kind:"LinkedField",name:"shipment_tracking_events",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerRetailShipmentTrackingEvent",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,wa,Pa],storageKey:null}],storageKey:null},Ba={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"cover_image",plural:!1,selections:mo,storageKey:null},Wa={alias:null,args:null,kind:"ScalarField",name:"headline",storageKey:null},qa={alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:Mr,storageKey:null},Ua={alias:null,args:null,concreteType:"LeadGenUserInfoField",kind:"LinkedField",name:"field_data",plural:!0,selections:[ee,O,{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},Va=[G,K],Ha={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"sender_wec_number",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sender_wec_number_formated",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sender_wec_number_fbid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sender_wec_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_referral_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_referral_body",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_referral_headline",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_referral_media",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_referral_media_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_referral_has_admin_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wec_sticker_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_body",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_footer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_header_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_header_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_header_media",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_btn1_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_btn1_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_btn2_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_btn2_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_btn3_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_btn3_text",storageKey:null},{alias:null,args:null,concreteType:"XFBWATemplatedMessageButtonShape",kind:"LinkedField",name:"templated_message_buttons",plural:!0,selections:Va,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_offer_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_offer_has_expiration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_offer_expiration_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_offer_is_offer_code_personalized",storageKey:null},{alias:null,args:null,concreteType:"XFBWATemplatedMessageCardShape",kind:"LinkedField",name:"templated_message_cards",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"title_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sample_handle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},{alias:null,args:null,concreteType:"XFBWATemplatedMessageButtonShape",kind:"LinkedField",name:"button",plural:!1,selections:Va,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templated_message_name",storageKey:null}],type:"WECMessage",abstractKey:null},Ga={alias:null,args:null,kind:"ScalarField",name:"is_malicious",storageKey:null},za={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"thumbnail_image",plural:!1,selections:ce,storageKey:null},ja={alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},Ka={alias:null,args:null,kind:"ScalarField",name:"ad_id",storageKey:null},Qa={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"ice_breaker_title",storageKey:null},{alias:null,args:null,concreteType:"IceBreakerMessage",kind:"LinkedField",name:"ice_breaker_messages",plural:!0,selections:[ja,{alias:null,args:null,kind:"ScalarField",name:"message_key",storageKey:null}],storageKey:null},Ka],type:"IceBreakerMessageAttachment",abstractKey:null},Xa={kind:"Literal",name:"height",value:280},Ya={kind:"Literal",name:"width",value:280},Ja=[Xa,Ya],Za={alias:"preview",args:Ja,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:ce,storageKey:"image(height:280,width:280)"},ei={kind:"Literal",name:"height",value:480},ti={kind:"Literal",name:"width",value:480},ni={alias:"large_preview",args:[ei,ti],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:ce,storageKey:"image(height:480,width:480)"},ri={alias:null,args:null,kind:"ScalarField",name:"module_name",storageKey:null},oi={alias:null,args:null,kind:"ScalarField",name:"program_name",storageKey:null},ai={alias:null,args:null,kind:"ScalarField",name:"curriculum_message",storageKey:null},ii={alias:null,args:null,kind:"ScalarField",name:"prompt",storageKey:null},li={alias:null,args:null,kind:"ScalarField",name:"step_count",storageKey:null},si={alias:null,args:null,kind:"ScalarField",name:"total_steps",storageKey:null},ui={alias:null,args:null,concreteType:"MentorshipProgram",kind:"LinkedField",name:"mentorship_program",plural:!1,selections:[w,{alias:null,args:null,concreteType:"MentorshipCurriculum",kind:"LinkedField",name:"curriculum",plural:!1,selections:q,storageKey:null}],storageKey:null},ci={alias:null,args:null,kind:"ScalarField",name:"topics",storageKey:null},di=[xt],mi={alias:null,args:null,kind:"ScalarField",name:"xma_type",storageKey:null},pi={alias:null,args:null,kind:"ScalarField",name:"xma_title",storageKey:null},_i={alias:null,args:null,kind:"ScalarField",name:"xma_body",storageKey:null},fi={alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},gi={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:[G,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[Ge,fi],storageKey:null}],storageKey:null},hi={alias:null,args:null,kind:"ScalarField",name:"block_type",storageKey:null},yi={alias:null,args:null,kind:"ScalarField",name:"data",storageKey:null},Ci={alias:null,args:null,kind:"ScalarField",name:"depth",storageKey:null},bi={alias:null,args:null,concreteType:"InlineStyleAtRange",kind:"LinkedField",name:"inline_style_ranges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"inline_style",storageKey:null},Ge,fi],storageKey:null},vi={alias:null,args:null,kind:"ScalarField",name:"comment_count_reduced",storageKey:null},Si={alias:null,args:null,concreteType:"TopLevelCommentsConnection",kind:"LinkedField",name:"top_level_comments",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null}],storageKey:null},Ri={alias:null,args:null,kind:"ScalarField",name:"reaction_count_reduced",storageKey:null},Li={kind:"Literal",name:"first",value:3},Ei=[Li,{kind:"Literal",name:"orderby",value:["COUNT_DESC","REACTION_TYPE"]}],ki={alias:null,args:null,kind:"ScalarField",name:"reaction_type",storageKey:null},Ii={alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null},Ti={alias:"description",args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:z,storageKey:null},Di={kind:"InlineFragment",selections:di,type:"User",abstractKey:null},xi=[ae],$i={kind:"InlineFragment",selections:xi,type:"Entity",abstractKey:"__isEntity"},Pi={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actors",plural:!0,selections:[Ze,O,w,Di,$i,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:ce,storageKey:null}],storageKey:null},Ni={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:ce,storageKey:null},Mi={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[ge,Ni],storageKey:null},wi={alias:"title",args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title_with_entities",plural:!1,selections:z,storageKey:null},Ai=[Li],Fi={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},Oi=[{kind:"Literal",name:"if_style",value:"file_upload"}],Bi={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:Ot,storageKey:null},Wi=[{kind:"Literal",name:"if_style",value:"photo"}],qi={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:z,storageKey:null},Ui={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actors",plural:!0,selections:[Ze,O,w,Di,$i],storageKey:null},Vi={alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:Ot,storageKey:null},Hi={alias:null,args:null,concreteType:"FocusedPhoto",kind:"LinkedField",name:"cover_photo",plural:!1,selections:[Vi],storageKey:null},Gi={alias:null,args:null,kind:"ScalarField",name:"job_title",storageKey:null},zi={alias:null,args:null,concreteType:"WorkUserInfo",kind:"LinkedField",name:"work_info",plural:!1,selections:[Gi],storageKey:null},ji={alias:null,args:null,kind:"ScalarField",name:"subscribe_status",storageKey:null},Ki={alias:null,args:null,kind:"ScalarField",name:"visibility",storageKey:null},Qi={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"visibility_sentence",plural:!1,selections:z,storageKey:null},Xi={alias:null,args:null,kind:"ScalarField",name:"viewer_join_state",storageKey:null},Yi={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"group_general_chat",plural:!1,selections:q,storageKey:null},Ji={alias:null,args:null,kind:"ScalarField",name:"attachment_type_name",storageKey:null},Zi={alias:null,args:null,kind:"ScalarField",name:"privacy_status",storageKey:null},el={alias:null,args:null,kind:"ScalarField",name:"file_type_category",storageKey:null},tl={alias:null,args:null,kind:"ScalarField",name:"app_integration_type",storageKey:null},nl={alias:null,args:[{kind:"Literal",name:"size",value:"D32"}],concreteType:"Image",kind:"LinkedField",name:"logo",plural:!1,selections:re,storageKey:'logo(size:"D32")'},rl={alias:null,args:null,kind:"ScalarField",name:"viewer_auth_link",storageKey:null},ol={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"attachment_icon",plural:!1,selections:re,storageKey:null},al={alias:null,args:null,kind:"ScalarField",name:"content_uri",storageKey:null},il={alias:null,args:null,kind:"ScalarField",name:"timestamp",storageKey:null},ll={alias:null,args:null,kind:"ScalarField",name:"referral_offer_link",storageKey:null},sl={alias:null,args:null,kind:"ScalarField",name:"cta_title",storageKey:null},ul={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"action_prefill",storageKey:null},Ka,sl,{alias:null,args:null,kind:"ScalarField",name:"customer_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},Ue,{alias:null,args:null,kind:"ScalarField",name:"reply_image_uri",storageKey:null}],type:"InThreadMultiphotoItemCTAData",abstractKey:null},cl={alias:null,args:null,kind:"ScalarField",name:"viewer_id",storageKey:null},dl={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"payment_confirmation_status",storageKey:null}],type:"XFBPaymentInvoiceMediaMessageDetection",abstractKey:null},ml={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[Ze,et,{kind:"InlineFragment",selections:[w,tt,he,nt,rt,ot,at],type:"WECMessageAudio",abstractKey:null},{kind:"InlineFragment",selections:[it,ut,ct,Dt],type:"MoneyTransfer",abstractKey:null},{kind:"InlineFragment",selections:Qt,type:"PeerToPeerTransfer",abstractKey:null},{kind:"InlineFragment",selections:[Xt,Yt,Zt,en,tn,nn,w,Kt,rn,on,Ht,an,zt,Dt,{alias:null,args:null,concreteType:"PeerToPeerPaymentRequest",kind:"LinkedField",name:"individual_requests",plural:!0,selections:[Xt,Yt,Zt,en,tn,nn,w,Kt,rn,on,Ht,an,zt,Dt],storageKey:null}],type:"PeerToPeerPaymentRequest",abstractKey:null},Dt,{kind:"InlineFragment",selections:[ln,un,{alias:null,args:null,concreteType:"RetailPromotionItemsConnection",kind:"LinkedField",name:"promotion_items",plural:!1,selections:Dn,storageKey:null}],type:"MessengerRetailPromotion",abstractKey:null},{kind:"InlineFragment",selections:[ln,un,{alias:null,args:null,concreteType:"MessengerBusinessMessageItemsConnection",kind:"LinkedField",name:"business_items",plural:!1,selections:Dn,storageKey:null}],type:"MessengerBusinessMessage",abstractKey:null},xn,wn,{kind:"InlineFragment",selections:[w,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"invite_sender",plural:!1,selections:q,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"invite_recipient",plural:!1,selections:q,storageKey:null}],type:"QuickInvite",abstractKey:null},{kind:"InlineFragment",selections:[An,Fn,On,Bn,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_media",plural:!1,selections:[qn,Un],storageKey:null}],type:"MontageDirect",abstractKey:null},{kind:"InlineFragment",selections:[w,Vn,W,Hn],type:"MontageShare",abstractKey:null},{kind:"InlineFragment",selections:[w,zn,jn,Kn,Qn,Xn,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"native_component_flow_request",plural:!1,selections:[{kind:"InlineFragment",selections:[Yn,Jn,Zn,w,Gn,er,nr,ir,{alias:null,args:null,concreteType:"NativeComponentFlowBookingRequestServicesProductItemsConnection",kind:"LinkedField",name:"services_product_items",plural:!1,selections:[{alias:null,args:null,concreteType:"ServicesProductItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,O,Gt,lr,sr,{alias:null,args:ur,concreteType:"ProductImage",kind:"LinkedField",name:"images",plural:!0,selections:[cr],storageKey:"images(first:1)"},dr],storageKey:null}],storageKey:null},mr,pr,_r,fr,gr,hr,yr,Cr,br,vr,Sr,Qn,Xn,Rr],type:"NativeComponentFlowBookingRequest",abstractKey:null}],storageKey:null}],type:"PagesPlatformBookingMessage",abstractKey:null},{kind:"InlineFragment",selections:[w,Lr,Er,kr,Ir],type:"ServicesAppointmentAvailability",abstractKey:null},{kind:"InlineFragment",selections:[w,Tr,Dr,xr,$r,Pr,Nr],type:"ServicesGenericAdminText",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"genie_sender",plural:!1,selections:wr,storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[j,Z,ye,Ce,be,ve,Re,Le,Ee,ke,Ie,Ye,Je],storageKey:null}],type:"GenieMessage",abstractKey:null},{kind:"InlineFragment",selections:[Ar,Fr,Or,Br,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"event_place",plural:!1,selections:Wr,storageKey:null},qr,Ur,Vr,Hr,Gr,O,zr],type:"Event",abstractKey:null},jr,Kr,{kind:"InlineFragment",selections:[w,O,Qr,Xr,Yr,Jr,cn,dn,Zr,eo,_n,un],type:"MessengerRetailItem",abstractKey:null},{kind:"InlineFragment",selections:[w,Qr,to,no,pn,Xr,ro,oo,ao,io,O],type:"AgentItemSuggestion",abstractKey:null},{kind:"InlineFragment",selections:[w,lo,so,uo,co,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"FundraiserCoverPhoto",kind:"LinkedField",name:"focused_cover_photo",plural:!1,selections:[{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:[po],storageKey:null}],storageKey:null}],type:"FundraiserWithPresence",abstractKey:"__isFundraiserWithPresence"}],type:"Fundraiser",abstractKey:"__isFundraiser"},{kind:"InlineFragment",selections:[w,_o,fo,go,ho,yo,Co,bo,vo,So,To,fr,Do,xo,$o,Po,{alias:null,args:null,concreteType:"RetailReceiptItemsConnection",kind:"LinkedField",name:"retail_items",plural:!1,selections:Dn,storageKey:null},No,Mo,wo,Ao],type:"MessengerRetailReceipt",abstractKey:null},{kind:"InlineFragment",selections:[Fo,Oo,Bo,{alias:null,args:null,concreteType:"PaymentInvoiceProduct",kind:"LinkedField",name:"item_list",plural:!0,selections:[Wo,O,qo,Gt,Vo,Ho,Go],storageKey:null},zo,Ko,Qo,Xo,Yo,Jo,Zo,ea,ta,na,ra,oa,aa],type:"PaymentPlatformAttachment",abstractKey:null},{kind:"InlineFragment",selections:q,type:"JobApplication",abstractKey:null},{kind:"InlineFragment",selections:[ia,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"group_commerce_item_seller",plural:!1,selections:q,storageKey:null},la,sa,ca,ae],type:"GroupCommerceProductItem",abstractKey:null},{kind:"InlineFragment",selections:[la,ca],type:"MarketplaceListingRenderable",abstractKey:"__isMarketplaceListingRenderable"},{kind:"InlineFragment",selections:[da,ma,pa,_a,O,fa,w,ga],type:"Page",abstractKey:null},Ca,{kind:"InlineFragment",selections:[w,{alias:null,args:null,concreteType:"MessengerRetailShipment",kind:"LinkedField",name:"shipment",plural:!1,selections:[w,ba,va,Sa,Ea,ka,Ia,$a,Na],storageKey:null},Ma,wa,Pa,Aa,No],type:"MessengerRetailShipmentTrackingEvent",abstractKey:null},{kind:"InlineFragment",selections:[w,ba,va,Sa,Ea,ka,Ia,Fa,Oa,{alias:null,args:null,concreteType:"MessengerRetailReceipt",kind:"LinkedField",name:"receipt",plural:!1,selections:[ho],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"recipient",plural:!1,selections:Wr,storageKey:null},No],type:"MessengerRetailShipment",abstractKey:null},{kind:"InlineFragment",selections:[w,Ba,Wa,O,qa],type:"LeadGenDeepLinkData",abstractKey:null},{kind:"InlineFragment",selections:[w,Ua],type:"UserLeadGenInfo",abstractKey:null},Ha,{kind:"InlineFragment",selections:[w,O,Ga,ne,rt,ot],type:"WECMessageFile",abstractKey:null},{kind:"InlineFragment",selections:[w,he,nt,rt,ot,tt,ie,za,le],type:"WECMessageVideo",abstractKey:null},Qa,{kind:"InlineFragment",selections:[w,rt,Za,ni],type:"WECMessageImage",abstractKey:null},{kind:"InlineFragment",selections:[w,ri,oi,ai,ii,li,si,ui],type:"MentorshipMessengerCurriculumStep",abstractKey:null},{kind:"InlineFragment",selections:[w,ci],type:"MentorshipMessengerDiscussionTopicSet",abstractKey:null},{kind:"InlineFragment",selections:[w,{alias:null,args:null,concreteType:"MentorshipProgram",kind:"LinkedField",name:"mentorship_program",plural:!1,selections:[w,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"other_member",plural:!1,selections:di,storageKey:null}],storageKey:null},mi],type:"MentorshipMessengerLeavePrompt",abstractKey:null},{kind:"InlineFragment",selections:[w,mi],type:"MentorshipMessengerReminder",abstractKey:null},{kind:"InlineFragment",selections:[w,mi,pi,_i],type:"MentorshipMessengerProgressTracker",abstractKey:null},{kind:"InlineFragment",selections:[gi,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message_richtext",plural:!0,selections:[hi,yi,Ci,{alias:null,args:null,concreteType:"ComposedEntityAtRange",kind:"LinkedField",name:"entity_ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[Ze],storageKey:null},Ge,fi],storageKey:null},bi,G],storageKey:null},{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[vi,Si,Ri,{alias:null,args:Ei,concreteType:"TopReactionsConnection",kind:"LinkedField",name:"top_reactions",plural:!1,selections:[{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"nodes",plural:!0,selections:[ki],storageKey:null}],storageKey:'top_reactions(first:3,orderby:["COUNT_DESC","REACTION_TYPE"])'}],storageKey:null},Ii,on,Ti,Pi,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"to",plural:!1,selections:[Ze,O,Di,$i],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[be,ae,Ce,j,Mi,wi,{alias:null,args:Ai,concreteType:"SubattachmentsConnection",kind:"LinkedField",name:"all_subattachments",plural:!1,selections:[Fi,{alias:"files",args:Oi,concreteType:"StoryAttachment",kind:"LinkedField",name:"nodes",plural:!0,selections:[wi,Bi],storageKey:'nodes(if_style:"file_upload")'},{alias:"images",args:Wi,concreteType:"StoryAttachment",kind:"LinkedField",name:"nodes",plural:!0,selections:[Bi],storageKey:'nodes(if_style:"photo")'}],storageKey:"all_subattachments(first:3)"}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"attached_story",plural:!1,selections:[qi,Ui,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[Mi],storageKey:null}],storageKey:null}],type:"Story",abstractKey:null},{kind:"InlineFragment",selections:[w,O,lt,Hi,zi,ji],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[w,O,Ki,Qi,Xi,Hi,Yi,{alias:null,args:null,concreteType:"GroupsSyncMetadata",kind:"LinkedField",name:"work_groups_sync_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messenger_group",plural:!1,selections:q,storageKey:null}],storageKey:null}],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:[w,Ji,Zi,el,{alias:null,args:null,concreteType:"AppIntegration",kind:"LinkedField",name:"app_integration",plural:!1,selections:[tl,O,nl,rl],storageKey:null},ol,al,{alias:null,args:null,concreteType:"AppContentAdditionalData",kind:"LinkedField",name:"link_preview_additional_data",plural:!0,selections:[Q,G,Rt,ze,il,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"profiles",plural:!0,selections:[lt,O],storageKey:null}],storageKey:null}],type:"AppContent",abstractKey:null},{kind:"InlineFragment",selections:q,type:"OfferItem",abstractKey:null},{kind:"InlineFragment",selections:[_n],type:"CommerceProductItemShare",abstractKey:null},{kind:"InlineFragment",selections:[w,ll],type:"ApplicationReferralXMA",abstractKey:null},ul,{kind:"InlineFragment",selections:[w,cl],type:"XFBP2MXMA",abstractKey:null},dl],storageKey:null},pl={alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[j,Z,ye,Ce,be,ve,Re,Le,Ee,ke,Ie,Ye,Je,ml,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"subattachments",plural:!0,selections:[j,Z,ye,Ce,be,ve,Re,Le,Ee,ke,Ie,Ye,Je,ml],storageKey:null}],storageKey:null},_l={kind:"InlineFragment",selections:q,type:"Node",abstractKey:"__isNode"},fl={alias:null,args:null,concreteType:"ExtensibleMessageAttachment",kind:"LinkedField",name:"extensible_attachment",plural:!1,selections:[H,pl,{alias:"genie_attachment",args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[{alias:"genie_message",args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[{kind:"InlineFragment",selections:[w,{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"genie_sender",plural:!1,selections:[w,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[_l,O],storageKey:null}],storageKey:null},pl],type:"GenieMessage",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},gl={alias:null,args:null,concreteType:"Sticker",kind:"LinkedField",name:"sticker",plural:!1,selections:se,storageKey:null},hl={kind:"Literal",name:"sizing",value:"cover-fill"},yl={alias:null,args:null,kind:"ScalarField",name:"projection_type",storageKey:null},Cl={kind:"InlineFragment",selections:[Sn,Rn,tt,{alias:"preview",args:[Xa,hl,Ya],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:ce,storageKey:'image(height:280,sizing:"cover-fill",width:280)'},{alias:"large_preview",args:[ei,hl,ti],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:ce,storageKey:'image(height:480,sizing:"cover-fill",width:480)'},{alias:"thumbnail",args:[{kind:"Literal",name:"height",value:38},{kind:"Literal",name:"width",value:58}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:re,storageKey:"image(height:38,width:58)"},{alias:null,args:null,concreteType:"PhotoEncoding",kind:"LinkedField",name:"photo_encodings",plural:!0,selections:[w,le,ie,yl,{alias:null,args:null,kind:"ScalarField",name:"cdn_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_tile_level",storageKey:null},{alias:null,args:[{kind:"Literal",name:"thumbnail_dimensions",value:[{height:280,width:280},{height:480,width:480}]}],concreteType:"SphericalPhotoThumbnail",kind:"LinkedField",name:"thumbnails",plural:!0,selections:Da,storageKey:'thumbnails(thumbnail_dimensions:[{"height":280,"width":280},{"height":480,"width":480}])'},{alias:null,args:[{kind:"Literal",name:"tile_levels",value:[0]}],concreteType:"PhotoTile",kind:"LinkedField",name:"tiles",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"level",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"face",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"col",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"row",storageKey:null},ne],storageKey:"tiles(tile_levels:[0])"},{alias:null,args:null,concreteType:"PhotosphereMetadata",kind:"LinkedField",name:"spherical_metadata",plural:!1,selections:[yl,{alias:null,args:null,kind:"ScalarField",name:"full_pano_width_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_pano_height_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cropped_area_image_width_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cropped_area_image_height_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cropped_area_left_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cropped_area_top_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_heading_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_pitch_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_vertical_fov_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_roll_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pose_heading_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pose_pitch_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pose_roll_degrees",storageKey:null}],storageKey:null}],storageKey:null},H,kn,{alias:null,args:null,kind:"ScalarField",name:"original_extension",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"render_as_sticker",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"blurred_image_uri",storageKey:null}],type:"MessageImage",abstractKey:null},bl={kind:"InlineFragment",selections:[Sn,Rn,tt,Cn,{alias:null,args:null,kind:"ScalarField",name:"animated_image_caption",storageKey:null},H,bn,kn],type:"MessageAnimatedImage",abstractKey:null},vl={alias:null,args:null,kind:"ScalarField",name:"url_skipshim",storageKey:null},Sl={kind:"InlineFragment",selections:[Sn,Rn,tt,he,fe,{alias:null,args:null,kind:"ScalarField",name:"is_voicemail",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_type",storageKey:null},nt,vl],type:"MessageAudio",abstractKey:null},Rl={alias:null,args:null,kind:"ScalarField",name:"content_type",storageKey:null},Ll={kind:"InlineFragment",selections:[Sn,Rn,tt,ae,{alias:null,args:null,kind:"ScalarField",name:"mimetype",storageKey:null},Rl,Ga,{alias:null,args:null,kind:"ScalarField",name:"message_file_fbid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"preview_url",storageKey:null},nt,vl,{alias:"preview",args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:re,storageKey:null}],type:"MessageFile",abstractKey:null},El=[Ze,Cl,bl,Sl,In,Ll],kl={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_attachments",plural:!0,selections:El,storageKey:null},Il={alias:null,args:null,kind:"ScalarField",name:"extensible_message_admin_text_type",storageKey:null},Tl={alias:null,args:null,concreteType:"Application",kind:"LinkedField",name:"game",plural:!1,selections:q,storageKey:null},Dl={kind:"InlineFragment",selections:[Tl],type:"InstantGameUpdateExtensibleMessageAdminText",abstractKey:null},xl={alias:null,args:null,kind:"ScalarField",name:"platform_xmd_encoded",storageKey:null},$l={alias:null,args:null,kind:"ScalarField",name:"message_unsendability_status",storageKey:null},Pl={alias:"last_message",args:B,concreteType:"MessagesOfThreadConnection",kind:"LinkedField",name:"messages",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[W,{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"message_sender",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:q,storageKey:null}],storageKey:null},U,V,{kind:"InlineFragment",selections:[fl,gl,kl],type:"UserMessage",abstractKey:null},{kind:"InlineFragment",selections:[Il,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"extensible_message_admin_text",plural:!1,selections:[Dl],storageKey:null}],type:"GenericAdminTextMessage",abstractKey:null},xl,$l],storageKey:null}],storageKey:"messages(last:1)"},Nl={alias:null,args:null,concreteType:"ThreadConnectivityData",kind:"LinkedField",name:"thread_connectivity_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"connectivity_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"first_sender_id",storageKey:null}],storageKey:null},Ml={alias:null,args:null,kind:"ScalarField",name:"job_status",storageKey:null},wl={alias:null,args:null,kind:"ScalarField",name:"should_show_jobs_feature",storageKey:null},Al={alias:null,args:null,kind:"ScalarField",name:"should_show_schdule_interview_dialog",storageKey:null},Fl={alias:null,args:null,concreteType:"JobApplicationsFromThreadConnection",kind:"LinkedField",name:"thread_associated_job_applications",plural:!1,selections:[{alias:null,args:null,concreteType:"JobApplication",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,{alias:null,args:null,concreteType:"JobOpening",kind:"LinkedField",name:"job_opening",plural:!1,selections:[Ml,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"employer",plural:!1,selections:[wl,Al],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Ol={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"thread_associated_page_admin",plural:!1,selections:tr,storageKey:null},Bl={alias:null,args:null,kind:"ScalarField",name:"unread_count",storageKey:null},Wl={condition:"is_work_teamwork_not_putting_muted_in_unreads",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"unread_mentions_count",storageKey:null}]},ql={alias:null,args:null,kind:"ScalarField",name:"messages_count",storageKey:null},Ul={alias:null,args:[{kind:"Literal",name:"size",value:60}],concreteType:"Image",kind:"LinkedField",name:"square_image",plural:!1,selections:re,storageKey:"square_image(size:60)"},Vl={alias:null,args:null,kind:"ScalarField",name:"updated_time_precise",storageKey:null},Hl={alias:null,args:null,kind:"ScalarField",name:"mute_until",storageKey:null},Gl={alias:null,args:null,kind:"ScalarField",name:"is_pin_protected",storageKey:null},zl={alias:null,args:null,kind:"ScalarField",name:"is_pinned",storageKey:null},jl={alias:null,args:null,kind:"ScalarField",name:"is_viewer_subscribed",storageKey:null},Kl={alias:null,args:null,kind:"ScalarField",name:"is_other_recipient_page",storageKey:null},Ql={alias:null,args:null,kind:"ScalarField",name:"thread_queue_enabled",storageKey:null},Xl={alias:null,args:null,kind:"ScalarField",name:"folder",storageKey:null},Yl={alias:null,args:null,kind:"ScalarField",name:"has_viewer_archived",storageKey:null},Jl={alias:null,args:null,kind:"ScalarField",name:"is_page_follow_up",storageKey:null},Zl={alias:null,args:null,kind:"ScalarField",name:"is_page_unresponded_thread",storageKey:null},es={alias:null,args:null,kind:"ScalarField",name:"cannot_reply_reason",storageKey:null},ts={alias:null,args:null,kind:"ScalarField",name:"can_viewer_report",storageKey:null},ns={alias:null,args:null,kind:"ScalarField",name:"composer_input_disabled",storageKey:null},rs={alias:null,args:null,kind:"ScalarField",name:"ephemeral_ttl_mode",storageKey:null},os={alias:null,args:null,kind:"ScalarField",name:"emoji",storageKey:null},as={alias:null,args:null,kind:"ScalarField",name:"participant_id",storageKey:null},is={alias:null,args:null,kind:"ScalarField",name:"nickname",storageKey:null},ls={alias:null,args:null,concreteType:"MessageThreadParticipantCustomization",kind:"LinkedField",name:"participant_customizations",plural:!0,selections:[as,is],storageKey:null},ss={alias:null,args:null,kind:"ScalarField",name:"outgoing_bubble_color",storageKey:null},us={alias:null,args:null,concreteType:"MessageThreadCustomization",kind:"LinkedField",name:"customization_info",plural:!1,selections:[os,ls,ss],storageKey:null},cs={alias:null,args:null,kind:"ScalarField",name:"fallback_color",storageKey:null},ds={alias:null,args:null,kind:"ScalarField",name:"accessibility_label",storageKey:null},ms={alias:null,args:null,kind:"ScalarField",name:"reverse_gradients_for_radial",storageKey:null},ps={alias:null,args:null,kind:"ScalarField",name:"gradient_colors",storageKey:null},_s={alias:null,args:null,kind:"ScalarField",name:"keyframe_asset_uri",storageKey:null},fs={alias:null,args:null,kind:"ScalarField",name:"reaction_name",storageKey:null},gs={alias:null,args:null,kind:"ScalarField",name:"reaction_emoji",storageKey:null},hs={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"static_asset",plural:!1,selections:re,storageKey:null},ys={alias:null,args:null,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"thread_theme",plural:!1,selections:[w,cs,ds,ms,ps,{alias:null,args:null,concreteType:"MessengerReactionPack",kind:"LinkedField",name:"reaction_pack",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerReactionPackReactionAssetsConnection",kind:"LinkedField",name:"reaction_assets",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerReactionAsset",kind:"LinkedField",name:"nodes",plural:!0,selections:[_s,fs,gs,hs],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Cs={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"thread_admins",plural:!0,selections:q,storageKey:null},bs={alias:"approval_mode",args:null,kind:"ScalarField",name:"group_approval_mode",storageKey:null},vs={alias:null,args:null,concreteType:"MessageThreadJoinableMode",kind:"LinkedField",name:"joinable_mode",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null}],storageKey:null},Ss={alias:null,args:null,concreteType:"GroupApprovalQueueConnection",kind:"LinkedField",name:"group_approval_queue",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerGroupRequesterInfo",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"requester",plural:!1,selections:q,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"inviter",plural:!1,selections:q,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"request_source",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"request_timestamp",storageKey:null}],storageKey:null}],storageKey:null},Rs=[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:q,storageKey:null}],Ls={alias:null,args:null,concreteType:"ApprovalRequestsOfThreadConnection",kind:"LinkedField",name:"approval_requests",plural:!1,selections:Rs,storageKey:null},Es={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"thread_queue_metadata",plural:!1,selections:[Ls],storageKey:null},ks={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"lightweight_event_creator",plural:!1,selections:q,storageKey:null},Is={alias:null,args:null,kind:"ScalarField",name:"lightweight_event_type",storageKey:null},Ts={alias:null,args:null,kind:"ScalarField",name:"location_name",storageKey:null},Ds={alias:null,args:null,concreteType:"Location",kind:"LinkedField",name:"location_coordinates",plural:!1,selections:Mn,storageKey:null},xs={alias:null,args:null,concreteType:"StreetAddress",kind:"LinkedField",name:"address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"full_address",storageKey:null}],storageKey:null},$s={alias:null,args:null,kind:"ScalarField",name:"lightweight_event_status",storageKey:null},Ps={alias:null,args:null,kind:"ScalarField",name:"note",storageKey:null},Ns={alias:null,args:null,kind:"ScalarField",name:"repeat_mode",storageKey:null},Ms={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},ws={alias:null,args:null,kind:"ScalarField",name:"seconds_to_notify_before",storageKey:null},As={alias:null,args:null,kind:"ScalarField",name:"allows_rsvp",storageKey:null},Fs={alias:null,args:null,concreteType:"Event",kind:"LinkedField",name:"related_event",plural:!1,selections:q,storageKey:null},Os={alias:null,args:null,concreteType:"MessengerEventReminderMembersConnection",kind:"LinkedField",name:"event_reminder_members",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerEventReminderMembersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:q,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"guest_list_state",storageKey:null}],storageKey:null}],storageKey:null},Bs={alias:null,args:ur,concreteType:"MessengerEventRemindersOfThreadConnection",kind:"LinkedField",name:"event_reminders",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerEventReminder",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,ks,ya,Is,Ts,Ds,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"location_page",plural:!1,selections:[xs],storageKey:null},$s,Ps,Ns,ha,{alias:null,args:null,concreteType:"UserMessage",kind:"LinkedField",name:"trigger_message",plural:!1,selections:[Ms],storageKey:null},ws,As,Fs,Os],storageKey:null}],storageKey:"event_reminders(first:1)"},Ws={alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"montage_thread",plural:!1,selections:q,storageKey:null},qs=[U],Us={alias:"last_read_receipt",args:B,concreteType:"MessagingReadReceiptsOfThreadConnection",kind:"LinkedField",name:"read_receipts",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagingReadReceipt",kind:"LinkedField",name:"nodes",plural:!0,selections:qs,storageKey:null}],storageKey:"read_receipts(last:1)"},Vs={alias:"is_flagged",args:[{kind:"Literal",name:"page_message_tag",value:"FLAG"}],kind:"ScalarField",name:"has_tag",storageKey:'has_tag(page_message_tag:"FLAG")'},Hs={alias:null,args:null,kind:"ScalarField",name:"label_color",storageKey:null},Gs={alias:null,args:null,kind:"ScalarField",name:"data_silo",storageKey:null},zs={alias:null,args:null,kind:"ScalarField",name:"label_source",storageKey:null},js={alias:null,args:null,kind:"ScalarField",name:"is_ad_response_label",storageKey:null},Ks={alias:null,args:null,concreteType:"PageMessageThreadCustomThreadLabelsConnection",kind:"LinkedField",name:"custom_thread_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCustomLabel",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,O,Hs,Gs,zs,js],storageKey:null}],storageKey:null},Qs=[w,O,Rt],Xs={alias:null,args:null,concreteType:"PageMessageThreadCustomTagsConnection",kind:"LinkedField",name:"custom_thread_tags",plural:!1,selections:[{alias:null,args:null,concreteType:"PageCustomTag",kind:"LinkedField",name:"nodes",plural:!0,selections:Qs,storageKey:null}],storageKey:null},Ys={alias:null,args:null,kind:"ScalarField",name:"is_ai_label",storageKey:null},Js={alias:null,args:null,kind:"ScalarField",name:"is_ai_handoff_label",storageKey:null},Zs={alias:null,args:null,concreteType:"PageMessageThreadCorpThreadLabelsConnection",kind:"LinkedField",name:"corp_thread_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCorporationLabel",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,O,Hs,zs,Gs,Ys,Js,js],storageKey:null}],storageKey:null},eu={alias:null,args:null,concreteType:"PageMessageThread",kind:"LinkedField",name:"related_page_thread",plural:!1,selections:[Vs,Lr,Ks,Xs,Zs],storageKey:null},tu={alias:null,args:null,kind:"ScalarField",name:"call_state",storageKey:null},nu={alias:null,args:null,kind:"ScalarField",name:"server_info_data",storageKey:null},ru={alias:null,args:null,concreteType:"RtcCallData",kind:"LinkedField",name:"rtc_call_data",plural:!1,selections:[tu,nu,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"initiator",plural:!1,selections:q,storageKey:null}],storageKey:null},ou={alias:null,args:null,concreteType:"Location",kind:"LinkedField",name:"location",plural:!1,selections:[{alias:null,args:null,concreteType:"ReverseGeocodeData",kind:"LinkedField",name:"reverse_geocode",plural:!1,selections:[Lo,Io],storageKey:null}],storageKey:null},au={alias:null,args:null,kind:"ScalarField",name:"inventory_count",storageKey:null},iu={alias:null,args:null,kind:"ScalarField",name:"delivery_types",storageKey:null},lu={alias:null,args:null,kind:"ScalarField",name:"c2c_shipping_eligible",storageKey:null},su={alias:null,args:null,kind:"ScalarField",name:"is_pending",storageKey:null},uu={alias:null,args:null,kind:"ScalarField",name:"is_shipping_offered",storageKey:null},cu={alias:null,args:null,kind:"ScalarField",name:"is_sold",storageKey:null},du={alias:null,args:null,concreteType:"ProductItem",kind:"LinkedField",name:"product_item",plural:!1,selections:[w,{alias:null,args:null,kind:"ScalarField",name:"is_commerce_post_item",storageKey:null}],storageKey:null},mu={alias:null,args:[{kind:"Literal",name:"site",value:"www"}],kind:"ScalarField",name:"url",storageKey:'url(site:"www")'},pu={alias:null,args:null,concreteType:"MarketplaceRatingState",kind:"LinkedField",name:"rating_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_eligible_to_rate",storageKey:null}],storageKey:null},_u={alias:null,args:null,kind:"ScalarField",name:"is_eligible",storageKey:null},fu={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MarketplaceC2CShippingSeller",kind:"LinkedField",name:"marketplace_c2c_shipping_seller",plural:!1,selections:[_u],storageKey:null}],type:"User",abstractKey:null},gu={alias:null,args:null,kind:"ScalarField",name:"label_type",storageKey:null},hu={alias:null,args:null,concreteType:"MarketplaceThreadLabel",kind:"LinkedField",name:"seller_added_labels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"label_string",storageKey:null},gu],storageKey:null},yu={alias:null,args:null,concreteType:"MarketplaceThreadData",kind:"LinkedField",name:"marketplace_thread_data",plural:!1,selections:[{alias:null,args:null,concreteType:"GroupCommerceProductItem",kind:"LinkedField",name:"for_sale_item",plural:!1,selections:[w,Hn,sa,la,ou,au,iu,lu,su,uu,cu,{alias:"primary_photo",args:null,concreteType:null,kind:"LinkedField",name:"primary_listing_photo",plural:!1,selections:Ot,storageKey:null},du,mu],storageKey:null},pu,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"buyer",plural:!1,selections:q,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"seller",plural:!1,selections:[w,fu],storageKey:null},hu],storageKey:null},Cu={alias:"action_link",args:null,kind:"ScalarField",name:"url",storageKey:null},bu={alias:"room_type",args:null,kind:"ScalarField",name:"time_spent_room_type",storageKey:null},vu={alias:null,args:null,kind:"ScalarField",name:"privacy_mode",storageKey:null},Su={alias:null,args:null,kind:"ScalarField",name:"approval_mode_toggleable",storageKey:null},Ru={alias:null,args:null,concreteType:"MentorshipProgram",kind:"LinkedField",name:"mentorship_program",plural:!1,selections:Mr,storageKey:null},Lu=[Fi],Eu={alias:null,args:null,concreteType:"GroupSavesConnection",kind:"LinkedField",name:"group_saves",plural:!1,selections:Lu,storageKey:null},ku={alias:null,args:[{kind:"Literal",name:"external_ref",value:"messenger"}],kind:"ScalarField",name:"verse_group_link",storageKey:'verse_group_link(external_ref:"messenger")'},Iu={kind:"InlineFragment",selections:[O,da],type:"Page",abstractKey:null},Tu={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"associated_object",plural:!1,selections:[{kind:"InlineFragment",selections:[Cu,w,O,lt,Yi,bu,vu,Su,Ru,Eu,ku],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:[Cu,w,O,lt,bu,vu,Su,zr,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"event_place",plural:!1,selections:[Iu],storageKey:null}],type:"Event",abstractKey:null}],storageKey:null},Du={alias:null,args:null,kind:"ScalarField",name:"reactions_mute_mode",storageKey:null},xu={alias:null,args:null,kind:"ScalarField",name:"mentions_mute_mode",storageKey:null},$u={alias:null,args:null,kind:"ScalarField",name:"customization_enabled",storageKey:null},Pu={alias:null,args:null,kind:"ScalarField",name:"thread_type",storageKey:null},Nu={alias:null,args:null,kind:"ScalarField",name:"group_thread_subtype",storageKey:null},Mu={alias:null,args:null,kind:"ScalarField",name:"participant_add_mode_as_string",storageKey:null},wu={alias:null,args:null,kind:"ScalarField",name:"is_canonical_neo_user",storageKey:null},Au={alias:null,args:null,concreteType:"MessageThreadParticipantEventStatusInfo",kind:"LinkedField",name:"participants_event_status",plural:!0,selections:[as,{alias:null,args:null,kind:"ScalarField",name:"event_status",storageKey:null}],storageKey:null},Fu={alias:null,args:null,kind:"ScalarField",name:"comm_status",storageKey:null},Ou={alias:null,args:null,kind:"ScalarField",name:"comm_source_id",storageKey:null},Bu={alias:null,args:null,kind:"ScalarField",name:"is_priority",storageKey:null},Wu={alias:null,args:null,kind:"ScalarField",name:"biz_inbox_tags",storageKey:null},qu={alias:null,args:null,kind:"ScalarField",name:"priority_score",storageKey:null},Uu={alias:null,args:null,kind:"ScalarField",name:"trigger_id",storageKey:null},Vu=[{alias:null,args:null,kind:"ScalarField",name:"suggestion_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"suggestion_content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"triggered_timestamp",storageKey:null},Uu],Hu={alias:null,args:null,concreteType:"SuggestedReplyData",kind:"LinkedField",name:"biz_inbox_suggested_reply",plural:!1,selections:Vu,storageKey:null},Gu={alias:null,args:null,kind:"ScalarField",name:"is_thread_currently_handled_by_ai_agent",storageKey:null},zu=[w,O,{alias:null,args:[{kind:"Literal",name:"height",value:20},{kind:"Literal",name:"width",value:20}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:re,storageKey:"profile_picture(height:20,width:20)"}],ju={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"admin",plural:!1,selections:zu,storageKey:null},Ku={alias:null,args:null,kind:"ScalarField",name:"comm_icon_type",storageKey:null},Qu={alias:null,args:null,concreteType:"PageCommItem",kind:"LinkedField",name:"page_comm_item",plural:!1,selections:[w,Fu,Ou,Bu,Wu,qu,Hu,Gu,{alias:null,args:null,concreteType:"PageCommItemToPageCommItemOwnersConnection",kind:"LinkedField",name:"comm_item_owners",plural:!1,selections:[{alias:null,args:null,concreteType:"PageCommItemOwner",kind:"LinkedField",name:"nodes",plural:!0,selections:[ju],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"subtitle",plural:!1,selections:[{alias:null,args:null,concreteType:"ImageAtRange",kind:"LinkedField",name:"image_ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity_with_image",plural:!1,selections:Ot,storageKey:null},Ge,fi],storageKey:null},bi,G],storageKey:null},Ku],storageKey:null},Xu={alias:null,args:null,kind:"ScalarField",name:"admin_model_status_string",storageKey:null},Yu={alias:null,args:null,kind:"ScalarField",name:"groups_sync_status_string",storageKey:null},Ju={alias:null,args:null,concreteType:"GroupsSyncMetadata",kind:"LinkedField",name:"groups_sync_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"fb_group",plural:!1,selections:xi,storageKey:null}],storageKey:null},Zu={alias:null,args:null,kind:"ScalarField",name:"pinning_time",storageKey:null},ec={alias:null,args:null,concreteType:"OmniMActionLite",kind:"LinkedField",name:"m_suggestions",plural:!0,selections:[w,ee,K,{alias:null,args:null,concreteType:"OmniMActionDataLite",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"OmniMActionReminderDataLite",kind:"LinkedField",name:"reminder",plural:!1,selections:[il,{alias:null,args:null,kind:"ScalarField",name:"topic",storageKey:null}],storageKey:null}],storageKey:null},$n],storageKey:null},tc={alias:null,args:null,kind:"ScalarField",name:"offline_threading_id",storageKey:null},nc={alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},rc={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"message_sender",plural:!1,selections:[w,nc],storageKey:null},oc={alias:null,args:null,kind:"ScalarField",name:"ttl",storageKey:null},ac={alias:null,args:null,kind:"ScalarField",name:"unread",storageKey:null},ic={alias:null,args:null,kind:"ScalarField",name:"is_sponsored",storageKey:null},lc={alias:null,args:null,kind:"ScalarField",name:"ad_client_token",storageKey:null},sc={alias:null,args:null,concreteType:"MessageCustomization",kind:"LinkedField",name:"customizations",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"customization_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"customization_value",storageKey:null}],storageKey:null},uc={alias:null,args:null,kind:"ScalarField",name:"tags_list",storageKey:null},cc={alias:null,args:null,concreteType:"MessageSourceData",kind:"LinkedField",name:"message_source_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message_source",storageKey:null}],storageKey:null},dc={alias:null,args:null,concreteType:"MontageReplyData",kind:"LinkedField",name:"montage_reply_data",plural:!1,selections:[Ms,{alias:null,args:null,kind:"ScalarField",name:"reply_action",storageKey:null},W],storageKey:null},mc={alias:null,args:null,kind:"ScalarField",name:"reaction",storageKey:null},pc={alias:null,args:null,concreteType:"MessageReaction",kind:"LinkedField",name:"message_reactions",plural:!0,selections:[mc,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"user",plural:!1,selections:q,storageKey:null}],storageKey:null},_c={alias:null,args:null,kind:"ScalarField",name:"unsent_timestamp_precise",storageKey:null},fc={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"unsender",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[w,O,Di],storageKey:null}],storageKey:null},gc={alias:null,args:null,kind:"ScalarField",name:"verse_group_role_xmd",storageKey:null},hc={alias:null,args:null,kind:"ScalarField",name:"secondary_language_body",storageKey:null},yc={kind:"InlineFragment",selections:q,type:"Profile",abstractKey:"__isProfile"},Cc={kind:"InlineFragment",selections:q,type:"MessengerViewerGroupThread",abstractKey:null},bc={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"thread_key",plural:!1,selections:[A],storageKey:null}],type:"MessageThread",abstractKey:null},vc={alias:null,args:null,kind:"ScalarField",name:"message_profile_range_type",storageKey:null},Sc={alias:null,args:null,concreteType:"MetaAtRange",kind:"LinkedField",name:"meta_ranges",plural:!0,selections:[Ge,fi,K,yi],storageKey:null},Rc={alias:null,args:null,concreteType:"MessagePageAdminSender",kind:"LinkedField",name:"page_admin_sender",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"admin_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sender_type",storageKey:null},O,gu,Ue,{alias:null,args:null,kind:"ScalarField",name:"profile_uri",storageKey:null}],storageKey:null},Lc={kind:"InlineFragment",selections:[hc,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:[G,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[Ge,fi,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[Ze,yc,Cc,bc],storageKey:null},vc],storageKey:null}],storageKey:null},Sc,fl,gl,kl,Rc],type:"UserMessage",abstractKey:null},Ec={alias:null,args:null,kind:"ScalarField",name:"answered",storageKey:null},kc={kind:"InlineFragment",selections:[Ec,W],type:"VoiceCallMessage",abstractKey:null},Ic=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:El,storageKey:null}],Tc={kind:"InlineFragment",selections:[Ec,W,{alias:null,args:null,concreteType:"VideoCallMessageToCaptureAttachmentsConnection",kind:"LinkedField",name:"call_capture_attachments",plural:!1,selections:[Fi,{alias:null,args:null,concreteType:"VideoCallMessageToCaptureAttachmentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:Ic,storageKey:null}],storageKey:null}],type:"VideoCallMessage",abstractKey:null},Dc={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_name",storageKey:null},W],type:"ThreadNameMessage",abstractKey:null},xc={alias:"preview",args:Ja,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:re,storageKey:"image(height:280,width:280)"},$c={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessageImage",kind:"LinkedField",name:"image_with_metadata",plural:!1,selections:[xc,H,kn],storageKey:null},W],type:"ThreadImageMessage",abstractKey:null},Pc={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"participants_added",plural:!0,selections:q,storageKey:null},W],type:"ParticipantsAddedMessage",abstractKey:null},Nc={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"participants_removed",plural:!0,selections:q,storageKey:null},W],type:"ParticipantLeftMessage",abstractKey:null},Mc={alias:null,args:null,kind:"ScalarField",name:"viewer_has_voted",storageKey:null},wc={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null},{alias:"total_count",args:null,kind:"ScalarField",name:"option_count",storageKey:null},{alias:null,args:null,concreteType:"Question",kind:"LinkedField",name:"question",plural:!1,selections:[w,G,Mc,{alias:null,args:[{kind:"Literal",name:"orderby",value:"creation_time"}],concreteType:"QuestionOptionsConnection",kind:"LinkedField",name:"options",plural:!1,selections:[{alias:null,args:null,concreteType:"QuestionOption",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,G,Mc,{alias:null,args:null,concreteType:"QuestionOptionVotersConnection",kind:"LinkedField",name:"voters",plural:!1,selections:Rs,storageKey:null}],storageKey:null}],storageKey:'options(orderby:"creation_time")'}],storageKey:null}],type:"GroupPollExtensibleMessageAdminText",abstractKey:null},Ac={alias:null,args:null,kind:"ScalarField",name:"display_name",storageKey:null},Fc={alias:null,args:null,concreteType:"MessengerEventReminder",kind:"LinkedField",name:"event_reminder",plural:!1,selections:[w,ya,ha,{alias:null,args:null,kind:"ScalarField",name:"end_time",storageKey:null},Ts,Is,As,ws,ks,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"location_page",plural:!1,selections:q,storageKey:null},Ds,{alias:null,args:null,concreteType:"TimezoneInfo",kind:"LinkedField",name:"timezone_id",plural:!1,selections:[Ac,Ra,{alias:null,args:null,kind:"ScalarField",name:"timezone_id",storageKey:null}],storageKey:null},Os],storageKey:null},Oc=[Fc],Bc={kind:"InlineFragment",selections:Oc,type:"LightweightEventCreateExtensibleMessageAdminText",abstractKey:null},Wc={kind:"InlineFragment",selections:Oc,type:"LightweightEventDeleteExtensibleMessageAdminText",abstractKey:null},qc={kind:"InlineFragment",selections:Oc,type:"LightweightEventNotifyBeforeEventExtensibleMessageAdminText",abstractKey:null},Uc={kind:"InlineFragment",selections:Oc,type:"LightweightEventNotifyExtensibleMessageAdminText",abstractKey:null},Vc={kind:"InlineFragment",selections:Oc,type:"LightweightEventUpdateExtensibleMessageAdminText",abstractKey:null},Hc={kind:"InlineFragment",selections:Oc,type:"LightweightEventUpdateLocationExtensibleMessageAdminText",abstractKey:null},Gc={kind:"InlineFragment",selections:Oc,type:"LightweightEventUpdateTimeExtensibleMessageAdminText",abstractKey:null},zc={kind:"InlineFragment",selections:Oc,type:"LightweightEventUpdateTitleExtensibleMessageAdminText",abstractKey:null},jc={alias:null,args:null,kind:"ScalarField",name:"guest_id",storageKey:null},Kc={kind:"InlineFragment",selections:[jc,{alias:null,args:null,kind:"ScalarField",name:"guest_status",storageKey:null},Fc],type:"LightweightEventRSVPExtensibleMessageAdminText",abstractKey:null},Qc={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"theme_color",storageKey:null}],type:"ThemeColorExtensibleMessageAdminText",abstractKey:null},Xc={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_icon",storageKey:null}],type:"ThreadIconExtensibleMessageAdminText",abstractKey:null},Yc={kind:"InlineFragment",selections:[is,{alias:"participant_id",args:null,kind:"ScalarField",name:"target_id",storageKey:null}],type:"ThreadNicknameExtensibleMessageAdminText",abstractKey:null},Jc={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"accepter_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"requester_id",storageKey:null}],type:"AcceptPendingThreadExtensibleMessageAdminText",abstractKey:null},Zc={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"contact_added_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contact_adder_id",storageKey:null}],type:"AddContactExtensibleMessageAdminText",abstractKey:null},ed={alias:null,args:null,kind:"ScalarField",name:"event",storageKey:null},td={kind:"InlineFragment",selections:[ed,{alias:null,args:null,kind:"ScalarField",name:"is_video_call",storageKey:null},nu],type:"RtcCallLogExtensibleMessageAdminText",abstractKey:null},nd={alias:null,args:null,kind:"ScalarField",name:"update_type",storageKey:null},rd={alias:null,args:null,kind:"ScalarField",name:"collapsed_text",storageKey:null},od={alias:null,args:null,kind:"ScalarField",name:"expanded_text",storageKey:null},ad={alias:null,args:null,kind:"ScalarField",name:"cta_url",storageKey:null},id={alias:null,args:null,kind:"ScalarField",name:"template",storageKey:null},ld={alias:null,args:null,kind:"ScalarField",name:"leaderboard_json",storageKey:null},sd={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"game_type",storageKey:null}],type:"GameScoreExtensibleMessageAdminText",abstractKey:null},ud={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"parties_user_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"parties_invite_type",storageKey:null}],type:"PartiesInviteExtensibleMessageAdminText",abstractKey:null},cd={alias:null,args:null,kind:"ScalarField",name:"icebreaker_type",storageKey:null},dd={alias:null,args:null,kind:"ScalarField",name:"icebreaker_title",storageKey:null},md={alias:null,args:null,kind:"ScalarField",name:"icebreaker_subtitle",storageKey:null},pd={alias:null,args:null,kind:"ScalarField",name:"vote_buttons_with_icons",storageKey:null},_d={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"friend_request_recipient",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"friend_request_sender",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"friend_request_subtype",storageKey:null},cd,dd,md,pd],type:"ConfirmFriendRequestExtensibleMessageAdminText",abstractKey:null},fd={alias:null,args:null,kind:"ScalarField",name:"sender_id",storageKey:null},gd={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"bump_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"recipient_id",storageKey:null},fd,Q,Gt,{alias:null,args:null,kind:"ScalarField",name:"icon_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"image_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"facepile_ids",storageKey:null},sl,{alias:null,args:null,kind:"ScalarField",name:"cta_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"admin_message_string",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"banner_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_two_way",storageKey:null}],type:"MessengerGrowthGenericExtensibleMessageAdminText",abstractKey:null},hd={kind:"InlineFragment",selections:[Pr,{alias:null,args:null,kind:"ScalarField",name:"ios_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"activity_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_redesign",storageKey:null}],type:"BizInboxDetectedOutcomesActivityAdminTextExtensibleMessageAdminText",abstractKey:null},yd={alias:null,args:null,kind:"ScalarField",name:"cta_text",storageKey:null},Cd={kind:"InlineFragment",selections:[Pr,yd,ad,{alias:null,args:null,kind:"ScalarField",name:"async_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"www_is_async_url",storageKey:null}],type:"LinkCTAExtensibleMessageAdminText",abstractKey:null},bd={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"referer_uri",storageKey:null}],type:"MessengerLiveChatPluginURLUpdateAdminText",abstractKey:null},vd={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"fb_user_name",storageKey:null}],type:"MessengerLiveChatPluginFBUserStartChatAdminText",abstractKey:null},Sd={kind:"InlineFragment",selections:[$n],type:"MessengerLiveChatPluginGuestUserStartChatAdminText",abstractKey:null},Rd={kind:"InlineFragment",selections:[yd,ad,Ms,{alias:null,args:null,kind:"ScalarField",name:"recipient_is_the_sender",storageKey:null}],type:"WorkChatReminderLinkCTAExtensibleMessageAdminText",abstractKey:null},Ld={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"post_uri",storageKey:null}],type:"PostSharedFromGroupExtensibleMessageAdminText",abstractKey:null},Ed={alias:null,args:null,kind:"ScalarField",name:"ad_url",storageKey:null},kd={kind:"InlineFragment",selections:[Ed],type:"MessengerAdContextAdminText",abstractKey:null},Id={kind:"InlineFragment",selections:[lc,Ka,{alias:null,args:null,kind:"ScalarField",name:"ad_preferences_link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ad_properties",storageKey:null}],type:"AdExtensibleMessageAdminText",abstractKey:null},Td={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"page_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"start_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"user_name",storageKey:null}],type:"AppointmentReminderExtensibleMessageAdminText",abstractKey:null},Dd=[Ue],xd={kind:"InlineFragment",selections:Dd,type:"GraphQLServicesAppointmentsOptOutExtensibleMessageAdminText",abstractKey:null},$d={kind:"InlineFragment",selections:Dd,type:"ServicesLeadGenSurveyExtensibleMessageAdminText",abstractKey:null},Pd={kind:"InlineFragment",selections:Dd,type:"ServicesLeadGenSurveyEditExtensibleMessageAdminText",abstractKey:null},Nd={alias:null,args:null,kind:"ScalarField",name:"caller_id",storageKey:null},Md={alias:null,args:null,kind:"ScalarField",name:"callee_id",storageKey:null},wd={alias:null,args:null,kind:"ScalarField",name:"conference_name",storageKey:null},Ad={alias:null,args:null,kind:"ScalarField",name:"server_info",storageKey:null},Fd={alias:null,args:null,kind:"ScalarField",name:"video",storageKey:null},Od={alias:null,args:null,kind:"ScalarField",name:"call_duration",storageKey:null},Bd={alias:null,args:null,kind:"ScalarField",name:"rating",storageKey:null},Wd={kind:"InlineFragment",selections:[cd,dd,md,{alias:null,args:null,kind:"ScalarField",name:"votes_cast",storageKey:null},pd],type:"MessengerIcebreakerVoteCastExtensibleMessageAdminText",abstractKey:null},qd={alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},Ud={alias:null,args:null,kind:"ScalarField",name:"currency_code",storageKey:null},Vd=[Ue,qd,{alias:null,args:null,kind:"ScalarField",name:"receipt_photo_id",storageKey:null},Ud,{alias:null,args:null,kind:"ScalarField",name:"detection_type",storageKey:null}],Hd={kind:"InlineFragment",selections:Vd,type:"PagesMarkAsPaidExtensibleMessageAdminText",abstractKey:null},Gd={kind:"InlineFragment",selections:Vd,type:"PagesMarkAsPaidNewExtensibleMessageAdminText",abstractKey:null},zd={alias:null,args:null,kind:"ScalarField",name:"interaction_id",storageKey:null},jd={kind:"InlineFragment",selections:[Ue,qd,{alias:null,args:null,kind:"ScalarField",name:"interaction_type",storageKey:null},zd,{alias:null,args:null,kind:"ScalarField",name:"should_show_cta",storageKey:null}],type:"PageThreadActionSystemAddDetailsXMAT",abstractKey:null},Kd={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"bot_page",plural:!1,selections:q,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_landing_page",storageKey:null}],type:"WorkBotInstalledExtensibleMessageAdminText",abstractKey:null},Qd={kind:"InlineFragment",selections:[Ed,{alias:null,args:null,kind:"ScalarField",name:"should_show_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"results_url",storageKey:null}],type:"AdReplyMessageAdminText",abstractKey:null},Xd={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"new_magic_word_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"magic_word",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emoji_effect",storageKey:null}],type:"MagicWordsExtensibleMessageAdminText",abstractKey:null},Yd={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"token_ent_id_string",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"user_action_type",storageKey:null}],type:"NotificationMessagesAdminText",abstractKey:null},Jd={alias:null,args:null,kind:"ScalarField",name:"admin_assigner_name",storageKey:null},Zd={kind:"InlineFragment",selections:[Jd,{alias:null,args:null,kind:"ScalarField",name:"assigned_admin_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"assign_conversation",storageKey:null}],type:"BizInboxAssignAdminAdminText",abstractKey:null},em={kind:"InlineFragment",selections:[Jd,{alias:null,args:null,kind:"ScalarField",name:"note_input",storageKey:null}],type:"BizInboxAdminAssignmentNoteAdminText",abstractKey:null},tm={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"email_thread_id",storageKey:null}],type:"BizInboxOmnichannelEmailSentAdminText",abstractKey:null},nm={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"user_subscription_management_action_type",storageKey:null}],type:"InstantGameBotMessageSubscriptionManagementAdminText",abstractKey:null},rm={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"user_mute_management_action_type",storageKey:null}],type:"InstantGameCustomUpdateMuteManagementAdminText",abstractKey:null},om={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"extensible_message_admin_text",plural:!1,selections:[Ze,wc,Bc,Wc,qc,Uc,Vc,Hc,Gc,zc,Kc,Qc,Xc,Yc,Jc,Zc,td,{kind:"InlineFragment",selections:[Tl,nd,rd,od,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"instant_game_update_data",plural:!1,selections:[{kind:"InlineFragment",selections:[ad,sl,Vi,id],type:"InstantGameXMATCustomMessageClientData",abstractKey:null}],storageKey:null},ld],type:"InstantGameUpdateExtensibleMessageAdminText",abstractKey:null},sd,ud,_d,gd,hd,Cd,bd,vd,Sd,Rd,Ld,kd,Id,Td,xd,$d,Pd,{kind:"InlineFragment",selections:[Nd,Md,wd,ed,Ad,Fd,Od,Bd,{alias:null,args:null,concreteType:"MessengerCallLogExtensibleMessageAdminTextCallCaptureAttachmentsConnection",kind:"LinkedField",name:"call_capture_attachments",plural:!1,selections:[Fi,{alias:null,args:null,concreteType:"MessengerCallLogExtensibleMessageAdminTextCallCaptureAttachmentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:Ic,storageKey:null}],storageKey:null}],type:"MessengerCallLogExtensibleMessageAdminText",abstractKey:null},Wd,Hd,Gd,jd,Kd,Qd,Xd,Yd,Zd,em,tm,nm,rm],storageKey:null},Il,W],type:"GenericAdminTextMessage",abstractKey:null},am=[{alias:null,args:null,kind:"ScalarField",name:"transfer_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message_type",storageKey:null},{alias:null,args:null,concreteType:"CurrencyQuantity",kind:"LinkedField",name:"amount",plural:!1,selections:qt,storageKey:null},{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"p2p_sender",plural:!1,selections:q,storageKey:null},{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"p2p_receiver",plural:!1,selections:q,storageKey:null},W],im={kind:"InlineFragment",selections:am,type:"P2PPaymentRequestMessage",abstractKey:null},lm={kind:"InlineFragment",selections:am,type:"P2PPaymentMessage",abstractKey:null},sm=[ec,Ze,Ms,tc,rc,oc,U,ac,ic,Ka,lc,V,sc,uc,xl,cc,dc,pc,_c,fc,gc,$l,Lc,kc,Tc,Dc,$c,Pc,Nc,om,im,lm,{alias:null,args:null,concreteType:"RepliedToMessage",kind:"LinkedField",name:"replied_to_message",plural:!1,selections:[fr,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message",plural:!1,selections:[ec,Ze,Ms,tc,rc,oc,U,ac,ic,Ka,lc,V,sc,uc,xl,cc,dc,pc,_c,fc,gc,$l,Lc,kc,Tc,Dc,$c,Pc,Nc,om,im,lm],storageKey:null}],storageKey:null}],um={alias:null,args:null,concreteType:"PinnedMessageData",kind:"LinkedField",name:"pinned_messages",plural:!0,selections:[Ms,Zu,{condition:"threadlistViewFieldsOnly",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message",plural:!1,selections:sm,storageKey:null}]}],storageKey:null},cm={alias:null,args:null,kind:"ScalarField",name:"is_default_child_group",storageKey:null},dm={alias:null,args:null,kind:"ScalarField",name:"emoji_codepoints",storageKey:null},mm={alias:null,args:null,concreteType:"GroupsSyncMetadata",kind:"LinkedField",name:"work_groups_sync_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"fb_group",plural:!1,selections:[ae,w,O,Ki,cm,lt,Eu,{alias:null,args:null,concreteType:"MultiBackgroundIcon",kind:"LinkedField",name:"group_icon",plural:!1,selections:[dm],storageKey:null}],storageKey:null}],storageKey:null},pm={condition:"threadlistViewFieldsOnly",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"saved_messages",plural:!0,selections:sm,storageKey:null}]},_m={alias:null,args:null,kind:"ScalarField",name:"joinable_link",storageKey:null},fm={alias:null,args:null,kind:"ScalarField",name:"is_fuss_red_page",storageKey:null},gm={alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"program_group",plural:!1,selections:[w,{alias:null,args:[{kind:"Literal",name:"height",value:24},{kind:"Literal",name:"width",value:24}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:re,storageKey:"profile_picture(height:24,width:24)"}],storageKey:null},hm={alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"mentorship_group",plural:!1,selections:Mr,storageKey:null},ym={alias:null,args:null,kind:"ScalarField",name:"banner_title",storageKey:null},Cm={alias:null,args:null,kind:"ScalarField",name:"banner_subtitle",storageKey:null},bm={alias:null,args:ur,concreteType:"MessengerMentorshipProgramOfThreadConnection",kind:"LinkedField",name:"linked_mentorship_programs",plural:!1,selections:[{alias:null,args:null,concreteType:"MentorshipProgram",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,gm,hm,{alias:null,args:ur,concreteType:"MentorshipProgramToMentorshipMessengerCurriculumStepOrderByStepCountConnection",kind:"LinkedField",name:"messenger_curriculum_steps",plural:!1,selections:[{alias:null,args:null,concreteType:"MentorshipMessengerCurriculumStep",kind:"LinkedField",name:"nodes",plural:!0,selections:[ym,Cm],storageKey:null}],storageKey:"messenger_curriculum_steps(first:1)"}],storageKey:null}],storageKey:"linked_mentorship_programs(first:1)"},vm={alias:null,args:null,kind:"ScalarField",name:"thread_unsendability_status",storageKey:null},Sm={alias:null,args:null,kind:"ScalarField",name:"thread_pin_timestamp",storageKey:null},Rm={alias:null,args:null,kind:"ScalarField",name:"is_business_page_active",storageKey:null},Lm={alias:null,args:null,concreteType:"ConversionDetectionData",kind:"LinkedField",name:"conversion_detection_data",plural:!1,selections:[_u,{alias:null,args:null,kind:"ScalarField",name:"conversion_type",storageKey:null},Ud,{alias:null,args:null,kind:"ScalarField",name:"currency_amount",storageKey:null},{alias:"timestamp",args:null,kind:"ScalarField",name:"timestamp_graphql_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"page_reply",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icebreaker_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icebreaker_message",storageKey:null},Uu,{alias:null,args:null,kind:"ScalarField",name:"shipping_provider",storageKey:null},ba,{alias:null,args:null,kind:"ScalarField",name:"ctx_ad_info",storageKey:null}],storageKey:null},Em={alias:null,args:null,concreteType:"SuggestedReplyData",kind:"LinkedField",name:"suggested_reply_data",plural:!1,selections:Vu,storageKey:null},km={alias:null,args:null,kind:"ScalarField",name:"admin_type",storageKey:null},Im={alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null},Tm={alias:"big_image_src",args:[{kind:"Literal",name:"height",value:60},{kind:"Literal",name:"width",value:60}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:re,storageKey:"profile_picture(height:60,width:60)"},Dm={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},xm={alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},$m={alias:null,args:null,kind:"ScalarField",name:"is_messenger_user",storageKey:null},Pm={alias:null,args:null,kind:"ScalarField",name:"is_message_blocked_by_viewer",storageKey:null},Nm={alias:null,args:null,kind:"ScalarField",name:"is_viewer_coworker",storageKey:null},Mm={alias:null,args:null,kind:"ScalarField",name:"is_employee",storageKey:null},wm={alias:null,args:null,kind:"ScalarField",name:"is_aloha_proxy_confirmed",storageKey:null},Am={alias:null,args:null,kind:"ScalarField",name:"message_capabilities2_str",storageKey:null},Fm={alias:null,args:null,kind:"ScalarField",name:"messenger_account_status_category",storageKey:null},Om={alias:null,args:null,concreteType:"WorkUserInfo",kind:"LinkedField",name:"work_info",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"work_community",plural:!1,selections:Wr,storageKey:null},Gi],storageKey:null},Bm={kind:"InlineFragment",selections:[Im,ae,Tm,xt,xm,$m,Pm,{alias:null,args:null,kind:"ScalarField",name:"is_viewer_managing_parent",storageKey:null}],type:"NeoApprovedUser",abstractKey:null},Wm={kind:"InlineFragment",selections:[ae,Tm,Dm,{alias:null,args:null,kind:"ScalarField",name:"accepts_messenger_user_feedback",storageKey:null},$m,{alias:null,args:null,kind:"ScalarField",name:"is_messenger_platform_bot",storageKey:null},Pm,{alias:null,args:null,kind:"ScalarField",name:"is_viewer_subscribed_to_message_updates",storageKey:null},{alias:null,args:null,concreteType:"InstantGameChannelInfo",kind:"LinkedField",name:"instant_game_channel",plural:!1,selections:[{alias:null,args:null,concreteType:"Application",kind:"LinkedField",name:"application",plural:!1,selections:q,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"verification_status",storageKey:null}],type:"Page",abstractKey:null},qm=[ae,Tm,Pm],Um={kind:"InlineFragment",selections:qm,type:"SmsMessagingParticipant",abstractKey:null},Vm={kind:"InlineFragment",selections:[Tm,Pm],type:"InstagramMessagingUser",abstractKey:null},Hm=[Tm],Gm={kind:"InlineFragment",selections:Hm,type:"LiveChatOnlyPerson",abstractKey:null},zm={kind:"InlineFragment",selections:qm,type:"UnavailableMessagingActor",abstractKey:null},jm={kind:"InlineFragment",selections:Hm,type:"UnifiedMessagingInstagramUser",abstractKey:null},Km={alias:null,args:null,kind:"ScalarField",name:"is_blocked_by_viewer",storageKey:null},Qm=[ae,Tm,Dm],Xm={kind:"InlineFragment",selections:Qm,type:"Group",abstractKey:null},Ym={kind:"InlineFragment",selections:Qm,type:"Event",abstractKey:null},Jm={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"WorkForeignEntityInfo",kind:"LinkedField",name:"work_foreign_entity_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"detail",storageKey:null},ee,K],storageKey:null}],type:"WorkForeignEntity",abstractKey:"__isWorkForeignEntity"},Zm=[ae,Tm,xt,Pm],ep={kind:"InlineFragment",selections:Zm,type:"XFBWorkroomsBaseUser",abstractKey:"__isXFBWorkroomsBaseUser"},tp={kind:"InlineFragment",selections:Zm,type:"XFBWorkroomsSystemUser",abstractKey:null},np={kind:"InlineFragment",selections:Hm,type:"MessengerCallGuestUser",abstractKey:null},rp={kind:"InlineFragment",selections:Hm,type:"WorkVCEndpointUser",abstractKey:null},op={kind:"InlineFragment",selections:Hm,type:"WECMailboxAccount",abstractKey:null},ap={kind:"InlineFragment",selections:Hm,type:"WECCustomer",abstractKey:null},ip={alias:null,args:null,kind:"ScalarField",name:"wec_group_creation_time",storageKey:null},lp={alias:null,args:null,kind:"ScalarField",name:"wec_group_invite_link",storageKey:null},sp={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"nodes",plural:!0,selections:wr,storageKey:null},up={alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadConnection",kind:"LinkedField",name:"all_participants",plural:!1,selections:[{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[km,{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[w,Ze,O,{kind:"InlineFragment",selections:[Im,ae,Tm,xt,Dm,xm,$m,Pm,Nm,Mm,wm,Am,Fm,Om],type:"User",abstractKey:null},Bm,Wm,Um,Vm,Gm,zm,jm,{kind:"InlineFragment",selections:[ae,Tm,Dm,Km,Pm,Om],type:"ReducedMessagingActor",abstractKey:null},Xm,Ym,Jm,ep,tp,np,rp,op,ap,{kind:"InlineFragment",selections:[Tm,ip,lp,{alias:null,args:null,concreteType:"WECGroupParticipantsConnection",kind:"LinkedField",name:"wec_group_participants",plural:!1,selections:[sp,Fi],storageKey:null},{alias:null,args:null,concreteType:"WECGroupAdminsConnection",kind:"LinkedField",name:"wec_group_admins",plural:!1,selections:[sp],storageKey:null}],type:"WECGroupRecipient",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},cp={alias:"watermark",args:null,kind:"ScalarField",name:"timestamp_precise",storageKey:null},dp={alias:"action",args:null,kind:"ScalarField",name:"action_timestamp_precise",storageKey:null},mp={alias:null,args:null,concreteType:"MessagingReadReceiptsOfThreadConnection",kind:"LinkedField",name:"read_receipts",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagingReadReceipt",kind:"LinkedField",name:"nodes",plural:!0,selections:[cp,dp,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:q,storageKey:null}],storageKey:null}],storageKey:null},pp=[{alias:null,args:null,concreteType:"MessagingDeliveryReceiptsOfThreadConnection",kind:"LinkedField",name:"delivery_receipts",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagingDeliveryReceipt",kind:"LinkedField",name:"nodes",plural:!0,selections:qs,storageKey:null}],storageKey:null}],_p={condition:"includeDeliveryReceipts",kind:"Condition",passingValue:!0,selections:pp},fp=[M,{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,F,O,Pl,Nl,Fl,Ol,Bl,Wl,ql,Ul,Ft,Vl,Hl,Gl,zl,jl,Kl,Ql,Xl,Yl,Jl,Zl,es,ts,ns,rs,us,ys,Cs,bs,vs,Ss,Es,Bs,Ws,Us,eu,ru,yu,Tu,vu,Du,xu,$u,Pu,Nu,Mu,wu,Au,Qu,Xu,Yu,Ju,um,mm,pm,Gt,_m,fm,bm,vm,Sm,Rm,Lm,Em,up,mp,_p],storageKey:null}],gp={alias:null,args:null,kind:"ScalarField",name:"instagram_user_id",storageKey:null},hp=[gp,lt],yp={alias:null,args:null,kind:"ScalarField",name:"unseen_count",storageKey:null},Cp={alias:null,args:null,kind:"ScalarField",name:"token",storageKey:null},bp={alias:null,args:null,kind:"ScalarField",name:"thread_id",storageKey:null},vp={alias:null,args:null,kind:"ScalarField",name:"thread_v2_id",storageKey:null},Sp={alias:null,args:null,kind:"ScalarField",name:"instagram_message_thread_type",storageKey:null},Rp={alias:null,args:null,kind:"ScalarField",name:"thread_title",storageKey:null},Lp={alias:null,args:null,kind:"ScalarField",name:"is_group",storageKey:null},Ep={alias:null,args:null,kind:"ScalarField",name:"last_activity_at",storageKey:null},kp={alias:null,args:null,concreteType:"IGThreadLastSeenUser",kind:"LinkedField",name:"last_seen_at",plural:!0,selections:[Wo,il,qd],storageKey:null},Ip={alias:null,args:null,kind:"ScalarField",name:"media_type",storageKey:null},Tp={alias:null,args:null,concreteType:"IGThreadDirectStoryData",kind:"LinkedField",name:"direct_story",plural:!1,selections:[yp,Ip],storageKey:null},Dp={alias:null,args:null,concreteType:"InstagramMessageThreadThreadLabelsConnection",kind:"LinkedField",name:"thread_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCustomLabel",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,O,Hs,Gs,zs],storageKey:null}],storageKey:null},xp={alias:null,args:null,concreteType:"InstagramMessageThreadThreadCorpLabelsConnection",kind:"LinkedField",name:"thread_corp_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCorporationLabel",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,O,Hs,Gs],storageKey:null}],storageKey:null},$p={alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"assigned_admin",plural:!1,selections:zu,storageKey:null},Pp={alias:null,args:null,kind:"ScalarField",name:"is_follow_up",storageKey:null},Np={alias:null,args:null,kind:"ScalarField",name:"is_read",storageKey:null},Mp={alias:null,args:null,kind:"ScalarField",name:"business_thread_folder",storageKey:null},wp={alias:null,args:null,concreteType:"IGThreadUserNodesData",kind:"LinkedField",name:"thread_users",plural:!1,selections:[{alias:null,args:null,concreteType:"IGThreadUserData",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"eimu_id",storageKey:null},gp,Dm,O,{alias:null,args:null,concreteType:"IGThreadUserProfilePic",kind:"LinkedField",name:"profile_picture",plural:!1,selections:re,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"blocking",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null}],storageKey:null}],storageKey:null},Ap={alias:null,args:null,kind:"ScalarField",name:"input_mode",storageKey:null},Fp={alias:null,args:null,kind:"ScalarField",name:"is_partnership",storageKey:null},Op={alias:null,args:null,kind:"ScalarField",name:"time_stamp",storageKey:null},Bp={alias:null,args:null,kind:"ScalarField",name:"ig_item_type",storageKey:null},Wp={alias:null,args:null,kind:"ScalarField",name:"client_context",storageKey:null},qp={alias:null,args:null,concreteType:"IGThreadItemPlaceHolderSource",kind:"LinkedField",name:"ig_placeholder",plural:!1,selections:[Q,ja],storageKey:null},Up=[{kind:"Variable",name:"height",variableName:"height"},{kind:"Variable",name:"width",variableName:"width"}],Vp={alias:null,args:Up,concreteType:"Image",kind:"LinkedField",name:"image_source",plural:!1,selections:re,storageKey:null},Hp={alias:null,args:Up,concreteType:"IGThreadItemVideoSource",kind:"LinkedField",name:"video_source",plural:!1,selections:mo,storageKey:null},Gp={alias:null,args:null,kind:"ScalarField",name:"expiring_at",storageKey:null},zp=[gp,Dm,O,lt],jp={alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"media_owner",plural:!1,selections:zp,storageKey:null},Kp={alias:null,args:null,concreteType:"IGMessageThreadItemRavenMedia",kind:"LinkedField",name:"raven_media",plural:!1,selections:[Ip,{alias:null,args:null,kind:"ScalarField",name:"seen_user_ids",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"view_mode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seen_count",storageKey:null},{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"media",plural:!0,selections:[Vp,Hp,Gp],storageKey:null}],storageKey:null},Qp={alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"user",plural:!1,selections:zp,storageKey:null},Xp={alias:null,args:Up,concreteType:"Image",kind:"LinkedField",name:"image_source",plural:!1,selections:mo,storageKey:null},Yp={kind:"InlineFragment",selections:z,type:"IGMessageThreadItemMediaShare",abstractKey:null},Jp={alias:null,args:null,kind:"ScalarField",name:"story_type",storageKey:null},Zp={kind:"InlineFragment",selections:[Jp,G,K],type:"IGMessageThreadItemReelShare",abstractKey:null},e_={kind:"InlineFragment",selections:[Jp,ja,Q,G],type:"IGMessageThreadItemStoryShare",abstractKey:null},t_={kind:"InlineFragment",selections:[Q,G],type:"IGMessageThreadItemFelixShare",abstractKey:null},n_={kind:"InlineFragment",selections:[Q,He,G,{alias:null,args:null,kind:"ScalarField",name:"current_price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_price",storageKey:null},ne],type:"IGMessageThreadItemProductShare",abstractKey:null},r_={alias:null,args:null,kind:"ScalarField",name:"likes_count",storageKey:null},o_={alias:null,args:null,kind:"ScalarField",name:"emojis",storageKey:null},a_={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"media",plural:!0,selections:mo,storageKey:null},i_={alias:null,args:null,concreteType:"IGThreadItemActionLogSource",kind:"LinkedField",name:"action_log",plural:!1,selections:[Gt,{alias:null,args:null,concreteType:"IGThreadItemActionLogBoldSource",kind:"LinkedField",name:"bold",plural:!0,selections:ar,storageKey:null},{alias:null,args:null,concreteType:"IGThreadItemActionLogTextAttributesSource",kind:"LinkedField",name:"text_attributes",plural:!0,selections:[rr,or,Rt,{alias:null,args:null,kind:"ScalarField",name:"intent",storageKey:null}],storageKey:null}],storageKey:null},l_={alias:null,args:null,concreteType:"IGThreadItemLinkSource",kind:"LinkedField",name:"link_source",plural:!1,selections:[Wp,G,{alias:null,args:null,concreteType:"IGThreadItemLinkContextSource",kind:"LinkedField",name:"link_context",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"link_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_summary",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_image_url",storageKey:null}],storageKey:null}],storageKey:null},s_={alias:null,args:null,concreteType:"IGThreadItemVideoSource",kind:"LinkedField",name:"animated_media",plural:!1,selections:Da,storageKey:null},u_={alias:null,args:null,concreteType:"IGThreadItemVoiceMediaSource",kind:"LinkedField",name:"voice_media",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"audio_src",storageKey:null},at],storageKey:null},c_=[Ip,Xp],d_={alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"media",plural:!1,selections:c_,storageKey:null},m_={alias:null,args:null,concreteType:"IGMessageThreadItemHScrollShareItem",kind:"LinkedField",name:"hscroll_share",plural:!0,selections:[Q,He,ne,d_],storageKey:null},p_={alias:null,args:null,kind:"ScalarField",name:"header_title",storageKey:null},__={alias:null,args:null,kind:"ScalarField",name:"header_subtitle",storageKey:null},f_={alias:null,args:null,kind:"ScalarField",name:"header_icon_url",storageKey:null},g_={alias:null,args:null,concreteType:"IGMessageThreadItemCollectionShare",kind:"LinkedField",name:"shops_collection_share",plural:!1,selections:[p_,__,f_,Q,He,pn,d_],storageKey:null},h_={alias:null,args:null,concreteType:"IGMessageThreadItemAppointmentBooking",kind:"LinkedField",name:"appointment_booking",plural:!1,selections:[Q,{alias:null,args:null,kind:"ScalarField",name:"max_title_num_of_lines",storageKey:null},He,{alias:null,args:null,kind:"ScalarField",name:"max_subtitle_num_of_lines",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"header_title_text",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"header_icon_url_info",plural:!1,selections:mo,storageKey:null},d_,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"preview_extra_urls_info",plural:!0,selections:mo,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"preview_layout_type",storageKey:null},pn,{alias:null,args:null,concreteType:"IGXMAMessageCTAButton",kind:"LinkedField",name:"cta_buttons",plural:!0,selections:[X,Q],storageKey:null}],storageKey:null},y_={alias:null,args:null,concreteType:"IGMessageThreadItemShopShare",kind:"LinkedField",name:"shop_share",plural:!1,selections:[p_,__,f_,{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"medias",plural:!0,selections:c_,storageKey:null},pn],storageKey:null},C_={alias:null,args:null,concreteType:"IGMessageThreadItemGenericXMA",kind:"LinkedField",name:"generic_xma",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"xma_template_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"xma_layout_type",storageKey:null},Q,{alias:null,args:null,kind:"ScalarField",name:"sub_title",storageKey:null},{alias:null,args:null,concreteType:"GenericXMACTAButton",kind:"LinkedField",name:"cta_buttons",plural:!0,selections:[Q,X],storageKey:null},{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"preview_url_info",plural:!1,selections:c_,storageKey:null}],storageKey:null},b_={alias:null,args:null,kind:"ScalarField",name:"send_attribution",storageKey:null},v_={alias:null,args:null,concreteType:"IGMessageThreadItemRepliedToMessage",kind:"LinkedField",name:"replied_to_message",plural:!1,selections:[G,Ms,il,qd],storageKey:null},S_={alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},R_={alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null},L_={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[S_,R_],storageKey:null},E_=[{alias:null,args:null,concreteType:"InstagramMessageThreadItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[Cp,Wo,fd,Op,Bp,G,Wp,qp,{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"ig_thread_item_media",plural:!1,selections:[Ip,Vp,Hp,Gp,jp],storageKey:null},Kp,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"share",plural:!1,selections:[Qp,{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"media",plural:!0,selections:[Ip,Xp,Hp,Gp,jp],storageKey:null},Yp,Zp,e_,t_,n_],storageKey:null},{alias:null,args:null,concreteType:"IGThreadItemReactions",kind:"LinkedField",name:"ig_reaction",plural:!1,selections:[r_,{alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"likes",plural:!0,selections:hp,storageKey:null},o_],storageKey:null},{alias:null,args:Up,concreteType:"IGThreadItemProfileShareSource",kind:"LinkedField",name:"profileshare",plural:!1,selections:[Qp,a_],storageKey:null},i_,l_,s_,u_,m_,g_,h_,y_,C_,b_,v_],storageKey:null},L_],k_={alias:null,args:null,kind:"ScalarField",name:"selected_thread_type",storageKey:null},I_=[{kind:"Variable",name:"after",variableName:"item_after"},{kind:"Variable",name:"first",variableName:"item_limit"}],T_=[{kind:"Variable",name:"before_time_precise",variableName:"before"},{kind:"Variable",name:"last",variableName:"message_limit"}],D_={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_previous_page",storageKey:null}],storageKey:null},x_={condition:"load_delivery_receipts",kind:"Condition",passingValue:!0,selections:pp},$_={kind:"Variable",name:"page_id",variableName:"page_id"},P_=[$_],N_={alias:null,args:null,kind:"ScalarField",name:"business_id",storageKey:null},M_={kind:"RootArgument",name:"page_id"},w_={kind:"Variable",name:"business_assets",variableName:"businessAssets"},A_={condition:"getShouldUnifyConfigQueries",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBBizInboxSelectedThread",kind:"LinkedField",name:"selected_thread",plural:!1,selections:[{alias:null,args:[w_,$_],concreteType:"BizInboxFeatureConfigWrapper",kind:"LinkedField",name:"selected_thread_biz_inbox_feature_config",plural:!1,selections:[{alias:null,args:null,concreteType:"BizInboxGatingConfig",kind:"LinkedField",name:"gating_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"show_commerce_invoice_button_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_product_picker_button_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_send_availability_button_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_create_appointment_button_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_customer_feedback_button_on_move_to_done",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_form_builder_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_send_inthread_forms_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_marketing_messages_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"marketing_messages_in_composer_state",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_gcash_id_share_and_copy_button",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_calling_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_calling_live_in_composer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_biz_ai_in_composer",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizInboxCommerceInvoiceButtonConfig",kind:"LinkedField",name:"commerce_invoice_button_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"show_confirm_payment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_payment_onboarding",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_request_payment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commerce_invoice_button_icon",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},F_=[yp],O_={alias:"xfb_unified_thread_list_pending",args:[{kind:"Variable",name:"msgr_params",variableName:"msgr_pending_params"},{kind:"Variable",name:"wa_params",variableName:"wa_pending_params"}],concreteType:"XFBBizInboxUnifiedThreadList",kind:"LinkedField",name:"xfb_biz_inbox_unified_thread_list",plural:!1,selections:[{condition:"isWorkUser",kind:"Condition",passingValue:!1,selections:[{alias:"wa_pending_threads",args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"wa_threads",plural:!1,selections:F_,storageKey:null},{alias:"msg_pending_threads",args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"msgr_threads",plural:!1,selections:F_,storageKey:null}]}],storageKey:null},B_={alias:null,args:P_,concreteType:"BizCRMContactCardConfig",kind:"LinkedField",name:"selected_biz_crm_contact_card_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_add_activities",storageKey:null}],storageKey:null},W_=[w_],q_=[Ze,w],U_={kind:"InlineFragment",selections:q,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},V_={kind:"InlineFragment",selections:q,type:"GenericAttachmentMedia",abstractKey:null},H_={kind:"InlineFragment",selections:q,type:"MontageImage",abstractKey:null},G_={kind:"InlineFragment",selections:q,type:"MontageVideo",abstractKey:null},z_={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[Ze,ue,de,_e,fe,ge,he,_l,U_,V_,H_,G_],storageKey:null},j_={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_links",plural:!0,selections:[Ze,Q,ae],storageKey:null},K_={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_objects",plural:!0,selections:[Ze,w,{kind:"InlineFragment",selections:[xe,$e,Pe,Ne],type:"MessengerPlatformEntPreview",abstractKey:"__isMessengerPlatformEntPreview"}],storageKey:null},Q_={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"cta_data",plural:!1,selections:[Ze,je,Ke],storageKey:null},X_={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"messenger_call_to_actions",plural:!0,selections:[Te,De,K_,we,Ae,w,Fe,Oe,Be,We,qe,Ue,Q_,Xe,Y],storageKey:null},Y_=[Ze,{kind:"TypeDiscriminator",abstractKey:"__isPaymentActivityAction"},mt,pt,_t,Q,gt,{kind:"InlineFragment",selections:[{alias:"moneyTransfer",args:null,concreteType:null,kind:"LinkedField",name:"generic_money_transfer",plural:!1,selections:[Ze,it,ut,ct,bt,w],storageKey:null}],type:"P2PPaymentActionButtonWithTransfer",abstractKey:null}],J_={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"P2PBubbleView",kind:"LinkedField",name:"bubble_view",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actions",plural:!0,selections:Y_,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"components",plural:!0,selections:[Ze,St,Lt,kt,It],storageKey:null},{alias:null,args:null,concreteType:"P2PBubbleRobotext",kind:"LinkedField",name:"robotext",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action",plural:!1,selections:Y_,storageKey:null},Rt,Tt,G],storageKey:null},{alias:"rootAction",args:null,concreteType:null,kind:"LinkedField",name:"root_action",plural:!1,selections:Y_,storageKey:null}],storageKey:null}],type:"PaymentViewData",abstractKey:"__isPaymentViewData"},Z_={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"receiver_profile",plural:!1,selections:[Ze,w,O,lt,$t],storageKey:null},ef=[Ft,w],tf={alias:null,args:null,concreteType:"PeerToPeerTransferContext",kind:"LinkedField",name:"transfer_context",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageImage",kind:"LinkedField",name:"memo_images",plural:!0,selections:ef,storageKey:null},Bt,w],storageKey:null},nf={alias:null,args:null,concreteType:"PeerToPeerPlatformSoldItemDetail",kind:"LinkedField",name:"platform_item",plural:!1,selections:[O,Gt,{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photos",plural:!0,selections:ef,storageKey:null},ae,w],storageKey:null},rf=[Ze,O,w,lt,$t],of={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"requester",plural:!1,selections:rf,storageKey:null},af={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"requestee",plural:!1,selections:rf,storageKey:null},lf={alias:null,args:null,concreteType:"PeerToPeerTransfer",kind:"LinkedField",name:"transfer",plural:!1,selections:[ut,Z_,Pt,Nt,it,Mt,wt,At,tf,Ut,Vt,Ht,nf,w,zt,jt,Kt,J_],storageKey:null},sf=[Te,De,K_,we,Ae,w,Fe,Oe,Be,We,qe,Ue,Q_],uf={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"call_to_actions",plural:!0,selections:sf,storageKey:null},cf={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"default_action",plural:!1,selections:sf,storageKey:null},df=[{alias:null,args:null,concreteType:"MessengerRetailItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,Gt,cn,Ne,dn,O,mn,pn,cf,uf,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_blob_attachments",plural:!0,selections:[Ze,gn,hn,vn,In,Tn,_l,U_,V_,H_,G_],storageKey:null}],storageKey:null}],mf=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[Ze,w,O],storageKey:null},w],pf={alias:"primary_photo",args:null,concreteType:null,kind:"LinkedField",name:"primary_listing_photo",plural:!1,selections:[Ze,ua,w],storageKey:null},_f={alias:null,args:null,concreteType:"RetailShipmentItemsConnection",kind:"LinkedField",name:"retail_shipment_items",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerRetailItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,O,Qr,Xr,Yr,Jr,cn,dn,Zr,eo,uf],storageKey:null}],storageKey:null},ff=[O,w],gf={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[Ze,ge,Ni,_l,U_,V_,H_,G_],storageKey:null},hf={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[Ze,Ft,_l,U_,V_,H_,G_],storageKey:null},yf={alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:ef,storageKey:null},Cf={alias:null,args:null,concreteType:"FocusedPhoto",kind:"LinkedField",name:"cover_photo",plural:!1,selections:[yf],storageKey:null},bf={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"group_general_chat",plural:!1,selections:q_,storageKey:null},vf={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[Ze,w,et,{kind:"InlineFragment",selections:[tt,he,nt,rt,ot,at],type:"WECMessageAudio",abstractKey:null},{kind:"InlineFragment",selections:[it,ut,ct,J_],type:"MoneyTransfer",abstractKey:null},{kind:"InlineFragment",selections:[ut,Z_,Pt,Nt,it,Mt,wt,At,tf,Ut,Vt,Ht,nf,zt,jt,Kt,J_],type:"PeerToPeerTransfer",abstractKey:null},{kind:"InlineFragment",selections:[Xt,Yt,of,af,tn,nn,Kt,lf,on,Ht,an,zt,{alias:null,args:null,concreteType:"PeerToPeerPaymentRequest",kind:"LinkedField",name:"individual_requests",plural:!0,selections:[Xt,Yt,of,af,tn,nn,w,Kt,lf,on,Ht,an,zt,J_],storageKey:null},J_],type:"PeerToPeerPaymentRequest",abstractKey:null},J_,{kind:"InlineFragment",selections:[ln,uf,{alias:null,args:null,concreteType:"RetailPromotionItemsConnection",kind:"LinkedField",name:"promotion_items",plural:!1,selections:df,storageKey:null}],type:"MessengerRetailPromotion",abstractKey:null},{kind:"InlineFragment",selections:[ln,uf,{alias:null,args:null,concreteType:"MessengerBusinessMessageItemsConnection",kind:"LinkedField",name:"business_items",plural:!1,selections:df,storageKey:null}],type:"MessengerBusinessMessage",abstractKey:null},xn,wn,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"invite_sender",plural:!1,selections:q_,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"invite_recipient",plural:!1,selections:q_,storageKey:null}],type:"QuickInvite",abstractKey:null},{kind:"InlineFragment",selections:[An,Fn,On,Bn,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_media",plural:!1,selections:[Ze,qn,Un,_l],storageKey:null}],type:"MontageDirect",abstractKey:null},{kind:"InlineFragment",selections:[Vn,W,Hn],type:"MontageShare",abstractKey:null},{kind:"InlineFragment",selections:[zn,jn,Kn,Qn,Xn,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"native_component_flow_request",plural:!1,selections:[Ze,w,{kind:"InlineFragment",selections:[Yn,Jn,Zn,Gn,er,nr,ir,{alias:null,args:null,concreteType:"NativeComponentFlowBookingRequestServicesProductItemsConnection",kind:"LinkedField",name:"services_product_items",plural:!1,selections:[{alias:null,args:null,concreteType:"ServicesProductItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,O,Gt,lr,sr,{alias:null,args:ur,concreteType:"ProductImage",kind:"LinkedField",name:"images",plural:!0,selections:[cr,w],storageKey:"images(first:1)"},dr],storageKey:null}],storageKey:null},mr,pr,_r,fr,gr,hr,yr,Cr,br,vr,Sr,Qn,Xn,Rr],type:"NativeComponentFlowBookingRequest",abstractKey:null}],storageKey:null}],type:"PagesPlatformBookingMessage",abstractKey:null},{kind:"InlineFragment",selections:[Lr,Er,kr,Ir],type:"ServicesAppointmentAvailability",abstractKey:null},{kind:"InlineFragment",selections:[Tr,Dr,xr,$r,Pr,Nr],type:"ServicesGenericAdminText",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"genie_sender",plural:!1,selections:mf,storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[j,Z,z_,Ce,be,ve,Re,Le,Ee,j_,Ie,X_,Je],storageKey:null}],type:"GenieMessage",abstractKey:null},{kind:"InlineFragment",selections:[Ar,Fr,Or,Br,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"event_place",plural:!1,selections:[Ze,O,_l],storageKey:null},qr,Ur,Vr,Hr,Gr,O,zr],type:"Event",abstractKey:null},jr,Kr,{kind:"InlineFragment",selections:[O,Qr,Xr,Yr,Jr,cn,dn,Zr,eo,cf,uf],type:"MessengerRetailItem",abstractKey:null},{kind:"InlineFragment",selections:[Qr,to,no,pn,Xr,ro,oo,ao,io,O],type:"AgentItemSuggestion",abstractKey:null},{kind:"InlineFragment",selections:[lo,so,uo,co,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"FundraiserCoverPhoto",kind:"LinkedField",name:"focused_cover_photo",plural:!1,selections:[{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:[po,w],storageKey:null}],storageKey:null}],type:"FundraiserWithPresence",abstractKey:"__isFundraiserWithPresence"}],type:"Fundraiser",abstractKey:"__isFundraiser"},{kind:"InlineFragment",selections:[_o,fo,go,ho,yo,Co,bo,vo,So,To,fr,Do,xo,$o,Po,{alias:null,args:null,concreteType:"RetailReceiptItemsConnection",kind:"LinkedField",name:"retail_items",plural:!1,selections:df,storageKey:null},No,Mo,wo,Ao],type:"MessengerRetailReceipt",abstractKey:null},{kind:"InlineFragment",selections:[Fo,Oo,Bo,{alias:null,args:null,concreteType:"PaymentInvoiceProduct",kind:"LinkedField",name:"item_list",plural:!0,selections:[Wo,O,qo,Gt,Vo,Ho,Go,w],storageKey:null},zo,Ko,Qo,Xo,Yo,Jo,Zo,ea,ta,na,ra,oa,aa],type:"PaymentPlatformAttachment",abstractKey:null},{kind:"InlineFragment",selections:[ia,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"group_commerce_item_seller",plural:!1,selections:q_,storageKey:null},la,sa,pf,ae],type:"GroupCommerceProductItem",abstractKey:null},{kind:"InlineFragment",selections:[la,pf],type:"MarketplaceListingRenderable",abstractKey:"__isMarketplaceListingRenderable"},{kind:"InlineFragment",selections:[da,ma,pa,_a,O,fa,ga],type:"Page",abstractKey:null},Ca,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessengerRetailShipment",kind:"LinkedField",name:"shipment",plural:!1,selections:[w,ba,va,Sa,Ea,ka,_f,$a,Na],storageKey:null},Ma,wa,Pa,Aa,No],type:"MessengerRetailShipmentTrackingEvent",abstractKey:null},{kind:"InlineFragment",selections:[ba,va,Sa,Ea,ka,_f,Fa,Oa,{alias:null,args:null,concreteType:"MessengerRetailReceipt",kind:"LinkedField",name:"receipt",plural:!1,selections:[ho,w],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"recipient",plural:!1,selections:ff,storageKey:null},No],type:"MessengerRetailShipment",abstractKey:null},{kind:"InlineFragment",selections:[Ba,Wa,O,qa],type:"LeadGenDeepLinkData",abstractKey:null},{kind:"InlineFragment",selections:[Ua],type:"UserLeadGenInfo",abstractKey:null},Ha,{kind:"InlineFragment",selections:[O,Ga,ne,rt,ot],type:"WECMessageFile",abstractKey:null},{kind:"InlineFragment",selections:[he,nt,rt,ot,tt,ie,za,le],type:"WECMessageVideo",abstractKey:null},Qa,{kind:"InlineFragment",selections:[rt,Za,ni],type:"WECMessageImage",abstractKey:null},{kind:"InlineFragment",selections:[ri,oi,ai,ii,li,si,ui],type:"MentorshipMessengerCurriculumStep",abstractKey:null},{kind:"InlineFragment",selections:[ci],type:"MentorshipMessengerDiscussionTopicSet",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MentorshipProgram",kind:"LinkedField",name:"mentorship_program",plural:!1,selections:[w,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"other_member",plural:!1,selections:[Ze,xt,w],storageKey:null}],storageKey:null},mi],type:"MentorshipMessengerLeavePrompt",abstractKey:null},{kind:"InlineFragment",selections:[mi],type:"MentorshipMessengerReminder",abstractKey:null},{kind:"InlineFragment",selections:[mi,pi,_i],type:"MentorshipMessengerProgressTracker",abstractKey:null},{kind:"InlineFragment",selections:[gi,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message_richtext",plural:!0,selections:[Ze,hi,yi,Ci,{alias:null,args:null,concreteType:"ComposedEntityAtRange",kind:"LinkedField",name:"entity_ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[Ze,_l],storageKey:null},Ge,fi],storageKey:null},bi,G],storageKey:null},{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[vi,Si,Ri,{alias:null,args:Ei,concreteType:"TopReactionsConnection",kind:"LinkedField",name:"top_reactions",plural:!1,selections:[{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"nodes",plural:!0,selections:[ki,w],storageKey:null}],storageKey:'top_reactions(first:3,orderby:["COUNT_DESC","REACTION_TYPE"])'},w],storageKey:null},Ii,on,Ti,Pi,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"to",plural:!1,selections:[Ze,O,Di,$i,w],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[be,ae,Ce,j,gf,wi,{alias:null,args:Ai,concreteType:"SubattachmentsConnection",kind:"LinkedField",name:"all_subattachments",plural:!1,selections:[Fi,{alias:"files",args:Oi,concreteType:"StoryAttachment",kind:"LinkedField",name:"nodes",plural:!0,selections:[wi,hf],storageKey:'nodes(if_style:"file_upload")'},{alias:"images",args:Wi,concreteType:"StoryAttachment",kind:"LinkedField",name:"nodes",plural:!0,selections:[hf],storageKey:'nodes(if_style:"photo")'}],storageKey:"all_subattachments(first:3)"}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"attached_story",plural:!1,selections:[qi,Ui,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[gf],storageKey:null},w],storageKey:null}],type:"Story",abstractKey:null},{kind:"InlineFragment",selections:[O,lt,Cf,zi,ji],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[O,Ki,Qi,Xi,Cf,bf,{alias:null,args:null,concreteType:"GroupsSyncMetadata",kind:"LinkedField",name:"work_groups_sync_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messenger_group",plural:!1,selections:q_,storageKey:null}],storageKey:null}],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:[Ji,Zi,el,{alias:null,args:null,concreteType:"AppIntegration",kind:"LinkedField",name:"app_integration",plural:!1,selections:[tl,O,nl,rl,w],storageKey:null},ol,al,{alias:null,args:null,concreteType:"AppContentAdditionalData",kind:"LinkedField",name:"link_preview_additional_data",plural:!0,selections:[Q,G,Rt,ze,il,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"profiles",plural:!0,selections:[lt,O,w],storageKey:null}],storageKey:null}],type:"AppContent",abstractKey:null},{kind:"InlineFragment",selections:[cf],type:"CommerceProductItemShare",abstractKey:null},{kind:"InlineFragment",selections:[ll],type:"ApplicationReferralXMA",abstractKey:null},ul,{kind:"InlineFragment",selections:[cl],type:"XFBP2MXMA",abstractKey:null},dl],storageKey:null},Sf={alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[j,Z,z_,Ce,be,ve,Re,Le,Ee,j_,Ie,X_,Je,vf,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"subattachments",plural:!0,selections:[j,Z,z_,Ce,be,ve,Re,Le,Ee,j_,Ie,X_,Je,vf],storageKey:null}],storageKey:null},Rf={alias:null,args:null,concreteType:"ExtensibleMessageAttachment",kind:"LinkedField",name:"extensible_attachment",plural:!1,selections:[H,Sf,{alias:"genie_attachment",args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[{alias:"genie_message",args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[Ze,w,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"genie_sender",plural:!1,selections:[w,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[Ze,O,w,{kind:"TypeDiscriminator",abstractKey:"__isNode"}],storageKey:null}],storageKey:null},Sf],type:"GenieMessage",abstractKey:null}],storageKey:null}],storageKey:null},w],storageKey:null},Lf=[Ze,{kind:"TypeDiscriminator",abstractKey:"__isMessageBlobAttachment"},Cl,bl,Sl,In,Ll,_l],Ef={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_attachments",plural:!0,selections:Lf,storageKey:null},kf={alias:"last_message",args:B,concreteType:"MessagesOfThreadConnection",kind:"LinkedField",name:"messages",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[Ze,W,{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"message_sender",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:q_,storageKey:null},w],storageKey:null},U,V,xl,$l,w,{kind:"InlineFragment",selections:[Rf,gl,Ef],type:"UserMessage",abstractKey:null},{kind:"InlineFragment",selections:[Il,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"extensible_message_admin_text",plural:!1,selections:[Ze,Dl],storageKey:null}],type:"GenericAdminTextMessage",abstractKey:null}],storageKey:null}],storageKey:"messages(last:1)"},If={alias:null,args:null,concreteType:"JobApplicationsFromThreadConnection",kind:"LinkedField",name:"thread_associated_job_applications",plural:!1,selections:[{alias:null,args:null,concreteType:"JobApplication",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,{alias:null,args:null,concreteType:"JobOpening",kind:"LinkedField",name:"job_opening",plural:!1,selections:[Ml,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"employer",plural:!1,selections:[wl,Al,w],storageKey:null},w],storageKey:null}],storageKey:null}],storageKey:null},Tf={alias:null,args:null,concreteType:"MessageThreadCustomization",kind:"LinkedField",name:"customization_info",plural:!1,selections:[os,ls,ss,w],storageKey:null},Df={alias:null,args:null,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"thread_theme",plural:!1,selections:[w,cs,ds,ms,ps,{alias:null,args:null,concreteType:"MessengerReactionPack",kind:"LinkedField",name:"reaction_pack",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerReactionPackReactionAssetsConnection",kind:"LinkedField",name:"reaction_assets",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerReactionAsset",kind:"LinkedField",name:"nodes",plural:!0,selections:[_s,fs,gs,hs,w],storageKey:null}],storageKey:null},w],storageKey:null}],storageKey:null},xf={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"thread_admins",plural:!0,selections:q_,storageKey:null},$f={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"thread_queue_metadata",plural:!1,selections:[Ze,Ls,w],storageKey:null},Pf={alias:null,args:ur,concreteType:"MessengerEventRemindersOfThreadConnection",kind:"LinkedField",name:"event_reminders",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerEventReminder",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,ks,ya,Is,Ts,Ds,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"location_page",plural:!1,selections:[xs,w],storageKey:null},$s,Ps,Ns,ha,{alias:null,args:null,concreteType:"UserMessage",kind:"LinkedField",name:"trigger_message",plural:!1,selections:[Ms,w],storageKey:null},ws,As,Fs,Os],storageKey:null}],storageKey:"event_reminders(first:1)"},Nf={alias:null,args:null,concreteType:"PageMessageThread",kind:"LinkedField",name:"related_page_thread",plural:!1,selections:[Vs,Lr,Ks,Xs,Zs,w],storageKey:null},Mf={alias:null,args:null,concreteType:"RtcCallData",kind:"LinkedField",name:"rtc_call_data",plural:!1,selections:[tu,nu,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"initiator",plural:!1,selections:q_,storageKey:null}],storageKey:null},wf={alias:null,args:null,concreteType:"MarketplaceThreadData",kind:"LinkedField",name:"marketplace_thread_data",plural:!1,selections:[{alias:null,args:null,concreteType:"GroupCommerceProductItem",kind:"LinkedField",name:"for_sale_item",plural:!1,selections:[w,Hn,sa,la,ou,au,iu,lu,su,uu,cu,{alias:"primary_photo",args:null,concreteType:null,kind:"LinkedField",name:"primary_listing_photo",plural:!1,selections:[Ze,Ft,w],storageKey:null},du,mu],storageKey:null},pu,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"buyer",plural:!1,selections:q_,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"seller",plural:!1,selections:[Ze,w,fu],storageKey:null},hu],storageKey:null},Af={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"associated_object",plural:!1,selections:[Ze,w,{kind:"InlineFragment",selections:[Cu,O,lt,bf,bu,vu,Su,Ru,Eu,ku],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:[Cu,O,lt,bu,vu,Su,zr,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"event_place",plural:!1,selections:[Ze,Iu,_l],storageKey:null}],type:"Event",abstractKey:null}],storageKey:null},Ff={alias:null,args:null,concreteType:"PageCommItem",kind:"LinkedField",name:"page_comm_item",plural:!1,selections:[w,Fu,Ou,Bu,Wu,qu,Hu,Gu,{alias:null,args:null,concreteType:"PageCommItemToPageCommItemOwnersConnection",kind:"LinkedField",name:"comm_item_owners",plural:!1,selections:[{alias:null,args:null,concreteType:"PageCommItemOwner",kind:"LinkedField",name:"nodes",plural:!0,selections:[ju,w],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"subtitle",plural:!1,selections:[{alias:null,args:null,concreteType:"ImageAtRange",kind:"LinkedField",name:"image_ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity_with_image",plural:!1,selections:[Ze,Ft,_l,{kind:"InlineFragment",selections:q,type:"CatalogMarketplaceEnhancementTransformedImage",abstractKey:null},{kind:"InlineFragment",selections:q,type:"XFBBasicMarketplaceImage",abstractKey:null}],storageKey:null},Ge,fi],storageKey:null},bi,G],storageKey:null},Ku],storageKey:null},Of={alias:null,args:null,concreteType:"GroupsSyncMetadata",kind:"LinkedField",name:"groups_sync_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"fb_group",plural:!1,selections:[ae,w],storageKey:null}],storageKey:null},Bf={kind:"TypeDiscriminator",abstractKey:"__isMessage"},Wf={alias:null,args:null,concreteType:"MessageReaction",kind:"LinkedField",name:"message_reactions",plural:!0,selections:[mc,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"user",plural:!1,selections:q_,storageKey:null}],storageKey:null},qf={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"unsender",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[Ze,w,O,Di],storageKey:null},w],storageKey:null},Uf={kind:"InlineFragment",selections:[hc,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:[G,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[Ge,fi,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[Ze,yc,Cc,bc,_l],storageKey:null},vc],storageKey:null}],storageKey:null},Sc,Rf,gl,Ef,Rc],type:"UserMessage",abstractKey:null},Vf=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:Lf,storageKey:null}],Hf={kind:"InlineFragment",selections:[Ec,W,{alias:null,args:null,concreteType:"VideoCallMessageToCaptureAttachmentsConnection",kind:"LinkedField",name:"call_capture_attachments",plural:!1,selections:[Fi,{alias:null,args:null,concreteType:"VideoCallMessageToCaptureAttachmentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:Vf,storageKey:null}],storageKey:null}],type:"VideoCallMessage",abstractKey:null},Gf={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"MessageImage",kind:"LinkedField",name:"image_with_metadata",plural:!1,selections:[xc,H,kn,w],storageKey:null},W],type:"ThreadImageMessage",abstractKey:null},zf={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"extensible_message_admin_text",plural:!1,selections:[Ze,wc,Bc,Wc,qc,Uc,Vc,Hc,Gc,zc,Kc,Qc,Xc,Yc,Jc,Zc,td,{kind:"InlineFragment",selections:[Tl,nd,rd,od,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"instant_game_update_data",plural:!1,selections:[Ze,{kind:"InlineFragment",selections:[ad,sl,yf,id],type:"InstantGameXMATCustomMessageClientData",abstractKey:null}],storageKey:null},ld],type:"InstantGameUpdateExtensibleMessageAdminText",abstractKey:null},sd,ud,_d,gd,hd,Cd,bd,vd,Sd,Rd,Ld,kd,Id,Td,xd,$d,Pd,{kind:"InlineFragment",selections:[Nd,Md,wd,ed,Ad,Fd,Od,Bd,{alias:null,args:null,concreteType:"MessengerCallLogExtensibleMessageAdminTextCallCaptureAttachmentsConnection",kind:"LinkedField",name:"call_capture_attachments",plural:!1,selections:[Fi,{alias:null,args:null,concreteType:"MessengerCallLogExtensibleMessageAdminTextCallCaptureAttachmentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:Vf,storageKey:null}],storageKey:null}],type:"MessengerCallLogExtensibleMessageAdminText",abstractKey:null},Wd,Hd,Gd,jd,Kd,Qd,Xd,Yd,Zd,em,tm,nm,rm],storageKey:null},Il,W],type:"GenericAdminTextMessage",abstractKey:null},jf=[Ze,Bf,ec,Ms,tc,rc,oc,U,ac,ic,Ka,lc,V,sc,uc,xl,cc,dc,Wf,_c,qf,gc,$l,{alias:null,args:null,concreteType:"RepliedToMessage",kind:"LinkedField",name:"replied_to_message",plural:!1,selections:[fr,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message",plural:!1,selections:[Ze,Bf,ec,Ms,tc,rc,oc,U,ac,ic,Ka,lc,V,sc,uc,xl,cc,dc,Wf,_c,qf,gc,$l,w,Uf,kc,Hf,Dc,Gf,Pc,Nc,zf,im,lm],storageKey:null}],storageKey:null},w,Uf,kc,Hf,Dc,Gf,Pc,Nc,zf,im,lm],Kf={alias:null,args:null,concreteType:"PinnedMessageData",kind:"LinkedField",name:"pinned_messages",plural:!0,selections:[Ms,Zu,{condition:"threadlistViewFieldsOnly",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message",plural:!1,selections:jf,storageKey:null}]}],storageKey:null},Qf={alias:null,args:null,concreteType:"GroupsSyncMetadata",kind:"LinkedField",name:"work_groups_sync_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"fb_group",plural:!1,selections:[ae,w,O,Ki,cm,lt,Eu,{alias:null,args:null,concreteType:"MultiBackgroundIcon",kind:"LinkedField",name:"group_icon",plural:!1,selections:[dm,w],storageKey:null}],storageKey:null}],storageKey:null},Xf={alias:null,args:ur,concreteType:"MessengerMentorshipProgramOfThreadConnection",kind:"LinkedField",name:"linked_mentorship_programs",plural:!1,selections:[{alias:null,args:null,concreteType:"MentorshipProgram",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,gm,hm,{alias:null,args:ur,concreteType:"MentorshipProgramToMentorshipMessengerCurriculumStepOrderByStepCountConnection",kind:"LinkedField",name:"messenger_curriculum_steps",plural:!1,selections:[{alias:null,args:null,concreteType:"MentorshipMessengerCurriculumStep",kind:"LinkedField",name:"nodes",plural:!0,selections:[ym,Cm,w],storageKey:null}],storageKey:"messenger_curriculum_steps(first:1)"}],storageKey:null}],storageKey:"linked_mentorship_programs(first:1)"},Yf={alias:null,args:null,concreteType:"WorkUserInfo",kind:"LinkedField",name:"work_info",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"work_community",plural:!1,selections:ff,storageKey:null},Gi],storageKey:null},Jf={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"nodes",plural:!0,selections:mf,storageKey:null},Zf={alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadConnection",kind:"LinkedField",name:"all_participants",plural:!1,selections:[{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[km,{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[Ze,{kind:"TypeDiscriminator",abstractKey:"__isMessagingActor"},w,O,{kind:"InlineFragment",selections:[Im,ae,Tm,xt,Dm,xm,$m,Pm,Nm,Mm,wm,Am,Fm,Yf],type:"User",abstractKey:null},Bm,Wm,Um,Vm,Gm,zm,jm,{kind:"InlineFragment",selections:[ae,Tm,Dm,Km,Pm,Yf],type:"ReducedMessagingActor",abstractKey:null},Xm,Ym,Jm,ep,tp,np,rp,op,ap,{kind:"InlineFragment",selections:[Tm,ip,lp,{alias:null,args:null,concreteType:"WECGroupParticipantsConnection",kind:"LinkedField",name:"wec_group_participants",plural:!1,selections:[Jf,Fi],storageKey:null},{alias:null,args:null,concreteType:"WECGroupAdminsConnection",kind:"LinkedField",name:"wec_group_admins",plural:!1,selections:[Jf],storageKey:null}],type:"WECGroupRecipient",abstractKey:null}],storageKey:null},w],storageKey:null}],storageKey:null}],storageKey:null},eg={alias:null,args:null,concreteType:"MessagingReadReceiptsOfThreadConnection",kind:"LinkedField",name:"read_receipts",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagingReadReceipt",kind:"LinkedField",name:"nodes",plural:!0,selections:[cp,dp,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:q_,storageKey:null}],storageKey:null}],storageKey:null},tg={condition:"threadlistViewFieldsOnly",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"saved_messages",plural:!0,selections:jf,storageKey:null}]},ng=[{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"nodes",plural:!0,selections:[w,F,O,kf,Nl,If,Ol,Bl,ql,Ul,Ft,Vl,Hl,Gl,zl,jl,Kl,Ql,Xl,Yl,Jl,Zl,es,ts,ns,rs,Tf,Df,xf,bs,vs,Ss,$f,Pf,Ws,Us,Nf,Mf,wf,Af,vu,Du,xu,$u,Pu,Nu,Mu,wu,Au,Ff,Xu,Yu,Of,Kf,Qf,Gt,_m,fm,Xf,vm,Sm,Rm,Lm,Em,Zf,eg,Wl,tg,_p],storageKey:null},M],rg=[gp,lt,w],og=[gp,Dm,O,lt,w],ag={alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"media_owner",plural:!1,selections:og,storageKey:null},ig={alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"user",plural:!1,selections:og,storageKey:null},lg=[{alias:null,args:null,concreteType:"InstagramMessageThreadItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[Cp,Wo,fd,Op,Bp,G,Wp,qp,{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"ig_thread_item_media",plural:!1,selections:[Ip,Vp,Hp,Gp,ag],storageKey:null},Kp,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"share",plural:!1,selections:[Ze,ig,{alias:null,args:null,concreteType:"IGMessageThreadItemMedia",kind:"LinkedField",name:"media",plural:!0,selections:[Ip,Xp,Hp,Gp,ag],storageKey:null},Yp,Zp,e_,t_,n_],storageKey:null},{alias:null,args:null,concreteType:"IGThreadItemReactions",kind:"LinkedField",name:"ig_reaction",plural:!1,selections:[r_,{alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"likes",plural:!0,selections:rg,storageKey:null},o_],storageKey:null},{alias:null,args:Up,concreteType:"IGThreadItemProfileShareSource",kind:"LinkedField",name:"profileshare",plural:!1,selections:[ig,a_],storageKey:null},i_,l_,s_,u_,m_,g_,h_,y_,C_,b_,v_,w],storageKey:null},L_],sg={alias:null,args:null,kind:"ScalarField",name:"page_contact_id",storageKey:null},ug=[{kind:"Literal",name:"height",value:52},{kind:"Literal",name:"width",value:52}],cg=[{kind:"Literal",name:"first",value:20}],dg={alias:null,args:null,kind:"ScalarField",name:"contact_count",storageKey:null},mg={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},pg={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]},_g={alias:null,args:null,kind:"ScalarField",name:"unit_type",storageKey:null},fg=[{kind:"Literal",name:"first",value:4},{kind:"Literal",name:"message_shared_media_type",value:"PHOTO_AND_VIDEO"}],gg={alias:"fbid",args:null,kind:"ScalarField",name:"legacy_attachment_id",storageKey:null},hg={alias:"dim",args:null,concreteType:"Vect2",kind:"LinkedField",name:"original_dimensions",plural:!1,selections:En,storageKey:null},yg={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[R_,S_],storageKey:null},Cg=[{kind:"Literal",name:"first",value:400}],bg={alias:null,args:null,kind:"ScalarField",name:"is_custom_event_reportable",storageKey:null},vg={alias:null,args:null,kind:"ScalarField",name:"is_synced_with_smb",storageKey:null},Sg={alias:null,args:null,kind:"ScalarField",name:"has_wa_contact",storageKey:null},Rg=[{kind:"Literal",name:"first",value:2}],Lg=[{alias:null,args:null,kind:"ScalarField",name:"nux_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nux_content_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nux_ui_type",storageKey:null}],Eg=[{alias:null,args:null,kind:"ScalarField",name:"passes_gk",storageKey:null}],kg={alias:null,args:[{kind:"Literal",name:"tab",value:"data_sharing"}],kind:"ScalarField",name:"settings_uri_in_business_view",storageKey:'settings_uri_in_business_view(tab:"data_sharing")'},Ig={alias:null,args:null,kind:"ScalarField",name:"__token",storageKey:null},Tg=[{kind:"Literal",name:"first",value:5},{kind:"Literal",name:"types",value:["BUSINESS_ORDER"]}],Dg={alias:null,args:null,kind:"ScalarField",name:"is_auto_detected",storageKey:null},xg={alias:null,args:null,kind:"ScalarField",name:"should_show_automated_activity_redesigned_nux",storageKey:null},$g={alias:null,args:null,kind:"ScalarField",name:"is_classic_page",storageKey:null},Pg={alias:null,args:null,kind:"ScalarField",name:"is_detected_outcomes_label",storageKey:null},Ng={alias:null,args:Cg,concreteType:"CustomLabelsConnection",kind:"LinkedField",name:"custom_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"CustomLabelsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCustomLabel",kind:"LinkedField",name:"node",plural:!1,selections:[w,O,Hs,dg,Gs,zs,js,bg,Pg,vg,Sg,{alias:null,args:null,kind:"ScalarField",name:"is_immutable",storageKey:null},Ze],storageKey:null},mg],storageKey:null},L_],storageKey:"custom_labels(first:400)"},Mg={alias:null,args:Cg,filters:null,handle:"connection",key:"BizKitContextCardLabelsSection_custom_labels",kind:"LinkedHandle",name:"custom_labels"},wg={alias:null,args:Cg,filters:null,handle:"connection",key:"BizKitContextCardLabelsSection_corp_labels",kind:"LinkedHandle",name:"corp_labels"},Ag={alias:null,args:null,concreteType:"BusinessPresenceNode",kind:"LinkedField",name:"business_presence_node",plural:!1,selections:q,storageKey:null},Fg=[{kind:"Literal",name:"gk_name",value:"mcom_kbank_integration_rollout"}],Og=[{alias:"passes",args:null,kind:"ScalarField",name:"passes_gk",storageKey:null}],Bg=[{kind:"Literal",name:"gk_name",value:"ctm_www_tas_order_integration_gk"}],Wg=[{alias:"is_order_integration_enabled",args:null,kind:"ScalarField",name:"passes_gk",storageKey:null}],qg=[{kind:"Literal",name:"gk_name",value:"ctm_www_tas_timeline_actions_gk"}],Ug=[{alias:"showTimelineActions",args:null,kind:"ScalarField",name:"passes_gk",storageKey:null}];return{fragment:{argumentDefinitions:[e,t,n,r,o,a,i,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x],kind:"Fragment",metadata:null,name:"BizInboxUnifiedThreadsQuery",selections:[$,{alias:null,args:P,concreteType:"XFBBizInboxUnifiedThreadList",kind:"LinkedField",name:"xfb_biz_inbox_unified_thread_list",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"msgr_threads",plural:!1,selections:fp,storageKey:null},{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"wa_threads",plural:!1,selections:fp,storageKey:null},{alias:null,args:null,concreteType:"InstagramMessageThreadsConnection",kind:"LinkedField",name:"ig_threads",plural:!1,selections:[{alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"ig_user",plural:!1,selections:hp,storageKey:null},N,yp,{condition:"loadThreads",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"InstagramMessageThread",kind:"LinkedField",name:"nodes",plural:!0,selections:[Cp,bp,vp,Sp,Rp,Lp,Ep,kp,Tp,Dp,xp,$p,Pp,Np,Mp,wp,Ap,Fp,Wu,qu,{condition:"loadThreadItems",kind:"Condition",passingValue:!0,selections:[{alias:null,args:ur,concreteType:"InstagramMessageThreadItemsConnection",kind:"LinkedField",name:"thread_items",plural:!1,selections:E_,storageKey:"thread_items(first:1)"}]}],storageKey:null},L_]}],storageKey:null},{alias:null,args:null,concreteType:"XFBBizInboxSelectedThread",kind:"LinkedField",name:"selected_thread",plural:!1,selections:[k_,{alias:null,args:null,concreteType:"InstagramMessageThread",kind:"LinkedField",name:"selected_ig_thread",plural:!1,selections:[Cp,bp,vp,Sp,Rp,Lp,Ep,kp,Tp,Dp,xp,$p,Pp,Np,Mp,wp,Ap,Fp,Wu,qu,{condition:"load_items",kind:"Condition",passingValue:!0,selections:[{alias:null,args:I_,concreteType:"InstagramMessageThreadItemsConnection",kind:"LinkedField",name:"thread_items",plural:!1,selections:E_,storageKey:null}]}],storageKey:null},{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"selected_message_thread",plural:!1,selections:[w,F,O,Pl,Nl,Fl,Ol,Bl,Wl,ql,Ul,Ft,Vl,Hl,Gl,zl,jl,Kl,Ql,Xl,Yl,Jl,Zl,es,ts,ns,rs,us,ys,Cs,bs,vs,Ss,Es,Bs,Ws,Us,eu,ru,yu,Tu,vu,Du,xu,$u,Pu,Nu,Mu,wu,Au,Qu,Xu,Yu,Ju,um,mm,pm,Gt,_m,fm,bm,vm,Sm,Rm,Lm,Em,up,{condition:"load_messages",kind:"Condition",passingValue:!0,selections:[{alias:null,args:T_,concreteType:"MessagesOfThreadConnection",kind:"LinkedField",name:"messages",plural:!1,selections:[D_,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:sm,storageKey:null}],storageKey:null}]},{condition:"load_read_receipts",kind:"Condition",passingValue:!0,selections:[mp]},x_],storageKey:null},{condition:"shouldUnifyContextCardQueries",kind:"Condition",passingValue:!0,selections:[{kind:"InlineDataFragmentSpread",name:"BizKitContextCardContainerDetailsFrag_selectedContact",selections:[{alias:null,args:P_,concreteType:"BizCRMContact",kind:"LinkedField",name:"selected_biz_crm_contact",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactIdentity",kind:"LinkedField",name:"identity",plural:!1,selections:[N_],storageKey:null},{args:null,kind:"FragmentSpread",name:"BizKitContextCardContainer_contact"}],storageKey:null},{alias:null,args:P_,concreteType:"BizCRMContactCardConfig",kind:"LinkedField",name:"selected_biz_crm_contact_card_config",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"BizKitContextCard_config"}],storageKey:null}],args:null,argumentDefinitions:[M_]}]}],storageKey:null},A_],storageKey:null},O_,{condition:"shouldUnifyContextCardQueries",kind:"Condition",passingValue:!0,selections:[{kind:"InlineDataFragmentSpread",name:"BizKitContextCardActivitySectionFrag_activitiesquery",selections:[{alias:null,args:P,concreteType:"XFBBizInboxUnifiedThreadList",kind:"LinkedField",name:"xfb_biz_inbox_unified_thread_list",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBBizInboxSelectedThread",kind:"LinkedField",name:"selected_thread",plural:!1,selections:[{alias:null,args:P_,concreteType:"BizCRMContact",kind:"LinkedField",name:"selected_biz_crm_contact",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivitySection_contact"},{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivityDropDown_contact"},{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivityNuxForAutoDetected_contact"}],storageKey:null},B_],storageKey:null},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!1,selections:[{alias:null,args:P_,concreteType:"Page",kind:"LinkedField",name:"selected_page",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivityDropDown_page"},{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivityListItem_page"}],storageKey:null}]}],storageKey:null},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!0,selections:[{alias:null,args:W_,concreteType:"XFBMBSBusinessAssets",kind:"LinkedField",name:"xfb_mbs_business_assets",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivityDropDown_mbsBusinessAssets"},{args:null,kind:"FragmentSpread",name:"BizKitContextCardActivityListItem_mbsBusinessAssets"}],storageKey:null}]}],args:null,argumentDefinitions:[{kind:"RootArgument",name:"businessAssets"},{kind:"RootArgument",name:"ig_params"},{kind:"RootArgument",name:"isDependencyOfRemovePageDependencyEnabledTool"},{kind:"RootArgument",name:"msgr_params"},M_,{kind:"RootArgument",name:"selected_item_id"},{kind:"RootArgument",name:"wa_params"}]}]}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[s,a,i,u,I,k,x,r,p,m,S,o,C,T,b,D,y,e,g,h,_,d,c,f,v,n,L,R,E,l,t],kind:"Operation",name:"BizInboxUnifiedThreadsQuery",selections:[$,{alias:null,args:P,concreteType:"XFBBizInboxUnifiedThreadList",kind:"LinkedField",name:"xfb_biz_inbox_unified_thread_list",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"msgr_threads",plural:!1,selections:ng,storageKey:null},{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"wa_threads",plural:!1,selections:ng,storageKey:null},{alias:null,args:null,concreteType:"InstagramMessageThreadsConnection",kind:"LinkedField",name:"ig_threads",plural:!1,selections:[{alias:null,args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"ig_user",plural:!1,selections:rg,storageKey:null},N,yp,{condition:"loadThreads",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"InstagramMessageThread",kind:"LinkedField",name:"nodes",plural:!0,selections:[Cp,bp,vp,Sp,Rp,Lp,Ep,kp,Tp,Dp,xp,$p,Pp,Np,Mp,wp,Ap,Fp,Wu,qu,{condition:"loadThreadItems",kind:"Condition",passingValue:!0,selections:[{alias:null,args:ur,concreteType:"InstagramMessageThreadItemsConnection",kind:"LinkedField",name:"thread_items",plural:!1,selections:lg,storageKey:"thread_items(first:1)"}]},w],storageKey:null},L_]}],storageKey:null},{alias:null,args:null,concreteType:"XFBBizInboxSelectedThread",kind:"LinkedField",name:"selected_thread",plural:!1,selections:[k_,{alias:null,args:null,concreteType:"InstagramMessageThread",kind:"LinkedField",name:"selected_ig_thread",plural:!1,selections:[Cp,bp,vp,Sp,Rp,Lp,Ep,kp,Tp,Dp,xp,$p,Pp,Np,Mp,wp,Ap,Fp,Wu,qu,{condition:"load_items",kind:"Condition",passingValue:!0,selections:[{alias:null,args:I_,concreteType:"InstagramMessageThreadItemsConnection",kind:"LinkedField",name:"thread_items",plural:!1,selections:lg,storageKey:null}]},w],storageKey:null},{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"selected_message_thread",plural:!1,selections:[w,F,O,kf,Nl,If,Ol,Bl,ql,Ul,Ft,Vl,Hl,Gl,zl,jl,Kl,Ql,Xl,Yl,Jl,Zl,es,ts,ns,rs,Tf,Df,xf,bs,vs,Ss,$f,Pf,Ws,Us,Nf,Mf,wf,Af,vu,Du,xu,$u,Pu,Nu,Mu,wu,Au,Ff,Xu,Yu,Of,Kf,Qf,Gt,_m,fm,Xf,vm,Sm,Rm,Lm,Em,Zf,Wl,tg,{condition:"load_messages",kind:"Condition",passingValue:!0,selections:[{alias:null,args:T_,concreteType:"MessagesOfThreadConnection",kind:"LinkedField",name:"messages",plural:!1,selections:[D_,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:jf,storageKey:null}],storageKey:null}]},{condition:"load_read_receipts",kind:"Condition",passingValue:!0,selections:[eg]},x_],storageKey:null},{condition:"shouldUnifyContextCardQueries",kind:"Condition",passingValue:!0,selections:[{alias:null,args:P_,concreteType:"BizCRMContact",kind:"LinkedField",name:"selected_biz_crm_contact",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactIdentity",kind:"LinkedField",name:"identity",plural:!1,selections:[N_,K,{alias:null,args:null,kind:"ScalarField",name:"contact_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sub_business_id",storageKey:null}],storageKey:null},w,{alias:null,args:null,concreteType:"BizCRMContactSharedAttributes",kind:"LinkedField",name:"shared_attributes",plural:!1,selections:[sg,{alias:null,args:null,concreteType:"BizCRMContactProfile",kind:"LinkedField",name:"profile",plural:!1,selections:[jc,{alias:null,args:null,kind:"ScalarField",name:"first_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},{alias:null,args:null,concreteType:"PageContactProfileURI",kind:"LinkedField",name:"profile_uris",plural:!0,selections:re,storageKey:null},{alias:null,args:ug,concreteType:"PageContactProfilePhotoURI",kind:"LinkedField",name:"profile_photo_uris_prefetch",plural:!0,selections:re,storageKey:"profile_photo_uris_prefetch(height:52,width:52)"},{alias:null,args:null,kind:"ScalarField",name:"last_name",storageKey:null},{alias:"profile_photo_uri_about_section",args:[{kind:"Literal",name:"height",value:100},{kind:"Literal",name:"width",value:100}],concreteType:"PageContactProfilePhotoURI",kind:"LinkedField",name:"profile_photo_uris",plural:!0,selections:re,storageKey:"profile_photo_uris(height:100,width:100)"},{alias:null,args:null,kind:"ScalarField",name:"address",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"city_name",storageKey:null},nc,{alias:"phone",args:null,concreteType:"PhoneNumber",kind:"LinkedField",name:"phone_number",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"region_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"national_number",storageKey:null},{alias:"phoneNumber",args:null,kind:"ScalarField",name:"display_number",storageKey:null}],storageKey:null},Io,{alias:null,args:null,kind:"ScalarField",name:"zip_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"country_code",storageKey:null},{alias:null,args:null,concreteType:"PageContactBirthday",kind:"LinkedField",name:"birthday",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"day",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"month",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"formatted_birthday",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"suggested_email_address",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fallback_phone_number",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"city_state",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ban_action_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_banned",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_blocked",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_wec_blocked",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_onsite_user",storageKey:null},Bu,{alias:null,args:cg,concreteType:"BizCRMContactSharedAttributesCorpLabelListConnection",kind:"LinkedField",name:"corp_label_list",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactSharedAttributesCorpLabelListEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCorporationLabel",kind:"LinkedField",name:"node",plural:!1,selections:[w,O,Hs,zs,dg,Gs,Ys,Js,js,Ze],storageKey:null},mg],storageKey:null},L_,pg],storageKey:"corp_label_list(first:20)"},{alias:null,args:cg,filters:null,handle:"connection",key:"BizKitContextCard_corp_label_list",kind:"LinkedHandle",name:"corp_label_list"},{alias:null,args:cg,concreteType:"BizCRMContactSharedAttributesSuggestedLabelsConnection",kind:"LinkedField",name:"suggested_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactSharedAttributesSuggestedLabelsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[Ze,w,O,Hs,{kind:"InlineFragment",selections:[Ac,Rl,{alias:null,args:null,kind:"ScalarField",name:"upsell",storageKey:null}],type:"BusinessPresenceDerivedLabel",abstractKey:null}],storageKey:null},mg],storageKey:null},L_,pg],storageKey:"suggested_labels(first:20)"},{alias:null,args:cg,filters:null,handle:"connection",key:"BizKitContextCard_suggested_labels",kind:"LinkedHandle",name:"suggested_labels"},{alias:null,args:null,kind:"ScalarField",name:"is_guest_chat",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBBizCRMContactIGIDs",kind:"LinkedField",name:"ig_ids",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ig_id_v2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ig_eimu_id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactIGAttributes",kind:"LinkedField",name:"ig_attributes",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ig_user_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ig_thread_id",storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactIGUserProfileUnit",kind:"LinkedField",name:"profile_units",plural:!0,selections:[_g,G],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactFBAttributes",kind:"LinkedField",name:"fb_attributes",plural:!1,selections:[qd,{alias:null,args:null,concreteType:"BizCRMContactFBUserProfileUnit",kind:"LinkedField",name:"profile_units",plural:!0,selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"text",plural:!1,selections:[{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[Ze,ae,_l],storageKey:null},Ge,fi],storageKey:null},G],storageKey:null},_g],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactMessengerThreadAttribute",kind:"LinkedField",name:"messenger_thread",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"one_to_one_thread",plural:!1,selections:[{alias:"sharedMedia",args:fg,concreteType:"MessageSharedMediaConnection",kind:"LinkedField",name:"message_shared_media",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageSharedMediaEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[Ze,{kind:"TypeDiscriminator",abstractKey:"__isMessageSharedMedia"},_l,{kind:"InlineFragment",selections:[gg,Ft,hg],type:"MessageImage",abstractKey:null},{kind:"InlineFragment",selections:[gg,Ft,hg,he],type:"MessageVideo",abstractKey:null}],storageKey:null},mg],storageKey:null},yg],storageKey:'message_shared_media(first:4,message_shared_media_type:"PHOTO_AND_VIDEO")'},{alias:"sharedMedia",args:fg,filters:["message_shared_media_type"],handle:"connection",key:"BizKitContextCardSharedPhotos_sharedMedia",kind:"LinkedHandle",name:"message_shared_media"},w],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactBusinessAttributes",kind:"LinkedField",name:"business_attributes",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactCommunicationPreference",kind:"LinkedField",name:"communication_preference",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"email_subscription_status",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactMessageLabelAttribute",kind:"LinkedField",name:"customer_labels",plural:!1,selections:[{alias:null,args:Cg,concreteType:"BizCRMContactMessageLabelAttributeLabelListConnection",kind:"LinkedField",name:"label_list",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactMessageLabelAttributeLabelListEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCustomLabel",kind:"LinkedField",name:"node",plural:!1,selections:[w,O,Hs,dg,Gs,zs,js,bg,vg,Sg,Ze],storageKey:null},mg],storageKey:null},L_,pg],storageKey:"label_list(first:400)"},{alias:null,args:Cg,filters:null,handle:"connection",key:"Contact_customer_label_list",kind:"LinkedHandle",name:"label_list"},{alias:null,args:null,concreteType:"BizCRMContactMessageLabelAttributeCustomerCustomTagsConnection",kind:"LinkedField",name:"customer_custom_tags",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactMessageLabelAttributeCustomerCustomTagsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"PageCustomTag",kind:"LinkedField",name:"node",plural:!1,selections:Qs,storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactAdminNotesAttribute",kind:"LinkedField",name:"admin_notes",plural:!1,selections:[{alias:null,args:Rg,concreteType:"BizCRMContactAdminNotesAttributeNotesListConnection",kind:"LinkedField",name:"notes_list",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactAdminNotesAttributeNotesListEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"PageAdminNote",kind:"LinkedField",name:"node",plural:!1,selections:[w,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"body",plural:!1,selections:z,storageKey:null},il,{alias:null,args:null,kind:"ScalarField",name:"note_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_source_type",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"underlying_admin_creator",plural:!1,selections:[Ze,O,w],storageKey:null},Ze],storageKey:null},mg],storageKey:null},yg,pg],storageKey:"notes_list(first:2)"},{alias:null,args:Rg,filters:null,handle:"connection",key:"BizKitContextCard_notes_list",kind:"LinkedHandle",name:"notes_list"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactWAAttributes",kind:"LinkedField",name:"wa_attributes",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"wa_customer_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"opt_in_status",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_enable_ads_consent_in_ctwa",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_wa_automated_label_nux",storageKey:null},{alias:"adsDataSharingLabelsNUX",args:[{kind:"Literal",name:"mbs_ads_event_sharing_event_type",value:"LABEL_CREATION_WA"}],concreteType:"XFBMBSAdsEventSharingNux",kind:"LinkedField",name:"mbs_ads_event_sharing_eligible_nux_types",plural:!0,selections:Lg,storageKey:'mbs_ads_event_sharing_eligible_nux_types(mbs_ads_event_sharing_event_type:"LABEL_CREATION_WA")'},{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"gk_name",value:"ctm_custom_label_reporting_pages"}],concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:Eg,storageKey:'gk_check(gk_name:"ctm_custom_label_reporting_pages")'},kg,w,{alias:null,args:null,kind:"ScalarField",name:"is_p2m_lite_payment_onboarded",storageKey:null},{alias:null,args:[{kind:"Literal",name:"tab",value:"DATA_SHARING"}],kind:"ScalarField",name:"wa_settings_uri_in_business_view",storageKey:'wa_settings_uri_in_business_view(tab:"DATA_SHARING")'},{alias:null,args:null,concreteType:"WhatsAppBusinessAccount",kind:"LinkedField",name:"linked_whatsapp_business_account",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_consented_to_ctwa_data_sharing",storageKey:null},w],storageKey:null}],storageKey:null},Ig,{alias:null,args:null,concreteType:"BizCRMContactBusinessActions",kind:"LinkedField",name:"business_actions",plural:!1,selections:[{alias:null,args:Tg,concreteType:"BizCRMContactBusinessActionsActionsConnection",kind:"LinkedField",name:"actions",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactBusinessActionsActionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[Ze,{alias:null,args:null,concreteType:"BizCRMContactAction3DWrapper",kind:"LinkedField",name:"wrapper",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"contact_action",plural:!1,selections:[Ze,il,ft,K,qo,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"descriptions",plural:!0,selections:z,storageKey:null},Ne,{alias:null,args:null,kind:"ScalarField",name:"click_url",storageKey:null},_t,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"invoice_id",storageKey:null},zd,Dg],type:"BizCRMContactAdAction",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"story",plural:!1,selections:q,storageKey:null}],type:"BizCRMContactFacebookActionWithStory",abstractKey:null},{kind:"InlineFragment",selections:[zd,Gs,Dg,{alias:null,args:null,kind:"ScalarField",name:"show_ad_icon",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"data_silo_auto_detected_activity",storageKey:null}],type:"BizCRMContactCustomAction",abstractKey:null},{kind:"InlineFragment",selections:[Gs],type:"BizCRMContactBusinessOrderAction",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},mg],storageKey:null},yg],storageKey:'actions(first:5,types:["BUSINESS_ORDER"])'},{alias:null,args:Tg,filters:["types"],handle:"connection",key:"BizKitContextCardOrders__actions",kind:"LinkedHandle",name:"actions"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_mbs_ads_consent_upsell_in_inbox_at_thread_entry",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_mbs_ads_event_sharing_consent_at_thread_entry",storageKey:null},{alias:null,args:null,concreteType:"XFBMBSAdsEventSharingSettings",kind:"LinkedField",name:"mbs_ads_event_sharing_settings",plural:!1,selections:[w,{alias:null,args:null,kind:"ScalarField",name:"ads_event_sharing_business_opt_in_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ads_event_sharing_consumer_opt_in_status",storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Literal",name:"mbs_ads_event_sharing_event_type",value:"DETECTED_ACTIVITY_ON_THREAD_ENTRY"}],concreteType:"XFBMBSAdsEventSharingNux",kind:"LinkedField",name:"mbs_ads_event_sharing_eligible_nux_types",plural:!0,selections:Lg,storageKey:'mbs_ads_event_sharing_eligible_nux_types(mbs_ads_event_sharing_event_type:"DETECTED_ACTIVITY_ON_THREAD_ENTRY")'},xg,{alias:null,args:null,kind:"ScalarField",name:"has_consented_to_contact_card_tos",storageKey:null},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[$g],storageKey:null}]},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBMBSBusinessAssets",kind:"LinkedField",name:"mbs_business_assets",plural:!1,selections:[$g,w],storageKey:null}]},{condition:"shouldSkipMessage",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactSharedAttributes",kind:"LinkedField",name:"shared_attributes",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactProfile",kind:"LinkedField",name:"profile",plural:!1,selections:[{alias:null,args:ug,concreteType:"PageContactProfilePhotoURI",kind:"LinkedField",name:"profile_photo_uris",plural:!0,selections:re,storageKey:"profile_photo_uris(height:52,width:52)"}],storageKey:null},{alias:null,args:null,concreteType:"PageContactCTAType",kind:"LinkedField",name:"contact_ctas",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cta_type",storageKey:null}],storageKey:null}],storageKey:null}]},{condition:"shouldSkipPageQuery",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[Ng,Mg,{alias:null,args:Cg,concreteType:"PageCorpLabelsConnection",kind:"LinkedField",name:"corp_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"PageCorpLabelsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCorporationLabel",kind:"LinkedField",name:"node",plural:!1,selections:[w,O,Hs,zs,dg,Gs,Ys,Js,js,Pg,Ze],storageKey:null},mg],storageKey:null},L_],storageKey:"corp_labels(first:400)"},wg,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"if_viewer_can_manage_permissions",plural:!1,selections:q_,storageKey:null},Ag,{alias:"is_in_kbank_rollout",args:Fg,concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:Og,storageKey:'gk_check(gk_name:"mcom_kbank_integration_rollout")'},{alias:"show_payment_onboarding_context_card",args:[{kind:"Literal",name:"gk_name",value:"messenger_p2m_lite_merchant_onboarding"}],concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:Eg,storageKey:'gk_check(gk_name:"messenger_p2m_lite_merchant_onboarding")'}],storageKey:null},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBMBSBusinessAssets",kind:"LinkedField",name:"mbs_business_assets",plural:!1,selections:[Ng,Mg,{alias:null,args:Cg,concreteType:"XFBMBSBusinessAssetsCorpLabelsConnection",kind:"LinkedField",name:"corp_labels",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBMBSBusinessAssetsCorpLabelsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BusinessPresenceCorporationLabel",kind:"LinkedField",name:"node",plural:!1,selections:[w,O,Hs,dg,Gs,zs,Ys,Js,js,Pg,Ze],storageKey:null},mg],storageKey:null},L_],storageKey:"corp_labels(first:400)"},wg,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page_if_viewer_can_manage_permissions",plural:!1,selections:q_,storageKey:null},Ag,{alias:"is_in_kbank_rollout",args:Fg,concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check_page",plural:!1,selections:Og,storageKey:'gk_check_page(gk_name:"mcom_kbank_integration_rollout")'}],storageKey:null}]}]}],storageKey:null},{alias:null,args:P_,concreteType:"BizCRMContactCardConfig",kind:"LinkedField",name:"selected_biz_crm_contact_card_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"sections",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"permission",storageKey:null}],storageKey:null}]}],storageKey:null},A_],storageKey:null},O_,{condition:"shouldUnifyContextCardQueries",kind:"Condition",passingValue:!0,selections:[{alias:null,args:P,concreteType:"XFBBizInboxUnifiedThreadList",kind:"LinkedField",name:"xfb_biz_inbox_unified_thread_list",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBBizInboxSelectedThread",kind:"LinkedField",name:"selected_thread",plural:!1,selections:[{alias:null,args:P_,concreteType:"BizCRMContact",kind:"LinkedField",name:"selected_biz_crm_contact",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactAllActions",kind:"LinkedField",name:"all_actions",plural:!1,selections:[{alias:null,args:Rg,concreteType:"BizCRMContactAllActionsActionsConnection",kind:"LinkedField",name:"actions",plural:!1,selections:[{alias:null,args:null,concreteType:"BizCRMContactAllActionsActionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[Ze,{alias:"codeSplitWrapper",args:null,concreteType:"BizCRMContactAction3DWrapper",kind:"LinkedField",name:"wrapper",plural:!1,selections:[{args:null,documentName:"BizKitContextCardActivityListItem3DWrapper_BizCRMContactAction3DWrapper",fragmentName:"BizKitContextCardActivityListItem_node",fragmentPropName:"node",kind:"ModuleImport"}],storageKey:null}],storageKey:null},mg],storageKey:null},yg,pg],storageKey:"actions(first:2)"},{alias:null,args:Rg,filters:null,handle:"connection",key:"BizKitContextCardActivityList_actions",kind:"LinkedHandle",name:"actions"},{alias:"interaction_count",args:null,concreteType:"BizCRMContactAllActionsActionsConnection",kind:"LinkedField",name:"actions",plural:!1,selections:Lu,storageKey:null}],storageKey:null},w,Ig,{alias:null,args:null,concreteType:"BizCRMContactFBAttributes",kind:"LinkedField",name:"fb_attributes",plural:!1,selections:[qd],storageKey:null},{alias:null,args:null,concreteType:"BizCRMContactSharedAttributes",kind:"LinkedField",name:"shared_attributes",plural:!1,selections:[sg],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_automated_activity_nux",storageKey:null},xg,{alias:"adsDataSharingActivityNUX",args:[{kind:"Literal",name:"mbs_ads_event_sharing_event_type",value:"ACTIVITY"}],concreteType:"XFBMBSAdsEventSharingNux",kind:"LinkedField",name:"mbs_ads_event_sharing_eligible_nux_types",plural:!0,selections:Lg,storageKey:'mbs_ads_event_sharing_eligible_nux_types(mbs_ads_event_sharing_event_type:"ACTIVITY")'},{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[kg,w,{alias:"two_step_do_nux_tour_gk",args:[{kind:"Literal",name:"gk_name",value:"two_step_do_nux_tour"}],concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:Eg,storageKey:'gk_check(gk_name:"two_step_do_nux_tour")'}],storageKey:null},{alias:"adsDataSharingDetectedActivityNUX",args:[{kind:"Literal",name:"mbs_ads_event_sharing_event_type",value:"DETECTED_ACTIVITY"}],concreteType:"XFBMBSAdsEventSharingNux",kind:"LinkedField",name:"mbs_ads_event_sharing_eligible_nux_types",plural:!0,selections:Lg,storageKey:'mbs_ads_event_sharing_eligible_nux_types(mbs_ads_event_sharing_event_type:"DETECTED_ACTIVITY")'}],storageKey:null},B_],storageKey:null},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!1,selections:[{alias:null,args:P_,concreteType:"Page",kind:"LinkedField",name:"selected_page",plural:!1,selections:[{alias:"ctm_www_tas_order_integration_gk",args:Bg,concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:Wg,storageKey:'gk_check(gk_name:"ctm_www_tas_order_integration_gk")'},{alias:"translationFix",args:[{kind:"Literal",name:"qe_universe",value:"tas_bizweb_translation_fix_universe"}],concreteType:"QECheck",kind:"LinkedField",name:"qe_check",plural:!1,selections:[{alias:"is_enabled",args:[{kind:"Literal",name:"bool_default",value:!1},{kind:"Literal",name:"param_name",value:"has_string_translation"}],kind:"ScalarField",name:"bool",storageKey:'bool(bool_default:false,param_name:"has_string_translation")'}],storageKey:'qe_check(qe_universe:"tas_bizweb_translation_fix_universe")'},{alias:"timelineActionsCheck",args:qg,concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:Ug,storageKey:'gk_check(gk_name:"ctm_www_tas_timeline_actions_gk")'},w],storageKey:null}]}],storageKey:null},{condition:"isDependencyOfRemovePageDependencyEnabledTool",kind:"Condition",passingValue:!0,selections:[{alias:null,args:W_,concreteType:"XFBMBSBusinessAssets",kind:"LinkedField",name:"xfb_mbs_business_assets",plural:!1,selections:[{alias:"ctm_www_tas_order_integration_gk",args:Bg,concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check_page",plural:!1,selections:Wg,storageKey:'gk_check_page(gk_name:"ctm_www_tas_order_integration_gk")'},{alias:"timelineActionsCheck",args:qg,concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check_page",plural:!1,selections:Ug,storageKey:'gk_check_page(gk_name:"ctm_www_tas_timeline_actions_gk")'},w],storageKey:null}]}]}]},params:{id:"24450288948004961",metadata:{},name:"BizInboxUnifiedThreadsQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);/*FB_PKG_DELIM*/
__d("hyperionChannel",["hyperionHook"],(function(t,n,r,o,a,i,l){var e,s=(function(){function t(){this.$1=new(e||(e=o("hyperionHook"))).Hook}var n=t.prototype;return n.pipe=function(t,n){var e=this.$1.add(n?function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];n(function(){t.emit.apply(t,[e].concat(o))})}:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];t.emit.apply(t,[e].concat(r))});return e.$2=t,t},n.unpipe=function(t){return this.$1.removeIf(function(e){return e.$2===t})},n.emit=function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=this.$1).call.apply(e,[t].concat(r))},t})(),u=(function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,e.$Channel1=Object.create(null),babelHelpers.assertThisInitialized(e)||babelHelpers.assertThisInitialized(e)}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.$Channel2=function(n){var t=this.$Channel1[n];return t||(t=this.$Channel1[n]=new(e||(e=o("hyperionHook"))).Hook),t},r.on=function(t){return this.$Channel2(t)},r.addListener=function(t,n){return this.on(t).add(n)},r.removeListener=function(t,n){return this.on(t).remove(n),n},r.emit=function(n){for(var e,r,o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];(e=this.$Channel2(n)).call.apply(e,a),(r=t.prototype.emit).call.apply(r,[this,n].concat(a))},n})(s),c=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$PausableChannel1=!1,babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.pause=function(){this.$PausableChannel1=!0},n.unpause=function(){this.$PausableChannel1=!1},n.isPaused=function(){return this.$PausableChannel1},n.emit=function(n){var t;if(!this.$PausableChannel1){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=e.prototype.emit).call.apply(t,[this,n].concat(o))}},t})(u);l.Channel=u,l.PausableChannel=c,l.PipeableEmitter=s}),98);
__d("ALChannel",["hyperionChannel"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("hyperionChannel")).Channel,s=e;l.default=s}),98);
__d("ALReactUtils",["FBLogger","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return!0},s=function(t){var e=Object.keys(t).find(function(e){return e.startsWith("__reactFiber$")});return e!=null?t[e]:null},u=function(t){var e,n,r=(e=t.displayName)!=null?e:t.name;if(r==null)return null;var o=r.match(/.*\[from (.*)\.react\]/);return(n=o==null?void 0:o[1])!=null?n:r};function c(t,n){if(t==null)return r("FBLogger")("ads_manager_auto_logging").warn("[AL] Null element passed to getReactComponentName_THIS_CAN_BREAK."),null;var o=n||e,a=t;try{for(var i=s(a);i;){var l=i.type;if(l==null||typeof l=="string"){i=i.return;continue}var c=u(l);if(c==null&&l.render!=null&&(c=u(l.render)),c!=null&&c!==""&&o(c))return c;i=i.return}}catch(e){var d=r("getErrorSafe")(e);return r("FBLogger")("ads_manager_auto_logging").catching(d).warn("[AL] Caught exception in getReactComponentName_THIS_CAN_BREAK."),null}}l.getReactComponentName_THIS_CAN_BREAK=c}),98);
__d("AccessibilityWebAssistiveTechTypedLoggerLite",["generateLiteTypedLogger"],(function(t,n,r,o,a,i){"use strict";a.exports=n("generateLiteTypedLogger")("logger:AccessibilityWebAssistiveTechLoggerConfig")}),null);
__d("AutoLoggingComponentValidatorListSitevarConfig.experimental",["cr:27482"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:27482")}),98);
__d("AutoLoggingComponentNameValidator",["AutoLoggingComponentValidatorListSitevarConfig.experimental","FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e={COMPONENT_ALLOW_LIST:r("AutoLoggingComponentValidatorListSitevarConfig.experimental").COMPONENT_ALLOW_LIST,COMPONENT_BLOCK_LIST:r("AutoLoggingComponentValidatorListSitevarConfig.experimental").COMPONENT_BLOCK_LIST},s=function(t){return t.join("|")},u=null;function c(t){var n,o;u!=null&&u!==t&&r("FBLogger")("auto_logging").warn("Config name used to get validator changed, ensure you are using consistent init config across AutoLogging",u,t),u=t;var a=(n=(o=r("AutoLoggingComponentValidatorListSitevarConfig.experimental").TOOL_CONFIG)==null?void 0:o[t])!=null?n:e,i=s(a.COMPONENT_ALLOW_LIST),l=s(a.COMPONENT_BLOCK_LIST);return function(e){return e.match(i)!=null&&e.match(l)==null}}l.getComponentNameValidator=c}),98);
__d("AdsALReactUtils",["ALReactUtils","AutoLoggingComponentNameValidator"],(function(t,n,r,o,a,i,l){"use strict";var e=o("AutoLoggingComponentNameValidator").getComponentNameValidator("ads");function s(t,n){var r;return n===void 0&&(n=null),o("ALReactUtils").getReactComponentName_THIS_CAN_BREAK(t,((r=n)==null?void 0:r.skipValidator)===!0?function(){return!0}:e)}function u(t){return!e(t)}l.getReactComponentName_THIS_CAN_BREAK=s,l.isComponentNameBlocked=u}),98);
__d("AutoLoggingComponentValidatorListSitevarConfigJSModuleWrapper",["AutoLoggingComponentValidatorListSitevarConfig"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("AutoLoggingComponentValidatorListSitevarConfig")}),98);
__d("BDSignalBufferData",[],(function(t,n,r,o,a,i){"use strict";var e={},l=e;i.default=l}),66);
__d("SignalValueContext",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.cn=e}var t=e.prototype;return t.getSignalValueContextName=function(){return this.cn},e})();i.default=e}),66);
__d("BDSignalCollectorBase",["BDSignalBufferData","SignalValueContext"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.signalType=e}var t=e.prototype;return t.executeSignalCollection=function(){throw new Error("Child class responsibility to implement executeSignalCollection")},t.executeAsyncSignalCollection=async function(){var e=await this.executeSignalCollection();return e},e.getSanitizedURI=function(){var e=window.location.href,t=e.indexOf("?");return t<0?e:e.substring(0,t)},t.getContext=function(){return new(r("SignalValueContext"))(e.getSanitizedURI())},t.throwIfNotInitialized=function(){if(!(this.signalType in r("BDSignalBufferData")))throw new Error("Signal is not intialized")},e})();l.default=e}),98);
__d("BDBiometricSignalCollectorBase",["BDSignalCollectorBase","err"],(function(t,n,r,o,a,i,l){"use strict";var e="biometric_signal_collected",s=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.listenForSignals=function(){throw r("err")("Child class responsibility to implement listenForSignals")},n.executeSignalCollection=function(){throw r("err")("executeAsyncSignalCollection and executeSignalCollection should not be called on biometric signals")},t})(r("BDSignalCollectorBase"));l.BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME=e,l.BDBiometricSignalCollectorBase=s}),98);
__d("BDSignalWrapper",["BDSignalBufferData","SignalCollectorMap"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){this.signalFlags=e,this.signalType=t}var t=e.prototype;return t.getSignalCollector=function(){return r("SignalCollectorMap").get(this.signalType)},t.getBufferConfig=function(){return r("BDSignalBufferData")[this.signalType]},e})();l.default=e}),98);
__d("BDLoggingConstants",[],(function(t,n,r,o,a,i){"use strict";var e={ERROR:"error",WARNING:"warning",INFO:"info"},l={KEY_NOT_FOUND:"key_not_found",APPEND_SIGNAL:"bd_append_signal",APPEND_SIGNAL_FAIL:"bd_append_signal_fail",HB_COLLECTED:"append_hb",HB_COLLECTION_FAILED:"hb_collection_failed",BD_EXCEPTION:"bd_exception",SIGNAL_NOT_IMPLEMENTED:"signal_not_implemented",SIGNAL_VALUE_NULL:"signal_value_null",EMPTY_SIGNAL_CONFIG:"empty_signal_config",INVALID_BUFFER_SIZE:"invalid_buffer_size",INVALID_DURATION:"invalid_duration",SIGNAL_FLAGS_MISSING:"signal_flags_missing",DYNAMIC_SIGNAL_COLLECTION_STARTED:"dynamic_signal_collection_started",BIOMETRIC_SIGNAL_COLLECTION_STARTED:"biometric_signal_collection_started",INVALID_GUID:"invalid_guid",INVALID_LENGTH:"invalid_length",GET_LOCAL_STORAGE_ERROR:"get_local_storage_error",WEB_STORAGE:"web_storage",PARSE_CONFIG_ERROR:"parse_config_error",HB_START_FAILURE:"hb_start_failure",HB_ALREADY_RUNNING:"hb_already_running",TRY_RESTARTING_HB:"try_restarting_hb",BANZAI_LOG_ERROR:"banzai_log_error"},s="JS";i.LEVELS=e,i.OPERATIONS=l,i.COMPONENT_NAME=s}),66);
__d("BDOperationTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1={}}var t=e.prototype;return t.log=function(t){n("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,n("Banzai").BASIC,t)},t.logVital=function(t){n("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,n("Banzai").VITAL,t)},t.logImmediately=function(t){n("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,{signal:!0},t)},t.clear=function(){return this.$1={},this},t.getData=function(){return babelHelpers.extends({},this.$1)},t.updateData=function(t){return this.$1=babelHelpers.extends({},this.$1,t),this},t.setBdSessionID=function(t){return this.$1.bd_session_id=t,this},t.setComponent=function(t){return this.$1.component=t,this},t.setDurationUs=function(t){return this.$1.duration_us=t,this},t.setExceptionMessage=function(t){return this.$1.exception_message=t,this},t.setExceptionStackTrace=function(t){return this.$1.exception_stack_trace=t,this},t.setExceptionType=function(t){return this.$1.exception_type=t,this},t.setIntValue=function(t){return this.$1.int_value=t,this},t.setLevel=function(t){return this.$1.level=t,this},t.setOperation=function(t){return this.$1.operation=t,this},t.setOperationInfo=function(t){return this.$1.operation_info=n("GeneratedLoggerUtils").serializeMap(t),this},t.setSessionlets=function(t){return this.$1.sessionlets=n("GeneratedLoggerUtils").serializeVector(t),this},e})(),l={bd_session_id:!0,component:!0,duration_us:!0,exception_message:!0,exception_stack_trace:!0,exception_type:!0,int_value:!0,level:!0,operation:!0,operation_info:!0,sessionlets:!0};i.default=e}),66);
__d("BDOperationLogHelper",["BDLoggingConstants","BDOperationTypedLogger","Random"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){c(e,o("BDLoggingConstants").LEVELS.INFO,t,n,r)}function s(e,t,n,r){c(e,o("BDLoggingConstants").LEVELS.WARNING,t,n,r)}function u(e,t,n,r){c(e,o("BDLoggingConstants").LEVELS.ERROR,t,n,r)}function c(e,t,n,a,i){if(a===void 0&&(a={}),o("Random").coinflip(d(n))){if(a===null)throw new Error("opeartion info null");a.source=e,new(r("BDOperationTypedLogger"))().setLevel(t).setDurationUs(i).setOperation(n).setComponent(o("BDLoggingConstants").COMPONENT_NAME).setOperationInfo(a).log()}}function d(e){var t=o("BDLoggingConstants").OPERATIONS;switch(e){case t.APPEND_SIGNAL:case t.HB_COLLECTED:case t.GET_LOCAL_STORAGE_ERROR:case t.WEB_STORAGE:case t.SIGNAL_NOT_IMPLEMENTED:case t.BIOMETRIC_SIGNAL_COLLECTION_STARTED:return 1e3;default:return 1}}l.logInfo=e,l.logWarning=s,l.logError=u,l.log=c,l.getFlipSamplingByOperation=d}),98);
__d("SignalErrorValueTypeDef",[],(function(t,n,r,o,a,i){"use strict";var e="ec",l="en",s="es",u=500,c=(function(){function t(e,t,n){this.$1=e,this.$2=t,n!=null&&(this.$3=n.substr(0,u))}var n=t.prototype;return n.getErrorCode=function(){return this.$1},n.getErrorName=function(){return this.$2},n.getErrorDetails=function(){return this.$3},n.isEqual=function(t){return this.$1===t.getErrorCode()&&this.$3===t.getErrorDetails()&&this.$2===t.getErrorName()},n.toJSON=function(){var t={};switch(t[e]=this.$1,this.$1){case 0:t[l]=this.$2,t[s]=this.$3;break}return t},t})();i.SignalErrorValueTypeDef=c}),66);
__d("SignalValueTypeDef",["BDLoggingConstants","BDOperationLogHelper","SignalErrorValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e="SignalValueTypeDef",s="t",u="ctx",c="v",d="e",m={NUMBER:"NUMBER",STRING:"STRING",BOOLEAN:"BOOLEAN",CUSTOM_OBJECT:"CUSTOM_OBJECT",INT_ARRAY:"INT_ARRAY",TOUCH:"TOUCH",MAP:"MAP",LIST:"LIST",SENSOR:"SENSOR",ERROR:"ERROR"},p=(function(){function t(e,t,n,r,o){this.$1=e,this.$2=t,this.$3=n,this.$4=r,this.$5=o!=null?o:0}var n=t.prototype;return n.getTimeStampMS=function(){return this.$1},n.getSignalContext=function(){return this.$2},n.getSignalValue=function(){return this.$3},n.getSignalValueType=function(){return this.$4},n.isEqual=function(n,r){if(n==null)return o("BDOperationLogHelper").logWarning(e,o("BDLoggingConstants").OPERATIONS.SIGNAL_VALUE_NULL),!1;if(this.getSignalValueType()!==n.getSignalValueType())return!1;if(this.getSignalValueType()===m.ERROR&&n.getSignalValueType()===m.ERROR)return this.equalValue(n);var t=!1;return r.has(128)&&(t=this.equalValue(n)),r.has(256)&&(t=t&&this.getSignalContext()!=null&&n.getSignalContext()!=null&&this.getSignalContext().getSignalValueContextName()===n.getSignalContext().getSignalValueContextName()),r.has(512)&&(t=t&&Math.abs(this.getTimeStampMS()-n.getTimeStampMS())<=this.$5),t},n.equalValue=function(t){if(this.isPrimitiveType())return this.getSignalValue()===t.getSignalValue();throw new Error("Must implement in the subclasses")},n.toJSON=function(t){var e={};return t&&(e[s]=this.$1/1e3,this.$2!=null&&(e[u]=this.$2)),this.$3==null?e[d]=new(o("SignalErrorValueTypeDef")).SignalErrorValueTypeDef(2):this.addValueOrErrorToJSON(e),e},n.addValueOrErrorToJSON=function(t){if(this.isPrimitiveType())t[c]=this.$3;else throw new Error("Must implement in the subclasses")},n.isPrimitiveType=function(){switch(typeof this.$3){case"number":case"boolean":case"string":return!0;default:return!1}},t})();l.BD_VALUE=c,l.BD_ERROR=d,l.VALUE_TYPES=m,l.SignalValueTypeDef=p}),98);
__d("ErrorSignalValueType",["SignalValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r){return e.call(this,t,n,r,o("SignalValueTypeDef").VALUE_TYPES.ERROR)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.equalValue=function(t){return this.getSignalValue().isEqual(t.getSignalValue())},n.addValueOrErrorToJSON=function(t){t[o("SignalValueTypeDef").BD_ERROR]=this.getSignalValue().toJSON()},t})(o("SignalValueTypeDef").SignalValueTypeDef);l.default=e}),98);
__d("NumberSignalValueType",["SignalValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r){return e.call(this,t,n,r,o("SignalValueTypeDef").VALUE_TYPES.NUMBER)||this}return babelHelpers.inheritsLoose(t,e),t})(o("SignalValueTypeDef").SignalValueTypeDef);l.default=e}),98);
__d("BDConnectionRTTSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","NumberSignalValueType","SignalErrorValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e;if(navigator.connection!=null&&navigator.connection.rtt!=null){var t=navigator.connection.rtt;e=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),t)}else e=new(r("ErrorSignalValueType"))(Date.now(),this.getContext(),new(o("SignalErrorValueTypeDef")).SignalErrorValueTypeDef(3,"navigator.connection.rtt not supported"));return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30004,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("CustomObjectSignalValueType",["SignalValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r){return e.call(this,t,n,r,o("SignalValueTypeDef").VALUE_TYPES.CUSTOM_OBJECT)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.equalValue=function(t){return this.getSignalValue().isEqual(t.getSignalValue())},n.addValueOrErrorToJSON=function(t){t[o("SignalValueTypeDef").BD_VALUE]=this.getSignalValue().toJSON()},t})(o("SignalValueTypeDef").SignalValueTypeDef);l.default=e}),98);
__d("HeartbeatObject",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.isAppForeground=!0}var t=e.prototype;return t.toJSON=function(){return{f:this.isAppForeground}},t.isEqual=function(t){return!1},e})();i.default=e}),66);
__d("BDHeartbeatSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","HeartbeatObject"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=new(r("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(r("HeartbeatObject")));return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:38e3,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("KeyDownUpObject",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.action=null,this.key_code=null,this.action=e,this.key_code=t}var t=e.prototype;return t.toJSON=function(){return{action:this.action,key_code:this.key_code}},t.isEqual=function(n){return n instanceof e?this.action===n.action&&this.key_code===n.key_code:!1},e})();i.default=e}),66);
__d("BDKeyDownUpSignalCollector",["BDBiometricSignalCollectorBase","CustomObjectSignalValueType","KeyDownUpObject","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.listenForSignals=function(){var e=this;r("gkx")("21049")&&(document.addEventListener("keydown",function(t){return e.collectSignals(2)}),document.addEventListener("keyup",function(t){return e.collectSignals(1)}))},n.collectSignals=function(t){var e=new(r("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(r("KeyDownUpObject"))(t,0)),n={signalId:this.signalType,data:{valueOrError:e}};window.dispatchEvent(new CustomEvent(o("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,{detail:n}))},t})(o("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase),s=null,u={signalType:30100,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("StringArrayObject",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.strings=[],this.strings=e}var t=e.prototype;return t.toJSON=function(){return this.strings},t.isEqual=function(n){if(!(n instanceof e))return!1;if(n.strings===this.strings)return!0;if(n.strings.length!==this.strings.length)return!1;for(var t=0;t<this.strings.length;t++)if(this.strings[t]!==n.strings[t])return!1;return!0},e})();i.default=e}),66);
__d("BDLanguagesSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","StringArrayObject"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=[].concat(navigator.languages),t=new(r("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(r("StringArrayObject"))(e));return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30003,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDMimeTypeCountSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=navigator.mimeTypes?navigator.mimeTypes.length:-1,t=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),e);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30002,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BooleanSignalValueType",["SignalValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r){return e.call(this,t,n,r,o("SignalValueTypeDef").VALUE_TYPES.BOOLEAN)||this}return babelHelpers.inheritsLoose(t,e),t})(o("SignalValueTypeDef").SignalValueTypeDef);l.default=e}),98);
__d("BDTouchOrMouseSignalCollectorBase",["BDBiometricSignalCollectorBase","BDLoggingConstants","BDOperationLogHelper","BooleanSignalValueType","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e="BDTouchOrMouseSignalCollectorBase",s=(function(t){function n(e,n,r){var o;return o=t.call(this,e)||this,o.eventsToSubscribe=[],o.pauseTimeout=36e5,o.eventsToSubscribe=n,o.pauseTimeout=r,o.handler=function(e){return o.collectSignals(e)},o}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.listenForSignals=function(){this.collectSignals(),this.addListeners()},a.addListeners=function(){var t=this;this.eventsToSubscribe.forEach(function(n){try{document.addEventListener(n,t.handler)}catch(t){var a=r("getErrorSafe")(t);o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.BD_EXCEPTION,{error:a.message})}})},a.pauseListeners=function(){var e=this;this.eventsToSubscribe.forEach(function(t){document.removeEventListener(t,e.handler)}),window.setTimeout(function(){return e.addListeners()},this.pauseTimeout)},a.collectSignals=function(t){var e=t!=null;e&&this.pauseListeners();var n=new(r("BooleanSignalValueType"))(Date.now(),this.getContext(),e),a={signalId:this.signalType,data:{valueOrError:n}};window.dispatchEvent(new CustomEvent(o("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,{detail:a}))},n})(o("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase);l.default=s}),98);
__d("BDMousePresenceSignalCollector",["BDTouchOrMouseSignalCollectorBase"],(function(t,n,r,o,a,i,l){"use strict";var e=36e5,s=(function(t){function n(){return t.call(this,c.signalType,["mousedown","mousemove"],e)||this}return babelHelpers.inheritsLoose(n,t),n})(r("BDTouchOrMouseSignalCollectorBase")),u=null,c={signalType:30106,get:function(){return u==null&&(u=new s),u}},d=c;l.default=d}),98);
__d("StringSignalValueType",["SignalValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r){return e.call(this,t,n,r,o("SignalValueTypeDef").VALUE_TYPES.STRING)||this}return babelHelpers.inheritsLoose(t,e),t})(o("SignalValueTypeDef").SignalValueTypeDef);l.default=e}),98);
__d("BDNavigatorAppVersionSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=navigator.appVersion,t=new(r("StringSignalValueType"))(Date.now(),this.getContext(),e);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30013,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNavigatorHardwareConcurrencySignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e,t=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),(e=navigator.hardwareConcurrency)!=null?e:0);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30018,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNavigatorMaxTouchPointSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),navigator.maxTouchPoints);return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30093,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNavigatorNotificationPermissionSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeAsyncSignalCollection=async function(){var e;try{if(navigator.permissions){var t=await navigator.permissions.query({name:"notifications"});e=new(r("StringSignalValueType"))(Date.now(),this.getContext(),t.state)}else e=new(r("ErrorSignalValueType"))(Date.now(),this.getContext(),new(o("SignalErrorValueTypeDef")).SignalErrorValueTypeDef(3,"navigator.permissions not supported"))}catch(t){e=new(r("ErrorSignalValueType"))(Date.now(),this.getContext(),new(o("SignalErrorValueTypeDef")).SignalErrorValueTypeDef(3,"notifications cannot be queried from navigator.permissions"))}return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30008,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNavigatorPlatformSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=new(r("StringSignalValueType"))(Date.now(),this.getContext(),navigator.platform);return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30015,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNavigatorPluginsFileExtensionsSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringArrayObject"],(function(t,n,r,o,a,i,l){"use strict";var e=10,s=(function(t){function n(){return t.call(this,c.signalType)||this}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.executeSignalCollection=function(){var t=null;try{for(var n=navigator.plugins?navigator.plugins.length:0,a=new Set,i=0;i<n;i++){var l=navigator.plugins[i].filename;if(l){var s=l.indexOf(".");if(!(s==-1||s==l.length-1)&&(a.add(l.substr(s+1)),a.size>=e))break}}a.size&&(t=new(r("StringArrayObject"))(Array.from(a)))}catch(e){t=new(r("ErrorSignalValueType"))(Date.now(),this.getContext(),new(o("SignalErrorValueTypeDef")).SignalErrorValueTypeDef(3,"navigator.plugins is not defined"))}return{valueOrError:t}},n})(r("BDSignalCollectorBase")),u=null,c={signalType:30019,get:function(){return u==null&&(u=new s),u}},d=c;l.default=d}),98);
__d("BDNavigatorUserAgentSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=new(r("StringSignalValueType"))(Date.now(),this.getContext(),navigator.userAgent);return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30094,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNavigatorVendorSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=navigator.vendor,t=new(r("StringSignalValueType"))(Date.now(),this.getContext(),e);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30012,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNotificationPermissionSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e;return window.Notification?e=new(r("StringSignalValueType"))(Date.now(),this.getContext(),Notification.permission):e=new(r("ErrorSignalValueType"))(Date.now(),this.getContext(),new(o("SignalErrorValueTypeDef")).SignalErrorValueTypeDef(3,"Notification not supported")),{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30007,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDPluginCountSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=navigator.plugins?navigator.plugins.length:-1,t=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),e);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30001,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDTimezoneOffsetSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e,t=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),(e=new Date().getTimezoneOffset())!=null?e:999);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30040,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDTouchPresenceSignalCollector",["BDTouchOrMouseSignalCollectorBase"],(function(t,n,r,o,a,i,l){"use strict";var e=36e5,s=(function(t){function n(){return t.call(this,c.signalType,["touchstart","touchcancel"],e)||this}return babelHelpers.inheritsLoose(n,t),n})(r("BDTouchOrMouseSignalCollectorBase")),u=null,c={signalType:30107,get:function(){return u==null&&(u=new s),u}},d=c;l.default=d}),98);
__d("BDWebdriverSignalCollector",["BDSignalCollectorBase","BooleanSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=!!navigator.webdriver,t=new(r("BooleanSignalValueType"))(Date.now(),this.getContext(),e);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:3e4,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDWebglSupportSignalCollector",["BDSignalCollectorBase","BooleanSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=document.createElement("canvas"),t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}var n=!!t,o=new(r("BooleanSignalValueType"))(Date.now(),this.getContext(),n);return{valueOrError:o}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30022,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDWindowHistoryLengthSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),window.history?window.history.length:0);return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30095,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("DimensionObject",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.width=null,this.height=null,this.width=e,this.height=t}var t=e.prototype;return t.toJSON=function(){return{w:this.width,h:this.height}},t.isEqual=function(n){return n instanceof e?this.width===n.width&&this.height===n.height:!1},e})();i.default=e}),66);
__d("BDWindowOuterDimensionSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","DimensionObject"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=window.innerHeight,t=window.innerWidth,n=new(r("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(r("DimensionObject"))(t,e));return{valueOrError:n}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30005,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("SignalCollectorMap",["BDConnectionRTTSignalCollector","BDHeartbeatSignalCollector","BDHeartbeatV2SignalCollector","BDKeyDownUpSignalCollector","BDLanguagesSignalCollector","BDMimeTypeCountSignalCollector","BDMousePresenceSignalCollector","BDNavigatorAppVersionSignalCollector","BDNavigatorHardwareConcurrencySignalCollector","BDNavigatorMaxTouchPointSignalCollector","BDNavigatorNotificationPermissionSignalCollector","BDNavigatorPlatformSignalCollector","BDNavigatorPluginsFileExtensionsSignalCollector","BDNavigatorUserAgentSignalCollector","BDNavigatorVendorSignalCollector","BDNotificationPermissionSignalCollector","BDPluginCountSignalCollector","BDTimezoneOffsetSignalCollector","BDTouchPresenceSignalCollector","BDWebdriverSignalCollector","BDWebglSupportSignalCollector","BDWindowHistoryLengthSignalCollector","BDWindowOuterDimensionSignalCollector"],(function(t,n,r,o,a,i,l){"use strict";var e={get:function(t){switch(t){case 3e4:return r("BDWebdriverSignalCollector").get();case 30001:return r("BDPluginCountSignalCollector").get();case 30002:return r("BDMimeTypeCountSignalCollector").get();case 30003:return r("BDLanguagesSignalCollector").get();case 30004:return r("BDConnectionRTTSignalCollector").get();case 30005:return r("BDWindowOuterDimensionSignalCollector").get();case 30007:return r("BDNotificationPermissionSignalCollector").get();case 30008:return r("BDNavigatorNotificationPermissionSignalCollector").get();case 30012:return r("BDNavigatorVendorSignalCollector").get();case 30013:return r("BDNavigatorAppVersionSignalCollector").get();case 30015:return r("BDNavigatorPlatformSignalCollector").get();case 30018:return r("BDNavigatorHardwareConcurrencySignalCollector").get();case 30019:return r("BDNavigatorPluginsFileExtensionsSignalCollector").get();case 30022:return r("BDWebglSupportSignalCollector").get();case 30040:return r("BDTimezoneOffsetSignalCollector").get();case 30093:return r("BDNavigatorMaxTouchPointSignalCollector").get();case 30094:return r("BDNavigatorUserAgentSignalCollector").get();case 30095:return r("BDWindowHistoryLengthSignalCollector").get();case 30100:return r("BDKeyDownUpSignalCollector").get();case 30106:return r("BDMousePresenceSignalCollector").get();case 30107:return r("BDTouchPresenceSignalCollector").get();case 38e3:return r("BDHeartbeatSignalCollector").get();case 38001:return r("BDHeartbeatV2SignalCollector").get()}}},s=e;l.default=s}),98);
__d("HeartbeatV2Object",["HeartbeatObject"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this)||this,n.id="",n.id=t,n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.toJSON=function(){return{f:this.isAppForeground,id:this.id}},t})(r("HeartbeatObject"));l.default=e}),98);
__d("BDHeartbeatV2SignalCollector",["BDClientConfig","BDSignalCollectorBase","CustomObjectSignalValueType","HeartbeatV2Object"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=new(r("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(r("HeartbeatV2Object"))(r("BDClientConfig").get().getHeartbeatVersion()));return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:38001,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDClientConfig",["BDLoggingConstants","BDOperationLogHelper","BDSignalWrapper"],(function(t,n,r,o,a,i,l){"use strict";var e="BDClientConfig",s=(function(){function t(){this.staticSignalBufferSize=1,this.dynamicSignalBufferSize=1,this.biometricSignalBufferSize=1,this.staticSignals=[],this.dynamicSignals=[],this.biometricSignals=[],this.biometricSignalsMap=new Map,this.heartbeatSignal=new(r("BDSignalWrapper"))([],38001),this.bufferSizeBySignalIdMap={},this.periodicCollectionIntervalMs=Number.MAX_SAFE_INTEGER,this.signalConfigGenerationTimeStampMs=0,this.suspiciousTiersFlushDurationMs=Number.MAX_SAFE_INTEGER,this.allTiersFlushDurationMs=Number.MAX_SAFE_INTEGER,this.heartbeatIntervalMs=-1,this.parsingDone=!1,this.sid=-1,this.hbVersion="",this.bufferSizeBySignalIdMap[38001]=1}var n=t.prototype;return n.setStaticSignalBufferSize=function(n){return n>0?this.staticSignalBufferSize=n:o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:n.toString(),type:"s"}),this},n.getStaticSignalBufferSize=function(){return this.staticSignalBufferSize},n.setDynamicSignalBufferSize=function(n){return n>1?this.dynamicSignalBufferSize=n:o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:n.toString(),type:"d"}),this},n.getDynamicSignalBufferSize=function(){return this.dynamicSignalBufferSize},n.setBiometricSignalBufferSize=function(n){return n>1?this.biometricSignalBufferSize=n:o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:n.toString(),type:"b"}),this},n.setSID=function(t){return this.sid=t,this},n.setHeartbeatVersion=function(t){return this.hbVersion=t,this},n.getHeartbeatVersion=function(){return this.hbVersion},n.getBiometricSignalBufferSize=function(){return this.biometricSignalBufferSize},n.setConfigGenerationTimeStamp=function(t){return this.signalConfigGenerationTimeStampMs=t,this},n.getConfigGenerationTimeStamp=function(){return this.signalConfigGenerationTimeStampMs},n.setHeartbeatIntervalMinutes=function(t){return this.heartbeatIntervalMs=t*60*1e3,this},n.getHeartbeatIntervalMs=function(){return this.heartbeatIntervalMs},n.setSuspiciousTiersFlushDurationMinutes=function(n){return n>0?this.suspiciousTiersFlushDurationMs=n*60*1e3:o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:n.toString(),type:"fds"}),this},n.getSuspiciousTiersFlushDurationMs=function(){return this.suspiciousTiersFlushDurationMs},n.setAllTiersFlushDurationMinutes=function(n){return n>0?this.allTiersFlushDurationMs=n*60*1e3:o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:n.toString(),type:"fda"}),this},n.getAllTiersFlushDurationMs=function(){return this.allTiersFlushDurationMs},n.addMultipleSignalsToClientConfig=function(t){var e=this;return t.forEach(function(t){return e.addSignalToClientConfig(t)}),this},n.addSignalToClientConfig=function(t){var e=t.getSignalFlags(),n=t.getSignalId();if(n===38e3)return this;var o=new(r("BDSignalWrapper"))(e,n);return n===38001?(this.heartbeatSignal=o,this):(e.includes(2)?e.includes(4)?this.biometricSignals.push(o):this.dynamicSignals.push(o):this.staticSignals.push(o),t.getBufferSize()>0&&(this.bufferSizeBySignalIdMap[t.getSignalId()]=t.getBufferSize()),this)},n.setPeriodicCollectionIntervalSeconds=function(n){return n>0?this.periodicCollectionIntervalMs=n*1e3:o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:n.toString(),type:"pi"}),this},n.getPeriodicCollectionIntervalMs=function(){return this.periodicCollectionIntervalMs},n.getDynamicSignals=function(){return this.dynamicSignals},n.getStaticSignals=function(){return this.staticSignals},n.getBiometricSignals=function(){return this.biometricSignals},n.getBiometricSignalsMap=function(){return this.biometricSignalsMap.size===0&&this.biometricSignals.length>0&&(this.biometricSignalsMap=this.biometricSignals.reduce(function(e,t){return e.set(t.signalType,t)},new Map)),this.biometricSignalsMap},n.getHeartbeatSignal=function(){return this.heartbeatSignal},n.getBufferSizeBySignalId=function(t){return this.bufferSizeBySignalIdMap[t]},n.setParsingDone=function(t){this.parsingDone=t},n.isParsingDone=function(){return this.parsingDone},t})(),u=null,c={get:function(){return u==null&&(u=new s),u}},d=c;l.default=d}),98);
__d("BDCollectionTypeEnum",[],(function(t,n,r,o,a,i){"use strict";var e=Object.freeze({STATIC:0,DYNAMIC:1,BIOMETRIC:2});i.default=e}),66);
__d("BotDetection_SignalFlags",[],(function(t,n,r,o,a,i){var e=Object.freeze({ACTIVE:1,DYNAMIC:2,BIOMETRIC:4,DEPRECATED:8,WEB:16,IOS_NATIVE:32,ANDROID_NATIVE:64,EQUAL_BY_VALUE:128,EQUAL_BY_CONTEXT:256,EQUAL_BY_TIMESTAMP:512,SUSPICIOUS_TIER:1024,PARANOID_TIER:2048,RANDOM_SAMPLE_TIER_DEPRECATED:4096,BENIGN_TIER:262144,EMPLOYEES_TIER:524288,BUNDLE:8192,ONSITE:16384,OFFSITE:32768,OFFSITE_SENSITIVE:65536,SENSITIVE:131072});i.default=e}),66);
__d("BDServerSignalConfig",["BDLoggingConstants","BDOperationLogHelper","BotDetection_SignalFlags"],(function(t,n,r,o,a,i,l){"use strict";var e="BDServerSignalConfig",s=(function(){function t(e,t,n){this.parsedSignalFlags=[],this.signalId=e,this.signalFlags=t,this.bufferSize=n}var n=t.prototype;return n.getSignalId=function(){return this.signalId},n.getSignalFlags=function(){var t=this;if(this.parsedSignalFlags.length===0){var n=Object.keys(r("BotDetection_SignalFlags"));n.forEach(function(e){(r("BotDetection_SignalFlags")[e]&t.signalFlags)===r("BotDetection_SignalFlags")[e]&&t.parsedSignalFlags.push(r("BotDetection_SignalFlags")[e])})}return this.parsedSignalFlags.length===0&&o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.SIGNAL_FLAGS_MISSING,{id:this.signalId.toString(),flags:this.signalFlags.toString()}),this.parsedSignalFlags},n.getBufferSize=function(){return this.bufferSize!=null?this.bufferSize:0},t})();l.default=s}),98);
__d("BDServerConfig",["BDClientConfig","BDLoggingConstants","BDOperationLogHelper","BDServerSignalConfig"],(function(t,n,r,o,a,i,l){"use strict";var e="BDServerConfig";function s(t){var n=[];try{var a=JSON.parse(t.sc),i=new Map(a.c);if(i.forEach(function(e,t){return n.push(new(r("BDServerSignalConfig"))(t,e))}),i.size===0){o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.EMPTY_SIGNAL_CONFIG);return}var l=r("BDClientConfig").get();l.setPeriodicCollectionIntervalSeconds(t.i).addMultipleSignalsToClientConfig(n).setConfigGenerationTimeStamp(a.t).setAllTiersFlushDurationMinutes(t.fda).setSuspiciousTiersFlushDurationMinutes(t.fds).setHeartbeatIntervalMinutes(t.hbi).setStaticSignalBufferSize(t.sbs).setDynamicSignalBufferSize(t.dbs).setBiometricSignalBufferSize(t.bbs).setSID(t.sid).setHeartbeatVersion(t.hbv).setParsingDone(!0)}catch(t){o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.PARSE_CONFIG_ERROR,{e:t})}}l.parseConfig=s}),98);
__d("BDSignalBuffer",["BDClientConfig","BDCollectionTypeEnum","BDLoggingConstants","BDOperationLogHelper","BDSignalBufferData"],(function(t,n,r,o,a,i,l){"use strict";var e="BDSignalBuffer";function s(e,t,n){if(!(e in r("BDSignalBufferData"))){var o=1;t!==void 0&&(o=t),r("BDSignalBufferData")[e]={values:[],max_buffer_size:o,signal_flags:n!=null?n:[]}}}function u(e){if(e in r("BDSignalBufferData"))r("BDSignalBufferData")[e].values=[];else throw new Error("Tried to clear signal buffer that was not intialized:")}function c(t,n){if(t in r("BDSignalBufferData")){var a=r("BDSignalBufferData")[t],i=a.max_buffer_size;a.values.length>=i&&a.values.shift(),a.values.push(n),o("BDOperationLogHelper").logInfo(e,o("BDLoggingConstants").OPERATIONS.APPEND_SIGNAL,{id:t.toString()})}else throw o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.APPEND_SIGNAL_FAIL,{id:t.toString()}),new Error("Tried to append signal that was not intialized:")}function d(){var e=r("BDClientConfig").get(),t=e.getBiometricSignals();t.forEach(function(e){e.signalType in r("BDSignalBufferData")&&u(e.signalType)})}function m(e){var t,n=r("BDSignalBufferData")[e],o=n==null||(t=n.values)==null?void 0:t.length;return o!=null&&o>0?n.values[o-1]:{valueOrError:void 0}}function p(e){return r("BDSignalBufferData")[e].values}function _(e){var t={};for(var n of e)n in r("BDSignalBufferData")&&(t[n]=p(n).map(function(e){return e.valueOrError}));return t}function f(e){var t=g(e);return JSON.stringify(_(t))}function g(e){var t=r("BDClientConfig").get(),n=[];return e.forEach(function(e){switch(e){case r("BDCollectionTypeEnum").STATIC:n=[].concat(n,t.getStaticSignals());break;case r("BDCollectionTypeEnum").DYNAMIC:n=[].concat(n,t.getDynamicSignals());break;case r("BDCollectionTypeEnum").BIOMETRIC:n=[].concat(n,t.getBiometricSignals());break}}),n.map(function(e){return e.signalType})}l.initialize=s,l.clearBuffer=u,l.appendSignal=c,l.clearBiometricSignals=d,l.getLastSignalFormatBySignalId=m,l.retrieveSignal=p,l.retrieveSignals=_,l.getSignalsAsJSONString=f,l._getSignalIdsByCollectionType=g}),98);
__d("BDUtils",[],(function(t,n,r,o,a,i){"use strict";function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})}i.uuid=e}),66);
__d("BdPdcSignalsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743095"),s=o("FalcoLoggerInternal").create("bd_pdc_signals",e),u=s;l.default=u}),98);
__d("SignalCollectionManager",["BDBiometricSignalCollectorBase","BDClientConfig","BDLoggingConstants","BDOperationLogHelper","BDSignalBuffer"],(function(t,n,r,o,a,i,l){"use strict";var e="SignalCollectionManager",s=(function(){function t(){var e=this;this.$1=!1,this.$6=function(t){if(t instanceof CustomEvent&&t.detail!=null&&t.detail.data!=null){var n=r("BDClientConfig").get().getBiometricSignalsMap().get(t.detail.signalId);n!=null&&e.$4(t.detail.data,n)}}}var n=t.prototype;return n.collectSignals=async function(t){var e=this,n=[];t.forEach(function(t){t.signalFlags.includes(4)?e.$2(t):n.push(e.$3(t))}),await Promise.all(n)},n.isEqualToLastCollectedSignal=function(t,n){var e=o("BDSignalBuffer").getLastSignalFormatBySignalId(n.signalType);return e.valueOrError==null?!1:t.isEqual(e.valueOrError,new Set(n.signalFlags))},n.getCircularBufferSize=function(t){var e=r("BDClientConfig").get(),n=e.getBufferSizeBySignalId(t.signalType);return n!=null&&e.getBufferSizeBySignalId(t.signalType)>0?n:t.signalFlags.includes(2)?t.signalFlags.includes(4)?e.getBiometricSignalBufferSize():e.getDynamicSignalBufferSize():e.getStaticSignalBufferSize()},n.$3=async function(n){var t=n.getSignalCollector();if(t!=null)try{var r=await t.executeAsyncSignalCollection();this.$4(r,n)}catch(t){o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.BD_EXCEPTION,{error:t})}},n.$2=function(t){this.$5();var e=t.getSignalCollector();e!=null&&e instanceof o("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase&&e.listenForSignals()},n.$5=function(){this.$1||(window.addEventListener(o("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,this.$6),this.$1=!0)},n.$4=function(t,n){n.getBufferConfig()==null&&o("BDSignalBuffer").initialize(n.signalType,this.getCircularBufferSize(n),n.signalFlags),t.valueOrError&&!this.isEqualToLastCollectedSignal(t.valueOrError,n)&&o("BDSignalBuffer").appendSignal(n.signalType,t)},t})(),u=null,c={get:function(){return u==null&&(u=new s),u}},d=c;l.default=d}),98);
__d("BDClientSignalCollectionTrigger",["BDClientConfig","BDCollectionTypeEnum","BDLoggingConstants","BDOperationLogHelper","BDServerConfig","BDSignalBuffer","BDUtils","BdPdcSignalsFalcoEvent","SignalCollectionManager","WebStorage","getErrorSafe","javascript-blowfish"],(function(t,n,r,o,a,i,l){"use strict";var e,s="BDClientSignalCollectionTrigger",u="signal_flush_timestamp",c=!1,d=!1,m=!1,p=!1,_=0,f=0,g=0,h=30,y=5,C,b,v=o("BDUtils").uuid(),S=r("BDClientConfig").get(),R=Object.freeze({NONE:0,VITAL:1,CRITICAL:2}),L={startSignalCollection:async function(t){if(S.setSID(t.sid),!c){if(c=!0,o("BDServerConfig").parseConfig(t),!S.isParsingDone()){o("BDOperationLogHelper").logError(s,o("BDLoggingConstants").OPERATIONS.PARSE_CONFIG_ERROR,{config:JSON.stringify(t)}),c=!1;return}t!=null&&(f=t.hbcbc&&t.hbcbc>0?t.hbcbc:f,g=t.hbvbc&&t.hbvbc>0?t.hbvbc:g,h=t.hbbi&&t.hbbi>0?t.hbbi:h),L.startHeartbeatDelayed(),b=new Promise(function(e,t){try{S.getDynamicSignals().length>0&&(L.collectDynamicSignals(),o("BDOperationLogHelper").logInfo(s,o("BDLoggingConstants").OPERATIONS.DYNAMIC_SIGNAL_COLLECTION_STARTED,{ts:Date.now().toString()})),S.getBiometricSignals().length>0&&(L.collectBiometricSignals(),o("BDOperationLogHelper").logInfo(s,o("BDLoggingConstants").OPERATIONS.BIOMETRIC_SIGNAL_COLLECTION_STARTED,{ts:Date.now().toString()})),e()}catch(e){t(e)}}),await b,await L.startSignalPosting()}c&&!m&&!p&&y>0&&(y-=1,o("BDOperationLogHelper").logWarning(s,o("BDLoggingConstants").OPERATIONS.TRY_RESTARTING_HB),L.startHeartbeatDelayed())},retrieveSignals:async function(){await b,await L.postSignals([r("BDCollectionTypeEnum").DYNAMIC,r("BDCollectionTypeEnum").BIOMETRIC,r("BDCollectionTypeEnum").STATIC])},postSignals:async function(t){await L.collectStaticSignals(),L._postSignalsHelper(o("BDSignalBuffer").getSignalsAsJSONString(t),R.NONE)&&L.setTimestampInStorage(Date.now(),u)},_postSignalsHelper:function(t,n){if(t.length<=2)return!1;var e=S.getConfigGenerationTimeStamp(),a=L.encryptDataUsingAsid(v,t),i=function(){return{asid:v,ct:e,sjd:a,sid:S.sid}},l=!1;try{n===R.CRITICAL?r("BdPdcSignalsFalcoEvent").logCritical(i):n===R.VITAL?r("BdPdcSignalsFalcoEvent").logImmediately(i):r("BdPdcSignalsFalcoEvent").log(i),l=!0}catch(e){var u=r("getErrorSafe")(e);o("BDOperationLogHelper").logError(s,o("BDLoggingConstants").OPERATIONS.BANZAI_LOG_ERROR,{error:u.message}),l=!1}finally{return l}},getInitialVector:function(t){if(t.length!==16)return o("BDOperationLogHelper").logError(s,o("BDLoggingConstants").OPERATIONS.INVALID_LENGTH),"";for(var e="",n=0;n<8;n++)e+=String.fromCharCode(t.charCodeAt(n)^t.charCodeAt(8+n));return e},encryptDataUsingAsid:function(t,n){if(t.length!==36)return o("BDOperationLogHelper").logError(s,o("BDLoggingConstants").OPERATIONS.INVALID_GUID),n;var e=t.slice(19,23)+t.slice(24,36),a=L.getInitialVector(e),i=new(r("javascript-blowfish"))(e,"cbc");return i.base64Encode(i.encrypt(n,a))},startSignalPosting:async function(){var e=L.getTimestampInStorage(u),t=Date.now()-e;t>=S.getAllTiersFlushDurationMs()?await L.postSignalsIntermittently():window.setTimeout(function(){L.postSignalsIntermittently()},S.getAllTiersFlushDurationMs()-t)},postSignalsIntermittently:function(){L.postSignals([r("BDCollectionTypeEnum").STATIC]),window.setInterval(function(){L.postSignals([r("BDCollectionTypeEnum").STATIC,r("BDCollectionTypeEnum").DYNAMIC,r("BDCollectionTypeEnum").BIOMETRIC])},S.getAllTiersFlushDurationMs())},setTimestampInStorage:function(n,a){var t=(e||(e=r("WebStorage"))).getLocalStorage();if(!t){o("BDOperationLogHelper").logWarning(s,o("BDLoggingConstants").OPERATIONS.GET_LOCAL_STORAGE_ERROR);return}var i=e.setItemGuarded(t,a,n.toString());i!=null&&o("BDOperationLogHelper").logWarning(s,o("BDLoggingConstants").OPERATIONS.WEB_STORAGE,{error:i.message})},getTimestampInStorage:function(n){var t=(e||(e=r("WebStorage"))).getLocalStorage();if(!t)return o("BDOperationLogHelper").logWarning(s,o("BDLoggingConstants").OPERATIONS.GET_LOCAL_STORAGE_ERROR),0;var a=t.getItem(n);if(a==null)return 0;var i=Number.parseInt(a,10);return Number.isFinite(i)?i:0},resetHeartbeatStartedForTest:function(){m=!1,p=!1},startHeartbeatDelayed:function(){if(!(m||p)){var e=L.getTimestampInStorage(L.HEARTBEAT_TIMESTAMP_STORAGE_KEY),t=Date.now()-e;try{t>=S.getHeartbeatIntervalMs()?L.startHeartbeat():(window.setTimeout(function(){return L.startHeartbeat()},S.getHeartbeatIntervalMs()-t),p=!0)}catch(e){var n=r("getErrorSafe")(e);o("BDOperationLogHelper").logError(s,o("BDLoggingConstants").OPERATIONS.HB_START_FAILURE,{lastBeatSince:t.toString(),hbi:S.getHeartbeatIntervalMs().toString(),error:n.message})}}},HEARTBEAT_TIMESTAMP_STORAGE_KEY:"hb_timestamp",startHeartbeat:function(){!m&&S.getHeartbeatIntervalMs()>0&&(L.collectHeartbeatTimes(f,g),_!==0&&(window.clearInterval(_),o("BDOperationLogHelper").logWarning(s,o("BDLoggingConstants").OPERATIONS.HB_ALREADY_RUNNING)),_=window.setInterval(function(){return L.collectHeartbeatTimes(f,g)},S.getHeartbeatIntervalMs()),m=!0)},collectHeartbeatTimes:function(t,n){t<=0&&n<=0||(t>0&&L.collectHeartbeat(R.CRITICAL),n>0&&L.collectHeartbeat(R.VITAL),(t>1||n>1)&&window.setTimeout(function(){return L.collectHeartbeatTimes(t-1,n-1)},h*1e3))},collectHeartbeat:function(t){var e,n=S==null||(e=S.getHeartbeatSignal())==null||(e=e.getSignalCollector())==null?void 0:e.executeSignalCollection();if(n==null){o("BDOperationLogHelper").logError(s,o("BDLoggingConstants").OPERATIONS.HB_COLLECTION_FAILED,{urgency:t.toString()});return}else o("BDOperationLogHelper").logInfo(s,o("BDLoggingConstants").OPERATIONS.HB_COLLECTED,{urgency:t.toString()});L.postHeartbeat(t,n)&&L.setTimestampInStorage(Date.now(),L.HEARTBEAT_TIMESTAMP_STORAGE_KEY)},postHeartbeat:function(t,n){var e={};e[38001]=[n==null?void 0:n.valueOrError];var r=JSON.stringify(e);return L._postSignalsHelper(r,t)},collectStaticSignals:async function(){await L.collectSignalsOneTime(S.getStaticSignals())},collectDynamicSignals:function(){L.stopDynamicSignalCollection(),C=window.setInterval(async function(){await L.collectSignalsOneTime(S.getDynamicSignals())},S.getPeriodicCollectionIntervalMs())},collectBiometricSignals:function(){L.collectSignalsOneTime(S.getBiometricSignals())},stopDynamicSignalCollection:function(){C!=null&&(window.clearInterval(C),C=null)},collectSignalsOneTime:async function(t){await r("SignalCollectionManager").get().collectSignals(t)},startLoginTimeSignalCollection:async function(t){d||(d=!0,o("BDServerConfig").parseConfig(t),await L.collectSignalsOneTime(S.getDynamicSignals()),await L.collectSignalsOneTime(S.getBiometricSignals()),await L.collectSignalsOneTime(S.getStaticSignals()))},getSignalsAsJSONString:function(){return o("BDSignalBuffer").getSignalsAsJSONString([r("BDCollectionTypeEnum").DYNAMIC,r("BDCollectionTypeEnum").STATIC,r("BDCollectionTypeEnum").BIOMETRIC])}},E=L;l.default=E}),98);
__d("BDCometSignalCollectionTrigger",["BDClientSignalCollectionTrigger","BDSignalCollectionData"],(function(t,n,r,o,a,i,l){"use strict";function e(){r("BDClientSignalCollectionTrigger").startSignalCollection(r("BDSignalCollectionData"))}l.initSignalCollection=e}),98);
__d("Chromedome",["fbt"],(function(t,n,r,o,a,i,l,s){function e(){if(document.domain==null)return null;var e=document.domain,t=/^intern\./.test(e);if(t)return null;var n=/(^|\.)facebook\.(com|sg)$/.test(e);if(n)return"facebook";var r=/(^|\.)instagram\.com$/.test(e);if(r)return"instagram";var o=/(^|\.)threads\.(com|net)$/.test(e);if(o)return"threads";var a=/(^|\.)messenger\.com$/.test(e);return a?"messenger":null}function u(e){return e==="instagram"?s._(/*BTDS*/"This is a browser feature intended for developers. If someone told you to copy-paste something here to enable an Instagram feature or \"hack\" someone's account, it is a scam and will give them access to your Instagram account."):e==="threads"?s._(/*BTDS*/"This is a browser feature intended for developers. If someone told you to copy-paste something here to enable a Threads feature or \"hack\" someone's account, it is a scam and will give them access to your Threads account."):s._(/*BTDS*/"This is a browser feature intended for developers. If someone told you to copy-paste something here to enable a Facebook feature or \"hack\" someone's account, it is a scam and will give them access to your Facebook account.")}function c(t){if(top===window){var n=e();if(n!=null){var r=s._(/*BTDS*/"Stop!"),o=u(n),a=s._(/*BTDS*/"See {url} for more information.",[s._param("url","https://www.facebook.com/selfxss")]),i="font-family:helvetica; font-size:20px; ";[[r,i+"font-size:50px; font-weight:bold; color:red; -webkit-text-stroke:1px black;"],[o,i],[a,i],["",""]].map(function(e){window.setTimeout(console.log.bind(console,"\n%c"+e[0].toString(),e[1]))})}}}l.start=c}),226);
__d("ClientConsistencyFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1764786"),s=o("FalcoLoggerInternal").create("client_consistency",e),u=s;l.default=u}),98);
__d("WebBrowserDimensionsTypedLoggerLite",["generateLiteTypedLogger"],(function(t,n,r,o,a,i){"use strict";a.exports=n("generateLiteTypedLogger")("logger:WebBrowserDimensionsLoggerConfig")}),null);
__d("CometBrowserDimensionsLogger",["CometDebounce","Cookie","ExecutionEnvironment","SiteData","WebBrowserDimensionsTypedLoggerLite","getViewportDimensions","isInIframe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null,u=!1,c={height:0,width:0};function d(){return s===null&&(s=r("getViewportDimensions")()),s}function m(){var e=r("getViewportDimensions")(),t=e.height,n=e.width;(c.width!==n||c.height!==t)&&(c={height:t,width:n},r("Cookie").set("wd",n+"x"+t))}function p(){!(e||(e=r("ExecutionEnvironment"))).canUseDOM||r("isInIframe")()||u||(u=!0,m(),window.addEventListener("resize",r("CometDebounce")(m,{wait:250}),{passive:!0}),window.addEventListener("focus",m,{passive:!0}))}function _(e){var t,n=d();p();var o={client_hint_width:e==null?void 0:e.clientHintWidth,pixel_ratio:(t=window.devicePixelRatio)!=null?t:1,screen_x:window.screen.width,screen_y:window.screen.height,server_pixel_ratio:r("SiteData").pr,server_viewport_x:e==null?void 0:e.viewportWidth,server_viewport_y:e==null?void 0:e.viewportHeight,viewport_x:n.width,viewport_y:n.height};if(window.navigator&&window.navigator.hardwareConcurrency&&(o.cpu_cores_count=window.navigator.hardwareConcurrency),window.innerWidth>0&&window.outerWidth>0){var a=Math.round(window.outerWidth/window.innerWidth*100)/100;o.zoom_ratio=a}if(window.getComputedStyle&&document.documentElement!=null){var i=window.getComputedStyle(document.documentElement);i!=null&&(o.document_font_size=i.fontSize)}r("WebBrowserDimensionsTypedLoggerLite").log(o)}l.init=_}),98);
__d("CometChromeDome",["JSScheduler","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("Chromedome").__setRef("CometChromeDome");function u(){s.onReady(function(t){(e||(e=o("JSScheduler"))).scheduleLoggingPriCallback(function(){t.start({})})})}l.init=u}),98);
__d("CometFBUncaughtError.react",["fbt","CometContentArea.react","FDSNullState.react","NullStateGeneral","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(){var e=o("react-compiler-runtime").c(2),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={className:"x6s0dn4 x78zum5 x1dr59a3 xl56j7k xixxii4 xh8yej3"},e[0]=t):t=e[0];var n;return e[1]===Symbol.for("react.memo_cache_sentinel")?(n=u.jsx("div",babelHelpers.extends({},t,{children:u.jsx(r("CometContentArea.react"),{verticalAlign:"middle",children:u.jsx(r("FDSNullState.react"),{headline:s._(/*BTDS*/"Sorry! Something went wrong :("),icon:r("NullStateGeneral")})})})),e[1]=n):n=e[1],n}l.default=c}),226);
__d("CometIconWirelessSlashFilled.react",["CometSVGIcon.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx("path",{d:"M23.7805.2195c.2925.293.2925.768 0 1.061l-22.5 22.5C1.134 23.927.942 24 .75 24c-.192 0-.384-.073-.5305-.2195-.2925-.293-.2925-.768 0-1.061l12.1967947-12.1971509c-2.3773758-.1150468-4.79162015.7286756-6.6038447 2.5401009-.3905.3905-1.0235.3905-1.414 0-.3905-.3905-.3905-1.024 0-1.414 2.65728981-2.65728981 6.3696459-3.62280965 9.8005664-2.90852144l2.430738-2.43186193C11.7816792 4.58111626 6.15198938 5.65271062 2.27735 9.52735c-.3905.3905-1.0235.3905-1.414 0-.3905-.3905-.3905-1.0235 0-1.414 4.6714534-4.67191574 11.571522-5.78608437 17.3096457-3.34843552L22.7195.2195c.293-.2925.768-.2925 1.061 0zM12 18.5c.6905 0 1.25.5595 1.25 1.25S12.6905 21 12 21s-1.25-.5595-1.25-1.25.5595-1.25 1.25-1.25zm1.4175-4.81495c.9705.2455 1.8905.741 2.6485 1.499.3905.3905.3905 1.0235 0 1.414-.1955.1955-.451.293-.707.293-.256 0-.512-.0975-.707-.293-.7835333-.7835333-1.8301422-1.1445778-2.8581093-1.0880116L11.574 15.52855l1.8435-1.8435zm3.8154-3.8154c.848.4725 1.649 1.059 2.3685 1.779.391.39.391 1.023 0 1.414-.195.195-.451.293-.707.293-.2555 0-.5115-.098-.707-.293-.7285-.728-1.5575-1.291-2.439-1.7085zm2.1908-2.1908l1.4425-1.4425c.8.545 1.5615 1.168 2.2705 1.877.3905.3905.3905 1.0235 0 1.414-.1955.1955-.451.293-.707.293-.256 0-.5115-.0975-.707-.293-.5933333-.59333333-1.2283333-1.11861111-1.895162-1.57959491L19.4237 7.67885l1.4425-1.4425z"}),t[0]=n):n=t[0];var a;return t[1]!==e?(a=s.jsx(r("CometSVGIcon.react"),babelHelpers.extends({viewBox:"0 0 24 24"},e,{children:n})),t[1]=e,t[2]=a):a=t[2],a}l.default=u}),98);
__d("CometNetworkStatusToast",["fbt","BaseToasterStateManager","CometIconWirelessSlashFilled.react","CometRelayEnvironmentFactory","FDSIcon.react","FDSWirelessFilled24Icon","NetworkStatus","SVGIcon","cometPushToast","gkx","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=null,d=null,m=r("gkx")("22885");function p(e){var t=e.online,n=r("BaseToasterStateManager").getInstance();c!=null&&(n.expire(c),c=null),t&&!m&&(c=o("cometPushToast").cometPushToast({icon:u.jsx(r("FDSIcon.react"),{color:"positive",icon:r("FDSWirelessFilled24Icon"),size:24}),message:s._(/*BTDS*/"Your internet connection was restored.")},4e3,n)),t||(c=o("cometPushToast").cometPushToast({action:m?void 0:{label:s._(/*BTDS*/"Refresh"),onPress:function(){o("CometRelayEnvironmentFactory").commitLocalUpdateForEachEnvironment(function(e,t,n){n.invalidateStore()})}},icon:u.jsx(r("FDSIcon.react"),{color:"disabled",icon:o("SVGIcon").legacySVGIcon(r("CometIconWirelessSlashFilled.react")),size:24}),message:s._(/*BTDS*/"You are currently offline.")},1/0,n))}function _(){d=r("NetworkStatus").onChange(p)}function f(){var e;(e=d)==null||e.remove(),d=null}l.subscribe=_,l.unsubscribe=f}),226);
__d("CometPixelRatioUpdater",["Cookie","Run","WebPixelRatio"],(function(t,n,r,o,a,i,l){"use strict";var e="dpr";function s(t){r("Cookie").set(e,String(t))}function u(){window.devicePixelRatio!==o("WebPixelRatio").get()&&s(window.devicePixelRatio)}function c(){u(),o("Run").onBeforeUnload(u,!1),"onpagehide"in window&&window.addEventListener("pageHide",u)}l.startDetecting=c}),98);
__d("CometVirtualCursorStatus",["UserAgent","cr:1345969","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=null,s=null;function u(){s||(s=window.addEventListener("blur",function(){e=null,c()}))}function c(){s&&(s.remove(),s=null)}function d(t){e=t.keyCode,u()}function m(t){e=null,c()}if(typeof window!="undefined"&&window.document&&window.document.createElement){var p=document.documentElement;if(p){if(p.addEventListener)p.addEventListener("keydown",d,!0),p.addEventListener("keyup",m,!0);else if(p.attachEvent){var _=p.attachEvent;_("onkeydown",d),_("onkeyup",m)}}}var f={getKeyDownCode:function(){return e},isKeyDown:function(){return!!e}},g=!1,h=!1,y=null,C=!1;function b(e){var t=new Set,n=f.isKeyDown(),o=e.WEBKIT_FORCE_AT_MOUSE_DOWN,a=e.clientX,i=e.clientY,l=e.isTrusted,s=e.mozInputSource,u=e.offsetX,c=e.offsetY,d=e.webkitForce;if(a===0&&i===0&&u>=0&&c>=0&&h&&l&&s==null&&t.add("Chrome"),g&&h&&!n&&d!=null&&d<o&&u===0&&c===0&&s==null&&t.add("Safari-edge"),a===0&&i===0&&u<0&&c<0&&h&&s==null&&t.add("Safari-old"),!g&&!h&&!n&&l&&r("UserAgent").isBrowser("IE >= 10")&&s==null){var m=e.target,p=m.clientHeight,_=m.clientWidth;a<0&&i<0?t.add("IE"):(u<0||u>_)&&(c<0||c>p)&&t.add("MSIE")}return s===0&&l&&t.add("Firefox"),t}function v(){g=!0,r("setTimeout")(function(){g=!1},0)}function S(){h=!0,r("setTimeout")(function(){h=!1},0)}function R(e){C&&n("cr:1345969").log({extra_data:{source_app:"comet"},indicated_browsers:y,is_virtual_cursor_action:e})}function L(e){y===null&&(y=Array.from(b(e))),C=y!=null&&y.length>0;var t=e.target!=null&&e.target.getAttribute!=null&&e.target.getAttribute("data-accessibilityid")==="virtual_cursor_trigger";R(t),r("setTimeout")(function(){C=!1,y=null},0)}function E(){document.addEventListener("click",L,!0),document.addEventListener("mousedown",v,!0),document.addEventListener("mouseup",S,!0)}l.initLogging=E}),98);
__d("SimplePageLoadLogger",["ODS","performance"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){(s||(s=o("ODS"))).bumpEntityKey(1678,"www_client_navigations",c())}function c(){if((e||(e=r("performance"))).navigation==null||(e||(e=r("performance"))).navigation.type==null)return"UNSUPPORTED";switch((e||(e=r("performance"))).navigation.type){case(e||(e=r("performance"))).navigation.TYPE_NAVIGATE:return"NAVIGATE";case(e||(e=r("performance"))).navigation.TYPE_RELOAD:return"RELOAD";case(e||(e=r("performance"))).navigation.TYPE_BACK_FORWARD:return"BACK_FORWARD";case(e||(e=r("performance"))).navigation.TYPE_RESERVED:return"RESERVED";default:return"UNKNOWN"}}l.logPageNavigationType=u}),98);
__d("setCometDeferredCookies",["DeferredCookie","ErrorGuard"],(function(t,n,r,o,a,i,l){"use strict";var e,s=!1,u=new Set;function c(e){s?e():u.add(e)}function d(t){Object.entries(t).forEach(function(e){var t=e[0],n=e[1],o=n.expiration_for_js,a=n.first_party_only,i=n.path,l=n.secure,s=n.value;r("DeferredCookie").addToQueue(t,s,o,i,a,!1,l)}),s=!0,u.forEach(function(t){return(e||(e=r("ErrorGuard"))).applyWithGuard(t,null,[])}),u.clear()}l.onCometDeferredCookieSet=c,l.setCometDeferredCookies=d}),98);
__d("CometRootDeferredShared",["CometBootloaderErrorLoggerUtil","CometBootloaderLoggerUtil","CometOfflineTracing","CometVirtualCursorStatus","ErrorGuard","JSScheduler","RunComet","SimplePageLoadLogger","WebStorageMonster","cr:1201738","cr:1332233","cr:1516609","cr:17080","cr:1813330","cr:22915","cr:2718","gkx","setCometDeferredCookies","vc-tracker"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var a=t.blLoggingCavalryFields,i=t.deferredCookies,l=t.networkStatusToast,u=l===void 0?n("cr:17080"):l;if((s||(s=r("ErrorGuard"))).applyWithGuard(function(){return o("CometBootloaderLoggerUtil").initLogging(a)},null,[]),s.applyWithGuard(function(){return o("CometBootloaderErrorLoggerUtil").initLogging(a)},null,[]),s.applyWithGuard(function(){return o("CometVirtualCursorStatus").initLogging()},null,[]),u!=null&&!r("gkx")("11394")&&(s||(s=r("ErrorGuard"))).applyWithGuard(function(){return u.subscribe()},null,[]),s.applyWithGuard(function(){return o("CometOfflineTracing").initialize()},null,[]),s.applyWithGuard(function(){return o("SimplePageLoadLogger").logPageNavigationType()},null,[]),(e||(e=o("JSScheduler"))).scheduleSpeculativeCallback(function(){r("WebStorageMonster").schedule()}),n("cr:1201738")&&r("vc-tracker").VisualCompletionTraceObserver.subscribe(function(e){e.interactionType==="INITIAL_LOAD"&&n("cr:1201738").init("comet.idle")}),o("setCometDeferredCookies").setCometDeferredCookies(i),n("cr:1332233")&&(s||(s=r("ErrorGuard"))).applyWithGuard(function(){return n("cr:1332233")()},null,[]),n("cr:1516609")!=null&&(s||(s=r("ErrorGuard"))).applyWithGuard(function(){return n("cr:1516609").initSignalCollection()},null,[]),n("cr:1813330")&&(s||(s=r("ErrorGuard"))).applyWithGuard(function(){return n("cr:1813330").init()},null,[]),n("cr:2718")&&(s||(s=r("ErrorGuard"))).applyWithGuard(function(){return n("cr:2718").init()},null,[]),n("cr:22915"))var c=o("RunComet").onAfterLoad(function(){(s||(s=r("ErrorGuard"))).applyWithGuard(function(){n("cr:22915")==null||n("cr:22915").startRSTFromMainThread(),c.remove()},null,[])})}l.initDeferred=u}),98);
__d("CometToasterView_DO_NOT_USE.react",["BaseContextualLayerAnchorRoot.react","BasePortal.react","BaseToastAnimationInternal.react","CometVisualCompletionAttributes","XPlatReactToasterView.react","gkx","react","react-compiler-runtime","useToasterStateManager"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState,m={root:{display:"x78zum5",insetInlineEnd:"xtijo5x",insetInlineStart:"x17syakg",left:null,right:null,pointerEvents:"x47corl",position:"xixxii4",width:"xh8yej3",zIndex:"xoegz02",$$css:!0},rootBlue:{zIndex:"x1jvg36b",$$css:!0},rootWorkplaceLegacy:{zIndex:"xdwmgzo",$$css:!0},toast:{paddingTop:"xyamay9",paddingInlineEnd:"xv54qhq",paddingBottom:"x1l90r2v",paddingInlineStart:"xf7dkkf",pointerEvents:"x71s49j","@media (max-width: 899px)_maxWidth":"xx1nl2z",$$css:!0}},p={bottom:{bottom:"x1ey2m1c",$$css:!0},top:{top:"x13vifvy",$$css:!0}},_={center:{justifyContent:"xl56j7k",$$css:!0},end:{justifyContent:"x13a6bvl",$$css:!0},start:{justifyContent:"x1nhvcw1",$$css:!0}},f={full:{maxWidth:"x193iq5w",$$css:!0},regular:{maxWidth:"x1xi1syu",$$css:!0}};function g(e){var t=o("react-compiler-runtime").c(24),n=e.align,a=e.filterToasts,i=e.maxVisible,l=e.maxWidth,u=e.position,g=e.xstyle,h=n===void 0?"start":n,y=i===void 0?1:i,C=l===void 0?"full":l,b=u===void 0?"bottom":u,v=r("useToasterStateManager")(),S;t[0]!==v?(S=function(){return v.getEmptyState()},t[0]=v,t[1]=S):S=t[1];var R=d(S),L=R[0],E=R[1],k,I;t[2]!==v?(k=function(){var e=v.registerView(E,0);return e.remove},I=[v],t[2]=v,t[3]=k,t[4]=I):(k=t[3],I=t[4]),c(k,I);var T=_[h],D=p[b],x;t[5]!==T||t[6]!==D||t[7]!==g?(x=[m.root,r("gkx")("20935")?null:r("gkx")("22885")?m.rootWorkplaceLegacy:m.rootBlue,T,D,g],t[5]=T,t[6]=D,t[7]=g,t[8]=x):x=t[8];var $;t[9]===Symbol.for("react.memo_cache_sentinel")?($={className:"x78zum5 xdt5ytf x3ct3a4 x193iq5w"},t[9]=$):$=t[9];var P;t[10]!==v?(P=function(t){v.expire(t)},t[10]=v,t[11]=P):P=t[11];var N;t[12]!==C||t[13]!==b?(N=function(t,n,o,a){return s.jsx(r("BaseToastAnimationInternal.react"),{expired:o,id:n,position:a,toasterPosition:b,xstyle:[m.toast,f[r("gkx")("22886")?"regular":C]],children:s.jsx(r("BaseContextualLayerAnchorRoot.react"),{children:t})},a)},t[12]=C,t[13]=b,t[14]=N):N=t[14];var M;t[15]!==a||t[16]!==y||t[17]!==P||t[18]!==N||t[19]!==L?(M=s.jsx("ul",babelHelpers.extends({},$,{children:s.jsx(r("XPlatReactToasterView.react"),{filterToasts:a,maxVisible:y,onExpireToast:P,toasterState:L,children:N})})),t[15]=a,t[16]=y,t[17]=P,t[18]=N,t[19]=L,t[20]=M):M=t[20];var w;return t[21]!==x||t[22]!==M?(w=s.jsx(r("BasePortal.react"),babelHelpers.extends({target:document.body,xstyle:x},r("CometVisualCompletionAttributes").IGNORE,{children:M})),t[21]=x,t[22]=M,t[23]=w):w=t[23],w}l.default=g}),98);
__d("FacebookAppIDs",[],(function(t,n,r,o,a,i){var e=Object.freeze({ABRA_WEB:0x4d31ba8e7e89d,ACCOUNT_QUALITY:293651901511648,ADS_AMI_BRAZIL_ONBOARDING:616624215510791,ADS_AMI_ONBOARDING:0x9f8db845dc737,ADS_EVENTS_MANAGER:0x770a46dafb86b,ADS_INCUBATOR:306597163753304,ADS_PAYMENT:0x6ff4d5e1ac7e,ADS_POWER_EDITOR:0x6c6c24b58878,ADS_WHATSAPP_MARKETING_MESSAGE_APP:871411417255253,ADS_WHATSAPP_MARKETING_MESSAGE_TEST_APP:755928642753606,ARMADILLO_WEB_DEVSERVER_CLIENT:0x39f22521e351a,AT_WORK_FOR_ANDROID:0x52007e36d879c,AT_WORK_FOR_IOS:0xd4f831db9136,BIG_COMMERCE_CATALOG_SYNC:483365901841566,BIZWEB:514771569228061,BOOSTED_INSTAGRAM_MEDIA_MOBILE:871306629649317,BOOSTED_PAGE:0x4126068d9e82b,BUSINESS_ACCOUNTS:436761779744620,BUSINESS_MANAGER_WORKPLACE_LOGIN:0xad49b0b25f84,CHATPROXY_WEB:0xd116b60e0618,COMMERCE_MANAGER:515496645328243,DOLLY:0xc7269b363f3c,EVENTS:2344061033,FACEBOOK_FOR_ANDROID:74769995908,FACEBOOK_FOR_ANDROID2:350685531728,FACEBOOK_FOR_EMERGING_MARKET_ANDROID:0xfa57ba2cd207,FACEBOOK_FOR_IPAD:0x9e1d0efc8522,FACEBOOK_FOR_IPHONE:6628568379,FACEBOOK_MEDIA_EFFECTS:0x652443a0f98c5,FACEBOOK_MESSENGER_FOR_ANDROID:0xe8d530ffbaef,FACEBOOK_SPACES_2:0x74ed7b6f24452,FBPAGES:2530096808,GAMES_INSTANT_SOAP_MITIGATION:0x479866448f2fe,HORIZON_WEB:351299233827255,INSTAGRAM:0x70ccb8b19e36,INSTAGRAM_BARCELONA_ANDROID:0xc262242628b7d,INSTAGRAM_BARCELONA_DESKTOP_WEB:0xd8b241bd3597,INSTAGRAM_BARCELONA_IOS:0x57e5b8a320745,INSTAGRAM_BARCELONA_MOBILE_WEB:0x5046b60d6e3e0,INSTAGRAM_CARBON:905593853150754,INSTAGRAM_FOR_ANDROID_ANALYTICS_ONLY:567067343352427,INSTAGRAM_WEB:0x453bf7349370c,INSTAGRAM_WEB_DESKTOP:936619743392459,INSTAGRAM_WEB_OCULUS_PWA:0x3ae327b82f808,INSTAGRAM_WEB_PWA_FOR_WINSTORE:487152425211411,INTERN_ADS_PREVIEW_GENERATION_APP:0x71ed0026bfc4d,KADABRA_VOICE:949958857019662,LIFT_STUDY_CREATION:367378623468359,LIFT_STUDY_VIEW:0x555782cd54234,M_SITE:412378670482,M_TOUCH_SITE:333176286769482,MAGENTO_CATALOG_SYNC:0xb1a27526b722,MARKETPLACE:0x5b56ce1cca15b,MARKETPLACE_SOAP_MITIGATION:359197717007187,MEDIA_MANAGER:0x7222ff5caba9d,MESSENGER_DESKTOP:0xb1b197d121cc,MESSENGER_DESKTOP_ARCHON_MACOS:451384735309667,MESSENGER_DESKTOP_ARCHON_WINDOWS:0x6dc8d8c927bd6,MESSENGERDOTCOM:772021112871879,MOBILE_ADS_MANAGER_FOR_ANDROID:438142079694454,MOBILE_ADS_MANAGER_FOR_IOS:0x541ccf22bd856,MOST_RECENT_FEED:608920319153834,MQTT_WEB:0xc815778a650a,OCULUS_ANDROID_TWILIGHT:624536201004543,OCULUS_IOS_TWILIGHT:0x8668046de342,OCULUS_IOS_TWILIGHT_DEV:0x5cf6459f9af74,OCULUS_IOS_TWILIGHT_IN_HOUSE:0x57bdfcd178eda,OCULUS_IOS_TWILIGHT_LOCAL:0x5f8be51836b2a,OCULUS_MSITE:0x399e2d8359725,OCULUS_WEBSITE:0x9d143786e51a6,PAGE_INBOX:0xf0047b325274,PHOTOS:2305272732,POSTS:0x3b3ea6ccca1e8,SAVED_FOR_LATER:586254444758776,SFCC_CATALOG_SYNC:414303402113306,SHOPIFY_API_INTEGRATION_2P:699341854433150,SHOPIFY_CONFIGURATION:0xad2be55025f82,SHOPIFY_PARTNER_INTEGRATION:372033192897621,TRANSLATIONS:4329892722,TURDUCKEN:400954310366822,UNIFIED_AMI_ONBOARDING:685960845183976,WHATSAPP_ANDROID:994766073959253,WHATSAPP_BUSINESS_ACCOUNT_MANAGER:0xcccd29987550,WHATSAPP_IPHONE:306069495113,WHATSAPP_KAIOS:412254059643627,WHATSAPP_MAC:346387865799334,WHATSAPP_SMB_ANDROID:473039703209605,WHATSAPP_SMB_IPHONE:450645302121512,WHATSAPP_SMB_WEB:656096963291760,WHATSAPP_VR:0x781bc9ae30ee,WHATSAPP_WEB:0x97e965c4439a,WHATSAPP_WINDOWS:0x6dd986e64fbb,WHATSAPP_WINDOWS_PHONE:0x6c3eee54771a9,WIT:0xb40d34a14679,WORKPLACE_BILLING:0x4cc2de2d9d4b4,WORKPLACE_DESKTOP:0xf3be6c242e39,WORKPLACE_FOR_EVERY_PHONE:0x47d5fb1e8a56c,WORKPLACE_FOR_WEB:0x5a31088e0c758,WORKROOMS:305152727005396,WORKROOMS_WEB:424940172743869,WWW:256281040558,WWW_COMET:0x7e36f3fcc43bc});i.default=e}),66);
__d("LogBrowserCrashReportsLowerRetentionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("856"),s=o("FalcoLoggerInternal").create("log_browser_crash_reports_lower_retention",e),u=s;l.default=u}),98);
__d("QPLCrashResiliencePlugin",["FBLogger","QPLEvent","QPLMarkerMap","QuickPerformanceLogger","RSTLogForCrash","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){if(r("gkx")("11050")!==!1){var e=new m().getListener();(s||(s=r("QuickPerformanceLogger"))).addListener(e)}}var c=100,d=10,m=(function(){function t(){var e=this;this.$2=!1,this.$1=new(r("QPLMarkerMap"))({totalLimit:c,perMarkerLimit:d}),o("RSTLogForCrash").logForCrashReadyPromise.getPromise().then(function(){e.$2=!0,e.$3()}).catch(function(){})}var n=t.prototype;return n.$3=function(){var e=this;(s||(s=r("QuickPerformanceLogger"))).activeMarkers.forEach(function(t,n){t.forEach(function(t,r){t.isCrashResilient&&e.$1.set(n,r,1)})}),this.$4()},n.$4=function(){if(this.$2){var e=this.$1.toString();o("RSTLogForCrash").isValidStringValue(e)||(e="{}",r("FBLogger")("qpl-crash-resilience-js").warn("Exceeded RST log limit")),o("RSTLogForCrash").logForCrash("active_qpls",e,o("RSTLogForCrash").RSTLogMode.VALID_UNTIL_NEXT_WRITE,{immediateFlush:!0})}},n.getListener=function(){var e=this,t=this;return{onMarkerStarted:function(n,r,o,a){t.onMarkerStarted(n,r,o,a)},onMarkerEnd:function(n,r,o,a,i){return e.onMarkerEnd(n,r,o,a,i)},onMarkerDrop:function(n,r,o,a){t.onMarkerDrop(n,r,o,a)}}},n.onMarkerStarted=function(n,r,a,i){var t,l=(t=i.isCrashResilient)!=null?t:!1;l&&(this.$1.set((e||(e=o("QPLEvent"))).getMarkerId(n),r,1),this.$4())},n.onMarkerEnd=function(n,r,a,i,l){var t,s=(t=l.isCrashResilient)!=null?t:!1;!l.passesSampling||!s||(this.$1.delete((e||(e=o("QPLEvent"))).getMarkerId(r),a),this.$4())},n.onMarkerDrop=function(n,r,a,i){var t,l=(t=i.isCrashResilient)!=null?t:!1;!i.passesSampling||!l||(this.$1.delete((e||(e=o("QPLEvent"))).getMarkerId(n),r),this.$4())},t})();l.startQPLCrashResilience=u}),98);
__d("RSTAdsManagerUtilsMainThread",["requireWeak"],(function(t,n,r,o,a,i,l){"use strict";var e=null;r("requireWeak")("AdsAccountStore",function(t){e=t});var s=null;r("requireWeak")("AdsPERouterHelper",function(e){s=e});function u(){try{var e,t,n,r,o,a=(e=(t=s)==null||(t=t.getRouter())==null?void 0:t.getQueryParams())!=null?e:{},i=a.selected_campaign_ids,l=a.selected_adset_ids,u=a.selected_ad_ids,c=(n=u==null?void 0:u.toArray())!=null?n:[],d=(r=l==null?void 0:l.toArray())!=null?r:[],m=(o=i==null?void 0:i.toArray())!=null?o:[];return{adIds:c.map(function(e){return String(e)}),adsetIds:d.map(function(e){return String(e)}),campaignIds:m.map(function(e){return String(e)})}}catch(e){return{adIds:[],adsetIds:[],campaignIds:[]}}}function c(){var t,n;return(t=(n=e)==null?void 0:n.getSelectedAccountID())!=null?t:"0"}function d(){var t,n;return(t=(n=e)==null?void 0:n.getSelectedBusinessID())!=null?t:"0"}function m(){return{}}l.getAdEntityIds=u,l.getAdAccountID=c,l.getBusinessID=d,l.getAdsAnnotations=m}),98);
__d("RSTExternalLoggingDataStoreMainThread",["FBLogger","RSTConfig","RSTLogForCrash","getErrorSafe","nextCrashLoggingSpanId"],(function(t,n,r,o,a,i,l){var e=500,s=5e3,u=500,c=(function(){function t(){this.$5=!1,this.$1=new Map,this.$2=new Map,this.$3=new Map,this.$4=new Map}var n=t.prototype;return n.isValidValue=function(t){return t==null||t.length<=s},n.$6=function(n,o,a){return n.length>e||!this.isValidValue(o)?(this.$5||r("FBLogger")("responsive-tracker").warn(a,n,o),this.$5=!0,!1):this.totalStoredPairCount()>u?(this.$5||r("FBLogger")("responsive-tracker").warn("Too many key-value pairs for external span logging data (ignored)"),this.$5=!0,!1):!0},n.logSpanEnd=function(t){this.$4.delete(t)},n.logSpanStart=function(t,n){if(n===void 0&&(n=null),!this.$6(t,n,"Invalid key or annotation for external logging data (ignored), key: %s, annotation: %s"))return-1;var e=this.$7(t,n),r=o("nextCrashLoggingSpanId").nextCrashLoggingSpanId();return this.$4.set(r,{id:r,name:t,start:Date.now(),annotation:e}),r},n.log=function(t,n,a){if(!this.$6(t,n,"Invalid key or value for external logging data (ignored), key: %s, value: %s"))return!1;var e=!1;if(a===o("RSTLogForCrash").RSTLogMode.VALID_UNTIL_NEXT_HEARTBEAT)e=this.$8(this.$2,t,n),this.$2.set(t,n);else if(a===o("RSTLogForCrash").RSTLogMode.VALID_UNTIL_NEXT_WRITE)e=this.$8(this.$1,t,n),this.$1.set(t,n);else if(a===o("RSTLogForCrash").RSTLogMode.VALID_FOR_5_SECONDS||a===o("RSTLogForCrash").RSTLogMode.VALID_FOR_2_MINUTES){var i;e=!0,this.$3.set(t,{value:n,createTime:Date.now(),expirationTime:(i=o("RSTLogForCrash").getExpirationTime(a))!=null?i:Date.now()})}else r("FBLogger")("responsive-tracker").warn("Invalid logMode");return e},n.$8=function(t,n,r){return!t.has(n)||t.get(n)!==r},n.totalStoredPairCount=function(){return this.$1.size+this.$2.size+this.$3.size+this.$4.size},n.get=function(t){if(this.$2.has(t))return this.$2.get(t)||null;if(this.$1.has(t))return this.$1.get(t)||null;var e=this.$3.get(t);if(e!=null){if(Date.now()<e.expirationTime)return e.value;this.$3.delete(t)}return null},n.clear=function(){this.$1.clear(),this.clearNextHeartbeatStore()},n.clearNextHeartbeatStore=function(){this.$2.clear()},n.clearSpanStore=function(){this.$4.clear()},n.getAllSpanData=function(){var e={};return this.$4.forEach(function(t,n){e[""+n]=t}),e},n.$9=function(){var e=Date.now();for(var t of this.$3){var n=t[0],r=t[1];e>=r.expirationTime&&this.$3.delete(n)}},n.getTimedStoreData=function(){return this.$9(),Object.fromEntries(Array.from(this.$3.entries()).map(function(e){var t=e[0],n=e[1];return[t,n.value]}))},n.getAll=function(){return babelHelpers.extends({},this.getTimedStoreData(),Object.fromEntries(this.$1),Object.fromEntries(this.$2))},n.$7=function(t,n){var e=r("RSTConfig").logSpanAnnotationsMapping.get(t);if(e!=null)try{return e(t,n)}catch(e){r("FBLogger")("responsive-tracker").catching(r("getErrorSafe")(e)).warn("Failed to attach built-in annotations for key %s",t)}return n},t})(),d=new c;l.loggingDataStore=d}),98);
__d("RSTClearExternalLoggingDataStoreMainThread",["RSTEvents","RSTEventsMessageQueue","RSTExternalLoggingDataStoreMainThread"],(function(t,n,r,o,a,i,l){"use strict";function e(){o("RSTExternalLoggingDataStoreMainThread").loggingDataStore.clearNextHeartbeatStore()}function s(){o("RSTEventsMessageQueue").subscribe(o("RSTEvents").RSTEvent.HEART_BEAT,e),o("RSTEventsMessageQueue").subscribe(o("RSTEvents").RSTEvent.BROWSER_TAB_BACKGROUND,e),o("RSTEventsMessageQueue").subscribe(o("RSTEvents").RSTEvent.BROWSER_TAB_FOREGROUND,e)}l.registerClearExternalLoggingData=s}),98);
__d("RSTUtilsMainThread",["CurrentUser","FacebookAppIDs","RSTConfig"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map;function s(t){if(e.has(t)){var n,r=(n=e.get(t))!=null?n:0;return r<=0?(e.delete(t),!1):(e.set(t,r-1),!0)}return e.set(t,Math.floor(Math.random()*10)),!0}var u=r("CurrentUser").getAppID();function c(e){switch(e){case""+r("FacebookAppIDs").ADS_POWER_EDITOR:return"Ads";case""+r("FacebookAppIDs").WWW_COMET:return"Comet";case""+r("FacebookAppIDs").ADS_EVENTS_MANAGER:return"Business";default:return"(Unset-in-RST)"}}var d=new Set([r("FacebookAppIDs").ADS_POWER_EDITOR,r("FacebookAppIDs").ADS_EVENTS_MANAGER,r("FacebookAppIDs").BIZWEB].map(function(e){return""+e})),m=u!=null&&d.has(u),p=c(u);function _(e){if(e==null)return null;for(var t of e)if(!r("RSTConfig").isReactComponentNameBlocked(t))return t;return null}function f(e,t,n){if(n===void 0&&(n=r("RSTConfig").DEFAULT_REACT_COMPONENT_CONTEXT_SIZE),e==null)return null;var o=new Set,a=[];for(var i of e){if(a.length>=n)break;!o.has(i)&&!t(i)&&(a.push(i),o.add(i))}return a}l.shouldSkipProcessingIncident=s,l.isMonetizationApp=m,l.appName=p,l.getAllowListedComponentName=_,l.getReactComponentContext=f}),98);
__d("RSTIncidentLoggingMainThread",["Env","InteractionTracingConfigDefault","QPLEvent","RSTConfig","RSTConstants","RSTEvents","RSTEventsMessageQueue","RSTUtils","RSTUtilsMainThread","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("LogBrowserCrashReportsLowerRetentionFalcoEvent").__setRef("RSTIncidentLoggingMainThread"),c=new Set;function d(){return c}function m(e){var t,n,a,i,l,s,u,c,d,m,_=e.unresponsiveEvent,h=_!=null?Date.now()-(_==null?void 0:_.detectTime):0,y=_==null?void 0:_.lastHeartBeatMetadata,C=(y==null?void 0:y.brsid)!=null?String(y.brsid):null,b=(t=y==null?void 0:y.cpp)!=null?t:null,v=(n=y==null?void 0:y.ccrt)!=null?n:null,S=(a=y==null?void 0:y.cr)!=null?a:null,R=(i=y==null?void 0:y.annotations)!=null?i:{},L=(l=y==null?void 0:y.spans)!=null?l:{},E=e.isRecoverable?r("RSTConstants").reportReason.recoverable:(_==null?void 0:_.incidentType)!==r("RSTConstants").incidentType.unexpectedExit?r("RSTConstants").reportReason.unrecoverable:r("RSTConstants").reportReason.unexpectedExit,k=_==null?void 0:_.traces,I=g(k),T=I.qplMarkerId,D=I.tracePolicy,x=f(_==null?void 0:_.lastTrace);return{application_name:o("RSTUtilsMainThread").appName,reason:E,url:o("RSTUtils").sanitizeURL(y==null?void 0:y.url),age:String(h),brsid:C,qpl_event_marker_id:o("RSTUtils").intToString(T),trace_policy:D,last_qpl_event_marker_id:o("RSTUtils").intToString(x.qplMarkerId),last_trace_policy:x.tracePolicy,ad_account_id:(s=y==null?void 0:y.i2)!=null?s:"0",business_id:(u=y==null?void 0:y.i3)!=null?u:"0",canonical_route:v,client_push_phase:b,client_revision:S,freeze_time_in_ms:String((c=_==null?void 0:_.unrecoverLastsForMs)!=null?c:0),normalized_component_stack:(d=y==null?void 0:y.rcs)!=null?d:[],session_start_timestamp_in_ms:String((m=y==null?void 0:y.st)!=null?m:""),rst_annotations:p(R,L,_)}}function p(e,t,n){var o,a=[];for(var i of Object.keys(e))a.push(i+":"+e[i]);var l=n==null?void 0:n.detectTime;for(var u of Object.keys(t)){var c,d=t[u],m=l!=null?l-d.start:0;a.push("span:"+d.name+":"+((c=d.annotation)!=null?c:"")+":"+m)}return a.push("processingBrsid:"+((o=(s||(s=r("Env"))).brsid)!=null?o:"")),_(a,n),a}function _(e,t){if(!r("RSTConfig").shouldCollectAdditionalMetadata())return e;var n=t==null?void 0:t.lastTrace,o=n==null?void 0:n.endTimestamp,a=t==null?void 0:t.detectTime;o!=null&&a!=null&&e.push("msSinceLastInteractionEnds:"+(a-o));var i=t!=null?t:{},l=i.incidentID;return l!=null&&e.push("incidentID:"+l),(t==null?void 0:t.isFirstUnrecoverable)===!0&&e.push("isFirstUnrecoverable:true"),(t==null?void 0:t.hasOverlappingResponsiveIndicents)===!0&&e.push("hasOverlappingResponsiveIndicents:true"),(t==null?void 0:t.hasDecryptionError)===!0&&e.push("hasDecryptionError:true"),e}function f(t){if(t==null)return{qplMarkerId:null,tracePolicy:null};if(t.qplEvent==null)return{qplMarkerId:null,tracePolicy:null};var n=(e||(e=o("QPLEvent"))).getMarkerId(t.qplEvent),r=t.tracePolicy;return{qplMarkerId:n,tracePolicy:r}}function g(e){if(e==null)return{qplMarkerId:null,tracePolicy:null};var t=0,n=null;return e.forEach(function(e){(e==null?void 0:e.qplEvent)==null||e.tracePolicy===o("InteractionTracingConfigDefault").DEFAULT_TRACING_CONFIG.defaultTracePolicy||e.startTime>t&&(t=e.startTime,n=e)}),f(n)}function h(e,t){u.onReady(function(n){var r=n.log;r(function(){return m({unresponsiveEvent:e,isRecoverable:t})})})}function y(){r("RSTConfig").SHOULD_SAMPLE_RECOVERABLE&&o("RSTEventsMessageQueue").subscribe(o("RSTEvents").RSTEvent.RECOVERABLE_UNRESPONSIVENESS,function(e){var t=e.unresponsiveEventRecord;t==null||c.has(t.incidentID)||(c.add(t.incidentID),o("RSTUtils").debugLogImportant("logging recoverable unresponsiveness event"),h(t,!0))}),o("RSTEventsMessageQueue").subscribe(o("RSTEvents").RSTEvent.CRASH_INCIDENT,function(e){var t=e.unresponsiveEventRecord;if(t==null||c.has(t.incidentID)){o("RSTUtils").debugLogImportant("not logging incident because it was already logged");return}if(r("RSTConfig").ONE_UNRECOVERABLE_INCIDENT_PER_SESSION&&t.isFirstUnrecoverable!==!0){var n,a=(n=t.incidentType)!=null?n:"";o("RSTUtils").debugLogImportant("not logging unrecoverable "+a+" event (because it's not the first incident in the session)");return}c.add(t.incidentID),o("RSTUtils").debugLogImportant("logging unrecoverable unresponsiveness event:"),h(t,!1)})}l.getLoggedIncidentIDs=d,l.registerIncidentLogging=y}),98);
__d("RSTLocalStorageMainThread",["FBLogger","WebStorage","fb-error"],(function(t,n,r,o,a,i,l){"use strict";var e,s="RSTData",u=200,c=2880*60*1e3,d=(function(){function t(){this.$2=!0,this.$1=(e||(e=r("WebStorage"))).getLocalStorage(),this.probeAndInit()}var n=t.prototype;return n.$3=function(t,n){var e=r("fb-error").getErrorSafe(t);r("FBLogger")("responsive-tracker").catching(e).warn("%s error in RSTLocalStorage",n)},n.$4=function(){if(!this.$2)return{};try{var e,t=(e=this.$1)==null?void 0:e.getItem(s),n=t!=null?JSON.parse(t):{};return typeof n=="object"&&n!==null?n:{}}catch(e){return this.$3(e,"readStore"),{}}},n.$5=function(t){if(this.$2)try{var e;(e=this.$1)==null||e.setItem(s,JSON.stringify(t))}catch(e){this.$3(e,"writeStore");return}},n.probeAndInit=function(){if(this.$1==null){this.$2=!1;return}var e=this.$1;try{var t=e.getItem(s);if(t!=null)return;e.setItem(s,"{}")}catch(e){this.$3(e,"probeAndInit"),this.$2=!1}},n.cleanUpExpiredEntries=function(){if(this.$2)try{var e=this.$6(this.$4());this.$5(e)}catch(e){this.$3(e,"cleanUpExpiredEntries");return}},n.$6=function(t){var e=Date.now();for(var n of Object.entries(t)){var r=n[0],o=n[1];(e-o.lastWriteTime>c||typeof o.lastWriteTime!="number")&&delete t[r]}return t},n.$7=function(t){var e=Object.entries(t);if(e.length<=u)return t;e.sort(function(e,t){return e[1].lastWriteTime-t[1].lastWriteTime});var n=e.slice(e.length-u);return Object.fromEntries(n)},n.set=function(t,n){if(this.$2){var e=this.$4();e=this.$6(e),e[t]={value:n,lastWriteTime:Date.now()},e=this.$7(e),this.$5(e)}},n.get=function(t){if(!this.$2)return null;var e=this.$4(),n=e[t];return n?n.value:null},n.delete=function(t){try{if(!this.$2)return;var e=this.$4();delete e[t],this.$5(e)}catch(e){this.$3(e,"delete");return}},n.has=function(t){if(!this.$2)return!1;var e=this.$4(),n=e[t];return n?Date.now()-n.lastWriteTime<=c:!1},n.clear=function(){this.$2&&this.$5({})},n.keys=function(){if(!this.$2)return[];var e=this.$6(this.$4());return Object.keys(e)},n.entries=function(){if(!this.$2)return[];var e=this.$6(this.$4());return Object.entries(e).map(function(e){var t=e[0],n=e[1];return[t,n.value]})},t})(),m=new d,p=m;l.default=p}),98);
__d("RSTMarkFirstUnrecoverableMainThread",["FBLogger","RSTLocalStorageMainThread","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e="rst-first-unrecoverable-marking";async function s(t){var n=t.sessionID,o=t.incidentID,a=n+":first-unrecoverable";try{"locks"in navigator&&await navigator.locks.request(e,function(){r("RSTLocalStorageMainThread").has(a)||(r("RSTLocalStorageMainThread").set(a,o),t.isFirstUnrecoverable=!0)})}catch(e){r("FBLogger")("responsive-tracker").catching(r("getErrorSafe")(e)).warn("Failed to acquire lock for marking first unrecoverable incident")}}l.markFirstUnrecoverableIncident=s}),98);
__d("RSTSessionID",["Env","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null;function u(){if(s!=null)return s;var t=(e||(e=r("Env"))).brsid!=null?""+(e||(e=r("Env"))).brsid:r("uuidv4")(),n="rst-"+Date.now();return s=n+"-"+t,s}l.getSessionID=u}),98);
__d("ResponsiveTrackerMainThread",["ClientServiceWorkerMessage","FBLogger","RSTCloseObserver","RSTConfig","RSTConstants","RSTEvents","RSTEventsMessageQueue","RSTEventsRegisterUseCasesMainThread","RSTIncidentLoggingMainThread","RSTIndexedDBSafe","RSTLocalStorageMainThread","RSTMarkFirstUnrecoverableMainThread","RSTMetadataCollectorMainThread","RSTMetadataMainThread","RSTSessionID","RSTUtils","RSTUtilsMainThread","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";r("RSTEventsRegisterUseCasesMainThread")();var e=(function(){function e(){this.$1=null,this.$2=new Set,this.$3=!1,this.$4=!1}var t=e.prototype;return t.init=function(t){this.$1=t,this.startLoggingUnresponsiveEvents(),this.startSendingHeartBeatToWorker(),this.startMonitorPageHiding(),this.startMonitoringPageUnload(),o("RSTMetadataCollectorMainThread").start(),r("RSTLocalStorageMainThread").probeAndInit(),r("RSTIndexedDBSafe").maybeClearObsoleteIncidents()},t.startLoggingUnresponsiveEvents=function(){var e=this;this.logAndDeleteUnresponsiveEvents(),window.setInterval(function(){e.logAndDeleteUnresponsiveEvents()},r("RSTConfig").MAIN_THREAD_LOGGING_INTERVAL_MS)},t.startSendingHeartBeatToWorker=function(){var e=this;window.setInterval(function(){e.postEvent(o("RSTEvents").RSTEvent.HEART_BEAT)},r("RSTConfig").HEART_BEAT_INTERVAL_MS)},t.startMonitorPageHiding=function(){var e=this;document.addEventListener("visibilitychange",function(){document.hidden?e.postEvent(o("RSTEvents").RSTEvent.BROWSER_TAB_BACKGROUND):e.postEvent(o("RSTEvents").RSTEvent.BROWSER_TAB_FOREGROUND)})},t.startMonitoringPageUnload=function(){o("RSTCloseObserver").initPageCloseObserver()},t.postEvent=function(t,n){n===void 0&&(n=o("RSTMetadataMainThread").getMainThreadMetadata());var e={type:r("RSTConfig").MESSAGE_TYPE,event:t,eventTime:Date.now(),DOMData:{hidden:document.hidden},sessionID:o("RSTSessionID").getSessionID(),metadata:n};o("RSTEventsMessageQueue").notify(t,{mainToWorkerMessage:e}),this.$5(e),this.$6(e)},t.postEventLightweight=function(t,n){n===void 0&&(n=o("RSTMetadataMainThread").getMainThreadMetadataWithExternalAnnotationsOnly());var e={type:r("RSTConfig").MESSAGE_TYPE,event:t,eventTime:Date.now(),DOMData:{hidden:document.hidden},sessionID:o("RSTSessionID").getSessionID(),metadata:n};o("RSTEventsMessageQueue").notify(t,{mainToWorkerMessage:e}),this.$5(e),this.$6(e)},t.$6=function(t){try{var e;(e=this.$1)==null||e.postMessage(t)}catch(e){var n;if(this.$4)return;var o=r("getErrorSafe")(e);r("FBLogger")("responsive-tracker").catching(o).warn((n=o.message)!=null?n:"Failed to post message to web worker"),this.$4=!0}},t.$5=function(t){if(r("RSTConfig").ENABLE_SERVICE_WORKER)try{new(r("ClientServiceWorkerMessage"))(r("RSTConfig").MESSAGE_TYPE,t).sendViaController()}catch(t){var e;if(this.$3)return;var n=r("getErrorSafe")(t);r("FBLogger")("responsive-tracker").catching(n).warn((e=n.message)!=null?e:"Failed to post message to service worker"),this.$3=!0}},t.$7=function(t){var e;return Date.now()-((e=t.remoteLoggerProposeTime)!=null?e:0)>r("RSTConfig").INCIDENT_PROPOSED_PROCESSOR_OWNERSHIP_EXPIRE_MS},t.$8=async function(t,n){if(t!=null){var e=t.incidentID;if(o("RSTIncidentLoggingMainThread").getLoggedIncidentIDs().has(e)){n.add(e);return}var a=t.sessionID===o("RSTSessionID").getSessionID();if(a){t.hasRecovered=!0,o("RSTEventsMessageQueue").notify(o("RSTEvents").RSTEvent.RECOVERABLE_UNRESPONSIVENESS,{unresponsiveEventRecord:t}),n.add(e);return}var i=Date.now()-t.lastHeartBeatTimeStamp;if(!(i<r("RSTConfig").WAIT_MS_FOR_OTHER_SESSION_BEFORE_PROCESSING)){if(i>r("RSTConfig").OBSOLETE_PENDING_INCIDENT_THRESHOLD_MS){if(o("RSTUtilsMainThread").shouldSkipProcessingIncident(e))return;o("RSTUtils").debugLogImportant("pending incident "+e+" cleaned"),n.add(e);return}var l=t.remoteLoggerSessionID==null||this.$7(t);if(l){await r("RSTIndexedDBSafe").updateIncidentInDB(function(t){return t.incidentID!==e?!1:(o("RSTUtils").debugLogImportant("propose as logger for incident "+t.incidentID),t.remoteLoggerSessionID=o("RSTSessionID").getSessionID(),t.remoteLoggerProposeTime=Date.now(),!0)});return}if(t.remoteLoggerSessionID===o("RSTSessionID").getSessionID()&&!this.$7(t))if(o("RSTUtils").debugLogImportant("act as logger for incident "+e),t.hasRecovered)o("RSTEventsMessageQueue").notify(o("RSTEvents").RSTEvent.RECOVERABLE_UNRESPONSIVENESS,{unresponsiveEventRecord:t}),n.add(e);else{if(t.incidentType!==r("RSTConstants").incidentType.unexpectedExit&&t.unrecoverLastsForMs<r("RSTConfig").UNRECOVER_LASTS_THRESHOLD_MS)return;!r("RSTConfig").ONE_UNRECOVERABLE_INCIDENT_PER_SESSION||!this.$2.has(t.sessionID)?(await o("RSTMarkFirstUnrecoverableMainThread").markFirstUnrecoverableIncident(t),o("RSTEventsMessageQueue").notify(o("RSTEvents").RSTEvent.CRASH_INCIDENT,{unresponsiveEventRecord:t}),this.$2.add(t.sessionID)):o("RSTUtils").debugLogImportant("skip logging unrecoverable incident "+e+" "+("from session "+t.sessionID+" since it has been logged")),n.add(e)}}}},t.logAndDeleteUnresponsiveEvents=async function(){try{o("RSTEventsMessageQueue").notify(o("RSTEvents").RSTEvent.CHECKING_INDEXDB_FOR_EVENTS,{});var e=await r("RSTIndexedDBSafe").readEventsFromDB(),t=new Set;for(var n of e)try{await o("RSTUtils").scheduleYield(),await this.$8(n,t)}catch(e){var a,i=r("getErrorSafe")(e);r("FBLogger")("responsive-tracker").catching(i).warn((a=i.message)!=null?a:"Failed to process incident")}await r("RSTIndexedDBSafe").clearIncidentFromDB(t)}catch(e){var l,s=r("getErrorSafe")(e);r("FBLogger")("responsive-tracker").catching(s).warn((l=s.message)!=null?l:"Failed to log incidents")}},e})(),s=new e,u=s;l.default=u}),98);
__d("RSTDebugConsoleMainThread",["RSTEvents","RSTEventsMessageQueue","RSTUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(){}l.registerDebugConsole=e}),98);
__d("RSTEventsRegisterUseCasesMainThread",["RSTClearExternalLoggingDataStoreMainThread","RSTClearInteractionDataMainThread","RSTDebugConsoleMainThread","RSTIncidentLoggingMainThread"],(function(t,n,r,o,a,i,l){"use strict";function e(){o("RSTDebugConsoleMainThread").registerDebugConsole(),o("RSTIncidentLoggingMainThread").registerIncidentLogging(),o("RSTClearInteractionDataMainThread").registerClearInteractionData(),o("RSTClearExternalLoggingDataStoreMainThread").registerClearExternalLoggingData()}l.default=e}),98);
__d("RSTClearInteractionDataMainThread",["RSTEvents","RSTEventsMessageQueue","RSTInteractionDataMainThread"],(function(t,n,r,o,a,i,l){"use strict";function e(){o("RSTEventsMessageQueue").subscribe(o("RSTEvents").RSTEvent.HEART_BEAT,o("RSTInteractionDataMainThread").clearInteractionData),o("RSTEventsMessageQueue").subscribe(o("RSTEvents").RSTEvent.BROWSER_TAB_BACKGROUND,o("RSTInteractionDataMainThread").clearInteractionData),o("RSTEventsMessageQueue").subscribe(o("RSTEvents").RSTEvent.BROWSER_TAB_FOREGROUND,o("RSTInteractionDataMainThread").clearInteractionData)}l.registerClearInteractionData=e}),98);
__d("RSTInteractionTrackingMainThread",["RSTConfig","RSTEvents","RSTMetadataMainThread","ResponsiveTrackerMainThread","one-trace"],(function(t,n,r,o,a,i,l){"use strict";var e=new Set(["RESPONSIVENESS","INP","LONGTASK","UNKNOWN"]);function s(){r("RSTConfig").SHOULD_CAPTURE_INTERACTION_DATA&&(r("one-trace").subscribe("trace-policy-set",function(t){if(!e.has(t.traceType)){var n=o("RSTMetadataMainThread").getMainThreadMetadata();r("ResponsiveTrackerMainThread").postEvent(o("RSTEvents").RSTEvent.TRACE_POLICY_SET,babelHelpers.extends({trace:babelHelpers.extends({},t)},n))}}),r("one-trace").subscribe("trace-end",function(t){if(!e.has(t.traceType)){var n=o("RSTMetadataMainThread").getMainThreadMetadata();r("ResponsiveTrackerMainThread").postEvent(o("RSTEvents").RSTEvent.TRACE_END,babelHelpers.extends({trace:babelHelpers.extends({},t,{endTimestamp:Date.now()})},n))}}))}l.start=s}),98);
__d("RSTRecoverableUnresponsivenessTrackingMainThread",["RSTConfig","one-trace","performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Set(["INP","LONGTASK"]);function u(){r("one-trace").subscribe("trace-end",function(e){s.has(e.traceType)&&d.getInstance().addEvent(babelHelpers.extends({},e))})}function c(){return d.getInstance().getStats()}var d=(function(){function t(){this.WINDOW_MS=r("RSTConfig").TRACE_STATS_WINDOW_SIZE_MS,this.MAX_EVENTS=r("RSTConfig").TRACE_STATS_MAX_QUEUE_SIZE,this.eventQueue=[]}t.getInstance=function(){return t.instance||(t.instance=new t),t.instance};var n=t.prototype;return n.addEvent=function(t){if(!(t.startTime==null||t.endTime==null)){var e={traceType:t.traceType,startTime:t.startTime,duration:t.endTime-t.startTime,endTime:t.endTime};this.eventQueue.push(e),this.cleanupOldEvents(),this.eventQueue.length>=this.MAX_EVENTS&&this.eventQueue.shift()}},n.getStats=function(){this.cleanupOldEvents();var e={};this.eventQueue.forEach(function(t){t.traceType in e?(e[t.traceType].count++,e[t.traceType].totalDurationMs+=t.duration):e[t.traceType]={count:1,totalDurationMs:t.duration,averageDurationMs:0}});for(var t of Object.keys(e)){var n=e[t].totalDurationMs/e[t].count;e[t].averageDurationMs=Math.floor(n)}return e},n.cleanupOldEvents=function(){for(var t=(e||(e=r("performanceNow")))();this.eventQueue.length>0;){var n=this.eventQueue[0];if(n.endTime>=t-this.WINDOW_MS)break;this.eventQueue.shift()}},t})();d.instance=null,l.start=u,l.getStats=c}),98);
__d("RSTMetadataCollectorMainThread",["FBLogger","QPLCrashResiliencePlugin","RSTInteractionTrackingMainThread","RSTRecoverableUnresponsivenessTrackingMainThread","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=!1;function s(){if(!e)try{o("RSTInteractionTrackingMainThread").start(),o("RSTRecoverableUnresponsivenessTrackingMainThread").start(),o("QPLCrashResiliencePlugin").startQPLCrashResilience(),e=!0}catch(e){r("FBLogger")("responsive-tracker").catching(r("getErrorSafe")(e)).warn("Failed to start RST metadata collector")}}l.start=s}),98);
__d("RSTCloseObserver",["FBLogger","RSTConfig","RSTEvents","RSTSessionID","ResponsiveTrackerMainThread","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(r("RSTConfig").ENABLE_SERVICE_WORKER){var t=e.persisted?o("RSTEvents").RSTEvent.BROWSER_TAB_BACKGROUND:o("RSTEvents").RSTEvent.BROWSER_TAB_CLOSED,n={type:r("RSTConfig").MESSAGE_TYPE,event:t,eventTime:Date.now(),DOMData:{hidden:!1},sessionID:o("RSTSessionID").getSessionID(),metadata:null};try{if("serviceWorker"in navigator){var a;(a=navigator.serviceWorker)==null||(a=a.controller)==null||a.postMessage({command:"responsiveness",data:n})}}catch(e){r("FBLogger")("responsive-tracker").catching(r("getErrorSafe")(e)).warn("Failed to send quick browser tab close event to worker")}try{r("ResponsiveTrackerMainThread").postEvent(t)}catch(e){r("FBLogger")("responsive-tracker").catching(r("getErrorSafe")(e)).mustfix("Failed to send browser tab close/background event to worker")}}}function s(){window.addEventListener("pagehide",e)}l.initPageCloseObserver=s}),98);
__d("RSTInteractionDataMainThread",["ALChannel","AdsALReactUtils","FBLogger","RSTConfig","RSTEvents","RSTMetadataMainThread","RSTUtilsMainThread","ResponsiveTrackerMainThread","getErrorSafe","getReactComponentStackFromDOMElement_THIS_CAN_BREAK"],(function(t,n,r,o,a,i,l){"use strict";var e=5,s=[],u=100,c=10,d=[];function m(t){s.push(t),s.length>e&&s.shift(),d.push(t),d.length>u&&d.shift()}function p(){s.length=0}function _(){var e=s;return e[e.length-1]}function f(){return[].concat(s)}function g(e){return e===void 0&&(e=c),d.slice(-1*e)}function h(e,t){var n=e!=null?e:{},a=n.name,i=n.stack,l=n.context;(a!=null||i!=null)&&m({componentName:a,componentStack:i,componentContext:l,eventType:"click",eventTime:Date.now(),componentText:t});try{var s=o("RSTMetadataMainThread").getMainThreadMetadata();r("ResponsiveTrackerMainThread").postEvent(o("RSTEvents").RSTEvent.INTERACTION_DATA,babelHelpers.extends({},s))}catch(e){r("FBLogger")("responsive-tracker").catching(r("getErrorSafe")(e)).mustfix("Failed to send interaction data to worker")}}y();function y(){r("RSTConfig").SHOULD_CAPTURE_INTERACTION_DATA&&(o("RSTUtilsMainThread").isMonetizationApp?b():C())}function C(){window.addEventListener("click",function(e){var t=e.target;if(t instanceof Element)try{var n=r("getReactComponentStackFromDOMElement_THIS_CAN_BREAK")(t),a={name:o("RSTUtilsMainThread").getAllowListedComponentName(n),stack:n!=null?n:[],context:o("RSTUtilsMainThread").getReactComponentContext(n,r("RSTConfig").isReactComponentNameBlocked)},i=v(t,a);h(a,i)}catch(e){r("FBLogger")("responsive-tracker").catching(r("getErrorSafe")(e)).mustfix("Failed to get react component stack from Shim")}},!0)}function b(){r("ALChannel").addListener("al_ui_event_capture",function(e){if(e.event==="click")try{var t,n={name:e.reactComponentName,stack:(t=e.reactComponentStack)!=null?t:[],context:o("RSTUtilsMainThread").getReactComponentContext(e.reactComponentStack,o("AdsALReactUtils").isComponentNameBlocked)},a=e.targetElement,i=v(a,n);h(n,i)}catch(e){r("FBLogger")("responsive-tracker").catching(r("getErrorSafe")(e)).mustfix("Failed to get react component stack from AL")}})}function v(e,t){var n;if(!r("RSTConfig").SHOULD_CAPTURE_INTERACTION_ELEMENT_TEXT||(t==null?void 0:t.stack)==null)return null;for(var o of t.stack)if(r("RSTConfig").isReactComponentTextBlocked(o))return null;var a=(n=e==null?void 0:e.textContent)!=null?n:null;if(typeof a=="string"){a=a.trim();var i=r("RSTConfig").ELEMENT_TEXT_SIZE_LIMIT;a.length>i&&(a=a.substr(0,i)+("... ("+(a.length-i)+" code units omitted)"))}return a===""?null:a}l.clearInteractionData=p,l.getLastInteractionDataSinceLastMessageToWorker=_,l.getInteractionDataSinceLastMessageToWorker=f,l.getInteractionHistory=g}),98);
__d("RSTMetadataMainThread",["CurrentCanonicalRoute","CurrentUser","Env","MemoryUtils","RSTAdsManagerUtilsMainThread","RSTConfig","RSTExternalLoggingDataStoreMainThread","RSTInteractionDataMainThread","RSTRecoverableUnresponsivenessTrackingMainThread","RSTUtils","SiteData","performance"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){var e=Date.now(),t=babelHelpers.extends({},o("RSTAdsManagerUtilsMainThread").getAdsAnnotations());m(t);var n=Date.now();return t.rstAnnotationsCollectedInMs=""+(n-e),t}function c(){var e=babelHelpers.extends({},o("RSTAdsManagerUtilsMainThread").getAdsAnnotations());return r("RSTConfig").shouldCollectAdditionalMetadata()&&y(e),e}function d(){return r("RSTConfig").shouldCollectAdditionalMetadata()?o("RSTExternalLoggingDataStoreMainThread").loggingDataStore.getAllSpanData():{}}function m(e){r("RSTConfig").shouldCollectAdditionalMetadata()&&(g(e),C(e),b(e),y(e),p(e),h(e))}function p(e){var t=o("RSTAdsManagerUtilsMainThread").getAdEntityIds();e.selectedAdIds=t.adIds.join(","),e.selectedAdSetIds=t.adsetIds.join(","),e.selectedCampaignIds=t.campaignIds.join(",")}function _(){try{var e,t=(e=o("RSTInteractionDataMainThread").getLastInteractionDataSinceLastMessageToWorker())==null?void 0:e.componentStack;return t!=null?t:[]}catch(e){return[]}}function f(){try{var e,t=(e=o("RSTInteractionDataMainThread").getLastInteractionDataSinceLastMessageToWorker())==null?void 0:e.componentContext;return t!=null?t:[]}catch(e){return[]}}function g(e){if(r("RSTConfig").SHOULD_COLLECT_RST_ANNOTATIONS_INTERACTION_DATA){var t=o("RSTInteractionDataMainThread").getInteractionDataSinceLastMessageToWorker().map(function(e){return e.componentName}).filter(function(e){return e!=null}).join(",");t!==""&&(e.interactedComponentsSinceLastResponsiveState=t);var n=f();n.length>0&&(e.interactedComponentContextSinceLastResponsiveState=n.join(" < "));var a=o("RSTInteractionDataMainThread").getInteractionHistory().map(function(e){return e.componentName}).filter(function(e){return e!=null}).join(",");a!==""&&(e.interactedComponentHistory=a);var i=o("RSTInteractionDataMainThread").getInteractionHistory().map(function(e){return o("RSTUtils").getInteractionDetail(e)}).filter(function(e){return e!=null}).join(",");i!==""&&(e.interactionDetailHistory=i)}}function h(e){e.crashDataOncall=r("RSTConfig").PROJECT_ONCALL,e.crashLogger=r("RSTConfig").PROJECT_NAME}function y(e){if(r("RSTConfig").SHOULD_COLLECT_RST_ANNOTATIONS_LOG_FOR_CRASH){var t=o("RSTExternalLoggingDataStoreMainThread").loggingDataStore.getAll(),n=function(a){r("RSTConfig").BLOCKED_ANNOTATION_KEYS.some(function(e){return e.test(a)})||(e[o("RSTUtils").getExternalAnnotationKey(a)]=t[a])};for(var a of Object.keys(t))n(a)}}function C(e){var t=o("MemoryUtils").getCurrentMemory({runGC:!1}),n=t.jsHeapSizeLimit,r=t.usedJSHeapSize,a=t.totalJSHeapSize;n!=null&&(e.js_heap_size_limit=n.toString()),r!=null&&(e.used_js_heap_size=r.toString()),a!=null&&(e.total_js_heap_size=a.toString())}function b(e){var t=o("RSTRecoverableUnresponsivenessTrackingMainThread").getStats();if(t!=null)for(var n of Object.keys(t)){var r=t[n];if(r!=null){var a=n.toLowerCase();for(var i of Object.keys(r)){var l=r[i];l!=null&&(e[a+"-"+i]=l.toString())}}}}function v(){var t=document.URL,n=(e||(e=r("Env"))).brsid;try{var a,i,l,c;return{url:t,brsid:n,i1:(a=r("CurrentUser").getID())!=null?a:"0",i2:(i=o("RSTAdsManagerUtilsMainThread").getAdAccountID())!=null?i:"0",i3:(l=o("RSTAdsManagerUtilsMainThread").getBusinessID())!=null?l:"0",cpp:(c=r("SiteData").push_phase)!=null?c:"unknown",cr:""+r("SiteData").client_revision,rcs:_(),st:Math.floor(Date.now()-(s||(s=r("performance"))).now()),annotations:u(),spans:d(),ccrt:o("CurrentCanonicalRoute").getForGlobalLoggingOnly()}}catch(e){return{url:t,brsid:n,i1:"0",i2:"0",i3:"0"}}}function S(){var t=document.URL,n=(e||(e=r("Env"))).brsid;try{var a,i,l;return{url:t,brsid:n,i1:(a=r("CurrentUser").getID())!=null?a:"0",i2:(i=o("RSTAdsManagerUtilsMainThread").getAdAccountID())!=null?i:"0",i3:(l=o("RSTAdsManagerUtilsMainThread").getBusinessID())!=null?l:"0",externalAnnotations:c(),spans:d(),isLightweight:!0}}catch(e){return{url:t,brsid:n,i1:"0",i2:"0",i3:"0"}}}l.getMainThreadMetadata=v,l.getMainThreadMetadataWithExternalAnnotationsOnly=S}),98);
__d("RSTWebWorkerClientMainThreadImpl",["ErrorGuard","FBLogger","RSTConfig","RSTUtils","ResponsiveTrackerMainThread","Run","WorkerMessagePort","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("gkx")("4909"),u=(function(){function t(e){this.$1=null,this.$2=!1,this.$3=e}var n=t.prototype;return n.$4=function(){return this.$1==null&&(this.$1=this.$3()),this.$1},n.startRSTFromMainThread=function(t){var e,n=this;if(t===void 0&&(t={}),!(!s||this.$2||!o("RSTUtils").isIndexedDBSupported())){var a=Math.max((e=t.extraDelayInMs)!=null?e:0,r("RSTConfig").START_RST_FROM_MAIN_THREAD_EXTRA_DELAY_IN_MS);window.setTimeout(function(){try{var e=n.$4(),t=new(o("WorkerMessagePort")).WorkerSyncedMessagePort(e,"RSTWorkerClient");r("ResponsiveTrackerMainThread").init(t),n.$2=!0}catch(e){var a=r("getErrorSafe")(e);r("FBLogger")("responsive-tracker").catching(a).warn("Failed to start worker: "+a.message)}},a)}},n.startRSTAfterPageLoadFromMainThread=function(n){var t=this;n===void 0&&(n={});var a=o("Run").onAfterLoad(function(){(e||(e=r("ErrorGuard"))).applyWithGuard(function(){return t.startRSTFromMainThread(n)},null,[])})},t})();l.default=u}),98);
__d("RSTWebWorkerClientMainThreadSwitch",["cr:22916"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:22916")}),98);
__d("RSTWebWorkerClientMainThreadV2",["RSTWebV2WorkerResource","RSTWebWorkerClientMainThreadImpl","WebWorkerV2Resource"],(function(t,n,r,o,a,i,l){"use strict";var e=new(r("RSTWebWorkerClientMainThreadImpl"))(function(){return o("WebWorkerV2Resource").createDedicatedV2WebWorker(r("RSTWebV2WorkerResource"),"RSTWebWorker").worker}),s=e;l.default=s}),98);
__d("WebPerfDeviceInfoLogFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1871697"),s=o("FalcoLoggerInternal").create("web_perf_device_info_log",e),u=s;l.default=u}),98);
__d("XDeviceClassRealtimeControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/web_perf/get_perf_level/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("WebDevicePerfInfoLogging",["AsyncTypedRequest","JSScheduler","WebDevicePerfInfoData","WebPerfDeviceInfoLogFalcoEvent","XDeviceClassRealtimeControllerRouteBuilder"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t=document.createElement("canvas"),n=t.getContext("webgl")||t.getContext("experimental-webgl");if(n){var r=n.getExtension("WEBGL_debug_renderer_info");if(r){var o=n.getParameter(r.UNMASKED_RENDERER_WEBGL),a=n.getParameter(r.UNMASKED_VENDOR_WEBGL);e.gpu_vendor=a,e.gpu_renderer=o}}}function u(){var e=window.navigator,t={};return e&&e.hardwareConcurrency!==void 0&&(t.cpu_cores=e.hardwareConcurrency),e&&e.deviceMemory!==void 0&&(t.ram=e.deviceMemory),r("WebDevicePerfInfoData").needsFullUpdate&&s(t),t}function c(){var e=u();r("WebPerfDeviceInfoLogFalcoEvent").log(function(){var t,n,r,o;return{cpu_cores:(t=e.cpu_cores)!=null?t:null,ram:(n=e.ram)!=null?n:null,gpu_renderer:(r=e.gpu_renderer)!=null?r:null,gpu_vendor:(o=e.gpu_vendor)!=null?o:null}})}async function d(){var e=u(),t=await new(r("AsyncTypedRequest"))(r("XDeviceClassRealtimeControllerRouteBuilder").buildURL({})).setData(e).promisePayload();return t.devicePerfClassLevel}function m(){(r("WebDevicePerfInfoData").needsFullUpdate||r("WebDevicePerfInfoData").needsPartialUpdate)&&(e||(e=o("JSScheduler"))).scheduleSpeculativeCallback(c)}function p(){return new Promise(function(t,n){r("WebDevicePerfInfoData").needsFullUpdate||r("WebDevicePerfInfoData").needsPartialUpdate?(e||(e=o("JSScheduler"))).scheduleSpeculativeCallback(function(){d().then(t).catch(n)}):t()})}l.doLog=m,l.doLogPromise=p}),98);/*FB_PKG_DELIM*/
__d("CometVideoPictureInPictureManager.react",["CometSetWatchAndScrollVideoContext","CometVideoPictureInPictureManagerContext","CometWatchAndScrollVideoContext","XCometWatchControllerRouteBuilder","clearTimeout","gkx","react","requireDeferred","setTimeout","useCometRouterDispatcher","useMinifiedProductAttribution"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useContext,m=u.useEffect,p=u.useMemo,_=u.useRef,f=u.useState,g=r("requireDeferred")("VideoHomeTypedLiteLogger").__setRef("CometVideoPictureInPictureManager.react"),h=r("gkx")("22889"),y=50,C=["286211568997787","214604021960500","108677131037"],b=window.document.pictureInPictureEnabled;function v(e){var t=e.children,n=e.isPipEnabled,a=r("useCometRouterDispatcher")(),i=n,l=f(null),u=l[0],C=l[1],v=f(!1),S=v[0],R=v[1],L=f(!1),E=L[0],k=L[1],I=_(!1),T=c(function(e){I.current=e},[]),D=p(function(){return{hasNextChainedVideo:E,isPipEnabled:i,setHasNextChainedVideo:k,setSkippedFromPipPlayer:R,skippedFromPipPlayer:S}},[S,R,E,k,i]),x=f(null),$=x[0],P=x[1],N=d(r("CometWatchAndScrollVideoContext")),M=d(r("CometSetWatchAndScrollVideoContext")),w=_(null),A=_(null),F=r("useMinifiedProductAttribution")(),O=c(function(e){e===void 0&&(e=null),g.onReady(function(t){t.log({attribution_id_v2:F,click_point:e,event:"click"})})},[]),B=c(function(){var e=N==null?void 0:N.videoID,t=N==null?void 0:N.videoUrl;if(e!=null&&t!=null){var n=N==null?void 0:N.routeTracePolicy,o=N==null?void 0:N.subOrigin,i=h?t:r("XCometWatchControllerRouteBuilder").buildURL({v:e});a&&(a.go(i,{passthroughProps:{portableVideoID:$,portalingRouteTracePolicy:n,portalingSubOrigin:o}}),M(null))}},[a,N,$,M]),W=c(function(){u!=null&&(w.current=r("setTimeout")(function(){var e=u.getCurrentState(),t=e.lastPauseReason,n=e.paused;I.current||(i&&(n===!1||n===!0&&t==="product_initiated")?(B(),O("control_pip_player_return_to_tab")):window.document.pictureInPictureElement===null&&(M(null),O("control_pip_player_close")))},y))},[u,i,B,M,O]),q=c(function(){u!=null&&(I.current||(window.navigator.mediaSession.setActionHandler("play",null),window.navigator.mediaSession.setActionHandler("pause",null),window.navigator.mediaSession.setActionHandler("pause",function(){u.pause("product_initiated")})),E||window.navigator.mediaSession.setActionHandler("nexttrack",null))},[u,E,O,T]),U=c(function(e){e.requestPictureInPicture(),X(!1);var t=e.internal_getVideoElement();A.current=t==null?void 0:t.currentSrc},[]),V=c(function(){if(u!=null){var e=u.getIsDesktopPictureInPicture();if(e){u.exitPictureInPicture();return}U(u)}},[U,u]),H=c(function(e){C(e)},[C]),G=c(function(e){e!=null&&P(e)},[P]),z=p(function(){return{openPipPlayer:V,setController:H,setPipPortableVideoID:G}},[V,H,G]),j=_(!1),K=f(!1),Q=K[0],X=K[1];return m(function(){var e=null;if(b&&u!=null&&window.document.pictureInPictureElement){var t=u.internal_getVideoElement(),n=t==null?void 0:t.currentSrc,r=!1,o=!1;e=u.subscribe(function(){var e=u.getCurrentState(),t=e.playing,n=e.isDesktopPictureInPicture;!r&&t&&j.current&&!I.current&&(j.current=!1,X(!0)),o&&!n&&W(),!o&&n&&q(),r=t,o=n}),n!==A.current?Q?U(u):(u.play("user_initiated"),j.current=!0):i&&(q(),A.current=n)}return function(){e!=null&&e.remove()}},[U,u,V,E,q,W,i,Q]),m(function(){return function(){w.current!=null&&(r("clearTimeout")(w.current),w.current=null)}},[]),s.jsx(o("CometVideoPictureInPictureManagerContext").CometVideoPictureInPictureManagerContext.Provider,{value:D,children:s.jsx(o("CometVideoPictureInPictureManagerContext").CometVideoPictureInPictureManagerAPIContext.Provider,{value:z,children:t})})}v.displayName=v.name+" [from "+i.id+"]",l.EXCLUDED_PROVIDERS=C,l.CometVideoPictureInPictureManager=v}),98);
__d("useLiveCostreamerTagSubscription_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25506283495671393"}),null);
__d("useLiveCostreamerTagSubscription.graphql",["VideoPlayerRelay_video$normalization.graphql","useLiveCostreamerTagSubscription_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{kind:"Variable",name:"data",variableName:"input"}],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o=[r],a={alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"tagged_page",plural:!1,selections:[r,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"currently_live_video",plural:!1,selections:o,storageKey:null}],storageKey:null},i={args:null,documentName:"useLiveCostreamerTagSubscription",fragmentName:"VideoPlayerCostreamingControl_video",fragmentPropName:"video",kind:"ModuleImport"},l={alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[r,{alias:null,args:null,concreteType:"VideoLiveCostreamingStreamersConnection",kind:"LinkedField",name:"live_costreaming_streamers",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"nodes",plural:!0,selections:o,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null}],storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},u=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useLiveCostreamerTagSubscription",selections:[{alias:null,args:t,concreteType:"LiveVideoTagSubscribeResponsePayload",kind:"LinkedField",name:"live_video_tag_subscribe",plural:!1,selections:[a,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"tagged_video",plural:!1,selections:[r,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_see_costreaming_tools",plural:!1,selections:[i],storageKey:null},{alias:null,args:null,concreteType:"VideoLiveCostreamingStreamersConnection",kind:"LinkedField",name:"live_costreaming_streamers",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"currently_live_video",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometVideoPlayerCostreamingThumbnailRowInner_video"}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},l],storageKey:null}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useLiveCostreamerTagSubscription",selections:[{alias:null,args:t,concreteType:"LiveVideoTagSubscribeResponsePayload",kind:"LinkedField",name:"live_video_tag_subscribe",plural:!1,selections:[a,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"tagged_video",plural:!1,selections:[r,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_see_costreaming_tools",plural:!1,selections:[i,r],storageKey:null},{alias:null,args:null,concreteType:"VideoLiveCostreamingStreamersConnection",kind:"LinkedField",name:"live_costreaming_streamers",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"currently_live_video",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"video_channel",plural:!1,selections:[s,r],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:u,storageKey:null},r],storageKey:null},{args:null,fragment:n("VideoPlayerRelay_video$normalization.graphql"),kind:"FragmentSpread"},{alias:null,args:null,concreteType:"VideoThumbnail",kind:"LinkedField",name:"preferred_thumbnail",plural:!1,selections:[{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:u,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"image_preview_payload",storageKey:null},r],storageKey:null}],storageKey:null},r],storageKey:null}],storageKey:null}],storageKey:null},l],storageKey:null}]},params:{id:n("useLiveCostreamerTagSubscription_facebookRelayOperation"),metadata:{subscriptionName:"live_video_tag_subscribe"},name:"useLiveCostreamerTagSubscription",operationKind:"subscription",text:null}}})();a.exports=e}),null);
__d("useLiveCostreamerTagSubscription.react",["CometRelay","react","react-compiler-runtime","useLiveCostreamerTagSubscription.graphql","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useMemo;function c(t,a,i){var l=o("react-compiler-runtime").c(8),s;l[0]===Symbol.for("react.memo_cache_sentinel")?(s=e!==void 0?e:e=n("useLiveCostreamerTagSubscription.graphql"),l[0]=s):s=l[0];var u=s,c;l[1]===Symbol.for("react.memo_cache_sentinel")?(c=r("uuidv4")(),l[1]=c):c=l[1];var m;l[2]!==t||l[3]!==a?(m={input:{client_subscription_id:c,tagged_page_id:t,tagged_video_id:a}},l[2]=t,l[3]=a,l[4]=m):m=l[4];var p=m,_;l[5]!==i||l[6]!==p?(_={onNext:i,subscription:u,updater:d,variables:p},l[5]=i,l[6]=p,l[7]=_):_=l[7];var f=_;o("CometRelay").useSubscription(f)}function d(e){var t,n=e.getRootField("live_video_tag_subscribe"),r=n==null||(t=n.getLinkedRecord("tagged_page"))==null?void 0:t.getLinkedRecord("currently_live_video"),o=n==null?void 0:n.getLinkedRecord("tagged_video");r==null&&o!=null&&o.setValue(null,"if_viewer_can_see_costreaming_tools")}l.default=c}),98);
__d("LiveCostreamerTagSubscription.react",["useLiveCostreamerTagSubscription.react"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.onNext,n=e.pageID,o=e.videoID;return r("useLiveCostreamerTagSubscription.react")(n,o,t),null}l.default=e}),98);
__d("LiveVideoLatencyMenuContextProvider_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LiveVideoLatencyMenuContextProvider_video",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_use_latency_menu",plural:!1,selections:[{args:null,documentName:"LiveVideoLatencyMenuContextProvider_video_if_viewer_can_use_latency_menu",fragmentName:"VideoPlayerSettingsMenuLatencyPane_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},action:"NONE",path:"if_viewer_can_use_latency_menu"},{kind:"RequiredField",field:{alias:"if_viewer_can_use_latency_menu_toggle",args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_use_latency_menu",plural:!1,selections:[{args:null,documentName:"LiveVideoLatencyMenuContextProvider_video_if_viewer_can_use_latency_menu_toggle",fragmentName:"VideoPlayerSettingsMenuLatencyPaneToggle_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},action:"NONE",path:"if_viewer_can_use_latency_menu_toggle"}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("LiveVideoLatencyMenu.react",["fbt","CometRelay","FBLogger","LiveVideoLatencyMenuContextProvider_video.graphql","VideoPlayerHooks","react","react-compiler-runtime","useSelectedLatencySetting"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=u||(u=o("react")),m=u.useMemo,p=s._(/*BTDS*/"Latency"),_=[g("low"),g("normal")],f=d.createContext({liveVideoLatencyMenuPaneMatchPointer:null,liveVideoLatencyMenuPaneToggleMatchPointer:null});function g(e){switch(e){case"low":return{description:s._(/*BTDS*/"A near-realtime experience."),title:s._(/*BTDS*/"Low latency"),value:e};case"normal":return{description:s._(/*BTDS*/"Best for performance and slower connections."),title:s._(/*BTDS*/"Normal"),value:e};case"ultra-low":return{description:s._(/*BTDS*/"Best for interactive broadcasts."),title:s._(/*BTDS*/"Ultra-low"),value:e};default:return r("FBLogger")("gaming_video").mustfix("Setting %s is not valid",e),{description:s._(/*BTDS*/"Error"),title:s._(/*BTDS*/"Error"),value:e}}}function h(e,t){var n=o("react-compiler-runtime").c(10),a=(c||(c=o("VideoPlayerHooks"))).useController(),i=c.useLatencyLevel(),l=r("useSelectedLatencySetting")(e,t),s=l[1],u;n[0]!==i?(u=g(i),n[0]=i,n[1]=u):u=n[1];var d=u,m=d.title,p;n[2]!==a||n[3]!==i||n[4]!==s?(p=function(t){i!==t&&(s(t),a.setLatencyLevel(t))},n[2]=a,n[3]=i,n[4]=s,n[5]=p):p=n[5];var _=p,f;return n[6]!==i||n[7]!==_||n[8]!==m?(f={selectedLatencySetting:i,selectedLatencySettingTitle:m,setSelectedLatencySetting:_},n[6]=i,n[7]=_,n[8]=m,n[9]=f):f=n[9],f}var y=e!==void 0?e:e=n("LiveVideoLatencyMenuContextProvider_video.graphql");function C(e){var t=o("react-compiler-runtime").c(7),n=e.children,r=e.video,a=o("CometRelay").useFragment(y,r),i;e:{if(a==null){var l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={liveVideoLatencyMenuPaneMatchPointer:null,liveVideoLatencyMenuPaneToggleMatchPointer:null},t[0]=l):l=t[0],i=l;break e}var s;t[1]!==a.if_viewer_can_use_latency_menu||t[2]!==a.if_viewer_can_use_latency_menu_toggle?(s={liveVideoLatencyMenuPaneMatchPointer:a.if_viewer_can_use_latency_menu,liveVideoLatencyMenuPaneToggleMatchPointer:a.if_viewer_can_use_latency_menu_toggle},t[1]=a.if_viewer_can_use_latency_menu,t[2]=a.if_viewer_can_use_latency_menu_toggle,t[3]=s):s=t[3],i=s}var u=i,c;return t[4]!==n||t[5]!==u?(c=d.jsx(f.Provider,{value:u,children:n}),t[4]=n,t[5]=u,t[6]=c):c=t[6],c}l.LATENCY_MENU_TITLE=p,l.LATENCY_SETTING_OPTIONS=_,l.LiveVideoLatencyMenuContext=f,l.getLiveVideoLatencySettingToInfoMapping=g,l.useLatencySettingState=h,l.LiveVideoLatencyMenuContextProvider=C}),226);
__d("VideoPlayerCaptionsControl_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerCaptionsControl_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"captions_url",storageKey:null},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAvailableCaptionsLocalesFromRelay_video"}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerCaptionsMenu.react",["fbt","$InternalEnum","CometKeys","VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react","VideoPlayerCaptionsMenuCaptionsDisplayPane.react","VideoPlayerCaptionsMenuMainPane.react","VideoPlayerHooks","react","react-compiler-runtime","useLayerKeyCommands"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=e,m=d.useCallback,p=d.useEffect,_=d.useMemo,f=d.useRef,g=d.useState,h=n("$InternalEnum")({CAPTIONS_BG_COLOR:"captionsBackgroundColor",CAPTIONS_BG_OPACITY:"captionsBackgroundOpacity",CAPTIONS_DISPLAY_MAIN:"captionsDisplayMain",CAPTIONS_TEXT_COLOR:"captionsTextColor",CAPTIONS_TEXT_SIZE:"captionsTextSize",CAPTIONS_MAIN:"captionsMain"});function y(e){var t=o("react-compiler-runtime").c(36),n=e.availableCaptionsLocales,a=e.captionsListExpanded,i=e.children,l=e.onClose,d=e.onPressLog,m=e.selectedCaptionsLocale,_=e.setCaptionsListExpanded,y=e.setSelectedCaptionsLocale,C=i===void 0?null:i,b=(u||(u=o("VideoPlayerHooks"))).useCaptionDisplayStyle(),v=g(h.CAPTIONS_MAIN),S=v[0],R=v[1],L=f(null),E=f(null),k;t[0]!==l?(k=function(t){L.current&&E.current&&t.target instanceof HTMLElement&&document.contains(t.target)&&!L.current.contains(t.target)&&E.current.contains(t.target)&&l()},t[0]=l,t[1]=k):k=t[1];var I=k,T,D;t[2]!==I?(T=function(){return document.addEventListener("click",I),(function(){document.removeEventListener("click",I)})},D=[I],t[2]=I,t[3]=T,t[4]=D):(T=t[3],D=t[4]),p(T,D);var x,$;t[5]===Symbol.for("react.memo_cache_sentinel")?(x={key:r("CometKeys").ESCAPE},$=s._(/*BTDS*/"Close captions menu"),t[5]=x,t[6]=$):(x=t[5],$=t[6]);var P;t[7]!==l?(P=[{command:x,description:$,handler:function(){l()}}],t[7]=l,t[8]=P):P=t[8];var N=P;r("useLayerKeyCommands")(N);var M;t[9]!==n||t[10]!==a||t[11]!==C||t[12]!==d||t[13]!==m||t[14]!==_||t[15]!==y?(M=c.jsx(o("VideoPlayerCaptionsMenuMainPane.react").VideoPlayerCaptionsMenuMainPane,{availableCaptionsLocales:n,captionsListExpanded:a,onPressLog:d,selectedCaptionsLocale:m,setCaptionsListExpanded:_,setPane:R,setSelectedCaptionsLocale:y,children:C}),t[9]=n,t[10]=a,t[11]=C,t[12]=d,t[13]=m,t[14]=_,t[15]=y,t[16]=M):M=t[16];var w=M;e:switch(S){case h.CAPTIONS_MAIN:break e;case h.CAPTIONS_DISPLAY_MAIN:{var A;t[17]!==b||t[18]!==d?(A=c.jsx(o("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").VideoPlayerCaptionsMenuCaptionsDisplayMainPane,{currentCaptionsDisplay:b,onPressLog:d,setPane:R}),t[17]=b,t[18]=d,t[19]=A):A=t[19],w=A;break e}case h.CAPTIONS_BG_COLOR:{var F;t[20]!==b||t[21]!==d?(F=c.jsx(o("VideoPlayerCaptionsMenuCaptionsDisplayPane.react").VideoPlayerCaptionsMenuCaptionsDisplayPane,{captionsDisplayOption:"captionsBackgroundColor",currentCaptionsDisplay:b,onPressLog:d,setPane:R}),t[20]=b,t[21]=d,t[22]=F):F=t[22],w=F;break e}case h.CAPTIONS_BG_OPACITY:{var O;t[23]!==b||t[24]!==d?(O=c.jsx(o("VideoPlayerCaptionsMenuCaptionsDisplayPane.react").VideoPlayerCaptionsMenuCaptionsDisplayPane,{captionsDisplayOption:"captionsBackgroundOpacity",currentCaptionsDisplay:b,onPressLog:d,setPane:R}),t[23]=b,t[24]=d,t[25]=O):O=t[25],w=O;break e}case h.CAPTIONS_TEXT_SIZE:{var B;t[26]!==b?(B=c.jsx(o("VideoPlayerCaptionsMenuCaptionsDisplayPane.react").VideoPlayerCaptionsMenuCaptionsDisplayPane,{captionsDisplayOption:"captionsTextSize",currentCaptionsDisplay:b,setPane:R}),t[26]=b,t[27]=B):B=t[27],w=B;break e}case h.CAPTIONS_TEXT_COLOR:{var W;t[28]!==b||t[29]!==d?(W=c.jsx(o("VideoPlayerCaptionsMenuCaptionsDisplayPane.react").VideoPlayerCaptionsMenuCaptionsDisplayPane,{captionsDisplayOption:"captionsTextColor",currentCaptionsDisplay:b,onPressLog:d,setPane:R}),t[28]=b,t[29]=d,t[30]=W):W=t[30],w=W}}var q;t[31]!==w?(q=c.jsx("div",{ref:L,children:w}),t[31]=w,t[32]=q):q=t[32];var U;t[33]===Symbol.for("react.memo_cache_sentinel")?(U=c.jsx("div",{className:"x5yr21d x1o0tod xixxii4 x13vifvy xh8yej3 x8knxv4","data-testid":void 0,ref:E}),t[33]=U):U=t[33];var V;return t[34]!==q?(V=c.jsxs(c.Fragment,{children:[q,U]}),t[34]=q,t[35]=V):V=t[35],V}l.VideoPlayerCaptionsMenuPaneType=h,l.VideoPlayerCaptionsMenu=y}),226);
__d("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react",["fbt","ix","CometImage.react","CometPressable.react","FocusRegion.react","VideoPlayerCaptionsMenu.react","focusScopeQueries","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=e.useCallback,m={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",outline:"x1a2a7pz",paddingTop:"x1y1aw1k",paddingInlineEnd:"xyri2b",paddingBottom:"xwib8y2",paddingInlineStart:"x1c1uobl",textAlign:"x1yc453h",width:"xafpxmx",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0}},p={captionsBackgroundColor:{Black:"BLACK",Blue:"BLUE",Cyan:"CYAN",Green:"GREEN",Magenta:"MAGENTA",Red:"RED",White:"WHITE",Yellow:"YELLOW"},captionsBackgroundOpacity:{"0%":"TRANSPARENT","25%":"LIGHT","45%":"DEFAULT","75%":"DARK","100%":"OPAQUE"},captionsTextColor:{Black:"BLACK",Blue:"BLUE",Cyan:"CYAN",Green:"GREEN",Magenta:"MAGENTA",Red:"RED",White:"WHITE",Yellow:"YELLOW"},captionsTextSize:{"(50%)":"SMALLEST","(75%)":"SMALL","(100%)":"DEFAULT","(125%)":"MEDIUM","(150%)":"BIG","(175%)":"BIGGER","(200%)":"BIGGEST"}},_={"Background Color":{ftbLabel:s._(/*BTDS*/"Background Color"),name:"captionsBackgroundColor"},"Background Opacity":{ftbLabel:s._(/*BTDS*/"Background Opacity"),name:"captionsBackgroundOpacity"},"Text Color":{ftbLabel:s._(/*BTDS*/"Text Color"),name:"captionsTextColor"},"Text Size":{ftbLabel:s._(/*BTDS*/"Text Size"),name:"captionsTextSize"}},f={Black:s._(/*BTDS*/"Black"),Blue:s._(/*BTDS*/"Blue"),Cyan:s._(/*BTDS*/"Cyan"),Green:s._(/*BTDS*/"Green"),Magenta:s._(/*BTDS*/"Magenta"),Red:s._(/*BTDS*/"Red"),White:s._(/*BTDS*/"White"),Yellow:s._(/*BTDS*/"Yellow")};function g(e){var t=null,n=null;switch(e){case"(50%)":t=s._(/*BTDS*/"Small"),n="X-";break;case"(75%)":t=s._(/*BTDS*/"Small");break;case"(125%)":t=s._(/*BTDS*/"Large");break;case"(150%)":t=s._(/*BTDS*/"Large"),n="X-";break;case"(175%)":t=s._(/*BTDS*/"Large"),n="XX-";break;case"(200%)":t=s._(/*BTDS*/"Large"),n="XXX-";break;case"(100%)":t=s._(/*BTDS*/"Medium")}return c.jsxs("span",{children:[n!=null&&n,t,e]})}g.displayName=g.name+" [from "+i.id+"]";var h={captionsBackgroundColor:o("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_BG_COLOR,captionsBackgroundOpacity:o("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_BG_OPACITY,captionsTextColor:o("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_TEXT_COLOR,captionsTextSize:o("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_TEXT_SIZE};function y(e){var t=o("react-compiler-runtime").c(26),n=e.onPressLog,a=e.option,i=e.optionVal,l=e.setPane,s=_[a].name,d;t[0]!==s||t[1]!==n||t[2]!==a||t[3]!==l?(d=function(){l(h[s]),n&&n("captions_display_main_menu",a)},t[0]=s,t[1]=n,t[2]=a,t[3]=l,t[4]=d):d=t[4];var p=d,y;e:switch(s){case"captionsTextColor":case"captionsBackgroundColor":{y=f[i];break e}default:y=i}var C;t[5]!==a?(C=a.replace(" ",""),t[5]=a,t[6]=C):C=t[6];var b=C,v="video-player-captions-menu-captions-display-main-"+b,S;t[7]===Symbol.for("react.memo_cache_sentinel")?(S={className:"x1ypdohk x1rg5ohu x1nxh6w3 x1s688f x1uncgzr"},t[7]=S):S=t[7];var R=_[a],L;t[8]===Symbol.for("react.memo_cache_sentinel")?(L={className:"x1nxh6w3 xo1l8bm"},t[8]=L):L=t[8];var E;t[9]!==s||t[10]!==i||t[11]!==y?(E=s==="captionsTextSize"?g(i):y,t[9]=s,t[10]=i,t[11]=y,t[12]=E):E=t[12];var k;t[13]!==E||t[14]!==v?(k=c.jsx("div",babelHelpers.extends({},L,{"data-testid":void 0,children:E})),t[13]=E,t[14]=v,t[15]=k):k=t[15];var I;t[16]!==R.ftbLabel||t[17]!==k?(I=c.jsxs("div",babelHelpers.extends({},S,{children:[R.ftbLabel,k]})),t[16]=R.ftbLabel,t[17]=k,t[18]=I):I=t[18];var T,D,x;t[19]===Symbol.for("react.memo_cache_sentinel")?(x={className:"x1rg5ohu"},T={className:"x1lliihq"},D={display:"table-cell"},t[19]=T,t[20]=D,t[21]=x):(T=t[19],D=t[20],x=t[21]);var $;t[22]===Symbol.for("react.memo_cache_sentinel")?($=c.jsx("div",babelHelpers.extends({},x,{children:c.jsx("div",babelHelpers.extends({},T,{children:c.jsx("div",{style:D,children:c.jsx(r("CometImage.react"),{src:u("480588")})})}))})),t[22]=$):$=t[22];var P;return t[23]!==p||t[24]!==I?(P=c.jsxs(r("CometPressable.react"),{onPress:p,xstyle:m.menuOptionRow,children:[I,$]}),t[23]=p,t[24]=I,t[25]=P):P=t[25],P}function C(e){var t=o("react-compiler-runtime").c(17),n=e.currentCaptionsDisplay,a=e.onPressLog,i=e.setPane,l;t[0]!==i?(l=function(){i(o("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_MAIN)},t[0]=i,t[1]=l):l=t[1];var d=l,f;t[2]===Symbol.for("react.memo_cache_sentinel")?(f={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1s688f x1lku1pv"},t[2]=f):f=t[2];var g;t[3]===Symbol.for("react.memo_cache_sentinel")?(g={className:"x6s0dn4 x3nfvp2"},t[3]=g):g=t[3];var h,C;t[4]===Symbol.for("react.memo_cache_sentinel")?(h=c.jsx("span",babelHelpers.extends({},g,{children:c.jsx(r("CometImage.react"),{src:u("480580")})})),C=c.jsx("span",{className:"x1nxh6w3 x1s688f x1diwwjn",children:s._(/*BTDS*/"Subtitle Options")}),t[4]=h,t[5]=C):(h=t[4],C=t[5]);var v;t[6]!==d?(v=c.jsx("div",babelHelpers.extends({},f,{children:c.jsxs(r("CometPressable.react"),{onPress:d,xstyle:m.pressableOption,children:[h,C]})})),t[6]=d,t[7]=v):v=t[7];var S;t[8]===Symbol.for("react.memo_cache_sentinel")?(S={className:"x1anpbxc"},t[8]=S):S=t[8];var R;t[9]===Symbol.for("react.memo_cache_sentinel")?(R=Object.keys(_),t[9]=R):R=t[9];var L;t[10]!==n||t[11]!==a||t[12]!==i?(L=c.jsx("div",babelHelpers.extends({},S,{"data-testid":void 0,children:R.map(function(e){var t=_[e].name,r=p[t],o=Object.fromEntries(Object.entries(r).map(b)),l=n!=null?o[n[t]]:"";return c.jsx(y,{onPressLog:a,option:e,optionVal:l,setPane:i},e)})})),t[10]=n,t[11]=a,t[12]=i,t[13]=L):L=t[13];var E;return t[14]!==v||t[15]!==L?(E=c.jsxs(o("FocusRegion.react").FocusRegion,{autoFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:[v,L]}),t[14]=v,t[15]=L,t[16]=E):E=t[16],E}function b(e){var t=e[0],n=e[1];return[n,t]}l.captionsDisplayOptionsMap=p,l.colorsFBTMap=f,l.getFontSizeDivWithFBTLabel=g,l.VideoPlayerCaptionsMenuCaptionsDisplayMainPane=C}),226);
__d("VideoPlayerCaptionsSettingMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="8917695971664599"}),null);
__d("VideoPlayerCaptionsSettingMutation.graphql",["VideoPlayerCaptionsSettingMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"VideoPlayerCaptionsSettingResponsePayload",kind:"LinkedField",name:"video_player_captions_setting",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"success",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"VideoPlayerCaptionsSettingMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"VideoPlayerCaptionsSettingMutation",selections:t},params:{id:n("VideoPlayerCaptionsSettingMutation_facebookRelayOperation"),metadata:{},name:"VideoPlayerCaptionsSettingMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("VideoPlayerCaptionsSettingMutation",["CometRelay","VideoPlayerCaptionsSettingMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("VideoPlayerCaptionsSettingMutation.graphql");function u(e,t,n){return o("CometRelay").commitMutation(e,{mutation:s,onCompleted:n&&n.onCompleted,onError:n&&n.onError,optimisticResponse:{video_captions_setting:{success:!0}},variables:{input:{captions_background_color:t.captions_background_color,captions_background_opacity:t.captions_background_opacity,captions_text_color:t.captions_text_color,captions_text_size:t.captions_text_size,client_mutation_id:"www_captions_settings"}}})}l.commit=u}),98);
__d("VideoPlayerCaptionsMenuCaptionsDisplayPane.react",["fbt","ix","CometImage.react","CometPressable.react","CometRelay","FDSIcon.react","FocusRegion.react","VideoPlayerCaptionsMenu.react","VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react","VideoPlayerCaptionsSettingMutation","VideoPlayerHooks","fbicon","focusScopeQueries","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m=e.useCallback,p={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",outline:"x1a2a7pz",paddingTop:"x1y1aw1k",paddingInlineEnd:"xyri2b",paddingBottom:"xwib8y2",paddingInlineStart:"x1c1uobl",textAlign:"x1yc453h",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0}},_={captionsBackgroundColor:s._(/*BTDS*/"Background Color"),captionsBackgroundOpacity:s._(/*BTDS*/"Background Opacity"),captionsTextColor:s._(/*BTDS*/"Text Color"),captionsTextSize:s._(/*BTDS*/"Text Size")},f=function(t){return{captions_background_color:t.captionsBackgroundColor,captions_background_opacity:t.captionsBackgroundOpacity,captions_text_color:t.captionsTextColor,captions_text_size:t.captionsTextSize}};function g(e){var t=e.captionsDisplayOption,n=e.currentCaptionsDisplay,a=e.onPressLog,i=e.option,l=e.selected,s=e.setPane,_=(c||(c=o("VideoPlayerHooks"))).useController(),g=l,h=o("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").captionsDisplayOptionsMap[t],y=null;switch(t){case"captionsTextColor":case"captionsBackgroundColor":y=o("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").colorsFBTMap[i];break;default:y=i}var C="video-player-captions-menu-captions-display-pane-"+t+"-"+i,b=m(function(){if(g=!0,n!=null){n[t]=h[i],_.setCaptionsDisplayStyle(babelHelpers.extends({},n));var e=f(n);o("VideoPlayerCaptionsSettingMutation").commit(v,e)}s(o("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_DISPLAY_MAIN),a&&a(t)},[n,h,t,_,i]),v=o("CometRelay").useRelayEnvironment();return d.jsxs(r("CometPressable.react"),{"aria-pressed":g,onPress:b,testid:void 0,xstyle:p.menuOptionRow,children:[d.jsx("div",{className:"x1rg5ohu x1849jeq",children:g&&d.jsx("div",{"data-testid":void 0,children:d.jsx(r("FDSIcon.react"),{color:"white",icon:o("fbicon")._(u("477813"),16)})})}),t==="captionsTextSize"?o("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").getFontSizeDivWithFBTLabel(i):d.jsx("div",{className:"x1ypdohk x1rg5ohu",children:y})]})}g.displayName=g.name+" [from "+i.id+"]";function h(e){var t=o("react-compiler-runtime").c(26),n=e.captionsDisplayOption,a=e.currentCaptionsDisplay,i=e.onPressLog,l=e.setPane,s=_[n],c=o("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").captionsDisplayOptionsMap[n],m=a!=null?a[n]:null,f;t[0]!==l?(f=function(){l(o("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_DISPLAY_MAIN)},t[0]=l,t[1]=f):f=t[1];var h=f,y="video-player-captions-menu-captions-display-pane-"+n,C;t[2]===Symbol.for("react.memo_cache_sentinel")?(C={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1nxh6w3 x1s688f x1lku1pv"},t[2]=C):C=t[2];var b=y+"-topBar",v;t[3]===Symbol.for("react.memo_cache_sentinel")?(v={className:"x6s0dn4 x3nfvp2 x1849jeq"},t[3]=v):v=t[3];var S;t[4]===Symbol.for("react.memo_cache_sentinel")?(S=d.jsx("span",babelHelpers.extends({},v,{children:d.jsx(r("CometImage.react"),{src:u("480580")})})),t[4]=S):S=t[4];var R;t[5]!==h||t[6]!==s||t[7]!==b?(R=d.jsx("div",babelHelpers.extends({},C,{children:d.jsxs(r("CometPressable.react"),{onPress:h,testid:void 0,xstyle:p.pressableOption,children:[S,s]})})),t[5]=h,t[6]=s,t[7]=b,t[8]=R):R=t[8];var L;t[9]===Symbol.for("react.memo_cache_sentinel")?(L={className:"x1nxh6w3 xo1l8bm x1anpbxc"},t[9]=L):L=t[9];var E;t[10]!==c?(E=Object.keys(c),t[10]=c,t[11]=E):E=t[11];var k;t[12]!==c||t[13]!==m||t[14]!==n||t[15]!==a||t[16]!==i||t[17]!==l||t[18]!==E?(k=E.map(function(e){var t=m===c[e];return d.jsx(g,{captionsDisplayOption:n,currentCaptionsDisplay:a,onPressLog:i,option:e,selected:t,setPane:l},e)}),t[12]=c,t[13]=m,t[14]=n,t[15]=a,t[16]=i,t[17]=l,t[18]=E,t[19]=k):k=t[19];var I;t[20]!==k||t[21]!==y?(I=d.jsx("div",babelHelpers.extends({},L,{"data-testid":void 0,children:k})),t[20]=k,t[21]=y,t[22]=I):I=t[22];var T;return t[23]!==I||t[24]!==R?(T=d.jsxs(o("FocusRegion.react").FocusRegion,{autoFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:[R,I]}),t[23]=I,t[24]=R,t[25]=T):T=t[25],T}l.VideoPlayerCaptionsMenuCaptionsDisplayPane=h}),226);
__d("VideoPlayerCaptionsMenuMainPane.react",["fbt","ix","CometPressable.react","CometScrollableArea.react","FDSIcon.react","FocusRegion.react","VideoPlayerCaptionsMenuTopBar.react","VideoPlayerHooks","fbicon","focusScopeQueries","isTruthy","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m=e,p=m.useEffect,_=m.useRef,f={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",fontSize:"x1nxh6w3",fontWeight:"xo1l8bm",minWidth:"xfvyar9",outline:"x1a2a7pz",paddingTop:"x1y1aw1k",paddingInlineEnd:"xyri2b",paddingBottom:"xwib8y2",paddingInlineStart:"x1c1uobl",textAlign:"x1yc453h",":hover_backgroundColor":"xx8nu07",$$css:!0}},g=5;function h(e){var t,n=o("react-compiler-runtime").c(27),a=e.captions,i=e.captionsVisible,l=e.controller,m=e.focused,p=e.onPressLog,_=e.setSelectedCaptionsLocale,g=(c||(c=o("VideoPlayerHooks"))).useIsVideoBroadcast(),h=a.localizedCreationMethod!=null||g,y="video-player-captions-menu-language-list-item-"+((t=a.localizedLanguage)!=null?t:""),C;n[0]!==a.captionsUrl||n[1]!==a.locale||n[2]!==a.localizedLanguage||n[3]!==i||n[4]!==l||n[5]!==p||n[6]!==_?(C=function(){var e;a.locale!=null&&_(a.locale),i||l.setCaptionsVisible(!0),a.captionsUrl!=null&&l.setCaptionsUrl(a.captionsUrl),p&&p("captions_language_selector",(e=a.localizedLanguage)!=null?e:"")},n[0]=a.captionsUrl,n[1]=a.locale,n[2]=a.localizedLanguage,n[3]=i,n[4]=l,n[5]=p,n[6]=_,n[7]=C):C=n[7];var b;n[8]===Symbol.for("react.memo_cache_sentinel")?(b={className:"x1rg5ohu xw4jnvo"},n[8]=b):b=n[8];var v;n[9]!==m||n[10]!==y?(v=m&&d.jsx("div",{"data-testid":void 0,children:d.jsx(r("FDSIcon.react"),{color:"white",icon:o("fbicon")._(u("477813"),16)})}),n[9]=m,n[10]=y,n[11]=v):v=n[11];var S;n[12]!==v?(S=d.jsx("div",babelHelpers.extends({},b,{children:v})),n[12]=v,n[13]=S):S=n[13];var R;n[14]===Symbol.for("react.memo_cache_sentinel")?(R={className:"x1ypdohk x1rg5ohu x1hm9lzh xzjbwwf"},n[14]=R):R=n[14];var L=r("isTruthy")(a.localizedCountry)?" "+a.localizedCountry:null,E;n[15]!==h?(E=!h&&d.jsxs(d.Fragment,{children:[" ",s._(/*BTDS*/"(Provided by Author)")]}),n[15]=h,n[16]=E):E=n[16];var k;n[17]!==a.localizedLanguage||n[18]!==L||n[19]!==E?(k=d.jsxs("div",babelHelpers.extends({},R,{children:[a.localizedLanguage,L,E]})),n[17]=a.localizedLanguage,n[18]=L,n[19]=E,n[20]=k):k=n[20];var I;return n[21]!==m||n[22]!==C||n[23]!==S||n[24]!==k||n[25]!==y?(I=d.jsxs(r("CometPressable.react"),{"aria-pressed":m,onPress:C,testid:void 0,xstyle:f.menuOptionRow,children:[S,k]}),n[21]=m,n[22]=C,n[23]=S,n[24]=k,n[25]=y,n[26]=I):I=n[26],I}var y="Toggle On";function C(e){var t=o("react-compiler-runtime").c(66),n=e.availableCaptionsLocales,a=e.captionsListExpanded,i=e.children,l=e.onPressLog,m=e.selectedCaptionsLocale,C=e.setCaptionsListExpanded,b=e.setPane,v=e.setSelectedCaptionsLocale,S=(c||(c=o("VideoPlayerHooks"))).useController(),R=c.useCaptionsVisible(),L=n!=null?n.length:0,E=_(!1),k,I;if(t[0]!==L||t[1]!==R||t[2]!==v?(k=function(){R||v(""),R&&L===0&&!E.current&&(E.current=!0,v(y))},I=[R,v,L],t[0]=L,t[1]=R,t[2]=v,t[3]=k,t[4]=I):(k=t[3],I=t[4]),p(k,I),n==null)return null;var T;t[5]!==n||t[6]!==l||t[7]!==b?(T=d.jsx(r("VideoPlayerCaptionsMenuTopBar.react"),{availableCaptionsLocales:n,onPressLog:l,setPane:b}),t[5]=n,t[6]=l,t[7]=b,t[8]=T):T=t[8];var D;t[9]===Symbol.for("react.memo_cache_sentinel")?(D={className:"x1anpbxc x15eivr9"},t[9]=D):D=t[9];var x;t[10]!==L||t[11]!==S||t[12]!==m||t[13]!==v?(x=L===0&&d.jsxs(r("CometPressable.react"),{"aria-pressed":m===y,onPress:function(){v(y),S.setCaptionsVisible(!0)},xstyle:f.menuOptionRow,children:[d.jsx("div",{className:"x1rg5ohu xw4jnvo",children:m===y&&d.jsx(r("FDSIcon.react"),{color:"white",icon:o("fbicon")._(u("477813"),16)})}),d.jsx("div",{className:"x1ypdohk x1rg5ohu x1hm9lzh xzjbwwf",children:s._(/*BTDS*/"On")})]}),t[10]=L,t[11]=S,t[12]=m,t[13]=v,t[14]=x):x=t[14];var $=m==="",P;t[15]!==S||t[16]!==v?(P=function(){v(""),S.setCaptionsVisible(!1)},t[15]=S,t[16]=v,t[17]=P):P=t[17];var N;t[18]===Symbol.for("react.memo_cache_sentinel")?(N={className:"x1rg5ohu xw4jnvo"},t[18]=N):N=t[18];var M;t[19]!==m?(M=m===""&&d.jsx(r("FDSIcon.react"),{color:"white",icon:o("fbicon")._(u("477813"),16)}),t[19]=m,t[20]=M):M=t[20];var w;t[21]!==M?(w=d.jsx("div",babelHelpers.extends({},N,{children:M})),t[21]=M,t[22]=w):w=t[22];var A;t[23]===Symbol.for("react.memo_cache_sentinel")?(A=d.jsx("div",{className:"x1ypdohk x1rg5ohu x1hm9lzh xzjbwwf",children:s._(/*BTDS*/"Off")}),t[23]=A):A=t[23];var F;t[24]!==w||t[25]!==$||t[26]!==P?(F=d.jsxs(r("CometPressable.react"),{"aria-pressed":$,onPress:P,xstyle:f.menuOptionRow,children:[w,A]}),t[24]=w,t[25]=$,t[26]=P,t[27]=F):F=t[27];var O;if(t[28]!==n||t[29]!==R||t[30]!==S||t[31]!==l||t[32]!==m||t[33]!==v){var B;t[35]!==R||t[36]!==S||t[37]!==l||t[38]!==m||t[39]!==v?(B=function(t){var e=t.locale===m;return t.localizedLanguage!=null?d.jsx(h,{captions:t,captionsVisible:R,controller:S,focused:e,onPressLog:l,setSelectedCaptionsLocale:v},t.locale):null},t[35]=R,t[36]=S,t[37]=l,t[38]=m,t[39]=v,t[40]=B):B=t[40],O=n.slice(0,4).map(B),t[28]=n,t[29]=R,t[30]=S,t[31]=l,t[32]=m,t[33]=v,t[34]=O}else O=t[34];var W;t[41]!==L||t[42]!==a||t[43]!==C?(W=L>=g&&!a&&d.jsx(r("CometPressable.react"),{onPress:function(){C(!0)},xstyle:f.menuOptionRow,children:d.jsx("div",{className:"x1ypdohk x1rg5ohu x9pbi5e",children:s._(/*BTDS*/"See more")})}),t[41]=L,t[42]=a,t[43]=C,t[44]=W):W=t[44];var q;t[45]!==n||t[46]!==a||t[47]!==R||t[48]!==S||t[49]!==m||t[50]!==v?(q=a&&n.slice(4).map(function(e){var t=e.locale===m;return e.localizedLanguage!=null?d.jsx(h,{captions:e,captionsVisible:R,controller:S,focused:t,setSelectedCaptionsLocale:v},e.locale):null}),t[45]=n,t[46]=a,t[47]=R,t[48]=S,t[49]=m,t[50]=v,t[51]=q):q=t[51];var U;t[52]!==a||t[53]!==C?(U=a&&d.jsx(r("CometPressable.react"),{onPress:function(){C(!1)},xstyle:f.menuOptionRow,children:d.jsx("div",{className:"x1ypdohk x1rg5ohu x9pbi5e",children:s._(/*BTDS*/"See less")})}),t[52]=a,t[53]=C,t[54]=U):U=t[54];var V;t[55]!==F||t[56]!==O||t[57]!==W||t[58]!==q||t[59]!==U||t[60]!==x?(V=d.jsx(r("CometScrollableArea.react"),{hideScrollbar:!0,children:d.jsxs("div",babelHelpers.extends({},D,{"data-testid":void 0,children:[x,F,O,W,q,U]}))}),t[55]=F,t[56]=O,t[57]=W,t[58]=q,t[59]=U,t[60]=x,t[61]=V):V=t[61];var H;return t[62]!==i||t[63]!==V||t[64]!==T?(H=d.jsx(o("FocusRegion.react").FocusRegion,{autoFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:d.jsxs("div",{"data-testid":void 0,children:[T,i,V]})}),t[62]=i,t[63]=V,t[64]=T,t[65]=H):H=t[65],H}l.VideoPlayerCaptionsMenuMainPane=C}),226);
__d("VideoPlayerCaptionsMenuTopBar.react",["fbt","ix","CometImage.react","CometPressable.react","VideoPlayerCaptionsMenu.react","VideoPlayerHooks","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m=e.useCallback,p={pressableOption:{width:"xh8yej3",$$css:!0}};function _(e){var t=o("react-compiler-runtime").c(18),n=e.availableCaptionsLocales,a=e.onPressLog,i=e.setPane,l;t[0]!==a||t[1]!==i?(l=function(){i(o("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_DISPLAY_MAIN),a&&a("captions_main_menu_top_bar")},t[0]=a,t[1]=i,t[2]=l):l=t[2];var m=l,_=(c||(c=o("VideoPlayerHooks"))).useIsLive(),g=c.useIsVideoBroadcast(),h=g&&!_,y;t[3]!==n||t[4]!==h?(y=(n==null?void 0:n.some(f))||h,t[3]=n,t[4]=h,t[5]=y):y=t[5];var C=y,b;t[6]===Symbol.for("react.memo_cache_sentinel")?(b={className:"x14ctfv x78zum5 x1jzhcrs"},t[6]=b):b=t[6];var v,S,R;t[7]===Symbol.for("react.memo_cache_sentinel")?(v=d.jsx("div",{className:"x1nxh6w3 x1s688f",children:s._(/*BTDS*/"Subtitles")}),S={className:"x6s0dn4 x14ctfv x1ypdohk x3nfvp2 x1bhwmg6 x13a6bvl xymharo"},R={className:"x3nfvp2"},t[7]=v,t[8]=S,t[9]=R):(v=t[7],S=t[8],R=t[9]);var L;t[10]===Symbol.for("react.memo_cache_sentinel")?(L=d.jsxs("div",babelHelpers.extends({},S,{children:[d.jsx("span",babelHelpers.extends({},R,{children:d.jsx(r("CometImage.react"),{src:u("492300")})})),d.jsx("div",{className:"x3nfvp2 xo1l8bm xdzw4kq",children:s._(/*BTDS*/"Options")})]})),t[10]=L):L=t[10];var E;t[11]!==m?(E=d.jsx("div",babelHelpers.extends({},b,{children:d.jsxs(r("CometPressable.react"),{onPress:m,testid:void 0,xstyle:p.pressableOption,children:[v,L]})})),t[11]=m,t[12]=E):E=t[12];var k;t[13]!==C?(k=C!=null&&C&&d.jsx("div",{className:"x1nxh6w3 x1k4tb9n",children:s._(/*BTDS*/"Auto-generated")}),t[13]=C,t[14]=k):k=t[14];var I;return t[15]!==E||t[16]!==k?(I=d.jsxs("div",{children:[E,k]}),t[15]=E,t[16]=k,t[17]=I):I=t[17],I}function f(e){return e.localizedCreationMethod!=null}l.default=_}),226);
__d("VideoPlayerCaptionsControl.react",["fbt","ix","CometRelay","IntlCurrentLocale","VideoPlayerCaptionsControl_video.graphql","VideoPlayerCaptionsMenu.react","VideoPlayerControlIcon.react","VideoPlayerDefaultControlsProperties","VideoPlayerHooks","VideoPlayerLoggingSuboriginContext","VideoPlayerUserInteractionCounter","fbicon","react","requireDeferred","useMinifiedProductAttribution","usePlayerOriginRouteTracePolicy","useVideoPlayerAvailableCaptionsLocalesFromRelay"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d,m=c||(c=o("react")),p=c,_=p.useCallback,f=p.useContext,g=p.useEffect,h=p.useMemo,y=p.useRef,C=p.useState,b=r("requireDeferred")("VideoHomeTypedLiteLogger").__setRef("VideoPlayerCaptionsControl.react"),v="asr",S=function(t){return t.length<2?null:t.substr(0,2)};function R(t){var a=t.alignMenuToIcon,i=a===void 0?!1:a,l=t.availableCaptionsLocales,c=t.captionsVisible,p=t.children,R=p===void 0?null:p,L=t.compactMenu,E=t.icon,k=t.initialCaptionsUrl,I=t.menuOpened,T=t.onMenuOpen,D=t.onUserInteraction,x=t.setMenuOpened,$=t.video,P=s._(/*BTDS*/"Captions");o("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_captions_menu",I===o("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_CAPTIONS_MENU,D);var N=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerCaptionsControl_video.graphql"),$),M=(d||(d=o("VideoPlayerHooks"))).useMuted(),w=d.useController(),A=r("usePlayerOriginRouteTracePolicy")(),F=r("useVideoPlayerAvailableCaptionsLocalesFromRelay")(N),O=h(function(){var e;return((e=l!=null?l:F)!=null?e:[]).slice().sort(function(e,t){var n,r;return((n=e.localizedLanguage)!=null?n:"")>((r=t.localizedLanguage)!=null?r:"")?1:-1})},[l,F]),B=k!=null?k:N==null?void 0:N.captions_url,W=C(""),q=W[0],U=W[1],V=y(null),H=y(null);g(function(){O.forEach(function(e){e.captionsUrl===B&&e.locale!=null&&(V.current==null&&(V.current=e.locale),U(e.locale))})},[O,B]);var G=r("IntlCurrentLocale").code;g(function(){var e,t=S((e=V.current)!=null?e:"");V.current!==v&&t!=null&&t!==S(G)&&H.current===null?(w.setCaptionsVisible(!1),H.current=!1):M&&!c&&q!==""&&H.current===null?(H.current=!0,w.setCaptionsVisible(!0)):!M&&H.current===!0&&(w.setCaptionsVisible(!1),H.current=!1)},[c,w,M,G,q]);var z=I===o("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_CAPTIONS_MENU,j=C(!1),K=j[0],Q=j[1],X=f(r("VideoPlayerLoggingSuboriginContext")),Y=r("useMinifiedProductAttribution")(),J=_(function(e,t){e===void 0&&(e=null),t===void 0&&(t=null),b.onReady(function(n){n.log({attribution_id_v2:Y,click_point:e,event:"click",event_target_info:A,event_target_sub_type:t,player_suborigin:X})})},[Y,A,X]);return m.jsxs("div",babelHelpers.extends({},{0:{className:"x1rg5ohu x1k70j0n xbelrpt xzueoph xdzw4kq"},1:{className:"x1rg5ohu x1k70j0n xbelrpt xzueoph xdzw4kq x1n2onr6 xuxw1ft"}}[(i===!0)<<0],{"data-testid":void 0,children:[z&&m.jsx("div",babelHelpers.extends({role:"dialog"},{0:{className:"x1av4zun xjwep3j x1t39747 x1wcsgtt x1pczhz8 xacj9c0 x14ctfv x89ytp0 x1hdnelj xgmxx4u xyamay9 xv54qhq x1l90r2v xf7dkkf x10l6tqk xk6ci0l x1602a87"},2:{className:"x1av4zun xjwep3j x1t39747 x1wcsgtt x1pczhz8 xacj9c0 x14ctfv x89ytp0 x1hdnelj xgmxx4u xyamay9 xv54qhq x1l90r2v xf7dkkf x10l6tqk x1602a87 xwjie4w"},1:{className:"x1av4zun xjwep3j x1t39747 x1wcsgtt x1pczhz8 xacj9c0 x14ctfv x89ytp0 x1hdnelj xgmxx4u xyamay9 xv54qhq x1l90r2v xf7dkkf x10l6tqk x1602a87 x1g75g36"},3:{className:"x1av4zun xjwep3j x1t39747 x1wcsgtt x1pczhz8 xacj9c0 x14ctfv x89ytp0 x1hdnelj xgmxx4u xyamay9 xv54qhq x1l90r2v xf7dkkf x10l6tqk x1602a87 x1g75g36"}}[(L===!0)<<1|(i===!0)<<0],{children:m.jsx(o("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenu,{availableCaptionsLocales:O,captionsListExpanded:K,onClose:function(){x!=null&&x(null)},onPressLog:J,selectedCaptionsLocale:q,setCaptionsListExpanded:Q,setSelectedCaptionsLocale:U,children:R})})),m.jsx(r("VideoPlayerControlIcon.react"),{icon:E==null?c?o("fbicon")._(u("662652"),20):o("fbicon")._(u("662655"),20):E,label:P,onPress:function(){x!=null&&x(z?null:o("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_CAPTIONS_MENU),!z&&T!=null&&T(),J("closed_captions_button")},tooltip:P})]}))}R.displayName=R.name+" [from "+i.id+"]",l.default=R}),226);
__d("VideoPlayerCastControlShimImpl.modern.react",["deferredLoadComponent","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("deferredLoadComponent")(r("requireDeferred")("VideoPlayerCastControl.react").__setRef("VideoPlayerCastControlShimImpl.modern.react"));l.default=e}),98);
__d("VideoPlayerCastControlShim.react",["CometPlaceholder.react","VideoPlayerCastControlShimImpl.modern.react","VideoPlayerControlsGroups.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["isVisible"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(8),a,l;n[0]!==t?(a=t.isVisible,l=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=l):(a=n[1],l=n[2]);var s;n[3]!==l?(s=u.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:u.jsx(r("VideoPlayerCastControlShimImpl.modern.react"),babelHelpers.extends({},l))}),n[3]=l,n[4]=s):s=n[4];var c;return n[5]!==a||n[6]!==s?(c=u.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:a,noPaddingEnd:!0,noPaddingStart:!0,children:s}),n[5]=a,n[6]=s,n[7]=c):c=n[7],c}l.default=c}),98);
__d("VideoPlayerDefaultControlsImplLive_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerDefaultControlsImplLive_video",selections:[{args:null,kind:"FragmentSpread",name:"VideoPlayerLiveVideoControls_video"}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerExpandSidePanelControl.react",["fbt","ix","CometTahoeSidePaneContext","VideoPlayerControlIcon.react","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=e.useContext;function m(){var e=o("react-compiler-runtime").c(12),t=d(r("CometTahoeSidePaneContext")),n=t.rightRailExpanded,a=t.setRightRailExpanded,i;e[0]!==n?(i=n?s._(/*BTDS*/"Collapse comments"):s._(/*BTDS*/"Expand comments"),e[0]=n,e[1]=i):i=e[1];var l=i,m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m={className:"x1rg5ohu x1k70j0n xbelrpt xzueoph xdzw4kq"},e[2]=m):m=e[2];var p;e[3]!==n?(p=n?o("fbicon")._(u("557039"),20):o("fbicon")._(u("557052"),20),e[3]=n,e[4]=p):p=e[4];var _;e[5]!==n||e[6]!==a?(_=function(){a(!n)},e[5]=n,e[6]=a,e[7]=_):_=e[7];var f;return e[8]!==l||e[9]!==p||e[10]!==_?(f=c.jsx("div",babelHelpers.extends({},m,{children:c.jsx(r("VideoPlayerControlIcon.react"),{icon:p,label:l,onPress:_,tooltip:l})})),e[8]=l,e[9]=p,e[10]=_,e[11]=f):f=e[11],f}l.default=m}),226);
__d("VideoPlayerLiveVideoControls_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerLiveVideoControls_video",selections:[e,{alias:null,args:null,kind:"ScalarField",name:"is_clipping_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"live_rewind_enabled",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[e],storageKey:null},{args:null,kind:"FragmentSpread",name:"VideoPlayerWatchAndScrollControl_video"},{args:null,kind:"FragmentSpread",name:"LiveVideoLatencyMenuContextProvider_video"},{args:null,kind:"FragmentSpread",name:"VideoPlayerCaptionsControl_video"},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_see_community_moderation_tools",plural:!1,selections:[{args:null,documentName:"VideoPlayerLiveVideoControls_video",fragmentName:"VideoPlayerModeratorControl_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_use_live_rewind",plural:!1,selections:[{args:null,documentName:"VideoPlayerLiveVideoControls_video_if_viewer_can_use_live_rewind",fragmentName:"VideoPlayerLiveRewindControlsGroup_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_use_clipping",plural:!1,selections:[{args:null,documentName:"VideoPlayerLiveVideoControls_video_if_viewer_can_use_clipping",fragmentName:"VideoPlayerClipVideoControl_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_see_costreaming_tools",plural:!1,selections:[{args:null,documentName:"VideoPlayerLiveVideoControls_video_if_viewer_can_see_costreaming_tools",fragmentName:"VideoPlayerCostreamingControl_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null}],type:"Video",abstractKey:null}})();a.exports=e}),null);
__d("VideoPlayerQuietModeControl.react",["fbt","ix","CometTahoeSidePaneContext","VideoPlayerControlIcon.react","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=e.useContext;function m(){var e=o("react-compiler-runtime").c(12),t=d(r("CometTahoeSidePaneContext")),n=t.rightRailHidden,a=t.setRightRailHidden,i;e[0]!==n?(i=n?s._(/*BTDS*/"Show comments and reactions"):s._(/*BTDS*/"Hide comments and reactions"),e[0]=n,e[1]=i):i=e[1];var l=i,m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m={className:"x1rg5ohu x1k70j0n xbelrpt xzueoph xdzw4kq"},e[2]=m):m=e[2];var p;e[3]!==n?(p=n?o("fbicon")._(u("942218"),20):o("fbicon")._(u("942221"),20),e[3]=n,e[4]=p):p=e[4];var _;e[5]!==n||e[6]!==a?(_=function(){a(!n)},e[5]=n,e[6]=a,e[7]=_):_=e[7];var f;return e[8]!==l||e[9]!==p||e[10]!==_?(f=c.jsx("div",babelHelpers.extends({},m,{children:c.jsx(r("VideoPlayerControlIcon.react"),{icon:p,label:l,onPress:_,tooltip:l})})),e[8]=l,e[9]=p,e[10]=_,e[11]=f):f=e[11],f}l.default=m}),226);
__d("VideoPlayerSettingsMenuQualityPaneToggle.react",["fbt","ix","CometImage.react","CometPressable.react","VideoPlayerSettingsMenu.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d={pressableOption:{width:"xh8yej3",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(14),n=e.selectedVideoQuality,a=e.setPane,i=e.targetVideoQuality,l;t[0]!==a?(l=function(){a(o("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.QUALITY)},t[0]=a,t[1]=l):l=t[1];var m,p;t[2]===Symbol.for("react.memo_cache_sentinel")?(m=c.jsx("div",{className:"x1ypdohk x1s688f",children:s._(/*BTDS*/"Quality")}),p={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1bhwmg6 x13a6bvl x13fj5qh x450l9j"},t[2]=m,t[3]=p):(m=t[2],p=t[3]);var _;t[4]!==n||t[5]!==i?(_=n==="notselected"?c.jsx("span",{"data-testid":void 0,children:"\xA0"}):n==="auto"?c.jsxs(c.Fragment,{children:[c.jsx("span",{"data-testid":void 0,children:s._(/*BTDS*/"Auto")}),i!=null?c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"\xA0"}),c.jsx("span",{"data-testid":void 0,children:i})]}):null]}):c.jsx("span",{"data-testid":void 0,children:n}),t[4]=n,t[5]=i,t[6]=_):_=t[6];var f;t[7]===Symbol.for("react.memo_cache_sentinel")?(f={className:"x3nfvp2 xmgb6t1 xwklpps"},t[7]=f):f=t[7];var g;t[8]===Symbol.for("react.memo_cache_sentinel")?(g=c.jsx("span",babelHelpers.extends({},f,{children:c.jsx(r("CometImage.react"),{src:u("480587")})})),t[8]=g):g=t[8];var h;t[9]!==_?(h=c.jsxs("div",babelHelpers.extends({},p,{children:[_,g]})),t[9]=_,t[10]=h):h=t[10];var y;return t[11]!==l||t[12]!==h?(y=c.jsxs(r("CometPressable.react"),{onPress:l,testid:void 0,xstyle:d.pressableOption,children:[m,h]}),t[11]=l,t[12]=h,t[13]=y):y=t[13],y}l.default=m}),226);
__d("VideoPlayerSettingsMenu.react",["fbt","$InternalEnum","CometAudioLanguageUtils","CometErrorBoundary.react","CometKeys","CometPlaceholder.react","CometRelay","FBLogger","LiveVideoLatencyMenu.react","PlaybackSpeedExperiments","VideoPlayerHooks","VideoPlayerSettingsMenuAudioTrackPane.react","VideoPlayerSettingsMenuMainPane.react","VideoPlayerSettingsMenuPlaybackSpeedPane.react","VideoPlayerSettingsMenuQualityPane.react","react","react-compiler-runtime","useLayerKeyCommands","useVideoPlayerControllerSubscription"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["label"],u,c,d=u||(u=o("react")),m=u,p=m.useCallback,_=m.useContext,f=m.useEffect,g=m.useMemo,h=m.useRef,y=m.useState,C=n("$InternalEnum")({LATENCY:"latency",MAIN:"main",PLAYBACK_SPEED:"playbackSpeed",QUALITY:"quality",AUDIO:"audio"});function b(e){var t=o("react-compiler-runtime").c(60),n=e.children,a=e.disableDubbing,l=e.dubTrackMapping,u=e.forceShowPlaybackRateControl,m=e.onClose,p=e.videoID,g=n===void 0?null:n,b=a===void 0?!1:a,S=(c||(c=o("VideoPlayerHooks"))).useCaptionsLoaded(),R=c.useCaptionsVisible(),L=c.useSelectedVideoQuality(),E=c.useController(),k;t[0]!==E?(k=function(){return E.getCurrentState().availableAudioTracks},t[0]=E,t[1]=k):k=t[1];var I=r("useVideoPlayerControllerSubscription")(k),T;t[2]!==E?(T=function(){return E.getCurrentState().targetAudioTrack},t[2]=E,t[3]=T):T=t[3];var D=r("useVideoPlayerControllerSubscription")(T),x=o("CometAudioLanguageUtils").useGetAllAvailableTracks(I,l),$;t[4]!==x.allAvailableTracks?($=x.allAvailableTracks.map(v),t[4]=x.allAvailableTracks,t[5]=$):$=t[5];var P=$,N=c.useInbandCaptionsAutogenerated(),M=c.useTargetVideoQuality(),w=y(C.MAIN),A=w[0],F=w[1],O=y(R),B=O[0],W=O[1],q=c.usePlaybackRate(),U=c.useIsLive(),V=c.useIsLiveRewindActive(),H=_(o("LiveVideoLatencyMenu.react").LiveVideoLatencyMenuContext),G=H.liveVideoLatencyMenuPaneMatchPointer,z=c.useShouldShowPlaybackRateControl(),j;t[6]!==u||t[7]!==z?(j=u===!0||o("PlaybackSpeedExperiments").enableCometPlaybackSpeedControl()&&z,t[6]=u,t[7]=z,t[8]=j):j=t[8];var K=j,Q,X;t[9]!==U||t[10]!==V||t[11]!==A?(Q=function(){U&&!V&&A===C.PLAYBACK_SPEED&&F(C.MAIN)},X=[V,F,U,A],t[9]=U,t[10]=V,t[11]=A,t[12]=Q,t[13]=X):(Q=t[12],X=t[13]),f(Q,X);var Y;t[14]!==P.length||t[15]!==A?(Y=function(){P.length<=1&&A===C.AUDIO&&F(C.MAIN)},t[14]=P.length,t[15]=A,t[16]=Y):Y=t[16];var J;t[17]!==P||t[18]!==A?(J=[P,A],t[17]=P,t[18]=A,t[19]=J):J=t[19],f(Y,J);var Z=h(null),ee=h(null),te;t[20]!==m?(te=function(t){Z.current&&ee.current&&t.target instanceof HTMLElement&&document.contains(t.target)&&!Z.current.contains(t.target)&&ee.current.contains(t.target)&&m()},t[20]=m,t[21]=te):te=t[21];var ne=te,re,oe;t[22]!==ne?(re=function(){return document.addEventListener("click",ne),(function(){document.removeEventListener("click",ne)})},oe=[ne],t[22]=ne,t[23]=re,t[24]=oe):(re=t[23],oe=t[24]),f(re,oe);var ae,ie;t[25]===Symbol.for("react.memo_cache_sentinel")?(ae={key:r("CometKeys").ESCAPE},ie=s._(/*BTDS*/"Close video settings menu"),t[25]=ae,t[26]=ie):(ae=t[25],ie=t[26]);var le;t[27]!==m?(le=[{command:ae,description:ie,handler:function(){m()}}],t[27]=m,t[28]=le):le=t[28];var se=le;r("useLayerKeyCommands")(se);var ue=D!=null?D:null,ce;t[29]!==P||t[30]!==S||t[31]!==B||t[32]!==g||t[33]!==b||t[34]!==N||t[35]!==U||t[36]!==q||t[37]!==L||t[38]!==K||t[39]!==ue||t[40]!==M?(ce=d.jsx(r("VideoPlayerSettingsMenuMainPane.react"),{availableAudioTracks:P,captionsLoaded:S,captionsVisibleOptimistic:B,disableDubbing:b,inbandCaptionsAutogenerated:N,isLive:U,playbackRate:q,selectedVideoQuality:L,setIsCaptionsVisible:W,setPane:F,shouldEnablePlaybackRateSupport:K,targetAudioTrack:ue,targetVideoQuality:M,children:g}),t[29]=P,t[30]=S,t[31]=B,t[32]=g,t[33]=b,t[34]=N,t[35]=U,t[36]=q,t[37]=L,t[38]=K,t[39]=ue,t[40]=M,t[41]=ce):ce=t[41];var de=ce;e:switch(A){case C.LATENCY:{if(G==null){r("FBLogger")("gaming_video").mustfix("Latency components should not be null");break e}var me;t[42]===Symbol.for("react.memo_cache_sentinel")?(me={setPane:F},t[42]=me):me=t[42];var pe;t[43]!==G?(pe=d.jsx(r("CometErrorBoundary.react"),{children:d.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:d.jsx(o("CometRelay").MatchContainer,{match:G,props:me})})}),t[43]=G,t[44]=pe):pe=t[44],de=pe;break e}case C.MAIN:break e;case C.PLAYBACK_SPEED:{var _e;t[45]!==q?(_e=d.jsx(r("VideoPlayerSettingsMenuPlaybackSpeedPane.react"),{playbackRate:q,setPane:F}),t[45]=q,t[46]=_e):_e=t[46],de=_e;break e}case C.QUALITY:{var fe;t[47]!==L?(fe=d.jsx(r("VideoPlayerSettingsMenuQualityPane.react"),{selectedVideoQuality:L,setPane:F}),t[47]=L,t[48]=fe):fe=t[48],de=fe;break e}case C.AUDIO:{var ge;if(t[49]!==x.originalLanguage||t[50]!==P||t[51]!==U||t[52]!==D||t[53]!==p){var he;ge=!U&&P.length>1?d.jsx(r("VideoPlayerSettingsMenuAudioTrackPane.react"),{availableAudioTracks:P,originalVideoLanguage:(he=x.originalLanguage)!=null?he:null,setPane:F,targetAudioTrack:D!=null?D:null,videoID:p!=null?p:null}):null,t[49]=x.originalLanguage,t[50]=P,t[51]=U,t[52]=D,t[53]=p,t[54]=ge}else ge=t[54];de=ge}}var ye;t[55]!==de?(ye=d.jsx("div",{ref:Z,children:de}),t[55]=de,t[56]=ye):ye=t[56];var Ce;t[57]===Symbol.for("react.memo_cache_sentinel")?(Ce=d.jsx("div",{className:"xjbqb8w x5yr21d x1o0tod xg6iff7 x1g81zrj xixxii4 x13vifvy xh8yej3 x8knxv4","data-testid":void 0,ref:ee}),t[57]=Ce):Ce=t[57];var be;return t[58]!==ye?(be=d.jsxs(d.Fragment,{children:[ye,Ce]}),t[58]=ye,t[59]=be):be=t[59],be}function v(t){var n=t.label,r=babelHelpers.objectWithoutPropertiesLoose(t,e);return r}l.VideoPlayerSettingsMenuPaneType=C,l.VideoPlayerSettingsMenu=b}),226);
__d("VideoPlayerSettingsMenuAudioTrackPane.react",["ix","AutoDubbingConsumptionFalcoEvent","CometAudioLanguageMenuItemsMutation","CometFeedStoryMetaSectionMiddot.react","CometImage.react","CometPressable.react","CometRelay","CometVideoPlayerAutoDubbingWWWStrings","CurrentLocale","FDSTextPairing.react","FocusRegion.react","VideoPlayerAudioTrackUtils","VideoPlayerHooks","VideoPlayerSettingsMenu.react","focusScopeQueries","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=e,m=d.useEffect,p=d.useRef,_={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",minWidth:"xfvyar9",outline:"x1a2a7pz",paddingTop:"xyqdw3p",paddingInlineEnd:"xyri2b",paddingBottom:"xg8j3zb",paddingInlineStart:"x1c1uobl",textAlign:"x1yc453h",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0}};function f(e){var t=o("react-compiler-runtime").c(31),n=e.availableAudioTracks,a=e.originalVideoLanguage,i=e.setPane,l=e.targetAudioTrack,d=e.videoID,f=(u||(u=o("VideoPlayerHooks"))).useController(),g=o("CometRelay").useMutation(o("CometAudioLanguageMenuItemsMutation").setUserPreferredAudioLanguageDataMutation),h=g[0],y;t[0]!==h?(y=function(t){t!=null&&h({variables:{input:{language_code:t}}})},t[0]=h,t[1]=y):y=t[1];var C=y,b;t[2]!==d?(b=function(t,n,o,a,i){var e={client_extra_data:{dubbing_type_from:o==null?"original":o,dubbing_type_to:a==null?"original":a,lang_from:t!=null?t:"original",lang_to:n!=null?n:"original"},event:i,video_id:d!=null?d:""};r("AutoDubbingConsumptionFalcoEvent").log(function(){return e})},t[2]=d,t[3]=b):b=t[3];var v=b,S;t[4]!==a?(S=function(t){var e,n=(e=t==null?void 0:t.lang)!=null?e:null;return(t==null?void 0:t.lang)===null&&t.role==null&&(n=a!=null?a:null),n},t[4]=a,t[5]=S):S=t[5];var R=S,L=p(null),E=function(t){var e=R(t),n=R(l);f.selectVideoVariant({lang:t.lang,role:t.role}),C(e),v(n,e,l==null?void 0:l.role,t.role,"fb_reel_auto_dub_consumption_preferred_language_changed"),L.current!=null&&L.current.remove(),L.current=f.subscribe(function(){var r;if(((r=f.getCurrentState().targetAudioTrack)==null?void 0:r.id)===t.id){var o;v(n,e,l==null?void 0:l.role,t.role,"fb_reel_auto_dub_consumption"),(o=L.current)==null||o.remove()}})},k;t[6]!==f?(k=[f],t[6]=f,t[7]=k):k=t[7],m(function(){return function(){var e;(e=L.current)==null||e.remove()}},k);var I;t[8]!==a?(I=function(t){var e=t==null?void 0:t.lang;e==null&&(t==null?void 0:t.role)==null&&(e=a!=null?a:null);var n=o("VideoPlayerAudioTrackUtils").getIntlDisplayName(r("CurrentLocale").get(),e),i=null;return t.role==null?i=n==null?c.jsx("div",{children:o("CometVideoPlayerAutoDubbingWWWStrings").ORIGINAL_AUDIO_LABEL}):c.jsxs("div",{children:[o("CometVideoPlayerAutoDubbingWWWStrings").getLanguageLabel(n),c.jsx(r("CometFeedStoryMetaSectionMiddot.react"),{}),o("CometVideoPlayerAutoDubbingWWWStrings").ORIGINAL_AUDIO_LABEL]}):n!=null&&(i=o("CometVideoPlayerAutoDubbingWWWStrings").getLanguageLabel(n)),i},t[8]=a,t[9]=I):I=t[9];var T=I,D=o("FocusRegion.react").FocusRegion,x=o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,$=o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,P="VideoPlayerSettingsMenu/changeAudioTrackPane",N;t[10]===Symbol.for("react.memo_cache_sentinel")?(N={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1s688f x1lku1pv"},t[10]=N):N=t[10];var M;t[11]!==i?(M=function(){return i(o("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.MAIN)},t[11]=i,t[12]=M):M=t[12];var w;t[13]===Symbol.for("react.memo_cache_sentinel")?(w={className:"x6s0dn4 x3nfvp2 xmgb6t1 x165d6jo"},t[13]=w):w=t[13];var A;t[14]===Symbol.for("react.memo_cache_sentinel")?(A=c.jsx("span",babelHelpers.extends({},w,{children:c.jsx(r("CometImage.react"),{src:s("480579")})})),t[14]=A):A=t[14];var F;t[15]!==M?(F=c.jsx("div",babelHelpers.extends({},N,{children:c.jsxs(r("CometPressable.react"),{onPress:M,testid:void 0,xstyle:_.pressableOption,children:[A,o("CometVideoPlayerAutoDubbingWWWStrings").VOD_TRANSLATIONS_MENU_ITEM]})})),t[15]=M,t[16]=F):F=t[16];var O,B;t[17]===Symbol.for("react.memo_cache_sentinel")?(O=c.jsx("div",{className:"x1j9u4d2 xyamay9",children:c.jsx(r("FDSTextPairing.react"),{body:o("CometVideoPlayerAutoDubbingWWWStrings").VOD_TRANSLATIONS_DESCRIPTION,bodyColor:"white",level:4})}),B={className:"x1hm9lzh x1anpbxc xn80e1m"},t[17]=O,t[18]=B):(O=t[17],B=t[18]);var W="VideoPlayerSettingsMenu/changeAudioTrackPaneList",q=n.map(function(e){var t=(l==null?void 0:l.id)===e.id,n=T(e);if(n!=null)return c.jsx("div",{children:c.jsxs(r("CometPressable.react"),{onPress:function(){return E(e)},testid:void 0,xstyle:_.menuOptionRow,children:[c.jsx("div",{className:"xiakxrv x1rgw4pv x1vjm0to xnqoqkk x16lu3ki x1rg5ohu xmgb6t1 x1sa5p1d x1yrsyyn x1icxu4v x10b6aqq x25sj25",children:t&&c.jsx("div",{className:"x14hiurz x13t61ll x1kchd1x x1u0fnx4 xbxn0j6 x1rg5ohu xqu0tyb xe9ewy2 x1kgmq87 x10l6tqk x51ohtg","data-testid":void 0})}),c.jsx("div",babelHelpers.extends({},{0:{className:"x1ypdohk x1rg5ohu"},1:{className:"x1ypdohk x1rg5ohu x1s688f"}}[!!t<<0],{"data-testid":void 0,children:n}))]})},e.id)}),U;t[19]!==B||t[20]!==q?(U=c.jsx("div",babelHelpers.extends({},B,{"data-testid":void 0,children:q})),t[19]=B,t[20]=q,t[21]=U):U=t[21];var V;t[22]!==F||t[23]!==O||t[24]!==U?(V=c.jsxs("div",{"data-testid":void 0,children:[F,O,U]}),t[22]=F,t[23]=O,t[24]=U,t[25]=V):V=t[25];var H;return t[26]!==D||t[27]!==V||t[28]!==x||t[29]!==$?(H=c.jsx(D,{autoFocusQuery:x,recoverFocusQuery:$,children:V}),t[26]=D,t[27]=V,t[28]=x,t[29]=$,t[30]=H):H=t[30],H}l.default=f}),98);
__d("VideoPlayerSettingsMenuMainPane.react",["CometErrorBoundary.react","CometPlaceholder.react","CometRelay","FocusRegion.react","LiveVideoLatencyMenu.react","VideoPlayerSettingsMenuPlaybackPaneToggle.react","VideoPlayerSettingsMenuQualityPaneToggle.react","deferredLoadComponent","focusScopeQueries","gkx","react","react-compiler-runtime","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c=r("deferredLoadComponent")(r("requireDeferredForDisplay")("VideoPlayerSettingsMenuAudioTrackPaneToggle.react").__setRef("VideoPlayerSettingsMenuMainPane.react"));function d(e){var t=o("react-compiler-runtime").c(23),n=e.availableAudioTracks,a=e.children,l=e.disableDubbing,d=e.isLive,m=e.playbackRate,p=e.selectedVideoQuality,_=e.setPane,f=e.shouldEnablePlaybackRateSupport,g=e.targetAudioTrack,h=e.targetVideoQuality,y=l===void 0?!1:l,C=u(o("LiveVideoLatencyMenu.react").LiveVideoLatencyMenuContext),b=C.liveVideoLatencyMenuPaneToggleMatchPointer,v=!y&&!d&&n.length>1?r("gkx")("24336"):!1,S;t[0]===Symbol.for("react.memo_cache_sentinel")?(S={className:"x14ctfv x78zum5 x1hoihq8 x1lku1pv"},t[0]=S):S=t[0];var R;t[1]!==p||t[2]!==_||t[3]!==h?(R=s.jsx("div",babelHelpers.extends({},S,{children:s.jsx(r("VideoPlayerSettingsMenuQualityPaneToggle.react"),{selectedVideoQuality:p,setPane:_,targetVideoQuality:h})})),t[1]=p,t[2]=_,t[3]=h,t[4]=R):R=t[4];var L;t[5]!==_||t[6]!==v||t[7]!==g?(L=v&&s.jsx("div",{className:"x14ctfv x78zum5 x1hoihq8 x1lku1pv",children:s.jsx(c,{setPane:_,targetAudioTrack:g})}),t[5]=_,t[6]=v,t[7]=g,t[8]=L):L=t[8];var E;t[9]===Symbol.for("react.memo_cache_sentinel")?(E={className:"x14ctfv x78zum5 x1hoihq8 x1lku1pv"},t[9]=E):E=t[9];var k;t[10]!==m||t[11]!==_||t[12]!==f?(k=s.jsx("div",babelHelpers.extends({},E,{children:s.jsx(r("VideoPlayerSettingsMenuPlaybackPaneToggle.react"),{playbackRate:m,setPane:_,shouldEnablePlaybackRateSupport:f})})),t[10]=m,t[11]=_,t[12]=f,t[13]=k):k=t[13];var I;t[14]!==b||t[15]!==_?(I=b!=null&&s.jsx("div",{className:"x14ctfv x78zum5 x1hoihq8 x1lku1pv",children:s.jsx(r("CometErrorBoundary.react"),{children:s.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:s.jsx(o("CometRelay").MatchContainer,{match:b,props:{setPane:_}})})})}),t[14]=b,t[15]=_,t[16]=I):I=t[16];var T;return t[17]!==a||t[18]!==R||t[19]!==L||t[20]!==k||t[21]!==I?(T=s.jsx(o("FocusRegion.react").FocusRegion,{autoFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:s.jsxs("div",{"data-testid":void 0,children:[R,L,k,I,a]})}),t[17]=a,t[18]=R,t[19]=L,t[20]=k,t[21]=I,t[22]=T):T=t[22],T}l.default=d}),98);
__d("VideoPlayerSettingsMenuPlaybackPaneToggle.react",["fbt","ix","CometImage.react","CometPressable.react","VideoPlayerSettingsMenu.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d={pressableOption:{width:"xh8yej3",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(13),n=e.playbackRate,a=e.setPane,i=e.shouldEnablePlaybackRateSupport;if(!i)return null;var l;t[0]!==a?(l=function(){a(o("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.PLAYBACK_SPEED)},t[0]=a,t[1]=l):l=t[1];var m,p;t[2]===Symbol.for("react.memo_cache_sentinel")?(m=c.jsx("div",{className:"x1ypdohk x1s688f",children:s._(/*BTDS*/"Playback Speed")}),p={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1bhwmg6 x13a6bvl x13fj5qh x450l9j"},t[2]=m,t[3]=p):(m=t[2],p=t[3]);var _;t[4]!==n?(_=c.jsx("span",{"data-testid":void 0,children:n}),t[4]=n,t[5]=_):_=t[5];var f;t[6]===Symbol.for("react.memo_cache_sentinel")?(f={className:"x3nfvp2 xmgb6t1 xwklpps"},t[6]=f):f=t[6];var g;t[7]===Symbol.for("react.memo_cache_sentinel")?(g=c.jsx("span",babelHelpers.extends({},f,{children:c.jsx(r("CometImage.react"),{src:u("480587")})})),t[7]=g):g=t[7];var h;t[8]!==_?(h=c.jsxs("div",babelHelpers.extends({},p,{children:[_,g]})),t[8]=_,t[9]=h):h=t[9];var y;return t[10]!==l||t[11]!==h?(y=c.jsxs(r("CometPressable.react"),{onPress:l,testid:void 0,xstyle:d.pressableOption,children:[m,h]}),t[10]=l,t[11]=h,t[12]=y):y=t[12],y}l.default=m}),226);
__d("VideoPlayerSettingsMenuPlaybackSpeedPane.react",["fbt","ix","CometImage.react","CometPressable.react","FocusRegion.react","VideoPlayerHooks","VideoPlayerPlaybackSpeedConstants","VideoPlayerSettingsMenu.react","focusScopeQueries","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",minWidth:"xfvyar9",outline:"x1a2a7pz",paddingTop:"xyqdw3p",paddingInlineEnd:"xyri2b",paddingBottom:"xg8j3zb",paddingInlineStart:"x1c1uobl",textAlign:"x1yc453h",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0}};function p(e){var t=o("react-compiler-runtime").c(17),n=e.playbackRate,a=e.setPane,i=(c||(c=o("VideoPlayerHooks"))).useController(),l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1s688f x1lku1pv"},t[0]=l):l=t[0];var p;t[1]!==a?(p=function(){return a(o("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.MAIN)},t[1]=a,t[2]=p):p=t[2];var _;t[3]===Symbol.for("react.memo_cache_sentinel")?(_={className:"x3nfvp2 xmgb6t1 x165d6jo"},t[3]=_):_=t[3];var f,g;t[4]===Symbol.for("react.memo_cache_sentinel")?(f=d.jsx("span",babelHelpers.extends({},_,{children:d.jsx(r("CometImage.react"),{src:u("480579")})})),g=s._(/*BTDS*/"Playback Speed"),t[4]=f,t[5]=g):(f=t[4],g=t[5]);var h;t[6]!==p?(h=d.jsx("div",babelHelpers.extends({},l,{children:d.jsxs(r("CometPressable.react"),{onPress:p,testid:void 0,xstyle:m.pressableOption,children:[" ",f,g]})})),t[6]=p,t[7]=h):h=t[7];var y;t[8]===Symbol.for("react.memo_cache_sentinel")?(y={className:"x1hm9lzh x1anpbxc"},t[8]=y):y=t[8];var C;t[9]!==i||t[10]!==n?(C=o("VideoPlayerPlaybackSpeedConstants").PLAYBACK_SPEED_OPTIONS.map(function(e){var t=n===e,o=s._(/*BTDS*/"Set the playback speed to {playback_rate_option}{is_playback_rate_option_selected}",[s._param("playback_rate_option",e),s._param("is_playback_rate_option_selected",t?", selected":"")]);return d.jsx("div",{children:d.jsxs(r("CometPressable.react"),{"aria-checked":t,"aria-label":o,onPress:function(){i.setPlaybackRate(e)},testid:void 0,xstyle:m.menuOptionRow,children:[d.jsx("div",{className:"x17j41np x1rgw4pv x1vjm0to xnqoqkk x16lu3ki x1rg5ohu xmgb6t1 x1sa5p1d x1yrsyyn x1icxu4v x10b6aqq x25sj25",children:t&&d.jsx("div",{className:"x14hiurz x13t61ll x1kchd1x x1u0fnx4 xbxn0j6 x1rg5ohu xqu0tyb xe9ewy2 x1kgmq87 x10l6tqk x51ohtg","data-testid":void 0})}),d.jsx("div",babelHelpers.extends({},{0:{className:"x1ypdohk x1rg5ohu"},1:{className:"x1ypdohk x1rg5ohu x1s688f"}}[!!t<<0],{"data-testid":void 0,children:e}))]})},e)}),t[9]=i,t[10]=n,t[11]=C):C=t[11];var b;t[12]!==C?(b=d.jsx("div",babelHelpers.extends({},y,{"data-testid":void 0,children:C})),t[12]=C,t[13]=b):b=t[13];var v;return t[14]!==h||t[15]!==b?(v=d.jsx(o("FocusRegion.react").FocusRegion,{autoFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:d.jsxs("div",{"data-testid":void 0,children:[h,b]})}),t[14]=h,t[15]=b,t[16]=v):v=t[16],v}l.default=p}),226);
__d("VideoPlayerSettingsMenuQualityPane.react",["fbt","ix","CometImage.react","CometPressable.react","FocusRegion.react","VideoPlayerHooks","VideoPlayerSettingsMenu.react","focusScopeQueries","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",minWidth:"xfvyar9",outline:"x1a2a7pz",paddingTop:"xyqdw3p",paddingInlineEnd:"xyri2b",paddingBottom:"xg8j3zb",paddingInlineStart:"x1c1uobl",textAlign:"x1yc453h",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0}};function p(e){var t=o("react-compiler-runtime").c(26),n=e.selectedVideoQuality,a=e.setPane,i=(c||(c=o("VideoPlayerHooks"))).useAvailableVideoQualities(),l=c.useIsAbrEnabled(),p=c.useController(),_;t[0]===Symbol.for("react.memo_cache_sentinel")?(_={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1s688f x1lku1pv"},t[0]=_):_=t[0];var f;t[1]!==a?(f=function(){return a(o("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.MAIN)},t[1]=a,t[2]=f):f=t[2];var g;t[3]===Symbol.for("react.memo_cache_sentinel")?(g={className:"x6s0dn4 x3nfvp2 xmgb6t1 x165d6jo"},t[3]=g):g=t[3];var h,y;t[4]===Symbol.for("react.memo_cache_sentinel")?(h=d.jsx("span",babelHelpers.extends({},g,{children:d.jsx(r("CometImage.react"),{src:u("480579")})})),y=s._(/*BTDS*/"Quality"),t[4]=h,t[5]=y):(h=t[4],y=t[5]);var C;t[6]!==f?(C=d.jsx("div",babelHelpers.extends({},_,{children:d.jsxs(r("CometPressable.react"),{onPress:f,testid:void 0,xstyle:m.pressableOption,children:[h,y]})})),t[6]=f,t[7]=C):C=t[7];var b;t[8]===Symbol.for("react.memo_cache_sentinel")?(b={className:"x1hm9lzh x1anpbxc"},t[8]=b):b=t[8];var v;t[9]!==p||t[10]!==l||t[11]!==n?(v=l?d.jsx("div",{children:d.jsxs(r("CometPressable.react"),{onPress:function(){p.selectVideoQuality("auto")},testid:void 0,xstyle:m.menuOptionRow,children:[d.jsx("div",{className:"xiakxrv x1rgw4pv x1vjm0to xnqoqkk x16lu3ki x1rg5ohu xmgb6t1 x1sa5p1d x1yrsyyn x1icxu4v x10b6aqq x25sj25",children:n==="auto"&&d.jsx("div",{className:"x14hiurz x13t61ll x1kchd1x x1u0fnx4 xbxn0j6 x1rg5ohu xqu0tyb xe9ewy2 x1kgmq87 x10l6tqk x51ohtg","data-testid":void 0})}),d.jsx("div",babelHelpers.extends({},{0:{className:"x1ypdohk x1rg5ohu"},1:{className:"x1ypdohk x1rg5ohu x1s688f"}}[(n==="auto")<<0],{"data-testid":void 0,children:s._(/*BTDS*/"Auto")}))]})},"auto"):null,t[9]=p,t[10]=l,t[11]=n,t[12]=v):v=t[12];var S;if(t[13]!==i||t[14]!==p||t[15]!==n){var R;t[17]!==p||t[18]!==n?(R=function(t){var e=n===t;return d.jsx("div",{children:d.jsxs(r("CometPressable.react"),{onPress:function(){p.selectVideoQuality(t)},testid:void 0,xstyle:m.menuOptionRow,children:[d.jsx("div",{className:"xiakxrv x1rgw4pv x1vjm0to xnqoqkk x16lu3ki x1rg5ohu xmgb6t1 x1sa5p1d x1yrsyyn x1icxu4v x10b6aqq x25sj25",children:e&&d.jsx("div",{className:"x14hiurz x13t61ll x1kchd1x x1u0fnx4 xbxn0j6 x1rg5ohu xqu0tyb xe9ewy2 x1kgmq87 x10l6tqk x51ohtg","data-testid":void 0})}),d.jsx("div",babelHelpers.extends({},{0:{className:"x1ypdohk x1rg5ohu"},1:{className:"x1ypdohk x1rg5ohu x1s688f"}}[!!e<<0],{"data-testid":void 0,children:t}))]})},t)},t[17]=p,t[18]=n,t[19]=R):R=t[19],S=i.map(R).reverse(),t[13]=i,t[14]=p,t[15]=n,t[16]=S}else S=t[16];var L;t[20]!==v||t[21]!==S?(L=d.jsxs("div",babelHelpers.extends({},b,{"data-testid":void 0,children:[v,S]})),t[20]=v,t[21]=S,t[22]=L):L=t[22];var E;return t[23]!==L||t[24]!==C?(E=d.jsx(o("FocusRegion.react").FocusRegion,{autoFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:d.jsxs("div",{"data-testid":void 0,children:[C,L]})}),t[23]=L,t[24]=C,t[25]=E):E=t[25],E}l.default=p}),226);
__d("VideoPlayerSettingsControl.react",["fbt","ix","VideoPlayerContexts","VideoPlayerControlIcon.react","VideoPlayerDefaultControlsProperties","VideoPlayerSettingsMenu.react","VideoPlayerUserInteractionCounter","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m=e,p=m.useContext,_=m.useState;function f(e){var t=o("react-compiler-runtime").c(30),n=e.alignMenuToIcon,a=e.children,i=e.compactMenu,l=e.dubTrackMapping,m=e.forceShowPlaybackRateControl,f=e.icon,g=e.menuOpened,h=e.onMenuOpen,y=e.onUserInteraction,C=e.ref,b=e.setMenuOpened,v=e.videoID,S=n===void 0?!1:n,R=a===void 0?null:a,L=_(!1),E=L[0],k=L[1],I=p((c||(c=o("VideoPlayerContexts"))).DisableDubbingContext),T;t[0]===Symbol.for("react.memo_cache_sentinel")?(T=s._(/*BTDS*/"Settings"),t[0]=T):T=t[0];var D=T,x=b!=null;o("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_settings_menu",x?g===o("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_SETTINGS_MENU:E,y);var $=x?g===o("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_SETTINGS_MENU:E,P;t[1]!==S?(P={0:{className:"x1rg5ohu x1k70j0n xbelrpt xzueoph xdzw4kq"},1:{className:"x1rg5ohu x1k70j0n xbelrpt xzueoph xdzw4kq x1n2onr6 xuxw1ft"}}[(S===!0)<<0],t[1]=S,t[2]=P):P=t[2];var N;t[3]!==S||t[4]!==R||t[5]!==i||t[6]!==I||t[7]!==l||t[8]!==m||t[9]!==x||t[10]!==$||t[11]!==b||t[12]!==v?(N=$&&d.jsx("div",babelHelpers.extends({},{0:{className:"xjb1437 xacj9c0 x14ctfv x89ytp0 x889kno x1x5flf6 x1a8lsjc xwn43p0 x10l6tqk x1fwd5yv"},2:{className:"xjb1437 xacj9c0 x14ctfv x89ytp0 x889kno x1x5flf6 x1a8lsjc xwn43p0 x10l6tqk xwjie4w"},1:{className:"xjb1437 xacj9c0 x14ctfv x89ytp0 x889kno x1x5flf6 x1a8lsjc xwn43p0 x10l6tqk x3m8u43"},3:{className:"xjb1437 xacj9c0 x14ctfv x89ytp0 x889kno x1x5flf6 x1a8lsjc xwn43p0 x10l6tqk x3m8u43"}}[(i===!0)<<1|(S===!0)<<0],{children:d.jsx(o("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenu,{disableDubbing:I,dubTrackMapping:l,forceShowPlaybackRateControl:m,onClose:function(){x?b!=null&&b(null):k(!1)},videoID:v!=null?v:null,children:R})})),t[3]=S,t[4]=R,t[5]=i,t[6]=I,t[7]=l,t[8]=m,t[9]=x,t[10]=$,t[11]=b,t[12]=v,t[13]=N):N=t[13];var M;t[14]!==f?(M=f==null?o("fbicon")._(u("497567"),20):f,t[14]=f,t[15]=M):M=t[15];var w;t[16]!==x||t[17]!==$||t[18]!==E||t[19]!==h||t[20]!==b?(w=function(){x?b!=null&&b($?null:o("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_SETTINGS_MENU):k(!E),!$&&h!=null&&h()},t[16]=x,t[17]=$,t[18]=E,t[19]=h,t[20]=b,t[21]=w):w=t[21];var A;t[22]!==M||t[23]!==w?(A=d.jsx(r("VideoPlayerControlIcon.react"),{icon:M,label:D,onPress:w,tooltip:D}),t[22]=M,t[23]=w,t[24]=A):A=t[24];var F;return t[25]!==C||t[26]!==P||t[27]!==N||t[28]!==A?(F=d.jsxs("div",babelHelpers.extends({},P,{ref:C,children:[N,A]})),t[25]=C,t[26]=P,t[27]=N,t[28]=A,t[29]=F):F=t[29],F}f.displayName="VideoPlayerSettingsControl",l.default=f}),226);
__d("VideoPlayerWatchAndScrollControl_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerWatchAndScrollControl_video",selections:[e,{alias:null,args:null,kind:"ScalarField",name:"playable_duration_in_ms",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"has_professional_features_for_watch",storageKey:null}],type:"VideoOwner",abstractKey:"__isVideoOwner"},e],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_huddle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"Video",abstractKey:null}})();a.exports=e}),null);
__d("useVideoPlayerWatchAndScrollControlNUXQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29450006731309811"}),null);
__d("useVideoPlayerWatchAndScrollControlNUXQuery.graphql",["useVideoPlayerWatchAndScrollControlNUXQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{kind:"Literal",name:"nux_id",value:9347}],t={alias:null,args:null,kind:"ScalarField",name:"should_show",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerWatchAndScrollControlNUXQuery",selections:[{alias:null,args:e,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[t],storageKey:"nux(nux_id:9347)"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useVideoPlayerWatchAndScrollControlNUXQuery",selections:[{alias:null,args:e,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:"nux(nux_id:9347)"}]},params:{id:n("useVideoPlayerWatchAndScrollControlNUXQuery_facebookRelayOperation"),metadata:{},name:"useVideoPlayerWatchAndScrollControlNUXQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useVideoPlayerWatchAndScrollControlNUX",["fbt","CometRelay","CometWatchAndScrollTriggerContext","FBLogger","react","react-compiler-runtime","requireDeferred","useFDSCallout","useVideoPlayerWatchAndScrollControlNUXQuery.graphql"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=c.useCallback,m=c.useContext,p=c.useEffect,_=c.useState,f=r("requireDeferred")("CometDismissFBNuxMutation").__setRef("useVideoPlayerWatchAndScrollControlNUX"),g=r("requireDeferred")("CometLogImpressionFBNuxMutation").__setRef("useVideoPlayerWatchAndScrollControlNUX"),h={nux:{maxWidth:"xw5ewwj",$$css:!0}},y=9347,C=e!==void 0?e:e=n("useVideoPlayerWatchAndScrollControlNUXQuery.graphql");function b(e){var t=o("react-compiler-runtime").c(19),n=m(r("CometWatchAndScrollTriggerContext")),a=n.setIsTriggerDisabled,i=_(null),l=i[0],u=i[1],c=o("CometRelay").useRelayEnvironment(),d;t[0]!==c||t[1]!==a?(d=function(){a!=null&&a(!0),u(!1),f.onReady(function(e){e.commit(c,y)})},t[0]=c,t[1]=a,t[2]=d):d=t[2];var b=d,R,L;t[3]!==e||t[4]!==c||t[5]!==l?(R=function(){if(e&&l===null){var t=o("CometRelay").fetchQuery(c,C,{fetchPolicy:"store-or-network"}).subscribe({next:function(n){var t,r=(n==null||(t=n.nux)==null?void 0:t.should_show)||!1;u(r),r&&e&&g.onReady(function(e){e.commit(c,y,S,v)})}});return(function(){t.unsubscribe()})}},L=[c,e,l],t[3]=e,t[4]=c,t[5]=l,t[6]=R,t[7]=L):(R=t[6],L=t[7]),p(R,L);var E;t[8]===Symbol.for("react.memo_cache_sentinel")?(E=s._(/*BTDS*/"Watch and scroll feature tooltip"),t[8]=E):E=t[8];var k;t[9]===Symbol.for("react.memo_cache_sentinel")?(k=s._(/*BTDS*/"Continue watching while you browse Facebook."),t[9]=k):k=t[9];var I;t[10]!==b?(I=function(){b()},t[10]=b,t[11]=I):I=t[11];var T;t[12]===Symbol.for("react.memo_cache_sentinel")?(T=function(){u(!1)},t[12]=T):T=t[12];var D;t[13]!==I?(D={align:"end","aria-label":E,arrowStyle:"inset",content:k,disableAutoFlip:!0,hasCloseButton:!0,onClose:I,onHide:T,position:"below",type:"accent",xstyle:h.nux},t[13]=I,t[14]=D):D=t[14];var x=r("useFDSCallout")(D,l===!0&&e||!1),$=x.anchorRef,P;return t[15]!==$||t[16]!==b||t[17]!==l?(P={handleDismissNUX:b,nuxRef:$,shouldShowNUX:l},t[15]=$,t[16]=b,t[17]=l,t[18]=P):P=t[18],P}function v(){r("FBLogger")("watch_www_and_off_platform").mustfix("logimpression fb nux mutation failed for video player watch and scroll control.")}function S(){}l.default=b}),226);
__d("VideoPlayerWatchAndScrollControl.react",["fbt","ix","CastingStateHooks","CometPictureInPictureExpContext","CometRelay","CometRouteRenderType","CometVideoPictureInPictureManager.react","CometVideoPictureInPictureManagerContext","CometWatchAndScrollControlNUXContext","CometWatchAndScrollTriggerContext","JSResourceForInteraction","StoryAttachmentContext","VideoPlayerControlIcon.react","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","VideoPlayerWatchAndScrollControl_video.graphql","VideoPlayerWithWatchAndScrollTrigger.react","emptyFunction","fbicon","gkx","react","react-compiler-runtime","requireDeferred","useCometLazyDialog","useCometRouterDispatcher","useCometRouterState","useIsVideoHomePlayerOriginFromTracePolicy","useMinifiedProductAttribution","usePlayerOriginRouteTracePolicy","useVideoPlayerWatchAndScrollControlNUX","useWatchAndScrollTrigger"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d,m=c||(c=o("react")),p=c,_=p.useCallback,f=p.useContext,g=p.useEffect,h=p.useState,y=r("requireDeferred")("VideoHomeTypedLiteLogger").__setRef("VideoPlayerWatchAndScrollControl.react"),C=r("JSResourceForInteraction")("CometCastingStopWatchAndScrollDialog.react").__setRef("VideoPlayerWatchAndScrollControl.react"),b=6e4,v=window.document.pictureInPictureEnabled;function S(t){var a,i,l,c,p=o("react-compiler-runtime").c(56),_=t.subOrigin,S=t.video,R=f(r("CometWatchAndScrollTriggerContext")),L=R.isControlShown,E=R.setIsControlShown,k=o("CometRouteRenderType").useIsPushView(),I=(d||(d=o("VideoPlayerHooks"))).useIsFullscreen(),T=r("useCometRouterDispatcher")(),D=r("useCometRouterState")(),x=(a=D==null?void 0:D.main.route.tabKey)!=null?a:"undefined",$=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerWatchAndScrollControl_video.graphql"),S),P=$==null?void 0:$.id,N=(i=$==null?void 0:$.playable_duration_in_ms)!=null?i:0,M=$==null?void 0:$.is_huddle,w=$==null?void 0:$.url,A,F;p[0]!==E?(A=function(){E!=null&&E(!0)},F=[E],p[0]=E,p[1]=A,p[2]=F):(A=p[1],F=p[2]),g(A,F);var O=r("usePlayerOriginRouteTracePolicy")(),B=r("useIsVideoHomePlayerOriginFromTracePolicy")(O),W=($==null||(l=$.owner)==null?void 0:l.has_professional_features_for_watch)===!0&&N>=b&&L&&!B,q=d.usePlaying(),U=d.useController(),V=d.useCurrentTimeThrottled(200),H=V>=10,G=h(!1),z=G[0],j=G[1],K=h(!1),Q=K[0],X=K[1],Y=h(!1),J=Y[0],Z=Y[1],ee=o("VideoPlayerInstreamAdsStateHooks").useInstreamAdsStateValue(),te=ee==="STARTING_INDICATOR"||ee==="PLAY_NI_VIDEO"||ee==="START_AD"||ee==="PLAY_LONGER_AD",ne=r("useMinifiedProductAttribution")(),re,oe;p[3]!==H||p[4]!==q?(re=function(){q&&H&&j(!0)},oe=[H,q],p[3]=H,p[4]=q,p[5]=re,p[6]=oe):(re=p[5],oe=p[6]),g(re,oe);var ae=o("CastingStateHooks").useIsCastingAnyVideo(),ie=r("useCometLazyDialog")(C),le=ie[0],se=!te&&z&&W,ue=r("useVideoPlayerWatchAndScrollControlNUX")(se),ce=ue.handleDismissNUX,de=ue.nuxRef,me=ue.shouldShowNUX,pe=me===!0&&se,_e=f(r("CometWatchAndScrollControlNUXContext")),fe=_e.setIsVideoPlayerWatchAndScrollControlNUXVisible,ge=f(r("CometPictureInPictureExpContext")),he,ye;p[7]!==pe||p[8]!==fe?(he=function(){fe&&fe(pe)},ye=[pe,fe],p[7]=pe,p[8]=fe,p[9]=he,p[10]=ye):(he=p[9],ye=p[10]),g(he,ye);var Ce=o("StoryAttachmentContext").useStoryAttachmentContext(),be=Ce.videoPlayerSessionID,ve=o("useWatchAndScrollTrigger").useWatchAndScrollTrigger(_,o("VideoPlayerWithWatchAndScrollTrigger.react").WatchAndScrollTriggerType.WNS_CONTROL,P,w,be),Se=d.useIsPremiumMusicVideo(),Re=$==null||(c=$.owner)==null?void 0:c.id,Le;p[11]!==Se||p[12]!==Re||p[13]!==ge?(Le=function(){var e=o("CometVideoPictureInPictureManagerContext").isInPictureInPictureExp(),t=o("CometVideoPictureInPictureManagerContext").isInPictureInPictureExpControlGroup();ge.setPictureInPictureExpConfig({isInPictureInPictureExp:e,isInPictureInPictureExpControlGroup:t,isSkipAndChainingDisabled:!1}),v&&e&&X(!0);var n=(e||t)&&(Se||o("CometVideoPictureInPictureManager.react").EXCLUDED_PROVIDERS.includes(Re));n&&Z(!0)},p[11]=Se,p[12]=Re,p[13]=ge,p[14]=Le):Le=p[14];var Ee=Le,ke=O==="comet.videos.tahoe",Ie;p[15]!==ae||p[16]!==ve||p[17]!==le||p[18]!==P?(Ie=function(){ae&&P!=null?le({onClose:r("emptyFunction"),onContinue:ve,startingVideoType:"wns"},r("emptyFunction")):ve()},p[15]=ae,p[16]=ve,p[17]=le,p[18]=P,p[19]=Ie):Ie=p[19];var Te=Ie,De;p[20]!==U||p[21]!==T||p[22]!==ce||p[23]!==Q||p[24]!==pe||p[25]!==Te||p[26]!==ne||p[27]!==O||p[28]!==_||p[29]!==x?(De=function(){Te(),Q?(y.onReady(function(e){e.log({attribution_id_v2:ne,click_point:"control_picture_in_picture",event:"click",event_target_info:O,player_suborigin:_})}),U.requestPictureInPicture()):y.onReady(function(e){e.log({attribution_id_v2:ne,click_point:"control_watch_and_scroll",event:"click",event_target_info:x})}),pe===!0&&ce(),T&&T.popPushView()},p[20]=U,p[21]=T,p[22]=ce,p[23]=Q,p[24]=pe,p[25]=Te,p[26]=ne,p[27]=O,p[28]=_,p[29]=x,p[30]=De):De=p[30];var xe=De,$e=_==="live_producer",Pe;p[31]!==U||p[32]!==T||p[33]!==ke||p[34]!==ce||p[35]!==Q||p[36]!==I||p[37]!==pe||p[38]!==Te||p[39]!==ne||p[40]!==$e||p[41]!==O||p[42]!==_||p[43]!==x?(Pe=function(){Te(),Q?(y.onReady(function(e){e.log({attribution_id_v2:ne,click_point:"control_picture_in_picture",event:"click",event_target_info:O,player_suborigin:_})}),U.requestPictureInPicture()):y.onReady(function(e){e.log({attribution_id_v2:ne,click_point:"control_watch_and_scroll",event:"click",event_target_info:x})}),pe===!0&&ce(),I&&U.requestSetIsFullscreen(!1),T!=null&&($e||ke)&&T.go("/",{})},p[31]=U,p[32]=T,p[33]=ke,p[34]=ce,p[35]=Q,p[36]=I,p[37]=pe,p[38]=Te,p[39]=ne,p[40]=$e,p[41]=O,p[42]=_,p[43]=x,p[44]=Pe):Pe=p[44];var Ne=Pe,Me=k?xe:Ne,we;if(r("gkx")("20836")){var Ae;p[45]===Symbol.for("react.memo_cache_sentinel")?(Ae=s._(/*BTDS*/"Continue watching while you use Workplace"),p[45]=Ae):Ae=p[45],we=Ae}else if(M===!0){var Fe;p[46]===Symbol.for("react.memo_cache_sentinel")?(Fe=s._(/*BTDS*/"Continue listening while you browse Facebook."),p[46]=Fe):Fe=p[46],we=Fe}else{var Oe;p[47]===Symbol.for("react.memo_cache_sentinel")?(Oe=s._(/*BTDS*/"Continue watching while you browse Facebook."),p[47]=Oe):Oe=p[47],we=Oe}if(Q){var Be;p[48]===Symbol.for("react.memo_cache_sentinel")?(Be=s._(/*BTDS*/"Enter Picture in Picture Mode"),p[48]=Be):Be=p[48],we=Be}var We;return p[49]!==J||p[50]!==pe||p[51]!==we||p[52]!==de||p[53]!==Ee||p[54]!==Me?(We=J?null:m.jsx("div",{onMouseEnter:Ee,ref:de,children:m.jsx(r("VideoPlayerControlIcon.react"),{color:"white",icon:o("fbicon")._(u("150489"),20),label:we,onPress:Me,tooltip:pe?null:we})}),p[49]=J,p[50]=pe,p[51]=we,p[52]=de,p[53]=Ee,p[54]=Me,p[55]=We):We=p[55],We}l.default=S}),226);
__d("VideoPlayerLiveVideoControls.react",["CometPlaceholder.react","CometRelay","CometTahoeCustomVideoAreaContext","CometTahoeSidePaneContext","CometTrackingNodeProvider.react","LiveCostreamerTagSubscription.react","LiveVideoLatencyMenu.react","VideoPlayerCaptionsControl.react","VideoPlayerCastControlShim.react","VideoPlayerControlsBottomRowAddOnContext","VideoPlayerControlsContainerOverlay.react","VideoPlayerControlsGroups.react","VideoPlayerExpandSidePanelControl.react","VideoPlayerHooks","VideoPlayerLiveVideoControls_video.graphql","VideoPlayerPlaybackControl.react","VideoPlayerQuietModeControl.react","VideoPlayerSettingsControl.react","VideoPlayerVolumeControl.react","VideoPlayerWatchAndScrollControl.react","gkx","react","react-compiler-runtime","useVideoPlayerBigPlayButtonOverlay"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s,m=d.useContext,p=d.useState,_=e!==void 0?e:e=n("VideoPlayerLiveVideoControls_video.graphql");function f(e){var t,n,a=o("react-compiler-runtime").c(85),l=o("CometRelay").useFragment(_,e.video),s=(u||(u=o("VideoPlayerHooks"))).useEnded(),d=u.useIsFullscreen(),f=m(o("VideoPlayerControlsBottomRowAddOnContext").VideoPlayerControlsBottomRowAddOnContext),g=m(r("CometTahoeSidePaneContext")),h=g.rightRailHidden,y=r("useVideoPlayerBigPlayButtonOverlay")(),C=y.bigPlayButtonIsVisible,b=u.useCaptionsLoaded(),v=u.useCaptionsVisible(),S=p(null),R=S[0],L=S[1],E=m(o("CometTahoeCustomVideoAreaContext").CometTahoeCustomVideoAreaContext),k=E.customVideoAreaHidden;if(s)return null;var I=e.disablePlaybackControls,T=e.expandControl,D=e.isControlsVisible,x=e.isExpandControlVisible,$=e.isVolumeControlVisible,P=e.isWatchAndScrollControlVisible,N=e.onUserInteraction,M=e.shouldRenderCaptionsControl,w=e.shouldRenderCostreamControl,A=e.shouldRenderModeratorControl,F=e.subOrigin,O=x===void 0?!1:x,B=P===void 0?!1:P,W=M===void 0?!0:M,q=w===void 0?!1:w,U=A===void 0?!1:A,V=l==null?void 0:l.id,H=l==null||(t=l.owner)==null?void 0:t.id,G=l==null?void 0:l.if_viewer_can_see_costreaming_tools,z=G!=null,j=l==null?void 0:l.if_viewer_can_use_clipping,K=(l==null?void 0:l.is_clipping_enabled)===!0,Q=l==null?void 0:l.if_viewer_can_see_community_moderation_tools,X=Q!=null,Y=l==null?void 0:l.if_viewer_can_use_live_rewind,J=((n=l==null?void 0:l.live_rewind_enabled)!=null?n:!1)&&e.shouldHideRewindControls!==!0,Z=O||D||I===!0&&!C,ee=B||D||I===!0&&!C,te;a[0]!==T||a[1]!==Z?(te=c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:Z,noPaddingEnd:!0,noPaddingStart:!0,children:T}),a[0]=T,a[1]=Z,a[2]=te):te=a[2];var ne=te,re;a[3]!==e.shouldRenderWatchAndScrollControl||a[4]!==ee||a[5]!==F||a[6]!==l?(re=e.shouldRenderWatchAndScrollControl===!0&&F!=null&&l!=null?c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:ee,children:c.jsx(r("VideoPlayerWatchAndScrollControl.react"),{subOrigin:F,video:l})}):null,a[3]=e.shouldRenderWatchAndScrollControl,a[4]=ee,a[5]=F,a[6]=l,a[7]=re):re=a[7];var oe=re,ae=F==="watch_scroll",ie=r("gkx")("24335")?W===!0:!ae,le;a[8]!==Y||a[9]!==I||a[10]!==D||a[11]!==J||a[12]!==N||a[13]!==e.shouldRenderPauseControl?(le=J?c.jsx(o("CometRelay").MatchContainer,{match:Y,props:{isControlsVisible:D&&!I,onUserInteraction:N,video:Y}}):c.jsxs(c.Fragment,{children:[e.shouldRenderPauseControl?c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:D&&!I,children:c.jsx(r("VideoPlayerPlaybackControl.react"),{})}):null,c.jsx(o("VideoPlayerControlsGroups.react").Expanded,{children:c.jsx(c.Fragment,{})})]}),a[8]=Y,a[9]=I,a[10]=D,a[11]=J,a[12]=N,a[13]=e.shouldRenderPauseControl,a[14]=le):le=a[14];var se;a[15]!==H||a[16]!==V?(se=H!=null&&V!=null&&c.jsx(r("LiveCostreamerTagSubscription.react"),{pageID:H,videoID:V}),a[15]=H,a[16]=V,a[17]=se):se=a[17];var ue;a[18]!==z||a[19]!==G||a[20]!==d||a[21]!==q||a[22]!==V?(ue=z&&q&&V!=null&&!d&&c.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:c.jsx(o("CometRelay").MatchContainer,{match:G,props:{video:G}})}),a[18]=z,a[19]=G,a[20]=d,a[21]=q,a[22]=V,a[23]=ue):ue=a[23];var ce;a[24]!==d||a[25]!==e.shouldRenderQuietModeControl?(ce=e.shouldRenderQuietModeControl===!0&&!d&&c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:!0,noPaddingEnd:!0,children:c.jsx(r("VideoPlayerQuietModeControl.react"),{})}),a[24]=d,a[25]=e.shouldRenderQuietModeControl,a[26]=ce):ce=a[26];var de;a[27]!==d||a[28]!==e.shouldRenderExpandSidePanelControl||a[29]!==h?(de=e.shouldRenderExpandSidePanelControl===!0&&!d&&!h&&c.jsx(r("VideoPlayerExpandSidePanelControl.react"),{}),a[27]=d,a[28]=e.shouldRenderExpandSidePanelControl,a[29]=h,a[30]=de):de=a[30];var me;a[31]!==j||a[32]!==K||a[33]!==V?(me=K&&V!=null&&c.jsx(o("CometRelay").MatchContainer,{match:j,props:{video:j,videoID:V}}),a[31]=j,a[32]=K,a[33]=V,a[34]=me):me=a[34];var pe;a[35]!==X||a[36]!==Q||a[37]!==U||a[38]!==V?(pe=X&&U?c.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:c.jsx(o("CometRelay").MatchContainer,{match:Q,props:{video:Q,videoID:V}})}):null,a[35]=X,a[36]=Q,a[37]=U,a[38]=V,a[39]=pe):pe=a[39];var _e;a[40]!==f||a[41]!==I||a[42]!==R||a[43]!==N||a[44]!==l?(_e=I===!0?null:c.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:257,children:c.jsx(o("LiveVideoLatencyMenu.react").LiveVideoLatencyMenuContextProvider,{video:l,children:c.jsx(r("VideoPlayerSettingsControl.react"),{alignMenuToIcon:(f==null?void 0:f.getBottomRowAddOn())!=null,menuOpened:R,onUserInteraction:N,setMenuOpened:L})})}),a[40]=f,a[41]=I,a[42]=R,a[43]=N,a[44]=l,a[45]=_e):_e=a[45];var fe;a[46]!==f||a[47]!==b||a[48]!==v||a[49]!==ie||a[50]!==D||a[51]!==R||a[52]!==N||a[53]!==l?(fe=b&&ie?c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:D,children:c.jsx(r("VideoPlayerCaptionsControl.react"),{alignMenuToIcon:(f==null?void 0:f.getBottomRowAddOn())!=null,captionsVisible:v,menuOpened:R,onUserInteraction:N,setMenuOpened:L,video:l})}):null,a[46]=f,a[47]=b,a[48]=v,a[49]=ie,a[50]=D,a[51]=R,a[52]=N,a[53]=l,a[54]=fe):fe=a[54];var ge;a[55]!==I||a[56]!==D||a[57]!==e.shouldRenderCastControl||a[58]!==F||a[59]!==l?(ge=e.shouldRenderCastControl===!0&&F!=null&&l!=null?c.jsx(r("VideoPlayerCastControlShim.react"),{isVisible:D&&!I,subOrigin:F}):null,a[55]=I,a[56]=D,a[57]=e.shouldRenderCastControl,a[58]=F,a[59]=l,a[60]=ge):ge=a[60];var he;a[61]!==D||a[62]!==ce||a[63]!==de||a[64]!==me||a[65]!==pe||a[66]!==_e||a[67]!==fe||a[68]!==ge||a[69]!==se||a[70]!==ue?(he=c.jsxs(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:D,children:[se,ue,ce,de,me,pe,_e,fe,ge]}),a[61]=D,a[62]=ce,a[63]=de,a[64]=me,a[65]=pe,a[66]=_e,a[67]=fe,a[68]=ge,a[69]=se,a[70]=ue,a[71]=he):he=a[71];var ye;a[72]!==N?(ye=c.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:114,children:c.jsx(r("VideoPlayerVolumeControl.react"),{onUserInteraction:N})}),a[72]=N,a[73]=ye):ye=a[73];var Ce;a[74]!==$||a[75]!==ye?(Ce=c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:$,noPaddingStart:!0,children:ye}),a[74]=$,a[75]=ye,a[76]=Ce):Ce=a[76];var be;return a[77]!==k||a[78]!==ne||a[79]!==D||a[80]!==he||a[81]!==Ce||a[82]!==le||a[83]!==oe?(be=c.jsxs(r("VideoPlayerControlsContainerOverlay.react"),{isBackgroundVisible:D,isVisible:k,children:[le,he,ne,oe,Ce]}),a[77]=k,a[78]=ne,a[79]=D,a[80]=he,a[81]=Ce,a[82]=le,a[83]=oe,a[84]=be):be=a[84],be}function g(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=c.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:c.jsx(f,babelHelpers.extends({},e))}),t[0]=e,t[1]=n):n=t[1],n}l.default=g}),98);
__d("VideoPlayerDefaultControlsImplLive.react",["CometRelay","VideoPlayerDefaultControlsImplLive_video.graphql","VideoPlayerLiveVideoControls.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a=o("react-compiler-runtime").c(17),i=t.expandControl,l=t.isControlsVisible,s=t.isVolumeControlVisible,c=t.onUserInteraction,d=t.pictureInPictureControl,m=t.shouldHideRewindControls,p=t.shouldRenderCaptionsControl,_=t.shouldRenderCostreamControl,f=t.shouldRenderExpandSidePanelControl,g=t.shouldRenderModeratorControl,h=t.shouldRenderPauseControl,y=t.shouldRenderQuietModeControl,C=t.shouldRenderWatchAndScrollControl,b=t.subOrigin,v=t.video,S=t.videoTahoeUrl,R=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerDefaultControlsImplLive_video.graphql"),v),L;return a[0]!==i||a[1]!==l||a[2]!==s||a[3]!==c||a[4]!==d||a[5]!==m||a[6]!==p||a[7]!==_||a[8]!==f||a[9]!==g||a[10]!==h||a[11]!==y||a[12]!==C||a[13]!==b||a[14]!==R||a[15]!==S?(L=u.jsx(r("VideoPlayerLiveVideoControls.react"),{expandControl:i,isControlsVisible:l,isVolumeControlVisible:s,onUserInteraction:c,pictureInPictureControl:d,shouldHideRewindControls:m,shouldRenderCaptionsControl:p,shouldRenderCostreamControl:_,shouldRenderExpandSidePanelControl:f,shouldRenderModeratorControl:g,shouldRenderPauseControl:h,shouldRenderQuietModeControl:y,shouldRenderWatchAndScrollControl:C,subOrigin:b,video:R,videoTahoeUrl:S}),a[0]=i,a[1]=l,a[2]=s,a[3]=c,a[4]=d,a[5]=m,a[6]=p,a[7]=_,a[8]=f,a[9]=g,a[10]=h,a[11]=y,a[12]=C,a[13]=b,a[14]=R,a[15]=S,a[16]=L):L=a[16],L}l.default=c}),98);
__d("VideoPlayerDefaultControlsImplNotLive_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerDefaultControlsImplNotLive_video",selections:[{fragment:{kind:"InlineFragment",selections:[{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"CometAudioLanguageUtils_dubtrackMapping"}]}],type:"Video",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"CometAudioLanguageUtils_dubtrackMapping"},{args:null,kind:"FragmentSpread",name:"VideoPlayerScrubberWithPreview_video"},{args:null,kind:"FragmentSpread",name:"VideoPlayerWatchAndScrollControl_video"},{args:null,kind:"FragmentSpread",name:"VideoPlayerCaptionsControl_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAvailableCaptionsLocalesFromRelay_video"},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_use_clipping",plural:!1,selections:[{args:null,documentName:"VideoPlayerDefaultControlsImplNotLive_video_if_viewer_can_use_clipping",fragmentName:"VideoPlayerClipVideoControl_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerScrubberWithPreview_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerScrubberWithPreview_video",selections:[{args:null,kind:"FragmentSpread",name:"VideoPlayerScrubberPreview_video"},{args:null,kind:"FragmentSpread",name:"VideoPlayerScrubberRenderer_video"}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerScrubberWithPreview.react",["CometRelay","VideoPlayerScrubber.react","VideoPlayerScrubberPreview.react","VideoPlayerScrubberRenderer.react","VideoPlayerScrubberWithPreview_video.graphql","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a=o("react-compiler-runtime").c(11),i=t.onUserInteraction,l=t.timelinePlayedXStyle,s=t.video,c=t.videoChapters,d=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerScrubberWithPreview_video.graphql"),s),m;a[0]!==l||a[1]!==d||a[2]!==c?(m=function(t){return u.jsx(r("VideoPlayerScrubberRenderer.react"),{scrubberProps:babelHelpers.extends({},t,{timelinePlayedXStyle:l}),video:d,videoChapters:c})},a[0]=l,a[1]=d,a[2]=c,a[3]=m):m=a[3];var p;a[4]!==d||a[5]!==c?(p=function(t){return u.jsx(r("VideoPlayerScrubberPreview.react"),{timestampSec:t,video:d,videoChapters:c})},a[4]=d,a[5]=c,a[6]=p):p=a[6];var _;return a[7]!==i||a[8]!==m||a[9]!==p?(_=u.jsx(r("VideoPlayerScrubber.react"),{onUserInteraction:i,renderScrubber:m,renderTooltip:p}),a[7]=i,a[8]=m,a[9]=p,a[10]=_):_=a[10],_}l.default=c}),98);
__d("VideoPlayerDefaultControlsImplNotLive.react",["CometAudioLanguageUtils","CometRelay","CometTahoeSidePaneContext","VideoPlayerCaptionsControl.react","VideoPlayerControlsBottomRowAddOnContext","VideoPlayerControlsContainerOverlay.react","VideoPlayerControlsGroups.react","VideoPlayerDefaultControlsImplNotLive_video.graphql","VideoPlayerExpandSidePanelControl.react","VideoPlayerHooks","VideoPlayerPlaybackControl.react","VideoPlayerPlaybackTimer.react","VideoPlayerQuietModeControl.react","VideoPlayerScrubberWithPreview.react","VideoPlayerSettingsControl.react","VideoPlayerVolumeControl.react","VideoPlayerWatchAndScrollControl.react","gkx","react","react-compiler-runtime","useVideoPlayerAvailableCaptionsLocalesFromRelay"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s,m=d.useContext,p=d.useState;function _(t){var a,i=o("react-compiler-runtime").c(72),l=t.availableCaptionsLocales,s=t.expandControl,d=t.initialCaptionsUrl,_=t.isControlsVisible,f=t.isVolumeControlVisible,g=t.onUserInteraction,h=t.scrubberTimelinePlayedXStyle,y=t.shouldRenderCaptionsControl,C=t.shouldRenderExpandSidePanelControl,b=t.shouldRenderQuietModeControl,v=t.shouldRenderWatchAndScrollControl,S=t.skipControl,R=t.subOrigin,L=t.video,E=t.videoChapters,k=y===void 0?!0:y,I=C===void 0?!1:C,T=b===void 0?!1:b,D=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerDefaultControlsImplNotLive_video.graphql"),L),x=(u||(u=o("VideoPlayerHooks"))).useIsFullscreen(),$=o("CometAudioLanguageUtils").useGetDubTrackMapping(D==null?void 0:D.CometAudioLanguageUtils_dubtrackMapping),P=D==null?void 0:D.id,N=D==null?void 0:D.if_viewer_can_use_clipping,M=m(o("VideoPlayerControlsBottomRowAddOnContext").VideoPlayerControlsBottomRowAddOnContext),w=m(r("CometTahoeSidePaneContext")),A=w.rightRailHidden,F;i[0]!==_||i[1]!==x||i[2]!==T?(F=T===!0&&!x?c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:_,noPaddingEnd:!0,children:c.jsx(r("VideoPlayerQuietModeControl.react"),{})}):null,i[0]=_,i[1]=x,i[2]=T,i[3]=F):F=i[3];var O=F,B;i[4]!==_||i[5]!==x||i[6]!==A||i[7]!==I?(B=I===!0&&!x&&!A&&c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:_,noPaddingEnd:!0,children:c.jsx(r("VideoPlayerExpandSidePanelControl.react"),{})}),i[4]=_,i[5]=x,i[6]=A,i[7]=I,i[8]=B):B=i[8];var W=B,q;i[9]!==N||i[10]!==_||i[11]!==O||i[12]!==P?(q=N!=null&&P!=null&&c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:_,noPaddingEnd:!0,noPaddingStart:O!=null,children:c.jsx(o("CometRelay").MatchContainer,{match:N,props:{video:N,videoID:P}})}),i[9]=N,i[10]=_,i[11]=O,i[12]=P,i[13]=q):q=i[13];var U=q,V=p(null),H=V[0],G=V[1],z=O!=null||U!=null,j;i[14]!==M?(j=M==null?void 0:M.getBottomRowAddOn(),i[14]=M,i[15]=j):j=i[15];var K=j!=null,Q;i[16]!==$||i[17]!==H||i[18]!==g||i[19]!==K?(Q=c.jsx(r("VideoPlayerSettingsControl.react"),{alignMenuToIcon:K,dubTrackMapping:$,menuOpened:H,onUserInteraction:g,setMenuOpened:G}),i[16]=$,i[17]=H,i[18]=g,i[19]=K,i[20]=Q):Q=i[20];var X;i[21]!==_||i[22]!==Q||i[23]!==z?(X=c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:_,noPaddingEnd:!0,noPaddingStart:z,children:Q}),i[21]=_,i[22]=Q,i[23]=z,i[24]=X):X=i[24];var Y=X,J;i[25]!==_||i[26]!==v||i[27]!==R||i[28]!==D?(J=v===!0&&R!=null&&D!=null?c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:_,children:c.jsx(r("VideoPlayerWatchAndScrollControl.react"),{subOrigin:R,video:D})}):null,i[25]=_,i[26]=v,i[27]=R,i[28]=D,i[29]=J):J=i[29];var Z=J,ee;i[30]!==s||i[31]!==_?(ee=c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:_,noPaddingEnd:!0,children:s}),i[30]=s,i[31]=_,i[32]=ee):ee=i[32];var te=ee,ne;i[33]!==g?(ne=c.jsx(r("VideoPlayerVolumeControl.react"),{onUserInteraction:g}),i[33]=g,i[34]=ne):ne=i[34];var re;i[35]!==f||i[36]!==ne?(re=c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:f,noPaddingStart:!0,children:ne}),i[35]=f,i[36]=ne,i[37]=re):re=i[37];var oe=re,ae;i[38]!==g||i[39]!==h||i[40]!==D||i[41]!==E?(ae=c.jsx(r("VideoPlayerScrubberWithPreview.react"),{onUserInteraction:g,timelinePlayedXStyle:h,video:D,videoChapters:E}),i[38]=g,i[39]=h,i[40]=D,i[41]=E,i[42]=ae):ae=i[42];var ie;i[43]!==_||i[44]!==ae?(ie=c.jsx(o("VideoPlayerControlsGroups.react").Expanded,{isVisible:_,children:ae}),i[43]=_,i[44]=ae,i[45]=ie):ie=i[45];var le=ie,se;i[46]===Symbol.for("react.memo_cache_sentinel")?(se=c.jsx(r("VideoPlayerPlaybackControl.react"),{}),i[46]=se):se=i[46];var ue;i[47]===Symbol.for("react.memo_cache_sentinel")?(ue=c.jsx(r("VideoPlayerPlaybackTimer.react"),{}),i[47]=ue):ue=i[47];var ce;i[48]!==_||i[49]!==S?(ce=c.jsxs(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:_,children:[se,S,ue]}),i[48]=_,i[49]=S,i[50]=ce):ce=i[50];var de=ce,me=r("gkx")("21034")?!1:r("gkx")("24335")?k===!0:R!=="watch_scroll",pe=u.useCaptionsLoaded(),_e=u.useCaptionsVisible(),fe=r("useVideoPlayerAvailableCaptionsLocalesFromRelay")(D),ge=l!=null?l:fe,he=pe||((a=ge==null?void 0:ge.length)!=null?a:0)>0,ye=me&&he,Ce;i[51]!==ge||i[52]!==_e||i[53]!==d||i[54]!==_||i[55]!==H||i[56]!==g||i[57]!==ye||i[58]!==D?(Ce=ye?c.jsx(o("VideoPlayerControlsGroups.react").Contracted,{isVisible:_,children:c.jsx(r("VideoPlayerCaptionsControl.react"),{availableCaptionsLocales:ge,captionsVisible:_e,initialCaptionsUrl:d,menuOpened:H,onUserInteraction:g,setMenuOpened:G,video:D})}):null,i[51]=ge,i[52]=_e,i[53]=d,i[54]=_,i[55]=H,i[56]=g,i[57]=ye,i[58]=D,i[59]=Ce):Ce=i[59];var be=Ce,ve;return i[60]!==be||i[61]!==U||i[62]!==W||i[63]!==_||i[64]!==de||i[65]!==O||i[66]!==te||i[67]!==le||i[68]!==Y||i[69]!==oe||i[70]!==Z?(ve=c.jsxs(r("VideoPlayerControlsContainerOverlay.react"),{isBackgroundVisible:_,children:[de,le,O,W,U,Y,be,Z,te,null,oe]}),i[60]=be,i[61]=U,i[62]=W,i[63]=_,i[64]=de,i[65]=O,i[66]=te,i[67]=le,i[68]=Y,i[69]=oe,i[70]=Z,i[71]=ve):ve=i[71],ve}l.default=_}),98);/*FB_PKG_DELIM*/
__d("BinarySearch",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e={GREATEST_LOWER_BOUND:"GREATEST_LOWER_BOUND",GREATEST_STRICT_LOWER_BOUND:"GREATEST_STRICT_LOWER_BOUND",LEAST_STRICT_UPPER_BOUND:"LEAST_STRICT_UPPER_BOUND",LEAST_UPPER_BOUND:"LEAST_UPPER_BOUND",NEAREST:"NEAREST"},s=function(t,n){if(typeof t!="number"||typeof n!="number")throw r("FBLogger")("comet_infra").mustfixThrow("The default comparator can only be used with sequences of numbers.");return t-n},u=e.GREATEST_LOWER_BOUND,c=e.GREATEST_STRICT_LOWER_BOUND,d=e.LEAST_STRICT_UPPER_BOUND,m=e.LEAST_UPPER_BOUND,p=e.NEAREST;function _(e,t,n,r,o){o===void 0&&(o=s);var a=m,i=g(e,t,n,r,o,a);if(n<=i&&i<r){var l=e(i);return o(l,t)===0?l:void 0}else return}function f(e,t,n,r,o){o===void 0&&(o=s);var a=m,i=g(e,t,n,r,o,a);return n<=i&&i<r&&o(e(i),t)===0?i:-1}function g(e,t,n,o,a,i){switch(i){case m:return h(e,t,n,o,a);case u:return y(e,t,n,o,a);case d:return C(e,t,n,o,a);case c:return b(e,t,n,o,a);case p:return v(e,t,n,o,a);default:throw r("FBLogger")("comet_infra").mustfixThrow("Invalid mode %s",i)}}function h(e,t,n,r,o){for(var a=n,i=r;a+1<i;){var l=a+Math.floor((i-a)/2);o(e(l),t)>=0?i=l:a=l}return a<i&&o(e(a),t)>=0?a:i}function y(e,t,n,r,o){return C(e,t,n,r,o)-1}function C(e,t,n,r,o){for(var a=n,i=r;a+1<i;){var l=a+Math.floor((i-a)/2);o(e(l),t)>0?i=l:a=l}return a<i&&o(e(a),t)>0?a:i}function b(e,t,n,r,o){return h(e,t,n,r,o)-1}function v(e,t,n,r,o){var a=y(e,t,n,r,o),i=Math.abs(o(e(a),t)),l=Math.abs(o(e(a+1),t));return i<l?Math.max(a,n):Math.min(a+1,r-1)}function S(e,t,n){return _(function(t){return e[t]},t,0,e.length,n)}function R(e,t,n){return f(function(t){return e[t]},t,0,e.length,n)}function L(e,t,n,r){return g(function(t){return e[t]},t,0,e.length,n,r)}l.GREATEST_LOWER_BOUND=u,l.GREATEST_STRICT_LOWER_BOUND=c,l.LEAST_STRICT_UPPER_BOUND=d,l.LEAST_UPPER_BOUND=m,l.NEAREST=p,l.find=_,l.findIndex=f,l.findBound=g,l.leastUpperBound=h,l.greatestLowerBound=y,l.leastStrictUpperBound=C,l.greatestStrictLowerBound=b,l.nearest=v,l.findInArray=S,l.findIndexInArray=R,l.findBoundInArray=L}),98);
__d("CubicBezier",[],(function(t,n,r,o,a,i){var e=.005,l=(function(){function t(e,t){this.cx=3*e[0],this.bx=3*(t[0]-e[0])-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e[1],this.by=3*(t[1]-e[1])-this.cy,this.ay=1-this.cy-this.by}var n=t.prototype;return n.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.solve=function(t){return t=this.solveCurveX(t),((this.ay*t+this.by)*t+this.cy)*t},n.solveCurveX=function(n){var t,r,o,a,i,l;for(i=n,r=0;r<8;r++){if(l=this.sampleCurveX(i)-n,Math.abs(l)<e)return i;if(t=(3*this.ax*i+2*this.bx)*i+this.cx,Math.abs(t)<1e-6)break;i-=l/t}if(o=0,a=1,i=n,i<o)return o;if(i>a)return a;for(;o<a;){if(l=this.sampleCurveX(i),Math.abs(l-n)<e)return i;n>l?o=i:a=i,i=(a-o)/2+o}return i},t})();i.default=l}),66);
__d("FunnelAction",[],(function(t,n,r,o,a,i){"use strict";var e="name",l="payload",s="relative_time",u="tag",c=(function(){function t(t,n,r,o){this.$1={},this.$1[e]=t,this.$1[s]=n,r!==void 0&&(this.$1[u]=r),o!==void 0&&(this.$1[l]=JSON.stringify(o))}var n=t.prototype;return n.getData=function(){return this.$1},t})();i.default=c}),66);
__d("FunnelRegistry",[],(function(t,n,r,o,a,i){var e=Object.freeze({WWW_EXAMPLE_FUNNEL:!0,MSITE_EXAMPLE_FUNNEL:!0,WWW_FEED_SHARE_DIALOG_FUNNEL:!0,MSITE_FEED_SHARE_DIALOG_FUNNEL:!0,WWW_CHAT_QUICKCAM_FUNNEL:!0,PLATFORM_SHARE_DIALOG_FUNNEL:!0,WWW_CANVAS_EDITOR_FUNNEL:!0,MSITE_COMMENT_TYPING_FUNNEL:!0,MSITE_NOTE_READING_FUNNEL:!0,WWW_LISTS_COMPOSER_FUNNEL:!0,WWW_REACTIONS_LIKE_BUTTON_HOVER_FUNNEL:!0,WWW_REACTIONS_NUX_FUNNEL:!0,WWW_COMMENT_REACTIONS_NUX_FUNNEL:!0,MSITE_INLINE_REPLY_COMPOSER_FUNNEL:!0,WWW_LEAD_GEN_DESKTOP_AD_UNIT_FUNNEL:!0,WWW_LEAD_GEN_MSITE_AD_UNIT_FUNNEL:!0,WWW_LINK_PICKER_DIALOG_FUNNEL:!0,WWW_MEME_PICKER_DIALOG_FUNNEL:!0,WWW_SHOP_BUY_FUNNEL:!0,WWW_SNOWLIFT_ACTIONS_FUNNEL:!0,WWW_CANVAS_AD_CREATION_FUNNEL:!0,WWW_SEARCH_AWARENESS_LEARNING_NUX_FUNNEL:!0,WWW_CONSTITUENT_TITLE_UPSELL_FUNNEL:!0,WWW_PAGE_CREATION_FUNNEL:!0,WWW_RECRUITING_PRODUCTS_FUNNEL:!0,WWW_RECRUITING_SEARCH_FUNNEL:!0,WWW_RECRUITING_BULK_EMAIL_FUNNEL:!0,WWW_RECRUITING_LEAVE_HANDLER_FUNNEL:!0,WWW_PMT_FUNNEL:!0,WWW_PULSE_FUNNEL:!0,WWW_ORGTOOL_FUNNEL:!0,WWW_VIDEOS_CASTING_FUNNEL:!0,MSITE_PPD_FUNNEL:!0,WWW_CMS_SEARCH_FUNNEL:!0,SOCIAL_SEARCH_CONVERSION_WWW_FUNNEL:!0,SOCIAL_SEARCH_DASHBOARD_WWW_FUNNEL:!0,GAMES_QUICKSILVER_FUNNEL:!0,SRT_USER_FLOW_FUNNEL:!0,WWW_MEME_PIVOT_FUNNEL:!0,WWW_NOTIFICATION_FUNNEL:!0,MSITE_FEED_ALBUM_CTA_FUNNEL:!0,MTOUCH_COMMENT_STORIES_FUNNEL:!0,WWW_MESSENGER_SHARE_TO_FB_FUNNEL:!0,MISINFORMATION_RESHARE_ALERT_FUNNEL:!0,FACECAST_BROADCASTER_FUNNEL:!0,FACECAST_SCHEDULED_LIVE_FUNNEL:!0,SCHEDULED_WATCH_PARTY_VIEWER_FUNNEL:!0,COLLEGE_COMMUNITY_NUX_ONBOARDING_FUNNEL:!0,WWW_MESSENGER_SEARCH_SESSION_FUNNEL:!0,WWW_MESSENGER_CONTENT_SEARCH_FUNNEL:!0,WWW_LIVE_PRODUCER_FUNNEL:!0,WWW_AD_BREAKS_ONBOARDING_FUNNEL:!0,WWW_LAUNCHPAD_ONBOARDING_FUNNEL:!0,WWW_LEAD_GEN_FORM_EDITOR_FUNNEL:!0,WWW_AD_BREAK_HOME_ONBOARDING_FUNNEL:!0,WEB_MESSENGER_RTC_FUNNEL:!0,WEB_RTC_SCREEN_SHARING_FUNNEL:!0,MTOUCH_NUX_PROFILE_PIC_FUNNEL:!0,ADS_VIDEO_CAPTION_FUNNEL:!0,WWW_BUSINESS_ALERT_FUNNEL:!0,SOCIAL_VR_INTERACTIVE_THREE_SIXTY_FUNNEL:!0,WWW_DIVEBAR_RECENTS_FUNNEL:!0,UNIDASH_EDIT_WIDGET_FUNNEL:!0,MESSENGER_UNIVERSAL_SEARCH_FUNNEL:!0,WWW_BUSINESS_CREATION_FUNNEL:!0,WWW_BUSINESS_VERIFICATION_FUNNEL:!0,WWW_APP_REVIEW_BUSINESS_VERIFICATION_FUNNEL:!0,AEC_APPLICATION_FUNNEL:!0,WWW_MESSENGER_POLL_GROUP_CREATE_FUNNEL:!0,ADS_USER_REPORTING_FUNNEL:!0,MAP_WEB_FUNNEL:!0,INTERN_OOPS_FUNNEL:!0,FRX_FUNNEL:!0,WWW_ACCESSIBILITY_NOTIFICATIONS_JEWEL_TABBING_FUNNEL:!0,MTOUCH_FEED_MISSED_STORIES_FUNNEL:!0,WWW_STORYSET_FUNNEL:!0,POLYGLOT_MAIN_FUNNEL:!0,CREATIVE_STUDIO_CREATION_FUNNEL:!0,CREATIVE_STUDIO_HUB_FUNNEL:!0,CREATIVE_STUDIO_INVITE_JOIN_FUNNEL:!0,FX_PLATFORM_INVITE_JOIN_FUNNEL:!0,FX_PLATFORM_INVITE_SEND_FUNNEL:!0,WWW_LIVE_VIEWER_TIPJAR_FUNNEL:!0,WWW_FUNDRAISER_CREATION_FUNNEL:!0,WWW_FUNDRAISER_EDIT_FUNNEL:!0,WWW_FBL_FUNNEL:!0,WWW_CLUE_FUNNEL:!0,WWW_OFFERS_SIMPLE_COMPOSE_FUNNEL:!0,WWW_OFFERS_SIMPLE_COMPOSE_POST_LIKE_FUNNEL:!0,WWW_SEE_OFFERS_CTA_NUX_FUNNEL:!0,WWW_CHEVRON_FUNNEL:!0,MSITE_AD_BREAKS_ONBOARDING_FLOW_FUNNEL:!0,CASUAL_GROUP_PICKER_FUNNEL:!0,TOPICS_TO_FOLLOW_FUNNEL:!0,WWW_SPATIAL_REACTION_PRODUCTION_FUNNEL:!0,WWW_ADS_TARGETING_AUDIENCE_MANAGER_FUNNEL:!0,WWW_NEWSFEED_TAILLOAD_FUNNEL:!0,SEARCH_ADS_WWW_FUNNEL:!0,KEYFRAMES_FUNNEL:!0,WWW_NOTIFS_UP_NEXT_FUNNEL:!0,MSITE_PROFILE_PICTURE_EDIT_FUNNEL:!0,WWW_PROFILE_INTRO_CARD_EDIT_MEDIA_FUNNEL:!0,BUSINESS_PAYMENTS_MERCHANT_ONBOARDING_FUNNEL:!0,SELLER_EXPERIENCE_SHOP_INSIGHTS_NEW_FUNNEL:!0,SELLER_EXPERIENCE_ONBOARDING_NEW_FUNNEL:!0,SELLER_EXPERIENCE_PAYOUT_SETUP_NEW_FUNNEL:!0,SELLER_EXPERIENCE_SHOP_MANAGEMENT_FUNNEL:!0,CHANNEL_EDIT_FUNNEL:!0,PAYOUT_ONBOARDING_FUNNEL:!0,SERVICES_INSTANT_BOOKING_SETTINGS_FUNNEL:!0,SERVICES_FB_APPOINTMENTS_CTA_CREATION_FUNNEL:!0,SERVICES_FB_APPOINTMENTS_CTA_FULL_SETUP_FUNNEL:!0,MATCHED_MARKET_LIFT_INTERNAL_FUNNEL:!0,FB_NEO_ONBOARDING_FUNNEL:!0,FB_NEO_FRIENDING_FUNNEL:!0,SEARCH_FUNNEL:!0,SHADOW_SEARCH_FUNNEL:!0,SHADOW_EARLY_END_SEARCH_FUNNEL:!0,TEXT_DELIGHTS_OPT_OUT_NUX_FUNNEL:!0,TEXT_DELIGHTS_COMPOSER_FUNNEL:!0,PRIVATE_COMMENT_COMPOSER_FUNNEL:!0,CHECKOUT_EXPERIENCES_FUNNEL:!0,CHECKOUT_EXPERIENCES_SELLER_FUNNEL:!0,MESSENGER_SECONDARY_SEARCH_FUNNEL:!0,WWW_SERVICES_INSTANT_BOOKING_CONSUMER_FUNNEL:!0,WWW_PRESENCE_FUNNEL:!0,WWW_SERVICES_BOOK_APPOINTMENT_CONSUMER_FUNNEL:!0,WWW_SPHERICAL_DIRECTOR_FUNNEL:!0,SELLER_EXPERIENCE_MIGRATION_FUNNEL:!0,SELLER_EXPERIENCE_PAYOUT_SETUP_FUNNEL:!0,NATIVE_SUPPORT_FUNNEL:!0,PRIVACY_SHORTCUTS_FUNNEL:!0,PRIVACY_ACCESS_HUB_FUNNEL:!0,WWW_POLITICIAN_OFFICE_SETTING_FUNNEL:!0,WWW_CIVIC_ACTION_POST_INVITE_FUNNEL:!0,WWW_CIVIC_ACTION_POST_CREATION_FUNNEL:!0,NT_NFAS_EXAMPLE_FUNNEL:!0,WWW_ONCALL_VIEW_FUNNEL:!0,WWW_ESCALATION_TOOLS_NOTIFICATIONS_PAGE_FUNNEL:!0,ALL_VOICES_FUNNEL:!0,WWW_MESSENGER_SHARE_FILE_PREVIEW_FUNNEL:!0,POST_TRANSACTION_FUNNEL:!0,INSTANT_EXPERIENCES_MINDBODY_FUNNEL:!0,WWW_CTW_WHATSAPP_VERIFICATION_FLOW_FUNNEL:!0,PIE_MANAGER_HIRING_HUB_FUNNEL:!0,PIE_RECRUITING_MANAGER_HIRING_OUTREACH_FUNNEL:!0,PIE_RECRUITING_MANAGER_HIRING_REVIEW_FUNNEL:!0,IG_WEB_STORY_CREATION_FUNNEL:!0,IG_WEB_IGTV_CREATION_FUNNEL:!0,IG_WEB_ONE_TAP_REGISTRATION_FUNNEL:!0,IG_WEB_SHARE_FUNNEL:!0,IG_WEB_NUX_FUNNEL:!0,IG_WEB_OBA_FUNNEL:!0,WWW_FB_CHAT_NEW_SETTINGS_MENU_FUNNEL:!0,FLEXIBLE_STARS_WWW_FUNNEL:!0,PAYMENT_APP_FUNNEL:!0,WWW_MESSENGER_VIDEO_CHAT_LINKS_FUNNEL:!0,KAIOS_REG_CONTACT_IMPORTER_FUNNEL:!0,ONEVC_CALL_ROUTING_FUNNEL:!0,AR_HUB_UPLOAD_FUNNEL:!0,FHT_FUNNEL:!0,WWW_PCR_FUNNEL:!0,MARKETPLACE_GIFT_CARD_FUNNEL:!0,WORK_CHAT_SEARCH_FUNNEL:!0,DISCOVER_MIGRATION_FUNNEL:!0,ZERO_PLACEHOLDER_FUNNEL:!0,FOS_MON_PURCHASE_FLOW_FUNNEL:!0});i.default=e}),66);
__d("Funnel",["BinarySearch","FBLogger","FunnelAction","FunnelRegistry","sprintf"],(function(t,n,r,o,a,i,l){"use strict";var e="name",s="instance_id",u="start_time",c="tags",d="actions",m="sampling_rate",p="timeout_sec",_="beacon_id",f="beacon_session_id",g="funnel_level_beacon_id",h="funnel_level_beacon_session_id",y="is_web",C={EXPLICIT:"explicit",TIMEOUT:"timeout",SESSION_END:"session_end",RESTART:"restart",ACTIONS_FULL:"actions_full"},b={ACTION_END:"funnel_end",ACTION_WINDOW_BLUR:"window_blur",ACTION_WINDOW_FOCUS:"window_focus"},v=600,S=(function(){function t(e,t,n,o,a){if(r("FunnelRegistry")[e]!==!0)throw r("FBLogger")("comet_infra").mustfixThrow("Funnel name not registered.");this.$1=e,this.$2=t,this.$3=[],this.$4={},this.$5=n,this.$6=a,this.timeout_sec=v,this.shouldTrackFocus=!1,this.$7=o,this.$9=-1,this.$10=-1,this.$11=-1,this.$12=-1,this.$8=null,this.devModeLogger("Started funnel")}var n=t.prototype;return n.addTag=function(t){if(typeof t!="string")throw r("FBLogger")("comet_infra").mustfixThrow("Funnel tag should be a String.");return this.$4[t]=!0,this.devModeLogger("Added funnel tag %s",t),this},n.appendAction=function(t,n,a,i){var e=this;i===void 0&&(i=Date.now());var l=new(r("FunnelAction"))(t,i-this.$6,n,a),s=o("BinarySearch").leastStrictUpperBound(function(t){return e.$3[t].getData()},l.getData(),0,this.$3.length,function(e,t){return e.name==="funnel_end"?1:t.name==="funnel_end"?-1:e.relative_time-t.relative_time});return this.$3.splice(s,0,l),n?this.devModeLogger("Appended action %s with tag %s",t,n):this.devModeLogger("Appended action %s",t),this.$8=t,this},n.appendActionIfNew=function(t,n,r){return t!==this.$8&&this.appendAction(t,n,r),this},n.getLogData=function(){var t={};t[e]=this.$1,this.$2!==void 0?t[s]=this.$2:t[s]=Math.floor(Math.random()*65536),t[u]=this.$6,t[m]=this.$5,t[p]=this.timeout_sec,t[c]=[];for(var n in this.$4)this.$4[n]===!0&&t[c].push(n);if(this.$3.length>0){t[d]=[];for(var r=0;r<this.$3.length;r++)t[d].push(this.$3[r].getData())}return this.$10!==-1&&this.$9!==-1&&(t[f]=this.$10,t[_]=this.$9),this.$12!==-1&&this.$11!==-1&&(t[h]=this.$12,t[g]=this.$11),t[y]=1,t},n.devModeLogger=function(){},n.getTags=function(){return this.$4},n.getFunnelName=function(){return this.$1},n.addReliabilityStats=function(t,n){if(typeof t!="number")throw r("FBLogger")("comet_infra").mustfixThrow("SessionID of current funnel lib reliability stats should be a number.");if(typeof n!="number")throw r("FBLogger")("comet_infra").mustfixThrow("Counter of current funnel lib reliability stats should be a number.");return this.$10=t,this.$9=n,this.devModeLogger("Added funnel sessionID %d and counter %d.",t,n),this},n.addReliabilityStatsForCurFunnel=function(t,n){if(typeof t!="number")throw r("FBLogger")("comet_infra").mustfixThrow("SessionID of current funnel lib reliability stats should be a number.");if(typeof n!="number")throw r("FBLogger")("comet_infra").mustfixThrow("Counter of current funnel lib reliability stats should be a number.");return this.$12=t,this.$11=n,this.devModeLogger("Added funnel sessionID %d and counter %d.",t,n),this},t})();l.EndType=C,l.ActionType=b,l.Funnel=S}),98);
__d("FunnelLoggerConfig.experimental",["cr:27520"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:27520")}),98);
__d("FunnelLoggerSampler",["FunnelLoggerConfig.experimental"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=s(e);return t===0?!1:Math.random()*t<1}function s(e){var t=r("FunnelLoggerConfig.experimental").freq[e];return t===void 0&&(t=r("FunnelLoggerConfig.experimental").freq.default),t}i.exports={shouldLog:e,getSamplingRate:s}}),34);
__d("FunnelReliabilityWhitelist",[],(function(t,n,r,o,a,i){var e=["SEARCH_FUNNEL"];i.default=e}),66);
__d("FunnelReliabilityStatsCollector",["FunnelReliabilityWhitelist","MarauderLogger","WebStorage","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=!1,u,c="fas_reliability_lib_stats_overall",d="fas_reliability_funnel_stats_overall",m=1800,p="funnel_analytics_data_loss",_="fas_reliability_lib_stats_wl",f="fas_reliability_funnel_stats_wl",g=0,h={};function y(){return!!r("gkx")("20977")}function C(){return s||(s=!0,u=(e||(e=r("WebStorage"))).getLocalStorage()),u}function b(){var e=C();if(!e)return null;var t=e.getItem(d);if(t)return JSON.parse(t);var n=Math.floor(Date.now()/1e3);return{startCount:0,endCount:0,cancelCount:0,prevCount:0,lastFlushTimestamp:n}}function v(e){var t=C();if(!t)return null;var n=t.getItem(f);if(n)return JSON.parse(n);var r={};return r[e]={startCount:0,endCount:0,cancelCount:0,prevCount:0},r}function S(){var e=C();if(!e)return null;var t=e.getItem(f);return t?JSON.parse(t):null}function R(t){var n=b();n&&(g+=1,n.startCount?n.startCount=parseInt(n.startCount,10)+1:n.startCount=1,(e||(e=r("WebStorage"))).setItemGuarded(localStorage,d,JSON.stringify(n)),L(t))}function L(t){var n=v(t);if(!(!n||!r("FunnelReliabilityWhitelist").includes(t))){var o=h[t]?h[t]+1:1;h[t]=o;var a=n[t];a?a.startCount?a.startCount=parseInt(a.startCount,10)+1:a.startCount=1:(a={},a.startCount=1,a.prevCount=0,a.cancelCount=0,a.endCount=0),n[t]=a,(e||(e=r("WebStorage"))).setItemGuarded(localStorage,f,JSON.stringify(n))}}function E(t){var n=b();n&&(g-=1,n.cancelCount?n.cancelCount=parseInt(n.cancelCount,10)+1:n.cancelCount=1,(e||(e=r("WebStorage"))).setItemGuarded(localStorage,d,JSON.stringify(n)),k(t))}function k(t){var n=v(t);if(!(!n||!r("FunnelReliabilityWhitelist").includes(t))){var o=h[t]?h[t]-1:0;h[t]=o;var a=n[t];a?a.cancelCount?a.cancelCount=parseInt(a.cancelCount,10)+1:a.cancelCount=1:(a={},a.startCount=0,a.prevCount=0,a.cancelCount=1,a.endCount=0),n[t]=a,(e||(e=r("WebStorage"))).setItemGuarded(localStorage,f,JSON.stringify(n))}}function I(t){var n=b();n&&(g-=1,n.endCount?n.endCount=parseInt(n.endCount,10)+1:n.endCount=1,(e||(e=r("WebStorage"))).setItemGuarded(localStorage,d,JSON.stringify(n)),T(t))}function T(t){var n=v(t);if(!(!n||!r("FunnelReliabilityWhitelist").includes(t))){var o=h[t]?h[t]-1:0;h[t]=o;var a=n[t];a?a.endCount?a.endCount=parseInt(a.endCount,10)+1:a.endCount=1:(a={},a.startCount=0,a.prevCount=0,a.cancelCount=0,a.endCount=1),n[t]=a,(e||(e=r("WebStorage"))).setItemGuarded(localStorage,f,JSON.stringify(n))}}function D(){var e=b();if(!e)return!1;if(e.lastFlushTimestamp){var t=Math.floor(Date.now()/1e3);return t-parseInt(e.lastFlushTimestamp,10)>=m}return!1}function x(t,n){var o=C();if(o){var a=Math.floor(Date.now()/1e3),i={startCount:0,endCount:0,cancelCount:0,prevCount:n,lastFlushTimestamp:a};(e||(e=r("WebStorage"))).setItemGuarded(o,d,JSON.stringify(i))}}function $(t,n){var o=C();if(!(!o||!t||Object.keys(t).length==0)){var a={};for(var i in t){var l=n[i],s={startCount:0,endCount:0,cancelCount:0,prevCount:l||0};a[i]=s}(e||(e=r("WebStorage"))).setItemGuarded(o,f,JSON.stringify(a))}}function P(e,t,n,r){var a=e.prevCount,i=e.startCount,l=e.endCount,s=e.cancelCount,u=a+i-l-s-t,c={start:i,end:l,cancel:s,prev:a,ongoing:t,loss:u},d={overall:c};if(n){var m={};for(var _ in n){var f=n[_],g=f.prevCount,h=f.startCount,y=f.endCount,C=f.cancelCount,b=r[_]?r[_]:0,v=g+h-y-C-b,S={start:h,end:y,cancel:C,prev:g,ongoing:b,loss:v};m[_]=S}d.funnel_level_data_loss=m}o("MarauderLogger").log(p,null,d)}function N(){if(D()){var e=b();if(e){x(e,g);var t=S();t&&$(t,h),P(e,g,t,h)}}}function M(){var t=C();if(!t)return null;var n=t.getItem(c),o=n?JSON.parse(n):{},a=o.counter,i=o.session;return a?(a=parseInt(a,10)+1,i=parseInt(o.session,10)):(a=1,i=Math.floor(Math.random()*65536)),(e||(e=r("WebStorage"))).setItemGuarded(t,c,JSON.stringify({counter:a,session:i})),[i,a]}function w(t){if(!r("FunnelReliabilityWhitelist").includes(t))return null;var n=C();if(!n)return null;var o=n.getItem(_),a=void 0,i={};o&&(i=JSON.parse(o),a=i[t]);var l=a?a.counter:void 0,s=a?a.session:void 0;l?(l=parseInt(l,10)+1,s=parseInt(s,10)):(l=1,s=Math.floor(Math.random()*65536));var u={};return o?(i[t]={counter:l,session:s},u=i):u[t]={counter:l,session:s},(e||(e=r("WebStorage"))).setItemGuarded(n,_,JSON.stringify(u)),[s,l]}l.passFunnelLevelStatsRolloutGK=y,l.onFunnelStart=R,l.onFunnelCancel=E,l.onFunnelEnd=I,l.maybeFlushFunnelLevelStats=N,l.increaseAndGetLibLevelStats=M,l.maybeIncreaseAndGetLibLevelStatsForCurFunnel=w}),98);
__d("FunnelLogger",["Banzai","FBLogger","Funnel","FunnelLoggerSampler","FunnelRegistry","FunnelReliabilityStatsCollector","MarauderLogger","clearTimeout","gkx","setTimeout"],(function(t,n,r,o,a,i){"use strict";var e={},l=!1,s=!0;function u(e,t){$(e,t)}function c(e,t,n){$(e,n,t)}function d(t,n){var r=N(t,n);return M(r)?e[r]:null}function m(e,t){}function p(e,t,n){n===void 0?w(e,void 0,t):n&&w(e,t,n)}function _(t,r){var o=N(t,r);M(o)&&(e[o].devModeLogger("Cancelled funnel"),F(o),e[o]=void 0,n("FunnelReliabilityStatsCollector").passFunnelLevelStatsRolloutGK()&&(n("FunnelReliabilityStatsCollector").onFunnelCancel(t),n("FunnelReliabilityStatsCollector").maybeFlushFunnelLevelStats()))}function f(e,t){P(e,t)}function g(e,t,n){P(e,n,t)}function h(e,t,n){n===void 0?O(e,void 0,String(t)):O(e,Number(t),n)}function y(e,t,n){n===void 0?B(e,void 0,!!t):B(e,Number(t),n)}function C(e,t,n){n===void 0?W(e,void 0,String(t),void 0):W(e,Number(t),n,void 0)}function b(e,t,n){n===void 0?q(e,void 0,String(t),void 0):q(e,Number(t),n,void 0)}function v(e,t,n,r){r===void 0?W(e,void 0,String(n),void 0,void 0,t):W(e,Number(n),r,void 0,void 0,t)}function S(e,t,n,r){r===void 0?W(e,void 0,String(t),n):W(e,Number(t),n,r)}function R(e,t,n,r,o){o===void 0?W(e,void 0,String(n),r,void 0,t):W(e,Number(n),r,o,void 0,t)}function L(e,t,n,r){r===void 0?q(e,void 0,String(t),n):q(e,Number(t),n,r)}function E(e,t,n,r){r===void 0?W(e,void 0,String(t),void 0,n):W(e,Number(t),String(n),void 0,r)}function k(e,t,n,r,o){o===void 0?W(e,void 0,String(n),void 0,r,t):W(e,Number(n),String(r),void 0,o,t)}function I(e,t,n,r){r===void 0?q(e,void 0,String(t),void 0,n):q(e,Number(t),String(n),void 0,r)}function T(e,t,n,r,o){o===void 0?W(e,void 0,String(t),n,r):W(e,Number(t),String(n),String(r),o)}function D(e,t,n,r,o,a){a===void 0?W(e,void 0,String(n),r,o,t):W(e,Number(n),String(r),String(o),a,t)}function x(e,t,n,r,o){o===void 0?q(e,void 0,String(t),n,r):q(e,Number(t),String(n),String(r),o)}function $(t,r,o){var a=N(t,r);j(),U(a),n("FunnelLoggerSampler").shouldLog(t)&&(e[a]=new(n("Funnel")).Funnel(t,r,n("FunnelLoggerSampler").getSamplingRate(t),!1,o!=null?o:Date.now()),A(a),n("FunnelReliabilityStatsCollector").passFunnelLevelStatsRolloutGK()&&(n("FunnelReliabilityStatsCollector").onFunnelStart(t),n("FunnelReliabilityStatsCollector").maybeFlushFunnelLevelStats()))}function P(t,r,o){var a=N(t,r);M(a)&&(e[a].appendAction(n("Funnel").ActionType.ACTION_END,n("Funnel").EndType.EXPLICIT,void 0,o),V(a))}function N(e,t){if(n("FunnelRegistry")[e]!==!0)throw n("FBLogger")("funnel_validation").blameToPreviousFile().mustfix("Funnel name `%s` not registered",e),n("FBLogger")("comet_infra").mustfixThrow("Funnel name `%s` not registered.",e);return t==null?e:e+t.toString()}function M(t){return e[t]!==void 0}function w(t,n,r){var o=N(t,n);M(o)&&(e[o].timeout_sec=r,e[o].devModeLogger("Timeout set to %s sec",r),A(o))}function A(t){F(t),e[t].timeout_handle=n("setTimeout")(function(){e[t].appendAction(n("Funnel").ActionType.ACTION_END,n("Funnel").EndType.TIMEOUT),V(t)},1e3*e[t].timeout_sec)}function F(t){e[t].timeout_handle&&n("clearTimeout")(e[t].timeout_handle)}function O(t,n,r){var o=N(t,n);M(o)&&(e[o].addTag(r),A(o))}function B(t,n,r){var o=N(t,n);M(o)&&(e[o].shouldTrackFocus=r,e[o].devModeLogger("Focus tracking %s",r?"on":"off"))}function W(t,n,r,o,a,i){var l=N(t,n);M(l)&&(e[l].appendAction(r,o,a,i),A(l))}function q(t,n,r,o,a){var i=N(t,n);M(i)&&e[i].appendActionIfNew(r,o,a)}function U(t){M(t)&&(e[t].appendAction(n("Funnel").ActionType.ACTION_END,n("Funnel").EndType.RESTART),V(t))}function V(t){if(M(t)){if(n("gkx")("20976")){var r=n("FunnelReliabilityStatsCollector").increaseAndGetLibLevelStats();if(r){var o=r[0],a=r[1];e[t].addReliabilityStats(o,a)}}var i=e[t].getFunnelName(),l=e[t].getLogData();n("MarauderLogger").log("funnel_analytics",null,l),e[t].devModeLogger("Logged: %s",JSON.stringify(l)),F(t),e[t]=void 0,n("FunnelReliabilityStatsCollector").passFunnelLevelStatsRolloutGK()&&(n("FunnelReliabilityStatsCollector").onFunnelEnd(i),n("FunnelReliabilityStatsCollector").maybeFlushFunnelLevelStats())}}function H(){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&M(t)&&(e[t].appendAction(n("Funnel").ActionType.ACTION_END,n("Funnel").EndType.SESSION_END),V(t))}function G(){if(s){s=!1;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&M(t)&&e[t].shouldTrackFocus&&(e[t].appendAction(n("Funnel").ActionType.ACTION_WINDOW_BLUR),F(t))}}function z(){if(!s){s=!0;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&M(t)&&e[t].shouldTrackFocus&&(e[t].appendAction(n("Funnel").ActionType.ACTION_WINDOW_FOCUS),F(t))}}function j(){l||(l=!0,window.addEventListener&&(n("Banzai").subscribe(n("Banzai").SHUTDOWN,H),window.addEventListener("blur",G),window.addEventListener("focus",z)))}a.exports={addFunnelTag:h,appendAction:C,appendActionAtTime:v,appendActionAtTimeWithPayload:k,appendActionAtTimeWithTag:R,appendActionAtTimeWithTagAndPayload:D,appendActionIfNew:b,appendActionWithPayload:E,appendActionWithPayloadIfNew:I,appendActionWithTag:S,appendActionWithTagAndPayload:T,appendActionWithTagAndPayloadIfNew:x,appendActionWithTagIfNew:L,cancelFunnel:_,endFunnel:f,endFunnelAtTime:g,getFunnelInstance:d,setFunnelTimeout:p,setFunnelTrackFocus:y,startFunnel:u,startFunnel_DEV_MODE:m,startFunnelAtTime:c}}),null);
__d("KeyframesPerformanceLog",["performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s=60,u=(function(){function t(e,t){this.$1=0,this.$2=-1,this.$3=-1,this.$6=e,this.$5=t,this.$6=e,this.reset()}var n=t.prototype;return n.onNextFrame=function(t){this.$7=t},n.start=function(){if(this.$2<0||this.$3>=0){var t=(e||(e=r("performanceNow")))();this.$2<0?this.$2=t:this.$3>=0&&(this.$2+=t-this.$3,this.$3=-1),this.$5&&this.$5("start")}},n.pause=function(){this.$3<0&&this.$2>=0&&(this.$3=(e||(e=r("performanceNow")))(),this.$5&&this.$5("pause"))},n.reset=function(){this.$1=0,this.$4={one:0,two:0,four:0,eight:0},this.$3=-1,this.$2=-1},n.addFrame=function(){this.$1+=1,this.$7&&(this.$7(),this.$7=null)},n.addFrameDrop=function(t){t>=8?this.$4.eight+=1:t>=4?this.$4.four+=1:t>=2?this.$4.two+=1:t>=1&&(this.$4.one+=1)},n.finish=function(){if(this.$2>=0){var t=(e||(e=r("performanceNow")))(),n=this.$3>=0?t-this.$3:0,o=Math.max(Math.floor(t-this.$2-n),1),a=this.$1?this.$1/o*1e3:s;this.$6({animation_duration:o,display_refresh_rate:s,eight_frame_drop_count:this.$4.eight,four_frame_drop_count:this.$4.four,frame_rate:a,one_frame_drop_count:this.$4.one,two_frame_drop_count:this.$4.two}),this.reset()}},t})();l.default=u}),98);
__d("KeyframesPluginLogger",["BanzaiLogger","CurrentUser"],(function(t,n,r,o,a,i,l){"use strict";var e="KeyframesFramePerfLoggerConfig",s={appid:256281040558,isemployee:r("CurrentUser").isEmployee()?1:0},u={LOAD_ATTEMPT:"plugin_load_attempt",LOAD_ATTEMPT_KF3:"plugin_load_attempt_compat"};function c(t,n){t!=null&&t.forEach(function(t){r("BanzaiLogger").log(e,babelHelpers.extends({},s,{name:n,extras:t}))})}var d={log:function(t){c(t,u.LOAD_ATTEMPT)},logCompat:function(t){c(t,u.LOAD_ATTEMPT_KF3)}};l.KeyframesPluginLogger=d}),98);
__d("KeyframesPluginsLoader",["Bootloader","KeyframesPluginLogger","Promise","flatbuffers"],(function(t,n,r,o,a,i,l){"use strict";var e,s={DynamicProperties:function(t){return r("Bootloader").loadModules(["KeyframesPluginDynamicProperties","KeyframesPluginDynamicPropertiesSchema"],t,"KeyframesPluginsLoader")},LayerName:function(t){return r("Bootloader").loadModules(["KeyframesPluginLayerName","KeyframesPluginLayerNameSchema"],t,"KeyframesPluginsLoader")},LayerTags:function(t){return r("Bootloader").loadModules(["KeyframesPluginLayerTags","KeyframesPluginLayerTagsSchema"],t,"KeyframesPluginsLoader")},RandomSubdocument:function(t){return r("Bootloader").loadModules(["KeyframesPluginRandomSubdocument","KeyframesPluginRandomSubdocumentSchema"],t,"KeyframesPluginsLoader")},Sound:function(t){return r("Bootloader").loadModules(["KeyframesPluginSound","KeyframesPluginSoundSchema"],t,"KeyframesPluginsLoader")},SubdocumentSwap:function(t){return r("Bootloader").loadModules(["KeyframesPluginSubdocumentSwap","KeyframesPluginSubdocumentSwapSchema"],t,"KeyframesPluginsLoader")},TrimPath:function(t){return r("Bootloader").loadModules(["KeyframesPluginTrimPath","KeyframesPluginTrimPathSchema"],t,"KeyframesPluginsLoader")}};function u(e,t){return s[e]?s[e](t):null}function c(t){var r=t.map(function(t){return new(e||(e=n("Promise")))(function(e,n){var r=u(t,function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e(n)});r||n("Unknown plugin "+t)})});return(e||(e=n("Promise"))).all(r)}var d=(function(){function e(e,t){this.instances=[],this.$1={},this.$2={},this.$4=e,this.$3=t}e.fromPluginTable=function(n){return o("KeyframesPluginLogger").KeyframesPluginLogger.log(n),c(n).then(function(t){return new e(n,t)})},e.getSupportedPlugins=function(){return s};var t=e.prototype;return t.getPluginTable=function(){return this.$4},t.getPluginsForLayer=function(t){return this.$1[t]},t.maybeInstantiatePluginsForLayer=function(t){var e=t.id();if(!this.$2[e]){var n=t.pluginsLength();if(n)for(var r=0;r<n;r++){var a=t.plugins(r),i=new(o("flatbuffers")).ByteBuffer(a.contentArray()),l=a.index();if(this.$3[l]){var s=this.$3[l],u=s[0],c=s[1],d="getRootAsPlugin"+this.$4[l],m=c[d](i),p=new u(m,t);this.$1[e]||(this.$1[e]=[]),this.$1[e].push(p),this.instances.push(p),p.animationDidLoad()}}this.$2[e]=!0}},e})();l.default=d}),98);
__d("KeyframesVersion",[],(function(t,n,r,o,a,i){"use strict";var e="2.0.0";function l(){return e}i.getCurrentVersion=l}),66);
__d("FBKeyframesLoggedSession",["BanzaiLogger","CurrentUser","FunnelLogger","KeyframesPerformanceLog","KeyframesPluginsLoader","KeyframesVersion","once","performanceNow","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=!1,u="KEYFRAMES_FUNNEL",c="KeyframesFramePerfLoggerConfig",d=2,m=9e18,p={appid:256281040558,appversion:null,connection_class:null,country:null,deviceid:null,extras:null,isemployee:r("CurrentUser").isEmployee()?1:0,name:"keyframes_frame_perf_report",vc:null,year_class:null};function _(e){return parseInt(e.match(/[a-f0-9]+$/gi),16)}function f(){var t=(e||(e=r("performanceNow")))();return function(){return Math.floor((e||(e=r("performanceNow")))()-t)}}function g(){return{value:Date.now()}}var h=(function(){function e(t,n){var a=this;this.$2=!1,this.$3=0,this.$5=1,this.$11=o("KeyframesVersion").getCurrentVersion(),this.$15=function(t){if(a.$13("play_ended"),a.$3++,a.$3===a.$5){var n=babelHelpers.extends({},t,p,{animation_duration:String(t.animation_duration),asset_id:a.$6.assetID||null,asset_name:a.$6.assetID?null:a.$6.assetName,display_refresh_rate:String(t.display_refresh_rate),keyframes_version:a.$11,project_name:a.$6.projectName,session_id:a.$9});e.performanceLoggingMethod(n),a.$5<m&&(a.$5*=d)}},this.$16=function(e){switch(e){case"start":a.$13("play_started");return;case"pause":a.$13("play_ended");return}},this.$10=n||g(),this.$6=t,this.$9=r("uuidv4")(),this.$4=_(this.$9)}e.performanceLoggingMethod=function(t){r("BanzaiLogger").log(c,t)};var t=e.prototype;return t.startDecode=function(t){var e=this;if(!this.$1){this.$12(),this.$13("asset_decode_started",t);var n=f();this.$1=r("once")(function(t,r){e.$13("asset_decode_ended",t,{"time_since:asset_decode_started":n(),plugins_decoded:r||[]})})}return this.$1},t.error=function(t){this.$12(),this.$1?this.$14("asset_decode_failed",t):this.$14("asset_request_failed",t)},t.getUUID=function(){return this.$9},t.getInstanceID=function(){return this.$4},t.getPerformanceLogIfEnabled=function(){var e=this;if(!this.$7){var t=this.$12(),n=new(r("KeyframesPerformanceLog"))(this.$15,this.$16);n.onNextFrame(function(){return e.$13("first_frame_rendered",g(),{"time_since:session_started":t()})}),this.$7=n}return this.$7},t.$12=function(){return this.$8||(o("FunnelLogger").startFunnelAtTime(u,this.$10.value,this.$4),this.$13("session_started",this.$10,{supported_plugins:Object.keys(r("KeyframesPluginsLoader").getSupportedPlugins())}),this.$8=f()),this.$8},t.$13=function(t,n,r){n=n||g(),this.$2||o("FunnelLogger").appendActionAtTimeWithPayload(u,n.value,this.$4,t,babelHelpers.extends({},this.$17(),r))},t.$14=function(t,n){n=n||g(),this.$2||(this.$13("session_failed",n,{fail_reason:t}),o("FunnelLogger").endFunnelAtTime(u,n.value,this.$4),this.$2=!0)},t.$17=function(){return{asset_id:this.$6.assetID||null,asset_name:this.$6.assetID?null:this.$6.assetName,asset_source:"network",keyframes_version:this.$11,project_name:this.$6.projectName,session_id:this.$9}},e})();l.default=h}),98);
__d("FunnelLoggerConfigJSModuleWrapper",["FunnelLoggerConfig"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("FunnelLoggerConfig")}),98);
__d("KFComponentNames",[],(function(t,n,r,o,a,i){"use strict";var e="AUDIO",l="BITMAP",s="IMAGE",u="CHILDREN",c="COMPOSITING",d="IDENTIFICATION",m="OPACITY",p="PARENT",_="RANDOM_SUBDOCUMENT",f="RANDOM_SUBDOCUMENT_CHILDREN",g="ROOT",h="SCENE",y="SHAPE",C="TIME",b="TRIM_PATH",v="TRANSFORM",S="VIDEO";i.AUDIO=e,i.BITMAP=l,i.CHILDREN=u,i.COMPOSITING=c,i.IMAGE=s,i.IDENTIFICATION=d,i.OPACITY=m,i.PARENT=p,i.RANDOM_SUBDOCUMENT=_,i.RANDOM_SUBDOCUMENT_CHILDREN=f,i.ROOT=g,i.SCENE=h,i.SHAPE=y,i.TIME=C,i.TRIM_PATH=b,i.TRANSFORM=v,i.VIDEO=S}),66);
__d("KFLoaderUtils",["KFComponentNames"],(function(t,n,r,o,a,i,l){"use strict";function e(t,n,r){for(var a=0;a<t.length;a++){var i=t[a],l=n.getComponent(i,o("KFComponentNames").CHILDREN),s=l==null?void 0:l.getChildren();s!=null&&e(s,n,r),r(i,a,t)}}function s(t,n){var r=t.getEntitiesWithComponent(o("KFComponentNames").ROOT)[0],a=t.getComponent(r,o("KFComponentNames").SCENE);if(a!=null){var i=a.getEntities();e(i,t,n)}}function u(e){var t=e==null?void 0:e.duration();return t==null||t===0?1:t*1e3}function c(e){d.traverseEntitiesAndApply(e,function(t,n,r){if(n+1!==r.length){var a=r[n+1],i=e.getComponent(a,o("KFComponentNames").COMPOSITING);if((i==null?void 0:i.isTrackMatte)===!0){var l=e.getComponent(t,o("KFComponentNames").COMPOSITING);l==null&&(l=e.addComponent(t,o("KFComponentNames").COMPOSITING)),l.trackMatteId=a.getID()}}})}var d={getDocumentDuration:u,maybeGenerateTrackMatteIDs:c,traverseEntitiesAndApply:s},m=d;l.default=m}),98);
__d("KeyframesSchema",[],(function(t,n,r,o,a,i){var e=e||{};e.keyframes=e.keyframes||{},e.keyframes.CommandType={MoveTo:0,LineTo:1,QuadTo:2,CubicTo:3},e.keyframes.CommandTypeName={0:"MoveTo",1:"LineTo",2:"QuadTo",3:"CubicTo"},e.keyframes.TweenType={Bezier:0,Linear:1,Hold:2},e.keyframes.TweenTypeName={0:"Bezier",1:"Linear",2:"Hold"},e.keyframes.VectorCompositeOrder={FillStroke:0,StrokeFill:1},e.keyframes.VectorCompositeOrderName={0:"FillStroke",1:"StrokeFill"},e.keyframes.StrokeLineCap={Butt:0,Round:1,Square:2},e.keyframes.StrokeLineCapName={0:"Butt",1:"Round",2:"Square"},e.keyframes.StrokeLineJoin={Miter:0,Round:1,Bevel:2},e.keyframes.StrokeLineJoinName={0:"Miter",1:"Round",2:"Bevel"},e.keyframes.TrackMatteType={None:0,Alpha:1,Alpha_Inverted:2},e.keyframes.TrackMatteTypeName={0:"None",1:"Alpha",2:"Alpha_Inverted"},e.keyframes.GradientType={Linear:0,Radial:1},e.keyframes.GradientTypeName={0:"Linear",1:"Radial"},e.keyframes.TextWeight={Thin:0,UltraLight:1,Light:2,Book:3,Medium:4,SemiBold:5,Bold:6,UltraBold:7,Heavy:8,UltraHeavy:9},e.keyframes.TextWeightName={0:"Thin",1:"UltraLight",2:"Light",3:"Book",4:"Medium",5:"SemiBold",6:"Bold",7:"UltraBold",8:"Heavy",9:"UltraHeavy"},e.keyframes.Size=function(){this.bb=null,this.bb_pos=0},e.keyframes.Size.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.Size.prototype.width=function(){return this.bb.readFloat32(this.bb_pos)},e.keyframes.Size.prototype.mutate_width=function(e){var t=this.bb.__offset(this.bb_pos,0);return t===0?!1:(this.bb.writeFloat32(this.bb_pos+t,e),!0)},e.keyframes.Size.prototype.height=function(){return this.bb.readFloat32(this.bb_pos+4)},e.keyframes.Size.prototype.mutate_height=function(e){var t=this.bb.__offset(this.bb_pos,4);return t===0?!1:(this.bb.writeFloat32(this.bb_pos+t,e),!0)},e.keyframes.Size.createSize=function(e,t,n){return e.prep(4,8),e.writeFloat32(n),e.writeFloat32(t),e.offset()},e.keyframes.Point=function(){this.bb=null,this.bb_pos=0},e.keyframes.Point.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.Point.getRootAsPoint=function(t,n){return(n||new e.keyframes.Point).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.Point.prototype.x=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb_pos+e):0},e.keyframes.Point.prototype.mutate_x=function(e){var t=this.bb.__offset(this.bb_pos,4);return t===0?!1:(this.bb.writeFloat32(this.bb_pos+t,e),!0)},e.keyframes.Point.prototype.y=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat32(this.bb_pos+e):0},e.keyframes.Point.prototype.mutate_y=function(e){var t=this.bb.__offset(this.bb_pos,6);return t===0?!1:(this.bb.writeFloat32(this.bb_pos+t,e),!0)},e.keyframes.Point.startPoint=function(e){e.startObject(2)},e.keyframes.Point.addX=function(e,t){e.addFieldFloat32(0,t,0)},e.keyframes.Point.addY=function(e,t){e.addFieldFloat32(1,t,0)},e.keyframes.Point.endPoint=function(e){var t=e.endObject();return t},e.keyframes.Point.createPoint=function(t,n,r){return e.keyframes.Point.startPoint(t),e.keyframes.Point.addX(t,n),e.keyframes.Point.addY(t,r),e.keyframes.Point.endPoint(t)},e.keyframes.Color=function(){this.bb=null,this.bb_pos=0},e.keyframes.Color.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.Color.getRootAsColor=function(t,n){return(n||new e.keyframes.Color).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.Color.prototype.red=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb_pos+e):0},e.keyframes.Color.prototype.mutate_red=function(e){var t=this.bb.__offset(this.bb_pos,4);return t===0?!1:(this.bb.writeUint8(this.bb_pos+t,e),!0)},e.keyframes.Color.prototype.green=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):0},e.keyframes.Color.prototype.mutate_green=function(e){var t=this.bb.__offset(this.bb_pos,6);return t===0?!1:(this.bb.writeUint8(this.bb_pos+t,e),!0)},e.keyframes.Color.prototype.blue=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):0},e.keyframes.Color.prototype.mutate_blue=function(e){var t=this.bb.__offset(this.bb_pos,8);return t===0?!1:(this.bb.writeUint8(this.bb_pos+t,e),!0)},e.keyframes.Color.prototype.alpha=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint8(this.bb_pos+e):255},e.keyframes.Color.prototype.mutate_alpha=function(e){var t=this.bb.__offset(this.bb_pos,10);return t===0?!1:(this.bb.writeUint8(this.bb_pos+t,e),!0)},e.keyframes.Color.startColor=function(e){e.startObject(4)},e.keyframes.Color.addRed=function(e,t){e.addFieldInt8(0,t,0)},e.keyframes.Color.addGreen=function(e,t){e.addFieldInt8(1,t,0)},e.keyframes.Color.addBlue=function(e,t){e.addFieldInt8(2,t,0)},e.keyframes.Color.addAlpha=function(e,t){e.addFieldInt8(3,t,255)},e.keyframes.Color.endColor=function(e){var t=e.endObject();return t},e.keyframes.Color.createColor=function(t,n,r,o,a){return e.keyframes.Color.startColor(t),e.keyframes.Color.addRed(t,n),e.keyframes.Color.addGreen(t,r),e.keyframes.Color.addBlue(t,o),e.keyframes.Color.addAlpha(t,a),e.keyframes.Color.endColor(t)},e.keyframes.ColorArray=function(){this.bb=null,this.bb_pos=0},e.keyframes.ColorArray.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.ColorArray.getRootAsColorArray=function(t,n){return(n||new e.keyframes.ColorArray).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.ColorArray.prototype.colors=function(t,n){var r=this.bb.__offset(this.bb_pos,4);return r?(n||new e.keyframes.Color).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.ColorArray.prototype.colorsLength=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.ColorArray.startColorArray=function(e){e.startObject(1)},e.keyframes.ColorArray.addColors=function(e,t){e.addFieldOffset(0,t,0)},e.keyframes.ColorArray.createColorsVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.ColorArray.startColorsVector=function(e,t){e.startVector(4,t,4)},e.keyframes.ColorArray.endColorArray=function(e){var t=e.endObject();return t},e.keyframes.ColorArray.createColorArray=function(t,n){return e.keyframes.ColorArray.startColorArray(t),e.keyframes.ColorArray.addColors(t,n),e.keyframes.ColorArray.endColorArray(t)},e.keyframes.Command=function(){this.bb=null,this.bb_pos=0},e.keyframes.Command.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.Command.getRootAsCommand=function(t,n){return(n||new e.keyframes.Command).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.Command.prototype.type=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):e.keyframes.CommandType.MoveTo},e.keyframes.Command.prototype.mutate_type=function(e){var t=this.bb.__offset(this.bb_pos,4);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,e),!0)},e.keyframes.Command.prototype.point=function(t){var n=this.bb.__offset(this.bb_pos,6);return n?(t||new e.keyframes.Point).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Command.prototype.control1=function(t){var n=this.bb.__offset(this.bb_pos,8);return n?(t||new e.keyframes.Point).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Command.prototype.control2=function(t){var n=this.bb.__offset(this.bb_pos,10);return n?(t||new e.keyframes.Point).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Command.startCommand=function(e){e.startObject(4)},e.keyframes.Command.addType=function(t,n){t.addFieldInt8(0,n,e.keyframes.CommandType.MoveTo)},e.keyframes.Command.addPoint=function(e,t){e.addFieldOffset(1,t,0)},e.keyframes.Command.addControl1=function(e,t){e.addFieldOffset(2,t,0)},e.keyframes.Command.addControl2=function(e,t){e.addFieldOffset(3,t,0)},e.keyframes.Command.endCommand=function(e){var t=e.endObject();return t},e.keyframes.Command.createCommand=function(t,n,r,o,a){return e.keyframes.Command.startCommand(t),e.keyframes.Command.addType(t,n),e.keyframes.Command.addPoint(t,r),e.keyframes.Command.addControl1(t,o),e.keyframes.Command.addControl2(t,a),e.keyframes.Command.endCommand(t)},e.keyframes.Path=function(){this.bb=null,this.bb_pos=0},e.keyframes.Path.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.Path.getRootAsPath=function(t,n){return(n||new e.keyframes.Path).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.Path.prototype.commands=function(t,n){var r=this.bb.__offset(this.bb_pos,4);return r?(n||new e.keyframes.Command).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.Path.prototype.commandsLength=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.Path.startPath=function(e){e.startObject(1)},e.keyframes.Path.addCommands=function(e,t){e.addFieldOffset(0,t,0)},e.keyframes.Path.createCommandsVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.Path.startCommandsVector=function(e,t){e.startVector(4,t,4)},e.keyframes.Path.endPath=function(e){var t=e.endObject();return t},e.keyframes.Path.createPath=function(t,n){return e.keyframes.Path.startPath(t),e.keyframes.Path.addCommands(t,n),e.keyframes.Path.endPath(t)},e.keyframes.Tween=function(){this.bb=null,this.bb_pos=0},e.keyframes.Tween.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.Tween.getRootAsTween=function(t,n){return(n||new e.keyframes.Tween).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.Tween.prototype.type=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):e.keyframes.TweenType.Bezier},e.keyframes.Tween.prototype.mutate_type=function(e){var t=this.bb.__offset(this.bb_pos,4);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,e),!0)},e.keyframes.Tween.prototype.control1=function(t){var n=this.bb.__offset(this.bb_pos,6);return n?(t||new e.keyframes.Point).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Tween.prototype.control2=function(t){var n=this.bb.__offset(this.bb_pos,8);return n?(t||new e.keyframes.Point).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Tween.startTween=function(e){e.startObject(3)},e.keyframes.Tween.addType=function(t,n){t.addFieldInt8(0,n,e.keyframes.TweenType.Bezier)},e.keyframes.Tween.addControl1=function(e,t){e.addFieldOffset(1,t,0)},e.keyframes.Tween.addControl2=function(e,t){e.addFieldOffset(2,t,0)},e.keyframes.Tween.endTween=function(e){var t=e.endObject();return t},e.keyframes.Tween.createTween=function(t,n,r,o){return e.keyframes.Tween.startTween(t),e.keyframes.Tween.addType(t,n),e.keyframes.Tween.addControl1(t,r),e.keyframes.Tween.addControl2(t,o),e.keyframes.Tween.endTween(t)},e.keyframes.ScalarAnimation=function(){this.bb=null,this.bb_pos=0},e.keyframes.ScalarAnimation.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.ScalarAnimation.getRootAsScalarAnimation=function(t,n){return(n||new e.keyframes.ScalarAnimation).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.ScalarAnimation.prototype.value=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb_pos+e):0},e.keyframes.ScalarAnimation.prototype.mutate_value=function(e){var t=this.bb.__offset(this.bb_pos,4);return t===0?!1:(this.bb.writeFloat32(this.bb_pos+t,e),!0)},e.keyframes.ScalarAnimation.prototype.values=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0},e.keyframes.ScalarAnimation.prototype.valuesLength=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.ScalarAnimation.prototype.valuesArray=function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null},e.keyframes.ScalarAnimation.prototype.keyframes=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0},e.keyframes.ScalarAnimation.prototype.keyframesLength=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.ScalarAnimation.prototype.keyframesArray=function(){var e=this.bb.__offset(this.bb_pos,8);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null},e.keyframes.ScalarAnimation.prototype.tweens=function(t,n){var r=this.bb.__offset(this.bb_pos,10);return r?(n||new e.keyframes.Tween).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.ScalarAnimation.prototype.tweensLength=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.ScalarAnimation.startScalarAnimation=function(e){e.startObject(4)},e.keyframes.ScalarAnimation.addValue=function(e,t){e.addFieldFloat32(0,t,0)},e.keyframes.ScalarAnimation.addValues=function(e,t){e.addFieldOffset(1,t,0)},e.keyframes.ScalarAnimation.createValuesVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addFloat32(t[n]);return e.endVector()},e.keyframes.ScalarAnimation.startValuesVector=function(e,t){e.startVector(4,t,4)},e.keyframes.ScalarAnimation.addKeyframes=function(e,t){e.addFieldOffset(2,t,0)},e.keyframes.ScalarAnimation.createKeyframesVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addFloat32(t[n]);return e.endVector()},e.keyframes.ScalarAnimation.startKeyframesVector=function(e,t){e.startVector(4,t,4)},e.keyframes.ScalarAnimation.addTweens=function(e,t){e.addFieldOffset(3,t,0)},e.keyframes.ScalarAnimation.createTweensVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.ScalarAnimation.startTweensVector=function(e,t){e.startVector(4,t,4)},e.keyframes.ScalarAnimation.endScalarAnimation=function(e){var t=e.endObject();return t},e.keyframes.ScalarAnimation.createScalarAnimation=function(t,n,r,o,a){return e.keyframes.ScalarAnimation.startScalarAnimation(t),e.keyframes.ScalarAnimation.addValue(t,n),e.keyframes.ScalarAnimation.addValues(t,r),e.keyframes.ScalarAnimation.addKeyframes(t,o),e.keyframes.ScalarAnimation.addTweens(t,a),e.keyframes.ScalarAnimation.endScalarAnimation(t)},e.keyframes.ScalarArray=function(){this.bb=null,this.bb_pos=0},e.keyframes.ScalarArray.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.ScalarArray.getRootAsScalarArray=function(t,n){return(n||new e.keyframes.ScalarArray).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.ScalarArray.prototype.values=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0},e.keyframes.ScalarArray.prototype.valuesLength=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.ScalarArray.prototype.valuesArray=function(){var e=this.bb.__offset(this.bb_pos,4);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null},e.keyframes.ScalarArray.startScalarArray=function(e){e.startObject(1)},e.keyframes.ScalarArray.addValues=function(e,t){e.addFieldOffset(0,t,0)},e.keyframes.ScalarArray.createValuesVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addFloat32(t[n]);return e.endVector()},e.keyframes.ScalarArray.startValuesVector=function(e,t){e.startVector(4,t,4)},e.keyframes.ScalarArray.endScalarArray=function(e){var t=e.endObject();return t},e.keyframes.ScalarArray.createScalarArray=function(t,n){return e.keyframes.ScalarArray.startScalarArray(t),e.keyframes.ScalarArray.addValues(t,n),e.keyframes.ScalarArray.endScalarArray(t)},e.keyframes.ScalarArrayAnimation=function(){this.bb=null,this.bb_pos=0},e.keyframes.ScalarArrayAnimation.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.ScalarArrayAnimation.getRootAsScalarArrayAnimation=function(t,n){return(n||new e.keyframes.ScalarArrayAnimation).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.ScalarArrayAnimation.prototype.value=function(t){var n=this.bb.__offset(this.bb_pos,4);return n?(t||new e.keyframes.ScalarArray).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.ScalarArrayAnimation.prototype.values=function(t,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new e.keyframes.ScalarArray).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.ScalarArrayAnimation.prototype.valuesLength=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.ScalarArrayAnimation.prototype.keyframes=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0},e.keyframes.ScalarArrayAnimation.prototype.keyframesLength=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.ScalarArrayAnimation.prototype.keyframesArray=function(){var e=this.bb.__offset(this.bb_pos,8);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null},e.keyframes.ScalarArrayAnimation.prototype.tweens=function(t,n){var r=this.bb.__offset(this.bb_pos,10);return r?(n||new e.keyframes.Tween).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.ScalarArrayAnimation.prototype.tweensLength=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.ScalarArrayAnimation.startScalarArrayAnimation=function(e){e.startObject(4)},e.keyframes.ScalarArrayAnimation.addValue=function(e,t){e.addFieldOffset(0,t,0)},e.keyframes.ScalarArrayAnimation.addValues=function(e,t){e.addFieldOffset(1,t,0)},e.keyframes.ScalarArrayAnimation.createValuesVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.ScalarArrayAnimation.startValuesVector=function(e,t){e.startVector(4,t,4)},e.keyframes.ScalarArrayAnimation.addKeyframes=function(e,t){e.addFieldOffset(2,t,0)},e.keyframes.ScalarArrayAnimation.createKeyframesVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addFloat32(t[n]);return e.endVector()},e.keyframes.ScalarArrayAnimation.startKeyframesVector=function(e,t){e.startVector(4,t,4)},e.keyframes.ScalarArrayAnimation.addTweens=function(e,t){e.addFieldOffset(3,t,0)},e.keyframes.ScalarArrayAnimation.createTweensVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.ScalarArrayAnimation.startTweensVector=function(e,t){e.startVector(4,t,4)},e.keyframes.ScalarArrayAnimation.endScalarArrayAnimation=function(e){var t=e.endObject();return t},e.keyframes.ScalarArrayAnimation.createScalarArrayAnimation=function(t,n,r,o,a){return e.keyframes.ScalarArrayAnimation.startScalarArrayAnimation(t),e.keyframes.ScalarArrayAnimation.addValue(t,n),e.keyframes.ScalarArrayAnimation.addValues(t,r),e.keyframes.ScalarArrayAnimation.addKeyframes(t,o),e.keyframes.ScalarArrayAnimation.addTweens(t,a),e.keyframes.ScalarArrayAnimation.endScalarArrayAnimation(t)},e.keyframes.PointAnimation=function(){this.bb=null,this.bb_pos=0},e.keyframes.PointAnimation.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.PointAnimation.getRootAsPointAnimation=function(t,n){return(n||new e.keyframes.PointAnimation).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.PointAnimation.prototype.value=function(t){var n=this.bb.__offset(this.bb_pos,4);return n?(t||new e.keyframes.Point).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.PointAnimation.prototype.values=function(t,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new e.keyframes.Point).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.PointAnimation.prototype.valuesLength=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.PointAnimation.prototype.keyframes=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0},e.keyframes.PointAnimation.prototype.keyframesLength=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.PointAnimation.prototype.keyframesArray=function(){var e=this.bb.__offset(this.bb_pos,8);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null},e.keyframes.PointAnimation.prototype.tweens=function(t,n){var r=this.bb.__offset(this.bb_pos,10);return r?(n||new e.keyframes.Tween).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.PointAnimation.prototype.tweensLength=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.PointAnimation.startPointAnimation=function(e){e.startObject(4)},e.keyframes.PointAnimation.addValue=function(e,t){e.addFieldOffset(0,t,0)},e.keyframes.PointAnimation.addValues=function(e,t){e.addFieldOffset(1,t,0)},e.keyframes.PointAnimation.createValuesVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.PointAnimation.startValuesVector=function(e,t){e.startVector(4,t,4)},e.keyframes.PointAnimation.addKeyframes=function(e,t){e.addFieldOffset(2,t,0)},e.keyframes.PointAnimation.createKeyframesVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addFloat32(t[n]);return e.endVector()},e.keyframes.PointAnimation.startKeyframesVector=function(e,t){e.startVector(4,t,4)},e.keyframes.PointAnimation.addTweens=function(e,t){e.addFieldOffset(3,t,0)},e.keyframes.PointAnimation.createTweensVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.PointAnimation.startTweensVector=function(e,t){e.startVector(4,t,4)},e.keyframes.PointAnimation.endPointAnimation=function(e){var t=e.endObject();return t},e.keyframes.PointAnimation.createPointAnimation=function(t,n,r,o,a){return e.keyframes.PointAnimation.startPointAnimation(t),e.keyframes.PointAnimation.addValue(t,n),e.keyframes.PointAnimation.addValues(t,r),e.keyframes.PointAnimation.addKeyframes(t,o),e.keyframes.PointAnimation.addTweens(t,a),e.keyframes.PointAnimation.endPointAnimation(t)},e.keyframes.ColorAnimation=function(){this.bb=null,this.bb_pos=0},e.keyframes.ColorAnimation.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.ColorAnimation.getRootAsColorAnimation=function(t,n){return(n||new e.keyframes.ColorAnimation).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.ColorAnimation.prototype.value=function(t){var n=this.bb.__offset(this.bb_pos,4);return n?(t||new e.keyframes.Color).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.ColorAnimation.prototype.values=function(t,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new e.keyframes.Color).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.ColorAnimation.prototype.valuesLength=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.ColorAnimation.prototype.keyframes=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0},e.keyframes.ColorAnimation.prototype.keyframesLength=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.ColorAnimation.prototype.keyframesArray=function(){var e=this.bb.__offset(this.bb_pos,8);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null},e.keyframes.ColorAnimation.prototype.tweens=function(t,n){var r=this.bb.__offset(this.bb_pos,10);return r?(n||new e.keyframes.Tween).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.ColorAnimation.prototype.tweensLength=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.ColorAnimation.startColorAnimation=function(e){e.startObject(4)},e.keyframes.ColorAnimation.addValue=function(e,t){e.addFieldOffset(0,t,0)},e.keyframes.ColorAnimation.addValues=function(e,t){e.addFieldOffset(1,t,0)},e.keyframes.ColorAnimation.createValuesVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.ColorAnimation.startValuesVector=function(e,t){e.startVector(4,t,4)},e.keyframes.ColorAnimation.addKeyframes=function(e,t){e.addFieldOffset(2,t,0)},e.keyframes.ColorAnimation.createKeyframesVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addFloat32(t[n]);return e.endVector()},e.keyframes.ColorAnimation.startKeyframesVector=function(e,t){e.startVector(4,t,4)},e.keyframes.ColorAnimation.addTweens=function(e,t){e.addFieldOffset(3,t,0)},e.keyframes.ColorAnimation.createTweensVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.ColorAnimation.startTweensVector=function(e,t){e.startVector(4,t,4)},e.keyframes.ColorAnimation.endColorAnimation=function(e){var t=e.endObject();return t},e.keyframes.ColorAnimation.createColorAnimation=function(t,n,r,o,a){return e.keyframes.ColorAnimation.startColorAnimation(t),e.keyframes.ColorAnimation.addValue(t,n),e.keyframes.ColorAnimation.addValues(t,r),e.keyframes.ColorAnimation.addKeyframes(t,o),e.keyframes.ColorAnimation.addTweens(t,a),e.keyframes.ColorAnimation.endColorAnimation(t)},e.keyframes.ColorArrayAnimation=function(){this.bb=null,this.bb_pos=0},e.keyframes.ColorArrayAnimation.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.ColorArrayAnimation.getRootAsColorArrayAnimation=function(t,n){return(n||new e.keyframes.ColorArrayAnimation).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.ColorArrayAnimation.prototype.value=function(t){var n=this.bb.__offset(this.bb_pos,4);return n?(t||new e.keyframes.ColorArray).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.ColorArrayAnimation.prototype.values=function(t,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new e.keyframes.ColorArray).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.ColorArrayAnimation.prototype.valuesLength=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.ColorArrayAnimation.prototype.keyframes=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0},e.keyframes.ColorArrayAnimation.prototype.keyframesLength=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.ColorArrayAnimation.prototype.keyframesArray=function(){var e=this.bb.__offset(this.bb_pos,8);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null},e.keyframes.ColorArrayAnimation.prototype.tweens=function(t,n){var r=this.bb.__offset(this.bb_pos,10);return r?(n||new e.keyframes.Tween).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.ColorArrayAnimation.prototype.tweensLength=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.ColorArrayAnimation.startColorArrayAnimation=function(e){e.startObject(4)},e.keyframes.ColorArrayAnimation.addValue=function(e,t){e.addFieldOffset(0,t,0)},e.keyframes.ColorArrayAnimation.addValues=function(e,t){e.addFieldOffset(1,t,0)},e.keyframes.ColorArrayAnimation.createValuesVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.ColorArrayAnimation.startValuesVector=function(e,t){e.startVector(4,t,4)},e.keyframes.ColorArrayAnimation.addKeyframes=function(e,t){e.addFieldOffset(2,t,0)},e.keyframes.ColorArrayAnimation.createKeyframesVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addFloat32(t[n]);return e.endVector()},e.keyframes.ColorArrayAnimation.startKeyframesVector=function(e,t){e.startVector(4,t,4)},e.keyframes.ColorArrayAnimation.addTweens=function(e,t){e.addFieldOffset(3,t,0)},e.keyframes.ColorArrayAnimation.createTweensVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.ColorArrayAnimation.startTweensVector=function(e,t){e.startVector(4,t,4)},e.keyframes.ColorArrayAnimation.endColorArrayAnimation=function(e){var t=e.endObject();return t},e.keyframes.ColorArrayAnimation.createColorArrayAnimation=function(t,n,r,o,a){return e.keyframes.ColorArrayAnimation.startColorArrayAnimation(t),e.keyframes.ColorArrayAnimation.addValue(t,n),e.keyframes.ColorArrayAnimation.addValues(t,r),e.keyframes.ColorArrayAnimation.addKeyframes(t,o),e.keyframes.ColorArrayAnimation.addTweens(t,a),e.keyframes.ColorArrayAnimation.endColorArrayAnimation(t)},e.keyframes.PathAnimation=function(){this.bb=null,this.bb_pos=0},e.keyframes.PathAnimation.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.PathAnimation.getRootAsPathAnimation=function(t,n){return(n||new e.keyframes.PathAnimation).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.PathAnimation.prototype.value=function(t){var n=this.bb.__offset(this.bb_pos,4);return n?(t||new e.keyframes.Path).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.PathAnimation.prototype.values=function(t,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new e.keyframes.Path).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.PathAnimation.prototype.valuesLength=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.PathAnimation.prototype.keyframes=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0},e.keyframes.PathAnimation.prototype.keyframesLength=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.PathAnimation.prototype.keyframesArray=function(){var e=this.bb.__offset(this.bb_pos,8);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null},e.keyframes.PathAnimation.prototype.tweens=function(t,n){var r=this.bb.__offset(this.bb_pos,10);return r?(n||new e.keyframes.Tween).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.PathAnimation.prototype.tweensLength=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.PathAnimation.startPathAnimation=function(e){e.startObject(4)},e.keyframes.PathAnimation.addValue=function(e,t){e.addFieldOffset(0,t,0)},e.keyframes.PathAnimation.addValues=function(e,t){e.addFieldOffset(1,t,0)},e.keyframes.PathAnimation.createValuesVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.PathAnimation.startValuesVector=function(e,t){e.startVector(4,t,4)},e.keyframes.PathAnimation.addKeyframes=function(e,t){e.addFieldOffset(2,t,0)},e.keyframes.PathAnimation.createKeyframesVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addFloat32(t[n]);return e.endVector()},e.keyframes.PathAnimation.startKeyframesVector=function(e,t){e.startVector(4,t,4)},e.keyframes.PathAnimation.addTweens=function(e,t){e.addFieldOffset(3,t,0)},e.keyframes.PathAnimation.createTweensVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.PathAnimation.startTweensVector=function(e,t){e.startVector(4,t,4)},e.keyframes.PathAnimation.endPathAnimation=function(e){var t=e.endObject();return t},e.keyframes.PathAnimation.createPathAnimation=function(t,n,r,o,a){return e.keyframes.PathAnimation.startPathAnimation(t),e.keyframes.PathAnimation.addValue(t,n),e.keyframes.PathAnimation.addValues(t,r),e.keyframes.PathAnimation.addKeyframes(t,o),e.keyframes.PathAnimation.addTweens(t,a),e.keyframes.PathAnimation.endPathAnimation(t)},e.keyframes.Gradient=function(){this.bb=null,this.bb_pos=0},e.keyframes.Gradient.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.Gradient.getRootAsGradient=function(t,n){return(n||new e.keyframes.Gradient).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.Gradient.prototype.colorStart=function(t){var n=this.bb.__offset(this.bb_pos,4);return n?(t||new e.keyframes.ColorAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Gradient.prototype.colorEnd=function(t){var n=this.bb.__offset(this.bb_pos,6);return n?(t||new e.keyframes.ColorAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Gradient.prototype.rampStart=function(t){var n=this.bb.__offset(this.bb_pos,8);return n?(t||new e.keyframes.PointAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Gradient.prototype.rampEnd=function(t){var n=this.bb.__offset(this.bb_pos,10);return n?(t||new e.keyframes.PointAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Gradient.prototype.type=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt8(this.bb_pos+t):e.keyframes.GradientType.Linear},e.keyframes.Gradient.prototype.mutate_type=function(e){var t=this.bb.__offset(this.bb_pos,12);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,e),!0)},e.keyframes.Gradient.prototype.colors=function(t){var n=this.bb.__offset(this.bb_pos,14);return n?(t||new e.keyframes.ColorArrayAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Gradient.prototype.positions=function(t){var n=this.bb.__offset(this.bb_pos,16);return n?(t||new e.keyframes.ScalarArrayAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Gradient.prototype.highlightLength=function(t){var n=this.bb.__offset(this.bb_pos,18);return n?(t||new e.keyframes.ScalarAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Gradient.prototype.highlightAngle=function(t){var n=this.bb.__offset(this.bb_pos,20);return n?(t||new e.keyframes.ScalarAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Gradient.startGradient=function(e){e.startObject(9)},e.keyframes.Gradient.addColorStart=function(e,t){e.addFieldOffset(0,t,0)},e.keyframes.Gradient.addColorEnd=function(e,t){e.addFieldOffset(1,t,0)},e.keyframes.Gradient.addRampStart=function(e,t){e.addFieldOffset(2,t,0)},e.keyframes.Gradient.addRampEnd=function(e,t){e.addFieldOffset(3,t,0)},e.keyframes.Gradient.addType=function(t,n){t.addFieldInt8(4,n,e.keyframes.GradientType.Linear)},e.keyframes.Gradient.addColors=function(e,t){e.addFieldOffset(5,t,0)},e.keyframes.Gradient.addPositions=function(e,t){e.addFieldOffset(6,t,0)},e.keyframes.Gradient.addHighlightLength=function(e,t){e.addFieldOffset(7,t,0)},e.keyframes.Gradient.addHighlightAngle=function(e,t){e.addFieldOffset(8,t,0)},e.keyframes.Gradient.endGradient=function(e){var t=e.endObject();return t},e.keyframes.Gradient.createGradient=function(t,n,r,o,a,i,l,s,u,c){return e.keyframes.Gradient.startGradient(t),e.keyframes.Gradient.addColorStart(t,n),e.keyframes.Gradient.addColorEnd(t,r),e.keyframes.Gradient.addRampStart(t,o),e.keyframes.Gradient.addRampEnd(t,a),e.keyframes.Gradient.addType(t,i),e.keyframes.Gradient.addColors(t,l),e.keyframes.Gradient.addPositions(t,s),e.keyframes.Gradient.addHighlightLength(t,u),e.keyframes.Gradient.addHighlightAngle(t,c),e.keyframes.Gradient.endGradient(t)},e.keyframes.Bitmap=function(){this.bb=null,this.bb_pos=0},e.keyframes.Bitmap.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.Bitmap.getRootAsBitmap=function(t,n){return(n||new e.keyframes.Bitmap).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.Bitmap.prototype.size=function(t){var n=this.bb.__offset(this.bb_pos,4);return n?(t||new e.keyframes.Size).__init(this.bb_pos+n,this.bb):null},e.keyframes.Bitmap.prototype.content=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0},e.keyframes.Bitmap.prototype.contentLength=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.Bitmap.prototype.contentArray=function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null},e.keyframes.Bitmap.prototype.name=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null},e.keyframes.Bitmap.startBitmap=function(e){e.startObject(3)},e.keyframes.Bitmap.addSize=function(e,t){e.addFieldStruct(0,t,0)},e.keyframes.Bitmap.addContent=function(e,t){e.addFieldOffset(1,t,0)},e.keyframes.Bitmap.createContentVector=function(e,t){e.startVector(1,t.length,1);for(var n=t.length-1;n>=0;n--)e.addInt8(t[n]);return e.endVector()},e.keyframes.Bitmap.startContentVector=function(e,t){e.startVector(1,t,1)},e.keyframes.Bitmap.addName=function(e,t){e.addFieldOffset(2,t,0)},e.keyframes.Bitmap.endBitmap=function(e){var t=e.endObject();return t},e.keyframes.Bitmap.createBitmap=function(t,n,r,o){return e.keyframes.Bitmap.startBitmap(t),e.keyframes.Bitmap.addSize(t,n),e.keyframes.Bitmap.addContent(t,r),e.keyframes.Bitmap.addName(t,o),e.keyframes.Bitmap.endBitmap(t)},e.keyframes.Video=function(){this.bb=null,this.bb_pos=0},e.keyframes.Video.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.Video.getRootAsVideo=function(t,n){return(n||new e.keyframes.Video).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.Video.prototype.size=function(t){var n=this.bb.__offset(this.bb_pos,4);return n?(t||new e.keyframes.Size).__init(this.bb_pos+n,this.bb):null},e.keyframes.Video.prototype.length=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0},e.keyframes.Video.prototype.mutate_length=function(e){var t=this.bb.__offset(this.bb_pos,6);return t===0?!1:(this.bb.writeInt32(this.bb_pos+t,e),!0)},e.keyframes.Video.prototype.content=function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0},e.keyframes.Video.prototype.contentLength=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.Video.prototype.contentArray=function(){var e=this.bb.__offset(this.bb_pos,8);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null},e.keyframes.Video.prototype.name=function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null},e.keyframes.Video.startVideo=function(e){e.startObject(4)},e.keyframes.Video.addSize=function(e,t){e.addFieldStruct(0,t,0)},e.keyframes.Video.addLength=function(e,t){e.addFieldInt32(1,t,0)},e.keyframes.Video.addContent=function(e,t){e.addFieldOffset(2,t,0)},e.keyframes.Video.createContentVector=function(e,t){e.startVector(1,t.length,1);for(var n=t.length-1;n>=0;n--)e.addInt8(t[n]);return e.endVector()},e.keyframes.Video.startContentVector=function(e,t){e.startVector(1,t,1)},e.keyframes.Video.addName=function(e,t){e.addFieldOffset(3,t,0)},e.keyframes.Video.endVideo=function(e){var t=e.endObject();return t},e.keyframes.Video.createVideo=function(t,n,r,o,a){return e.keyframes.Video.startVideo(t),e.keyframes.Video.addSize(t,n),e.keyframes.Video.addLength(t,r),e.keyframes.Video.addContent(t,o),e.keyframes.Video.addName(t,a),e.keyframes.Video.endVideo(t)},e.keyframes.Plugin=function(){this.bb=null,this.bb_pos=0},e.keyframes.Plugin.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.Plugin.getRootAsPlugin=function(t,n){return(n||new e.keyframes.Plugin).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.Plugin.prototype.index=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0},e.keyframes.Plugin.prototype.mutate_index=function(e){var t=this.bb.__offset(this.bb_pos,4);return t===0?!1:(this.bb.writeInt32(this.bb_pos+t,e),!0)},e.keyframes.Plugin.prototype.content=function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0},e.keyframes.Plugin.prototype.contentLength=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.Plugin.prototype.contentArray=function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null},e.keyframes.Plugin.prototype.optional=function(){var e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1},e.keyframes.Plugin.prototype.mutate_optional=function(e){var t=this.bb.__offset(this.bb_pos,8);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,e),!0)},e.keyframes.Plugin.startPlugin=function(e){e.startObject(3)},e.keyframes.Plugin.addIndex=function(e,t){e.addFieldInt32(0,t,0)},e.keyframes.Plugin.addContent=function(e,t){e.addFieldOffset(1,t,0)},e.keyframes.Plugin.createContentVector=function(e,t){e.startVector(1,t.length,1);for(var n=t.length-1;n>=0;n--)e.addInt8(t[n]);return e.endVector()},e.keyframes.Plugin.startContentVector=function(e,t){e.startVector(1,t,1)},e.keyframes.Plugin.addOptional=function(e,t){e.addFieldInt8(2,+t,0)},e.keyframes.Plugin.endPlugin=function(e){var t=e.endObject();return t},e.keyframes.Plugin.createPlugin=function(t,n,r,o){return e.keyframes.Plugin.startPlugin(t),e.keyframes.Plugin.addIndex(t,n),e.keyframes.Plugin.addContent(t,r),e.keyframes.Plugin.addOptional(t,o),e.keyframes.Plugin.endPlugin(t)},e.keyframes.ProgressMarker=function(){this.bb=null,this.bb_pos=0},e.keyframes.ProgressMarker.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.ProgressMarker.getRootAsProgressMarker=function(t,n){return(n||new e.keyframes.ProgressMarker).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.ProgressMarker.prototype.name=function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null},e.keyframes.ProgressMarker.prototype.startProgress=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat32(this.bb_pos+e):0},e.keyframes.ProgressMarker.prototype.mutate_start_progress=function(e){var t=this.bb.__offset(this.bb_pos,6);return t===0?!1:(this.bb.writeFloat32(this.bb_pos+t,e),!0)},e.keyframes.ProgressMarker.prototype.endProgress=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat32(this.bb_pos+e):0},e.keyframes.ProgressMarker.prototype.mutate_end_progress=function(e){var t=this.bb.__offset(this.bb_pos,8);return t===0?!1:(this.bb.writeFloat32(this.bb_pos+t,e),!0)},e.keyframes.ProgressMarker.startProgressMarker=function(e){e.startObject(3)},e.keyframes.ProgressMarker.addName=function(e,t){e.addFieldOffset(0,t,0)},e.keyframes.ProgressMarker.addStartProgress=function(e,t){e.addFieldFloat32(1,t,0)},e.keyframes.ProgressMarker.addEndProgress=function(e,t){e.addFieldFloat32(2,t,0)},e.keyframes.ProgressMarker.endProgressMarker=function(e){var t=e.endObject();return t},e.keyframes.ProgressMarker.createProgressMarker=function(t,n,r,o){return e.keyframes.ProgressMarker.startProgressMarker(t),e.keyframes.ProgressMarker.addName(t,n),e.keyframes.ProgressMarker.addStartProgress(t,r),e.keyframes.ProgressMarker.addEndProgress(t,o),e.keyframes.ProgressMarker.endProgressMarker(t)},e.keyframes.Layer=function(){this.bb=null,this.bb_pos=0},e.keyframes.Layer.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.Layer.getRootAsLayer=function(t,n){return(n||new e.keyframes.Layer).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.Layer.prototype.id=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0},e.keyframes.Layer.prototype.mutate_id=function(e){var t=this.bb.__offset(this.bb_pos,4);return t===0?!1:(this.bb.writeInt32(this.bb_pos+t,e),!0)},e.keyframes.Layer.prototype.sublayers=function(t,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new e.keyframes.Layer).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.Layer.prototype.sublayersLength=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.Layer.prototype.fromProgress=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat32(this.bb_pos+e):0},e.keyframes.Layer.prototype.mutate_from_progress=function(e){var t=this.bb.__offset(this.bb_pos,8);return t===0?!1:(this.bb.writeFloat32(this.bb_pos+t,e),!0)},e.keyframes.Layer.prototype.toProgress=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat32(this.bb_pos+e):1},e.keyframes.Layer.prototype.mutate_to_progress=function(e){var t=this.bb.__offset(this.bb_pos,10);return t===0?!1:(this.bb.writeFloat32(this.bb_pos+t,e),!0)},e.keyframes.Layer.prototype.anchorPoint=function(t){var n=this.bb.__offset(this.bb_pos,12);return n?(t||new e.keyframes.PointAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Layer.prototype.xPosition=function(t){var n=this.bb.__offset(this.bb_pos,14);return n?(t||new e.keyframes.ScalarAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Layer.prototype.yPosition=function(t){var n=this.bb.__offset(this.bb_pos,16);return n?(t||new e.keyframes.ScalarAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Layer.prototype.rotation=function(t){var n=this.bb.__offset(this.bb_pos,18);return n?(t||new e.keyframes.ScalarAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Layer.prototype.scale=function(t){var n=this.bb.__offset(this.bb_pos,20);return n?(t||new e.keyframes.PointAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Layer.prototype.path=function(t){var n=this.bb.__offset(this.bb_pos,22);return n?(t||new e.keyframes.PathAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Layer.prototype.opacity=function(t){var n=this.bb.__offset(this.bb_pos,24);return n?(t||new e.keyframes.ScalarAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Layer.prototype.fillColor=function(t){var n=this.bb.__offset(this.bb_pos,26);return n?(t||new e.keyframes.ColorAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Layer.prototype.strokeColor=function(t){var n=this.bb.__offset(this.bb_pos,28);return n?(t||new e.keyframes.ColorAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Layer.prototype.strokeWidth=function(t){var n=this.bb.__offset(this.bb_pos,30);return n?(t||new e.keyframes.ScalarAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Layer.prototype.strokeLineCap=function(){var t=this.bb.__offset(this.bb_pos,32);return t?this.bb.readInt8(this.bb_pos+t):e.keyframes.StrokeLineCap.Butt},e.keyframes.Layer.prototype.mutate_stroke_line_cap=function(e){var t=this.bb.__offset(this.bb_pos,32);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,e),!0)},e.keyframes.Layer.prototype.gradient=function(t){var n=this.bb.__offset(this.bb_pos,34);return n?(t||new e.keyframes.Gradient).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Layer.prototype.strokeLineJoin=function(){var t=this.bb.__offset(this.bb_pos,36);return t?this.bb.readInt8(this.bb_pos+t):e.keyframes.StrokeLineJoin.Miter},e.keyframes.Layer.prototype.mutate_stroke_line_join=function(e){var t=this.bb.__offset(this.bb_pos,36);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,e),!0)},e.keyframes.Layer.prototype.miterLimit=function(t){var n=this.bb.__offset(this.bb_pos,38);return n?(t||new e.keyframes.ScalarAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Layer.prototype.bitmapIndex=function(){var e=this.bb.__offset(this.bb_pos,40);return e?this.bb.readInt32(this.bb_pos+e):-1},e.keyframes.Layer.prototype.mutate_bitmap_index=function(e){var t=this.bb.__offset(this.bb_pos,40);return t===0?!1:(this.bb.writeInt32(this.bb_pos+t,e),!0)},e.keyframes.Layer.prototype.subdocumentIndex=function(){var e=this.bb.__offset(this.bb_pos,42);return e?this.bb.readInt32(this.bb_pos+e):-1},e.keyframes.Layer.prototype.mutate_subdocument_index=function(e){var t=this.bb.__offset(this.bb_pos,42);return t===0?!1:(this.bb.writeInt32(this.bb_pos+t,e),!0)},e.keyframes.Layer.prototype.plugins=function(t,n){var r=this.bb.__offset(this.bb_pos,44);return r?(n||new e.keyframes.Plugin).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.Layer.prototype.pluginsLength=function(){var e=this.bb.__offset(this.bb_pos,44);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.Layer.prototype.progressOffset=function(){var e=this.bb.__offset(this.bb_pos,46);return e?this.bb.readFloat32(this.bb_pos+e):0},e.keyframes.Layer.prototype.mutate_progress_offset=function(e){var t=this.bb.__offset(this.bb_pos,46);return t===0?!1:(this.bb.writeFloat32(this.bb_pos+t,e),!0)},e.keyframes.Layer.prototype.clippingPath=function(t){var n=this.bb.__offset(this.bb_pos,48);return n?(t||new e.keyframes.PathAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Layer.prototype.position=function(t){var n=this.bb.__offset(this.bb_pos,50);return n?(t||new e.keyframes.PathAnimation).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Layer.prototype.isTrackMatte=function(){var e=this.bb.__offset(this.bb_pos,52);return e?!!this.bb.readInt8(this.bb_pos+e):!1},e.keyframes.Layer.prototype.mutate_is_track_matte=function(e){var t=this.bb.__offset(this.bb_pos,52);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,e),!0)},e.keyframes.Layer.prototype.trackMatteType=function(){var t=this.bb.__offset(this.bb_pos,54);return t?this.bb.readInt8(this.bb_pos+t):e.keyframes.TrackMatteType.None},e.keyframes.Layer.prototype.mutate_track_matte_type=function(e){var t=this.bb.__offset(this.bb_pos,54);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,e),!0)},e.keyframes.Layer.prototype.vectorCompositeOrder=function(){var t=this.bb.__offset(this.bb_pos,56);return t?this.bb.readInt8(this.bb_pos+t):e.keyframes.VectorCompositeOrder.FillStroke},e.keyframes.Layer.prototype.mutate_vector_composite_order=function(e){var t=this.bb.__offset(this.bb_pos,56);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,e),!0)},e.keyframes.Layer.prototype.text=function(e){var t=this.bb.__offset(this.bb_pos,58);return t?this.bb.__string(this.bb_pos+t,e):null},e.keyframes.Layer.prototype.textTypeface=function(e){var t=this.bb.__offset(this.bb_pos,60);return t?this.bb.__string(this.bb_pos+t,e):null},e.keyframes.Layer.prototype.textSize=function(){var e=this.bb.__offset(this.bb_pos,62);return e?this.bb.readFloat32(this.bb_pos+e):0},e.keyframes.Layer.prototype.mutate_textSize=function(e){var t=this.bb.__offset(this.bb_pos,62);return t===0?!1:(this.bb.writeFloat32(this.bb_pos+t,e),!0)},e.keyframes.Layer.prototype.textColor=function(t){var n=this.bb.__offset(this.bb_pos,64);return n?(t||new e.keyframes.Color).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Layer.prototype.textAlign=function(){var e=this.bb.__offset(this.bb_pos,66);return e?this.bb.readFloat32(this.bb_pos+e):0},e.keyframes.Layer.prototype.mutate_textAlign=function(e){var t=this.bb.__offset(this.bb_pos,66);return t===0?!1:(this.bb.writeFloat32(this.bb_pos+t,e),!0)},e.keyframes.Layer.prototype.textVAlign=function(){var e=this.bb.__offset(this.bb_pos,68);return e?this.bb.readFloat32(this.bb_pos+e):0},e.keyframes.Layer.prototype.mutate_textVAlign=function(e){var t=this.bb.__offset(this.bb_pos,68);return t===0?!1:(this.bb.writeFloat32(this.bb_pos+t,e),!0)},e.keyframes.Layer.prototype.textTracking=function(){var e=this.bb.__offset(this.bb_pos,70);return e?this.bb.readFloat32(this.bb_pos+e):0},e.keyframes.Layer.prototype.mutate_textTracking=function(e){var t=this.bb.__offset(this.bb_pos,70);return t===0?!1:(this.bb.writeFloat32(this.bb_pos+t,e),!0)},e.keyframes.Layer.prototype.textLeading=function(){var e=this.bb.__offset(this.bb_pos,72);return e?this.bb.readFloat32(this.bb_pos+e):0},e.keyframes.Layer.prototype.mutate_textLeading=function(e){var t=this.bb.__offset(this.bb_pos,72);return t===0?!1:(this.bb.writeFloat32(this.bb_pos+t,e),!0)},e.keyframes.Layer.prototype.textItalic=function(){var e=this.bb.__offset(this.bb_pos,74);return e?!!this.bb.readInt8(this.bb_pos+e):!1},e.keyframes.Layer.prototype.mutate_textItalic=function(e){var t=this.bb.__offset(this.bb_pos,74);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,e),!0)},e.keyframes.Layer.prototype.textWeight=function(){var t=this.bb.__offset(this.bb_pos,76);return t?this.bb.readInt8(this.bb_pos+t):e.keyframes.TextWeight.Thin},e.keyframes.Layer.prototype.mutate_textWeight=function(e){var t=this.bb.__offset(this.bb_pos,76);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,e),!0)},e.keyframes.Layer.prototype.textBoxSize=function(t){var n=this.bb.__offset(this.bb_pos,78);return n?(t||new e.keyframes.Size).__init(this.bb_pos+n,this.bb):null},e.keyframes.Layer.prototype.videoLevels=function(t,n){var r=this.bb.__offset(this.bb_pos,80);return r?(n||new e.keyframes.ScalarAnimation).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.Layer.prototype.videoLevelsLength=function(){var e=this.bb.__offset(this.bb_pos,80);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.Layer.prototype.videoIndex=function(){var e=this.bb.__offset(this.bb_pos,82);return e?this.bb.readInt32(this.bb_pos+e):-1},e.keyframes.Layer.prototype.mutate_video_index=function(e){var t=this.bb.__offset(this.bb_pos,82);return t===0?!1:(this.bb.writeInt32(this.bb_pos+t,e),!0)},e.keyframes.Layer.startLayer=function(e){e.startObject(40)},e.keyframes.Layer.addId=function(e,t){e.addFieldInt32(0,t,0)},e.keyframes.Layer.addSublayers=function(e,t){e.addFieldOffset(1,t,0)},e.keyframes.Layer.createSublayersVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.Layer.startSublayersVector=function(e,t){e.startVector(4,t,4)},e.keyframes.Layer.addFromProgress=function(e,t){e.addFieldFloat32(2,t,0)},e.keyframes.Layer.addToProgress=function(e,t){e.addFieldFloat32(3,t,1)},e.keyframes.Layer.addAnchorPoint=function(e,t){e.addFieldOffset(4,t,0)},e.keyframes.Layer.addXPosition=function(e,t){e.addFieldOffset(5,t,0)},e.keyframes.Layer.addYPosition=function(e,t){e.addFieldOffset(6,t,0)},e.keyframes.Layer.addRotation=function(e,t){e.addFieldOffset(7,t,0)},e.keyframes.Layer.addScale=function(e,t){e.addFieldOffset(8,t,0)},e.keyframes.Layer.addPath=function(e,t){e.addFieldOffset(9,t,0)},e.keyframes.Layer.addOpacity=function(e,t){e.addFieldOffset(10,t,0)},e.keyframes.Layer.addFillColor=function(e,t){e.addFieldOffset(11,t,0)},e.keyframes.Layer.addStrokeColor=function(e,t){e.addFieldOffset(12,t,0)},e.keyframes.Layer.addStrokeWidth=function(e,t){e.addFieldOffset(13,t,0)},e.keyframes.Layer.addStrokeLineCap=function(t,n){t.addFieldInt8(14,n,e.keyframes.StrokeLineCap.Butt)},e.keyframes.Layer.addGradient=function(e,t){e.addFieldOffset(15,t,0)},e.keyframes.Layer.addStrokeLineJoin=function(t,n){t.addFieldInt8(16,n,e.keyframes.StrokeLineJoin.Miter)},e.keyframes.Layer.addMiterLimit=function(e,t){e.addFieldOffset(17,t,0)},e.keyframes.Layer.addBitmapIndex=function(e,t){e.addFieldInt32(18,t,-1)},e.keyframes.Layer.addSubdocumentIndex=function(e,t){e.addFieldInt32(19,t,-1)},e.keyframes.Layer.addPlugins=function(e,t){e.addFieldOffset(20,t,0)},e.keyframes.Layer.createPluginsVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.Layer.startPluginsVector=function(e,t){e.startVector(4,t,4)},e.keyframes.Layer.addProgressOffset=function(e,t){e.addFieldFloat32(21,t,0)},e.keyframes.Layer.addClippingPath=function(e,t){e.addFieldOffset(22,t,0)},e.keyframes.Layer.addPosition=function(e,t){e.addFieldOffset(23,t,0)},e.keyframes.Layer.addIsTrackMatte=function(e,t){e.addFieldInt8(24,+t,0)},e.keyframes.Layer.addTrackMatteType=function(t,n){t.addFieldInt8(25,n,e.keyframes.TrackMatteType.None)},e.keyframes.Layer.addVectorCompositeOrder=function(t,n){t.addFieldInt8(26,n,e.keyframes.VectorCompositeOrder.FillStroke)},e.keyframes.Layer.addText=function(e,t){e.addFieldOffset(27,t,0)},e.keyframes.Layer.addTextTypeface=function(e,t){e.addFieldOffset(28,t,0)},e.keyframes.Layer.addTextSize=function(e,t){e.addFieldFloat32(29,t,0)},e.keyframes.Layer.addTextColor=function(e,t){e.addFieldOffset(30,t,0)},e.keyframes.Layer.addTextAlign=function(e,t){e.addFieldFloat32(31,t,0)},e.keyframes.Layer.addTextVAlign=function(e,t){e.addFieldFloat32(32,t,0)},e.keyframes.Layer.addTextTracking=function(e,t){e.addFieldFloat32(33,t,0)},e.keyframes.Layer.addTextLeading=function(e,t){e.addFieldFloat32(34,t,0)},e.keyframes.Layer.addTextItalic=function(e,t){e.addFieldInt8(35,+t,0)},e.keyframes.Layer.addTextWeight=function(t,n){t.addFieldInt8(36,n,e.keyframes.TextWeight.Thin)},e.keyframes.Layer.addTextBoxSize=function(e,t){e.addFieldStruct(37,t,0)},e.keyframes.Layer.addVideoLevels=function(e,t){e.addFieldOffset(38,t,0)},e.keyframes.Layer.createVideoLevelsVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.Layer.startVideoLevelsVector=function(e,t){e.startVector(4,t,4)},e.keyframes.Layer.addVideoIndex=function(e,t){e.addFieldInt32(39,t,-1)},e.keyframes.Layer.endLayer=function(e){var t=e.endObject();return t},e.keyframes.Layer.createLayer=function(t,n,r,o,a,i,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P,N,M,w,A,F,O,B,W,q){return e.keyframes.Layer.startLayer(t),e.keyframes.Layer.addId(t,n),e.keyframes.Layer.addSublayers(t,r),e.keyframes.Layer.addFromProgress(t,o),e.keyframes.Layer.addToProgress(t,a),e.keyframes.Layer.addAnchorPoint(t,i),e.keyframes.Layer.addXPosition(t,l),e.keyframes.Layer.addYPosition(t,s),e.keyframes.Layer.addRotation(t,u),e.keyframes.Layer.addScale(t,c),e.keyframes.Layer.addPath(t,d),e.keyframes.Layer.addOpacity(t,m),e.keyframes.Layer.addFillColor(t,p),e.keyframes.Layer.addStrokeColor(t,_),e.keyframes.Layer.addStrokeWidth(t,f),e.keyframes.Layer.addStrokeLineCap(t,g),e.keyframes.Layer.addGradient(t,h),e.keyframes.Layer.addStrokeLineJoin(t,y),e.keyframes.Layer.addMiterLimit(t,C),e.keyframes.Layer.addBitmapIndex(t,b),e.keyframes.Layer.addSubdocumentIndex(t,v),e.keyframes.Layer.addPlugins(t,S),e.keyframes.Layer.addProgressOffset(t,R),e.keyframes.Layer.addClippingPath(t,L),e.keyframes.Layer.addPosition(t,E),e.keyframes.Layer.addIsTrackMatte(t,k),e.keyframes.Layer.addTrackMatteType(t,I),e.keyframes.Layer.addVectorCompositeOrder(t,T),e.keyframes.Layer.addText(t,D),e.keyframes.Layer.addTextTypeface(t,x),e.keyframes.Layer.addTextSize(t,$),e.keyframes.Layer.addTextColor(t,P),e.keyframes.Layer.addTextAlign(t,N),e.keyframes.Layer.addTextVAlign(t,M),e.keyframes.Layer.addTextTracking(t,w),e.keyframes.Layer.addTextLeading(t,A),e.keyframes.Layer.addTextItalic(t,F),e.keyframes.Layer.addTextWeight(t,O),e.keyframes.Layer.addTextBoxSize(t,B),e.keyframes.Layer.addVideoLevels(t,W),e.keyframes.Layer.addVideoIndex(t,q),e.keyframes.Layer.endLayer(t)},e.keyframes.Document=function(){this.bb=null,this.bb_pos=0},e.keyframes.Document.prototype.__init=function(e,t){return this.bb_pos=e,this.bb=t,this},e.keyframes.Document.getRootAsDocument=function(t,n){return(n||new e.keyframes.Document).__init(t.readInt32(t.position())+t.position(),t)},e.keyframes.Document.bufferHasIdentifier=function(e){return e.__has_identifier("KEYF")},e.keyframes.Document.prototype.size=function(t){var n=this.bb.__offset(this.bb_pos,4);return n?(t||new e.keyframes.Size).__init(this.bb_pos+n,this.bb):null},e.keyframes.Document.prototype.frameRate=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat32(this.bb_pos+e):0},e.keyframes.Document.prototype.mutate_frame_rate=function(e){var t=this.bb.__offset(this.bb_pos,6);return t===0?!1:(this.bb.writeFloat32(this.bb_pos+t,e),!0)},e.keyframes.Document.prototype.duration=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat32(this.bb_pos+e):0},e.keyframes.Document.prototype.mutate_duration=function(e){var t=this.bb.__offset(this.bb_pos,8);return t===0?!1:(this.bb.writeFloat32(this.bb_pos+t,e),!0)},e.keyframes.Document.prototype.version=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):0},e.keyframes.Document.prototype.mutate_version=function(e){var t=this.bb.__offset(this.bb_pos,10);return t===0?!1:(this.bb.writeInt32(this.bb_pos+t,e),!0)},e.keyframes.Document.prototype.rootLayer=function(t){var n=this.bb.__offset(this.bb_pos,12);return n?(t||new e.keyframes.Layer).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.keyframes.Document.prototype.bitmaps=function(t,n){var r=this.bb.__offset(this.bb_pos,14);return r?(n||new e.keyframes.Bitmap).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.Document.prototype.bitmapsLength=function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.Document.prototype.subdocuments=function(t,n){var r=this.bb.__offset(this.bb_pos,16);return r?(n||new e.keyframes.Document).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.Document.prototype.subdocumentsLength=function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.Document.prototype.plugins=function(e,t){var n=this.bb.__offset(this.bb_pos,18);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+e*4,t):null},e.keyframes.Document.prototype.pluginsLength=function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.Document.prototype.id=function(){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readInt32(this.bb_pos+e):0},e.keyframes.Document.prototype.mutate_id=function(e){var t=this.bb.__offset(this.bb_pos,20);return t===0?!1:(this.bb.writeInt32(this.bb_pos+t,e),!0)},e.keyframes.Document.prototype.manifest=function(e){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0},e.keyframes.Document.prototype.manifestLength=function(){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.Document.prototype.manifestArray=function(){var e=this.bb.__offset(this.bb_pos,22);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null},e.keyframes.Document.prototype.progressMarkers=function(t,n){var r=this.bb.__offset(this.bb_pos,24);return r?(n||new e.keyframes.ProgressMarker).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.Document.prototype.progressMarkersLength=function(){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.Document.prototype.videos=function(t,n){var r=this.bb.__offset(this.bb_pos,26);return r?(n||new e.keyframes.Video).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null},e.keyframes.Document.prototype.videosLength=function(){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__vector_len(this.bb_pos+e):0},e.keyframes.Document.startDocument=function(e){e.startObject(12)},e.keyframes.Document.addSize=function(e,t){e.addFieldStruct(0,t,0)},e.keyframes.Document.addFrameRate=function(e,t){e.addFieldFloat32(1,t,0)},e.keyframes.Document.addDuration=function(e,t){e.addFieldFloat32(2,t,0)},e.keyframes.Document.addVersion=function(e,t){e.addFieldInt32(3,t,0)},e.keyframes.Document.addRootLayer=function(e,t){e.addFieldOffset(4,t,0)},e.keyframes.Document.addBitmaps=function(e,t){e.addFieldOffset(5,t,0)},e.keyframes.Document.createBitmapsVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.Document.startBitmapsVector=function(e,t){e.startVector(4,t,4)},e.keyframes.Document.addSubdocuments=function(e,t){e.addFieldOffset(6,t,0)},e.keyframes.Document.createSubdocumentsVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.Document.startSubdocumentsVector=function(e,t){e.startVector(4,t,4)},e.keyframes.Document.addPlugins=function(e,t){e.addFieldOffset(7,t,0)},e.keyframes.Document.createPluginsVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.Document.startPluginsVector=function(e,t){e.startVector(4,t,4)},e.keyframes.Document.addId=function(e,t){e.addFieldInt32(8,t,0)},e.keyframes.Document.addManifest=function(e,t){e.addFieldOffset(9,t,0)},e.keyframes.Document.createManifestVector=function(e,t){e.startVector(1,t.length,1);for(var n=t.length-1;n>=0;n--)e.addInt8(t[n]);return e.endVector()},e.keyframes.Document.startManifestVector=function(e,t){e.startVector(1,t,1)},e.keyframes.Document.addProgressMarkers=function(e,t){e.addFieldOffset(10,t,0)},e.keyframes.Document.createProgressMarkersVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.Document.startProgressMarkersVector=function(e,t){e.startVector(4,t,4)},e.keyframes.Document.addVideos=function(e,t){e.addFieldOffset(11,t,0)},e.keyframes.Document.createVideosVector=function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()},e.keyframes.Document.startVideosVector=function(e,t){e.startVector(4,t,4)},e.keyframes.Document.endDocument=function(e){var t=e.endObject();return t},e.keyframes.Document.finishDocumentBuffer=function(e,t){e.finish(t,"KEYF")},e.keyframes.Document.createDocument=function(t,n,r,o,a,i,l,s,u,c,d,m,p){return e.keyframes.Document.startDocument(t),e.keyframes.Document.addSize(t,n),e.keyframes.Document.addFrameRate(t,r),e.keyframes.Document.addDuration(t,o),e.keyframes.Document.addVersion(t,a),e.keyframes.Document.addRootLayer(t,i),e.keyframes.Document.addBitmaps(t,l),e.keyframes.Document.addSubdocuments(t,s),e.keyframes.Document.addPlugins(t,u),e.keyframes.Document.addId(t,c),e.keyframes.Document.addManifest(t,d),e.keyframes.Document.addProgressMarkers(t,m),e.keyframes.Document.addVideos(t,p),e.keyframes.Document.endDocument(t)},a.exports=e.keyframes}),null);
__d("KeyframesVideoUtils",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l=window.setTimeout,s=4;function u(e){var t=document.createElement("video");return t.setAttribute("webkit-playsinline",""),t.setAttribute("playsinline",""),t.autoplay=!1,t.src=e,t.currentTime=0,e.startsWith("blob:")||(t.crossOrigin="anonymous"),t}function c(t,r){return new(e||(e=n("Promise")))(function(e,n){var o=function(){t.pause(),t.currentTime=r,t.removeEventListener("canplaythrough",o),a()},a=function(){t.readyState===s?e(t):l(a,10)},i=function(r){t.removeEventListener("error",i),n(r)};t.currentTime=r,t.addEventListener("error",i),t.readyState===s?e(t):t.addEventListener("canplaythrough",o)})}i.createVideo=u,i.loadVideo=c}),66);
__d("KeyframesAssetDecoder",["BlobFactory","KeyframesPluginsLoader","KeyframesSchema","KeyframesVideoUtils","Promise","flatbuffers","promiseDone","requestIdleCallback"],(function(t,n,r,o,a,i){"use strict";var e,l=n("KeyframesSchema").Document,s="medium",u=t.URL||t.webkitURL||{};function c(e){var t=new(n("flatbuffers")).ByteBuffer(e);return l.bufferHasIdentifier(t)?l.getRootAsDocument(t):null}function d(t){return new(e||(e=n("Promise")))(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=function(e){return n("Decode: error requesting image uri "+t)},r.src=t})}function m(e){var t=n("KeyframesVideoUtils").createVideo(e);return n("KeyframesVideoUtils").loadVideo(t,0)}function p(e,n,r){return t.createImageBitmap&&!(e instanceof VideoFrame)?e.width<n||e.height<r?f(e,n,r).then(function(e){return t.createImageBitmap(e,0,0,n,r).catch(function(t){return e})}):t.createImageBitmap(e,0,0,e.width,e.height,{resizeWidth:n,resizeHeight:r,rezizeQuality:s}).catch(function(t){return f(e,n,r)}):f(e,n,r)}function _(t,r,o){return t.width=r,t.height=o,(e||(e=n("Promise"))).resolve(t)}function f(t,r,o){return new(e||(e=n("Promise")))(function(e){var n=document.createElement("canvas");n.width=r,n.height=o;var a=n.getContext("2d");a.drawImage(t,0,0,r,o),e(n)})}function g(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];if(!(o instanceof VideoFrame)){var a=t[r].size().width(),i=t[r].size().height();if(a!==o.width||i!==o.height){var l=document.createElement("canvas");l.width=a,l.height=i;var s=l.getContext("2d");s.drawImage(o,0,0,a,i),n.push(l)}else n.push(o)}}return n}function h(t,r,o){if(!u.createObjectURL)return(e||(e=n("Promise"))).reject("URL API not supported");var a=u.createObjectURL(t),i=d(a);return n("promiseDone")(i,function(){return n("requestIdleCallback")(function(){return u.revokeObjectURL(a)})}),i}function y(r){if(n("BlobFactory").isSupported()){var o=r.contentArray();if(!o)return(e||(e=n("Promise"))).reject("Decode: tried to decode a null bitmap");var a=n("BlobFactory").getBlob([o]),i=r.size().width(),l=r.size().height();return t.createImageBitmap?t.createImageBitmap(a,0,0,i,l).catch(function(e){return h(a,i,l)}):h(a,i,l)}return(e||(e=n("Promise"))).reject("Decode: browser does not support bitmap creation")}function C(t){if(n("BlobFactory").isSupported()){var r=t.size(),o=t.contentArray();if(!o)return(e||(e=n("Promise"))).reject("Decode: tried to decode a null video");var a=n("BlobFactory").getBlob([o]);if(!u.createObjectURL)return(e||(e=n("Promise"))).reject("URL API not supported");var i=u.createObjectURL(a),l=m(i).then(function(e){return _(e,r.width(),r.height())});return n("promiseDone")(l,function(){n("requestIdleCallback")(function(){return u.revokeObjectURL(i)})}),l}return(e||(e=n("Promise"))).reject("Decode: browser does not support video creation")}function b(e){for(var t=[],n=e.pluginsLength()-1;n>=0;n--)t.unshift(e.plugins(n));return t.length?t:null}function v(e){for(var t=[],n=e.bitmapsLength()-1;n>=0;n--)t.unshift(e.bitmaps(n));return t}function S(e){for(var t=[],n=e.videosLength()-1;n>=0;n--)t.unshift(e.videos(n));return t}function R(e){for(var t={},n=0;n<e.length;n++){var r=e[n].name();r&&(t[r]={index:n,width:e[n].size().width(),height:e[n].size().height()})}return t}function L(e){for(var t={},n=0;n<e.length;n++){var r=e[n].name();r&&(t[r]={index:n,width:e[n].size().width(),height:e[n].size().height()})}return t}function E(e){for(var t=[],n,r=e.subdocumentsLength()-1;r>=0;r--)n=e.subdocuments(r),t.unshift(n);return t}function k(t){var r=c(t);return r?I(r):(e||(e=n("Promise"))).reject("Decode: could not create flatbuffer doc")}function I(t){var r=v(t),o=L(r),a=S(t),i=R(a),l=r.filter(function(e){return e.contentLength()||!e.name()}).map(y),s=a.filter(function(e){return e.contentLength()||!e.name()}).map(C),u=E(t).map(I),c=b(t),d=c?n("KeyframesPluginsLoader").fromPluginTable(c):(e||(e=n("Promise"))).resolve(null);return(e||(e=n("Promise"))).all([e.all(l),e.all(s),d,e.all(u)]).then(function(e){var n=e[0],a=e[1],l=e[2],s=e[3];return{bitmaps:g(n,r),bitmapNames:o,videos:a,videoNames:i,doc:t,pluginsLoader:l,subassets:s}})}function T(t){return Uint8Array?(e||(e=n("Promise"))).resolve(new Uint8Array(t)):(e||(e=n("Promise"))).reject("Decode: typed arrays not supported")}function D(t,r,o){if(!t.bitmapNames[r]){var a=Object.keys(t.bitmapNames).join(",");return(e||(e=n("Promise"))).reject("Decode: missing replacement bitmap name "+r+", available names: "+a)}var i=t.bitmapNames[r],l=i.index,s=i.width,u=i.height;return p(o,s,u).then(function(e){t.bitmaps[l]=e})}function x(t,r,o){if(!t.videoNames[r]){var a=Object.keys(t.videoNames).join(",");return(e||(e=n("Promise"))).reject("Decode: missing replacement video name "+r+", available names: "+a)}var i=t.videoNames[r],l=i.index,s=i.width,u=i.height;return _(o,s,u).then(function(e){t.videos[l]=e})}function $(e){var t=babelHelpers.extends({},e);return t.bitmaps=e.bitmaps.slice(),t}var P={awaitForMap:function(r,o){var t={},a=[],i=function(){var e=l[0],r=l[1],i=o(r,e);a.push(i),n("promiseDone")(i,function(n){return t[e]=n})};for(var l of Object.entries(r))i();return(e||(e=n("Promise"))).all(a).then(function(){return t})},fromDocumentBytes:function(r){return r instanceof ArrayBuffer?T(r).then(k):r instanceof Uint8Array?k(r):(e||(e=n("Promise"))).reject("Decode: unsupported byte container passed")},replaceBitmapsWithURIs:function(t,n){return P.awaitForMap(n,function(e){return d(e)}).then(function(e){return P.replaceBitmapsWithImageSources(t,e)})},replaceBitmapsWithImageSources:function(t,n){var e=$(t);return P.awaitForMap(n,function(t,n){return D(e,n,t)}).then(function(){return e})},replaceVideosWithURIs:function(t,n){return P.awaitForMap(n,m).then(function(e){return P.replaceVideosWithVideoSources(t,e)})},replaceVideosWithVideoSources:function(t,n){var e=$(t);return P.awaitForMap(n,function(t,n){return x(e,n,t)}).then(function(){return e})}};a.exports=P}),null);
__d("KeyframesCanvasPolyfills",[],(function(t,n,r,o,a,i){"use strict";function e(e){e.getTransform===void 0&&(e.currentTransform?e.getTransform=function(){var t=e.currentTransform;return{a:t.a,b:t.b,c:t.c,d:t.d,e:t.e,f:t.f}}:e.mozCurrentTransform!==void 0?e.getTransform=function(){var t=e.mozCurrentTransform;return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}:e.getTransform=function(){return l})}var l={a:1,b:0,c:0,d:1,e:0,f:0};i.addGetTransformPolyfill=e}),66);
__d("KeyframesCanvasPool",["KeyframesCanvasPolyfills","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=this;this.$4=function(e){e.canvas.width=t.$1.width.physical,e.canvas.height=t.$1.height.physical,e.canvas.style.width=t.$1.width.logical+"px",e.canvas.style.height=t.$1.height.logical+"px"},this.$1=e,this.$2=[],this.$3=[]}var t=e.prototype;return t.getCanvas=function(){if(this.$2.length){var e=this.$2.pop();return this.$3.push(e),e}else{var t=document.createElement("canvas"),n=r("nullthrows")(t.getContext("2d"));o("KeyframesCanvasPolyfills").addGetTransformPolyfill(n);var a={canvas:t,ctx:n};return this.$4(a),this.$3.push(a),a}},t.clearAllAllocated=function(){var e=this;this.$3.forEach(function(t){var n=t.ctx;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,Math.max(e.$1.width.physical,e.$1.width.intrinsic),Math.max(e.$1.height.physical,e.$1.height.intrinsic))})},t.freeAll=function(){this.$2=[].concat(this.$3,this.$2),this.$3=[]},t.resizeAll=function(){this.$2.forEach(this.$4,this),this.$3.forEach(this.$4,this)},e})();l.default=e}),98);
__d("KeyframesCanvasUtils",["invariant","KeyframesSchema"],(function(t,n,r,o,a,i,l){"use strict";var e=n("KeyframesSchema").StrokeLineCap,s=n("KeyframesSchema").CommandType,u=["miter","round","bevel"];function c(e){return"rgba("+Math.floor(e.red)+","+Math.floor(e.green)+","+Math.floor(e.blue)+","+Math.floor(e.alpha)/255+")"}function d(t){switch(t){case e.Square:return"square";case e.Round:return"round";case e.Butt:default:return"butt"}}function m(e,t){e.beginPath();for(var n of t)switch(n.type){case s.MoveTo:e.moveTo(n.point.x,n.point.y);break;case s.CubicTo:n.control1&&n.control2||l(0,2935),e.bezierCurveTo(n.control1.x,n.control1.y,n.control2.x,n.control2.y,n.point.x,n.point.y);break;case s.QuadTo:n.control1||l(0,2936),e.quadraticCurveTo(n.control1.x,n.control1.y,n.point.x,n.point.y);break;case s.LineTo:e.lineTo(n.point.x,n.point.y);break;default:throw new Error("Unrecognized path command "+n.type)}}a.exports={drawPath:m,getCanvasStyle:c,getCanvasLineCap:d,LINE_JOINS:u}}),null);
__d("KeyframesDimensions",["invariant","cr:2680"],(function(t,n,r,o,a,i,l,s){"use strict";var e=n("cr:2680").get(),u=(function(){function t(e){this.overridden=!1,this.intrinsic=e,this.$1(e)}var n=t.prototype;return n.$1=function(n){this.logical=n,this.physical=Math.floor(this.logical*e)},n.scale=function(t,n){!this.overridden||s(0,1136),this.$1(t*n)},n.override=function(t){this.overridden=!0,this.$1(t)},n.reset=function(){this.overridden=!1,this.$1(this.intrinsic)},n.getPhysicalChangeRatio=function(){return this.physical/this.intrinsic},t})(),c=(function(){function e(e,t){this.ratio=t?e/t:0,this.width=new u(e),this.height=new u(t)}var t=e.prototype;return t.setWidth=function(t){this.width.override(t),this.height.overridden||this.height.scale(t,this.ratio?1/this.ratio:0)},t.setHeight=function(t){this.height.override(t),this.width.overridden||this.width.scale(t,this.ratio)},t.reset=function(){this.height.reset(),this.width.reset()},e})();l.default=c}),98);
__d("KeyframesLoop",["Run","TimeSlice","emptyFunction","gkx","performanceNow","requestAnimationFramePolyfill"],(function(t,n,r,o,a,i,l){"use strict";var e,s=1e3,u=new Set;function c(t){var n=(e||(e=r("performanceNow")))();t.callback(Math.min(n-(t.previousTime||n),s)),t.previousTime=n,t.framesRemaining-=1,t.framesRemaining<=0&&t.cancel()}function d(e){u.size>0&&(u.forEach(c),r("requestAnimationFramePolyfill")(d))}r("gkx")("20935")||o("Run").onLeave(function(){u.forEach(function(e){return e.cancel()})}),window.addEventListener("focus",function(){u.forEach(function(t){return t.previousTime=(e||(e=r("performanceNow")))()-16.67})});var m=(function(){function t(e){this.framesRemaining=1/0,this.callback=e,this.previousTime=0}var n=t.prototype;return n.start=function(n){n===void 0&&(n=1/0),this.framesRemaining=n,this.$1||(u.size===0&&r("requestAnimationFramePolyfill")(d),u.add(this),this.previousTime=(e||(e=r("performanceNow")))(),this.$1=r("TimeSlice").getGuardedContinuation("KeyframesLoop"))},n.cancel=function(){this.$1&&(this.$1(r("emptyFunction")),this.$1=null,u.delete(this))},n.isRunning=function(){return!!this.$1},t})();l.default=m}),98);
__d("KeyframesPathUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){return(n-t)*e+t}function l(e,t,n,r,o,a,i){return o*r+2*n*e*a+t*i}function s(e,t,n,r,o,a,i,l){return o*r*n+a*3*r*e+i*3*n*t+l*t*e}a.exports={interpolateLinear:e,interpolateQuad:l,interpolateCubic:s,lerp:e}}),null);
__d("KeyframesTrackMattes",[],(function(t,n,r,o,a,i){"use strict";var e={1:"destination-in",2:"destination-out"};i.default=e}),66);
__d("KeyframesTween",["invariant","CubicBezier","KeyframesPathUtils","KeyframesSchema"],(function(t,n,r,o,a,i,l){"use strict";var e,s=n("KeyframesPathUtils").interpolateCubic,u=n("KeyframesPathUtils").interpolateLinear,c=n("KeyframesPathUtils").interpolateQuad,d=(e=n("KeyframesSchema")).Color,m=e.ColorAnimation,p=e.ColorArray,_=e.ColorArrayAnimation,f=e.Command,g=e.CommandType,h=e.Path,y=e.PathAnimation,C=e.Point,b=e.PointAnimation,v=e.ScalarAnimation,S=e.ScalarArray,R=e.ScalarArrayAnimation,L=e.TweenType;function E(e){return e}function k(e){return{x:e.x(),y:e.y()}}function I(e){return{red:e.red(),green:e.green(),blue:e.blue(),alpha:e.alpha()}}function T(e){for(var t=e.valuesLength(),n=[],r=0;r<t;r++)n.push(e.values(r));return n}function D(e){for(var t=e.colorsLength(),n=[],r=0;r<t;r++)n.push(I(e.colors(r)));return n}function x(e){var t=e.control1(),n=e.control2();return{type:e.type(),point:k(e.point()),control1:t?k(t):null,control2:n?k(n):null}}function $(e){for(var t=[],n=0;n<e.commandsLength();n++)t.push(x(e.commands(n)));return t}function P(e,t){return e>=t.keyframes(t.keyframesLength()-1)?1:e<t.keyframes(0)?-1:0}function N(e,t){if(P(e,t)!==0)return null;for(var n=0,r=t.keyframesLength()-1;n+1<r;){var o=Math.floor((r-n)/2+n);t.keyframes(o)<e?n=o:r=o}return n}function M(e,t,r){var o=t.tweens(r),a=o.type();if(a===L.Hold)return 0;var i=(e-t.keyframes(r))/(t.keyframes(r+1)-t.keyframes(r));switch(a){case L.Linear:return i;case L.Bezier:default:return new(n("CubicBezier"))([o.control1().x(),o.control1().y()],[o.control2().x(),o.control2().y()]).solve(i)}}var w=function(t,n,r){return t*(r-n)+n},A=function(t,n,r){for(var e=n.valuesLength(),o=[],a=0;a<e;a++)o.push(w(t,n.values(a),r.values(a)));return o},F=function(t,n,r){return{x:w(t,n.x(),r.x()),y:w(t,n.y(),r.y())}},O=function(t,n,r){return n&&r?F(t,n,r):null},B=function(t,n,r){return{red:w(t,n.red(),r.red()),green:w(t,n.green(),r.green()),blue:w(t,n.blue(),r.blue()),alpha:w(t,n.alpha(),r.alpha())}},W=function(t,n,r){for(var e=n.colorsLength(),o=[],a=0;a<e;a++)o.push(B(t,n.colors(a),r.colors(a)));return o},q=function(t,n,r){for(var e=[],o=0;o<n.commandsLength();o++){var a=n.commands(o),i=r.commands(o);e.push({type:a.type(),point:F(t,a.point(),i.point()),control1:O(t,a.control1(),i.control1()),control2:O(t,a.control2(),i.control2())})}return e};function U(e,t,n,r){var o=N(n,r);o!=null||l(0,2829);var a=M(n,r,o);switch(a){case 0:return t(r.values(o));case 1:return t(r.values(o+1));default:return e(a,r.values(o),r.values(o+1))}}var V=U.bind(null,w,E),H=U.bind(null,A,T),G=U.bind(null,F,k),z=U.bind(null,B,I),j=U.bind(null,W,D),K=U.bind(null,q,$);function Q(e,t,n,r){if(t.keyframesLength())switch(P(e,t)){case-1:return r(t.values(0));case 1:return r(t.values(t.valuesLength()-1));case 0:return n(e,t)}return r(t.value())}var X=function(t,n){return Q(t,n,V,E)},Y=function(t,n){return Q(t,n,H,T)},J=function(t,n){return Q(t,n,G,k)},Z=function(t,n){return Q(t,n,z,I)},ee=function(t,n){return Q(t,n,j,D)},te=function(t,n){return Q(t,n,K,$)};function ne(e,t,n){return{x:u(e,t.x,n.x),y:u(e,t.y,n.y)}}function re(e,t,n,r){var o=e*e,a=1-e,i=a*a;return{x:c(e,o,a,i,t.x,r.x,n.x),y:c(e,o,a,i,t.y,r.y,n.y)}}function oe(e,t,n,r,o){var a=e*e,i=1-e,l=i*i;return{x:s(e,a,i,l,t.x,r.x,o.x,n.x),y:s(e,a,i,l,t.y,r.y,o.y,n.y)}}function ae(e,t,n){var r=M(e,t,n),o=t.value(),a=k(o.commands(n).point()),i=x(o.commands(n+1));switch(i.type){case g.LineTo:return ne(r,a,i.point);case g.QuadTo:return i.control1||l(0,2830),re(r,a,i.point,i.control1);case g.CubicTo:return i.control1&&i.control2||l(0,2831),oe(r,a,i.point,i.control1,i.control2);default:throw new Error("Unrecognized segment type "+i.type)}}function ie(e,t){switch(P(e,t)){case-1:return k(t.value().commands(0).point());case 1:var n=t.value();return k(n.commands(n.commandsLength()-1).point());default:var r=N(e,t);return r!=null||l(0,2832),ae(e,t,r)}}var le={maybeTweenPoint2:J,maybeTweenColor:Z,maybeTweenColorArray:ee,maybeTweenScalar:X,maybeTweenScalarArray:Y,maybeTweenPath:te,tweenPointOnPath:ie};a.exports=le}),null);
__d("KeyframesVideoManager",["KeyframesVideoUtils"],(function(t,n,r,o,a,i){"use strict";var e=.2,l=100,s=[.85,1.15];a.exports=(function(){function t(e){this.$1=e,this.$3=1/e.doc.frameRate(),this.$2=d(e.doc.rootLayer(),e),this.$4=this.$5()}var r=t.prototype;return r.getVideos=function(){return this.$1.videos},r.getTimeWindows=function(){return this.$2},r.forEach=function(t){this.getVideos().forEach(t)},r.pause=function(){this.forEach(function(e){e.pause()})},r.mute=function(){this.forEach(function(e){e.muted=!0})},r.unMute=function(){this.forEach(function(e){e.muted=!1})},r.renderProgress=function(n){var t=this;this.$2.forEach(function(r,o){var a=r.video,i=c(r,n),l=u(r,n),d=t.$1.doc.duration()*l,m=Math.abs(d-a.currentTime),p=t.$1.doc.duration()*(r.toProgress-r.fromProgress);if(m>e&&a.currentTime<p&&d<p){var _=(p-a.currentTime)/(p-d);_>=s[0]&&_<=s[1]&&t.changeVideoPlaybackRate(o,_)}i&&a.paused?a.play():i==!1&&a.paused==!1&&(a.pause(),a.currentTime=0)})},r.$5=function(){return this.$2.map(function(e){var t=e.video;return p(function(e){t.playbackRate=e},l,!0)})},r.changeVideoPlaybackRate=function(t,n){this.$4[t](n)},r.seekToProgress=async function(t){var e=this,r=this.$2.map(async function(r){var o=r.video,a=0;if(c(r,t)){var i=u(r,t);a=m(e.$1.doc.duration()*i)}o.pause(),o.currentTime=a,await n("KeyframesVideoUtils").loadVideo(o,a)});await Promise.all(r)},t})();function u(e,t){return t-e.fromProgress}function c(e,t){return t>=e.fromProgress&&t<=e.toProgress}function d(e,t){var n=[],r=e.videoIndex();if(r!=-1){var o=t.videos[r],a=t.doc.videos(r);o!=null&&n.push({fromProgress:e.fromProgress(),toProgress:e.toProgress(),name:a!=null?a.name():null,video:o})}for(var i=0;i<e.sublayersLength();i++)n=n.concat(d(e.sublayers(i),t));return n}function m(e){return Math.round(e*100)/100}function p(e,t,n){t===void 0&&(t=100),n===void 0&&(n=!1);var r;return function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];var l=function(){r=null,n||e.apply(void 0,a)},s=n&&!r;clearTimeout(r),r=setTimeout(l,t),s&&e.apply(void 0,a)}}}),null);
__d("KeyframesRenderer",["invariant","ErrorGuard","KFLoaderUtils","KeyframesCanvasPolyfills","KeyframesCanvasPool","KeyframesCanvasUtils","KeyframesDimensions","KeyframesLoop","KeyframesTrackMattes","KeyframesTween","KeyframesVideoManager","gkx","nullthrows","performanceNow","promiseDone"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=1,m={ERROR_FRAMEDROP:"ERROR_FRAMEDROP"},p=60,_=1e3/p,f=1,g="source-over";function h(e,t){return r("gkx")("21037")?(u||(u=r("ErrorGuard"))).guard(e,{name:t}):e}var y=(function(){function e(e,t){t===void 0&&(t=100),this.$3=!1,this.$4=0,this.$1=e,this.$2=t}var t=e.prototype;return t.callOrIgnoreThrottled=function(){if((c||(c=r("performanceNow")))()>=this.$4){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.$5(t)}else this.$3=!0},t.callIfIgnored=function(){if(this.$3){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.$5(t)}},t.callImmediately=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.$5(t)},t.resetThrottling=function(){this.$4=0},t.$5=function(t){this.$3=!1,this.$4=(c||(c=r("performanceNow")))()+this.$2,this.$1.apply(null,t)},e})();function C(e,t){if(e.pluginsLoader){e.pluginsLoader.instances.forEach(t);for(var n=e.subassets.length-1;0<=n;n--)C(e.subassets[n],t)}}function b(e,t,n,r){if(e.pluginsLoader){for(var o=e.pluginsLoader.instances.length-1;0<=o;o--)e.pluginsLoader.instances[o].animationWillRenderLayer(t,n,r);for(var a=e.subassets.length-1;0<=a;a--)b(e.subassets[a],t,n,r)}}function v(e,t,n,r){e.save(),e.beginPath(),e.arc(t,n,r,0,2*Math.PI,!0),e.closePath(),e.clip(),e.clearRect(t-r,n-r,r*2,r*2),e.restore()}function S(t,n,r,a){var i,l=(e||(e=o("KeyframesTween"))).maybeTweenPoint2(t,n.rampStart()),s=e.maybeTweenPoint2(t,n.rampEnd()),u=n.colors(),c=n.positions();if(u&&c?(u=(e||(e=o("KeyframesTween"))).maybeTweenColorArray(t,u),c=e.maybeTweenScalarArray(t,c)):(u=[(e||(e=o("KeyframesTween"))).maybeTweenColor(t,n.colorStart()),e.maybeTweenColor(t,n.colorEnd())],c=[0,1]),n.type()===d){var m=n.highlightLength();m=m!==null?(e||(e=o("KeyframesTween"))).maybeTweenScalar(t,m):0;var p=n.highlightAngle();p=p!==null?(e||(e=o("KeyframesTween"))).maybeTweenScalar(t,n.highlightAngle()):0;var _=l.x,f=l.y,g=Math.sqrt(Math.pow(l.x-s.x,2)+Math.pow(l.y-s.y,2)),h=Math.acos((s.x-_)/g),y=_+g*m*Math.cos(h-p),C=f-g*m*Math.sin(h-p),b=0;m!==0&&(r.clip(),r.fillStyle=o("KeyframesCanvasUtils").getCanvasStyle(u[u.length-1]),r.fill(),v(r,_,f,g)),i=r.createRadialGradient(y,C,b,_,f,g)}else i=r.createLinearGradient(l.x,l.y,s.x,s.y);for(var S=0,R=u.length;S<R;S++)i.addColorStop(c[S],o("KeyframesCanvasUtils").getCanvasStyle(u[S]));return i}function R(t,n,a,i,l,s,u,c,d){if(d===void 0&&(d=f),!(u<Math.max(s.fromProgress(),0)||u>Math.min(s.toProgress(),1))){try{c&&c.maybeInstantiatePluginsForLayer(s)}catch(e){}var m=t,p,_=s.isTrackMatte(),h=s.trackMatteType();if(_||h!==0){var y=m.getTransform();p=n.getCanvas(),p.ctx.setTransform(y.a,y.b,y.c,y.d,y.e,y.f),p.isTrackMatte=_,p.trackMatteType=h,p.ctx.globalCompositeOperation=g,m=p.ctx}m.save();var C=s.position();if(C){var b=(e||(e=o("KeyframesTween"))).tweenPointOnPath(u,C),v=b.x,L=b.y;m.translate(v,L)}else{var E=s.xPosition();E&&m.translate((e||(e=o("KeyframesTween"))).maybeTweenScalar(u,E),0);var k=s.yPosition();k&&m.translate(0,(e||(e=o("KeyframesTween"))).maybeTweenScalar(u,k))}var I=s.rotation();I&&m.rotate((e||(e=o("KeyframesTween"))).maybeTweenScalar(u,I));var T=s.scale();if(T){var D=(e||(e=o("KeyframesTween"))).maybeTweenPoint2(u,T),x=D.x,$=D.y;m.scale(x,$)}var P=s.anchorPoint();if(P){var N=(e||(e=o("KeyframesTween"))).maybeTweenPoint2(u,P),M=N.x,w=N.y;m.translate(-M,-w)}var A=s.opacity();A=A!=null?(e||(e=o("KeyframesTween"))).maybeTweenScalar(u,A):1,m.globalAlpha=A*d;var F=!1;if(c){var O=c.getPluginsForLayer(s.id());if(O)for(var B=0;B<O.length;B++)O[B].render(m,u),F=F||O[B].rendersLayer}if(s.clippingPath()&&(o("KeyframesCanvasUtils").drawPath(m,(e||(e=o("KeyframesTween"))).maybeTweenPath(u,s.clippingPath())),m.clip()),!F&&s.path()){o("KeyframesCanvasUtils").drawPath(m,(e||(e=o("KeyframesTween"))).maybeTweenPath(u,s.path()));var W=s.gradient(),q=s.fillColor(),U=!1,V=!1;if(W?(m.fillStyle=S(u,W,m),U=!0):q&&(m.fillStyle=o("KeyframesCanvasUtils").getCanvasStyle((e||(e=o("KeyframesTween"))).maybeTweenColor(u,q)),U=!0),s.strokeWidth()){var H=(e||(e=o("KeyframesTween"))).maybeTweenScalar(u,s.strokeWidth());H>0&&(m.strokeStyle=o("KeyframesCanvasUtils").getCanvasStyle((e||(e=o("KeyframesTween"))).maybeTweenColor(u,s.strokeColor())),m.lineJoin=o("KeyframesCanvasUtils").LINE_JOINS[s.strokeLineJoin()],m.lineCap=o("KeyframesCanvasUtils").getCanvasLineCap(s.strokeLineCap()),m.lineWidth=H,V=!0)}s.vectorCompositeOrder()===0?(U&&m.fill(),V&&m.stroke()):(V&&m.stroke(),U&&m.fill())}var G=s.bitmapIndex(),z=a[G];z&&z.width!==0&&z.height!==0&&m.drawImage(z,0,0);var j=s.videoIndex(),K=i[j];K!=null&&m.drawImage(K,0,0,K.width,K.height);var Q=s.subdocumentIndex();if(l[Q]){var X=l[Q].doc.size();m.save(),m.beginPath(),m.rect(0,0,X.width(),X.height()),m.clip(),R(m,n,l[Q].bitmaps,l[Q].videos,l[Q].subassets,l[Q].doc.rootLayer(),u-s.progressOffset(),l[Q].pluginsLoader,A*d),m.restore()}for(var Y,J,Z=0;Z<s.sublayersLength();Z++){var ee=R(m,n,a,i,l,s.sublayers(Z),u,c,A*d);if(!Y&&ee&&ee.trackMatteType!==void 0)Y=ee;else if(Y&&ee&&ee.isTrackMatte!==void 0){var te=m.getTransform();m.setTransform(1,0,0,1,0,0),Y.ctx.setTransform(1,0,0,1,0,0),J=ee,Y.ctx.globalCompositeOperation=r("KeyframesTrackMattes")[Y.trackMatteType===void 0?1:Y.trackMatteType],Y.ctx.drawImage(J.canvas,0,0),m.drawImage(Y.canvas,0,0),m.setTransform(te.a,te.b,te.c,te.d,te.e,te.f),Y=void 0,J=void 0}else Y&&!ee?(m.drawImage(Y.canvas,0,0),Y=void 0,J=void 0):ee&&ee.isTrackMatte!==void 0&&(Y=void 0,J=void 0)}return m.restore(),p}}var L=(function(){function e(e,t){var n=this;this.$5=0,this.$6=0,this.$8=!1,this.$9=!1,this.$10=!1,this.$11=0,this.$16=!1,this.$17=0,this.$18=1,this.$19=1,this.$21=1,this.$22=0,this.$26=function(e){(n.$12||n.$15)&&n.$34(e),n.$16?(n.$10&&n.$32(),n.$24.renderProgress(n.$11),n.$33(n.$11),n.$11+=e/n.$5,n.$14&&n.$14.callOrIgnoreThrottled(n.$17),n.$11>=n.$21&&(n.$11%=n.$21,n.$19=Math.max(0,n.$19-1),n.$15&&n.$15.finish(),n.$19===0?n.pause():(n.$24.seekToProgress(0),n.$15&&n.$15.start(),n.$11+=n.$22),n.$13&&n.$13(n.$19),n.$30())):n.redrawIfNeeded()},this.$33=h(function(e){e>=0&&e<=1||s(0,750,e),this.$3.clearRect(0,0,this.$23.width.intrinsic,this.$23.height.intrinsic),this.$1.pluginsLoader&&b(this.$1,e,this.$16,this.$8),this.$4.clearAllAllocated(),this.$4.freeAll(),R(this.$3,this.$4,this.$1.bitmaps,this.$1.videos,this.$1.subassets,this.$20,e,this.$1.pluginsLoader),this.$17=e,this.$9=!1,this.$15&&this.$15.addFrame()},"KeyframesRenderer: _renderProgress()"),this.$32=h(function(){this.$2.width=this.$23.width.physical,this.$2.height=this.$23.height.physical,this.$2.style.width=this.$23.width.logical+"px",this.$2.style.height=this.$23.height.logical+"px",this.$3.setTransform(1,0,0,1,0,0),this.$3.scale(this.$23.width.getPhysicalChangeRatio(),this.$23.height.getPhysicalChangeRatio()),this.$4.resizeAll(),this.$10=!1,this.$9=!0},"KeyframesRenderer: _resize()"),this.$23=new(r("KeyframesDimensions"))(e.doc.size().width(),e.doc.size().height()),this.$4=new(r("KeyframesCanvasPool"))(this.$23),this.$2=document.createElement("canvas"),this.$3=r("nullthrows")(this.$2.getContext("2d")),o("KeyframesCanvasPolyfills").addGetTransformPolyfill(this.$3),this.$7=new(r("KeyframesLoop"))(this.$26),this.$15=t,this.$24=new(r("KeyframesVideoManager"))(e),this.setDecodedAsset(e),this.$27(),this.$25=Promise.resolve()}var t=e.prototype;return t.play=function(){return this.$16||(this.$16=!0,this.isFinished()&&(this.$19=this.$18,this.$11=this.$22),this.$15&&this.$15.start(),this.$7.start()),this},t.pause=function(){return this.$16&&(this.$16=!1,this.$15&&this.$15.pause(),this.$9?this.$28():(this.$7.cancel(),this.$14&&this.$14.callIfIgnored(this.$17))),this.$24.pause(),this.$29(this.$24.seekToProgress(this.$17)),b(this.$1,this.$17,this.$16,this.$8),this},t.isPlaying=function(){return this.$16},t.isFinished=function(){return this.$19===0},t.isMuted=function(){return this.$8},t.mute=function(){this.$8=!0,this.$24.mute()},t.unMute=function(){this.$8=!1,this.$24.unMute()},t.repeatCount=function(t){return this.$18=this.$19=Math.max(1,t),this},t.repeatForever=function(){return this.repeatCount(1/0)},t.getRepeatsRemaining=function(){return this.$19},t.seekToProgress=function(t){var e=this;return t>=0&&t<=1||s(0,749,t),this.$14&&this.$14.resetThrottling(),this.$17=this.$11=t,this.$29(this.$24.seekToProgress(t).then(function(){return e.$28()})),t===0&&this.$30(),this.$28(),this},t.setStartAndEndAt=function(t,n){if(t>=n)throw new Error("Cannot set the start time before the end time.");if(n<=t)throw new Error("Cannot set the end time before the start time.");return this.$22=t,this.$21=n,this},t.setStartAt=function(t){if(t>=this.$21)throw new Error("Cannot set the start time before the end time.");return this.$22=t,this},t.setEndAt=function(t){if(t<=this.$22)throw new Error("Cannot set the end time before the start time.");return this.$21=t,this},t.getDuration=function(){return this.$5},t.getFrameRate=function(){return this.$6},t.getIntrinsicSize=function(){return[this.$23.width.intrinsic,this.$23.height.intrinsic]},t.getWidth=function(){return this.$23.width.logical},t.getHeight=function(){return this.$23.height.logical},t.setWidth=function(t){return this.$23.setWidth(t),this.$27(),this},t.setHeight=function(t){return this.$23.setHeight(t),this.$27(),this},t.getDecodedAsset=function(){return babelHelpers.extends({},this.$1)},t.setDecodedAsset=function(t){return this.$1=t,this.$5=r("KFLoaderUtils").getDocumentDuration(t.doc),this.$6=t.doc.frameRate(),this.$20=t.doc.rootLayer(),this.$24=new(r("KeyframesVideoManager"))(t),this.$28(),this.$31(),this},t.resetDimensions=function(){return this.$23.reset(),this.$27(),this},t.onError=function(t){return this.$12=t,this},t.onRepeatEnd=function(t){return this.$13=t,this},t.onProgress=function(t,n){return this.$14=t&&new y(t,n),this},t.getProgress=function(){return this.$17},t.getElement=function(){return this.$2},t.hasPerformanceLogging=function(){return!!this.$15},t.redrawIfNeeded=function(){return(this.$10||this.$9)&&(this.$10&&this.$32(),this.$9&&this.$33(this.$17),this.$14&&this.$14.callImmediately(this.$17)),this},t.waitForVideoUpdate=async function(){await this.$25},t.$29=function(t){this.$25=t,r("promiseDone")(t)},t.$27=function(){this.$10=!0,this.$28()},t.$28=function(){this.$9=!0,this.$7.isRunning()||this.$7.start(1)},t.$31=function(){C(this.$1,function(e){return e.animationDidLoad()})},t.$30=function(){var e=this;C(this.$1,function(t){return t.animationWillRepeat(e.$11,e.$19)})},t.$34=function(t){var e=Math.round(t/_-1);e>0&&(this.$15&&this.$15.addFrameDrop(e),this.$12&&this.$12(m.ERROR_FRAMEDROP,e))},e})();i.exports=L}),34);/*FB_PKG_DELIM*/
__d("DgwClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1755537"),s=o("FalcoLoggerInternal").create("dgw_client",e),u=s;l.default=u}),98);
__d("DGWLoggingContext",["$InternalEnum","DgwClientFalcoEvent","ODS","Random"],(function(t,n,r,o,a,i,l){"use strict";var e,s="dgw_client",u=n("$InternalEnum")({STREAM_GROUP_COMPONENT:"WebStreamGroup",GROUPED_STREAM_COMPONENT:"GroupedWebStream",WEBSOCKET_TRANSPORT_COMPONENT:"WebSocketTransport",ACK_MANAGER_COMPONENT:"WebStreamAckManager",CODEC_COMPONENT:"WebCodec",RAW_CLIENT:"RAWDGWClient",PINGER:"DGWPinger"}),c={VERBOSE:-1,INFO:0,WARNING:1,ERROR:2,FATAL:3};function d(e){switch(e){case u.GROUPED_STREAM_COMPONENT:case u.ACK_MANAGER_COMPONENT:return!0;default:return!1}}var m=(function(){function t(e,t,n,r,o,a,i){a===void 0&&(a=!1),i===void 0&&(i=!1),this.$5=""+e,this.$1=t,this.$4=n,this.$3=r,this.sgTransportId=o,this.$2=a,this.$6=i}t.bumpODSKey=function(n,r,a){if(a===void 0&&(a=1),!!o("Random").coinflip(a)){var t=n+"."+r;(e||(e=o("ODS"))).bumpEntityKey(3589,"dgw_web_client",t,a)}};var n=t.prototype;return n.bumpODSKey=function(n,r,a){if(a===void 0&&(a=1),!!o("Random").coinflip(a)){var t=this.$4+"."+n+"."+r;(e||(e=o("ODS"))).bumpEntityKey(3589,"dgw_web_client",t,a)}},n.logEvent=function(t,n,r,o,a){o===void 0&&(o=!1),this.$2||this.$7(t,n,null,c.INFO,r,o,a)},n.$7=function(t,n,o,a,i,l,s){var e=this;l===void 0&&(l=!1),!(l&&!this.$6)&&(d(t)&&this.$1!=null||!d(t)&&this.sgTransportId!=null)&&r("DgwClientFalcoEvent").log(function(){return{event:n,logging_id:s!=null?s:e.$1,dgw_version:e.$5,message:o,severity:a,uuid:e.$3,dgw_component:t,extra_info:i,destination_tier:e.$4,sg_transport_id:e.sgTransportId,source:2}})},n.logError=function(t,n,r,o,a,i){a===void 0&&(a=!1),this.$2||this.$7(t,n,r,c.ERROR,o,a,i)},n.logWarn=function(t,n,r,o,a){a===void 0&&(a=!1),this.$2||this.$7(t,n,r,c.WARNING,o,a)},t})();l.DGW_MODULE=s,l.DGWLoggingComponent=u,l.DGWLoggingContext=m}),98);
__d("DGWAckManager",["DGWLoggingContext","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){var r=this;this.$3=n,this.sendId=e,this.$2=t,this.handleAckReceived=function(){r.stopTracking(!0)},this.$1=window.setTimeout(function(){r.stopTracking(!1)},t)}var t=e.prototype;return t.stopTracking=function(t){window.clearTimeout(this.$1),this.$3(t)},e})(),s=(function(){function t(e){this.$1=new Map,this.$2=e}var n=t.prototype;return n.waitForAck=async function(n,a){this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_expected");var t=this.$1;try{var i=await new Promise(function(r,o){t.set(n,new e(n,a,r))});return i===!0?this.$2.logEvent(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Received ACK","sendId:"+n,!0):(this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_timeout"),this.$2.logWarn(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ACK timeout","Request "+n+" timed out after "+a+"ms")),t.delete(n),i}catch(e){var l=r("getErrorSafe")(e);throw this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_error"),t.delete(n),l}},n.handleAckReceived=function(t){this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received");var e=this.$1.get(t);if(e===void 0){this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received.not_tracked"),this.$2.logWarn(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"untracked ACK","Received ACK for ackId "+t+" which was not being tracked");return}e.handleAckReceived()},n.clearPendingAcks=function(){var e=this;this.$2.logEvent(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending acks","ACKs cleared size: "+this.$1.size),this.$1.forEach(function(t,n,r){e.$2.logEvent(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending ACK with ackId "+t.sendId,null,!0),t.stopTracking(!1),r.delete(n)})},t})();l.DGWAckManager=s}),98);
__d("DGWAuth",["$InternalEnum","err"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({TEST:"0:0",FACEBOOK:"1:0",INTERNALFB:"2:0",OCULUS:"3:0",ENTERPRISEFB:"7:0",RECRUITINGFB:"8:0",INSTAGRAM:"6:0",HORIZON_WEB:"12:0",SPARK_WEB:"13:0",ABRA:"15:0",GUEST:"19:0"});function s(t){if(t==="TEST")return e.TEST;if(t==="FACEBOOK")return e.FACEBOOK;if(t==="INTERNALFB")return e.INTERNALFB;if(t==="OCULUS")return e.OCULUS;if(t==="ENTERPRISEFB")return e.ENTERPRISEFB;if(t==="RECRUITINGFB")return e.RECRUITINGFB;if(t==="INSTAGRAM")return e.INSTAGRAM;if(t==="HORIZON_WEB")return e.HORIZON_WEB;if(t==="SPARK_WEB")return e.SPARK_WEB;if(t==="ABRA")return e.ABRA;if(t==="GUEST")return e.GUEST;throw r("err")("failed to convert string ("+t+") to DGWAuth Type")}function u(t){return t===e.FACEBOOK?"FACEBOOK":t===e.INTERNALFB?"INTERNALFB":t===e.OCULUS?"OCULUS":t===e.ENTERPRISEFB?"ENTERPRISEFB":t===e.RECRUITINGFB?"RECRUITINGFB":t===e.INSTAGRAM?"INSTAGRAM":t===e.HORIZON_WEB?"HORIZON_WEB":t===e.SPARK_WEB?"SPARK_WEB":t===e.ABRA?"ABRA":t===e.GUEST?"GUEST":"TEST"}l.DGWAuth=e,l.fromStringToDGWAuth=s,l.fromDGWAuthToString=u}),98);
__d("DGWStream",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["ABNORMAL_CLOSURE","GOING_AWAY","SERVER_INTERNAL_ERROR","PREMATURE_CLOSE","UNKNOWN_ERROR","KEEPALIVE_TIMEOUT","TRANSPORT_CLOSED_BEFORE_STREAM_INIT","TRANSPORT_ESTABLISHMENT_ERROR","TRANSPORT_ESTABLISHMENT_TIMEOUT","ESTABLISHMENT_TIMEOUT","UNAUTHENTICATED","UNAUTHORIZED","REJECTED","BAD_REQUEST","DGW_SERVER_ERROR","ESTABLISHMENT_ERROR","ACK_TIMEOUT"]);function l(t){switch(t){case e.UNAUTHENTICATED:case e.UNAUTHORIZED:case e.REJECTED:case e.BAD_REQUEST:case e.UNKNOWN_ERROR:case e.SERVER_INTERNAL_ERROR:return!1;default:return!0}}i.StreamError=e,i.isRetryableError=l}),66);
__d("DGWCppBridge",[],(function(t,n,r,o,a,i){var e=(function(){var e=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return(function(t){t=t||{};var t=typeof t!="undefined"?t:{},n=(function(){function e(){}function t(e,t){return function(){e.apply(t,arguments)}}function n(e){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(e,this)}function r(e,t){for(;e._state===3;)e=e._value;if(e._state===0){e._deferreds.push(t);return}e._handled=!0,n._immediateFn(function(){var n=e._state===1?t.onFulfilled:t.onRejected;if(n===null){(e._state===1?o:a)(t.promise,e._value);return}var r;try{r=n(e._value)}catch(e){a(t.promise,e);return}o(t.promise,r)})}function o(e,r){try{if(r===e)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(typeof r=="object"||typeof r=="function")){var o=r.then;if(r instanceof n){e._state=3,e._value=r,i(e);return}else if(typeof o=="function"){s(t(o,r),e);return}}e._state=1,e._value=r,i(e)}catch(t){a(e,t)}}function a(e,t){e._state=2,e._value=t,i(e)}function i(e){e._state===2&&e._deferreds.length===0&&n._immediateFn(function(){e._handled||n._unhandledRejectionFn(e._value)});for(var t=0,o=e._deferreds.length;t<o;t++)r(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.promise=n}function s(e,t){var n=!1;try{e(function(e){n||(n=!0,o(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){if(n)return;n=!0,a(t,e)}}return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(t,n){var o=new this.constructor(e);return r(this,new l(t,n,o)),o},n.all=function(e){return new n(function(t,n){if(!Array.isArray(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(r.length===0)return t([]);var o=r.length;function a(e,i){try{if(i&&(typeof i=="object"||typeof i=="function")){var l=i.then;if(typeof l=="function"){l.call(i,function(t){a(e,t)},n);return}}r[e]=i,--o===0&&t(r)}catch(e){n(e)}}for(var i=0;i<r.length;i++)a(i,r[i])})},n.resolve=function(e){return e&&typeof e=="object"&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,r){if(!Array.isArray(e))return r(new TypeError("Promise.race accepts an array"));for(var o=0,a=e.length;o<a;o++)n.resolve(e[o]).then(t,r)})},n._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){setTimeout(e,0)},n._unhandledRejectionFn=function(t){},n})(),r,o;t.ready=new n(function(e,t){r=e,o=t});var a={},i;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);var l=[],s="./this.program",u=function(t,n){throw n},c=!0,d=!1,m="";function p(e){return t.locateFile?t.locateFile(e,m):m+e}var _,f,g,h;typeof document!="undefined"&&document.currentScript&&(m=document.currentScript.src),e&&(m=e),m.indexOf("blob:")!==0?m=m.substr(0,m.lastIndexOf("/")+1):m="",_=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText}catch(e){var n=ge(t);if(n)return pe(n);throw e}},f=function(t,n,r){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){if(e.status==200||e.status==0&&e.response){n(e.response);return}var o=ge(t);if(o){n(o.buffer);return}r()},e.onerror=r,e.send(null)},h=function(t){document.title=t};var y=t.print||console.log.bind(console),C=t.printErr||console.warn.bind(console);for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i]);a=null,t.arguments&&(l=t.arguments),t.thisProgram&&(s=t.thisProgram),t.quit&&(u=t.quit);var b;t.wasmBinary&&(b=t.wasmBinary);var v=t.noExitRuntime||!0,S={Memory:function(t){this.buffer=new ArrayBuffer(t.initial*65536)},Module:function(t){},Instance:function(t,n){this.exports=(function(t){function e(e){return e.set=function(e,t){this[e]=t},e.get=function(e){return this[e]},e}for(var n,r=new Uint8Array(123),o=25;o>=0;--o)r[48+o]=52+o,r[65+o]=o,r[97+o]=26+o;r[43]=62,r[47]=63;function a(e,t,n){for(var o,a,i=0,l=t,s=n.length,u=t+(s*3>>2)-(n[s-2]=="=")-(n[s-1]=="=");i<s;i+=4)o=r[n.charCodeAt(i+1)],a=r[n.charCodeAt(i+2)],e[l++]=r[n.charCodeAt(i)]<<2|o>>4,l<u&&(e[l++]=o<<4|a>>2),l<u&&(e[l++]=a<<6|r[n.charCodeAt(i+3)])}function i(e){a(n,1024,"U3Q5dHlwZV9pbmZvAAAAAOAEAAAABAAATjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAACAUAABgEAAAQBAAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAACAUAAEgEAAA8BAAATjEwX19jeHhhYml2MTE3X19wYmFzZV90eXBlX2luZm9FAAAACAUAAHgEAAA8BAAATjEwX19jeHhhYml2MTE5X19wb2ludGVyX3R5cGVfaW5mb0UACAUAAKgEAACcBAAAAAAAAGwEAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAAAAABQBQAAAQAAAAkAAAADAAAABAAAAAUAAAAKAAAACwAAAAwAAABOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UAAAAACAUAACgFAABsBA=="),a(n,1372,"gAkQ")}function l(t){var r=t.a,o=r.buffer;r.grow=Le;var a=new Int8Array(o),l=new Int16Array(o),s=new Int32Array(o),u=new Uint8Array(o),c=new Uint16Array(o),d=new Uint32Array(o),m=new Float32Array(o),p=new Float64Array(o),_=Math.imul,f=Math.fround,g=Math.abs,h=Math.clz32,y=Math.min,C=Math.max,b=Math.floor,v=Math.ceil,S=Math.trunc,R=Math.sqrt,L=t.abort,E=NaN,k=1/0,I=t.b,T=1051008,D=0;function x(e,t,n,r,o,i){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,i=i|0;var m=0,p=0,f=0;m=T-80|0,T=m,s[m+72>>2]=e,s[m+68>>2]=t,s[m+64>>2]=n,s[m+60>>2]=r,s[m+56>>2]=o,s[m+52>>2]=i;e:{if(!s[m+52>>2]||!s[m+56>>2]|(!s[m+72>>2]|!s[m+68>>2]|(!s[m+64>>2]|!s[m+60>>2]))){s[m+76>>2]=5;break e}s[s[m+64>>2]>>2]=0,s[s[m+60>>2]>>2]=0,t=s[m+68>>2],n=s[m+56>>2],r=s[m+52>>2],e=T+-64|0,T=e,s[e+56>>2]=s[m+72>>2],s[e+52>>2]=t,s[e+48>>2]=n,s[e+44>>2]=r,s[e+40>>2]=0,s[e+36>>2]=s[e+56>>2];t:{n:{r:{for(;;){if(!s[e+52>>2])break n;if(s[e+32>>2]=s[e+36>>2],a[e+31|0]=u[s[e+36>>2]],s[e+52>>2]=s[e+52>>2]-1,s[e+36>>2]=s[e+36>>2]+1,u[e+31|0]==10||u[e+31|0]==2|u[e+31|0]==4|u[e+31|0]==9){s[e+40>>2]=s[e+40>>2]+1;continue}if(s[e+24>>2]=1,J(u[e+31|0])&1){if(p=e,f=ee(u[e+31|0])&1,a[p+23|0]=f,s[e+16>>2]=a[e+23|0]&1?1:2,d[e+52>>2]<d[e+16>>2]){s[s[e+48>>2]>>2]=s[e+32>>2],s[s[e+44>>2]>>2]=s[e+52>>2]+s[e+24>>2];break t}if(s[e+52>>2]=s[e+52>>2]-s[e+16>>2],s[e+24>>2]=s[e+16>>2]+s[e+24>>2],s[e+36>>2]=s[e+16>>2]+s[e+36>>2],!(u[e+31|0]!=14&&u[e+31|0]!=8)){s[e+40>>2]=s[e+40>>2]+1;continue}}if(d[e+52>>2]<3)break r;if(s[e+12>>2]=0,t=s[e+36>>2],n=u[t|0]|u[t+1|0]<<8,a[e+12|0]=n,a[e+13|0]=n>>>8,a[e+14|0]=u[t+2|0],s[e+52>>2]=s[e+52>>2]-3,s[e+24>>2]=s[e+24>>2]+3,s[e+36>>2]=s[e+36>>2]+3,d[e+12>>2]<=d[e+52>>2]){s[e+40>>2]=s[e+40>>2]+1,s[e+36>>2]=s[e+12>>2]+s[e+36>>2],s[e+52>>2]=s[e+52>>2]-s[e+12>>2];continue}break}s[s[e+48>>2]>>2]=s[e+32>>2],s[s[e+44>>2]>>2]=s[e+52>>2]+s[e+24>>2];break t}s[s[e+48>>2]>>2]=s[e+32>>2],s[s[e+44>>2]>>2]=s[e+52>>2]+s[e+24>>2];break t}s[s[e+44>>2]>>2]=s[e+52>>2]}if(s[e+60>>2]=s[e+40>>2],T=e- -64|0,s[m+48>>2]=s[e+60>>2],!s[m+48>>2]){s[m+76>>2]=0;break e}if(p=m,f=$(_(s[m+48>>2],20)),s[p+44>>2]=f,!s[m+44>>2]){s[m+76>>2]=3;break e}for(s[m+40>>2]=s[m+44>>2],s[m+36>>2]=s[m+72>>2],s[m+32>>2]=s[m+68>>2]-s[s[m+52>>2]>>2],s[m+28>>2]=0;;){if(d[m+28>>2]<d[m+48>>2]){if(d[m+32>>2]<1){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=1;break e}a[m+27|0]=u[s[m+36>>2]],s[m+36>>2]=s[m+36>>2]+1,s[m+32>>2]=s[m+32>>2]-1;t:{if(!u[m+27|0]|u[m+27|0]==1|(u[m+27|0]==2|u[m+27|0]==3)|(u[m+27|0]==4|u[m+27|0]==9|u[m+27|0]==10)||J(u[m+27|0])&1)break t;V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=6;break e}e=s[m+40>>2],s[e>>2]=u[m+27|0]&15|s[e>>2]&-16;t:{if(u[m+27|0]==10||u[m+27|0]==2|u[m+27|0]==4|u[m+27|0]==9){e=s[m+40>>2],s[e>>2]=s[e>>2]&-268435441,s[m+40>>2]=s[m+40>>2]+20;break t}if(J(u[m+27|0])&1){e=T-48|0,T=e,s[e+40>>2]=s[m+40>>2],s[e+36>>2]=m+36,s[e+32>>2]=m+32;n:{if(!(J(s[s[e+40>>2]>>2]&15)&1)){s[e+44>>2]=1;break n}if(p=e,f=ee(s[s[e+40>>2]>>2]&15)&1,a[p+31|0]=f,s[e+24>>2]=a[e+31|0]&1?1:2,d[s[e+32>>2]>>2]<d[e+24>>2]){s[e+44>>2]=1;break n}if(ae(s[e+40>>2]+4|0,s[s[e+36>>2]>>2],s[e+24>>2]),t=s[e+36>>2],s[t>>2]=s[e+24>>2]+s[t>>2],t=s[e+32>>2],s[t>>2]=s[t>>2]-s[e+24>>2],(s[s[e+40>>2]>>2]&15)==8){t=s[e+40>>2],s[t>>2]=s[t>>2]&-268435441,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==14){t=s[e+40>>2],s[t>>2]=s[t>>2]&-268435441,s[e+44>>2]=0;break n}if(d[s[e+32>>2]>>2]<3){s[e+44>>2]=11;break n}if(s[e+20>>2]=0,t=s[s[e+36>>2]>>2],n=u[t|0]|u[t+1|0]<<8,a[e+20|0]=n,a[e+21|0]=n>>>8,a[e+22|0]=u[t+2|0],t=s[e+36>>2],s[t>>2]=s[t>>2]+3,t=s[e+32>>2],s[t>>2]=s[t>>2]-3,t=s[e+40>>2],s[t>>2]=s[t>>2]&-268435441|(s[e+20>>2]&16777215)<<4,d[s[e+32>>2]>>2]<d[e+20>>2]){s[e+44>>2]=11;break n}if((s[s[e+40>>2]>>2]&15)==15){if(s[s[e+40>>2]+12>>2]=s[e+20>>2],t=$(s[e+20>>2]),s[s[e+40>>2]+8>>2]=t,!s[s[e+40>>2]+8>>2]){s[e+44>>2]=3;break n}ae(s[s[e+40>>2]+8>>2],s[s[e+36>>2]>>2],s[e+20>>2]),t=s[e+36>>2],s[t>>2]=s[e+20>>2]+s[t>>2],t=s[e+32>>2],s[t>>2]=s[t>>2]-s[e+20>>2],s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==5){if(s[s[e+40>>2]+12>>2]=s[e+20>>2],t=$(s[e+20>>2]),s[s[e+40>>2]+8>>2]=t,!s[s[e+40>>2]+8>>2]){s[e+44>>2]=3;break n}ae(s[s[e+40>>2]+8>>2],s[s[e+36>>2]>>2],s[e+20>>2]),t=s[e+36>>2],s[t>>2]=s[e+20>>2]+s[t>>2],t=s[e+32>>2],s[t>>2]=s[t>>2]-s[e+20>>2],s[e+44>>2]=0;break n}r:{if(!((s[s[e+40>>2]>>2]&15)!=6&&(s[s[e+40>>2]>>2]&15)!=7)){if(p=e,f=G(s[e+36>>2],s[e+32>>2],e+19|0,e+18|0),s[p+12>>2]=f,s[e+12>>2]){s[e+44>>2]=s[e+12>>2];break n}break r}if(!((s[s[e+40>>2]>>2]&15)!=13&&(s[s[e+40>>2]>>2]&15)!=12)){n=s[e+32>>2],t=T-32|0,s[t+24>>2]=s[e+36>>2],s[t+20>>2]=n,s[t+16>>2]=e+19,s[t+12>>2]=e+16,l[t+10>>1]=0;o:{if(d[s[t+20>>2]>>2]<2){s[t+28>>2]=1;break o}n=s[s[t+24>>2]>>2],n=u[n|0]|u[n+1|0]<<8,a[t+10|0]=n,a[t+11|0]=n>>>8,n=s[t+24>>2],s[n>>2]=s[n>>2]+2,n=s[t+20>>2],s[n>>2]=s[n>>2]-2,a[s[t+16>>2]]=(c[t+10>>1]&32768)==32768,l[s[t+12>>2]>>1]=c[t+10>>1]&32767,s[t+28>>2]=0}if(s[e+12>>2]=s[t+28>>2],s[e+12>>2]){s[e+44>>2]=s[e+12>>2];break n}}}if((s[s[e+40>>2]>>2]&15)==12){t=s[e+40>>2],l[t+8>>1]=l[t+8>>1]&1|c[e+16>>1]<<1,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==7){t=s[e+40>>2],a[t+8|0]=a[t+8|0]&1|u[e+18|0]<<1,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==13){n=s[e+32>>2],r=s[e+20>>2],o=s[e+40>>2]+12|0,i=s[e+40>>2],t=T-32|0,T=t,s[t+24>>2]=s[e+36>>2],s[t+20>>2]=n,s[t+16>>2]=r,s[t+12>>2]=o,s[t+8>>2]=i+16;r:{if(d[t+16>>2]<2){s[t+28>>2]=9;break r}if(s[s[t+8>>2]>>2]=s[t+16>>2]-2,d[s[t+20>>2]>>2]<d[s[t+8>>2]>>2]){s[t+28>>2]=1;break r}if(n=$(s[s[t+8>>2]>>2]),s[s[t+12>>2]>>2]=n,!s[s[t+12>>2]>>2]){s[t+28>>2]=3;break r}ae(s[s[t+12>>2]>>2],s[s[t+24>>2]>>2],s[s[t+8>>2]>>2]),n=s[t+24>>2],s[n>>2]=s[s[t+8>>2]>>2]+s[n>>2],n=s[t+20>>2],s[n>>2]=s[n>>2]-s[s[t+8>>2]>>2],s[t+28>>2]=0}if(T=t+32|0,s[e+8>>2]=s[t+28>>2],s[e+8>>2]){s[e+44>>2]=s[e+8>>2];break n}t=s[e+40>>2],l[t+8>>1]=a[e+19|0]&1|c[t+8>>1]&65534,t=s[e+40>>2],l[t+8>>1]=l[t+8>>1]&1|c[e+16>>1]<<1,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==6){if(p=e,f=q(s[e+36>>2],s[e+32>>2],s[e+20>>2],s[e+40>>2]+12|0,s[e+40>>2]+16|0),s[p+4>>2]=f,s[e+4>>2]){s[e+44>>2]=s[e+4>>2];break n}t=s[e+40>>2],a[t+8|0]=a[e+19|0]&1|u[t+8|0]&254,t=s[e+40>>2],a[t+8|0]=a[t+8|0]&1|u[e+18|0]<<1,s[e+44>>2]=0;break n}s[e+44>>2]=1}if(T=e+48|0,s[m+20>>2]=s[e+44>>2],!s[m+20>>2]){s[m+40>>2]=s[m+40>>2]+20;break t}V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=s[m+20>>2];break e}if(s[m+16>>2]=0,d[m+32>>2]<3){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=1;break e}if(e=s[m+36>>2],t=u[e|0]|u[e+1|0]<<8,a[m+16|0]=t,a[m+17|0]=t>>>8,a[m+18|0]=u[e+2|0],s[m+36>>2]=s[m+36>>2]+3,s[m+32>>2]=s[m+32>>2]-3,!(s[m+16>>2]==1|u[m+27|0]!=1)){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=7;break e}if(e=s[m+40>>2],s[e>>2]=s[e>>2]&-268435441|(s[m+16>>2]&16777215)<<4,u[m+27|0]==3){if(s[m+16>>2]!=1){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=10;break e}if(a[m+15|0]=0,d[m+32>>2]<1){O(s[m+44>>2]),s[m+76>>2]=1;break e}a[m+15|0]=u[s[m+36>>2]],s[m+36>>2]=s[m+36>>2]+1,s[m+32>>2]=s[m+32>>2]-1;n:{if(u[m+15|0]<=4){a[s[m+40>>2]+4|0]=u[m+15|0];break n}a[s[m+40>>2]+4|0]=4}s[m+40>>2]=s[m+40>>2]+20;break t}if(p=m,f=G(m+36|0,m+32|0,m+14|0,m+13|0),s[p+8>>2]=f,s[m+8>>2]){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=s[m+8>>2];break e}if(u[m+27|0]==1){e=s[m+40>>2],a[e+4|0]=a[e+4|0]&1|u[m+13|0]<<1,s[m+40>>2]=s[m+40>>2]+20;break t}if(!u[m+27|0]){if(p=m,f=q(m+36|0,m+32|0,s[m+16>>2],s[m+40>>2]+8|0,s[m+40>>2]+12|0),s[p+4>>2]=f,s[m+4>>2]){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=s[m+4>>2];break e}e=s[m+40>>2],a[e+4|0]=a[m+14|0]&1|u[e+4|0]&254,e=s[m+40>>2],a[e+4|0]=a[e+4|0]&1|u[m+13|0]<<1,s[m+40>>2]=s[m+40>>2]+20}}s[m+28>>2]=s[m+28>>2]+1;continue}break}if(s[m+32>>2]){V(s[m+44>>2],s[m+48>>2]),s[m+76>>2]=1;break e}s[s[m+64>>2]>>2]=s[m+44>>2],s[s[m+60>>2]>>2]=s[m+48>>2],s[m+76>>2]=0}return T=m+80|0,s[m+76>>2]}function $(e){var t=0,n=0,r=0,o=0,a=0,i=0,l=0,u=0,c=0,d=0,m=0;c=8;e:{t:{if(e>>>0>4294967239)break t;for(;;){c=c>>>0>8?c:8,n=s[603],a=n,o=s[602],l=o,e=e>>>0>8?e+3&-4:8;n:{if(e>>>0<=127){i=(e>>>3|0)-1|0;break n}if(r=h(e),i=((e>>>29-r^4)-(r<<2)|0)+110|0,e>>>0<=4095)break n;r=((e>>>30-r^2)-(r<<1)|0)+71|0,i=r>>>0<63?r:63}if(t=i,r=t&31,(t&63)>>>0>=32?(t=0,n=n>>>r|0):(t=n>>>r|0,n=((1<<r)-1&n)<<32-r|l>>>r),r=t,n|t){for(;;){a=n,t=r;n:{if(t|n){o=t-1|0,u=o+1|0,l=o,o=n-1|0,l=(o|0)!=-1?u:l,o=h(n^o)+32|0,n=h(t^l),n=(n|0)==32?o:n,t=63-n|0,D=0-(n>>>0>63)|0;break n}D=0,t=64}o=t,t=o,n=t&31,(t&63)>>>0>=32?(t=0,l=r>>>n|0):(t=r>>>n|0,l=((1<<n)-1&r)<<32-n|a>>>n),r=t,i=o+i|0,a=i<<4,t=s[a+1384>>2],o=a+1376|0;n:{if((t|0)!=(o|0)){if(n=F(t,c,e),n)break t;n=s[t+4>>2],s[n+8>>2]=s[t+8>>2],s[s[t+8>>2]+4>>2]=n,s[t+8>>2]=o,n=a+1380|0,s[t+4>>2]=s[n>>2],s[n>>2]=t,s[s[t+4>>2]+8>>2]=t,i=i+1|0,n=(r&1)<<31|l>>>1,r=r>>>1|0;break n}d=s[603],t=i,u=t&63,n=u,a=n&31,n>>>0>=32?(n=0,o=-1>>>a|0):(n=-1>>>a|0,o=(1<<a)-1<<32-a|-1>>>a),o=o&-2,a=u&31,u>>>0>=32?(n=o<<a,u=0):(n=(1<<a)-1&o>>>32-a|n<<a,u=o<<a),a=n,o=0-t&63,n=o,t=n&31,n>>>0>=32?(n=-1<<t,t=0):(n=(1<<t)-1&-1>>>32-t|-1<<t,t=-1<<t),m=t&-2,t=o&31,o>>>0>=32?(o=0,t=n>>>t|0):(o=n>>>t|0,t=((1<<t)-1&n)<<32-t|m>>>t),n=t|u,D=a|o,s[602]=s[602]&n,s[603]=D&d,n=l^1}if(!(n|r))break}o=s[602],a=s[603]}n:{if(a|o){r=h(a),r=63-((r|0)==32?h(o)+32|0:r)<<4,t=r+1376|0,r=s[r+1384>>2];r:{if(!a&o>>>0<1073741824||(i=98,(t|0)==(r|0)))break r;for(;;){if(n=F(r,c,e),n)break t;if(r=s[r+8>>2],!i)break r;if(i=i-1|0,(t|0)==(r|0))break}}if(M(e+48|0))break n;if(!r|(t|0)==(r|0))break e;for(;;){if(n=F(r,c,e),n)break t;if(r=s[r+8>>2],(t|0)==(r|0))break}break e}if(!M(e+48|0))break e}if(n=0,e>>>0>4294967239)break t;for(r=c,t=0;;){if(i=t,r){r=r-1&r,t=t+1|0;continue}break}if(!(i>>>0<=1))break}}return n}return 0}function P(e,t,n,r,o,i,m){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,i=i|0,m=m|0;var p=0,_=0,f=0;p=T-32|0,T=p,l[p+26>>1]=e,s[p+20>>2]=t,s[p+16>>2]=n,a[p+15|0]=r,l[p+12>>1]=o,s[p+8>>2]=i,s[p+4>>2]=m;e:{if(!(!(a[p+15|0]&1)|c[p+12>>1]<=32767)){s[p+28>>2]=4;break e}t=s[p+20>>2],n=s[p+16>>2],r=s[p+8>>2],o=s[p+4>>2],i=a[p+15|0]&1,e=T+-64|0,T=e,s[e+56>>2]=p+26,s[e+52>>2]=t,s[e+48>>2]=n,s[e+44>>2]=r,s[e+40>>2]=o,a[e+39|0]=2,a[e+38|0]=13,s[e+32>>2]=p+12,a[e+31|0]=i,a[e+30|0]=2;t:{n:{if(!(!s[e+52>>2]|(!s[e+44>>2]|!s[e+40>>2]))&&d[e+48>>2]<=16777215)break n;s[e+60>>2]=5;break t}if(s[e+24>>2]=s[e+48>>2]+(u[e+39|0]+(u[e+30|0]+4|0)|0),_=e,f=$(s[e+24>>2]),s[_+20>>2]=f,!s[e+20>>2]){s[e+60>>2]=3;break t}if(s[e+16>>2]=s[e+20>>2],a[s[e+16>>2]]=u[e+38|0],s[e+16>>2]=s[e+16>>2]+1,ae(s[e+16>>2],s[e+56>>2],u[e+30|0]),s[e+16>>2]=u[e+30|0]+s[e+16>>2],s[e+12>>2]=u[e+39|0]+s[e+48>>2],d[e+12>>2]<d[e+48>>2]){O(s[e+20>>2]),s[e+60>>2]=9;break t}if(t=s[e+16>>2],n=u[e+12|0]|u[e+13|0]<<8,a[t|0]=n,a[t+1|0]=n>>>8,a[t+2|0]=u[e+14|0],s[e+16>>2]=s[e+16>>2]+3,a[e+31|0]&1)n:{if(u[e+38|0]==6){t=s[e+32>>2],a[t|0]=u[t|0]|128;break n}r:{if(u[e+38|0]==13){t=s[e+32>>2],l[t>>1]=c[t>>1]|32768;break r}O(s[e+20>>2]),s[e+60>>2]=1;break t}}ae(s[e+16>>2],s[e+32>>2],u[e+39|0]),s[e+16>>2]=u[e+39|0]+s[e+16>>2],ae(s[e+16>>2],s[e+52>>2],s[e+48>>2]),s[s[e+44>>2]>>2]=s[e+20>>2],s[s[e+40>>2]>>2]=s[e+24>>2],s[e+60>>2]=0}T=e- -64|0,s[p+28>>2]=s[e+60>>2]}return T=p+32|0,s[p+28>>2]}function N(e,t,n,r,o){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0;var i=0,c=0,m=0;i=T-32|0,T=i,l[i+30>>1]=e,s[i+24>>2]=t,s[i+20>>2]=n,s[i+16>>2]=r,s[i+12>>2]=o,t=s[i+24>>2],n=s[i+20>>2],r=s[i+16>>2],o=s[i+12>>2],e=T-48|0,T=e,s[e+40>>2]=i+30,s[e+36>>2]=t,s[e+32>>2]=n,s[e+28>>2]=r,s[e+24>>2]=o,a[e+23|0]=2,a[e+22|0]=15;e:{if(!(s[e+24>>2]&&s[e+28>>2])){s[e+44>>2]=5;break e}if(s[s[e+28>>2]>>2]=0,s[s[e+24>>2]>>2]=0,!(d[e+32>>2]<=16777215&&s[e+36>>2])){s[e+44>>2]=5;break e}if(s[e+16>>2]=s[e+32>>2]+(u[e+23|0]+4|0),c=e,m=$(s[e+16>>2]),s[c+12>>2]=m,!s[e+12>>2]){s[e+44>>2]=3;break e}s[e+8>>2]=s[e+12>>2],a[s[e+8>>2]]=u[e+22|0],s[e+8>>2]=s[e+8>>2]+1,ae(s[e+8>>2],s[e+40>>2],u[e+23|0]),s[e+8>>2]=u[e+23|0]+s[e+8>>2],t=s[e+8>>2],n=u[e+32|0]|u[e+33|0]<<8,a[t|0]=n,a[t+1|0]=n>>>8,a[t+2|0]=u[e+34|0],s[e+8>>2]=s[e+8>>2]+3,ae(s[e+8>>2],s[e+36>>2],s[e+32>>2]),s[e+8>>2]=s[e+32>>2]+s[e+8>>2],s[s[e+28>>2]>>2]=s[e+12>>2],s[s[e+24>>2]>>2]=s[e+16>>2],s[e+44>>2]=0}return T=e+48|0,T=i+32|0,s[e+44>>2]}function M(e){var t=0,n=0,r=0,o=0,i=0,l=0;r=s[343],n=e+3&-4,t=r+n|0;e:{t:{if(t>>>0<=r>>>0&&n||t>>>0>Re()<<16>>>0&&!(I(t|0)|0))break t;s[343]=t;break e}s[604]=48,r=-1}if((r|0)!=-1){n=e+r|0,t=n-16|0,s[t+12>>2]=16,s[t>>2]=16,e=s[600],e?l=s[e+8>>2]:l=0;e:{t:{if((l|0)==(r|0)){if(o=r-(s[r-4>>2]&-2)|0,i=s[o-4>>2],s[e+8>>2]=n,e=o-(i&-2)|0,n=-16,!(a[(e+s[e>>2]|0)-4|0]&1))break t;n=s[e+4>>2],s[n+8>>2]=s[e+8>>2],s[s[e+8>>2]+4>>2]=n,t=t-e|0,s[e>>2]=t;break e}s[r+12>>2]=16,s[r>>2]=16,s[r+8>>2]=n,s[r+4>>2]=e,s[600]=r,n=16}e=r+n|0,t=t-e|0,s[e>>2]=t}s[((t&-4)+e|0)-4>>2]=t|1,l=e,o=s[e>>2]-8|0;e:{if(o>>>0<=127){t=(o>>>3|0)-1|0;break e}if(i=h(o),t=((o>>>29-i^4)-(i<<2)|0)+110|0,o>>>0<=4095)break e;t=((o>>>30-i^2)-(i<<1)|0)+71|0,t=t>>>0<63?t:63}n=t<<4,s[l+4>>2]=n+1376,n=n+1384|0,s[e+8>>2]=s[n>>2],s[n>>2]=e,s[s[e+8>>2]+4>>2]=e,n=s[603],e=t&31,(t&63)>>>0>=32?(t=1<<e,e=0):(t=(1<<e)-1&1>>>32-e,e=1<<e),s[602]=e|s[602],s[603]=t|n}return(r|0)!=-1}function w(e,t,n,r){e=e|0,t=t|0,n=n|0,r=r|0;var o=0,i=0,d=0;o=T-16|0,T=o,l[o+10>>1]=e,l[o+8>>1]=t,s[o+4>>2]=n,s[o>>2]=r;e:{if(c[o+8>>1]>32767){s[o+12>>2]=4;break e}t=s[o+4>>2],n=s[o>>2],e=T-48|0,T=e,s[e+40>>2]=o+10,s[e+36>>2]=t,s[e+32>>2]=n,a[e+31|0]=2,a[e+30|0]=12,s[e+24>>2]=o+8,a[e+23|0]=2;t:{if(!(s[e+32>>2]&&s[e+36>>2])){s[e+44>>2]=5;break t}if(s[e+16>>2]=u[e+31|0]+(u[e+23|0]+4|0),i=e,d=$(s[e+16>>2]),s[i+12>>2]=d,!s[e+12>>2]){s[e+44>>2]=3;break t}s[e+8>>2]=s[e+12>>2],a[s[e+8>>2]]=u[e+30|0],s[e+8>>2]=s[e+8>>2]+1,ae(s[e+8>>2],s[e+40>>2],u[e+23|0]),s[e+8>>2]=u[e+23|0]+s[e+8>>2],s[e+4>>2]=u[e+31|0],t=s[e+8>>2],n=u[e+4|0]|u[e+5|0]<<8,a[t|0]=n,a[t+1|0]=n>>>8,a[t+2|0]=u[e+6|0],s[e+8>>2]=s[e+8>>2]+3,ae(s[e+8>>2],s[e+24>>2],u[e+31|0]),s[s[e+32>>2]>>2]=s[e+16>>2],s[s[e+36>>2]>>2]=s[e+12>>2],s[e+44>>2]=0}T=e+48|0,s[o+12>>2]=s[e+44>>2]}return T=o+16|0,s[o+12>>2]}function A(e,t,n){e=e|0,t=t|0,n=n|0;var r=0,o=0,a=0,i=0,l=0;a=T+-64|0,T=a,o=1;e:{if(j(e,t,0)||(o=0,!t))break e;r=T+-64|0,T=r,o=s[t>>2],i=s[o-4>>2],l=s[o-8>>2],s[r+20>>2]=0,s[r+16>>2]=1084,s[r+12>>2]=t,s[r+8>>2]=1132,o=0,ie(r+24|0,39),t=t+l|0;t:{if(j(i,1132,0)){s[r+56>>2]=1,Se[s[s[i>>2]+20>>2]](i,r+8|0,t,t,1,0),o=s[r+32>>2]==1?t:0;break t}Se[s[s[i>>2]+24>>2]](i,r+8|0,t,1,0);n:switch(s[r+44>>2]){case 0:o=s[r+48>>2]==1&&s[r+36>>2]==1&&s[r+40>>2]==1?s[r+28>>2]:0;break t;case 1:break n;default:break t}if(s[r+48>>2]|s[r+36>>2]!=1|s[r+40>>2]!=1&&s[r+32>>2]!=1)break t;o=s[r+24>>2]}if(T=r- -64|0,t=o,o=0,!t)break e;ie(a+8|4,52),s[a+56>>2]=1,s[a+20>>2]=-1,s[a+16>>2]=e,s[a+8>>2]=t,Se[s[s[t>>2]+28>>2]](t,a+8|0,s[n>>2],1),e=s[a+32>>2],(e|0)==1&&(s[n>>2]=s[a+24>>2]),o=(e|0)==1}return e=o,T=a- -64|0,e|0}function F(e,t,n){var r=0,o=0,a=0,i=0;if(r=e+4|0,o=(r+t|0)-1&0-t,t=s[e>>2],o+n>>>0<=(t+e|0)-4>>>0){a=s[e+4>>2],s[a+8>>2]=s[e+8>>2],s[s[e+8>>2]+4>>2]=a,(r|0)!=(o|0)&&(o=o-r|0,a=e-(s[e-4>>2]&-2)|0,r=o+s[a>>2]|0,s[a>>2]=r,s[(a+(r&-4)|0)-4>>2]=r,e=e+o|0,t=t-o|0,s[e>>2]=t);e:{if(n+24>>>0<=t>>>0){r=(e+n|0)+8|0,t=(t-n|0)-8|0,s[r>>2]=t,s[(r+(t&-4)|0)-4>>2]=t|1,i=r,a=s[r>>2]-8|0;t:{if(a>>>0<=127){o=(a>>>3|0)-1|0;break t}if(t=h(a),o=((a>>>29-t^4)-(t<<2)|0)+110|0,a>>>0<=4095)break t;t=((a>>>30-t^2)-(t<<1)|0)+71|0,o=t>>>0<63?t:63}t=o,o=t<<4,s[i+4>>2]=o+1376,o=o+1384|0,s[r+8>>2]=s[o>>2],s[o>>2]=r,s[s[r+8>>2]+4>>2]=r,o=s[603],r=t&31,(t&63)>>>0>=32?(t=1<<r,i=0):(t=(1<<r)-1&1>>>32-r,i=1<<r),s[602]=i|s[602],s[603]=t|o,t=n+8|0,s[e>>2]=t,s[((t&-4)+e|0)-4>>2]=t;break e}s[(e+t|0)-4>>2]=t}e=e+4|0}else e=0;return e}function O(e){var t=0,n=0,r=0,o=0,a=0;if(e){n=e-4|0,o=s[n>>2],r=o,t=n,a=s[e-8>>2],e=a&-2,(e|0)!=(a|0)&&(t=n-e|0,r=s[t+4>>2],s[r+8>>2]=s[t+8>>2],s[s[t+8>>2]+4>>2]=r,r=e+o|0),e=n+o|0,n=s[e>>2],(n|0)!=s[(e+n|0)-4>>2]&&(o=s[e+4>>2],s[o+8>>2]=s[e+8>>2],s[s[e+8>>2]+4>>2]=o,r=r+n|0),s[t>>2]=r,s[((r&-4)+t|0)-4>>2]=r|1,a=t,r=s[t>>2]-8|0;e:{if(r>>>0<=127){e=(r>>>3|0)-1|0;break e}if(o=h(r),e=((r>>>29-o^4)-(o<<2)|0)+110|0,r>>>0<=4095)break e;e=((r>>>30-o^2)-(o<<1)|0)+71|0,e=e>>>0<63?e:63}n=e<<4,s[a+4>>2]=n+1376,n=n+1384|0,s[t+8>>2]=s[n>>2],s[n>>2]=t,s[s[t+8>>2]+4>>2]=t,n=s[603],t=e&31,(e&63)>>>0>=32?(e=1<<t,t=0):(e=(1<<t)-1&1>>>32-t,t=1<<t),s[602]=t|s[602],s[603]=e|n}}function B(e,t,n){e=e|0,t=t|0,n=n|0;var r=0,o=0,i=0;r=T-48|0,T=r,s[r+40>>2]=e,s[r+36>>2]=t,s[r+32>>2]=n;e:{if(!(s[r+32>>2]&&s[r+36>>2])){s[r+44>>2]=5;break e}if(d[r+40>>2]>4){s[r+44>>2]=8;break e}if(s[r+28>>2]=5,o=r,i=$(s[r+28>>2]),s[o+24>>2]=i,!s[r+24>>2]){s[r+44>>2]=3;break e}s[r+20>>2]=s[r+24>>2],a[r+19|0]=3,a[s[r+20>>2]]=u[r+19|0],s[r+20>>2]=s[r+20>>2]+1,s[r+12>>2]=1,e=s[r+20>>2],t=u[r+12|0]|u[r+13|0]<<8,a[e|0]=t,a[e+1|0]=t>>>8,a[e+2|0]=u[r+14|0],s[r+20>>2]=s[r+20>>2]+3,a[r+11|0]=s[r+40>>2],a[s[r+20>>2]]=u[r+11|0],s[s[r+36>>2]>>2]=s[r+24>>2],s[s[r+32>>2]>>2]=s[r+28>>2],s[r+44>>2]=0}return T=r+48|0,s[r+44>>2]}function W(e,t,n,r,o){if(e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,j(e,s[t+8>>2],o)){se(t,n,r);return}e:{if(j(e,s[t>>2],o)){if(!(s[t+20>>2]!=(n|0)&&s[t+16>>2]!=(n|0))){if((r|0)!=1)break e;s[t+32>>2]=1;return}s[t+32>>2]=r;t:{if(s[t+44>>2]==4)break t;if(l[t+52>>1]=0,e=s[e+8>>2],Se[s[s[e>>2]+20>>2]](e,t,n,n,1,o),u[t+53|0]){if(s[t+44>>2]=3,!u[t+52|0])break t;break e}s[t+44>>2]=4}if(s[t+20>>2]=n,s[t+40>>2]=s[t+40>>2]+1,s[t+36>>2]!=1|s[t+24>>2]!=2)break e;a[t+54|0]=1;return}e=s[e+8>>2],Se[s[s[e>>2]+24>>2]](e,t,n,r,o)}}function q(e,t,n,r,o){var a=0;a=T-32|0,T=a,s[a+24>>2]=e,s[a+20>>2]=t,s[a+16>>2]=n,s[a+12>>2]=r,s[a+8>>2]=o;e:{if(d[a+16>>2]<1){s[a+28>>2]=9;break e}if(s[s[a+8>>2]>>2]=s[a+16>>2]-1,d[s[a+20>>2]>>2]<d[s[a+8>>2]>>2]){s[a+28>>2]=1;break e}if(e=$(s[s[a+8>>2]>>2]),s[s[a+12>>2]>>2]=e,!s[s[a+12>>2]>>2]){s[a+28>>2]=3;break e}ae(s[s[a+12>>2]>>2],s[s[a+24>>2]>>2],s[s[a+8>>2]>>2]),e=s[a+24>>2],s[e>>2]=s[s[a+8>>2]>>2]+s[e>>2],e=s[a+20>>2],s[e>>2]=s[e>>2]-s[s[a+8>>2]>>2],s[a+28>>2]=0}return T=a+32|0,s[a+28>>2]}function U(e,t,n){e=e|0,t=t|0,n=n|0;var r=0,o=0,i=0;r=T-32|0,T=r,l[r+26>>1]=e,s[r+20>>2]=t,s[r+16>>2]=n,s[s[r+16>>2]>>2]=3,o=r,i=$(s[s[r+16>>2]>>2]),s[o+12>>2]=i;e:{if(!s[r+12>>2]){s[r+28>>2]=3;break e}s[s[r+20>>2]>>2]=s[r+12>>2],a[r+11|0]=14,a[s[r+12>>2]]=u[r+11|0],s[r+12>>2]=s[r+12>>2]+1,e=s[r+12>>2],t=u[r+26|0]|u[r+27|0]<<8,a[e|0]=t,a[e+1|0]=t>>>8,s[r+28>>2]=0}return T=r+32|0,s[r+28>>2]}function V(e,t){var n=0;for(n=T-16|0,T=n,s[n+12>>2]=e,s[n+8>>2]=t,s[n+4>>2]=0;;){if(d[n+4>>2]<d[n+8>>2]){s[n>>2]=s[n+12>>2]+_(s[n+4>>2],20);e:{if(!(s[s[n>>2]>>2]&15)){O(s[s[n>>2]+8>>2]);break e}t:{if((s[s[n>>2]>>2]&15)==5){O(s[s[n>>2]+8>>2]);break t}(s[s[n>>2]>>2]&15)==6&&O(s[s[n>>2]+12>>2])}}s[n+4>>2]=s[n+4>>2]+1;continue}break}O(s[n+12>>2]),T=n+16|0}function H(e,t,n,r){a[e+53|0]=1;e:{if(s[e+4>>2]!=(n|0))break e;if(a[e+52|0]=1,n=s[e+16>>2],!n){if(s[e+36>>2]=1,s[e+24>>2]=r,s[e+16>>2]=t,(r|0)!=1|s[e+48>>2]!=1)break e;a[e+54|0]=1;return}if((t|0)==(n|0)){if(n=s[e+24>>2],(n|0)==2&&(s[e+24>>2]=r,n=r),s[e+48>>2]!=1|(n|0)!=1)break e;a[e+54|0]=1;return}a[e+54|0]=1,s[e+36>>2]=s[e+36>>2]+1}}function G(e,t,n,r){var o=0;o=T-32|0,s[o+24>>2]=e,s[o+20>>2]=t,s[o+16>>2]=n,s[o+12>>2]=r,a[o+11|0]=0;e:{if(d[s[o+20>>2]>>2]<1){s[o+28>>2]=1;break e}a[o+11|0]=u[s[s[o+24>>2]>>2]],e=s[o+24>>2],s[e>>2]=s[e>>2]+1,e=s[o+20>>2],s[e>>2]=s[e>>2]-1,a[s[o+16>>2]]=(u[o+11|0]&128)==128,a[s[o+12>>2]]=u[o+11|0]&127,s[o+28>>2]=0}return s[o+28>>2]}function z(e,t,n,r,o){if(e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,j(e,s[t+8>>2],o)){se(t,n,r);return}e:{if(!j(e,s[t>>2],o))break e;if(!(s[t+20>>2]!=(n|0)&&s[t+16>>2]!=(n|0))){if((r|0)!=1)break e;s[t+32>>2]=1;return}s[t+20>>2]=n,s[t+32>>2]=r,s[t+40>>2]=s[t+40>>2]+1,s[t+36>>2]!=1|s[t+24>>2]!=2||(a[t+54|0]=1),s[t+44>>2]=4}}function j(e,t,n){var r=0;if(!n)return s[e+4>>2]==s[t+4>>2];if((e|0)==(t|0))return 1;n=s[e+4>>2],e=u[n|0],t=s[t+4>>2],r=u[t|0];e:{if(!e|(r|0)!=(e|0))break e;for(;;){if(r=u[t+1|0],e=u[n+1|0],!e)break e;if(t=t+1|0,n=n+1|0,(e|0)!=(r|0))break}}return(e|0)==(r|0)}function K(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=9,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function Q(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=10,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function X(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=2,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function Y(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=4,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function J(e){var t=0;t=T-16|0,T=t,s[t+12>>2]=e,e=1;e:{if(ee(s[t+12>>2])&1||(e=1,s[t+12>>2]==15)||(e=1,s[t+12>>2]==13)||(e=1,s[t+12>>2]==12))break e;e=s[t+12>>2]==14}return T=t+16|0,e}function Z(e,t,n){var r=0;if(r=s[e+16>>2],!r){s[e+36>>2]=1,s[e+24>>2]=n,s[e+16>>2]=t;return}e:{if((t|0)==(r|0)){if(s[e+24>>2]!=2)break e;s[e+24>>2]=n;return}a[e+54|0]=1,s[e+24>>2]=2,s[e+36>>2]=s[e+36>>2]+1}}function ee(e){var t=0;t=T-16|0,s[t+12>>2]=e,e=1;e:{if(s[t+12>>2]==5||(e=1,s[t+12>>2]==6)||(e=1,s[t+12>>2]==7))break e;e=s[t+12>>2]==8}return e}function te(e,t,n,r,o,a){if(e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,a=a|0,j(e,s[t+8>>2],a)){H(t,n,r,o);return}e=s[e+8>>2],Se[s[s[e>>2]+20>>2]](e,t,n,r,o,a)}function ne(){for(var e=0,t=0,n=0;t=e<<4,n=t+1376|0,s[t+1380>>2]=n,s[t+1384>>2]=n,e=e+1|0,(e|0)!=64;);M(48)}function re(e,t,n,r){if(e=e|0,t=t|0,n=n|0,r=r|0,j(e,s[t+8>>2],0)){Z(t,n,r);return}e=s[e+8>>2],Se[s[s[e>>2]+28>>2]](e,t,n,r)}function oe(e,t,n,r,o,a){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,a=a|0,j(e,s[t+8>>2],a)&&H(t,n,r,o)}function ae(e,t,n){if(n)for(;a[e|0]=u[t|0],e=e+1|0,t=t+1|0,n=n-1|0,!!n;);}function ie(e,t){if(t)for(;a[e|0]=0,e=e+1|0,t=t-1|0,!!t;);}function le(e,t,n,r){e=e|0,t=t|0,n=n|0,r=r|0,j(e,s[t+8>>2],0)&&Z(t,n,r)}function se(e,t,n){s[e+28>>2]==1|s[e+4>>2]!=(t|0)||(s[e+28>>2]=n)}function ue(e,t){return e=e|0,t=t|0,_(t,20)+e|0}function ce(e){return e=e|0,c[e+8>>1]>>>1|0}function de(e){return e=e|0,l[e+8>>1]&1}function me(e){return e=e|0,s[e+12>>2]}function pe(e){return e=e|0,s[e>>2]&15}function _e(e){return e=e|0,s[e+16>>2]}function fe(e){return e=e|0,c[e+4>>1]}function ge(e){return e=e|0,s[e+8>>2]}function he(e){return e=e|0,u[e+4|0]}function ye(e){return e=e|0,e|0}function Ce(e){return $(e)}function be(e){e=e|0,O(e)}function ve(e){e=e|0}n=u,i(t);var Se=e([null,ye,be,ve,ve,A,oe,z,le,be,te,W,re]);function Re(){return o.byteLength/65536|0}function Le(e){e=e|0;var t=Re()|0,i=t+e|0;if(t<i&&i<65536){var f=new ArrayBuffer(_(i,65536)),g=new Int8Array(f);g.set(a),a=new Int8Array(f),l=new Int16Array(f),s=new Int32Array(f),u=new Uint8Array(f),c=new Uint16Array(f),d=new Uint32Array(f),m=new Float32Array(f),p=new Float64Array(f),o=f,r.buffer=o,n=u}return t}return{c:ne,d:Ce,e:be,f:X,g:Y,h:B,i:N,j:U,k:P,l:w,m:K,n:Q,o:x,p:pe,q:he,r:ue,s:fe,t:ge,u:me,v:me,w:_e,x:ce,y:de,z:ce,A:Se}}return l(t)})(he)},instantiate:function(t,n){return{then:function(n){var e=new S.Module(t);n({instance:new S.Instance(e)})}}},RuntimeError:Error};b=[],typeof S!="object"&&ne("no native wasm support detected");var R,L=!1,E;function k(e,t){e||ne("Assertion failed: "+t)}function I(e,t){return e%t>0&&(e+=t-e%t),e}var T,D,x,$,P,N,M,w,A;function F(e){T=e,t.HEAP8=D=new Int8Array(e),t.HEAP16=$=new Int16Array(e),t.HEAP32=N=new Int32Array(e),t.HEAPU8=x=new Uint8Array(e),t.HEAPU16=P=new Uint16Array(e),t.HEAPU32=M=new Uint32Array(e),t.HEAPF32=w=new Float32Array(e),t.HEAPF64=A=new Float64Array(e)}var O=t.INITIAL_MEMORY||2097152;t.wasmMemory?R=t.wasmMemory:R=new S.Memory({initial:O/65536,maximum:32768}),R&&(T=R.buffer),O=T.byteLength,F(T);var B,W=[],q=[],U=[],V=!1;function H(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)j(t.preRun.shift());ue(W)}function G(){V=!0,ue(q)}function z(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)Q(t.postRun.shift());ue(U)}function j(e){W.unshift(e)}function K(e){q.unshift(e)}function Q(e){U.unshift(e)}if((!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function(t,n){var e=t>>>16,r=t&65535,o=n>>>16,a=n&65535;return r*a+(e*a+r*o<<16)|0}),!Math.fround){var X=new Float32Array(1);Math.fround=function(e){return X[0]=e,X[0]}}Math.clz32||(Math.clz32=function(e){var t=32,n=e>>16;return n&&(t-=16,e=n),n=e>>8,n&&(t-=8,e=n),n=e>>4,n&&(t-=4,e=n),n=e>>2,n&&(t-=2,e=n),n=e>>1,n?t-2:t-e}),Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)});var Y=0,J=null,Z=null;function ee(e){Y++,t.monitorRunDependencies&&t.monitorRunDependencies(Y)}function te(e){if(Y--,t.monitorRunDependencies&&t.monitorRunDependencies(Y),Y==0&&(J!==null&&(clearInterval(J),J=null),Z)){var n=Z;Z=null,n()}}t.preloadedImages={},t.preloadedAudios={};function ne(e){t.onAbort&&t.onAbort(e),e+="",C(e),L=!0,E=1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var n=new S.RuntimeError(e);throw o(n),n}var re="data:application/octet-stream;base64,";function oe(e){return e.startsWith(re)}var ae="dgwcppbridge.wasm";oe(ae)||(ae=p(ae));function ie(e){try{if(e==ae&&b)return new Uint8Array(b);var t=ge(e);if(t)return t;if(g)return g(e);throw"both async and sync fetching of the wasm failed"}catch(e){ne(e)}}function le(){return!b&&(c||d)&&typeof fetch=="function"?fetch(ae,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ae+"'";return e.arrayBuffer()}).catch(function(){return ie(ae)}):n.resolve().then(function(){return ie(ae)})}function se(){var e={a:he};function n(e,n){var r=e.exports;t.asm=r,B=t.asm.A,K(t.asm.c),te("wasm-instantiate")}ee("wasm-instantiate");function r(e){n(e.instance)}function a(t){return le().then(function(t){var n=S.instantiate(t,e);return n}).then(t,function(e){C("failed to asynchronously prepare wasm: "+e),ne(e)})}function i(){return!b&&typeof S.instantiateStreaming=="function"&&!oe(ae)&&typeof fetch=="function"?fetch(ae,{credentials:"same-origin"}).then(function(t){var n=S.instantiateStreaming(t,e);return n.then(r,function(e){return C("wasm streaming compile failed: "+e),C("falling back to ArrayBuffer instantiation"),a(r)})}):a(r)}if(t.instantiateWasm)try{var l=t.instantiateWasm(e,n);return l}catch(e){return C("Module.instantiateWasm callback failed with error: "+e),!1}return i().catch(o),{}}function ue(e){for(;e.length>0;){var n=e.shift();if(typeof n=="function"){n(t);continue}var r=n.func;typeof r=="number"?n.arg===void 0?B.get(r)():B.get(r)(n.arg):r(n.arg===void 0?null:n.arg)}}function ce(e){try{return R.grow(e-T.byteLength+65535>>>16),F(R.buffer),1}catch(e){}}function de(e){var t=x.length;e=e>>>0;var n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var o=t*(1+.2/r);o=Math.min(o,e+100663296);var a=Math.min(n,I(Math.max(e,o),65536)),i=ce(a);if(i)return!0}return!1}var me=!1;function pe(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r>255&&(r&=255),t.push(String.fromCharCode(r))}return t.join("")}var _e=typeof atob=="function"?atob:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",r,o,a,i,l,s,u,c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do i=t.indexOf(e.charAt(c++)),l=t.indexOf(e.charAt(c++)),s=t.indexOf(e.charAt(c++)),u=t.indexOf(e.charAt(c++)),r=i<<2|l>>4,o=(l&15)<<4|s>>2,a=(s&3)<<6|u,n=n+String.fromCharCode(r),s!==64&&(n=n+String.fromCharCode(o)),u!==64&&(n=n+String.fromCharCode(a));while(c<e.length);return n};function fe(e){try{for(var t=_e(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}catch(e){throw new Error("Converting base64 string to bytes failed.")}}function ge(e){if(oe(e))return fe(e.slice(re.length))}var he={b:de,a:R},ye=se(),Ce=t.___wasm_call_ctors=function(){return(Ce=t.___wasm_call_ctors=t.asm.c).apply(null,arguments)},be=t.__malloc=function(){return(be=t.__malloc=t.asm.d).apply(null,arguments)},ve=t.__free=function(){return(ve=t.__free=t.asm.e).apply(null,arguments)},Se=t.__DgwCodecEncodeEmpty=function(){return(Se=t.__DgwCodecEncodeEmpty=t.asm.f).apply(null,arguments)},Re=t.__DgwCodecEncodeDeauth=function(){return(Re=t.__DgwCodecEncodeDeauth=t.asm.g).apply(null,arguments)},Le=t.__DgwCodecEncodeDrain=function(){return(Le=t.__DgwCodecEncodeDrain=t.asm.h).apply(null,arguments)},Ee=t.__DgwCodecEncodeStreamGroup_EstabStream=function(){return(Ee=t.__DgwCodecEncodeStreamGroup_EstabStream=t.asm.i).apply(null,arguments)},ke=t.__DgwCodecEncodeStreamGroup_EndOfData=function(){return(ke=t.__DgwCodecEncodeStreamGroup_EndOfData=t.asm.j).apply(null,arguments)},Ie=t.__DgwCodecEncodeStreamGroup_Data=function(){return(Ie=t.__DgwCodecEncodeStreamGroup_Data=t.asm.k).apply(null,arguments)},Te=t.__DgwCodecEncodeStreamGroup_Ack=function(){return(Te=t.__DgwCodecEncodeStreamGroup_Ack=t.asm.l).apply(null,arguments)},De=t.__DgwCodecEncodePing=function(){return(De=t.__DgwCodecEncodePing=t.asm.m).apply(null,arguments)},xe=t.__DgwCodecEncodePong=function(){return(xe=t.__DgwCodecEncodePong=t.asm.n).apply(null,arguments)},$e=t.__DgwCodecDecode=function(){return($e=t.__DgwCodecDecode=t.asm.o).apply(null,arguments)},Pe=t.__getFrameType=function(){return(Pe=t.__getFrameType=t.asm.p).apply(null,arguments)},Ne=t.__getDrainReasonFromDrainFrame=function(){return(Ne=t.__getDrainReasonFromDrainFrame=t.asm.q).apply(null,arguments)},Me=t.__getDGWFramePtr=function(){return(Me=t.__getDGWFramePtr=t.asm.r).apply(null,arguments)},we=t.__getStreamIdFromStreamGroupFrame=function(){return(we=t.__getStreamIdFromStreamGroupFrame=t.asm.s).apply(null,arguments)},Ae=t.__getEncodedParamsFromEstablishStreamFrame=function(){return(Ae=t.__getEncodedParamsFromEstablishStreamFrame=t.asm.t).apply(null,arguments)},Fe=t.__getEncodedParamsSizeFromEstablishStreamFrame=function(){return(Fe=t.__getEncodedParamsSizeFromEstablishStreamFrame=t.asm.u).apply(null,arguments)},Oe=t.__getDataFromGroupedStreamDataFrame=function(){return(Oe=t.__getDataFromGroupedStreamDataFrame=t.asm.v).apply(null,arguments)},Be=t.__getDataSizeFromGroupedStreamDataFrame=function(){return(Be=t.__getDataSizeFromGroupedStreamDataFrame=t.asm.w).apply(null,arguments)},We=t.__getAckIdFromGroupedStreamDataFrame=function(){return(We=t.__getAckIdFromGroupedStreamDataFrame=t.asm.x).apply(null,arguments)},qe=t.__getRequiresAckFromGroupedStreamDataFrame=function(){return(qe=t.__getRequiresAckFromGroupedStreamDataFrame=t.asm.y).apply(null,arguments)},Ue=t.__getAckIdFromGroupedStreamAckFrame=function(){return(Ue=t.__getAckIdFromGroupedStreamAckFrame=t.asm.z).apply(null,arguments)},Ve;Z=function e(){Ve||He(),Ve||(Z=e)};function He(e){if(e=e||l,Y>0||(H(),Y>0))return;function n(){Ve||(Ve=!0,t.calledRun=!0,!L&&(G(),r(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),z()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),n()},1)):n()}if(t.run=He,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return He(),t.ready})})();typeof i=="object"&&typeof a=="object"?a.exports=e:typeof define=="function"&&define.amd?define([],function(){return e}):typeof i=="object"&&(i.Module=e)}),null);
__d("DGWUtils",["Base64","DGWConstants","DGWCppBridge","DGWLoggingContext","Random","URI","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=4;function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=o("Random").random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}function c(e){var t=new TextDecoder,n=t.decode(e),o=r("Base64").encode(n),a=o.replace(/\+/gi,"-").replace(/\//gi,"_").replace(/=/gi,"");return a}var d=null,m=null;function p(){return m==null&&(m=Promise.resolve().then(function(){return r("DGWCppBridge")()}).then(function(e){d=e})),m}var _=(function(){function t(){}return t.initialize=async function(){return p()},t.constructConnectUrl=function(n){var t,a,i=n.appId,l=n.appVersion,s=n.authType,u=n.deviceId,d=n.dgwVersion,m=n.fbId,p=n.tier,_=n.loggingId,f=n.headers,g=n.endpoint,h=n.serviceId,y=n.regionHint,C=n.establishStreamFrame,b=n.trafficTracing,v=n.authToken,S=(t={},t[(a=o("DGWConstants")).HEADER_CONSTANTS.HEADER_APPID]=i,t[a.HEADER_CONSTANTS.HEADER_APPVERSION]=l,t[a.HEADER_CONSTANTS.HEADER_AUTHTYPE]=s,t[a.HEADER_CONSTANTS.HEADER_DGW_VERSION]=""+d,t[a.HEADER_CONSTANTS.HEADER_UUID]=m,t[a.HEADER_CONSTANTS.HEADER_TARGET_TIER]=p,t);C!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64]=c(C)),_!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_LOGGING_ID]=_),y!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_REGIONHINT]=y),u!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_DEVICE_ID]=u),b!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.TRAFFIC_TRACING]="debug:"+b),v!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_AUTHTOKEN]=v),Object.keys(f).forEach(function(e){var t=o("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+e;Object.prototype.hasOwnProperty.call(S,t)||(S[t]=f[e])});var R=new(e||(e=r("URI")))(g);return R.setQueryData(S),R.setPath(R.getPath()+"/"+h),R.toString().length>2e3&&(delete S[o("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64],R.setQueryData(S)),R.toStringRawQuery()},t})(),f=(function(){function e(e,t,n){this.$1=null,this.$2=e,this.$3=t,this.$4=n}e.initialize=async function(){return p()};var t=e.prototype;return t.malloc=function(t){try{var e=d.__malloc(t);if(e===0){var n;return(n=this.$2)==null||n.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","malloc returned 0"),-1}return e}catch(e){var a;return(a=this.$2)==null||a.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","exception during malloc",r("getErrorSafe")(e).message),-1}},t.free=function(t){d.__free(t)},t.append=function(t){if(this.$1==null){this.$1=t;return}var e=this.$1.length,n=new Uint8Array(e+t.length);n.set(this.$1,0),n.set(t,e),this.$1=n},t.processData=function(){var e=this;if(this.$1!=null){var t=this.$1.length,n=this.malloc(t);if(n!==-1){var r=d.HEAPU8.subarray(n,n+t);if(this.$1)for(var a=0;a<r.length;++a)r[a]=this.$1[a];var i=this.malloc(s*4);if(i!==-1){var l=i,u=l+s,c=u+s,m=c+s,p=d.__DgwCodecDecode(n,t,l,u,c,m);if(this.free(n),p!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var _;this.free(i),(_=this.$2)==null||_.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Codec Decode Failure","Failed to decode Frame(s). Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(p));return}var f=d.HEAPU32.subarray(m/s,m/s+1)[0];if(this.$1==null){this.free(i);return}var g=this.$1.length-f;if(this.$1&&this.$1.length>g){var h;this.$1=new Uint8Array(((h=this.$1)==null?void 0:h.subarray(g))||[])}else this.$1=null;for(var y=d.HEAPU32.subarray(u/s,u/s+1)[0],C=d.HEAPU32.subarray(l/s,l/s+1)[0],b=[],v=function(){var t=d.__getDGWFramePtr(C,S),n=d.__getFrameType(t);switch(n){case o("DGWConstants").DgwFrameType.DgwFrameType_Drain:{var r,a=d.__getDrainReasonFromDrainFrame(t),i=o("DGWConstants").drainReasonToDrainReasonString(a);(r=e.$2)==null||r.logEvent(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Received Drain Frame from server","DrainReason: "+i),b.push(function(){var t;return(t=e.$3)==null?void 0:t.receivedDrainSignal(i)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EstabStream:{var l=d.__getStreamIdFromStreamGroupFrame(t),s=d.__getEncodedParamsFromEstablishStreamFrame(t),u=new Uint8Array(d.HEAPU8.subarray(s,s+d.__getEncodedParamsSizeFromEstablishStreamFrame(t)));e.free(s),b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamEstablishStreamReceived(l,u)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Data:{var c=d.__getStreamIdFromStreamGroupFrame(t),m=d.__getDataFromGroupedStreamDataFrame(t),p=new Uint8Array(d.HEAPU8.subarray(m,m+d.__getDataSizeFromGroupedStreamDataFrame(t)));e.free(m);var _=d.__getRequiresAckFromGroupedStreamDataFrame(t)?d.__getAckIdFromGroupedStreamDataFrame(t):null;b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamDataReceived(c,p,_)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Ack:{var f=d.__getStreamIdFromStreamGroupFrame(t),g=d.__getAckIdFromGroupedStreamAckFrame(t);b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamAckReceived(f,g)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EndOfData:{var h=d.__getStreamIdFromStreamGroupFrame(t);b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamEndOfDataReceived(h)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_Ping:{b.push(function(){var t;return(t=e.$3)==null?void 0:t.onPingReceived()});break}case o("DGWConstants").DgwFrameType.DgwFrameType_Pong:{b.push(function(){var t;return(t=e.$3)==null?void 0:t.onPongReceived()});break}default:break}e.free(t)},S=0;S<y;++S)v();this.free(i);for(var R=0;R<b.length;R++)b[R]()}}}},t.encodeData=function(t,n,r,a){var e=this.malloc(t.length);if(e===-1)return null;for(var i=d.HEAPU8.subarray(e,e+t.length),l=0;l<i.length;++l)i[l]=t[l];var u=this.malloc(s*2),c=u,m=u+s,p=d.__DgwCodecEncodeStreamGroup_Data(a,e,i.length,n,r,c,m);if(this.free(e),p!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var _;return(_=this.$2)==null||_.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Data Frame encode failure","Failed to decode DGW Data Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(p)),null}var f=d.HEAPU32.subarray(c/s,c/s+1)[0],g=d.HEAPU32.subarray(m/s,m/s+1)[0],h=new Uint8Array(d.HEAPU8.subarray(f,f+g));return this.free(f),this.free(u),h},t.encodeAck=function(t,n){var e=this.malloc(s*2);if(e===-1)return null;var r=e,a=e+s,i=d.__DgwCodecEncodeStreamGroup_Ack(n,t,r,a);if(i!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var l;return(l=this.$2)==null||l.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"ACK Frame encode failure","Failed to encode ACK Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(i)),null}var u=d.HEAPU32.subarray(r/s,r/s+1)[0],c=d.HEAPU32.subarray(a/s,a/s+1)[0],m=new Uint8Array(d.HEAPU8.subarray(u,u+c));return this.free(u),this.free(e),m},t.encodeDrain=function(t){var e=this.malloc(s*2);if(e===-1)return null;var n=e,r=e+s,a=d.__DgwCodecEncodeDrain(t,n,r);if(a!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var i;return(i=this.$2)==null||i.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Drain Frame encode failure","Failed to encode Drain Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(a)),null}var l=d.HEAPU32.subarray(n/s,n/s+1)[0],u=d.HEAPU32.subarray(r/s,r/s+1)[0],c=new Uint8Array(d.HEAPU8.subarray(l,l+u));return this.free(l),this.free(e),c},t.encodeEstablishStream=function(t,n){var e=this.malloc(n.length);if(e===-1)return null;for(var r=d.HEAPU8.subarray(e,e+n.length),a=0;a<n.length;++a)r[a]=n[a];var i=this.malloc(s*2),l=i,u=i+s,c=d.__DgwCodecEncodeStreamGroup_EstabStream(t,e,n.length,l,u);if(this.free(e),c!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var m;return(m=this.$2)==null||m.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EstablishStream Frame encode failure","Failed to encode EstablishStream Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(c)+" for StreamId "+t),null}var p=d.HEAPU32.subarray(l/s,l/s+1)[0],_=d.HEAPU32.subarray(u/s,u/s+1)[0],f=new Uint8Array(d.HEAPU8.subarray(p,p+_));return this.free(p),this.free(i),f},t.encodeEndOfData=function(t){var e=this.malloc(s*2);if(e===-1)return null;var n=e,r=e+s,a=d.__DgwCodecEncodeStreamGroup_EndOfData(t,n,r);if(a!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var i;return(i=this.$2)==null||i.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EndOfData Frame encode failure","Failed to encode EndOfData Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(a)),null}var l=d.HEAPU32.subarray(n/s,n/s+1)[0],u=d.HEAPU32.subarray(r/s,r/s+1)[0],c=new Uint8Array(d.HEAPU8.subarray(l,l+u));return this.free(l),this.free(e),c},t.encodePing=function(){var e=this.malloc(s*2);if(e===-1)return null;var t=e,n=e+s,r=d.__DgwCodecEncodePing(t,n);if(r!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var a;return(a=this.$2)==null||a.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Ping Frame encode failure","Failed to encode Ping Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(r)),null}var i=d.HEAPU32.subarray(t/s,t/s+1)[0],l=d.HEAPU32.subarray(n/s,n/s+1)[0],u=new Uint8Array(d.HEAPU8.subarray(i,i+l));return this.free(i),this.free(e),u},t.encodePong=function(){if(this.$5!=null)return this.$5;var e=this.malloc(s*2);if(e===-1)return null;var t=e,n=e+s,r=d.__DgwCodecEncodePong(t,n);if(r!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var a;return(a=this.$2)==null||a.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Pong Frame encode failure","Failed to encode Pong Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(r)),null}var i=d.HEAPU32.subarray(t/s,t/s+1)[0],l=d.HEAPU32.subarray(n/s,n/s+1)[0],u=new Uint8Array(d.HEAPU8.subarray(i,i+l));return this.free(i),this.free(e),this.$5=u,u},e})();l.uuidv4=u,l.Uint8ArrayToBase64UrlStr=c,l.DGWUtils=_,l.DGWCodec=f}),98);
__d("DGWExponentialBackoff",[],(function(t,n,r,o,a,i){"use strict";var e={maxRetries:5,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},l=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.errors=n,r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));async function s(t,n){n===void 0&&(n=e);try{return await u(t,n)}catch(e){throw e.errors[e.errors.length-1]}}async function u(e,t){for(var n=0,r=[],o=t.baseRetryInterval,a=t.backoffFactor;n<=t.maxRetries;){try{var i=await e();return i}catch(e){r.push(e)}await c(o*Math.pow(a,n)),++n}throw new l("Max call count exceeded",r)}async function c(e){await new Promise(function(t){return window.setTimeout(t,e)})}i.callWithExponentialBackoff=s}),66);
__d("DGWGlobalLogger",["gkx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){var e=this;this.tabID=r("uuidv4")(),this.isTabClosed=!1,this.otherTabs=new Map,this.thisTab={realtime:0,lightspeed:0},this.broadcastChannel=this.$1("DGWGlobalLogger"),this.broadcastChannel.onmessage=function(t){var n=JSON.parse(String(t.data)),r=!e.otherTabs.has(n.key);n.event==="DELETE"?e.otherTabs.delete(n.key):n.event==="UPDATE"&&n.value!=null&&(e.otherTabs.set(n.key,n.value),r&&e.$2())}}var t=e.prototype;return t.$1=function(t){return window.BroadcastChannel!=null?new BroadcastChannel(t):{onmessage:function(t){},postMessage:function(t){}}},t.streamRequested=function(t){switch(t){case"realtime":this.thisTab.realtime++;break;case"lightspeed":this.thisTab.lightspeed++;break}this.$2()},t.streamClosed=function(t){switch(t){case"realtime":this.thisTab.realtime=Math.max(0,this.thisTab.realtime-1);break;case"lightspeed":this.thisTab.lightspeed=Math.max(0,this.thisTab.lightspeed-1);break}this.$2()},t.tabClosed=function(){if(!this.isTabClosed){this.isTabClosed=!0;var e={key:this.tabID,event:"DELETE"};this.broadcastChannel.postMessage(JSON.stringify(e))}},t.getGlobalState=function(){var e={realtime:this.thisTab.realtime,lightspeed:this.thisTab.lightspeed};return this.otherTabs.forEach(function(t){e.realtime+=t.realtime,e.lightspeed+=t.lightspeed}),e},t.$2=function(){var e={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.postMessage(JSON.stringify(e))},e})(),s=r("gkx")("4337")?new e:{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{realtime:-1,lightspeed:-1}}},u=function(){return s};l.getInstance=u}),98);
__d("DGWPinger",["DGWLoggingContext"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$1=e,this.$4=t,this.$5=n,this.$3=!1}var t=e.prototype;return t.$6=function(){var e=this;if(this.$3){var t;(t=o("DGWLoggingContext")).DGWLoggingContext.bumpODSKey(t.DGWLoggingComponent.PINGER,"timeout_fired.reset"),this.$3=!1,this.$4(),t.DGWLoggingContext.bumpODSKey(t.DGWLoggingComponent.PINGER,"timeout.newtimeout"),this.$2=window.setTimeout(function(){e.$6()},this.$1)}else o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"timeout_fired.disconnect"),this.$5()},t.reset=function(){var e=this;this.$3=!0,this.$2&&(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset"),window.clearTimeout(this.$2),this.$2=null),this.$1>0&&(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset.newtimeout"),this.$2=window.setTimeout(function(){e.$6()},this.$1))},t.cancel=function(){this.$2&&(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"canceled"),window.clearTimeout(this.$2),this.$2=null)},e})();l.DGWPinger=e}),98);
__d("DGWStreamGroupCallbacks",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({TRANSPORT_SERVER_INTERNAL_ERROR:0,TRANSPORT_ABNORMAL_CLOSURE:1,TRANSPORT_GOING_AWAY:2,TRANSPORT_UNKNOWN_ERROR:3,TRANSPORT_KEEPALIVE_TIMEOUT:4,TRANSPORT_UNAUTHORIZED:5,TRANSPORT_REJECTED:6,TRANSPORT_BAD_REQUEST:7,TRANSPORT_DGW_SERVER_ERROR:8,TRANSPORT_NORMAL_CLOSURE:9});function l(t){switch(t){case e.TRANSPORT_SERVER_INTERNAL_ERROR:return"TRANSPORT_SERVER_INTERNAL_ERROR";case e.TRANSPORT_ABNORMAL_CLOSURE:return"TRANSPORT_ABNORMAL_CLOSURE";case e.TRANSPORT_GOING_AWAY:return"TRANSPORT_GOING_AWAY";case e.TRANSPORT_UNKNOWN_ERROR:return"TRANSPORT_UNKNOWN_ERROR";case e.TRANSPORT_KEEPALIVE_TIMEOUT:return"TRANSPORT_KEEPALIVE_TIMEOUT";case e.TRANSPORT_UNAUTHORIZED:return"TRANSPORT_UNAUTHORIZED";case e.TRANSPORT_REJECTED:return"TRANSPORT_REJECTED";case e.TRANSPORT_BAD_REQUEST:return"TRANSPORT_BAD_REQUEST";case e.TRANSPORT_DGW_SERVER_ERROR:return"TRANSPORT_DGW_SERVER_ERROR";case e.TRANSPORT_NORMAL_CLOSURE:return"TRANSPORT_NORMAL_CLOSURE"}}function s(t){switch(t){case e.TRANSPORT_UNAUTHORIZED:return!1;default:return!0}}var u=(function(){function e(){}var t=e.prototype;return t.onStreamGroupError=function(){},t.onStreamGroupMustDrain=function(){},t.onStreamGroupTransportClose=function(){},e})();i.DGWStreamGroupError=e,i.dgwStreamGroupErrorToString=l,i.isRetryableError=s,i.NoOpDGWStreamGroupCallbacks=u}),66);
__d("DGWTransportEvents",["DGWLoggingContext","NetworkStatus"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$3=e}var t=e.prototype;return t.transportEstablished=function(t){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"open",t),this.$2=Date.now(),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_success")},t.transportPingSent=function(t){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Ping Frame Sent",t,!0)},t.transportPongReceived=function(t){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Pong Frame Received",t,!0)},t.transportEstablishmentPending=function(){this.$1=Date.now(),this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transportPending",null,!0),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_pending")},t.transportClosed=function(t,n,r){this.$4=Date.now(),t?(this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_graceful"),this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed gracefully",null,!0)):(this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_with_error"),this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed abnormally",n,r))},t.transportEstablishmentFailure=function(t){this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"WebSocket transport establishment failure","WebSocket close code: "+t.code+" reason: "+t.reason+" wasClean: "+String(t.wasClean)),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_failure")},t.streamEstablishmentTimeout=function(t,n,a){this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment timeout",t,"streamId:"+n+", onLine:"+String(r("NetworkStatus").isOnline()),!1,a),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_timeout")},t.streamEstablishmentPending=function(t,n){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment pending","streamId:"+t,!0,n),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_pending")},t.streamEstablishmentSuccess=function(t,n){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment success","streamId:"+t,!0,n),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_success")},t.transportError=function(t,n,r){this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,t,n,r)},t.receivedFrameForInactiveStream=function(t,n,r){this.$3.logWarn(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Frame received for inactive stream","frameType: "+t+", streamID: "+n,r)},t.ranOutOfStreamIds=function(t){this.$3.logWarn(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Hit max StreamId limit","Hit max StreamId limit",t)},e})();l.DGWTransportEvents=e}),98);
__d("DGWWebSocketTransport",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=new WebSocket(e);return t.binaryType="arraybuffer",t.onopen=function(){},t.onclose=function(){},t.onerror=function(){},t}i.getWebSocketConnection=e}),66);
__d("DGWStreamEvents",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t,n){this.$4=new Map,this.$5=new Map,this.$6=e,this.$1=t,n!=null&&(this.$8="streamId:"+n+"::")}var t=e.prototype;return t.dataSent=function(t,n,r){var e,o=n?"sendWithAckRequested":"sendWithoutAckRequested";this.$6.logEvent(this.$1,o,((e=this.$8)!=null?e:"")+"sendId:"+r+", payloadSize:"+t,!0),this.$4.set(r,{ackRequested:n,payloadSize:t,sendTimestamp:Date.now()})},t.ackReceived=function(t){var e;this.$6.logEvent(this.$1,"AckReceived",((e=this.$8)!=null?e:"")+"sendId:"+t,!0),this.$6.bumpODSKey(this.$1,"ack_received");var n=this.$4.get(t);n!=null&&(n.ackReceivedTimestamp=Date.now())},t.ackSent=function(t){var e;this.$6.bumpODSKey(this.$1,"ack_sent"),this.$6.logEvent(this.$1,"ACK sent",((e=this.$8)!=null?e:"")+"ackId:"+t,!0)},t.drainSent=function(t){var e;this.$6.logEvent(this.$1,"Drain sent",((e=this.$8)!=null?e:"")+"drainReason: "+t)},t.dataReceived=function(t,n,r){var e;this.$6.bumpODSKey(this.$1,"data_received"),this.$6.logEvent(this.$1,"Data received",((e=this.$8)!=null?e:"")+"sendId:"+(r!=null?r:"null")+", ackRequested:"+n.toString()+", payloadSize:"+t,!0),r!=null&&this.$5.set(r,{ackRequested:n,payloadSize:t,receiveTimestamp:Date.now()})},t.endOfDataReceived=function(){this.$6.bumpODSKey(this.$1,"end_of_data_received"),this.$6.logEvent(this.$1,"EndOfDataReceived",this.$8,!0)},t.endOfDataSent=function(){this.$6.bumpODSKey(this.$1,"end_of_data_sent"),this.$6.logEvent(this.$1,"EndOfDataSent",this.$8,!0)},t.streamClosed=function(t,n){this.$7=Date.now();var e=this.$9();if(t){var r;this.$6.bumpODSKey(this.$1,"stream_closed_gracefully"),this.$6.logEvent(this.$1,"Stream closed gracefully",""+((r=this.$8)!=null?r:"")+e)}else{var o;this.$6.bumpODSKey(this.$1,"stream_closed_with_error"),this.$6.logError(this.$1,"Stream closed abnormally",n,""+((o=this.$8)!=null?o:"")+e)}},t.connectionEstablishmentFailure=function(t){this.$6.logEvent(this.$1,"WebSocket connection establishment failure","WebSocket close code: "+t)},t.streamEstablishmentFailure=function(t,n){var e;this.$6.logError(this.$1,"Failed to establish DGW Stream","Last seen error: "+t.toString(),""+((e=this.$8)!=null?e:"")+n),this.$6.bumpODSKey(this.$1,"stream_establishment_failure")},t.error=function(t,n){var e={msg:n,state:this.$9()};this.$6.logError(this.$1,t,JSON.stringify(e),this.$8)},t.$9=function(){var e={currentNetworkCondition:window.navigator&&window.navigator.onLine===!0,establishRequestTimestamp:this.$2,establishedTimestamp:this.$3,streamClosedTimestamp:this.$7,sendHistory:JSON.stringify(Array.from(this.$4.entries())),receiveHistory:JSON.stringify(Array.from(this.$5.entries()))};return JSON.stringify(e)},e})();i.DGWStreamEvents=e}),66);
__d("GroupedStream",["DGWAckManager","DGWConstants","DGWLoggingContext","DGWStream","DGWStreamEvents","QuickPerformanceLogger","Random","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("qpl")._(701242292,"2919"),u=(function(){function t(t,n,a,i,l,u,c){this.$1=t,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=n,this.$7=a,this.$8=i,this.$2=u,this.$9=l,this.$10=new(o("DGWAckManager")).DGWAckManager(this.$9),this.$12=new(o("DGWStreamEvents")).DGWStreamEvents(this.$9,o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,this.$1),this.$11=0,this.$13=c,this.$14=Date.now()+(Math.round(o("Random").random()*1e4)+1e4),(e||(e=r("QuickPerformanceLogger"))).markerStart(s,this.$14)}var n=t.prototype;return n.send=async function(t,n){var e=this.$11++%o("DGWConstants").MAX_ACK_ID,r=this.$15(t,!0,e);if(!this.$16(r,!0,e))return!1;var a=await this.$10.waitForAck(e,n!=null?n:o("DGWConstants").DEFAULT_ACK_TIMEOUT_MS);return a},n.sendFrame=async function(t,n,r){var e=this.$11++%o("DGWConstants").MAX_ACK_ID,a=this.$15(n,!0,e);if(a==null)return!1;var i=new Uint8Array(t.length+a.length);if(i.set(t),i.set(a,t.length),!this.$16(i,!0,e))return!1;var l=await this.$10.waitForAck(e,r!=null?r:o("DGWConstants").DEFAULT_ACK_TIMEOUT_MS);return this.__markerPoint(l?"ack_recevied":"ack_timeout"),l||(this.__endMarker(3),Promise.reject(o("DGWStream").StreamError.ACK_TIMEOUT))},n.sendAndForget=function(t){var e=this.$15(t,!1,0);return this.$16(e,!1,0)},n.sendFrameAndForget=function(t,n){var e=this.$15(n,!1,0);if(e==null)return!1;var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),this.$16(r,!1,0)},n.close=function(){var e=this.$2.encodeEndOfData(this.$1);if(e==null){this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode EndOfData","streamId: "+this.$1);return}var t=this.$8.send(e);if(!t){this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send EndOfData","streamId: "+this.$1+". StreamGroupTransport not open during send");return}this.$12.endOfDataSent(),this.$5=!0,this.$4&&this.$17()},n.loggingContext=function(){return this.$9},n.__sendDrain=function(t){var e=o("DGWConstants").drainReasonToDrainReasonString(t);if(this.$5)return!1;var n=this.$2.encodeDrain(t);if(n==null)return!1;this.$12.drainSent(e);var r=this.$8.send(n);return r},n.__transportCloseHook=function(t){this.$13(),this.$10.clearPendingAcks(),t?(this.$12.error("Received StreamError","StreamErrorType: "+t),this.$6.onError(t)):this.$5&&this.$4?this.$17():(this.$12.streamClosed(!1,"Stream closed: ClosedLocally: "+this.$5.toString()+", EndOfDataReceived: "+this.$4.toString()),this.$6.onError(o("DGWStream").StreamError.PREMATURE_CLOSE))},n.$17=function(){this.$13(),this.$12.streamClosed(!0,"Graceful close"),this.$6.onClose(this)},n.__dataReceivedHook=function(t,n){this.$12.dataReceived(t.length,n!=null,n),n!=null&&this.$18(n),this.$6.onDataReceived(t)},n.__ackReceivedHook=function(t){this.$12.ackReceived(t),this.$10.handleAckReceived(t)},n.__drainReceivedHook=function(t){this.$3===!1&&(this.$6.onStreamMustDrain(this,t),this.$3=!0)},n.__endOfDataHook=function(){this.$12.endOfDataReceived(),this.$4=!0,this.$5?this.$17():this.$6.onServerHasFinishedSendingData(this)},n.__markerPoint=function(n){var t=this.$14;(e||(e=r("QuickPerformanceLogger"))).markerPoint(s,n,{instanceKey:t})},n.__markerAnnotate=function(n){var t=this.$14;(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(s,n,{instanceKey:t})},n.__endMarker=function(n){(e||(e=r("QuickPerformanceLogger"))).markerEnd(s,n,this.$14)},n.$15=function(t,n,r){return this.$2.encodeData(t,n,r,this.$1)},n.$16=function(t,n,r){if(this.__markerPoint("send_data_start"),this.$5)return this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","Stream closed locally"),!1;if(t==null)return!1;var e=this.$8.send(t);return e?(this.__markerPoint("send_data_end"),this.$12.dataSent(t.length,n,r),!0):(this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","ClosedLocally: "+this.$5.toString()),!1)},n.$18=function(t){var e=this.$2.encodeAck(t,this.$1);if(e==null)return this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode ACK","ackId: "+t),!1;var n=this.$8.send(e);return n?(this.$12.ackSent(t),!0):(this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send ACK","ackId: "+t),!1)},t})();l.GroupedStream=u}),98);
__d("StreamIdGenerator",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=65535,s=(function(){function t(){this.$1=new Set,this.$2=0}var n=t.prototype;return n.getNextStreamId=function(){var t;if(!this.streamIdAvailable())throw r("err")("Max number of stream IDs reached");if(this.$2<=e)return this.$2++;var n=(t=this.$1.values().next().value)!=null?t:0;return this.$1.delete(n),n},n.putBackStreamId=function(t){this.$1.add(t)},n.streamIdAvailable=function(){return this.$1.size>0||this.$2<=e},t})();l.MAX_STREAM_ID=e,l.StreamIdGeneratorImpl=s}),98);
__d("StreamGroupWebSocketTransport",["DGWConstants","DGWExponentialBackoff","DGWGlobalLogger","DGWLoggingContext","DGWPinger","DGWStream","DGWStreamGroupCallbacks","DGWTransportEvents","DGWUtils","DGWWebSocketTransport","GroupedStream","QuickPerformanceLogger","Random","Run","StreamIdGenerator","err","getErrorSafe","qex","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("qpl")._(701238781,"3037"),c=(e=r("qex")._("2103"))!=null?e:!1,d=function(t,n,r,a,i){var e=this;this.groupedStream=t,this.$1=window.setTimeout(function(){r(o("DGWStream").StreamError.ESTABLISHMENT_TIMEOUT)},a),this.handleEstablishFrameReceived=function(){window.clearTimeout(e.$1),n(e.groupedStream)},this.abortStream=function(e){i(),r(e)}},m=(function(){function e(t,n,a,i,l,c,d,m){var p=this,_;this.$18=-1,this.$15=l,this.$17=this.__getStreamIdGenerator(),this.$5=new Map,this.$6=new Map,this.$7=i.keepAliveMs,this.$8=!1,this.$9=!1,this.$3=!0,this.$4=!1,this.$20=!1,this.$21=!1,this.$13=a,this.$11=new TextEncoder,this.$12=new TextDecoder,this.$14=i;var f={onDataReceived:function(){},handleAckReceived:function(){},receivedDrainSignal:function(t){p.$9||(p.$9=!0,p.$15(),p.$13.transportClosed(!0,""),p.$14.streamGroupCallbacks.onStreamGroupMustDrain(t),p.$5.forEach(function(e){e.__drainReceivedHook(t)}),p.onClose(o("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE))},onGroupedStreamDataReceived:function(t,n,r){if(p.$5.has(t)){var e=p.$5.get(t);e==null||e.__dataReceivedHook(n,r)}else p.$13.receivedFrameForInactiveStream("Data",t,"sendAckID: "+(r!=null?r:"null"))},onGroupedStreamAckReceived:function(t,n){if(p.$5.has(t)){var e=p.$5.get(t);e==null||e.__ackReceivedHook(n)}else p.$13.receivedFrameForInactiveStream("ACK",t,"ackId: "+(n!=null?n:"null"))},onGroupedStreamEndOfDataReceived:function(t){if(p.$5.has(t)){var e=p.$5.get(t);e==null||e.__endOfDataHook()}else p.$13.receivedFrameForInactiveStream("EndOfData",t)},onGroupedStreamEstablishStreamReceived:function(t,n){if(p.$6.has(t)){var e=p.$6.get(t);p.$6.delete(t);var r=JSON.parse(p.$12.decode(n));(r.code===void 0||r.code!==200)&&(e==null||e.abortStream(o("DGWStream").StreamError.ABNORMAL_CLOSURE)),e==null||e.handleEstablishFrameReceived()}else p.$13.receivedFrameForInactiveStream("EstablishStream",t,"EstablishStream received for non-inflight stream")},onPingReceived:function(){var e=p.$2.encodePing();e!=null&&p.send(e)},onPongReceived:function(){p.$3=!1,p.$21||(p.$21=!0,p.__markerPoint("auth_success")),p.$13.transportPongReceived("readyState:"+p.$1.readyState+", bufferedAmount:"+p.$1.bufferedAmount)}};this.$2=new(o("DGWUtils")).DGWCodec(c,f,i.dgwVersion),this.$19=Date.now()+(Math.round(o("Random").random()*1e4)+1e4),this.$22=o("DGWGlobalLogger").getInstance(),this.$23=(_=i.connectTimeoutMs)!=null?_:2e4;var g=o("Run").onUnload(function(){p.$22.tabClosed()});if(i.enableFirstStreamOnWsHandshake){var h,y,C,b;if(d===void 0)throw r("err")("Missing grouped stream options");if(m===void 0)throw r("err")("Missing grouped stream callbacks");var v=this.$17.getNextStreamId(),S=this.createEstablishStreamFrame(v,d),R=o("DGWUtils").DGWUtils.constructConnectUrl({appId:i.appId,appVersion:i.appVersion,authType:i.authType,deviceId:(h=i.deviceId)!=null?h:void 0,dgwVersion:i.dgwVersion,fbId:i.fbId,tier:i.tier,loggingId:(y=i.loggingId)!=null?y:void 0,headers:e.__prefixAppHeaders(i.headers),endpoint:i.connectEndpoint,serviceId:i.serviceId,regionHint:(C=i.regionHint)!=null?C:void 0,establishStreamFrame:S,authToken:(b=i.authToken)!=null?b:void 0});if(this.$1=n(R),!R.includes(o("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64))return;var L=new(o("DGWLoggingContext")).DGWLoggingContext(this.$14.dgwVersion,d.loggingId,this.$14.serviceId,this.$14.fbId,this.$14.loggingId,d.disableFalcoLogging),E=this.__createGroupedStream(v,m,d,L);this.$16=this.waitForEstablishStream(v,E,d,function(e){p.$5.set(v,e)},function(){p.$17.putBackStreamId(v)})}else this.$1=n(t);this.$22.streamRequested(i.serviceId),(s||(s=r("QuickPerformanceLogger"))).markerStart(u,this.$19),this.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId}})}var t=e.prototype;return t.send=function(t){try{return this.$1.send(t),!0}catch(e){return this.$13.transportError("Failed to send over transport","readyState: "+this.$1.readyState,r("getErrorSafe")(e).message),!1}},t.close=function(){var e;this.$22.streamClosed(this.$14.serviceId),this.__markerPoint("teardown"),this.$8=!0,(e=this.$10)==null||e.cancel(),this.$1.onopen=function(e){},this.$1.onmessage=function(e){},this.$1.onerror=function(e){},this.$1.onclose=function(e){},this.$15(),this.$1.close()},t.onClose=function(t){var e;this.$22.streamClosed(this.$14.serviceId),this.__markerPoint("abort"),this.__markerAnnotate({int:{abort_code:t}}),this.$8=!0,(e=this.$10)==null||e.cancel(),this.$1.close(t)},t.abort=function(t,n,r,o,a){this.$8||(this.$22.streamClosed(this.$14.serviceId),this.$8=!0,this.$13.transportClosed(!1,o,a),this.$5.forEach(function(e){e.__transportCloseHook(n)}),this.$6.forEach(function(e){e.abortStream(n)}),this.$14.streamGroupCallbacks.onStreamGroupError(t),this.$5.clear(),this.$6.clear(),this.$15(),this.onClose(r))},e.getTransportWithInitialStream=async function(n,r,a,i,l,s){await o("DGWUtils").DGWCodec.initialize();var t=new(o("DGWTransportEvents")).DGWTransportEvents(i);t.transportEstablishmentPending();var u=function(){return e.$24("",a,t,l,i,n,r)};try{var c=await o("DGWExponentialBackoff").callWithExponentialBackoff(u,s),d=c.$16!=null?c.$16:c.establishGroupedStream(r,n,new(o("DGWLoggingContext")).DGWLoggingContext(a.dgwVersion,n.loggingId,a.serviceId,a.fbId,a.loggingId,n.disableFalcoLogging));return{transport:c,streamPromise:d}}catch(e){throw e}},e.getTransport_DEPRECATED=async function(n,r,a,i,l){await o("DGWUtils").DGWCodec.initialize();var t=new(o("DGWTransportEvents")).DGWTransportEvents(a);t.transportEstablishmentPending();var s=function(){return e.$24(n,r,t,i,a)};try{return await o("DGWExponentialBackoff").callWithExponentialBackoff(s,l)}catch(e){throw e}},t.establishGroupedStream=async function(t,n,o,a,i,l){var e=this;i===void 0&&(i=!0);var s=this.getStreamId(),u=this.createEstablishStreamFrame(s,n),c=this.__createGroupedStream(s,t,n,o);c.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId,streamId:n.streamTraceId}}),l!=null&&c.__markerAnnotate(l);var d=this.waitForEstablishStream(s,c,n,function(t){e.$5.set(s,t)},function(){e.$17.putBackStreamId(s)});if(a!=null){var m;c.__markerPoint("send_payload_start"),c.__markerAnnotate({int:{establishStreamPayloadSize:a.byteLength}});var p=(m=n.ackTimeoutMs)!=null?m:3e4,_=i?await c.sendFrame(u,a,p):c.sendFrameAndForget(u,a);return _?(c.__markerPoint("send_payload_end"),c.__endMarker(2),Promise.resolve(c)):(c.__endMarker(3),Promise.reject("Failed to send data when establishing stream"))}if(c.__markerPoint("send_establish_stream_start"),!this.send(u))throw c.__endMarker(3),r("err")("Websocket connection closed before stream established");c.__markerPoint("send_establish_stream_end");var f=await d;return c.__endMarker(2),f},e.__prefixAppHeaders=function(t){return Object.keys(t).reduce(function(e,n){return e[""+o("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+n]=t[n],e},{})},t.waitForEstablishStream=async function(t,n,r,o,a){var e=this;this.$13.streamEstablishmentPending(t,r.loggingId);try{var i=await new Promise(function(r,o){e.$6.set(t,new d(n,r,o,3e4,function(){e.streamEndCallback(t)}))});return o(n),this.$13.streamEstablishmentSuccess(t,r.loggingId),i}catch(e){throw a(),this.$13.streamEstablishmentTimeout("Stream establishment timeout. readyState: "+this.$1.readyState,t,r.loggingId),e}},e.$24=async function(n,r,a,i,l,s,u){var t=new e(n,o("DGWWebSocketTransport").getWebSocketConnection,a,r,i,l,s,u);t.$1.onmessage=e.$25(t),t.$1.onopen=function(){t.__markerPoint("onopen"),a.transportEstablished(n),t.$10!=null&&t.$10.cancel(),t.$7!=null&&(t.$10=new(o("DGWPinger")).DGWPinger(t.$7,function(){t.$26()},function(){t.abort(o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_KEEPALIVE_TIMEOUT,o("DGWStream").StreamError.KEEPALIVE_TIMEOUT,o("DGWConstants").WebsocketCloseCodes.KEEPALIVE_TIMEOUT,"Aborting transport because of keepalive timeout","readyState:"+t.$1.readyState+", bufferedAmount:"+t.$1.bufferedAmount)}))},t.$1.onerror=function(){t.__markerPoint("onerror"),t.$13.transportError("onerror","readyState: "+t.$1.readyState)},t.$1.onclose=e.$27(t);var c=await e.getTransportPromise(t);return c},e.getTransportPromise=async function(t){var e,n=new Promise(function(n,r){e=window.setTimeout(function(){t.$15(),t.$13.transportClosed(!1,"TIMEOUT"),t.__markerPoint("connect_timeout"),t.close(),r(o("DGWStream").StreamError.TRANSPORT_ESTABLISHMENT_TIMEOUT)},t.$23)}),r=new Promise(function(e,n){var r=t.$1.onerror,a=t.$1.onmessage,i=t.$1.onclose;t.$1.onerror=function(){r(),t.close(),c||n(o("DGWStream").StreamError.ESTABLISHMENT_ERROR)},t.$1.onclose=function(e){i(e),e.code===o("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED?n(o("DGWStream").StreamError.UNAUTHORIZED):n(e.code+":"+e.reason)},t.$1.onmessage=function(n){a(n),t.$3||(t.__markerPoint("connect_success"),e(t))}});try{return await Promise.race([r,n])}finally{e!=null&&window.clearTimeout(e)}},e.$25=function(t){return function(e){var n;if(t.$20||(t.$20=!0,t.__markerPoint("onmessage")),(n=t.$10)==null||n.reset(),!(e.data instanceof ArrayBuffer)){t.$13.transportError("Incorrect Data Protocol","Received "+typeof e.data+" instead of ArrayBuffer");return}t.$2.append(new Uint8Array(e.data)),t.$2.processData()}},e.$27=function(t){return function(e){var n,r=t.$22.getGlobalState();if(t.__markerPoint("onclose"),t.__markerAnnotate({string:{reason:e.reason},int:{code:e.code,realtimeWebSockets:r.realtime,lightspeedWebSockets:r.lightspeed}}),t.__endMarker(e.code===o("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE?2:3),(n=t.$10)==null||n.cancel(),!(t.$8===!0||t.$4)){if(t.$22.streamClosed(t.$14.serviceId),t.$8=!0,t.$3===!0){t.$13.transportEstablishmentFailure(e),t.$5.clear(),t.$15();return}if(t.$15(),t.$3=!0,e.code!==o("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE){t.$13.transportClosed(!1,"Websocket connection failure with code: "+e.code+" reason: "+e.reason+" wasClean: "+String(e.wasClean));var a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR,i=o("DGWStream").StreamError.UNKNOWN_ERROR;switch(e.code){case o("DGWConstants").WebsocketCloseCodes.NORMAL_CLOSURE:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_NORMAL_CLOSURE,i=o("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case o("DGWConstants").WebsocketCloseCodes.ABNORMAL_CLOSURE:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_ABNORMAL_CLOSURE,i=o("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case o("DGWConstants").WebsocketCloseCodes.SERVER_INTERNAL_ERROR:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR,i=o("DGWStream").StreamError.SERVER_INTERNAL_ERROR;break;case o("DGWConstants").WebsocketCloseCodes.GOING_AWAY:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_GOING_AWAY,i=o("DGWStream").StreamError.GOING_AWAY;break;case o("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNAUTHORIZED,i=o("DGWStream").StreamError.UNAUTHORIZED;break;case o("DGWConstants").WebsocketCloseCodes.REJECTED:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_REJECTED,i=o("DGWStream").StreamError.REJECTED;break;case o("DGWConstants").WebsocketCloseCodes.BAD_REQUEST:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_BAD_REQUEST,i=o("DGWStream").StreamError.BAD_REQUEST;break;case o("DGWConstants").WebsocketCloseCodes.DGW_SERVER_ERROR:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR,i=o("DGWStream").StreamError.DGW_SERVER_ERROR,a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_DGW_SERVER_ERROR;break;default:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR,i=o("DGWStream").StreamError.UNKNOWN_ERROR;break}t.$14.streamGroupCallbacks.onStreamGroupError(a),t.$5.forEach(function(e){e.__transportCloseHook(i)}),t.$6.forEach(function(e){e.abortStream(i)})}else t.$13.transportClosed(!0,""),t.$14.streamGroupCallbacks.onStreamGroupTransportClose(),t.$5.forEach(function(e){e.__transportCloseHook()}),t.$6.forEach(function(e){e.abortStream(o("DGWStream").StreamError.TRANSPORT_CLOSED_BEFORE_STREAM_INIT)});t.$5.clear(),t.$6.clear()}}},t.$26=function(){var e=this.$2.encodePing();if(e==null)throw r("err")("Failed to encode Ping Frame");var t=this.send(e);this.$18=this.$1.bufferedAmount,this.$13.transportPingSent("readyState:"+this.$1.readyState+", bufferedAmount:"+this.$18+", payloadSize:"+(e==null?void 0:e.byteLength)+", sent:"+String(t))},t.isClosedLocally=function(){return this.$3||this.$8||this.$4},t.streamEndCallback=function(t){this.$5.delete(t),this.$6.delete(t),this.$17.putBackStreamId(t)},t.canCreateGroupedStream=function(){return this.$17.streamIdAvailable()},t.createEstablishStreamFrame=function(n,a){var t=e.__prefixAppHeaders(a.groupedStreamHeaders);a.streamTraceId!=null&&(t[o("DGWConstants").HEADER_CONSTANTS.HEADER_STREAM_TRACE_ID]=a.streamTraceId);var i=this.$2.encodeEstablishStream(n,new Uint8Array(this.$11.encode(JSON.stringify(t))));if(i==null)throw this.$17.putBackStreamId(n),r("err")("Failed to encode EstablishStreamFrame");return i},t.getStreamId=function(){try{return this.$17.getNextStreamId()}catch(e){throw this.$13.ranOutOfStreamIds("inFlightGroupedStreamSize: "+this.$6.size+" groupedStreamSize: "+this.$5.size),e}},t.__createGroupedStream=function(t,n,r,a){var e=this;return new(o("GroupedStream")).GroupedStream(t,n,r,this,a,this.$2,function(){e.streamEndCallback(t)})},t.__getStreamIdGenerator=function(){return new(o("StreamIdGenerator")).StreamIdGeneratorImpl},t.__markerPoint=function(t){var e=this.$19;(s||(s=r("QuickPerformanceLogger"))).markerPoint(u,t,{instanceKey:e})},t.__markerAnnotate=function(t){var e=this.$19;(s||(s=r("QuickPerformanceLogger"))).markerAnnotate(u,t,{instanceKey:e})},t.__endMarker=function(t){(s||(s=r("QuickPerformanceLogger"))).markerEnd(u,t,this.$19)},e})();l.StreamGroupWebSocketTransport=m}),98);
__d("StreamGroup",["DGWConstants","DGWLoggingContext","DGWUtils","StreamGroupWebSocketTransport","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e={maxRetries:r("justknobx")._("2595"),baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},s=(function(){function t(e,t,n,r,a,i,l,s,u){var c,d,m,p,_,f,g,h,y;this.$2=u,this.$1=u.getNewStreamGroupId();var C=(c=l.overrideUrl)!=null?c:a;this.$5=null,this.$3={appId:e,appVersion:t,authType:(d=l.authType)!=null?d:n,deviceId:l.deviceId,dgwVersion:r,headers:l.streamGroupAppHeaders,tier:(m=l.serviceTier)!=null?m:o("DGWConstants").DEFAULT_SERVICE_TIER,connectEndpoint:C,fbId:i,loggingId:l.loggingId,serviceId:l.serviceId,streamGroupCallbacks:s,keepAliveMs:l.keepAliveMs,regionHint:l.regionHint,enableFirstStreamOnWsHandshake:!1,authToken:l.authToken,connectTimeoutMs:l.connectTimeoutMs},this.$4=l,this.streamGroupLoggingContext=new(o("DGWLoggingContext")).DGWLoggingContext(this.$3.dgwVersion,null,this.$3.serviceId,this.$3.fbId,this.$4.loggingId,!1,(p=l.verboseLoggingEnabled)!=null?p:!1),this.$6=o("DGWUtils").DGWUtils.constructConnectUrl({appId:this.$3.appId,appVersion:this.$3.appVersion,authType:this.$3.authType,deviceId:(_=this.$3.deviceId)!=null?_:void 0,dgwVersion:this.$3.dgwVersion,fbId:this.$3.fbId,headers:babelHelpers.extends({},this.$3.headers),loggingId:(f=this.$3.loggingId)!=null?f:void 0,tier:this.$3.tier,serviceId:this.$3.serviceId,endpoint:this.$3.connectEndpoint,regionHint:(g=this.$3.regionHint)!=null?g:void 0,trafficTracing:(h=this.$4.trafficTracing)!=null?h:void 0,authToken:(y=this.$4.authToken)!=null?y:void 0})}var n=t.prototype;return n.initTransport=async function(){var e=this,t={maxRetries:0,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};this.$5=this.$5||o("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){e.$2.removeStreamGroupAndTransport(e.$1)},t);var n;try{n=await this.$5,this.$5=null}catch(e){throw this.$5=null,e}return this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,n),n},n.establishStream=async function(n,r,a,i,l){var t=this;if(this.$2.containsStreamGroup(this.$1)===!1)if(this.streamGroupLoggingContext.logEvent(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"createTransportWhenEstablishStream"),this.$3.enableFirstStreamOnWsHandshake){var u=await o("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransportWithInitialStream(n,r,this.$3,this.streamGroupLoggingContext,function(){t.$2.removeStreamGroupAndTransport(t.$1)},e);return this.$2.setStreamGroupAndTransport(this.$1,u.transport),u.streamPromise}else{this.$5=this.$5||o("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){t.$2.removeStreamGroupAndTransport(t.$1)},e);var s;try{s=await this.$5,this.$5=null}catch(e){throw this.$5=null,e}this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,s)}return this.establishStreamWithTransport(n,r,a,i,l)},n.establishStreamWithTransport=async function(t,n,r,a,i){var e,l=t.loggingId;this.streamGroupLoggingContext.logEvent(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Establishing Grouped Stream","initialData:"+String(r!=null),!0,l);var s=await this.$2.getStreamGroupTransport(this.$1).establishGroupedStream(n,t,new(o("DGWLoggingContext")).DGWLoggingContext(this.$3.dgwVersion,l,this.$3.serviceId,this.$3.fbId,this.$3.loggingId,t.disableFalcoLogging,(e=t.verboseLoggingEnabled)!=null?e:!1),r,a,i);return s},n.canCreateGroupedStream=function(){var e=!0;if(this.$2.containsStreamGroup(this.$1)!==!1){var t=this.$2.getStreamGroupTransport(this.$1);e=t.canCreateGroupedStream()}return o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,e?"can_create":"cannot_create"),e},n.close=function(){if(this.$2.containsStreamGroup(this.$1)){var e=this.$2.getStreamGroupTransport(this.$1);e.close()}},t})();l.StreamGroup=s}),98);
__d("StreamGroupRegistry",["Random","err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=new Map,this.$2=new Set}var t=e.prototype;return t.setStreamGroupAndTransport=function(t,n){this.$1.set(t,n)},t.containsStreamGroup=function(t){return this.$1.has(t)},t.removeStreamGroupAndTransport=function(t){this.$1.delete(t)},t.getStreamGroupTransport=function(t){var e=this.$1.get(t);if(e==null)throw r("err")("No stream group transport");return e},t.getNewStreamGroupId=function(){for(var e=o("Random").uint32();this.$2.has(e);)e=o("Random").uint32();return this.$2.add(e),e},e})();l.StreamGroupRegistry=e}),98);
__d("RawDGWClient",["CurrentUser","DGWAuth","DGWLoggingContext","DGWStream","StreamGroup","StreamGroupRegistry","isFastRefreshEnabledForCurrentDomain"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=e.appId,n=e.appVersion,r=e.authType,a=e.dgwVersion,i=e.endpoint,l=e.fbId,s=e.authToken,u=e.isUserLoggedIn;this.$1=t,this.$2=n,this.$3=r,this.$5=a,this.$6=i,this.$7=l,this.$8=new(o("StreamGroupRegistry")).StreamGroupRegistry,this.$4=s,this.$9=u}var t=e.prototype;return t.createStreamGroup=function(t,n){var e,r;this.handleUserChecks((e=n.authType)!=null?e:this.$3);var a=(r=n.authToken)!=null?r:this.$4;return a!=null&&this.$3===o("DGWAuth").DGWAuth.GUEST&&(n.authToken=a),new(o("StreamGroup")).StreamGroup(this.$1,this.$2,this.$3,this.$5,this.$6,this.$7,n,t,this.$8)},t.handleUserChecks=function(t){var e=this.$9!=null?this.$9:r("CurrentUser").isLoggedInNow();if(!e&&o("DGWAuth").fromDGWAuthToString(t)!=="GUEST"&&!r("isFastRefreshEnabledForCurrentDomain")())throw o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.RAW_CLIENT,"unauthenticated"),o("DGWStream").StreamError.UNAUTHENTICATED},e})();l.RawDGWClient=e}),98);
__d("DGWClient",["DGWAuth","DGWEnvUtil","DGWWebConfig","RawDGWClient","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("RawDGWClient")).RawDGWClient({appId:r("DGWWebConfig").appId,appVersion:r("DGWWebConfig").appVersion,authType:o("DGWAuth").fromStringToDGWAuth((e=r("DGWEnvUtil")).getDGWAuthType()),dgwVersion:e.getDGWVersion(),endpoint:e.getDGWEndpoint(),fbId:r("DGWWebConfig").fbId,authToken:e.getDGWAuthToken()});function u(){if(r("DGWEnvUtil").isDGWEnvCompatible())return s;throw r("err")("unsupported_environment_retry_with_mqtt")}l.default=u}),98);/*FB_PKG_DELIM*/
__d("BroadcastChat.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"5 5 25 25",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{fillRule:"evenodd",d:"M18 28.07c6.393 0 11-4.467 11-10.57v-.002C29 11.396 24.393 7 18 7S7 11.396 7 17.498v.002c0 2.091.414 3.98 1.383 5.562.458.747.564 1.664.29 2.5l-.727 2.411c-.2.614.373 1.188.964.986l3.668-1.126a4.261 4.261 0 0 1 2.39-.09c.952.233 1.966.328 3.032.328zm0-8.27a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm4.31-5.888a.75.75 0 0 1 1.06.008l.176.179a5.293 5.293 0 0 1 0 7.402l-.175.178a.75.75 0 0 1-1.061.01l-.357-.351a.75.75 0 0 1-.008-1.061l.175-.178a3.293 3.293 0 0 0 0-4.598l-.175-.178a.75.75 0 0 1 .008-1.06l.357-.351zm-8.255 1.411a.75.75 0 0 0-.008-1.06l-.357-.351a.75.75 0 0 0-1.06.008l-.176.179a5.293 5.293 0 0 0 0 7.402l.175.178a.75.75 0 0 0 1.061.01l.357-.351a.75.75 0 0 0 .008-1.061l-.175-.178a3.293 3.293 0 0 1 0-4.598l.175-.178z",clipRule:"evenodd"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("GroupsCometGlobalChatCreationDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9578991145469240"}),null);
__d("GroupsCometGlobalChatCreationDialogQuery$Parameters",["GroupsCometGlobalChatCreationDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("GroupsCometGlobalChatCreationDialogQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometGlobalChatCreationDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("GroupsCometGlobalChatCreationDialog.entrypoint",["GroupsCometGlobalChatCreationDialogQuery$Parameters","JSResourceForInteraction","WebPixelRatio"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{queryReference:{parameters:r("GroupsCometGlobalChatCreationDialogQuery$Parameters"),variables:{scale:o("WebPixelRatio").get()}}}}},root:r("JSResourceForInteraction")("GroupsCometGlobalChatCreationDialog.react").__setRef("GroupsCometGlobalChatCreationDialog.entrypoint")};l.default=e}),98);
__d("LSInsertRankingContacts",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("limit",e[0]),r[1]=t.createArray(),r[5]=(r[1].push("search_contacts"),r[1]),r[2]=t.i64.of_float(Date.now()),r[5]=(r[1].push(t.i64.to_string(r[2])),r[1]),r[3]=t.toJSON(r[1]),r[4]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),r[3],t.i64.cast([0,452]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSSearchInsertRankingContactsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSInsertRankingContactsStoredProcedure",["LSInsertRankingContacts","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSInsertRankingContacts"),a.limit);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LsUniversalSearchDataSource",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({LOCAL_BLENDED:0,SERVER_ENTITIES_NAMED_DSQ1:1,SERVER_ENTITIES_NAMED_DSQ2:2}),l=e;i.default=l}),66);
__d("LsUniversalSearchThreadType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({ARMADILLO:0,TINCAN:1,OPEN_THREAD:2}),l=e;i.default=l}),66);
__d("MWChatSearchTypeheadActionButtonViewItem.react",["CometTypeaheadViewItem.react","FDSSkittleIcon.react","MWXText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(11),n=e.entry,a=e.icon,i=e.onHighlightEntry,l=e.onPressEntry,u=e.title,c;t[0]!==a?(c=s.jsx(r("FDSSkittleIcon.react"),{color:"gray",icon:a,size:36}),t[0]=a,t[1]=c):c=t[1];var d=c,m;t[2]===Symbol.for("react.memo_cache_sentinel")?(m={className:"x3ct3a4 xexx8yu x1icxu4v x18d9i69 x25sj25"},t[2]=m):m=t[2];var p;t[3]!==u?(p=s.jsx(r("MWXText.react"),{type:"body3",children:u}),t[3]=u,t[4]=p):p=t[4];var _;return t[5]!==n||t[6]!==d||t[7]!==i||t[8]!==l||t[9]!==p?(_=s.jsx("div",babelHelpers.extends({},m,{role:"listbox",children:s.jsx(r("CometTypeaheadViewItem.react"),{entry:n,isActive:!1,itemStartContent:d,onHighlightEntry:i,onPressEntry:l,role:"option",children:p})})),t[5]=n,t[6]=d,t[7]=i,t[8]=l,t[9]=p,t[10]=_):_=t[10],_}l.default=u}),98);
__d("MWCreateBroadcastChannelDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="10056616957724259"}),null);
__d("MWCreateBroadcastChannelDialogQuery$Parameters",["MWCreateBroadcastChannelDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWCreateBroadcastChannelDialogQuery_facebookRelayOperation"),metadata:{},name:"MWCreateBroadcastChannelDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWQuickPromotionCreateBroadcastChannelNuxQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="23896442089962141"}),null);
__d("MWQuickPromotionCreateBroadcastChannelNuxQuery$Parameters",["MWQuickPromotionCreateBroadcastChannelNuxQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWQuickPromotionCreateBroadcastChannelNuxQuery_facebookRelayOperation"),metadata:{},name:"MWQuickPromotionCreateBroadcastChannelNuxQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWQuickPromotionCreateBroadcastChannelNux.entrypoint",["JSResourceForInteraction","MWQuickPromotionCreateBroadcastChannelNuxQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{broadcastChannelQueryRef:{parameters:r("MWQuickPromotionCreateBroadcastChannelNuxQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("MWQuickPromotionCreateBroadcastChannelNux.react").__setRef("MWQuickPromotionCreateBroadcastChannelNux.entrypoint")},s=e;l.default=s}),98);
__d("MWCreateBroadcastChannelDialog.entrypoint",["JSResourceForInteraction","MWCreateBroadcastChannelDialogQuery$Parameters","MWQuickPromotionCreateBroadcastChannelNux.entrypoint","NestedRelayEntryPointBuilderUtils"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{entryPoints:{nuxEntryPoint:o("NestedRelayEntryPointBuilderUtils").NestedRelayEntryPoint({entryPoint:r("MWQuickPromotionCreateBroadcastChannelNux.entrypoint"),entryPointParams:{}})},queries:{queryReference:{parameters:r("MWCreateBroadcastChannelDialogQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("MWCreateBroadcastChannelDialog.react").__setRef("MWCreateBroadcastChannelDialog.entrypoint")};l.default=e}),98);
__d("MWChatSearchTypeaheadCreateBroadcastChannelActionButtonViewItem.react",["fbt","BroadcastChannelQPL","BroadcastChat.svg.react","MWChatSearchTypeheadActionButtonViewItem.react","MWCreateBroadcastChannelDialog.entrypoint","MWLogBroadcastChannelFalcoEvent","emptyFunction","react","react-compiler-runtime","useBroadcastChannelImpressionLogger","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(){var e=o("react-compiler-runtime").c(9),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s._(/*BTDS*/"Create channel"),e[0]=t):t=e[0];var n=t,a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a={},e[1]=a):a=e[1];var i=r("useMWXEntryPointDialog")(r("MWCreateBroadcastChannelDialog.entrypoint"),a),l=i[0],c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c={clientExtras:{entry_point:"public_chats:omnipicker"},event:161,parentSurface:7,source:20,surface:4},e[2]=c):c=e[2];var m=r("useBroadcastChannelImpressionLogger")(c),p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p={key:"newBroadcastChannel",label:"New Broadcast Channel",type:"entry"},e[3]=p):p=e[3];var _;e[4]!==l?(_=u.jsx(r("MWChatSearchTypeheadActionButtonViewItem.react"),{entry:p,icon:r("BroadcastChat.svg.react"),onHighlightEntry:r("emptyFunction"),onPressEntry:function(){o("BroadcastChannelQPL").logCreateBroadcastChannelQPLStart("public_chats:omnipicker"),o("MWLogBroadcastChannelFalcoEvent").logBroadcastChannelFalcoEvent({clientExtras:{entry_point:"public_chats:omnipicker"},event:95,parentSurface:7,source:20,surface:4}),l({},d)},title:n}),e[4]=l,e[5]=_):_=e[5];var f;return e[6]!==m||e[7]!==_?(f=u.jsx("div",{ref:m,children:_}),e[6]=m,e[7]=_,e[8]=f):f=e[8],f}function d(){}l.default=c}),226);
__d("MessengerGroup.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 26 19",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M13 10c-2.13 0-3.96-1.5-3.96-4.75C9.04 2.6 10.71.83 13 .83c2.3 0 3.96 1.77 3.96 4.42C16.96 8.51 15.13 10 13 10zm6.62 8.33c.57 0 .88-.5.88-1.1 0-3.08-3.47-5.56-7.5-5.56-4.03 0-7.5 2.48-7.5 5.55 0 .62.3 1.11.88 1.11h13.24zm2.55-7.5c-1.57 0-2.92-1.08-2.92-3.45 0-1.93 1.23-3.21 2.92-3.21s2.91 1.28 2.91 3.21c0 2.37-1.34 3.45-2.91 3.45zm.81 6.67a.83.83 0 0 1-.83-.72l-.01-.11a6.3 6.3 0 0 0-1.7-3.65c-.2-.22-.14-.57.14-.67a4.95 4.95 0 0 1 1.59-.27c1.66 0 3.33.84 3.33 2.5 0 2.92-2.08 2.92-2.08 2.92h-.44zM.92 7.38c0 2.37 1.34 3.45 2.91 3.45s2.92-1.08 2.92-3.45c0-1.93-1.23-3.21-2.92-3.21S.92 5.45.92 7.38zm2.1 10.12h-.44S.5 17.5.5 14.58c0-1.66 1.67-2.5 3.33-2.5.54 0 1.08.1 1.6.27.27.1.33.45.13.67a6.3 6.3 0 0 0-1.7 3.65l-.01.1a.83.83 0 0 1-.83.73z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("useMWLoggerEntrypoint",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=r("gkx")("23433"),n=null;return e!==void 0&&(e==="Inbox"?n=t?"messengerdotcom":"fb_groups:comet_www_inbox":e==="ChatTab"?n="fb_groups:comet_www_chat":e==="FullscreenChat"&&(n="fb_groups:comet_www_fullscreen_chat")),n}l.default=e}),98);
__d("MWChatSearchTypeaheadCreateCommunityChatActionButtonViewItem.react",["fbt","$InternalEnum","GroupsCometChatsEngagementLogger","GroupsCometGlobalChatCreationDialog.entrypoint","LSThreadAttributionStore","MWChatSearchTypeheadActionButtonViewItem.react","MWLSThreadDisplayContext","MessengerGroup.svg.react","emptyFunction","react","react-compiler-runtime","useGroupsCometChatsEngagementImpressionLogger","useMWLoggerEntrypoint","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=n("$InternalEnum")({CHAT_HEAD:"bottom_chat_create",JEWEL:"top_chat_create"});function d(){var e=o("react-compiler-runtime").c(14),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={},e[0]=t):t=e[0];var n=r("useMWXEntryPointDialog")(r("GroupsCometGlobalChatCreationDialog.entrypoint"),t),a=n[0],i=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),l=r("useMWLoggerEntrypoint")(i),d=o("LSThreadAttributionStore").getSourceForNewThread(),p=d==="chatheadsNewMessage"?c.CHAT_HEAD:d==="jewelNewMessage"?c.JEWEL:null,_=l!=null?l:"",f;e[1]!==_?(f={client_extras:{entry_point:_,origin:p!=null?p:""},event:"community_chat_button_impression",surface:"chat_creation_template_list"},e[1]=_,e[2]=f):f=e[2];var g=r("useGroupsCometChatsEngagementImpressionLogger")(f),h;e[3]===Symbol.for("react.memo_cache_sentinel")?(h={key:"newCommunityChat",label:"New Community Chat",type:"entry"},e[3]=h):h=e[3];var y;e[4]!==i||e[5]!==l||e[6]!==a?(y=function(){a({entrypoint:l!=null?l:void 0,shouldCloseComposeTab:i==="ChatTab",shouldGoToMessenger:i==="Inbox"},m),o("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{entry_point:l!=null?l:"",origin:p!=null?p:""},event:"create_cc_button_clicked",source:"create_cc_button",surface:"chat_creation_template_list"})},e[4]=i,e[5]=l,e[6]=a,e[7]=y):y=e[7];var C;e[8]===Symbol.for("react.memo_cache_sentinel")?(C=s._(/*BTDS*/"Create community chat"),e[8]=C):C=e[8];var b;e[9]!==y?(b=u.jsx(r("MWChatSearchTypeheadActionButtonViewItem.react"),{entry:h,icon:r("MessengerGroup.svg.react"),onHighlightEntry:r("emptyFunction"),onPressEntry:y,title:C}),e[9]=y,e[10]=b):b=e[10];var v;return e[11]!==g||e[12]!==b?(v=u.jsx("div",{ref:g,children:b}),e[11]=g,e[12]=b,e[13]=v):v=e[13],v}function m(){}l.default=d}),226);
__d("MWCMLightSpeedChatTabActionViewItems.react",["BaseDivider.react","MWChatSearchTypeaheadCreateBroadcastChannelActionButtonViewItem.react","MWChatSearchTypeaheadCreateCommunityChatActionButtonViewItem.react","MWPActor.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={divider:{marginTop:"x1xmf6yo",marginInlineEnd:"x1ys307a",marginBottom:"x1e56ztr",marginInlineStart:"xyqm7xq",$$css:!0}};function c(){var e=o("react-compiler-runtime").c(2),t=r("gkx")("4710"),n=r("gkx")("24048"),a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=o("MWPActor.react").isPromode(),e[0]=a):a=e[0];var i=a,l=n||i,c=!t||l,d=i||n,m;return e[1]===Symbol.for("react.memo_cache_sentinel")?(m=c?s.jsxs(s.Fragment,{children:[!t&&s.jsx(r("MWChatSearchTypeaheadCreateCommunityChatActionButtonViewItem.react"),{}),d&&s.jsx(r("MWChatSearchTypeaheadCreateBroadcastChannelActionButtonViewItem.react"),{}),s.jsx(r("BaseDivider.react"),{xstyle:u.divider})]}):null,e[1]=m):m=e[1],m}l.default=c}),98);
__d("MWChatSearchFetchCCRecommendations",["fbt","I64","LSIntEnum","LSMessagingThreadTypeUtil","MNetContactItemType","MWChatTemporarySearchResult","ReQL"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["communityId","contextLine","score","scoreType","secondaryThreadPictureUrl","secondaryThreadPictureUrlFallback","threadKey","threadName","threadPictureUrl","threadPictureUrlFallback","threadType"],u,c,d=3;async function m(e,t){return(u||(u=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(15))?[]:_(await p(e,d))}async function p(e,t){var n=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.cm_search_nullstate_metadata).filter(function(e){return(u||(u=o("I64"))).equal(e.threadType,(c||(c=o("LSIntEnum"))).ofNumber(18))}));return n.sort(function(e,t){var n=e.score,r=t.score;return n===r?0:n>r?1:-1}).slice(0,t)}function _(t){return t.map(function(t,n){var a,i,l=t.communityId,d=t.contextLine,m=t.score,p=t.scoreType,_=t.secondaryThreadPictureUrl,f=t.secondaryThreadPictureUrlFallback,g=t.threadKey,h=t.threadName,y=t.threadPictureUrl,C=t.threadPictureUrlFallback,b=t.threadType,v=babelHelpers.objectWithoutPropertiesLoose(t,e),S={contactId:g,contactType:(c||(c=o("LSIntEnum"))).ofNumber(r("MNetContactItemType").COMMUNITY_MESSAGING_THREAD_FOR_CC_SECTION),score:m,scoreIndex:(u||(u=o("I64"))).of_int32(n),scoreType:p};return{communityId:l!=null?(u||(u=o("I64"))).to_string(l):"",displayName:h,id:u.to_string(g),imageUrl:(a=y!=null?y:_)!=null?a:"",isAiBot:u.equal(b,c.ofNumber(201)),isContact:o("LSMessagingThreadTypeUtil").isOneToOne(b),isDisappearingModeSettingOn:!1,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(b),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,isVerified:!1,rankingScore:S,resultType:o("MWChatTemporarySearchResult").getResultType(c.ofNumber(13)),searchSource:"server",secondaryImageUrl:(i=_!=null?_:f)!=null?i:"",section:s._(/*BTDS*/"Your channels").toString(),subtext:d!=null?d:"",threadKey:g,threadType:b}})}l.fetchCCs=m,l.mapToSearchResults=_}),226);
__d("MWChatSearchFetchGenAIBotRecommendations",["I64","LSContactViewerRelationship","LSIntEnum","LSMessagingThreadTypeUtil","MNetContactItemType","MNetRankType","MWChatSearchResultType","MWChatTemporarySearchResultUtils","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=3;async function c(t,n){return(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(15))?[]:m(await d(t,u))}async function d(e,t){var n=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.ai_bot_search_metadata));return n.sort(function(e,t){var n=e.score,r=t.score;return n===r?0:n>r?1:-1}).slice(0,t)}function m(t){return t.map(function(t,n){var a=t.botId,i=t.contactViewerRelationship,l=t.contextLine,u=t.displayName,c=t.displayPictureUrl,d=t.score,m={contactId:a,contactType:(s||(s=o("LSIntEnum"))).ofNumber(r("MNetContactItemType").BOT),score:d,scoreIndex:(e||(e=o("I64"))).of_int32(n),scoreType:s.ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE)};return{displayName:u,id:e.to_string(a),imageUrl:c!=null?c:"",isAiBot:!0,isContact:!0,isDisappearingModeSettingOn:!1,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(a),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,isVerified:!1,isViewerUnconnected:e.equal(i,s.ofNumber(r("LSContactViewerRelationship").NOT_CONTACT)),rankingScore:m,resultType:r("MWChatSearchResultType").AI_BOT,searchSource:"server",secondaryImageUrl:"",section:o("MWChatTemporarySearchResultUtils").getSectionHeaderForAIBot(),subtext:l!=null?l:"",threadKey:a,threadType:e.of_int32(201)}})}l.fetchGenAIBots=c,l.mapToSearchResults=m}),98);
__d("MWPOfllineOpenMiniSearchSingleton",["MWPMiniSearch"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWPMiniSearch").createMiniSearchSingleton(function(){return{storeFields:["category"]}}),s=e;l.default=s}),98);
__d("MWPSearchOfflineOpenConversations",["MWPOfllineOpenMiniSearchSingleton"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("MWPOfllineOpenMiniSearchSingleton").getInstance().search(e)}function s(e){r("MWPOfllineOpenMiniSearchSingleton").getInstance().add(e)}function u(e){r("MWPOfllineOpenMiniSearchSingleton").getInstance().remove(e)}l.search=e,l.add=s,l.remove=u}),98);
__d("MWPSearchOfflineSearchTypes",[],(function(t,n,r,o,a,i){"use strict";var e="Contact",l="ThreadName",s="ThreadParticipant",u={Contact:e,ThreadName:l,ThreadParticipant:s};i.MWPSearchType=u}),66);
__d("MWSearchQPLLogger",["MAWLoggerUtils","QPLUserFlow","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e={hasStarted:!1,instanceKey:o("MAWLoggerUtils").getInstanceKey(),query:null,sessionInstanceId:null},s=r("qpl")._(25301700,"2966");function u(){e.hasStarted=!1,e.query=null}function c(t){var n,a=t.queryString,i=t.sessionInstanceId,l=t.surface;return e.query!=null&&a===""||(e.hasStarted&&d(),e.instanceKey=o("MAWLoggerUtils").getInstanceKey(),e.hasStarted=!0,e.query=a!=null?a:"",e.sessionInstanceId=i,r("QPLUserFlow").start(s,{instanceKey:e.instanceKey}),p({annotations:{int:{query_length:(n=a==null?void 0:a.length)!=null?n:0},string:{surface:l}}})),e.instanceKey}function d(t){e.hasStarted&&(r("QPLUserFlow").endCancel(s,{annotations:{string:{end_action:t!=null?t:"unknown"}},instanceKey:e.instanceKey}),u())}function m(t){var n=t.annotations,o=t.point;e.hasStarted&&(r("QPLUserFlow").addPoint(s,o,{instanceKey:e.instanceKey}),n!=null&&r("QPLUserFlow").addAnnotations(s,n,{instanceKey:e.instanceKey}))}function p(t){var n=t.annotations;e.hasStarted&&r("QPLUserFlow").addAnnotations(s,n,{instanceKey:e.instanceKey})}function _(t){var n=t.queryString,o=t.renderIndex,a=t.sessionInstanceId,i=t.source;e.hasStarted&&a===e.sessionInstanceId&&n===e.query&&r("QPLUserFlow").addPoint(s,"render_search_result_"+o,{data:{int:{render_index:o},string:{source:i!=null?i:"unknown"}},instanceKey:e.instanceKey})}function f(){e.hasStarted&&(r("QPLUserFlow").endSuccess(s,{instanceKey:e.instanceKey}),u())}l.qplStart=c,l.qplCancel=d,l.qplAddPoint=m,l.qplAddAnnotations=p,l.renderSearchResult=_,l.qplSuccess=f}),98);
__d("MWPSearchOfflineOpenConversationsUtils",["I64","LSAuthorityLevel","LSContactBitOffset","LSContactBlockedByViewerStatus","LSInitSyncCompleteSubscription","LSIntEnum","LSMessagingThreadTypeUtil","MNetRankType","MWChatSearchResultType","MWChatTemporarySearchResult","MWPSearchOfflineOpenConversations","MWPSearchOfflineSearchTypes","MWSearchQPLLogger","MWSearchThreadUtils","ReQL","gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("justknobx")._("5018");function c(t,n){return"p__"+(e||(e=o("I64"))).to_string(t)+"__"+e.to_string(n)}function d(e,t){if(o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"offline_search_start"}),f.contents==null)return o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{string:{offline_search_end_reason:"initial_index_not_started"}},point:"offline_search_end"}),Promise.resolve([]);var n=f.contents,a=o("MWPSearchOfflineOpenConversations").search(e).filter(function(e){return g(e,t)!==!0});return r("gkx")("6792")===!0?m(n,a,e):o("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(n,(s||(s=o("LSIntEnum"))).ofNumber(7)).then(function(){return m(n,a,e)})}async function m(t,n,r){var a=_(await Promise.all(n.map(function(n){var a=n.category.type;if(a==null)return Promise.resolve();switch(a){case o("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadParticipant:{var i=h(n.id);if(i!=null){var l=i[0];return v(t,(e||(e=o("I64"))).to_string(l),n.terms)}else return Promise.resolve()}case o("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadName:return v(t,n.id,n.terms);case o("MWPSearchOfflineSearchTypes").MWPSearchType.Contact:return y(t,n.id,n.terms,r)}}))),i=p(a.filter(Boolean));return o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"offline_search_end"}),i}function p(e){var t=e.filter(function(e){return e.resultType!==r("MWChatSearchResultType").GROUP}).sort(R),n=e.filter(function(e){return e.resultType===r("MWChatSearchResultType").GROUP}).sort(R),o=t.concat(n);return o}function _(e){if(!u)return e;var t=[],n=new Set;for(var r of e)r&&!n.has(r.id)&&(n.add(r.id),t.push(r));return t}var f={contents:void 0};function g(e,t){if(t)return!1;var n=e.category;return(n==null?void 0:n.type)!=="Contact"}function h(t){var n=t.split("__");if(n.length===3)return[(e||(e=o("I64"))).of_string(n[1]),e.of_string(n[2])]}async function y(t,n,a,i,l){l===void 0&&(l="offline");var u=await Promise.all([o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.contacts).getKeyRange((e||(e=o("I64"))).of_string(n))),o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.ig_contact_info).getKeyRange(e.of_string(n))),o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.ranking_scores).getKeyRange(e.of_string(n),(s||(s=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH)))]),c=u[0],d=u[1],m=u[2];if(!(c==null||C(c,i,l)))return o("MWChatTemporarySearchResult").fromContact(m!=null?m:void 0,void 0,c,d!=null?d:void 0,l,a,i)}function C(t,n,a){var i=o("LSContactBitOffset").hasWithDefault(66,t,!1);return t.isMemorialized===!0||(e||(e=o("I64"))).equal(t.contactViewerRelationship,(e||(e=o("I64"))).one)&&a!=="null_state_recent"||!(e||(e=o("I64"))).equal(t.blockedByViewerStatus,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED))||i&&b(t.name,n)}function b(e,t,n){n===void 0&&(n=.7);var r=e.trim().toLowerCase(),o=t.trim().toLowerCase(),a=!r.startsWith(o)||o.length/r.length<n;return a}async function v(t,n,r){var a,i=await Promise.all([(a=o("ReQL")).firstExnAsync(a.fromTableAscending(t.tables._user_info).map(function(e){return e.facebookUserId})),a.firstAsync(a.leftJoin(a.fromTableAscending(t.tables.threads).getKeyRange((e||(e=o("I64"))).of_string(n)).filter(function(e){return!S(e)}),o("ReQL").fromTableAscending(t.tables.ig_thread_info).getKeyRange(e.of_string(n))))]),l=i[0],s=i[1];if(s==null)return Promise.resolve();var u=s[0],c=s[1],d=await Promise.all([o("MWSearchThreadUtils").getThreadPics(u,l,t),o("MWSearchThreadUtils").getThreadParticipants(u,t)]),m=d[0],p=d[1],_={contactId:e.zero,contactType:e.zero,score:e.to_float(u.lastActivityTimestampMs),scoreIndex:e.zero,scoreType:e.zero};return o("MWChatTemporarySearchResult").fromThread(u,"offline",l,m[0],m[1],p,_,r,c)}function S(t){return t.folderName!=="inbox"||o("LSMessagingThreadTypeUtil").isChannelPreview(t.threadType)||o("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType)&&o("LSMessagingThreadTypeUtil").isOneToOne(t.threadType)&&(e||(e=o("I64"))).equal(t.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC))}function R(e,t){var n=e.rankingScore,r=n!=null?n.score:0,o=t.rankingScore,a=o!=null?o.score:0;return a>r?1:a<r?-1:0}l.getGroupParticipantKey=c,l.search=d,l.searchHelper=m,l.db=f,l.mapContact=y,l.mapThread=v}),98);
__d("MWChatSearchResultTypeMapping",["MWChatSearchResultType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case r("MWChatSearchResultType").GROUP:return 3;case r("MWChatSearchResultType").MESSAGE:return 5;case r("MWChatSearchResultType").PAGE:return 4;case r("MWChatSearchResultType").USER:return 1;case r("MWChatSearchResultType").AI_BOT:return 16}}l.mapMWChatSearchResultTypeToLSSearchType=e}),98);
__d("MWRecentSearchesStorage",["FBLogger","LSIntEnum","MWChatSearchResultTypeMapping","MWSearchStandardResultTypeMappings","WATimeUtils","WebAsyncStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="msgr_web_recent_searches";function u(t){var n;if(((n=t.rawData.serverSearchResult)==null?void 0:n.type_)!=null)return(e||(e=o("LSIntEnum"))).unwrapIntEnum(t.rawData.serverSearchResult.type_);var r=t.rawData.searchResultType!=null?o("MWSearchStandardResultTypeMappings").mapSearchStandardResultTypeToLSSearchType(t.rawData.searchResultType):void 0;return r!=null?(e||(e=o("LSIntEnum"))).unwrapIntEnum(r):o("MWChatSearchResultTypeMapping").mapMWChatSearchResultTypeToLSSearchType(t.rawData.resultType)}function c(t,n){var r;if(((r=t.rawData.serverSearchResult)==null?void 0:r.threadType)!=null)return(e||(e=o("LSIntEnum"))).unwrapIntEnum(t.rawData.serverSearchResult.threadType);if(t.rawData.threadType!=null)return(e||(e=o("LSIntEnum"))).unwrapIntEnum(t.rawData.threadType);if(n===3)return t.rawData.isE2EE===!0?16:2}function d(e){var t=u(e);return{key:e.key,lastAccessedTimestamp:o("WATimeUtils").unixTime(),searchResultType:t,threadType:c(e,t)}}async function m(e){var t=await p(),n=t.find(function(t){return t.key===e.key});return n!=null?n.lastAccessedTimestamp=o("WATimeUtils").unixTime():t.push(d(e)),new Promise(function(e){r("WebAsyncStorage").setItem(s,JSON.stringify(t),function(t){t!=null&&r("FBLogger")("messenger_web_search").mustfix("Error setting recent searches. %s",t.toString()),e()})})}function p(){return new Promise(function(e){r("WebAsyncStorage").getItem(s,function(t,n){if(t!=null)return r("FBLogger")("messenger_web_search").mustfix("Error getting recent searches. Error msg: %s",t.message),e([]);if(n==null)return e([]);try{var o=JSON.parse(n);return e(o.sort(function(e,t){return t.lastAccessedTimestamp-e.lastAccessedTimestamp}))}catch(t){return r("FBLogger")("messenger_web_search").mustfix("Error parsing recent searches"),e([])}})})}function _(e){return new Promise(function(t){r("WebAsyncStorage").getItem(s,function(n,o){if(n!=null)return r("FBLogger")("messenger_web_search").mustfix("Error getting recent searches. Error msg: %s",n.message),t();if(o==null)return t();try{var a=JSON.parse(o),i=a.filter(function(t){return t.key!==e});return r("WebAsyncStorage").setItem(s,JSON.stringify(i),function(e){e!=null&&r("FBLogger")("messenger_web_search").mustfix("Error setting recent searches. %s",e.toString()),t()})}catch(e){return r("FBLogger")("messenger_web_search").mustfix("Error parsing recent searches"),t()}})})}l.upsertRecentSearchEntry=m,l.getAllRecentSearches=p,l.clearRecentSearchItem=_}),98);
__d("MWChatSearchFetchNSRecentSearches",["FBLogger","I64","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSPlatformWaitForTaskCompletion","LSVerifyContactExistsWithID","LSVerifyThreadRowExistsStoredProcedure","MWChatSearchResultType","MWChatTemporarySearchResultUtils","MWPSearchOfflineOpenConversationsUtils","MWRecentSearchesStorage","MWSearchStandardResultTypeMappings","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={searchSource:"null_state_recent",section:o("MWChatTemporarySearchResultUtils").getSectionHeaderForRecentSearches(),sectionAnalyticsName:"null_state_recent"},c=4,d={isAiBot:!1,isContact:!0,isDisappearingModeSettingOn:!1,isE2EE:!1,isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,isVerified:!1,subtext:""},m=[1,2,4,16],p=[3,13,14];function _(t,n){var a;return babelHelpers.extends({displayName:(n==null?void 0:n.threadName)||"",id:t.key,imageUrl:"",resultType:r("MWChatSearchResultType").GROUP,searchResultType:o("MWSearchStandardResultTypeMappings").mapLSSearchTypeToSearchStandardResultType((e||(e=o("LSIntEnum"))).ofNumber(t.searchResultType)),threadType:(a=n==null?void 0:n.threadType)!=null?a:t.threadType!=null?(s||(s=o("I64"))).of_int32(t.threadType):void 0},d,u)}async function f(t,n,a){var i=o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(n),l=await o("ReQL").firstAsync(i);l==null&&r("promiseDone")(r("LSPlatformWaitForTaskCompletion")(t,function(t){return r("LSVerifyThreadRowExistsStoredProcedure")(r("LSFactory")(t),{syncGroup:(e||(e=o("LSIntEnum"))).ofNumber(1),threadKey:n,threadType:a})},"readwrite"))}async function g(e){var t=await o("MWRecentSearchesStorage").getAllRecentSearches(),n=await Promise.all(t.map(async function(t){if(m.includes(t.searchResultType)){await o("LSVerifyContactExistsWithID").waitForTaskFinish(e,(s||(s=o("I64"))).of_string(t.key),!1);var n=await o("MWPSearchOfflineOpenConversationsUtils").mapContact(e,t.key,[],"","null_state_recent");return n==null?null:babelHelpers.extends({},n,u)}if(p.includes(t.searchResultType)){if(t.threadType!=null&&o("LSMessagingThreadTypeUtil").isArmadilloSecureGroup((s||(s=o("I64"))).of_int32(t.threadType)))return null;r("promiseDone")(f(e,(s||(s=o("I64"))).of_string(t.key),t.threadType!=null?(s||(s=o("I64"))).of_int32(t.threadType):void 0));var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(s.of_string(t.key))),i=_(t,a);return i==null?null:babelHelpers.extends({},i,u)}return r("FBLogger")("messenger_web_search").warn("Unknown result type in recent searches: %s",t.searchResultType),Promise.resolve()}));return n.filter(Boolean).slice(0,c)}l.fetchNullStateRecentSearches=g}),98);
__d("MWChatSearchFetchRecommendations",["I64","LSInitSyncCompleteSubscription","LSIntEnum","MWChatSearchFetchCCRecommendations","MWChatSearchFetchContactRecommendations","MWChatSearchFetchGenAIBotRecommendations","MWChatSearchIssueLightspeedQuery","Promise","cr:8409","emptyFunction","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,a,i,l,c){var d=a.includes((u||(u=o("LSIntEnum"))).ofNumber(13)),p=a.includes(u.ofNumber(16));r("promiseDone")((e||(e=n("Promise"))).all([(s||(s=o("I64"))).equal(l,(u||(u=o("LSIntEnum"))).ofNumber(1))&&n("cr:8409")!=null?n("cr:8409").fetchNullStateRecentSearches(t):(e||(e=n("Promise"))).resolve([]),o("MWChatSearchFetchContactRecommendations").fetchContacts(t,i,l),d?o("MWChatSearchFetchCCRecommendations").fetchCCs(t,l):[],p?o("MWChatSearchFetchGenAIBotRecommendations").fetchGenAIBots(t,l):[]]).then(function(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=m(t,n,r,o);return c(a)}))}function d(e,t,n,a,i,l){return r("promiseDone")(o("MWChatSearchIssueLightspeedQuery").makeSearchQuery(t,a,i)),r("gkx")("15587")?r("promiseDone")(o("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(e,(u||(u=o("LSIntEnum"))).ofNumber(7)),function(){c(e,t,n,a,l)}):c(e,t,n,a,l),r("emptyFunction")}function m(e,t,n,r){return[].concat(e,r,n,t)}l.requestRecommendations=d,l.blendSearchResults=m}),98);
__d("MWChatSearchInsertRankingContacts",["I64","LSFactory","LSInsertRankingContactsStoredProcedure","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s={contents:!1},u={contents:!1},c=(e||(e=o("I64"))).of_string("100");function d(t){if(!s.contents&&(e||(e=o("I64"))).gt(c,(e||(e=o("I64"))).zero)){s.contents=!0,r("promiseDone")(t.runInTransaction(function(e){return r("LSInsertRankingContactsStoredProcedure")(r("LSFactory")(e),{limit:c})},"readwrite",void 0,void 0,i.id+":39"),function(){u.contents=!0});return}}function m(){return u.contents}l.insertRankingContacts=d,l.isDone=m}),98);
__d("MWChatSearchIssueMAWFTSQuery",["I64","LSContactBitOffset","LSDatabaseSingleton","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWChatJid","MNetRankType","MWChatSearchResultTypeMapping","MWChatTemporarySearchResult","MWGetOtherContactOrSelf","MWLSThreadTitle","MWSearchQPLLogger","MWSearchStandardResultTypeMappings","MWSearchThreadUtils","ReQL","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,n,a,i,l){return o("MAWChatJid").toThreadKeyMaybe(t.tables,n).then(function(n){if(r("vulture")("55CqO8SSMoXHNOOlno0v1POeV24="),n!=null)return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(n)).then(function(t){return{displayName:i!=null?i:"",id:a,imageUrl:"",isAiBot:t!=null&&(e||(e=o("I64"))).equal(t.threadType,(s||(s=o("LSIntEnum"))).ofNumber(201)),isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:t!=null?o("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType):!1,isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:t!=null&&o("LSThreadBitOffset").has(214,t),isTTLCClipEnabled:t!=null&&o("LSThreadBitOffset").has(226,t),isTTLCGenericXMAShareEnabled:t!=null&&o("LSThreadBitOffset").has(231,t),isTTLCMediaShareEnabled:t!=null&&o("LSThreadBitOffset").has(228,t),isTTLCStoryShareEnabled:t!=null&&o("LSThreadBitOffset").has(229,t),isVerified:!1,matchedTerms:l,resultType:o("MWChatTemporarySearchResult").getResultType((s||(s=o("LSIntEnum"))).ofNumber(5)),searchResultType:14,searchSource:"secure",section:"",subtext:"",threadKey:n}})})}function d(t,n){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.mi_act_mapping_table).getKeyRange(t)).then(function(t){return t!=null?o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.cutover_threads).filter(function(n){return(e||(e=o("I64"))).equal(n.armadilloThreadId,t.jid)})).then(function(e){return e!=null?e.openThreadId:t.jid}):Promise.resolve()})}function m(e){var t=e.score-1e-6;return{contactId:e.contactId,contactType:e.contactType,score:t,scoreIndex:e.scoreIndex,scoreType:e.scoreType}}function p(e,t){return d(e,t).then(function(n){var a=n!=null?n:e,i=n!=null;return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.ranking_scores).getKeyRange(a,(s||(s=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH))).then(function(e){if(e!=null)return i?m(e):e})})}function _(t,n,r,a){var i,l=(i=n.threadDescription)!=null?i:"";return(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(15))&&(l=o("MWLSThreadTitle").getThreadTitleWithSecondaryNames(n.threadDescription,r,a,n.threadType).toString()),l}async function f(t,n,r,a){var i=await Promise.all([o("MAWChatJid").toThreadKeyMaybe(t.tables,n),o("ReQL").firstExnAsync(o("ReQL").fromTableAscending(t.tables._user_info).map(function(e){return e.facebookUserId}))]),l=i[0],u=i[1];if(l!=null){var c=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(l));if(!(c==null||c.folderName!=="inbox")){var d=await Promise.all([o("MWSearchThreadUtils").getThreadPics(c,u,t),o("MWSearchThreadUtils").getThreadParticipants(c,t),p(c.threadKey,t)]),m=d[0],f=d[1],g=d[2],h=m[0],y=m[1],C=o("LSMessagingThreadTypeUtil").isOneToOne(c.threadType),b=o("LSMessagingThreadTypeUtil").isGroup(c.threadType)?(s||(s=o("LSIntEnum"))).ofNumber(3):(s||(s=o("LSIntEnum"))).ofNumber(1),v=null;return C===!0&&(v=await o("MWGetOtherContactOrSelf").getOtherContactOrSelf(c.threadKey,u,t)),{displayName:o("MWLSThreadTitle").getDefaultThreadTitle(c.threadName,u,f,c.threadType).toString(),id:(e||(e=o("I64"))).to_string(c.threadKey),imageUrl:h,isAiBot:e.equal(c.threadType,(s||(s=o("LSIntEnum"))).ofNumber(201)),isContact:C,isDisappearingModeSettingOn:!1,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(c.threadType),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:o("LSThreadBitOffset").has(214,c),isTTLCClipEnabled:o("LSThreadBitOffset").has(226,c),isTTLCGenericXMAShareEnabled:o("LSThreadBitOffset").has(231,c),isTTLCMediaShareEnabled:o("LSThreadBitOffset").has(228,c),isTTLCStoryShareEnabled:o("LSThreadBitOffset").has(229,c),isVerified:v!=null?o("LSContactBitOffset").has(23,v):!1,matchedTerms:a,otherUserId:v?(e||(e=o("I64"))).to_string(v.id):void 0,rankingScore:g,resultType:o("MWChatTemporarySearchResult").getResultType(b),searchResultType:o("MWSearchStandardResultTypeMappings").mapThreadTypeToSearchStandardResultType(c.threadType),searchSource:"secure",secondaryImageUrl:y,section:"",subtext:_(r,c,u,f),threadKey:c.threadKey,threadType:c.threadType}}}}async function g(t,n,r){var a,i,l=await o("ReQL").firstExnAsync(o("ReQL").fromTableAscending(t.tables._user_info).map(function(e){return e.facebookUserId})),u=await o("MAWChatJid").toThreadKeyMaybe(t.tables,n);if(u==null)return null;var c=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(u));if(c==null)return null;var d=await o("MWSearchThreadUtils").getThreadPics(c,l,t),m=d[0],p=d[1],_={contactId:(e||(e=o("I64"))).zero,contactType:e.zero,score:e.to_float(c.lastActivityTimestampMs),scoreIndex:e.zero,scoreType:e.zero};return{displayName:(a=c.threadName)!=null?a:"",id:e.to_string(u),imageUrl:m,isAiBot:e.equal(c.threadType,(s||(s=o("LSIntEnum"))).ofNumber(201)),isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(c.threadType),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:o("LSThreadBitOffset").has(214,c),isTTLCClipEnabled:o("LSThreadBitOffset").has(226,c),isTTLCGenericXMAShareEnabled:o("LSThreadBitOffset").has(231,c),isTTLCMediaShareEnabled:o("LSThreadBitOffset").has(228,c),isTTLCStoryShareEnabled:o("LSThreadBitOffset").has(229,c),isVerified:!1,matchedTerms:r,rankingScore:_,resultType:o("MWChatTemporarySearchResult").getResultType(s.ofNumber(3)),searchResultType:3,searchSource:"secure",secondaryImageUrl:p,section:"",subtext:(i=c.threadDescription)!=null?i:"",threadKey:u}}async function h(e,t){var n=await(u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton,r=await Promise.all(e.map(function(e){switch(e.recordType){case"msg":{var r=e.msg,o=r==null?void 0:r.msgId;return r==null||o==null?null:c(n,e.chatJid,o,r.content,e.matchedTerms)}case"groupInfo":return g(n,e.groupJid,e.matchedTerms);case"participant":return f(n,e.threadJid,t,e.matchedTerms)}}));return r.filter(Boolean)}function y(t,n,r){return t.filter(function(t){var a=(s||(s=o("LSIntEnum"))).ofNumber(o("MWChatSearchResultTypeMapping").mapMWChatSearchResultTypeToLSSearchType(t.resultType)),i=n.includes(a);if(!i)return!1;var l=(e||(e=o("I64"))).equal(a,s.ofNumber(3));return!l||r})}function C(e,t,n,r){return o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"mawdb_query_start"}),o("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:r.query,searchMode:o("MAWBridgeSearchMsg").NON_MESSAGE_CONTENT_SEARCH},{timeoutMs:1e4}).then(function(e){return o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"mawdb_query_end"}),h(e,t)}).then(function(t){return y(t,e,n)})}l.filterSearchResults=y,l.fetchResults=C}),98);
__d("mwGroupEntriesForDisplay",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=new Map;for(var n of e){var r,o,a=(r=n.rawData.section)!=null?r:"",i=(o=t.get(a))!=null?o:[];i.push(n),t.set(a,i)}return t}i.mwGroupEntriesForDisplay=e}),66);
__d("MWChatSearchLightspeedTypeaheadViewList.react",["MWCMLightSpeedChatTabActionViewItems.react","MWXText.react","getItemRoleFromCompositeRole","mwGroupEntriesForDisplay","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["showActionItems","ariaProps","children","entries","highlightedEntry"],s,u=s||(s=o("react")),c=s.useMemo;function d(e){var t=o("react-compiler-runtime").c(22),n=e.activeEntryKey,a=e.children,i=e.entries,l=e.itemRole,s=e.title,c;if(t[0]!==s){var d;t[2]===Symbol.for("react.memo_cache_sentinel")?(d=/\s/g,t[2]=d):d=t[2],c=s.toString().replace(d,"-"),t[0]=s,t[1]=c}else c=t[1];var m="chatSearchListHeading-"+c;if(i!=null&&i.length>0){var p;t[3]===Symbol.for("react.memo_cache_sentinel")?(p={className:"xexx8yu x1icxu4v x18d9i69 x25sj25"},t[3]=p):p=t[3];var _;t[4]!==s||t[5]!==m?(_=s?u.jsx("div",{className:"x1y1aw1k xf159sx xwib8y2 xmzvs34",children:u.jsx(r("MWXText.react"),{id:m,isSemanticHeading:!0,type:"entityHeaderMeta1",children:s})}):null,t[4]=s,t[5]=m,t[6]=_):_=t[6];var f;if(t[7]!==n||t[8]!==a||t[9]!==i||t[10]!==l){var g;t[12]!==n||t[13]!==a||t[14]!==l?(g=function(t,r){var e=n===t.key;return a({entry:t,index:r,isActive:e,itemRole:l})},t[12]=n,t[13]=a,t[14]=l,t[15]=g):g=t[15],f=i.map(g),t[7]=n,t[8]=a,t[9]=i,t[10]=l,t[11]=f}else f=t[11];var h;t[16]!==f||t[17]!==m?(h=u.jsx("ul",{"aria-labelledby":m,children:f}),t[16]=f,t[17]=m,t[18]=h):h=t[18];var y;return t[19]!==_||t[20]!==h?(y=u.jsxs("li",babelHelpers.extends({},p,{children:[_,h]})),t[19]=_,t[20]=h,t[21]=y):y=t[21],y}return null}function m(t){var n=o("react-compiler-runtime").c(25),a,i,l,s,c,m;n[0]!==t?(m=t.showActionItems,a=t.ariaProps,i=t.children,l=t.entries,s=t.highlightedEntry,c=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=m):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],m=n[6]);var p=s!=null?s.key:null,_;n[7]!==l?(_=o("mwGroupEntriesForDisplay").mwGroupEntriesForDisplay(l),n[7]=l,n[8]=_):_=n[8];var f=_,g;n[9]!==a.role?(g=r("getItemRoleFromCompositeRole")(a.role),n[9]=a.role,n[10]=g):g=n[10];var h=g,y;n[11]===Symbol.for("react.memo_cache_sentinel")?(y={className:"x1yrsyyn xyri2b x10b6aqq x1c1uobl"},n[11]=y):y=n[11];var C=c.testid,b;n[12]!==m?(b=m&&u.jsx(r("MWCMLightSpeedChatTabActionViewItems.react"),{}),n[12]=m,n[13]=b):b=n[13];var v;n[14]!==f?(v=Array.from(f.entries()),n[14]=f,n[15]=v):v=n[15];var S;n[16]!==p||n[17]!==i||n[18]!==h||n[19]!==v?(S=v.map(function(e){var t=e[0],n=e[1];return u.jsx(d,{activeEntryKey:p,children:i,entries:n,itemRole:h,title:t},t)}),n[16]=p,n[17]=i,n[18]=h,n[19]=v,n[20]=S):S=n[20];var R;return n[21]!==c.testid||n[22]!==b||n[23]!==S?(R=u.jsxs("ul",babelHelpers.extends({},y,{"data-testid":void 0,role:"listbox",children:[b,S]})),n[21]=c.testid,n[22]=b,n[23]=S,n[24]=R):R=n[24],R}l.default=m}),98);
__d("MWLSSearchIssueSearchQuerySupportedTypes",["LSIntEnum","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[(e||(e=o("LSIntEnum"))).ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9),e.ofNumber(13)].concat(r("gkx")("24112")?[(e||(e=o("LSIntEnum"))).ofNumber(14)]:[]),u=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2)],c=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9),e.ofNumber(5)],d=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9)],m=[e.ofNumber(1)],p=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9)].concat([e.ofNumber(13)]),_=[e.ofNumber(1),e.ofNumber(2)],f=[e.ofNumber(1),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9)],g=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(2)],h=[e.ofNumber(1),e.ofNumber(2)];l.allSupportedTypes=s,l.supportedTypesForMSplitUser=u,l.allSupportedTypesWithMessageSearch=c,l.armadilloSupportedTypes=d,l.onlyContacts=m,l.broadcastFlowSupportedTypes=p,l.addParticipantBase=_,l.addParticipantXac=f,l.socialChannelsSupportedTypes=g,l.communityDirectInviteSupportedTypes=h}),98);
__d("MWLSSyncRankings",["LSIntEnum","MWLSDatabaseLazySync","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s={contents:!1},u={contents:!1};function c(t){if(!s.contents){s.contents=!0,r("promiseDone")(o("MWLSDatabaseLazySync").sync(t,(e||(e=o("LSIntEnum"))).ofNumber(7)),function(){u.contents=!0});return}}function d(){return u.contents}l.sync=c,l.isDone=d}),98);
__d("MWPSearchIndexingSource",["I64","LSIntEnum","ReQL","ReQLSuspense"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.contacts))}function c(t){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.threads).filter(function(t){return(e||(e=o("I64"))).equal(t.threadType,(s||(s=o("LSIntEnum"))).ofNumber(2))}))}function d(t,n){return c(n).then(function(r){var a=new Set(r.map(function(t){return(e||(e=o("I64"))).to_string(t.threadKey)}));return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(n.tables.participants).filter(function(n){return!(e||(e=o("I64"))).equal(n.contactId,t)&&a.has((e||(e=o("I64"))).to_string(n.threadKey))}).map(function(e){var t=[e,o("ReQLSuspense").first(o("ReQL").fromTableAscending(n.tables.contacts).getKeyRange(e.contactId),i.id+":54")];return t}))})}l.fetchContacts=u,l.fetchGroupThreads=c,l.fetchGroupParticipants=d}),98);
__d("MWPSearchOpenIndexer",["I64","LSIntEnum","MWPSearchOfflineOpenConversations","MWPSearchOfflineOpenConversationsUtils","MWPSearchOfflineSearchTypes","ReQL","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Map,c=new Map,d=new Map;function m(t){var n=t.id,r=t.name,a=(e||(e=o("I64"))).to_string(n),i={category:{type:o("MWPSearchOfflineSearchTypes").MWPSearchType.Contact},content:r,id:a};o("MWPSearchOfflineOpenConversations").add(i),u.set(a,i)}function p(e){var t=u.get(e);if(t!=null){u.delete(e),o("MWPSearchOfflineOpenConversations").remove(t);return}}function _(t){var n=t.threadKey,r=t.threadName;if(r!=null){var a=(e||(e=o("I64"))).to_string(n),i={category:{type:o("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadName},content:r,id:a};o("MWPSearchOfflineOpenConversations").add(i),c.set(a,i)}}function f(e){var t=c.get(e);if(t!=null){c.delete(e),o("MWPSearchOfflineOpenConversations").remove(t);return}}function g(e,t){if(t!=null){var n=o("MWPSearchOfflineOpenConversationsUtils").getGroupParticipantKey(e.threadKey,e.contactId),r=t.name;e.nickname!=null&&(r+=" "+e.nickname);var a={category:{type:o("MWPSearchOfflineSearchTypes").MWPSearchType.ThreadParticipant},content:r.trim(),id:n};o("MWPSearchOfflineOpenConversations").add(a),d.set(n,a)}}async function h(e,t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.contacts).getKeyRange(t.contactId)),a=await y(e,t.threadKey);if(!(a&&r("gkx")("16989")))return g(t,n)}async function y(t,n){var r=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(n));return r==null?!1:!(e||(e=o("I64"))).equal(r.threadType,(s||(s=o("LSIntEnum"))).ofNumber(2))}function C(e,t){var n=o("MWPSearchOfflineOpenConversationsUtils").getGroupParticipantKey(e,t),r=d.get(n);if(r!=null){d.delete(n),o("MWPSearchOfflineOpenConversations").remove(r);return}}function b(t,n){switch(n.operation){case"add":return m(n.value);case"put":return p((e||(e=o("I64"))).to_string(t)),m(n.value);case"delete":return p((e||(e=o("I64"))).to_string(t))}}function v(t,n){switch(n.operation){case"add":return _(n.value);case"put":return f((e||(e=o("I64"))).to_string(t)),_(n.value);case"delete":return f((e||(e=o("I64"))).to_string(t))}}function S(e,t,n,r){switch(r.operation){case"add":return h(e,r.value);case"put":return C(t,n),h(e,r.value);case"delete":return Promise.resolve(C(t,n))}}function R(e,t,n,r){o("MWPSearchOfflineOpenConversationsUtils").db.contents=e,t.forEach(m),n.forEach(_),r.forEach(function(e){var t=e[0],n=e[1];return g(t,n)})}l.onContactChanged=b,l.onGroupThreadChanged=v,l.onGroupParticipantChanged=S,l.startInitialIndex=R}),98);
__d("MWPSearchSystem",["CurrentUser","FBLogger","I64","JSScheduler","LSClearTablesStoredProcedure","LSFactory","LSIntEnum","MWChatSearchInsertRankingContacts","MWLSSyncRankings","MWPSearchIndexingSource","MWPSearchOpenIndexer","Promise","ReQL","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d={contents:!1},m={contents:!1},p={contents:!1};function _(t){if(!p.contents){p.contents=!0,(s||(s=o("JSScheduler"))).scheduleSpeculativeCallback(function(){o("MWChatSearchInsertRankingContacts").insertRankingContacts(t),o("MWLSSyncRankings").sync(t);var a=(c||(c=o("I64"))).of_string(r("CurrentUser").getID());if(!d.contents){d.contents=!0;var i=r("gkx")("16989");r("promiseDone")((e||(e=n("Promise"))).all([o("MWPSearchIndexingSource").fetchContacts(t),i?o("MWPSearchIndexingSource").fetchGroupThreads(t):(e||(e=n("Promise"))).resolve([]),i?o("MWPSearchIndexingSource").fetchGroupParticipants(a,t):(e||(e=n("Promise"))).resolve([])]).then(function(e){var n=e[0],r=e[1],a=e[2];o("MWPSearchOpenIndexer").startInitialIndex(t,n,r,a)}),function(){m.contents=!0},function(e){r("FBLogger")("messenger_web_search").catching(e).mustfix("Error indexing contacts for search")}),o("ReQL").fromTableAscending(t.tables.contacts).subscribe(function(e,t){var n=e[0];o("MWPSearchOpenIndexer").onContactChanged(n,t)}),i&&(o("ReQL").fromTableAscending(t.tables.threads).filter(function(e){return(c||(c=o("I64"))).equal(e.threadType,(u||(u=o("LSIntEnum"))).ofNumber(2))}).subscribe(function(e,t){var n=e[0];o("MWPSearchOpenIndexer").onGroupThreadChanged(n,t)}),o("ReQL").fromTableAscending(t.tables.participants,["contactId","threadKey","nickname"]).filter(function(e){return!(c||(c=o("I64"))).equal(e.contactId,a)}).subscribe(function(e,n){var a=e[0],i=e[1];r("promiseDone")(o("MWPSearchOpenIndexer").onGroupParticipantChanged(t,a,i,n))}))}});return}}function f(e){return e.runInTransaction(function(e){return r("LSClearTablesStoredProcedure")(r("LSFactory")(e),{clearMessageResults:!1})},"readwrite",void 0,void 0,i.id+":122")}function g(){return o("MWLSSyncRankings").isDone()&&o("MWChatSearchInsertRankingContacts").isDone()?m.contents:!1}l.makeAll=_,l.clearAll=f,l.isDone=g}),98);
__d("SearchTransportType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({ARMADILLO:1,TINCAN:2,OPEN_THREAD:3,IG_DJANGO:4,IG_ADVANCED_CRYPTO_TRANSPORT:5,IG_MESSENGER_INFRA:6}),l=e;i.default=l}),66);
__d("UniversalSearchEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("844"),s=o("FalcoLoggerInternal").create("universal_search_end",e),u=s;l.default=u}),98);
__d("UniversalSearchResultSelectedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("846"),s=o("FalcoLoggerInternal").create("universal_search_result_selected",e),u=s;l.default=u}),98);
__d("UniversalSearchUISectionType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({NULL_STATE_RECENTS:1,NULL_STATE_RECENTS_SEE_ALL:2,NULL_STATE_SUGGESTED:3,NULL_STATE_XAC_FOLLOWING:4,QUERY_SUGGESTED:5,QUERY_NON_FOLLOWING:6,QUERY_XAC_FOLLOWING:7,QUERY_XAC_NON_FOLLOWING:8,QUERY_BUSINESSES:9,QUERY_MESSAGES:10,OTHER:11,QUERY_NON_BUSINESSES:12,COMMUNITY_CHATS:13,MORE_COMMUNITY_CHATS:14,RELEVANT_SHARES:15,LATEST_SHARES:16,RECOMMENDED_COMMUNITIES:17,COMMUNITIES_AND_MORE:18,CHANNELS:19,NULL_STATE_NON_FOLLOWING:20,JOINED_CM_AND_CHANNEL:21,JOINED_CM_AND_CHANNEL_SEE_MORE:22,RECOMMENDED_CM_AND_CHANNEL:23,RECOMMENDED_CM_AND_CHANNEL_SEE_MORE:24,AI:25,AI_SEE_MORE:26,CHANNELS_SEE_MORE:27,UNJOINED_COMMUNITY_CHATS:28,MORE_UNJOINED_COMMUNITY_CHATS:29,NS_SUGGESTED_CHANNELS:30,NS_SUGGESTED_CHANNELS_SEE_MORE:31,NULL_STATE_MESSAGES:32,NULL_STATE_SUGGESTED_PROMPT:33,NULL_STATE_PYMK:34,QUERY_SUGGESTED_PROMPT:35,INVITE_TO_INSTAGRAM:36,INVITE_TO_INSTAGRAM_SEE_MORE:37,NULL_STATE_GROUP_CHATS:38,NULL_STATE_GROUP_CHATS_SEE_MORE:39,QUERY_NON_FOLLOWING_SEE_MORE:40,META_AI_SNIPPET:41,QUERY_BUSINESSES_SEE_MORE:42,QUERY_MESSAGES_SEE_MORE:43,PHOTOS_AND_VIDEOS:44,PHOTOS_AND_VIDEOS_SEE_MORE:45,LINKS:46,LINKS_SEE_MORE:47,FILES:48,FILES_SEE_MORE:49,PHONE_CONTACTS:50,PHONE_CONTACTS_SEE_MORE:51,NOT_IN_PHONE_CONTACTS:52,NULL_STATE_SUGGESTED_REELS:53,NULL_STATE_NOTIFICATIONS:54}),l=e;i.default=l}),66);
__d("MWSearchLogging",["$InternalEnum","I64","LSMessagingThreadTypeUtil","MWChatSearchResultType","UniversalSearchEndFalcoEvent","UniversalSearchResultSelectedFalcoEvent","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=n("$InternalEnum")({CM_THREADS:"cm_threads",UNJOINED_GROUPS:"unjoined_groups",NON_CONTACTS:"noncontacts",PAGES:"pages",CONTACTS_GROUPS:"contacts_groups",MESSAGE_SEARCH:"message_search"}),u=function(t){switch(t){case"server":return[1,2];case"offline":case"offline_nullstate":case"secure":return[0];default:return[]}};function c(e){return e===!0?1:3}function d(e){return e===!0?0:2}function m(e,t){var n=t.searchSource,r=t.section,o=t.sectionAnalyticsName;if(e==="")return n==="null_state_recent"?1:3;if(s.cast(o)===s.MESSAGE_SEARCH)return 10;if(n!=="server"||r==="")return 5;var a=s.cast(o);if(a==null)return 11;switch(a){case s.CM_THREADS:return 13;case s.CONTACTS_GROUPS:return 5;case s.NON_CONTACTS:return 6;case s.PAGES:return 9;default:return 11}}function p(e){return(e!=null?e:-1).toString()}function _(t,n,a,i){var l=a.rawData,s=l.id,d=l.isE2EE,_=l.isEPD,f=l.renderIndex,g=l.searchResultType,h=l.searchSource,y=l.serverSearchResult,C=p(f),b=s,v=c(d);if(y!=null){var S;b=(S=y.resultId)!=null?S:b,v=o("LSMessagingThreadTypeUtil").isArmadilloSecure(y==null?void 0:y.threadType)?1:3,C=(e||(e=o("I64"))).to_string(y.globalIndex)}if(r("UniversalSearchResultSelectedFalcoEvent").log(function(){return{data_sources:u(h),is_epd:r("gkx")("23390")||_,search_result:{query_string:n,result_fbid:b,result_index:C,result_type:g!=null?g:7},session_id:t,transport_type:v,ui_section:m(n,l)}}),!i.current){var R=7;a.rawData.resultType===r("MWChatSearchResultType").MESSAGE&&(R=23),r("UniversalSearchEndFalcoEvent").log(function(){return{end_action:R,is_epd:r("gkx")("24110")||_,session_id:t,transport_type:v}}),i.current=!0}}l.SectionAnalyticsNameType=s,l.getLoggingDataSources=u,l.getTransportType=c,l.getLsTransportType=d,l.mapSectionToSearchUISection=m,l.logResultSelected=_}),98);
__d("MWStaticSearchEntries",["fbt","MWChatSearchResultType","MWSearchLogging"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){var t=s._(/*BTDS*/"Search messages for {param}",[s._param("param",e)]).toString();return{key:e,label:t,rawData:{displayName:t,id:"0",imageUrl:"",isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:!1,isEPD:!1,isInstamadilloCutover:!1,isTTLCClipEnabled:!1,isTTLCGenericXMAShareEnabled:!1,isTTLCMediaShareEnabled:!1,isTTLCStoryShareEnabled:!1,resultType:r("MWChatSearchResultType").MESSAGE,searchResultType:14,secondaryImageUrl:"",sectionAnalyticsName:o("MWSearchLogging").SectionAnalyticsNameType.MESSAGE_SEARCH,subtext:""},type:"entry"}}l.createMessageSearchHeaderEntry=e}),226);
__d("createMWChatSearchTypeaheadDataEntry",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n;return{key:e.id,label:e.displayName,rawData:{canViewerMessage:e.canViewerMessage,communityId:e.communityId,defaultE2eeThreadOneToOne:e.defaultE2eeThreadOneToOne,defaultE2eeThreads:e.defaultE2eeThreads,displayName:e.displayName,hasCutoverThread:e.hasCutoverThread,id:e.id,igid:e.resultIgid,imageUrl:e.imageUrl,isAiBot:e.isAiBot,isContact:e.isContact,isDisappearingModeSettingOn:e.isDisappearingModeSettingOn,isE2EE:e.isE2EE,isEPD:e.isEPD,isGroupCreationReachable:e.isGroupCreationReachable,isGroupsXacEligible:!!e.isGroupsXacEligible,isInstagramAccount:!!e.isInstagramAccount,isInstamadilloCutover:e.isInstamadilloCutover,isInteropEligible:e.isInteropEligible!==!1,isRestrictedByViewer:e.isRestrictedByViewer,isTTLCClipEnabled:!!e.isTTLCClipEnabled,isTTLCGenericXMAShareEnabled:!!e.isTTLCGenericXMAShareEnabled,isTTLCMediaShareEnabled:!!e.isTTLCMediaShareEnabled,isTTLCStoryShareEnabled:!!e.isTTLCStoryShareEnabled,isViewerUnconnected:e.isViewerUnconnected,isWAEligible:e.isWAEligible,otherUserId:e.otherUserId,rankingScore:e.rankingScore,reachabilityStatus:e.reachabilityStatus,renderIndex:t,resultType:e.resultType,searchResultType:e.searchResultType,searchSource:e.searchSource,secondaryImageUrl:(n=e.secondaryImageUrl)!=null?n:"",section:e.section,sectionAnalyticsName:e.sectionAnalyticsName,serverSearchResult:e.serverSearchResult,subtext:e.subtext,subtextAdditional:e.subtextAdditional,supportsE2eeSpamdStorage:e.supportsE2eeSpamdStorage,threadType:e.threadType,verificationStatus:e.isVerified?"BLUE_VERIFIED":"NOT_VERIFIED",waAddressable:e.waAddressable,waEligibility:e.waEligibility},type:"entry"}}i.default=e}),66);
__d("filterInstagramContactsMWChatSearchLocalEntries",["MWChatSearchSurfaces"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return t===r("MWChatSearchSurfaces").instagramAll?e:e.filter(function(e){return!e.isInstagramAccount})}l.default=e}),98);
__d("mwChatSearchPayloadDecoratorRemoveExcluded",[],(function(t,n,r,o,a,i){"use strict";var e=["entries"];function l(t){return function(n){var r=n.entries,o=babelHelpers.objectWithoutPropertiesLoose(n,e);return babelHelpers.extends({entries:r.filter(function(e){return!t.includes(e.key)})},o)}}i.default=l}),66);
__d("mwChatSearchPayloadEnumerate",[],(function(t,n,r,o,a,i){"use strict";var e=["entries"];function l(t){var n,r=t.entries,o=babelHelpers.objectWithoutPropertiesLoose(t,e),a=(n=t.params)==null?void 0:n.query,i=r.reduce(function(e,t,n){var r=t.rawData.section;if(r==null)return e;r===""&&e.set(r,0);var o=e.get(r),a=o==null?n:Math.min(o,n);return e.set(r,a),e},new Map),l=r.map(function(e,t){var n=e.key,r=e.label,o=e.rawData,l=o.section;return{key:n,label:r,rawData:babelHelpers.extends({},o,{query:a,renderIndex:t,sectionRenderIndex:l==null?-1:i.get(l)}),type:"entry"}});return babelHelpers.extends({entries:l},o)}i.default=l}),66);
__d("sortMWChatSearchLocalResults",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e={group:1,message:2,messages:3,page:4,user:0},s=r("gkx")("23913");function u(t,n){var r={};for(var o of t){var a;r[o.id]=(a=o.rankingScore)==null?void 0:a.score}var i=t.sort(function(t,o){var a,i,l=e[t.resultType],u=e[o.resultType];if(l!==u)return l-u;if(s&&n.length>1){var c,d,m,p,_=(c=(d=t.matchedTerms)==null?void 0:d.length)!=null?c:0,f=(m=(p=o.matchedTerms)==null?void 0:p.length)!=null?m:0;if(f!==_)return f-_}var g=(a=r[t.id])!=null?a:0,h=(i=r[o.id])!=null?i:0;return h-g});return i}l.default=u}),98);
__d("MWChatSearchTypeaheadLightspeedSubscriptionDataSource",["FBLogger","I64","LSIntEnum","MNetRankType","MWChatSearchFetchRecommendations","MWChatSearchFilteringUtils","MWChatSearchIssueLightspeedQuery","MWChatSearchSurfaces","MWLSSearchIssueSearchQuerySupportedTypes","MWPSearchOfflineOpenConversationsUtils","MWPSearchSystem","MWSearchQPLLogger","MWStaticSearchEntries","cr:3752","createMWChatSearchTypeaheadDataEntry","filterInstagramContactsMWChatSearchLocalEntries","gkx","isArmadillo","justknobx","mwChatSearchPayloadDecoratorRemoveExcluded","mwChatSearchPayloadEnumerate","promiseDone","relay-runtime/network/RelayObservable","sortMWChatSearchLocalResults"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=10,c=10,d=r("isArmadillo")(),m=(function(){function t(t){var n=t.database,a=t.excludedIDs,i=a===void 0?[]:a,l=t.lightspeedSupportedTypes,s=l===void 0?o("MWLSSearchIssueSearchQuerySupportedTypes").allSupportedTypes:l,u=t.source,c=u===void 0?r("MWChatSearchSurfaces").universal:u,d=t.includeRecommendations,m=d===void 0?!0:d,p=t.includeGroupSearch,_=p===void 0?!1:p,f=t.includeMessageSearchEntry,g=f===void 0?!0:f,h=t.nullstateRankType,y=h===void 0?r("gkx")("17703")?(e||(e=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_SEARCH_NULL_STATE_UNBLENDED):(e||(e=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE):h,C=t.includeAiBots,b=C===void 0?!0:C;this.$1=[],this.$5=function(){},this.$1=i,this.$2=c===r("MWChatSearchSurfaces").omnipickerArmadillo?o("MWLSSearchIssueSearchQuerySupportedTypes").armadilloSupportedTypes:s,this.$3=c,this.$4=n,this.$6=m,this.$7=_,this.$8=g,this.$9=y,this.$10=b,o("MWPSearchSystem").makeAll(n)}var a=t.prototype;return a.resolveData=async function(t,n){var e=n.map(r("createMWChatSearchTypeaheadDataEntry")),a=[].concat(this.$8&&t.query.length>1?[o("MWStaticSearchEntries").createMessageSearchHeaderEntry(t.query)]:[],e),i=o("MWChatSearchFilteringUtils").dedupeByThreadKey(a),l=await o("MWChatSearchFilteringUtils").filterSearchResults(i,this.$4,!1,d,!this.$10),s=r("mwChatSearchPayloadDecoratorRemoveExcluded")(this.$1);return r("mwChatSearchPayloadEnumerate")(s({entries:l,params:t}))},a.fetchNetwork=function(t){var e=this;return o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddAnnotations({annotations:{bool:{include_group_search:this.$7},int:{source:(s||(s=o("I64"))).to_int32(this.$3)}}}),this.$5(),r("relay-runtime/network/RelayObservable").create(function(n){if(t.query.length===0){e.$5=e.fetchNullstateResults(t,n);return}var a=[],i=[],l=!1;o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{query_length:t.query.length}},point:"local_query_start"});var s=Promise.allSettled(e.issueLocalSearchQuery(t)).then(async function(s){var u=s[0],c=s[1],d=u.status==="fulfilled"?u.value:[],m=c.status==="fulfilled"?c.value:[];o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{offline_search_results_count:m.length,secure_search_results_count:d.length}},point:"local_query_end"}),a=e.transformLocalSearchResults(d,m),a=r("sortMWChatSearchLocalResults")(a,t.query),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"resolve_data_start"});var p=await e.resolveData(t,a.concat(i));o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"resolve_data_end"}),l||n.next(p)}).catch(function(e){r("FBLogger")("messenger_search").catching(e).mustfix("Error performing MWChatSearchIssueMAWFTSQuery.fetchResults")}),u=o("MWChatSearchIssueLightspeedQuery").requestResults_T200619723;r("justknobx")._("2003")&&(u=o("MWChatSearchIssueLightspeedQuery").requestResults),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"server_query_start"});var c=u(e.$4,e.$2,e.$3,e.$7,t,function(l){o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{server_search_results_count:l.length}},point:"server_query_end"}),i=l;var u=t.query.length>0&&o("MWPSearchSystem").isDone(),c=u?s:Promise.resolve();o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{bool:{wait_for_local_search:u}},point:"wait_for_local_search_start"}),r("promiseDone")(c.finally(async function(){o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"wait_for_local_search_end"}),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"resolve_data_start"});var r=await e.resolveData(t,a.concat(i));o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{total_results_count:r.entries.length}},point:"resolve_data_end"}),n.next(r),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplSuccess(),n.complete()}))});e.$5=function(){c(),l=!0}})},a.issueLocalSearchQuery=function(t){return[n("cr:3752")!=null?n("cr:3752").fetchResults(this.$2,this.$3,this.$7,t):Promise.resolve([]),this.$3!==r("MWChatSearchSurfaces").broadcast?o("MWPSearchOfflineOpenConversationsUtils").search(t.query,this.$7):Promise.resolve([])]},a.transformLocalSearchResults=function(t,n){var e=u<=0?n:n.slice(0,u),r=c<=0?t:t.slice(0,c);return e.concat(r)},a.fetchNullstateResults=function(n,a){var t=this;return this.$6?(o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{bool:{should_fetch_community_chats:this.$2.includes((e||(e=o("LSIntEnum"))).ofNumber(13)),should_fetch_genai_bots:this.$2.includes((e||(e=o("LSIntEnum"))).ofNumber(16))},int:{null_state_rank_type:(s||(s=o("I64"))).to_int32(this.$9)}},point:"null_state_query_start"}),o("MWChatSearchFetchRecommendations").requestRecommendations(this.$4,this.$2,this.$9,this.$3,n,async function(e){var i=r("filterInstagramContactsMWChatSearchLocalEntries")(e,t.$3);o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"null_state_query_end"}),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({point:"resolve_data_start"});var l=await t.resolveData(n,i);o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplAddPoint({annotations:{int:{null_state_results_count:l.entries.length}},point:"resolve_data_end"}),a.next(l),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").qplSuccess(),a.complete()})):(a.next({entries:[],params:n}),a.complete(),function(){})},a.setExcludedIds=function(t){this.$1=t},t})();l.default=m}),98);
__d("MWJewelSearchTypeaheadViewItemStartContent.react",["I64","LSMessagingThreadTypeUtil","MWChatFacepile.react","MWChatProfile.react","MWChatSearchResultType","MWFacepile.react","MWLSThread","MWXIconMagnifyingGlass","MWXIconStrict.react","getLSMediaThreadPictureUrl","gkx","isStringNullOrEmpty","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(18),n=e.entry,a=n.rawData,i=a.imageUrl,l=a.resultType,c=a.searchSource,m=a.secondaryImageUrl,p;t[0]!==n.key?(p=(s||(s=o("I64"))).of_string_opt(n.key),t[0]=n.key,t[1]=p):p=t[1];var _=p,f=o("MWLSThread").useThread(_!=null?_:null,d),g;t[2]!==f?(g=f!=null?f:{},t[2]=f,t[3]=g):g=t[3];var h=g,y=h.threadType,C;t[4]!==f?(C=f!=null?r("getLSMediaThreadPictureUrl")(f):null,t[4]=f,t[5]=C):C=t[5];var b=C;if(l===r("MWChatSearchResultType").MESSAGE){var v;return t[6]===Symbol.for("react.memo_cache_sentinel")?(v=u.jsx("div",{className:"x1qhmfi1 x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1y1aw1k xf159sx xwib8y2 xmzvs34",children:u.jsx(r("MWXIconStrict.react"),{color:"primary",icon:r("MWXIconMagnifyingGlass"),isDecorative:!0,size:20})}),t[6]=v):v=t[6],v}if(c==="null_state_recent"&&r("gkx")("17176")&&y!=null&&o("LSMessagingThreadTypeUtil").isGroup(y)&&_!=null){var S;return t[7]!==_||t[8]!==b||t[9]!==y?(S=b!=null?u.jsx(r("MWChatProfile.react"),{size:36,src:b}):u.jsx(r("MWFacepile.react"),{actualBadge:null,onlyAuthoratitiveContacts:!0,photoSize:36,threadKey:_,threadType:y}),t[7]=_,t[8]=b,t[9]=y,t[10]=S):S=t[10],S}var R=!(y!=null&&o("LSMessagingThreadTypeUtil").isOneToOne(y));if(r("isStringNullOrEmpty")(m)){var L;return t[11]!==i?(L=u.jsx(r("MWChatProfile.react"),{size:36,src:i}),t[11]=i,t[12]=L):L=t[12],L}if(R){var E;return t[13]!==i||t[14]!==m?(E=u.jsx(r("MWChatFacepile.react"),{firstParticipantURI:i,secondParticipantURI:m,size:36}),t[13]=i,t[14]=m,t[15]=E):E=t[15],E}var k;return t[16]!==m?(k=u.jsx(r("MWChatProfile.react"),{size:36,src:m}),t[16]=m,t[17]=k):k=t[17],k}function d(e){var t=e.threadPictureUrl,n=e.threadPictureUrlExpirationTimestampMs,r=e.threadPictureUrlFallback,o=e.threadType;return{threadPictureUrl:t,threadPictureUrlExpirationTimestampMs:n,threadPictureUrlFallback:r,threadType:o}}l.default=c}),98);
__d("MWJewelSearchTypeaheadViewItemUtils",["fbt","ConstUriUtils","CurrentEnvironment","I64","LSMessagingThreadTypeUtil","MWSearchLogging","QPLUserFlow","ReQL","ReQLSuspense","UniversalSearchResultSelectedFalcoEvent","XCometMessengerControllerRouteBuilder","XMessengerDotComCometMainControllerRouteBuilder","gkx","qpl","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=function(t){if(t==null)return null;var e=t.loggingSessionId;return e};function d(e){var t=e!=null?e:{},n=t.threadType,a=t.type_;return!(n==null||a==null||!o("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(n)||(u||(u=o("I64"))).to_int32(a)!==14||!r("gkx")("24052"))}function m(){return r("CurrentEnvironment").messengerdotcom===!0,!1}function p(e){var t,n=e!=null?e:{},r=n.threadJoinLinkHash,a=n.threadType;if(!(a==null||r==null)){var i=d(e)||o("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(a),l=i?(t=o("ConstUriUtils").getUri(r))==null?void 0:t.getPath().split("/").reverse()[1]:void 0;return l}}function _(e){return e==null?!1:o("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(e)}function f(e){return e==null?!1:o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(e)}function g(){return s._(/*BTDS*/"Secret conversation")}function h(e,t){r("CurrentEnvironment").facebookdotcom?r("XCometMessengerControllerRouteBuilder").buildURL({link_hash:e,thread_key:t}):r("XMessengerDotComCometMainControllerRouteBuilder").buildURL({link_hash:e,thread_key:t})}function y(e,t,n){if(e!=null){var a=n.rawData,i=a.id,l=a.isE2EE,s=a.isEPD,u=a.renderIndex,c=a.searchResultType,d=a.searchSource;r("UniversalSearchResultSelectedFalcoEvent").log(function(){return{data_sources:o("MWSearchLogging").getLoggingDataSources(d),is_epd:r("gkx")("23390")||s,search_result:{query_string:t,result_fbid:i,result_index:(u!=null?u:-1).toString(),result_type:c!=null?c:7},session_id:e,transport_type:o("MWSearchLogging").getTransportType(l),ui_section:o("MWSearchLogging").mapSectionToSearchUISection(t,a)}})}}function C(e,t,n,o){e===!0?r("QPLUserFlow").endSuccess(r("qpl")._(25312244,"1683")):r("QPLUserFlow").endCancel(r("qpl")._(25312244,"1683")),y(t,n,o)}function b(t){var n=o("react-compiler-runtime").c(8),a=(e||(e=r("useReStore")))(),l;n[0]!==t||n[1]!==a.tables.contacts?(l=function(){return o("ReQL").fromTableAscending(a.tables.contacts).getKeyRange((u||(u=o("I64"))).of_string(t)).map(v)},n[0]=t,n[1]=a.tables.contacts,n[2]=l):l=n[2];var s;n[3]!==t||n[4]!==a?(s=[t,a],n[3]=t,n[4]=a,n[5]=s):s=n[5];var c=o("ReQLSuspense").useFirst(l,s,i.id+":205"),d;return n[6]!==c?(d=c!=null?(u||(u=o("I64"))).to_float(c):null,n[6]=c,n[7]=d):d=n[7],d}function v(e){return e.contactReachabilityStatusType}l.getSessionId=c,l.isUnjoinedPublicChat=d,l.shouldUpdateThreadKey=m,l.genLinkHash=p,l.isUnjoinedBroadcastChannel=_,l.isBroadcastChannel=f,l.gete2eeAttributionSubtext=g,l.getChatNavigationUrl=h,l.logSearchResultClickHepler=y,l.logSearchResultClick=C,l.useReachabilityStatus=b}),226);
__d("UniversalSearchImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("845"),s=o("FalcoLoggerInternal").create("universal_search_impression",e),u=s;l.default=u}),98);
__d("useUniversalSearchImpressionFalcoEvent",["MWSearchLogging","MWSearchQPLLogger","UniversalSearchImpressionFalcoEvent","react","react-compiler-runtime","usePartialViewImpression"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t,n=o("react-compiler-runtime").c(17),a=e.cmGroupId,i=e.entry,l=e.instanceId,s=e.queryString,u=i.rawData,c=u.id,d=u.isE2EE,m=u.isEPD,p=u.renderIndex,_=u.searchResultType,f=u.searchSource,g=c,h=g,y=p!=null?p:-1,C;n[0]!==y?(C=y.toString(),n[0]=y,n[1]=C):C=n[1];var b=C,v;if(n[2]!==a||n[3]!==((t=i.rawData)==null?void 0:t.query)||n[4]!==l||n[5]!==d||n[6]!==m||n[7]!==s||n[8]!==u||n[9]!==p||n[10]!==h||n[11]!==b||n[12]!==_||n[13]!==f){var S;v=function(){var e;l!=null&&(r("UniversalSearchImpressionFalcoEvent").log(function(){return{cm_group_id:a,data_sources:o("MWSearchLogging").getLoggingDataSources(f),impression_selected:!1,is_epd:m,search_result:{query_string:s,result_fbid:h,result_index:b,result_type:_!=null?_:7},session_id:l,transport_type:o("MWSearchLogging").getTransportType(d),ui_section:o("MWSearchLogging").mapSectionToSearchUISection(s,u)}}),o("MWSearchQPLLogger")==null||o("MWSearchQPLLogger").renderSearchResult({queryString:(e=i.rawData)==null?void 0:e.query,renderIndex:p!=null?p:-1,sessionInstanceId:l,source:f}))},n[2]=a,n[3]=(S=i.rawData)==null?void 0:S.query,n[4]=l,n[5]=d,n[6]=m,n[7]=s,n[8]=u,n[9]=p,n[10]=h,n[11]=b,n[12]=_,n[13]=f,n[14]=v}else v=n[14];var R=v,L;return n[15]!==R?(L={onImpressionStart:R},n[15]=R,n[16]=L):L=n[16],r("usePartialViewImpression")(L)}l.default=u}),98);
__d("MWJewelSearchTypeaheadViewItem.react",["BaseMiddot.react","CometTypeaheadViewItem.react","FBLogger","I64","LSIntEnum","LSThreadAttributionStore","MAWThreadCutover","MWJewelSearchTypeaheadViewItemStartContent.react","MWJewelSearchTypeaheadViewItemUtils","MWLSThreadDisplayContext","MWXPageVerificationIcon.react","MWXText.react","MWXTextPairing.react","cr:393","cr:4538","cr:4539","cr:8414","cr:8415","cr:8417","deferredLoadComponent","isStringNullOrEmpty","mwCMIsAnyCMThread","react","requireDeferred","useMWNavigation","useMergeRefs","useUniversalSearchImpressionFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=["entry","extraViewItemProps","onPressEntry","queryString"],s,u,c,d=s||(s=o("react")),m=s,p=m.useEffect,_=m.useRef,f=m.useState,g=r("deferredLoadComponent")(r("requireDeferred")("MAWChatVerifyCutover.react").__setRef("MWJewelSearchTypeaheadViewItem.react")),h={contentRoot:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",marginTop:"xdj266r",marginBottom:"xat24cr",paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",":hover_backgroundColor":"x8du52y",$$css:!0}};function y(t){var a=t.entry,i=t.extraViewItemProps,l=t.onPressEntry,s=t.queryString,m=babelHelpers.objectWithoutPropertiesLoose(t,e),y=a.rawData,C=y.id,b=y.isE2EE,v=y.isInstagramAccount,S=y.isInteropEligible,R=y.otherUserId,L=y.resultType,E=y.searchSource,k=y.section,I=y.serverSearchResult,T=y.subtext,D=y.subtextAdditional,x=y.threadType,$=y.verificationStatus,P=n("cr:4538")==null?void 0:n("cr:4538")(),N=n("cr:4539")==null?void 0:n("cr:4539")({onSuccess:function(t){return P==null?void 0:P(t)}}),M=o("MAWThreadCutover").useShouldHideE2eeAttribution((u||(u=o("I64"))).of_string_opt(C),x),w=r("useMWNavigation")(),A=x!=null&&r("mwCMIsAnyCMThread")(x),F=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),O=o("MWJewelSearchTypeaheadViewItemUtils").getSessionId(i),B=r("useUniversalSearchImpressionFalcoEvent")({entry:a,instanceId:O,isCommunityChat:A,queryString:s}),W=_(null),q=r("useMergeRefs")(W,B),U=n("cr:8414")(),V=f(),H=V[0],G=V[1],z=R,j=b&&!M?o("MWJewelSearchTypeaheadViewItemUtils").gete2eeAttributionSubtext():T;p(function(){if(m.isActive){var e;(e=W.current)==null||e.scrollIntoView({block:"nearest"})}},[m.isActive]);var K=H!=null?H:C,Q=o("MWJewelSearchTypeaheadViewItemUtils").genLinkHash(I),X=o("MWJewelSearchTypeaheadViewItemUtils").useReachabilityStatus(K),Y=babelHelpers.extends({},a,{key:K,rawData:babelHelpers.extends({},y,{id:K},z==null&&C!==K?{otherUserId:C}:{})}),J=$==="BLUE_VERIFIED"||$==="GRAY_VERIFIED";return r("isStringNullOrEmpty")(a.label)&&n("cr:8415")!=null&&E!=="null_state_recent"?(r("FBLogger")("search").warn("aibolk Empty search result label for entry: %s",a.rawData.id),null):d.jsx("div",{ref:q,children:d.jsxs(r("CometTypeaheadViewItem.react"),babelHelpers.extends({},m,{entry:Y,isDisabled:v===!0&&S===!1,itemEndContent:E==="null_state_recent"&&n("cr:8417")!=null?d.jsx(n("cr:8417"),{entry:a}):null,itemStartContent:d.jsx(r("MWJewelSearchTypeaheadViewItemStartContent.react"),{entry:a}),linkProps:{preventLocalNavigation:!0,url:o("MWJewelSearchTypeaheadViewItemUtils").getChatNavigationUrl(Q,K)},onPressEntry:function(t,n){var e=(i==null?void 0:i.onBeforeTokenAdded)!=null?i.onBeforeTokenAdded({reachabilityStatus:X}):!0;if(e===!0){var r=o("LSThreadAttributionStore").getSourceForNewThread();if(r==="jewel"||r==="unknown"&&F==null?r="jewelSearch":r==="unknown"&&F==="ChatTab"?r="chatheadsNewMessage":r==="unknown"&&F==="Inbox"&&(r="messengerUniversalSearch"),r!=="unknown"&&o("LSThreadAttributionStore").setSource(K,r),o("MWJewelSearchTypeaheadViewItemUtils").isUnjoinedPublicChat(I)){var d=I!=null?I:{},m=d.threadJoinLinkHash;m!=null&&(N==null||N(m))}else o("MWJewelSearchTypeaheadViewItemUtils").isUnjoinedBroadcastChannel(x)?(U==null||U(a),w.openInbox({threadKey:(u||(u=o("I64"))).of_string(K),threadLinkHash:Q,threadType:(c||(c=o("LSIntEnum"))).ofNumber(153)},"jewelSearch")):(l(t,n),o("MWJewelSearchTypeaheadViewItemUtils").logSearchResultClick(A,O,s,a))}},testid:void 0,xstyle:h.contentRoot,children:[o("MWJewelSearchTypeaheadViewItemUtils").shouldUpdateThreadKey()?d.jsx(g,{id:C.toString(),updateThreadKey:G}):null,d.jsx(r("MWXTextPairing.react"),{body:d.jsxs(r("MWXText.react"),{numberOfLines:1,type:"body3",children:[E==="null_state_recent"&&n("cr:8415")!=null?d.jsx(n("cr:8415"),{entry:a}):a.label,$!=null&&J&&!o("MWJewelSearchTypeaheadViewItemUtils").isBroadcastChannel(x)?d.jsx("span",{className:"xmzvs34",children:d.jsx(r("MWXPageVerificationIcon.react"),{size:"small",verificationBadge:$})}):null]}),level:3,meta:j&&j!==""?d.jsxs(r("MWXText.react"),{numberOfLines:1,type:"meta4",children:[j,o("MWJewelSearchTypeaheadViewItemUtils").isBroadcastChannel(x)&&!!D&&d.jsxs(d.Fragment,{children:[$!=null&&J&&d.jsx("span",{className:"x135b78x xxymvpz",children:d.jsx(r("MWXPageVerificationIcon.react"),{size:"small",verificationBadge:$})}),d.jsx(r("BaseMiddot.react"),{}),D]}),(k==null||k==="")&&a.rawData.isInstagramAccount?d.jsxs(d.Fragment,{children:[d.jsx(r("BaseMiddot.react"),{}),"Instagram"]}):null]}):null}),n("cr:393")!=null&&d.jsx(n("cr:393"),{rawData:Y.rawData})]}))})}y.displayName=y.name+" [from "+i.id+"]",l.default=y}),98);
__d("MWJewelSearchTypeaheadViewItemLabel.react",["Actor","I64","LSAuthorityLevel","LSIntEnum","MWChatSearchResultType","MWLSParticipant","MWLSThreadTitle","ReQL","ReQLSuspense","isStringNullOrEmpty","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var n=o("react-compiler-runtime").c(15),a=t.entry,l=(u||(u=r("useReStore")))(),c=o("Actor").useActor(),d=c[0],m=a.rawData,p=m.id,_=m.resultType,f,g;n[0]!==l||n[1]!==p||n[2]!==_?(f=function(){return _!==r("MWChatSearchResultType").GROUP?o("ReQL").empty():o("ReQL").fromTableAscending(l.tables.threads).getKeyRange((e||(e=o("I64"))).of_string(p))},g=[_,p,l],n[0]=l,n[1]=p,n[2]=_,n[3]=f,n[4]=g):(f=n[3],g=n[4]);var h=o("ReQLSuspense").useFirst(f,g,i.id+":38"),y,C;n[5]!==l||n[6]!==p||n[7]!==_?(y=function(){return _!==r("MWChatSearchResultType").GROUP?o("ReQL").empty():o("MWLSParticipant").getAllInOpenThread(l,o("ReQL").fromTableAscending(l.tables.contacts),(e||(e=o("I64"))).of_string(p))},C=[p,_,l],n[5]=l,n[6]=p,n[7]=_,n[8]=y,n[9]=C):(y=n[8],C=n[9]);var b=o("ReQLSuspense").useArray(y,C,i.id+":45");if(!r("isStringNullOrEmpty")(a.label))return a.label;if(h!=null&&(e||(e=o("I64"))).ge(h.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").SERVER_PARTIAL))){var v;return n[10]!==d||n[11]!==b||n[12]!==h.threadName||n[13]!==h.threadType?(v=o("MWLSThreadTitle").getDefaultThreadTitle(h.threadName,(e||(e=o("I64"))).of_string(d),b,h.threadType),n[10]=d,n[11]=b,n[12]=h.threadName,n[13]=h.threadType,n[14]=v):v=n[14],v}return a.label}l.default=c}),98);
__d("MWRecentSearchDeleteButton.react",["fbt","CometInternalTypeaheadFetchContext","MWRecentSearchesStorage","MWXCircleButton.react","MWXIconCross","promiseDone","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useContext;function p(e){var t=o("react-compiler-runtime").c(8),n=e.entry,a=m(r("CometInternalTypeaheadFetchContext")),i=a.refetch,l;t[0]!==n.key||t[1]!==i?(l=function(){r("promiseDone")(o("MWRecentSearchesStorage").clearRecentSearchItem(n.key),function(){i==null||i()})},t[0]=n.key,t[1]=i,t[2]=l):l=t[2];var c=l,d;t[3]!==n.label?(d=s._(/*BTDS*/"Clear {contact or thread name} from recent searches",[s._param("contact or thread name",n.label)]),t[3]=n.label,t[4]=d):d=t[4];var p;return t[5]!==c||t[6]!==d?(p=u.jsx(r("MWXCircleButton.react"),{"aria-label":d,color:"secondary",icon:r("MWXIconCross"),onPress:c,size:24,type:"deemphasized"}),t[5]=c,t[6]=d,t[7]=p):p=t[7],p}l.default=p}),226);
__d("MWXSpacing.stylex",[],(function(t,n,r,o,a,i,l){"use strict";var e="@media (max-width: 320px), (max-height: 256px)",s={spacing4:"var(--x1e4hm47)",spacing8:"var(--x15qbgmd)",spacing10:"var(--x19nwfu8)",spacing12:"var(--xxjzes5)",spacing16:"var(--xsyyfky)",spacing20:"var(--x44p0ev)",spacing24:"var(--x1npqni6)",__varGroupHash__:"x1g5acrz"};l.MWXSpacing=s}),98);
__d("useAddSearchResultToRecents",["MWRecentSearchesStorage","promiseDone","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(){return c}function c(e){r("promiseDone")(o("MWRecentSearchesStorage").upsertRecentSearchEntry(e))}l.default=u}),98);
__d("useMWChatSearchClearSearchResults",["LSClearTablesStoredProcedure","LSFactory","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback;function c(){var t=o("react-compiler-runtime").c(2),n=(e||(e=r("useReStore")))(),a;return t[0]!==n?(a=function(){r("promiseDone")(n.runInTransaction(d,"readwrite",void 0,void 0,i.id+":22"))},t[0]=n,t[1]=a):a=t[1],a}function d(e){return r("LSClearTablesStoredProcedure")(r("LSFactory")(e),{clearMessageResults:!1})}l.default=c}),98);/*FB_PKG_DELIM*/
__d("FBGroupChatInviteState",[],(function(t,n,r,o,a,i){var e=Object.freeze({ACCEPTED:1,ACTIVE:2,DECLINED_BY_RECEIVER:3,IGNORED_BY_RECEIVER:4,DELETED_BY_SENDER:5,DISCARDED:6});i.default=e}),66);
__d("GroupFeatureType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["ARTICLES","AUTO_INVITES","CHATS","CHILDHOOD_VACCINES","CLIMATE_PLEDGE","COMMUNITY_GIVING","COMMUNITY_MESSAGING","EVENTS","FANTASY_LEAGUE","FILES","FUNDRAISER_CHALLENGE","GAME_LINKS","GIF","GROUP_AFFILIATION","GUIDES","HORIZON_WORLDS","LIVE","LOOKING_FOR_PLAYERS","MARKETPLACE_JOBS","PLAYER_INFO","POLL","PRODUCT_TAGGING","QN_A","RAISE_MONEY","REEL","REPUTATION_SYSTEM","REQUEST_OR_OFFER_HELP","ROOMS","SELLING","SELL_SOMETHING","SETTING","SUPPORTER_STICKERS","TOPIC_CHANNELS","USER_SIGNAL","WELCOME_POST"]),l=e;i.default=l}),66);
__d("MWCMCasaOffboardingNuxDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9311215579001270"}),null);
__d("MWCMCasaOffboardingNuxDialogQuery$Parameters",["MWCMCasaOffboardingNuxDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWCMCasaOffboardingNuxDialogQuery_facebookRelayOperation"),metadata:{},name:"MWCMCasaOffboardingNuxDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("XFBGroupFeatureTypeUtils.facebook",["$InternalEnumUtils","GroupFeatureType"],(function(t,n,r,o,a,i,l){var e=o("$InternalEnumUtils").createToJSEnum(r("GroupFeatureType")),s=o("$InternalEnumUtils").createFromJSEnum(r("GroupFeatureType"));l.toJSEnum=e,l.fromJSEnum=s}),98);
__d("GroupsCometCMOffboardingDialog.entrypoint",["JSResourceForInteraction","MWCMCasaOffboardingNuxDialogQuery$Parameters","XFBGroupFeatureTypeUtils.facebook"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e,n=t.groupID;return{queries:{queryReference:{parameters:r("MWCMCasaOffboardingNuxDialogQuery$Parameters"),variables:{communityMessagingFeatureType:(e=o("XFBGroupFeatureTypeUtils.facebook").fromJSEnum("COMMUNITY_MESSAGING"))!=null?e:"COMMUNITY_MESSAGING",groupID:n}}}}},root:r("JSResourceForInteraction")("MWCMCasaOffboardingNuxDialog.react").__setRef("GroupsCometCMOffboardingDialog.entrypoint")};l.default=e}),98);
__d("JSSet.bs",[],(function(t,n,r,o,a,i){"use strict";function e(e){return Array.from(e.values())}i.values=e}),66);
__d("LSOptimisticUpdateHasPendingJoinRequest",["LSLocalize"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.forEach(t.filter(t.db.table(9).fetch(),function(n){return n.needsAdminApprovalForNewParticipant===!0&&t.i64.eq(n.threadKey,e[0])}),function(o){var a=o.item;return t.sequence([function(o){return e[1]?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,3199643703]),void 0).then(function(e){return r[2]=e})},function(e){return r[0]=r[2]}]):t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1531706844]),void 0).then(function(e){return r[2]=e})},function(e){return r[0]=r[2]}])},function(n){return r[1]=a.lastReadWatermarkTimestampMs,t.forEach(t.db.table(9).fetch([[[a.threadKey]]]),function(t){var n=t.update,o=t.item;return n({hasPendingJoinRequest:e[1],snippet:r[0],lastReadWatermarkTimestampMs:r[1]})})}])})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticUpdateHasPendingJoinRequestStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSSetCommunityChannelJoiningErrorCodeForTask",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSMailboxSetCommunityChannelJoiningErrorCodeForTaskStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSUpdateCommunityChannelJoiningTaskID",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(162).fetch([[[e[0]]],"byFbGroupId"],[[[e[0]]]]),function(n){return t.i64.eq(n.fbGroupId,e[0])||t.i64.eq(n.communityType,t.i64.cast([0,1]))&&t.i64.eq(n.folderId,e[0])}),function(t){var n=t.update,r=t.item;return n({joiningChannelTaskId:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateCommunityChannelJoiningTaskIDStoredProcedure",e.__tables__=["community_folders"],a.exports=e}),null);
__d("LSJoinCommunityChannel",["LSIssueNewError","LSIssueNewTaskAndGetTaskID","LSLocalize","LSOptimisticUpdateHasPendingJoinRequest","LSSetCommunityChannelJoiningErrorCodeForTask","LSUpdateCommunityChannelJoiningTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([-1,4294967295]):(n=a.item,r[0]=n.parentThreadKey)})},function(e){return t.db.table(162).fetch([[[r[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[2]=t.i64.cast([-1,4294967295]):(n=a.item,t.i64.eq(n.communityType,t.i64.cast([0,1]))?r[13]=n.folderId:r[13]=n.fbGroupId,r[2]=r[13])})},function(e){return t.storedProcedure(n("LSSetCommunityChannelJoiningErrorCodeForTask"),r[2],void 0)},function(r){return e[2]?t.storedProcedure(n("LSOptimisticUpdateHasPendingJoinRequest"),e[0],!0):t.resolve()},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[4]=t.i64.cast([0,1]):(n=a.item,r[14]=n.syncGroup,t.i64.neq(r[14],void 0)?r[13]=r[14]:r[13]=t.i64.cast([0,1]),r[4]=r[13])})},function(e){return t.sortBy(t.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[6]=!1:(t=o.item,r[6]=t.errorShouldBeShown)})},function(e){return r[6]===!0?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2285622730]),void 0).then(function(e){return r[13]=e})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1919524925]),void 0).then(function(e){return r[14]=e})},function(e){return t.storedProcedure(n("LSIssueNewError"),void 0,t.i64.cast([0,1545093]),r[13],r[14],void 0,void 0)}]):t.resolve()},function(o){return r[8]=new t.Map,r[8].set("thread_key",e[0]),r[8].set("community_id",r[2]),r[8].set("sync_group",r[4]),r[8].set("entry_point",e[1]),r[8].set("is_request_to_join",e[2]),r[8].set("request_source",void 0),t.i64.gt(t.i64.cast([0,0]),t.i64.cast([0,0]))?(r[13]=t.i64.of_float(Date.now()),r[9]=t.i64.add(r[13],t.i64.cast([0,0]))):r[9]=t.i64.cast([0,0]),r[10]=r[8].get("thread_key"),r[11]=t.toJSON(r[8]),t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),t.i64.to_string(r[10]),t.i64.cast([0,337]),r[11],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,r[9],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[12]=t[0],t})},function(e){return t.storedProcedure(n("LSUpdateCommunityChannelJoiningTaskID"),r[2],r[12])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxJoinCommunityChannelStoredProcedure",e.__tables__=["threads","community_folders","user_visible_network_connectivity_error"],a.exports=e}),null);
__d("LSJoinCommunityChannelStoredProcedure",["LSJoinCommunityChannel","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSJoinCommunityChannel"),a.threadKey,a.entryPoint,a.isRequestToJoin);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSUpdateCommunityChannelDirectInvite",["LSIssueNewError","LSIssueNewTaskAndGetTaskID","LSLocalize","LSOptimisticUpdateHasPendingJoinRequest","LSUpdateCommunityChannelJoiningTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.i64.eq(e[1],t.i64.cast([0,1])),t.resolve()},function(e){return t.sortBy(t.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[0]=!1:(t=o.item,r[0]=t.errorShouldBeShown)})},function(e){return r[0]===!0?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2285622730]),void 0).then(function(e){return r[11]=e})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1919524925]),void 0).then(function(e){return r[12]=e})},function(e){return t.storedProcedure(n("LSIssueNewError"),void 0,t.i64.cast([0,1545093]),r[11],r[12],void 0,void 0)}]):t.resolve()},function(o){return r[2]=new t.Map,r[2].set("channel_id",e[0]),r[2].set("state",e[1]),r[2].set("is_request_to_join",!1),t.i64.gt(t.i64.cast([0,0]),t.i64.cast([0,0]))?(r[11]=t.i64.of_float(Date.now()),r[3]=t.i64.add(r[11],t.i64.cast([0,0]))):r[3]=t.i64.cast([0,0]),r[4]=r[2].get("channel_id"),r[5]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),["community_channel_invitation","_",t.i64.to_string(r[4])].join(""),t.i64.cast([0,463]),r[5],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,r[3],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[6]=t[0],t})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[7]=t.i64.cast([-1,4294967295]):(n=a.item,r[7]=n.parentThreadKey)})},function(e){return t.db.table(162).fetch([[[r[7]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[9]=t.i64.cast([-1,4294967295]):(n=a.item,r[9]=n.fbGroupId)})},function(o){return t.i64.eq(e[1],t.i64.cast([0,1]))?t.storedProcedure(n("LSUpdateCommunityChannelJoiningTaskID"),r[9],r[6]):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpdateCommunityChannelDirectInviteStoredProcedure",e.__tables__=["user_visible_network_connectivity_error","threads","community_folders"],a.exports=e}),null);
__d("LSUpdateCommunityChannelDirectInviteStoredProcedure",["LSSynchronousPromise","LSUpdateCommunityChannelDirectInvite","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSUpdateCommunityChannelDirectInvite"),a.channelId,a.state);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWGroupInvitesForThread",["LSMessagingThreadTypeUtil","LSThreadBitOffset"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType),n=o("LSMessagingThreadTypeUtil").isGroup(e.threadType),r=o("LSThreadBitOffset").has(105,e);return t&&n?r:!1}l.isGroupInviteThread=e}),98);
__d("MWFDSCheckmark.svg.react",["cr:21598"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21598")}),98);
__d("MWFDSDisappearingMessage.svg.react",["cr:21626"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21626")}),98);
__d("MWFDSPauseChat.svg.react",["cr:21726"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21726")}),98);
__d("MWJewelThreadSnippet.react",["CurrentEnvironment","MWXText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(8),n=e.isUnread,a=e.text,i=e.type,l=i==="missedCall";if(n){if(r("CurrentEnvironment").facebookdotcom){var c=l?"negative":"primary",d;return t[2]!==c||t[3]!==a?(d=s.jsx(r("MWXText.react"),{color:c,numberOfLines:1,showTruncationTooltip:!1,type:"bodyLink4",children:a}),t[2]=c,t[3]=a,t[4]=d):d=t[4],d}}else{var u;return t[0]!==a?(u=s.jsx(r("MWXText.react"),{color:"secondary",numberOfLines:1,showTruncationTooltip:!1,type:"body4",children:a}),t[0]=a,t[1]=u):u=t[1],u}var m=l?"negative":"primary",p;return t[5]!==m||t[6]!==a?(p=s.jsx(r("MWXText.react"),{color:m,numberOfLines:1,type:"entityHeaderMeta3",children:a}),t[5]=m,t[6]=a,t[7]=p):p=t[7],p}l.default=u}),98);
__d("MWXIconCheckmark",["MWXSvgIcon","SVGIcon","cr:22262","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22262")),r("gkx")("23219"));l.default=e}),98);
__d("MWPThreadListItemInviteAddOn.react",["fbt","MWPBumpEntityKey","MWXCircleButton.react","MWXIconCheckmark","MWXIconCross","MWXRow.react","MWXRowItem.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=s._(/*BTDS*/"Accept invite"),d=s._(/*BTDS*/"Decline invite");function m(e){var t=o("react-compiler-runtime").c(7),n=e.onAccept,a=e.onDecline,i;t[0]!==n?(i=u.jsx(r("MWXRowItem.react"),{children:u.jsx(r("MWXCircleButton.react"),{"aria-label":c,icon:r("MWXIconCheckmark"),onPress:function(t){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","thread_invite.accept"),n(t)},size:32})}),t[0]=n,t[1]=i):i=t[1];var l;t[2]!==a?(l=u.jsx(r("MWXRowItem.react"),{children:u.jsx(r("MWXCircleButton.react"),{"aria-label":d,icon:r("MWXIconCross"),onPress:function(t){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","thread_invite.decline"),a(t)},size:32})}),t[2]=a,t[3]=l):l=t[3];var s;return t[4]!==i||t[5]!==l?(s=u.jsxs(r("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",children:[i,l]}),t[4]=i,t[5]=l,t[6]=s):s=t[6],s}l.default=m}),226);
__d("MWPThreadsForThreadList",["I64","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,r,a){if(r!=null){var i=o("ReQL").fromTableDescending(t.tables.threads.index("parentThreadKeyLastActivityTimestampMs"),a).getKeyRange(n).bounds({gt:o("ReQL").key((e||(e=o("I64"))).zero)}),l=r.minLastActivityTimestampMs,s=r.maxLastActivityTimestampMs,u=!(e||(e=o("I64"))).equal(l,(e||(e=o("I64"))).zero)&&!(e||(e=o("I64"))).equal(l,(e||(e=o("I64"))).one)?l:void 0,c=!(e||(e=o("I64"))).equal(s,(e||(e=o("I64"))).zero)&&!(e||(e=o("I64"))).equal(s,(e||(e=o("I64"))).one)?s:void 0;return u!=null?c!=null?i.bounds({gte:o("ReQL").key(u),lte:o("ReQL").key(c)}):i.bounds({gte:o("ReQL").key(u)}):c!=null?i.bounds({lte:o("ReQL").key(c)}):i}return o("ReQL").empty()}l.createIterable=s}),98);
__d("MWXIconPauseChat",["MWXSvgIcon","SVGIcon","cr:22420","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22420")),r("gkx")("23219"));l.default=e}),98);
__d("MWThreadAddOnSecondary.react",["fbt","CometOverlappingFacepile_DEPRECATED.react","CurrentEnvironment","FDSBadge.react","I64","MWPActor.react","MWXIconBellCross","MWXIconPauseChat","MWXIconPushpin","MWXIconStrict.react","MWXPressable.react","ReQL","ReQLSuspense","getLSMediaContactProfilePictureUrl","isArmadillo","react","react-compiler-runtime","useMWIsReadReceiptsDisabledForThread","useMWLSMarkThreadAsRead","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=c.memo;function p(t){var n=o("react-compiler-runtime").c(19),a=(e||(e=r("useReStore")))(),l=o("MWPActor.react").useActor(),s;n[0]!==a.tables.threads||n[1]!==t?(s=function(){return o("ReQL").fromTableAscending(a.tables.threads,["threadKey","lastActivityTimestampMs"]).getKeyRange(t)},n[0]=a.tables.threads,n[1]=t,n[2]=s):s=n[2];var c;n[3]!==a||n[4]!==t?(c=[a,t],n[3]=a,n[4]=t,n[5]=c):c=n[5];var d=o("ReQLSuspense").useFirst(s,c,i.id+":54"),m=r("useMWIsReadReceiptsDisabledForThread")(t),p;n[6]!==l||n[7]!==a.tables.contacts||n[8]!==a.tables.participants||n[9]!==m||n[10]!==d?(p=function(){return m||d==null?o("ReQL").empty():o("ReQL").fromTableAscending(a.tables.participants.index("threadKeyReadWatermarkTimestampMs"),["contactId"]).getKeyRange(d.threadKey).bounds({gte:o("ReQL").key(d.lastActivityTimestampMs)}).filter(function(e){var t=e.contactId;return!(u||(u=o("I64"))).equal(t,l)}).take(3).map(function(e){var t=e.contactId,n=o("ReQLSuspense").first(o("ReQL").fromTableAscending(a.tables.contacts,["name","profilePictureFallbackUrl","profilePictureUrl","profilePictureUrlExpirationTimestampMs"]).getKeyRange(t),i.id+":82");return n!=null?{alt:n.name,source:{uri:r("getLSMediaContactProfilePictureUrl")(n)}}:null})},n[6]=l,n[7]=a.tables.contacts,n[8]=a.tables.participants,n[9]=m,n[10]=d,n[11]=p):p=n[11];var _;n[12]!==l||n[13]!==a||n[14]!==m||n[15]!==d?(_=[a,l,d,m],n[12]=l,n[13]=a,n[14]=m,n[15]=d,n[16]=_):_=n[16];var f=o("ReQLSuspense").useArray(p,_,i.id+":65"),g;return n[17]!==f?(g=f.filter(Boolean),n[17]=f,n[18]=g):g=n[18],g}function _(e){var t=o("react-compiler-runtime").c(26),n=e.entryPoint,a=e.isMuted,i=e.isPaused,l=e.isPinnedThread,u=e.isUnread,c=e.isViewerSender,m=e.lastMessageDeliveryStatusIcon,_=e.thread,g=r("useMWLSMarkThreadAsRead")(n),h=p(_.threadKey),y;if(t[0]!==a||t[1]!==i||t[2]!==l||t[3]!==u||t[4]!==c||t[5]!==m||t[6]!==g||t[7]!==h){if(y=[],i){var C;t[9]===Symbol.for("react.memo_cache_sentinel")?(C=d.jsx(r("MWXIconStrict.react"),{color:"disabled",icon:r("MWXIconPauseChat"),size:16}),t[9]=C):C=t[9],y.push(C)}if(a){var b;t[10]===Symbol.for("react.memo_cache_sentinel")?(b=d.jsx(r("MWXIconStrict.react"),{color:"disabled",icon:r("MWXIconBellCross"),size:16}),t[10]=b):b=t[10],y.push(b)}if(l){var v;t[11]===Symbol.for("react.memo_cache_sentinel")?(v=d.jsx(r("MWXIconStrict.react"),{alt:s._(/*BTDS*/"Pinned thread"),color:"disabled",icon:r("MWXIconPushpin"),size:16}),t[11]=v):v=t[11],y.push(v)}if(u){var S;t[12]!==g?(S=function(t){return g()},t[12]=g,t[13]=S):S=t[13];var R;t[14]===Symbol.for("react.memo_cache_sentinel")?(R=d.jsx(r("FDSBadge.react"),{color:"blue",isProfileBadge:!0,size:r("isArmadillo")()&&r("CurrentEnvironment").messengerdotcom?10:12}),t[14]=R):R=t[14];var L;t[15]!==S?(L=d.jsx(r("MWXPressable.react"),{"aria-hidden":!0,expanding:!0,focusable:!1,onPress:S,testid:void 0,children:R}),t[15]=S,t[16]=L):L=t[16],y.push(L)}else if(c)if(h.length===0)m&&y.push(m);else{var E;t[17]!==h[0]||t[18]!==h.length?(E=h.length===1?s._(/*BTDS*/"Seen by {=personName}",[s._param("=personName",h[0].alt)]):s._(/*BTDS*/"_j{\"*\":\"Seen by {=numPeople} people\"}",[s._param("=numPeople",h.length,[0])]),t[17]=h[0],t[18]=h.length,t[19]=E):E=t[19];var k;t[20]!==h||t[21]!==E?(k=d.jsx(r("CometOverlappingFacepile_DEPRECATED.react"),{count:h.length,isTextInline:!0,items:h,screenReaderLabel:E,size:16}),t[20]=h,t[21]=E,t[22]=k):k=t[22],y.push(k)}t[0]=a,t[1]=i,t[2]=l,t[3]=u,t[4]=c,t[5]=m,t[6]=g,t[7]=h,t[8]=y}else y=t[8];var I;t[23]===Symbol.for("react.memo_cache_sentinel")?(I={className:"x6s0dn4 x78zum5 xozqiw3"},t[23]=I):I=t[23];var T;return t[24]!==y?(T=d.jsx("div",babelHelpers.extends({},I,{children:y.map(f)})),t[24]=y,t[25]=T):T=t[25],T}function f(e,t){return d.jsxs(d.Fragment,{children:[t!==0?d.jsx("div",{className:"x1fsd2vl"}):null,e]},"item_"+t.toString(10))}f.displayName=f.name+" [from "+i.id+"]";var g=m(_);l.default=g}),226);
__d("useMWLogLongSuspense",["MWPBumpEntityKey","clearTimeout","react","react-compiler-runtime","setTimeout","useMergeRefs","useVisibilityObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef;function m(e,t){var n=_(e,5,t),o=_(e,15,t),a=_(e,60,t),i=_(e,300,t);return r("useMergeRefs")(n,o,a,i)}var p=/\W/g;function _(e,t,n){var a=o("react-compiler-runtime").c(11),i;a[0]!==e?(i=e.replace(p,"_"),a[0]=e,a[1]=i):i=a[1];var l=i,s=d(),u;a[2]!==n||a[3]!==l||a[4]!==t?(u=function(){s.current=r("setTimeout")(function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mwp","long_suspension."+l+".suspended_"+t+"_sec"),n==null||n(t)},t*1e3)},a[2]=n,a[3]=l,a[4]=t,a[5]=u):u=a[5];var m=u,_;a[6]===Symbol.for("react.memo_cache_sentinel")?(_=function(){r("clearTimeout")(s.current)},a[6]=_):_=a[6];var f=_,g,h;a[7]===Symbol.for("react.memo_cache_sentinel")?(g=function(){return f},h=[f],a[7]=g,a[8]=h):(g=a[7],h=a[8]),c(g,h);var y;return a[9]!==m?(y={onHidden:f,onVisible:m},a[9]=m,a[10]=y):y=a[10],r("useVisibilityObserver")(y)}l.default=m}),98);
__d("MWThreadListGlimmer.react",["CometVisualCompletionAttributes","MWXGlimmer.react","gkx","react","react-compiler-runtime","react-strict-dom","useMWLogLongSuspense"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={glimmerBody:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"xlup9mm",width:"xktia5q",$$css:!0},glimmerHeadline:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"x1qx5ct2",marginBottom:"x1e56ztr",width:"x3hqpx7",$$css:!0},glimmerPhoto:{flexShrink:"x2lah0s",$$css:!0},glimmerPhoto48:{borderStartStartRadius:"x1iwo8zk",borderStartEndRadius:"x1033uif",borderEndEndRadius:"x179ill4",borderEndStartRadius:"x1b60jn0",height:"xsdox4t",marginInlineEnd:"x1sa5p1d",width:"x1useyqa",$$css:!0},glimmerPhoto56:{borderStartStartRadius:"x1iwo8zk",borderStartEndRadius:"x1033uif",borderEndEndRadius:"x179ill4",borderEndStartRadius:"x1b60jn0",height:"xnnlda6",marginInlineEnd:"x1sa5p1d",width:"x15yg21f",$$css:!0},glimmerRoot:{display:"x78zum5",paddingBottom:"x1a8lsjc",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,paddingTop:"x889kno",$$css:!0},glimmerText:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0}},c=r("gkx")("23219");function d(e){var t=o("react-compiler-runtime").c(8),n=e.ref,a=e.role,i=e.vcIgnore,l;t[0]!==i?(l=i===!0?r("CometVisualCompletionAttributes").IGNORE:{},t[0]=i,t[1]=l):l=t[1];var d;t[2]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:[c?u.glimmerPhoto48:u.glimmerPhoto56,u.glimmerPhoto]}),t[2]=d):d=t[2];var m;t[3]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsxs(o("react-strict-dom").html.div,{style:u.glimmerText,children:[s.jsx(r("MWXGlimmer.react"),{index:1,xstyle:u.glimmerHeadline}),s.jsx(r("MWXGlimmer.react"),{index:2,xstyle:u.glimmerBody})]}),t[3]=m):m=t[3];var p;return t[4]!==n||t[5]!==a||t[6]!==l?(p=s.jsxs(o("react-strict-dom").html.div,babelHelpers.extends({ref:n,role:a,style:u.glimmerRoot},l,{children:[d,m]})),t[4]=n,t[5]=a,t[6]=l,t[7]=p):p=t[7],p}function m(e){var t=o("react-compiler-runtime").c(11),n=e.numberOfItems,a=e.parentComponentForDebug,i=e.role,l=e.vcIgnore,u=n===void 0?1:n,c=r("useMWLogLongSuspense")(a+".MWThreadListGlimmer"),m;if(t[0]!==u||t[1]!==c||t[2]!==i||t[3]!==l){var p;t[5]!==c||t[6]!==i||t[7]!==l?(p=function(t,n){return s.jsx(d,{ref:n===0?c:void 0,role:i,vcIgnore:l},"mw_list_glimmer_"+n)},t[5]=c,t[6]=i,t[7]=l,t[8]=p):p=t[8],m=Array(u).fill(!0).map(p),t[0]=u,t[1]=c,t[2]=i,t[3]=l,t[4]=m}else m=t[4];var _;return t[9]!==m?(_=s.jsx(s.Fragment,{children:m}),t[9]=m,t[10]=_):_=t[10],_}l.default=m}),98);
__d("MWThreadListItemAddOnEnd.react",["fbt","FBGroupChatInviteState","I64","Int64Hooks","LSFactory","LSIntEnum","LSUpdateCommunityChannelDirectInviteStoredProcedure","MWCMGetValidId","MWJewelPopoverDialogContext.react","MWPActor.react","MWPIsThreadUnread","MWPThreadListItemInviteAddOn.react","MWThreadAddOnSecondary.react","ReQL","ReQLSuspense","ThreadStatus","cometPushToast","cr:21160","promiseDone","react","react-compiler-runtime","requireDeferred","useEmptyFunction","useMWChatCalculateIsMutedFromExpireTime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["threadKey","communityId","fbGroupId","renderAddOnEnd"],u,c,d,m,p,_,f=m||(m=o("react")),g=m.useContext,h=r("requireDeferred")("C4gEngagementFalcoEvent").__setRef("MWThreadListItemAddOnEnd.react"),y=(u=(c=n("cr:21160"))==null?void 0:c.useIsPinnedThread)!=null?u:r("useEmptyFunction");function C(e){var t=e.clientExtras,n=e.communityId,r=e.event,a=e.groupId,i=e.parentSurface,l=i===void 0?"channel_list":i,s=e.source,u=e.threadId;h.onReady(function(e){return e.log(function(){return{action:"tap",client_extras:t,community_id:n==null?null:(_||(_=o("I64"))).to_string(n),event:r,group_id:o("MWCMGetValidId").MWCMHasValidFbGroupId(a)?(_||(_=o("I64"))).to_string(a):null,parent_surface:l,source:s,surface:"chat_row",thread_id:(_||(_=o("I64"))).to_string(u)}})})}function b(e){var t,n=o("react-compiler-runtime").c(32),a=e.communityId,l=e.fbGroupId,u=e.isMaximized,c=e.messagingEntrypoint,m=e.mutedUntilMs,h=e.parentSurface,b=e.showGroupsJoinChatDialog,v=e.thread,S=(d||(d=r("useReStore")))(),R=o("MWPActor.react").useActor(),L=v.snippetSenderContactId,E;n[0]!==R||n[1]!==L?(E=L!=null?(_||(_=o("I64"))).equal(L,R):!1,n[0]=R,n[1]=L,n[2]=E):E=n[2];var k=E,I=(_||(_=o("I64"))).equal(v.parentThreadKey,(p||(p=o("LSIntEnum"))).ofNumber(0)),T=g(r("MWJewelPopoverDialogContext.react")),D=T.setIsOpenForDialog,x=v.hasPendingInvitation||!1,$=r("useMWChatCalculateIsMutedFromExpireTime")(m),P=(t=y(v.threadTags))!=null?t:!1,N=o("MWPIsThreadUnread").useIsThreadUnread(v.threadKey),M;n[3]!==v.threadStatus?(M=v.threadStatus!=null&&((_||(_=o("I64"))).equal(v.threadStatus,(_||(_=o("I64"))).of_int32(r("ThreadStatus").PAUSED))||(_||(_=o("I64"))).equal(v.threadStatus,(_||(_=o("I64"))).of_int32(r("ThreadStatus").UPGRADED_TO_COMMUNITY_AND_TO_BE_PAUSED))),n[3]=v.threadStatus,n[4]=M):M=n[4];var w=M,A;n[5]!==a||n[6]!==S||n[7]!==l||n[8]!==h||n[9]!==v.needsAdminApprovalForNewParticipant||n[10]!==v.threadKey?(A=function(){var e;r("promiseDone")(S.runInTransaction(function(e){return r("LSUpdateCommunityChannelDirectInviteStoredProcedure")(r("LSFactory")(e),{channelId:v.threadKey,state:(p||(p=o("LSIntEnum"))).ofNumber(r("FBGroupChatInviteState").DECLINED_BY_RECEIVER)})},"readwrite",void 0,void 0,i.id+":158")),C({clientExtras:{member_join_request_enabled:(e=v.needsAdminApprovalForNewParticipant)!=null&&e?"1":"0"},communityId:a,event:"invite_declined",groupId:l,parentSurface:h,source:"direct_invite_decline_button",threadId:v.threadKey}),o("cometPushToast").cometPushSimpleToast(s._(/*BTDS*/"You declined the invitation to join").toString())},n[5]=a,n[6]=S,n[7]=l,n[8]=h,n[9]=v.needsAdminApprovalForNewParticipant,n[10]=v.threadKey,n[11]=A):A=n[11];var F=A;if(x){var O;n[12]!==a||n[13]!==l||n[14]!==c||n[15]!==h||n[16]!==D||n[17]!==b||n[18]!==v.needsAdminApprovalForNewParticipant||n[19]!==v.threadKey?(O=function(t){var e;return C({clientExtras:{member_join_request_enabled:(e=v.needsAdminApprovalForNewParticipant)!=null&&e?"1":"0"},communityId:a,event:"invite_accepted",groupId:l,parentSurface:h,source:"direct_invite_join_button",threadId:v.threadKey}),D(c==="jewel"),b(t)},n[12]=a,n[13]=l,n[14]=c,n[15]=h,n[16]=D,n[17]=b,n[18]=v.needsAdminApprovalForNewParticipant,n[19]=v.threadKey,n[20]=O):O=n[20];var B;return n[21]!==F||n[22]!==O?(B=f.jsx(r("MWPThreadListItemInviteAddOn.react"),{onAccept:O,onDecline:F}),n[21]=F,n[22]=O,n[23]=B):B=n[23],B}if(u||!I){var W;return n[24]!==$||n[25]!==w||n[26]!==P||n[27]!==N||n[28]!==k||n[29]!==c||n[30]!==v?(W=f.jsx(r("MWThreadAddOnSecondary.react"),{entryPoint:c,isMuted:$,isPaused:w,isPinnedThread:P,isUnread:N,isViewerSender:k,lastMessageDeliveryStatusIcon:null,thread:v}),n[24]=$,n[25]=w,n[26]=P,n[27]=N,n[28]=k,n[29]=c,n[30]=v,n[31]=W):W=n[31],W}return null}var v=f.memo(b);function S(t){var n=o("react-compiler-runtime").c(25),a,l,s,u,c;n[0]!==t?(c=t.threadKey,a=t.communityId,l=t.fbGroupId,s=t.renderAddOnEnd,u=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=l,n[3]=s,n[4]=u,n[5]=c):(a=n[1],l=n[2],s=n[3],u=n[4],c=n[5]);var m,p;n[6]!==l?(m=function(){return l},p=[l],n[6]=l,n[7]=m,n[8]=p):(m=n[7],p=n[8]);var _=o("Int64Hooks").useMemoInt64(m,p),g,h;n[9]!==a?(g=function(){return a},h=[a],n[9]=a,n[10]=g,n[11]=h):(g=n[10],h=n[11]);var y=o("Int64Hooks").useMemoInt64(g,h),C=(d||(d=r("useReStore")))(),b;n[12]!==C.tables.threads||n[13]!==c?(b=function(){return o("ReQL").fromTableAscending(C.tables.threads,["threadType","threadStatus","threadKey","snippetSenderContactId","parentThreadKey","hasPendingInvitation","takedownState","needsAdminApprovalForNewParticipant","threadTags"]).getKeyRange(c)},n[12]=C.tables.threads,n[13]=c,n[14]=b):b=n[14];var S;n[15]!==C||n[16]!==c?(S=[C,c],n[15]=C,n[16]=c,n[17]=S):S=n[17];var R=o("ReQLSuspense").useFirst(b,S,i.id+":248");if(s!=null){var L;return n[18]!==s?(L=s(),n[18]=s,n[19]=L):L=n[19],L}if(R==null)return null;var E;return n[20]!==y||n[21]!==_||n[22]!==u||n[23]!==R?(E=f.jsx(v,babelHelpers.extends({communityId:y,fbGroupId:_,thread:R},u)),n[20]=y,n[21]=_,n[22]=u,n[23]=R,n[24]=E):E=n[24],E}l.default=S}),226);
__d("MWXIconDisappearingMessage",["MWXSvgIcon","SVGIcon","cr:22294","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22294")),r("gkx")("23219"));l.default=e}),98);
__d("useMWThreadListLastMessageGlimmer.react",["Int64Hooks","LSDatabaseSingleton","LSMessagingThreadTypeUtil","MAWMiActOnActThreadReadyWithoutValidator","promiseDone","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useState;function c(e){var t=o("react-compiler-runtime").c(6),n;t[0]!==e?(n=e!=null&&o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)&&e.snippet==null,t[0]=e,t[1]=n):n=t[1];var a=n,i=u(a),l=i[0],c=i[1],d=e==null?void 0:e.threadKey,m,p;return t[2]!==a||t[3]!==d?(m=function(){if(d!=null){if(a===!1){c(!1);return}var e=!1;return r("promiseDone")((s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(t){return o("MAWMiActOnActThreadReadyWithoutValidator").waitForACTThreadReadyWithoutValidator(t.tables,d,"useShouldShowGlimmerForThread").then(function(){e||c(!1)})})),(function(){e=!0})}},p=[d,a],t[2]=a,t[3]=d,t[4]=m,t[5]=p):(m=t[4],p=t[5]),o("Int64Hooks").useEffectInt64(m,p),l}l.default=c}),98);
__d("MWThreadListLastMessage.react",["fbt","BaseMiddot.react","CometErrorBoundary.react","CometHeroHoldTrigger.react","CometScreenReaderText.react","FDSRelativeTimestamp.react","I64","MAWCurrentUser","MAWStrings","MWJewelThreadSnippet.react","MWVerticalRhythm","MWXGlimmer.react","MWXIconDisappearingMessage","MWXIconStrict.react","MWXText.react","isArmadilloUI","justknobx","mwIsThreadDisabled","react","react-compiler-runtime","react-strict-dom","useMWIsStaleCall","useMWPThreadHasSpectraUser","useMWThreadListLastMessageGlimmer.react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d={bodyGlimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"x1l36t39",$$css:!0},bodyGlimmerSecond:{width:"xktia5q",$$css:!0},disappearingMessageVisualIndicator:{paddingInlineEnd:"x14vy60q",$$css:!0},followUpsCTA:{paddingInlineStart:"xyiysdx",$$css:!0},root:{alignItems:"x6s0dn4",color:"xi81zsa",display:"x78zum5",minHeight:"x1hshjfz",$$css:!0},subtext:{paddingInlineStart:"xyiysdx",whiteSpace:"xuxw1ft",$$css:!0},threadSnippet:{alignItems:"x6s0dn4",boxSizing:"x9f619",display:"x78zum5",maxWidth:"x193iq5w",paddingInlineEnd:"x14vy60q",$$css:!0},zeroMinWidth:{minWidth:"xeuugli",$$css:!0}};function m(e){var t,n=o("react-compiler-runtime").c(47),a=e.hasOngoingCall,i=e.isUnread,l=e.lastMessageCtaType,m=e.lastMessageTimestamp,p=e.showDisappearingMessageVisualIndicator,_=e.showFollowUpReminder,f=e.showSnippetText,g=e.showTimestamp,h=e.snippet,y=e.thread,C=_===void 0?!1:_,b=r("useMWThreadListLastMessageGlimmer.react")(y),v=r("useMWIsStaleCall")(y==null?void 0:y.threadType,a,y==null?void 0:y.ongoingCallTimestampMs),S=r("useMWPThreadHasSpectraUser")((t=y==null?void 0:y.threadKey)!=null?t:(u||(u=o("I64"))).zero);if(b===!0){var R;return n[0]===Symbol.for("react.memo_cache_sentinel")?(R=c.jsxs(c.Fragment,{children:[c.jsx(r("MWXGlimmer.react"),{index:1,xstyle:[d.bodyGlimmer,d.bodyGlimmerSecond]}),c.jsx(r("CometHeroHoldTrigger.react"),{description:"MWThreadListLastMessage",hold:!0})]}),n[0]=R):R=n[0],R}var L=l==="xma_rtc_missed_audio"||l==="xma_rtc_missed_group_audio",E=l==="xma_rtc_missed_video"||l==="xma_rtc_missed_group_video",k=L||E,I;n[1]!==f||n[2]!==(y==null?void 0:y.snippetText)||n[3]!==(y==null?void 0:y.takedownState)?(I=f===!0&&!r("mwIsThreadDisabled")(y==null?void 0:y.takedownState)&&(y==null?void 0:y.snippetText)!=null,n[1]=f,n[2]=y==null?void 0:y.snippetText,n[3]=y==null?void 0:y.takedownState,n[4]=I):I=n[4];var T=I,D;n[5]!==y?(D=(y==null?void 0:y.snippetSenderContactId)==null?null:(u||(u=o("I64"))).to_string(y.snippetSenderContactId)===o("MAWCurrentUser").getID(),n[5]=y,n[6]=D):D=n[6];var x=D,$=T?null:d.zeroMinWidth,P;n[7]!==$?(P=[d.threadSnippet,$],n[7]=$,n[8]=P):P=n[8];var N;n[9]!==i?(N=i&&r("justknobx")._("5026")&&c.jsx(r("CometScreenReaderText.react"),{text:s._(/*BTDS*/"Unread message:")}),n[9]=i,n[10]=N):N=n[10];var M;n[11]!==k||n[12]!==i||n[13]!==h?(M=k&&i?o("MAWStrings").MAW_MISSED_CALL_STRING():h,n[11]=k,n[12]=i,n[13]=h,n[14]=M):M=n[14];var w=k?"missedCall":void 0,A;n[15]!==i||n[16]!==M||n[17]!==w?(A=c.jsx(r("MWJewelThreadSnippet.react"),{isUnread:i,text:M,type:w}),n[15]=i,n[16]=M,n[17]=w,n[18]=A):A=n[18];var F;n[19]!==P||n[20]!==N||n[21]!==A?(F=c.jsxs(o("react-strict-dom").html.span,{style:P,children:[N,A]}),n[19]=P,n[20]=N,n[21]=A,n[22]=F):F=n[22];var O;n[23]!==T||n[24]!==(y==null?void 0:y.snippetText)?(O=T===!0&&c.jsxs(r("MWXText.react"),{color:"secondary",numberOfLines:1,type:"body4",children:[c.jsx(o("react-strict-dom").html.span,{children:"\xB7"}),c.jsx(o("react-strict-dom").html.span,{"data-testid":void 0,style:d.subtext,children:y==null?void 0:y.snippetText})]}),n[23]=T,n[24]=y==null?void 0:y.snippetText,n[25]=O):O=n[25];var B;n[26]!==p||n[27]!==g?(B=p===!0&&c.jsxs(c.Fragment,{children:[c.jsx(r("MWXText.react"),{color:"secondary",numberOfLines:1,type:"body4",children:c.jsx(r("BaseMiddot.react"),{})}),c.jsx(o("react-strict-dom").html.span,{"data-testid":void 0,style:[d.subtext,g?d.disappearingMessageVisualIndicator:void 0],children:c.jsx(r("MWXIconStrict.react"),{color:"secondary",icon:r("MWXIconDisappearingMessage"),size:12})})]}),n[26]=p,n[27]=g,n[28]=B):B=n[28];var W;n[29]!==x||n[30]!==m||n[31]!==C||n[32]!==g||n[33]!==(y==null?void 0:y.takedownState)?(W=g&&!r("mwIsThreadDisabled")(y==null?void 0:y.takedownState)&&m!=null&&m>0&&c.jsxs(c.Fragment,{children:[c.jsx(r("MWXText.react"),{color:"secondary",numberOfLines:1,type:"body4",children:c.jsx(r("BaseMiddot.react"),{})}),c.jsx(o("react-strict-dom").html.span,{"data-testid":void 0,style:d.subtext,children:C&&x===!0?c.jsx(r("MWXText.react"),{color:"highlight",numberOfLines:1,type:"body4",children:c.jsxs(o("react-strict-dom").html.span,{children:[s._(/*BTDS*/"Follow up"),"?"]})}):c.jsx(r("MWXText.react"),{color:"secondary",numberOfLines:1,type:"body4",children:c.jsx(r("FDSRelativeTimestamp.react"),{date:new Date(m),format:"minimized"})})}),C&&x===!1&&c.jsxs(c.Fragment,{children:[c.jsx(o("react-strict-dom").html.span,{style:d.followUpsCTA,children:c.jsx(r("MWXText.react"),{color:"secondary",numberOfLines:1,type:"body4",children:c.jsx(r("BaseMiddot.react"),{})})}),c.jsx(o("react-strict-dom").html.span,{style:d.subtext,children:c.jsxs(r("MWXText.react"),{color:"highlight",numberOfLines:1,type:"body4",children:[s._(/*BTDS*/"Reply"),"?"]})})]})]}),n[29]=x,n[30]=m,n[31]=C,n[32]=g,n[33]=y==null?void 0:y.takedownState,n[34]=W):W=n[34];var q;n[35]!==F||n[36]!==O||n[37]!==B||n[38]!==W?(q=c.jsxs(o("react-strict-dom").html.div,{"data-testid":void 0,style:d.root,children:[F,O,B,W]}),n[35]=F,n[36]=O,n[37]=B,n[38]=W,n[39]=q):q=n[39];var U;n[40]!==a||n[41]!==v||n[42]!==S?(U=a&&!v&&!S?c.jsxs(c.Fragment,{children:[r("isArmadilloUI")()?c.jsx(r("MWVerticalRhythm"),{height:5}):null,c.jsx(r("MWXText.react"),{align:"start",color:"positive",numberOfLines:1,type:"body4",children:s._(/*BTDS*/"Ongoing call")})]}):null,n[40]=a,n[41]=v,n[42]=S,n[43]=U):U=n[43];var V;return n[44]!==q||n[45]!==U?(V=c.jsxs(c.Fragment,{children:[q,U]}),n[44]=q,n[45]=U,n[46]=V):V=n[46],V}function p(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=c.jsx(r("CometErrorBoundary.react"),{fallback:_,children:c.jsx(m,babelHelpers.extends({},e))}),t[0]=e,t[1]=n):n=t[1],n}function _(){return c.jsx(o("react-strict-dom").html.div,{"data-testid":void 0,style:d.root})}_.displayName=_.name+" [from "+i.id+"]",l.default=p}),226);
__d("MessageRequestsBulkActionsThreadListItem",["ix","CometPressable.react","I64","JSSet.bs","MWPIsThreadUnread","MWXIcon_DEPRECATED.react","MessageRequestsBulkActionsContext.react","fbicon","react","react-compiler-runtime","useMWAriaLabelForThread"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=e,m=d.useCallback,p=d.useContext,_=d.useEffect,f={pressableContent:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",display:"x1lliihq",width:"xh8yej3",$$css:!0}};function g(e){var t=o("react-compiler-runtime").c(33),n=e.thread,a=e.threadListCell,i=p(r("MessageRequestsBulkActionsContext.react")),l=i.setBulkActionsUnreadSelectedThreads,d=i.setBulkActionsSelectedThreads,m=i.bulkActionsSelectedThreads,f;t[0]!==n.threadKey?(f=(u||(u=o("I64"))).to_string(n.threadKey),t[0]=n.threadKey,t[1]=f):f=t[1];var g=f,y;t[2]!==d||t[3]!==g?(y=function(){return d(function(e){var t=new Set(o("JSSet.bs").values(e));return t.delete(g)?t:t.add(g)})},t[2]=d,t[3]=g,t[4]=y):y=t[4];var C=y,b;t[5]!==m||t[6]!==l||t[7]!==n||t[8]!==g?(b=function(){l(function(e){var t=new Set(o("JSSet.bs").values(e));return o("MWPIsThreadUnread").isThreadUnread(n)&&m.has(g)?t.add(g):(o("MWPIsThreadUnread").isThreadUnread(n)&&t.delete(g),t)})},t[5]=m,t[6]=l,t[7]=n,t[8]=g,t[9]=b):b=t[9];var v;t[10]!==m?(v=[m],t[10]=m,t[11]=v):v=t[11],_(b,v);var S;t[12]!==m||t[13]!==g?(S=m.has(g),t[12]=m,t[13]=g,t[14]=S):S=t[14];var R=S,L=r("useMWAriaLabelForThread")(n),E,k;t[15]===Symbol.for("react.memo_cache_sentinel")?(E={className:"x6s0dn4 x78zum5 xexx8yu x2vl965 x18d9i69 xe2zdcy"},k={className:"xf159sx"},t[15]=E,t[16]=k):(E=t[15],k=t[16]);var I=R?"highlight":"disabled",T;t[17]!==R?(T=R?o("fbicon")._(s("484757"),20):o("fbicon")._(s("659288"),20),t[17]=R,t[18]=T):T=t[18];var D;t[19]!==I||t[20]!==T?(D=c.jsx("div",babelHelpers.extends({},k,{children:c.jsx(r("MWXIcon_DEPRECATED.react"),{color:I,hideHoverOverlay:!0,icon:T})})),t[19]=I,t[20]=T,t[21]=D):D=t[21];var x;t[22]===Symbol.for("react.memo_cache_sentinel")?(x={className:"x1iyjqo2 xeuugli x47corl"},t[22]=x):x=t[22];var $;t[23]!==a?($=c.jsx("div",babelHelpers.extends({},x,{children:a})),t[23]=a,t[24]=$):$=t[24];var P;t[25]!==$||t[26]!==D?(P=c.jsxs("div",babelHelpers.extends({"aria-hidden":!0},E,{children:[D,$]})),t[25]=$,t[26]=D,t[27]=P):P=t[27];var N;return t[28]!==L||t[29]!==R||t[30]!==C||t[31]!==P?(N=c.jsx(r("CometPressable.react"),{"aria-checked":R,"aria-label":L,onPress:C,role:"checkbox",xstyle:h,children:P}),t[28]=L,t[29]=R,t[30]=C,t[31]=P,t[32]=N):N=t[32],N}function h(){return[f.pressableContent]}l.default=g}),98);
__d("useGroupsCometJoinChatDialog",["GroupsCometJoinChatDialog.entrypoint","I64","Int64Hooks","MWXCardedDialogLoadingState.react","react","react-compiler-runtime","useMWCMShouldGoToFullScreenChatHook","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useCallback;function d(){return u.jsx(r("MWXCardedDialogLoadingState.react"),{})}d.displayName=d.name+" [from "+i.id+"]";function m(e,t,n,a,i,l){var u=o("react-compiler-runtime").c(12),c,m;u[0]!==t||u[1]!==e.threadKey?(c=function(){return{groupID:(s||(s=o("I64"))).to_string(t!=null?t:(s||(s=o("I64"))).zero),threadID:s.to_string(e.threadKey)}},m=[t,e.threadKey],u[0]=t,u[1]=e.threadKey,u[2]=c,u[3]=m):(c=u[2],m=u[3]);var p=o("Int64Hooks").useMemoInt64(c,m),_=r("useMWXEntryPointDialog")(r("GroupsCometJoinChatDialog.entrypoint"),p,void 0,d),f=_[0],g=r("useMWCMShouldGoToFullScreenChatHook")(),h=e.hasPendingInvitation||!1,y;return u[4]!==h||u[5]!==l||u[6]!==i||u[7]!==n||u[8]!==g||u[9]!==f||u[10]!==a?(y=function(){var e={invited:h,isSMC:l,onSuccess:i,parentSurface:n,shouldGoToMessenger:g,surface:a};f(e)},u[4]=h,u[5]=l,u[6]=i,u[7]=n,u[8]=g,u[9]=f,u[10]=a,u[11]=y):y=u[11],y}l.default=m}),98);
__d("getValidMediaURL",["I64","ServerTime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return(e||(e=o("I64"))).of_float(o("ServerTime").getMillis()/1e3)}function u(t){return(e||(e=o("I64"))).gt(t,(e||(e=o("I64"))).zero)?(e||(e=o("I64"))).lt(t,s()):!1}function c(e,t,n){return e!=null?u(e)?n:t:n}l.default=c}),98);
__d("useGroupsCometCMOffboardingEntryPointDialog",["FDSCardedDialogLoadingStateLegacy.react","GroupsCometCMOffboardingDialog.entrypoint","react","react-compiler-runtime","useCometEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsx(r("FDSCardedDialogLoadingStateLegacy.react"),{onClose:e,withCloseButton:!0})}u.displayName=u.name+" [from "+i.id+"]";function c(e){var t=o("react-compiler-runtime").c(2),n=e.groupID,a;return t[0]!==n?(a={groupID:n},t[0]=n,t[1]=a):a=t[1],r("useCometEntryPointDialog")(r("GroupsCometCMOffboardingDialog.entrypoint"),a,void 0,u)}l.default=c}),98);
__d("useMWCMJoinCMThread",["C4GFalcoLoggerDeferred","CommunityMessagingEnableState","I64","Int64Hooks","JSResourceForInteraction","LSCommunityBitOffset","LSFactory","LSIntEnum","LSJoinCommunityChannelStoredProcedure","LSMailboxType","LSThreadBitOffset","LSVec","LSVerifyThreadViewStoredProcedure","ReQL","ThreadStatus","emptyFunction","mwCMisStandAloneCommunity","promiseDone","react","react-compiler-runtime","useGroupsCometCMOffboardingEntryPointDialog","useIsChatPreviewsEnabled","useMWNavigation","useMWXLazyDialog","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(s||(s=o("react"))).useState,m=function(t){return(u||(u=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(18))||(u||(u=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(21))};function p(t,n){var a=o("react-compiler-runtime").c(32),l=(e||(e=r("useReStore")))(),s;a[0]!==n?(s=n?o("LSCommunityBitOffset").has(1,n):!1,a[0]=n,a[1]=s):s=a[1];var p=s,_;a[2]===Symbol.for("react.memo_cache_sentinel")?(_=r("JSResourceForInteraction")("MWCMPausedChatMemberDialog.react").__setRef("useMWCMJoinCMThread"),a[2]=_):_=a[2];var f=r("useMWXLazyDialog")(_),g=f[0],h=r("useMWNavigation")(),y=d(!1),C=y[0],b=y[1],v;a[3]!==(n==null?void 0:n.fbGroupId)?(v=function(){var e;return{groupID:(u||(u=o("I64"))).to_string((e=n==null?void 0:n.fbGroupId)!=null?e:(u||(u=o("I64"))).zero)}},a[3]=n==null?void 0:n.fbGroupId,a[4]=v):v=a[4];var S=n==null?void 0:n.fbGroupId,R;a[5]!==S?(R=[S],a[5]=S,a[6]=R):R=a[6];var L=r("useGroupsCometCMOffboardingEntryPointDialog")(o("Int64Hooks").useMemoInt64(v,R)),E=L[0],k=t.clientThreadKey,I=t.threadKey,T=t.threadType,D,x;a[7]!==k||a[8]!==h||a[9]!==C||a[10]!==I||a[11]!==T?(D=function(){C&&m(T)&&(h.openTabOrInbox({clientThreadKey:k,threadKey:I,threadType:T},"inboxThreadList"),b(!1))},x=[T,k,I,C,h],a[7]=k,a[8]=h,a[9]=C,a[10]=I,a[11]=T,a[12]=D,a[13]=x):(D=a[12],x=a[13]),o("Int64Hooks").useEffectInt64(D,x);var $;a[14]!==l||a[15]!==(n==null?void 0:n.communityType)||a[16]!==(n==null?void 0:n.enableState)||a[17]!==(n==null?void 0:n.fbGroupId)||a[18]!==p||a[19]!==E||a[20]!==g||a[21]!==I?($=function(t,a,s,d){r("promiseDone")((async function(e){var m=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(l.tables.threads).getKeyRange(I));if(m!=null){var _=function(){r("promiseDone")(l.runInTransaction(function(e){return r("LSVerifyThreadViewStoredProcedure")(r("LSFactory")(e),{contacts:r("LSVec").ofArray([]),mailboxType:(c||(c=o("LSIntEnum"))).ofNumber(r("LSMailboxType").MESSENGER),threadKey:m.threadKey,threadType:m.threadType})},"readwrite",void 0,void 0,i.id+":148"))},f=m.hasPendingInvitation||!1,h=m.threadStatus!=null&&(u||(u=o("I64"))).equal(m.threadStatus,(u||(u=o("I64"))).of_int32(r("ThreadStatus").PAUSED)),y=(u||(u=o("I64"))).equal((e=n==null?void 0:n.enableState)!=null?e:(c||(c=o("LSIntEnum"))).ofNumber(r("CommunityMessagingEnableState").ENABLED),(c||(c=o("LSIntEnum"))).ofNumber(r("CommunityMessagingEnableState").DISABLE_REQUESTED)),C=!y&&h&&!o("LSThreadBitOffset").has(154,m)&&!f;if(C)return g({thread:m},r("emptyFunction"));if(!y&&o("useIsChatPreviewsEnabled").isChatPreviewsEnabled(m,n==null?void 0:n.communityType)&&s){var v=a?a.metaKey||a.ctrlKey||a.shiftKey:!1;return _(),s(v)}if(r("mwCMisStandAloneCommunity")(n==null?void 0:n.communityType)){o("useIsChatPreviewsEnabled").isChatPreviewsEnabled(m,n==null?void 0:n.communityType)?r("promiseDone")(l.runInTransaction(function(e){return b(!0),r("LSJoinCommunityChannelStoredProcedure")(r("LSFactory")(e),{entryPoint:"",isRequestToJoin:!1,threadKey:m.threadKey})},"readwrite","ui",void 0,i.id+":213")):(t(),b(!0));return}if(m.needsAdminApprovalForNewParticipant===!0&&p&&d)return o("C4GFalcoLoggerDeferred").logC4GEngagementFalcoEvent({action:"tap",client_extras:{member_join_request_enabled:"1"},community_id:(u||(u=o("I64"))).to_string(m.parentThreadKey),event:"thread_join",parent_surface:"thread_list",source:m.hasPendingInvitation===!0?"direct_invite_join_button":"join_button",surface:"messenger_inbox",thread_id:u.to_string(m.threadKey)}),d();if(!y)return t();if((n==null?void 0:n.fbGroupId)!=null)return E({},r("emptyFunction"))}})())},a[14]=l,a[15]=n==null?void 0:n.communityType,a[16]=n==null?void 0:n.enableState,a[17]=n==null?void 0:n.fbGroupId,a[18]=p,a[19]=E,a[20]=g,a[21]=I,a[22]=$):$=a[22];var P=n==null?void 0:n.communityType,N=n==null?void 0:n.enableState,M=n==null?void 0:n.fbGroupId,w;return a[23]!==l||a[24]!==p||a[25]!==E||a[26]!==g||a[27]!==M||a[28]!==P||a[29]!==N||a[30]!==I?(w=[l,P,N,M,p,E,g,I],a[23]=l,a[24]=p,a[25]=E,a[26]=g,a[27]=M,a[28]=P,a[29]=N,a[30]=I,a[31]=w):w=a[31],o("Int64Hooks").useCallbackInt64($,w)}l.default=p}),98);
__d("useOnPressMWThreadListItem",["fbt","CommunityMessagingEnableState","I64","Int64Hooks","JSResourceForInteraction","LSFactory","LSIntEnum","LSJoinCommunityChannelStoredProcedure","LSMessagingThreadTypeUtil","LSPlatformWaitForTaskCompletion","LSThreadBitOffset","MAWGroupInvitesForThread","MWCMThreadTypes.react","MWPIsThreadUnread","MessengerThreadTakedownState","MessengerWebUXLogger","ReQL","ThreadStatus","cr:12043","emptyFunction","getValidMediaURL","promiseDone","react-compiler-runtime","useCommunityFolder","useGroupsCometCMDisabledChatEntryPointDialog","useMWCMJoinCMThread","useMWNavigation","useMWXLazyDialog","useMWXPushErrorToast","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c;function d(e){var t=o("react-compiler-runtime").c(9),n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=r("JSResourceForInteraction")("MWCMPausedChannelMemberDialog.react").__setRef("useOnPressMWThreadListItem"),t[0]=n):n=t[0];var a=r("useMWXLazyDialog")(n),i=a[0],l=(c||(c=r("useReStore")))(),s;t[1]!==l.tables.threads||t[2]!==i||t[3]!==e?(s=function(){return(function(){r("promiseDone")((async function(t){var n=(t=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(l.tables.threads).getKeyRange(e)))!=null?t:{},a=n.threadName,s=n.threadPictureUrl,u=n.threadPictureUrlExpirationTimestampMs,c=n.threadPictureUrlFallback;if(!(u==null||s==null||c==null||a==null)){var d=r("getValidMediaURL")(u,s,c);i({threadImageUrl:d,threadTitle:a},r("emptyFunction"))}})())})},t[1]=l.tables.threads,t[2]=i,t[3]=e,t[4]=s):s=t[4];var u;return t[5]!==l||t[6]!==i||t[7]!==e?(u=[l,i,e],t[5]=l,t[6]=i,t[7]=e,t[8]=u):u=t[8],o("Int64Hooks").useMemoInt64(s,u)}function m(t,a,i,l,m,p){var _=o("react-compiler-runtime").c(45),f=m===void 0?!0:m,g=(c||(c=r("useReStore")))(),h=r("useMWNavigation")(),y;_[0]===Symbol.for("react.memo_cache_sentinel")?(y=r("JSResourceForInteraction")("MAWGroupInviteDialog.react").__setRef("useOnPressMWThreadListItem"),_[0]=y):y=_[0];var C=r("useMWXLazyDialog")(y),b=C[0],v=r("useCommunityFolder")(i),S=r("MessengerWebUXLogger").useInteractionLogger(),R;_[1]!==i.takedownState?(R=i.takedownState!=null&&(e||(e=o("I64"))).equal(i.takedownState,(u||(u=o("LSIntEnum"))).ofNumber(r("MessengerThreadTakedownState").GEO_BLOCKED)),_[1]=i.takedownState,_[2]=R):R=_[2];var L=R,E;_[3]!==i.threadKey?(E=(e||(e=o("I64"))).to_string(i.threadKey),_[3]=i.threadKey,_[4]=E):E=_[4];var k;_[5]!==L||_[6]!==E?(k={isGeoBlocked:L,threadID:E},_[5]=L,_[6]=E,_[7]=k):k=_[7];var I=r("useGroupsCometCMDisabledChatEntryPointDialog")(k),T=I[0],D;_[8]!==i.threadType?(D=o("LSMessagingThreadTypeUtil").isPublicCMThread(i.threadType),_[8]=i.threadType,_[9]=D):D=_[9];var x=D,$=d(i.threadKey),P=$[0],N=r("useMWCMJoinCMThread")(i,v),M=r("useMWXPushErrorToast")(),w;_[10]!==g||_[11]!==t||_[12]!==L||_[13]!==f||_[14]!==x||_[15]!==N||_[16]!==S||_[17]!==a||_[18]!==p||_[19]!==(v==null?void 0:v.takedownState)||_[20]!==h||_[21]!==M||_[22]!==l||_[23]!==T||_[24]!==b||_[25]!==P||_[26]!==i.threadKey?(w=function(d,m,_,y){r("promiseDone")((async function(){var c=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(g.tables.threads).getKeyRange(i.threadKey));if(c!=null){var C=o("MAWGroupInvitesForThread").isGroupInviteThread(c),R=o("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(c.threadType),E=o("MWCMThreadTypes.react").isUnjoinedCMThread(c.threadType),k=o("LSMessagingThreadTypeUtil").isCMSubthread(c.threadType),I=c.threadStatus!=null&&((e||(e=o("I64"))).equal(c.threadStatus,(e||(e=o("I64"))).of_int32(r("ThreadStatus").PAUSED))||(e||(e=o("I64"))).equal(c.threadStatus,(e||(e=o("I64"))).of_int32(r("ThreadStatus").UPGRADED_TO_COMMUNITY_AND_TO_BE_PAUSED))),D=(v==null?void 0:v.takedownState)!=null&&(e||(e=o("I64"))).equal(v==null?void 0:v.takedownState,(e||(e=o("I64"))).of_int32(1)),$=c.takedownState!=null&&(e||(e=o("I64"))).equal(c.takedownState,(u||(u=o("LSIntEnum"))).ofNumber(r("MessengerThreadTakedownState").TAKEN_DOWN)),w=c.needsAdminApprovalForNewParticipant===!0,A=(e||(e=o("I64"))).equal(t!=null?t:(u||(u=o("LSIntEnum"))).ofNumber(r("CommunityMessagingEnableState").ENABLED),(u||(u=o("LSIntEnum"))).ofNumber(r("CommunityMessagingEnableState").DISABLE_REQUESTED)),F=c.folderName==="inbox"?(u||(u=o("LSIntEnum"))).ofNumber(12):c.folderName==="pending"?(u||(u=o("LSIntEnum"))).ofNumber(29):(u||(u=o("LSIntEnum"))).ofNumber(30),O=o("MWPIsThreadUnread").isThreadUnread(c),B=function(t){var e={clientThreadKey:c.clientThreadKey,isUnread:O,threadKey:c.threadKey,threadType:c.threadType};if(n("cr:12043")!=null&&n("cr:12043").isFollowUpTagDisplayed(c)&&n("cr:12043").touchThreadMetadata(c.threadKey),t)return h.openInbox(e,a,F);h.openTabOrInbox(e,a,y,F,{subEntrypoint:p}),_&&_()},W=function(){l==null||l(!0),r("promiseDone")(r("LSPlatformWaitForTaskCompletion")(g,function(e){return r("LSJoinCommunityChannelStoredProcedure")(r("LSFactory")(e),{entryPoint:"messengerdotcom",isRequestToJoin:w,threadKey:i.threadKey})},"joinCommunityChannel"),function(){B(!1),l==null||l(!1)},function(){M({title:s._(/*BTDS*/"Couldn't join chat. Please try again later.")})})},q=c.hasPendingInvitation||!1,U=!A&&I&&!o("LSThreadBitOffset").has(154,c)&&!q;if(S==null||S({eventName:"open_thread",threadKey:c.threadKey,threadType:c.threadType}),f||S==null||S({eventName:"open_thread_from_mini_list",threadKey:c.threadKey,threadType:c.threadType}),x&&($||D||L))return T({threadID:(e||(e=o("I64"))).to_string(c.threadKey)});if(E)return N(m,d,B,W);if(R&&U)return P();C?b({thread:c},r("emptyFunction")):k||B(d.metaKey||d.ctrlKey||d.shiftKey)}})())},_[10]=g,_[11]=t,_[12]=L,_[13]=f,_[14]=x,_[15]=N,_[16]=S,_[17]=a,_[18]=p,_[19]=v==null?void 0:v.takedownState,_[20]=h,_[21]=M,_[22]=l,_[23]=T,_[24]=b,_[25]=P,_[26]=i.threadKey,_[27]=w):w=_[27];var A=v==null?void 0:v.takedownState,F;return _[28]!==g||_[29]!==t||_[30]!==L||_[31]!==f||_[32]!==N||_[33]!==S||_[34]!==a||_[35]!==p||_[36]!==h||_[37]!==M||_[38]!==l||_[39]!==T||_[40]!==b||_[41]!==P||_[42]!==A||_[43]!==i.threadKey?(F=[g,i.threadKey,A,t,S,f,L,h,a,p,l,M,T,N,P,b],_[28]=g,_[29]=t,_[30]=L,_[31]=f,_[32]=N,_[33]=S,_[34]=a,_[35]=p,_[36]=h,_[37]=M,_[38]=l,_[39]=T,_[40]=b,_[41]=P,_[42]=A,_[43]=i.threadKey,_[44]=F):F=_[44],o("Int64Hooks").useCallbackInt64(w,F)}l.default=m}),226);
__d("usePreloadRoute",["JSScheduler","react","react-compiler-runtime","useCometRouterDispatcher","useMWNavigation"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useEffect;function c(e,t){var n=o("react-compiler-runtime").c(6),a=r("useMWNavigation")(),i=r("useCometRouterDispatcher")(),l,c;n[0]!==i||n[1]!==a||n[2]!==e||n[3]!==t?(l=function(){(s||(s=o("JSScheduler"))).scheduleSpeculativeCallback(function(){i!=null&&i.prefetchRouteDefinition(a.getUrlFromThreadKey(e,t))})},c=[i,a,e,t],n[0]=i,n[1]=a,n[2]=e,n[3]=t,n[4]=l,n[5]=c):(l=n[4],c=n[5]),u(l,c)}l.default=c}),98);
__d("MWThreadListItem.react",["fbt","CometHeroHoldTrigger.react","CometPlaceholder.react","CometTextWithEntities.react","CurrentEnvironment","HeroInteractionIgnoreWithDiv.react","I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","LSRtcCallState","LSThreadRangeFilter","LSThreadTitle.react","MWCMJewelContext","MWCMThreadTypes.react","MWChatTextTransform","MWLogInboxFiltersInteraction","MWLogInteraction","MWPIsThreadUnread","MWThreadListFocusableTable.react","MWThreadListItemAddOnEnd.react","MWThreadListLastMessage.react","MWThreadPicture.react","MWThreadSnippetForDisplay.react","MWVerticalRhythm","MWXGlimmer.react","MWXListCellPressable.react","MWXSpinner.react","MWXText.react","MessageRequestsBulkActionsContext.react","MessageRequestsBulkActionsThreadListItem","MessagingCommunityChatsPauseStatus","MessengerMuteUtils","MessengerWebEntryPointsUtil","MessengerWebUXLogger","MetaConfig","ReQL","ReQLSuspense","deferredLoadComponent","emptyFunction","gkx","interaction-tracing-metrics","justknobx","mwCMIsAnyCMThread","mwCMIsThreadBumped","mwCMisStandAloneCommunity","mwIsThreadDisabled","react","react-compiler-runtime","react-strict-dom","requireDeferred","useCommunityFolder","useGroupsCometChatsEngagementImpressionLogger","useGroupsCometJoinChatDialog","useIsChatPreviewsEnabled","useMWNavigation","useMWPThreadHasSpectraUser","useMWPreloadThread","useMWThreadSnippetForDisplay","useMenuButtonVisibilityState","useMergeRefs","useOnPressMWThreadListItem","usePreloadRoute","useReStore","useSimpleImpression"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=o("react")),p=d,_=p.memo,f=p.useCallback,g=p.useContext,h=p.useMemo,y=p.useState,C=r("deferredLoadComponent")(r("requireDeferred")("MWThreadListItemMoreActions.react").__setRef("MWThreadListItem.react")),b={communityGlimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"x170jfvy",width:"x3hqpx7",$$css:!0},listItemContainer:{overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingInlineStart:"xmzvs34",paddingInlineEnd:"xf159sx",paddingLeft:null,paddingRight:null,position:"x1n2onr6",$$css:!0},listItemContainerDisabled:{opacity:"xbyyjgo",$$css:!0},listItemContainerForMessengerDotCom:{paddingInlineStart:"x25sj25",paddingInlineEnd:"x1icxu4v",paddingLeft:null,paddingRight:null,$$css:!0},threadBodyGlimmer:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0},threadSnippetGlimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"xlup9mm",width:"xktia5q",$$css:!0},threadTitleGlimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"x1qx5ct2",marginBottom:"x1e56ztr",marginTop:"x1k70j0n",width:"x3hqpx7",$$css:!0}};function v(t){var n=o("react-compiler-runtime").c(11),a=t.isUnread,l=t.showFollowUpReminder,s=t.threadKey,u=(e||(e=r("useReStore")))(),c;n[0]!==u.tables.threads||n[1]!==s?(c=function(){return o("ReQL").fromTableAscending(u.tables.threads).getKeyRange(s)},n[0]=u.tables.threads,n[1]=s,n[2]=c):c=n[2];var d;n[3]!==u||n[4]!==s?(d=[u,s],n[3]=u,n[4]=s,n[5]=d):d=n[5];var p=o("ReQLSuspense").useFirst(c,d,i.id+":154");if(p==null)return null;var _;n[6]===Symbol.for("react.memo_cache_sentinel")?(_=m.jsx(o("react-strict-dom").html.div,{style:b.threadBodyGlimmer,children:m.jsx(r("MWXGlimmer.react"),{index:2,xstyle:b.threadSnippetGlimmer})}),n[6]=_):_=n[6];var f;return n[7]!==a||n[8]!==l||n[9]!==p?(f=m.jsx(r("CometPlaceholder.react"),{fallback:_,name:"MWThreadListItem.DefaultSubtitle",children:m.jsx(S,{isUnread:a,showFollowUpReminder:l,thread:p})}),n[7]=a,n[8]=l,n[9]=p,n[10]=f):f=n[10],f}function S(e){var t=o("react-compiler-runtime").c(24),n=e.isUnread,a=e.showFollowUpReminder,i=e.thread,l=r("useMWThreadSnippetForDisplay")(i),s=l.isDraft,d=l.lastMessageCtaType,p=l.shouldHideTimestamp,_=l.snippet,f;t[0]!==i.threadType?(f=o("MWCMThreadTypes.react").isUnjoinedCMThread(i.threadType),t[0]=i.threadType,t[1]=f):f=t[1];var g=f,h;t[2]!==i.disappearingSettingTtl?(h=r("MetaConfig")._("112")&&i.disappearingSettingTtl!=null&&(u||(u=o("I64"))).gt(i.disappearingSettingTtl,(u||(u=o("I64"))).zero),t[2]=i.disappearingSettingTtl,t[3]=h):h=t[3];var y=h;if(i.threadName==null&&r("mwCMIsAnyCMThread")(i.threadType)){var C;return t[4]===Symbol.for("react.memo_cache_sentinel")?(C=m.jsxs(o("react-strict-dom").html.div,{style:b.threadBodyGlimmer,children:[m.jsx(r("MWXGlimmer.react"),{index:2,xstyle:b.threadSnippetGlimmer}),m.jsx(r("CometHeroHoldTrigger.react"),{description:"MWThreadListItem.DefaultSubtitleWithThread",hold:!0})]}),t[4]=C):C=t[4],C}if(o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(i.threadType)&&_==null)return null;var v;t[5]!==i.ongoingCallState?(v=(u||(u=o("I64"))).equal(i.ongoingCallState,(c||(c=o("LSIntEnum"))).ofNumber(r("LSRtcCallState").NO_ONGOING_CALL)),t[5]=i.ongoingCallState,t[6]=v):v=t[6];var S=!v,R;t[7]!==i.lastActivityTimestampMs?(R=(u||(u=o("I64"))).to_float(i.lastActivityTimestampMs),t[7]=i.lastActivityTimestampMs,t[8]=R):R=t[8];var L=g&&(i==null?void 0:i.hasPendingInvitation)!==!0,E=!g&&!p,k;t[9]!==s||t[10]!==_||t[11]!==i?(k=m.jsx(r("MWThreadSnippetForDisplay.react"),{isDraftMessage:s,snippetRaw:_,thread:i}),t[9]=s,t[10]=_,t[11]=i,t[12]=k):k=t[12];var I;return t[13]!==y||t[14]!==n||t[15]!==d||t[16]!==a||t[17]!==S||t[18]!==R||t[19]!==L||t[20]!==E||t[21]!==k||t[22]!==i?(I=m.jsx(r("MWThreadListLastMessage.react"),{hasOngoingCall:S,isUnread:n,lastMessageCtaType:d,lastMessageTimestamp:R,showDisappearingMessageVisualIndicator:y,showFollowUpReminder:a,showSnippetText:L,showTimestamp:E,snippet:k,thread:i}),t[13]=y,t[14]=n,t[15]=d,t[16]=a,t[17]=S,t[18]=R,t[19]=L,t[20]=E,t[21]=k,t[22]=i,t[23]=I):I=t[23],I}function R(t){var n=o("react-compiler-runtime").c(8),a=t.threadKey,l=(e||(e=r("useReStore")))(),s;n[0]!==l.tables.threads||n[1]!==a?(s=function(){return o("ReQL").fromTableAscending(l.tables.threads,["threadName","threadType","threadKey"]).getKeyRange(a)},n[0]=l.tables.threads,n[1]=a,n[2]=s):s=n[2];var u;n[3]!==l||n[4]!==a?(u=[l,a],n[3]=l,n[4]=a,n[5]=u):u=n[5];var c=o("ReQLSuspense").useFirst(s,u,i.id+":248");if(c==null)return null;var d;return n[6]!==c?(d=c.threadName==null&&r("mwCMIsAnyCMThread")(c.threadType)?m.jsxs(o("react-strict-dom").html.div,{style:b.threadBodyGlimmer,children:[m.jsx(r("MWXGlimmer.react"),{index:1,xstyle:b.threadTitleGlimmer}),m.jsx(r("CometHeroHoldTrigger.react"),{description:"MWThreadListItem.DefaultThreadTitle",hold:!0})]}):m.jsx(r("LSThreadTitle.react"),{thread:c}),n[6]=c,n[7]=d):d=n[7],d}function L(e){var t=o("react-compiler-runtime").c(176),n=e.hideMoreActions,a=e.lsEntryPoint,i=e.lsSubEntryPoint,l=e.messagingEntrypoint,d=e.onClose,p=e.onPress,_=e.onPressOverride,f=e.onThreadJoined,h=e.onThreadSelected,S=e.parentSurface,L=e.renderAddOnEnd,E=e.renderThreadPhoto,k=e.renderThreadSubtitle,I=e.renderThreadTitle,T=e.selected,D=e.showFollowUpReminder,x=e.thread,$=n===void 0?!1:n,P=d===void 0?r("emptyFunction"):d,N=f===void 0?r("emptyFunction"):f,M=h===void 0?r("emptyFunction"):h,w=S===void 0?"channel_list":S,A=D===void 0?!1:D,F=g(r("MWCMJewelContext")),O=F.selectedFilterTab,B;t[0]!==x.threadType?(B={eventName:"threadlist_item_impression",threadType:x.threadType},t[0]=x.threadType,t[1]=B):B=t[1];var W=r("MessengerWebUXLogger").useImpressionLoggerRef(B),q;e:{if(!r("mwCMIsThreadBumped")(x)){q=!1;break e}if(r("CurrentEnvironment").messengerdotcom){q=w==="channel_list";break e}if(a==="jewel"){var U;t[2]!==O?(U=(u||(u=o("I64"))).equal(O,u.of_int32(r("LSThreadRangeFilter").NONE)),t[2]=O,t[3]=U):U=t[3],q=U;break e}q=a!=="inboxThreadList"}var V=q,H,G;t[4]!==V||t[5]!==E||t[6]!==x.threadKey?(G=function(){return E!=null?E:function(){return m.jsx(r("MWThreadPicture.react"),{badgeSize:r("gkx")("23219")?10:14,photoSize:r("gkx")("23219")?48:56,threadKey:x.threadKey,withAltText:!1,withCommunityPicture:V})}},H=[V,E,x.threadKey],t[4]=V,t[5]=E,t[6]=x.threadKey,t[7]=H,t[8]=G):(H=t[7],G=t[8]);var z=o("Int64Hooks").useMemoInt64(G,H),j,K;t[9]!==I||t[10]!==x.threadKey?(j=function(){return I!=null?I:function(){return m.jsx(R,{threadKey:x.threadKey})}},K=[I,x.threadKey],t[9]=I,t[10]=x.threadKey,t[11]=j,t[12]=K):(j=t[11],K=t[12]);var Q=o("Int64Hooks").useMemoInt64(j,K),X=r("useCommunityFolder")(x),Y=X==null?void 0:X.takedownState,J;t[13]!==Y||t[14]!==x.takedownState?(J=r("mwIsThreadDisabled")(x.takedownState,Y),t[13]=Y,t[14]=x.takedownState,t[15]=J):J=t[15];var Z=J,ee=o("MWPIsThreadUnread").useIsThreadUnread(x.threadKey)&&!Z,te;t[16]!==ee||t[17]!==k||t[18]!==A||t[19]!==x.threadKey?(te=function(){return k!=null?k:function(){return m.jsx(v,{isUnread:ee,showFollowUpReminder:A,threadKey:x.threadKey})}},t[16]=ee,t[17]=k,t[18]=A,t[19]=x.threadKey,t[20]=te):te=t[20];var ne;t[21]!==ee||t[22]!==k||t[23]!==T||t[24]!==A||t[25]!==x.threadKey?(ne=[ee,k,x.threadKey,T,A],t[21]=ee,t[22]=k,t[23]=T,t[24]=A,t[25]=x.threadKey,t[26]=ne):ne=t[26];var re=o("Int64Hooks").useMemoInt64(te,ne),oe;t[27]!==(X==null?void 0:X.name)||t[28]!==x.threadType?(oe=function(){return!r("mwCMIsAnyCMThread")(x.threadType)||r("CurrentEnvironment").messengerdotcom?null:(X==null?void 0:X.name)==null?m.jsxs(m.Fragment,{children:[m.jsx(r("MWXGlimmer.react"),{index:1,xstyle:b.communityGlimmer}),m.jsx(r("MWVerticalRhythm"),{height:8}),m.jsx(r("CometHeroHoldTrigger.react"),{description:"MWThreadListItem.Folder",hold:!0})]}):m.jsxs(m.Fragment,{children:[m.jsx(r("MWXText.react"),{align:"start",color:"secondary",numberOfLines:1,type:"meta3",children:X==null?void 0:X.name}),m.jsx(r("MWVerticalRhythm"),{height:8})]})},t[27]=X==null?void 0:X.name,t[28]=x.threadType,t[29]=oe):oe=t[29];var ae=X==null?void 0:X.name,ie;t[30]!==ae||t[31]!==x.threadType?(ie=[ae,x.threadType],t[30]=ae,t[31]=x.threadType,t[32]=ie):ie=t[32];var le=o("Int64Hooks").useCallbackInt64(oe,ie),se;t[33]!==x.threadType?(se=function(){var e=o("LSMessagingThreadTypeUtil").isArmadilloSecure(x.threadType),t=o("interaction-tracing-metrics").InteractionTracingMetricsCore.currentInteractionLogger(),n=Number(e);return t.forEach(function(e){var t;n=((t=e.annotations.int)==null?void 0:t.hasSecureThread)||0||n}),t.addMetadata("hasSecureThread",n?1:0)},t[33]=x.threadType,t[34]=se):se=t[34],r("useSimpleImpression")(se);var ue;t[35]!==x.parentThreadKey?(ue=(u||(u=o("I64"))).to_string(x.parentThreadKey),t[35]=x.parentThreadKey,t[36]=ue):ue=t[36];var ce;t[37]!==X?(ce=X?(u||(u=o("I64"))).to_string(X.fbGroupId):void 0,t[37]=X,t[38]=ce):ce=t[38];var de=a==="jewel"?"jewel_inbox":"chats_inbox",me;t[39]!==x.threadKey?(me=(u||(u=o("I64"))).to_string(x.threadKey),t[39]=x.threadKey,t[40]=me):me=t[40];var pe;t[41]!==ue||t[42]!==ce||t[43]!==de||t[44]!==me?(pe={community_id:ue,event:"bumped_chat_rendered",group_id:ce,parent_surface:de,source:"unknown",surface:"messenger_inbox",thread_id:me},t[41]=ue,t[42]=ce,t[43]=de,t[44]=me,t[45]=pe):pe=t[45];var _e=r("useGroupsCometChatsEngagementImpressionLogger")(pe),fe;t[46]!==x.threadType?(fe=o("LSMessagingThreadTypeUtil").isArmadilloSecure(x.threadType),t[46]=x.threadType,t[47]=fe):fe=t[47];var ge=fe,he=r("useMWNavigation")(),ye;t[48]!==x.threadType?(ye=o("MWCMThreadTypes.react").isUnjoinedCMThread(x.threadType),t[48]=x.threadType,t[49]=ye):ye=t[49];var Ce=ye,be;t[50]!==(X==null?void 0:X.communityType)||t[51]!==x?(be=x.hasPendingInvitation===!0&&o("useIsChatPreviewsEnabled").isChatPreviewsEnabled(x,X==null?void 0:X.communityType),t[50]=X==null?void 0:X.communityType,t[51]=x,t[52]=be):be=t[52];var ve=be,Se;t[53]!==x?(Se=o("MessengerMuteUtils").calcMuteUntilMs(x),t[53]=x,t[54]=Se):Se=t[54];var Re=Se,Le=r("useMenuButtonVisibilityState")(!0),Ee=Le[1],ke=Ee.setListItemFocused,Ie=Ee.setListItemHovered,Te=r("mwCMIsAnyCMThread")(x.threadType),De;t[55]!==x.parentThreadKey?(De=(u||(u=o("I64"))).equal(x.parentThreadKey,(c||(c=o("LSIntEnum"))).ofNumber(0)),t[55]=x.parentThreadKey,t[56]=De):De=t[56];var xe=De,$e=r("useMWPThreadHasSpectraUser")(x.threadKey),Pe=Z||$e?!1:xe?!0:!(Ce||$),Ne;t[57]!==Ie?(Ne=function(){return Ie(!1)},t[57]=Ie,t[58]=Ne):Ne=t[58];var Me=Ne,we;t[59]!==Ie?(we=function(){return Ie(!0)},t[59]=Ie,t[60]=we):we=t[60];var Ae=we,Fe=r("useMWPreloadThread")(x,ge),Oe=Fe.onHoverInPreloader,Be=Fe.onHoverOutPreloader,We=Fe.onPressInPreloader,qe;if(X!=null&&Te){var Ue;t[61]!==X.enableState||t[62]!==X.fbGroupId||t[63]!==X.folderId?(Ue=[X.fbGroupId,X.folderId,X.enableState],t[61]=X.enableState,t[62]=X.fbGroupId,t[63]=X.folderId,t[64]=Ue):Ue=t[64],qe=Ue}else{var Ve;t[65]===Symbol.for("react.memo_cache_sentinel")?(Ve=[void 0,void 0,void 0],t[65]=Ve):Ve=t[65],qe=Ve}var He=qe,Ge=He[0],ze=He[1],je=He[2],Ke=g(r("MessageRequestsBulkActionsContext.react")),Qe=Ke.isBulkActionsEditMode;r("usePreloadRoute")(x.threadKey,x.threadType);var Xe;t[66]!==X?(Xe=(X==null?void 0:X.pauseStatus)!=null&&(u||(u=o("I64"))).equal(X.pauseStatus,(c||(c=o("LSIntEnum"))).ofNumber(r("MessagingCommunityChatsPauseStatus").PAUSED_BY_SOFT_ACTION)),t[66]=X,t[67]=Xe):Xe=t[67];var Ye=Xe,Je;t[68]!==V||t[69]!==Ye||t[70]!==Z||t[71]!==a||t[72]!==x.threadType?(Je=function(){return o("MessengerWebEntryPointsUtil").getEntryPointShouldOverrideThreadSnippetRemoval(a)?!1:Ye||!Z&&!V&&o("MWCMThreadTypes.react").isJoinedCMThread(x.threadType)},t[68]=V,t[69]=Ye,t[70]=Z,t[71]=a,t[72]=x.threadType,t[73]=Je):Je=t[73];var Ze=Je,et=y(!1),tt=et[0],nt=et[1],rt=r("useOnPressMWThreadListItem")(je,a,x,nt,!0,i),ot=X==null?void 0:X.communityType,at;t[74]!==ot?(at=r("mwCMisStandAloneCommunity")(ot),t[74]=ot,t[75]=at):at=t[75];var it=at,lt=r("useGroupsCometJoinChatDialog")(x,Ge,w,"messenger_inbox",N,it),st,ut;t[76]!==ze||t[77]!==ve||t[78]!==Ge||t[79]!==Z||t[80]!==l||t[81]!==Re||t[82]!==P||t[83]!==rt||t[84]!==w||t[85]!==L||t[86]!==lt||t[87]!==x.threadKey?(st=function(){return Z||ve?void 0:m.jsx(r("MWThreadListItemAddOnEnd.react"),{communityId:ze,fbGroupId:Ge,isMaximized:!0,messagingEntrypoint:l,mutedUntilMs:Re,parentSurface:w,renderAddOnEnd:L,showGroupsJoinChatDialog:function(t){return rt(t,lt,P)},threadKey:x.threadKey})},ut=[ze,ve,Ge,!0,Z,l,Re,P,rt,w,L,lt,x.threadKey],t[76]=ze,t[77]=ve,t[78]=Ge,t[79]=Z,t[80]=l,t[81]=Re,t[82]=P,t[83]=rt,t[84]=w,t[85]=L,t[86]=lt,t[87]=x.threadKey,t[88]=st,t[89]=ut):(st=t[88],ut=t[89]);var ct=o("Int64Hooks").useMemoInt64(st,ut),dt;t[90]!==ct||t[91]!==tt||t[92]!==Z||t[93]!==Ze||t[94]!==ee||t[95]!==he||t[96]!==P||t[97]!==Oe||t[98]!==Be||t[99]!==p||t[100]!==We||t[101]!==rt||t[102]!==_||t[103]!==M||t[104]!==le||t[105]!==z||t[106]!==re||t[107]!==Q||t[108]!==T||t[109]!==ke||t[110]!==lt||t[111]!==x?(dt=function(){var e=x.additionalThreadContext!=null?m.jsxs(m.Fragment,{children:[m.jsx(r("MWXText.react"),{align:"start",color:"secondary",numberOfLines:1,type:"meta4",children:m.jsx(r("CometTextWithEntities.react"),{text:x.additionalThreadContext,transforms:o("MWChatTextTransform").textTransforms})}),m.jsx(r("MWVerticalRhythm"),{height:8})]}):null,t=s._(/*BTDS*/"Joining chat..."),n=m.jsxs(m.Fragment,{children:[m.jsx(r("MWXSpinner.react"),{color:"disabled_DEPRECATED",size:24}),m.jsx(r("CometHeroHoldTrigger.react"),{description:"MWThreadListItem.AddOnEndLoadingSpinner",hold:!0})]});return m.jsx(r("MWXListCellPressable.react"),{addOnEnd:tt?n:ct,addOnStart:z(),"aria-current":T?"page":!1,content:m.jsxs(o("react-strict-dom").html.div,{children:[e,le(),m.jsx(r("MWXText.react"),{align:"start",color:"primary",numberOfLines:1,type:ee?"headlineEmphasized4":"headline4",children:Q()}),Ze()?null:m.jsxs(m.Fragment,{children:[m.jsx(r("MWVerticalRhythm"),{height:8}),tt?m.jsx(r("MWXText.react"),{type:"entityHeaderMeta3",children:t}):re()]})]}),disabled:tt,linkProps:Z?void 0:{preventLocalNavigation:!0,url:he.getUrlFromThreadKey(x.threadKey,x.threadType)},onFocusChange:ke,onHoverIn:Oe,onHoverOut:Be,onPress:function(t){r("justknobx")._("4052")?(o("MWLogInteraction").logPopoverOpenComplete("thread_click"),o("MWLogInboxFiltersInteraction").logInboxFiltersNavigationComplete()):(o("MWLogInteraction").logPopoverOpenCancel("thread_click"),o("MWLogInboxFiltersInteraction").logInboxFiltersNavigationCancel("thread_click")),_!=null?_==null||_(t):(p==null||p(t,x),rt(t,lt,P)),M()},onPressIn:We,selected:T,size:"large"})},t[90]=ct,t[91]=tt,t[92]=Z,t[93]=Ze,t[94]=ee,t[95]=he,t[96]=P,t[97]=Oe,t[98]=Be,t[99]=p,t[100]=We,t[101]=rt,t[102]=_,t[103]=M,t[104]=le,t[105]=z,t[106]=re,t[107]=Q,t[108]=T,t[109]=ke,t[110]=lt,t[111]=x,t[112]=dt):dt=t[112];var mt;t[113]!==ct||t[114]!==xe||t[115]!==tt||t[116]!==Z||t[117]!==Ze||t[118]!==ee||t[119]!==he||t[120]!==P||t[121]!==Oe||t[122]!==Be||t[123]!==p||t[124]!==We||t[125]!==rt||t[126]!==_||t[127]!==M||t[128]!==le||t[129]!==z||t[130]!==re||t[131]!==Q||t[132]!==T||t[133]!==ke||t[134]!==lt||t[135]!==x?(mt=[x,tt,ct,z,T,!0,xe,le,ee,Q,Ze,re,Z,he,ke,Oe,Be,We,_,M,p,rt,lt,P],t[113]=ct,t[114]=xe,t[115]=tt,t[116]=Z,t[117]=Ze,t[118]=ee,t[119]=he,t[120]=P,t[121]=Oe,t[122]=Be,t[123]=p,t[124]=We,t[125]=rt,t[126]=_,t[127]=M,t[128]=le,t[129]=z,t[130]=re,t[131]=Q,t[132]=T,t[133]=ke,t[134]=lt,t[135]=x,t[136]=mt):mt=t[136];var pt=o("Int64Hooks").useMemoInt64(dt,mt),_t;t[137]!==Le||t[138]!==l||t[139]!==P||t[140]!==T||t[141]!==Pe||t[142]!==x.threadKey||t[143]!==x.threadName||t[144]!==x.threadType?(_t=function(){return Pe?m.jsx(r("HeroInteractionIgnoreWithDiv.react"),{children:m.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWThreadListItem.MoreActions",children:m.jsx(C,{menuButtonVisibilityState:Le,messagingEntrypoint:l,onClose:P,selected:T,thread:{threadKey:x.threadKey,threadName:x.threadName,threadType:x.threadType}})})}):null},t[137]=Le,t[138]=l,t[139]=P,t[140]=T,t[141]=Pe,t[142]=x.threadKey,t[143]=x.threadName,t[144]=x.threadType,t[145]=_t):_t=t[145];var ft;t[146]!==Ge||t[147]!==Le||t[148]!==l||t[149]!==P||t[150]!==T||t[151]!==Pe||t[152]!==x.threadKey||t[153]!==x.threadName||t[154]!==x.threadType?(ft=[Ge,Le,l,P,T,Pe,x.threadName,x.threadKey,x.threadType],t[146]=Ge,t[147]=Le,t[148]=l,t[149]=P,t[150]=T,t[151]=Pe,t[152]=x.threadKey,t[153]=x.threadName,t[154]=x.threadType,t[155]=ft):ft=t[155];var gt=o("Int64Hooks").useMemoInt64(_t,ft),ht=r("useMergeRefs")(W,V?_e:null),yt=ge?"mwthreadlist-item-secure":"mwthreadlist-item-open",Ct=Z?b.listItemContainerDisabled:!1,bt;t[156]!==Ct?(bt=[b.listItemContainer,Ct,r("gkx")("23219")?b.listItemContainerForMessengerDotCom:!1],t[156]=Ct,t[157]=bt):bt=t[157];var vt;t[158]!==Qe||t[159]!==x||t[160]!==pt?(vt=Qe?m.jsx(r("MessageRequestsBulkActionsThreadListItem"),{thread:x,threadListCell:pt}):pt,t[158]=Qe,t[159]=x,t[160]=pt,t[161]=vt):vt=t[161];var St;t[162]!==vt?(St=m.jsx(o("MWThreadListFocusableTable.react").MWThreadListFocusableTableCell,{children:m.jsx(o("react-strict-dom").html.div,{role:"gridcell",children:vt})}),t[162]=vt,t[163]=St):St=t[163];var Rt;t[164]!==gt||t[165]!==St?(Rt=m.jsxs(o("MWThreadListFocusableTable.react").MWThreadListFocusableTableRow,{children:[St,gt]}),t[164]=gt,t[165]=St,t[166]=Rt):Rt=t[166];var Lt;t[167]!==Ae||t[168]!==Me||t[169]!==bt||t[170]!==Rt?(Lt=m.jsx(o("react-strict-dom").html.div,{"data-testid":void 0,onMouseEnter:Ae,onMouseLeave:Me,role:"row",style:bt,children:Rt}),t[167]=Ae,t[168]=Me,t[169]=bt,t[170]=Rt,t[171]=Lt):Lt=t[171];var Et;return t[172]!==ht||t[173]!==yt||t[174]!==Lt?(Et=m.jsx(o("react-strict-dom").html.div,{"data-testid":void 0,ref:ht,children:Lt}),t[172]=ht,t[173]=yt,t[174]=Lt,t[175]=Et):Et=t[175],Et}var E=_(L);l.default=E}),226);
__d("useMWPMarkSeen",["Int64Hooks","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MWPMarkSeenDeferred").__setRef("useMWPMarkSeen");function s(t){var n=o("react-compiler-runtime").c(3),r,a;return n[0]!==t?(r=function(){return{load:async function(){var n=await e.load();return(function(e){return n.markSeen(t,e)})}}},a=[t],n[0]=t,n[1]=r,n[2]=a):(r=n[1],a=n[2]),o("Int64Hooks").useMemoInt64(r,a)}l.default=s}),98);
__d("useMWPWatchFolderFocusChanges",["react","react-compiler-runtime","useGlobalEventListener"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useRef;function d(e,t){var n=o("react-compiler-runtime").c(6),a=c(!1),i;n[0]!==e||n[1]!==t?(i=function(){a.current&&(t.current&&e!=null&&e(),a.current=!1)},n[0]=e,n[1]=t,n[2]=i):i=n[2];var l=i,s;n[3]===Symbol.for("react.memo_cache_sentinel")?(s=function(){a.current||(a.current=!0)},n[3]=s):s=n[3];var u=s,d;n[4]===Symbol.for("react.memo_cache_sentinel")?(d={},n[4]=d):d=n[4],r("useGlobalEventListener")("focus",l,d);var m;n[5]===Symbol.for("react.memo_cache_sentinel")?(m={},n[5]=m):m=n[5],r("useGlobalEventListener")("blur",u,m)}l.default=d}),98);/*FB_PKG_DELIM*/
__d("CommercialBreakClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1993619"),s=o("FalcoLoggerInternal").create("commercial_break_click",e),u=s;l.default=u}),98);
__d("CommercialBreakEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743431"),s=o("FalcoLoggerInternal").create("commercial_break_end",e),u=s;l.default=u}),98);
__d("CommercialBreakStartingIndicatorFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743432"),s=o("FalcoLoggerInternal").create("commercial_break_starting_indicator",e),u=s;l.default=u}),98);
__d("InstreamAdsCurrentInsertionContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c=s.createContext(null);function d(){return u(c)}l.InstreamAdsCurrentInsertionContext=c,l.useInstreamAdsCurrentInsertion=d}),98);
__d("InstreamAdsPrerollTransitionScreen.react",["FDSLoadingAnimation.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx("div",{className:"x6s0dn4 xal61yo x1ey2m1c x9f619 x78zum5 xdt5ytf xtijo5x x1o0tod xl56j7k x10l6tqk x13vifvy",children:s.jsx("div",{className:"xc9qbxq x1sy10c2 x1n2onr6 x14qfxbe",children:s.jsx(r("FDSLoadingAnimation.react"),{size:36})})}),e[0]=t):t=e[0],t}l.default=u}),98);
__d("InstreamAdsTransitionScreen.react",["fbt","react","react-compiler-runtime","useInstreamAdsStoryPlaybackControl"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(5),n=e.freezeTokenRef,a=e.organicController,i;t[0]!==n||t[1]!==a?(i={freezeTokenRef:n,organicController:a},t[0]=n,t[1]=a,t[2]=i):i=t[2],r("useInstreamAdsStoryPlaybackControl")(i);var l;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=s._(/*BTDS*/"Video will continue after ad"),t[3]=l):l=t[3];var c=l,d;return t[4]===Symbol.for("react.memo_cache_sentinel")?(d=u.jsx("div",{className:"xal61yo x1ey2m1c x9f619 xtijo5x x1o0tod x10l6tqk x13vifvy",children:u.jsx("div",{className:"x191j7n5 x14ctfv x1nxh6w3 xzwoauc x10l6tqk",children:c})}),t[4]=d):d=t[4],d}l.default=c}),226);
__d("InstreamAdsDisplay.react",["CometRelay","InstreamAdsExtraFieldsContext","InstreamAdsPrerollTransitionScreen.react","InstreamAdsTransitionScreen.react","VideoPlayerHooks","VideoPlayerInteractionOverlay.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=r("gkx")("24371"),d=r("gkx")("7149");function m(e){var t=o("react-compiler-runtime").c(57),n=e.NIAdStory,a=e.adPorableVideoID,i=e.freezeTokenRef,l=e.instreamAdsStory,m=e.palmState,p=e.playerFormat,_=e.setAdPortableVideoID,f=e.subOrigin,g=e.videoAdStory,h=(s||(s=o("VideoPlayerHooks"))).useController(),y=o("InstreamAdsExtraFieldsContext").useInstreamAdsExtraFieldsContext(),C=-1;(y==null?void 0:y.isAdPod)===!0&&((y==null?void 0:y.adPodIndex)===1?C=1:C=0);var b=C===1,v;t[0]!==a||t[1]!==_?(v=function(t){t!==a[0]&&_([t,a[1]])},t[0]=a,t[1]=_,t[2]=v):v=t[2];var S=v,R;t[3]!==a||t[4]!==_?(R=function(t){t!==a[1]&&_([a[0],t])},t[3]=a,t[4]=_,t[5]=R):R=t[5];var L=R;if(m==="START"||m==="FETCH_PRE_ROLL"||m==="START_AD"){var E;t[6]===Symbol.for("react.memo_cache_sentinel")?(E={className:"x1ey2m1c x9f619 xtijo5x x1o0tod x10l6tqk x13vifvy x1rozsjd"},t[6]=E):E=t[6];var k;t[7]!==i||t[8]!==h||t[9]!==m?(k=m==="START"?u.jsx(r("InstreamAdsTransitionScreen.react"),{freezeTokenRef:i,organicController:h}):null,t[7]=i,t[8]=h,t[9]=m,t[10]=k):k=t[10];var I;t[11]!==m?(I=m==="FETCH_PRE_ROLL"?u.jsx(r("InstreamAdsPrerollTransitionScreen.react"),{}):null,t[11]=m,t[12]=I):I=t[12];var T;t[13]!==C||t[14]!==a||t[15]!==i||t[16]!==l||t[17]!==h||t[18]!==m||t[19]!==p||t[20]!==S||t[21]!==L||t[22]!==b||t[23]!==f?(T=m==="START_AD"&&l?u.jsx(o("CometRelay").MatchContainer,{match:b?l[1]:l[0],props:{freezeTokenRef:i,onPortableVideoIdChange:b?L:S,organicController:h,playerFormat:p,portableVideoID:b?a[1]:a[0],position:C,story:b?l[1]:l[0],subOrigin:f}},d?C:void 0):null,t[13]=C,t[14]=a,t[15]=i,t[16]=l,t[17]=h,t[18]=m,t[19]=p,t[20]=S,t[21]=L,t[22]=b,t[23]=f,t[24]=T):T=t[24];var D;return t[25]!==k||t[26]!==I||t[27]!==T?(D=u.jsx(o("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{children:u.jsxs("div",babelHelpers.extends({},E,{children:[k,I,T]}))}),t[25]=k,t[26]=I,t[27]=T,t[28]=D):D=t[28],D}if(c&&n!==null){var x;t[29]!==m?(x={0:{},1:{className:"x1ey2m1c x9f619 xtijo5x x1o0tod x10l6tqk x13vifvy x1rozsjd"}}[(m==="PLAY_NI_VIDEO")<<0],t[29]=m,t[30]=x):x=t[30];var $;t[31]!==n||t[32]!==a[0]||t[33]!==i||t[34]!==h||t[35]!==p||t[36]!==S||t[37]!==f?($={freezeTokenRef:i,isNIAd:!0,onPortableVideoIdChange:S,organicController:h,playerFormat:p,portableVideoID:a[0],story:n,subOrigin:f},t[31]=n,t[32]=a[0],t[33]=i,t[34]=h,t[35]=p,t[36]=S,t[37]=f,t[38]=$):$=t[38];var P;t[39]!==n||t[40]!==$?(P=u.jsx(o("CometRelay").MatchContainer,{match:n,props:$}),t[39]=n,t[40]=$,t[41]=P):P=t[41];var N;return t[42]!==x||t[43]!==P?(N=u.jsx("div",babelHelpers.extends({},x,{children:P})),t[42]=x,t[43]=P,t[44]=N):N=t[44],N}if(m==="PLAY_LONGER_AD"){var M;t[45]===Symbol.for("react.memo_cache_sentinel")?(M={className:"x1ey2m1c x9f619 xtijo5x x1o0tod x10l6tqk x13vifvy x1rozsjd"},t[45]=M):M=t[45];var w;t[46]!==a[0]||t[47]!==i||t[48]!==h||t[49]!==p||t[50]!==S||t[51]!==f||t[52]!==g?(w={freezeTokenRef:i,isNIAd:!1,onPortableVideoIdChange:S,organicController:h,playerFormat:p,portableVideoID:a[0],story:g,subOrigin:f},t[46]=a[0],t[47]=i,t[48]=h,t[49]=p,t[50]=S,t[51]=f,t[52]=g,t[53]=w):w=t[53];var A;return t[54]!==w||t[55]!==g?(A=u.jsx("div",babelHelpers.extends({},M,{children:u.jsx(o("CometRelay").MatchContainer,{match:g,props:w})})),t[54]=w,t[55]=g,t[56]=A):A=t[56],A}return null}l.default=m}),98);
__d("PlayButtonItemOverlay.react",["CometImage.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx("div",{className:"xds7cq7 x10l6tqk x4o5f7y",children:s.jsx(r("CometImage.react"),{height:36,src:"/images/video/play_72dp.png",width:36})}),e[0]=t):t=e[0],t}l.default=u}),98);
__d("InstreamAdsFeedNIContextCardImpl.react",["fbt","ix","BaseMiddot.react","BaseRow.react","BaseRowItem.react","CometEmojiTransform","CometEmoticonTransform","CometEntryPointDialogTrigger.react","CometImage.react","CometPoliticalInfosheetDialogSelector.react","CometPressable.react","CometTextWithEntities.react","CometTrackingCodeContext","CometTrackingNodeProvider.react","CometVideoPlayerLoggingConfigForFBWeb","FDSCircleButton.react","FDSLink.react","FDSProfilePhoto.react","FDSText.react","FDSTextPairing.react","InstreamAdsHideAdBehaviorContext","PlayButtonItemOverlay.react","StoryLocationTransparencyDialog.entrypoint","VideoPlayerHooks","VideoPlayerRelay.react","VideoPlayerSurface.react","fbicon","gkx","react","react-compiler-runtime","useDebouncedValue"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m={container:{marginInlineEnd:"x1ws5yxj",marginInlineStart:"xw01apr",paddingBottom:"xsag5q8",paddingInlineEnd:"xv54qhq",paddingInlineStart:"xf7dkkf",paddingTop:"xyamay9",$$css:!0},fullScreenFirstRow:{marginBottom:"xyorhqc",$$css:!0},fullscreenItem:{paddingInlineEnd:"x1icxu4v",paddingInlineStart:"x1g0dm76",$$css:!0},headerContainer:{paddingBottom:"xsag5q8",paddingInlineEnd:"xv54qhq",paddingInlineStart:"xf7dkkf",paddingTop:"xz9dl7a",$$css:!0},headerItem:{marginInlineStart:"x13fj5qh",$$css:!0},imageContainer:{marginInlineStart:"x1a5kqlc",marginTop:"xwya9rg",$$css:!0},item:{marginTop:"x1gslohp",paddingInlineEnd:"x1icxu4v",paddingInlineStart:"x1g0dm76",$$css:!0},niImageStyle:{maxWidth:"x193iq5w",objectFit:"xl1xv1r",objectPosition:"x1fmkh0f",transform:"x18871es",$$css:!0},niVideoPressable:{display:"x1lliihq",height:"x5yr21d",position:"x10l6tqk",width:"xh8yej3",$$css:!0},pressable:{display:"x1lliihq",$$css:!0},profilePic:{marginInlineEnd:"xbmvrgn",$$css:!0},videoContainer:{marginInlineStart:"x1a5kqlc",marginTop:"xwya9rg",$$css:!0}},p=r("gkx")("24373"),_=[r("CometEmoticonTransform")({size:18}),r("CometEmojiTransform")({size:18})],f=[r("CometEmoticonTransform")(),r("CometEmojiTransform")()];function g(e){var t=e.adDuration,n=e.adPlaytime,a=e.contextCardHideAdBehavior,i=e.instreamAdsContextCardData,l=e.isAdsPlaying,c=e.isFullScreen,g=e.isWatchTab,y=e.onDismiss,C=e.onPlayFullLength,b=e.showPlayFullBtn,v={url:i==null?void 0:i.adUrl};if(!i)return null;var S=(i==null?void 0:i.brandName)!=null?i.brandName.toString().trim():"",R=(i==null?void 0:i.description)!=null?i.description.toString().trim():"",L=(i==null?void 0:i.source)!=null?i.source.toString():null,E=(i==null?void 0:i.title)!=null?i.title.toString().trim():"",k=i.trackingCode,I=i.viewabilityLogger,T=i.adId,D=i.feedObjectID,x=i.storyId,$=i.verifiedVoiceContext,P=i.scmeLabel,N=p&&i.scmeLabel!=null,M=function(t,n){return d.jsx(r("FDSLink.react"),{color_DEPRECATED:"secondary",onClick:t,ref:n,weight_DEPRECATED:"bold",children:P})},w=T!=null&&D!=null&&x!=null&&$!=null?d.jsx(r("CometPoliticalInfosheetDialogSelector.react"),{adID:T,dialogTriggerFunc:M,isInstream:!0,storyID:x,verifiedVoiceContext:$}):x!=null?d.jsx(r("CometEntryPointDialogTrigger.react"),{dialogEntryPoint:r("StoryLocationTransparencyDialog.entrypoint"),otherProps:{},preloadParams:{storyID:x},children:function(t){return d.jsx(r("FDSLink.react"),{color_DEPRECATED:"secondary",onClick:t,weight_DEPRECATED:"bold",children:P})}}):null,A=i.clickToPlayVideo,F=d.jsxs(d.Fragment,{children:[d.jsxs(r("BaseRow.react"),{verticalAlign:"center",xstyle:m.headerContainer,children:[d.jsx(r("BaseRowItem.react"),{children:d.jsxs(r("BaseRow.react"),{verticalAlign:"center",children:[i.profilePicURI!=null&&i.profilePicURI.length>0?d.jsx(r("BaseRowItem.react"),{xstyle:m.profilePic,children:d.jsx(r("FDSProfilePhoto.react"),{shape:"circle",size:40,source:{uri:i.profilePicURI}})}):null,d.jsxs(r("BaseRowItem.react"),{children:[d.jsx(r("FDSText.react"),{color:"primary",type:"bodyLink3",children:S}),d.jsx("div",{className:"x1xmf6yo",children:d.jsxs(r("FDSText.react"),{color:"secondary",type:"meta4",children:[s._(/*BTDS*/"Sponsored"),N?d.jsx(r("BaseMiddot.react"),{className:"xnnr8r xwklpps"}):null,N?w:null]})})]})]})}),d.jsx(r("BaseRowItem.react"),{children:d.jsxs(r("BaseRow.react"),{verticalAlign:c?"center":"stretch",children:[d.jsx(r("BaseRowItem.react"),{xstyle:m.headerItem,children:d.jsx("div",{children:d.jsx(o("InstreamAdsHideAdBehaviorContext").InstreamAdsHideAdBehaviorContext.Provider,{value:a,children:i.menuButton})})}),d.jsx(r("BaseRowItem.react"),{xstyle:m.headerItem,children:d.jsx("div",{className:"x1ok221b",children:d.jsx(r("FDSCircleButton.react"),{"aria-label":s._(/*BTDS*/"Dismiss the context card"),color_DEPRECATED:"secondary",icon:o("fbicon")._(u("478232"),16),onPress:y,size:24,type_DEPRECATED:"deemphasized"})})})]})})]}),d.jsx("div",{className:"x1obq294 x5a5i1n xde0f50 x15x8krk x9f619 x1yztbdb x1ys307a xyqm7xq x1n2onr6 x1lku1pv xmjcpbm xjp8j0k",children:d.jsxs(r("BaseRow.react"),{verticalAlign:c?"center":"stretch",xstyle:m.container,children:[i.isClickToPlayVideo===!0?null:d.jsx(r("BaseRowItem.react"),{xstyle:m.imageContainer,children:d.jsx("div",{className:"x15x8krk x1obq294 x6ikm8r x10wlt62 xjp8j0k",children:i.adImageURI!=null&&i.adImageURI.length>0?d.jsx(r("CometImage.react"),{height:96,src:i.adImageURI,width:96,xstyle:m.niImageStyle}):null})}),i.isClickToPlayVideo===!0?d.jsx(r("BaseRowItem.react"),{xstyle:m.videoContainer,children:d.jsx("div",{className:"x15x8krk x1obq294 x6ikm8r x10wlt62 xjp8j0k x13oubkp",children:A?d.jsx(r("VideoPlayerRelay.react"),{adClientToken:i.clientToken,canAutoplay:"do_not_autoplay",loggingConfig:o("CometVideoPlayerLoggingConfigForFBWeb").createCometVideoPlayerLoggingConfigForFBWeb(),portalingEnabled:!1,subOrigin:"inline",video:A,children:d.jsx(r("VideoPlayerSurface.react"),{children:d.jsx(h,{callback:i.callback})})}):null})}):null,d.jsxs(r("BaseRowItem.react"),{expanding:!0,useDeprecatedStyles:!0,xstyle:m.item,children:[d.jsx("div",babelHelpers.extends({},{0:{className:"x4vbgl9 x1rdy4ex x6ikm8r x10wlt62 xjkvuk6 x1iorvi4"},2:{className:"x6ikm8r x10wlt62 x9f619 x1lkfr7t x4vbgl9 x1rdy4ex xd183bf xjkvuk6 x1iorvi4"},1:{className:"x4vbgl9 x1rdy4ex x6ikm8r x10wlt62 xjkvuk6 x1iorvi4 xgujvf1"},3:{className:"x6ikm8r x10wlt62 x9f619 x1lkfr7t x4vbgl9 x1rdy4ex xd183bf xjkvuk6 x1iorvi4 xgujvf1"}}[(R!=null)<<1|(R!=null&&R.length>0&&E!=null&&E.length>0)<<0],{children:d.jsx(r("FDSTextPairing.react"),{body:R!=null&&R.length>0?d.jsx("span",{"data-testid":void 0,children:d.jsx(r("CometTextWithEntities.react"),{text:R,transforms:f})}):null,bodyColor:"secondary",bodyLineLimit:1,headline:d.jsx("span",{className:"x1lliihq x1120s5i",children:d.jsx(r("CometTextWithEntities.react"),{text:E,transforms:_})}),headlineColor:"primary",headlineLineLimit:2,level:3})})),L!=null&&L.length>0?d.jsx("div",{className:"x1anpbxc","data-testid":void 0,children:d.jsx(r("FDSText.react"),{color:"secondary",numberOfLines:1,type:"body3",children:L})}):null]})]})})]}),O=d.jsx("div",{className:"x1obq294 x5a5i1n xde0f50 x15x8krk x9f619 x1yztbdb x1ys307a xyqm7xq x1n2onr6 x1lku1pv xrmyhay xjp8j0k",children:d.jsxs(r("BaseRow.react"),{xstyle:m.container,children:[i.isClickToPlayVideo===!0?null:d.jsx(r("BaseRowItem.react"),{xstyle:m.imageContainer,children:d.jsx("div",{className:"x15x8krk x1obq294 x6ikm8r x10wlt62 xjp8j0k",children:i.adImageURI!=null&&i.adImageURI.length>0?d.jsx(r("CometImage.react"),{height:96,src:i.adImageURI,width:96,xstyle:m.niImageStyle}):null})}),i.isClickToPlayVideo===!0?d.jsx(r("BaseRowItem.react"),{xstyle:m.videoContainer,children:d.jsx("div",{className:"x15x8krk x1obq294 x6ikm8r x10wlt62 xjp8j0k x13oubkp",children:A?d.jsx(r("VideoPlayerRelay.react"),{adClientToken:i.clientToken,canAutoplay:"do_not_autoplay",loggingConfig:o("CometVideoPlayerLoggingConfigForFBWeb").createCometVideoPlayerLoggingConfigForFBWeb(),portalingEnabled:!1,subOrigin:"inline",video:A,children:d.jsx(r("VideoPlayerSurface.react"),{children:d.jsx(h,{callback:i.callback})})}):null})}):null,d.jsxs(r("BaseRowItem.react"),{expanding:!0,xstyle:m.fullscreenItem,children:[d.jsxs(r("BaseRow.react"),{verticalAlign:c?"center":"stretch",xstyle:m.fullScreenFirstRow,children:[i.profilePicURI!=null&&i.profilePicURI.length>0?d.jsx(r("BaseRowItem.react"),{xstyle:m.profilePic,children:d.jsx(r("FDSProfilePhoto.react"),{shape:"circle",size:16,source:{uri:i.profilePicURI}})}):null,d.jsx("div",{className:"x1pe450p x10l6tqk",children:d.jsx(r("BaseRowItem.react"),{children:d.jsxs(r("FDSText.react"),{color:"secondaryOnMedia",type:"body3",children:[L,d.jsx(r("BaseMiddot.react"),{className:"xnnr8r xwklpps"}),s._(/*BTDS*/"Sponsored")]})})})]}),d.jsx("div",babelHelpers.extends({},{0:{className:"xat24cr x1rdy4ex x6ikm8r x10wlt62 xjkvuk6 x1iorvi4"},1:{className:"x9f619 x1lkfr7t xd183bf xat24cr x1rdy4ex x6ikm8r x10wlt62 xjkvuk6 x1iorvi4"}}[(R!=null)<<0],{children:d.jsx(r("FDSText.react"),{color:"primaryOnMedia",numberOfLines:1,type:"bodyLink2",children:E})})),R!=null&&R.length>0?d.jsx("div",{className:"x1anpbxc","data-testid":void 0,children:d.jsx(r("FDSText.react"),{color:"secondaryOnMedia",numberOfLines:1,type:"body3",children:R})}):null]}),d.jsxs(r("BaseRowItem.react"),{children:[d.jsx("div",{className:"x13fj5qh xifccgj",children:d.jsx(r("FDSCircleButton.react"),{"aria-label":s._(/*BTDS*/"Dismiss the context card"),color_DEPRECATED:"tertiary",icon:o("fbicon")._(u("478232"),16),onPress:y,size:24,type_DEPRECATED:"deemphasized"})}),d.jsx("div",{className:"xqo3gd x10l6tqk",children:d.jsx(o("InstreamAdsHideAdBehaviorContext").InstreamAdsHideAdBehaviorContext.Provider,{value:a,children:i.menuButton})})]})]})});return i.adUrl!=null?d.jsx(r("CometTrackingCodeContext").Provider,{value:k,children:d.jsx("div",{ref:I,children:d.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:15,children:d.jsx(r("CometPressable.react"),{display:"inline",label:E,linkProps:v,overlayDisabled:!0,testid:void 0,xstyle:m.pressable,children:c?O:F})})})}):null}g.displayName=g.name+" [from "+i.id+"]";function h(e){var t=o("react-compiler-runtime").c(16),n=e.callback,a=(c||(c=o("VideoPlayerHooks"))).useController(),i=c.usePaused(),l=c.usePlaying(),s=r("useDebouncedValue")(l,5),u=i&&!s,p;t[0]!==a?(p=function(){a.getCurrentState().paused&&(a.play("user_initiated"),a.setMuted(!0,null))},t[0]=a,t[1]=p):p=t[1];var _=p,f;t[2]!==a?(f=function(){a.getCurrentState().playing&&(a.pause("product_initiated"),a.seek(0))},t[2]=a,t[3]=f):f=t[3];var g=f,h;t[4]!==n?(h=function(){n&&n("PLAY_NI_VIDEO")},t[4]=n,t[5]=h):h=t[5];var y=h,C;t[6]===Symbol.for("react.memo_cache_sentinel")?(C={className:"x5yr21d x10l6tqk xh8yej3"},t[6]=C):C=t[6];var b;t[7]!==u?(b=u?d.jsx(r("PlayButtonItemOverlay.react"),{}):null,t[7]=u,t[8]=b):b=t[8];var v;t[9]!==_||t[10]!==g||t[11]!==b?(v=d.jsx("div",babelHelpers.extends({},C,{onMouseEnter:_,onMouseLeave:g,children:b})),t[9]=_,t[10]=g,t[11]=b,t[12]=v):v=t[12];var S;return t[13]!==y||t[14]!==v?(S=d.jsx(r("CometPressable.react"),{onPress:y,xstyle:m.niVideoPressable,children:v}),t[13]=y,t[14]=v,t[15]=S):S=t[15],S}l.default=g}),226);
__d("InstreamAdsFeedVideoContextCardImpl.react",["fbt","ix","BaseMiddot.react","BaseRow.react","BaseRowItem.react","CometEmojiTransform","CometEmoticonTransform","CometEntryPointDialogTrigger.react","CometPoliticalInfosheetDialogSelector.react","CometPressable.react","CometTextWithEntities.react","CometTrackingCodeContext","CometTrackingNodeProvider.react","CometVideoPlayerLoggingConfigForFBWeb","FDSCircleButton.react","FDSLink.react","FDSProfilePhoto.react","FDSText.react","FDSTextPairing.react","InstreamAdsConfig","InstreamAdsHideAdBehaviorContext","PlayButtonItemOverlay.react","StoryLocationTransparencyDialog.entrypoint","VideoPlayerHooks","VideoPlayerRelay.react","VideoPlayerSurface.react","fbicon","gkx","react","react-compiler-runtime","useDebouncedValue"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m={container:{height:"x1peatla",marginInlineEnd:"x1ws5yxj",marginInlineStart:"xw01apr",marginTop:"xw7yly9",paddingInlineEnd:"xv54qhq",paddingInlineStart:"xf7dkkf",paddingTop:"x7sb2j6",$$css:!0},item:{paddingInlineEnd:"x1icxu4v",paddingInlineStart:"x1g0dm76",$$css:!0},niVideoPressable:{display:"x1lliihq",height:"x5yr21d",position:"x10l6tqk",width:"xh8yej3",$$css:!0},pressable:{display:"x1lliihq",$$css:!0},snapshotDesc:{paddingInlineEnd:"x1icxu4v",paddingInlineStart:"x1g0dm76",$$css:!0},videoContainer:{marginInlineStart:"x1a5kqlc",marginTop:"x1gslohp",$$css:!0},watchTabContainer:{height:"x1peatla",marginInlineEnd:"x1ws5yxj",marginInlineStart:"xw01apr",paddingInlineEnd:"xv54qhq",paddingInlineStart:"xf7dkkf",paddingTop:"xyamay9",$$css:!0},watchTabPressable:{display:"x1lliihq",paddingTop:"xyamay9",$$css:!0}},p=r("gkx")("24373"),_=[r("CometEmoticonTransform")({size:18}),r("CometEmojiTransform")({size:18})],f=[r("CometEmoticonTransform")(),r("CometEmojiTransform")()],g=function(t){return t!=null?" "+Math.floor(t/60).toString()+":"+(Math.floor(t%60)<10?"0":"")+Math.floor(t%60).toString():""};function h(e){var t=o("react-compiler-runtime").c(146),n=e.adDuration,a=e.adPlaytime,i=e.contextCardHideAdBehavior,l=e.instreamAdsContextCardData,c=e.isAdsPlaying,h=e.isFullScreen,C=e.isWatchTab,b=e.onDismiss,v=e.onPlayFullLength,S=e.showPlayFullBtn,R=l==null?void 0:l.adUrl,L;t[0]!==R?(L={url:R},t[0]=R,t[1]=L):L=t[1];var E=L;if(!l)return null;var k=l.isThirdPartyDealAd,I,T,D,x,$,P,N,M,w,A,F,O,B,W,q,U,V,H,G,z,j,K,Q;if(t[2]!==n||t[3]!==a||t[4]!==l.adId||t[5]!==l.brandName||t[6]!==l.callback||t[7]!==l.clickToPlayVideo||t[8]!==l.clientToken||t[9]!==l.feedObjectID||t[10]!==l.profilePicURI||t[11]!==l.scmeLabel||t[12]!==l.source||t[13]!==l.storyId||t[14]!==l.title||t[15]!==l.trackingCode||t[16]!==l.verifiedVoiceContext||t[17]!==c||t[18]!==h||t[19]!==C||t[20]!==S){$=(l==null?void 0:l.brandName)!=null?l.brandName.toString().trim():"";var X;t[44]!==l.source?(X=(l==null?void 0:l.source)!=null?l.source.toString():null,t[44]=l.source,t[45]=X):X=t[45],N=X;var Y=l.title;Q=l.trackingCode;var J=l.adId,Z=l.feedObjectID,ee=l.storyId,te=l.verifiedVoiceContext,ne=l.scmeLabel;P=p&&l.scmeLabel!=null;var re=0;a!=null&&n!==null&&n!==void 0&&n>0&&(re=a/n*100);var oe=!c&&n!==null&&n!==void 0&&n>o("InstreamAdsConfig").DEFAULT_LONGER_AD_DURATION,ae;t[46]!==ne?(ae=function(t,n){return d.jsx(r("FDSLink.react"),{color_DEPRECATED:"secondary",onClick:t,ref:n,weight_DEPRECATED:"bold",children:ne})},t[46]=ne,t[47]=ae):ae=t[47];var ie=ae,le;t[48]!==J||t[49]!==ie||t[50]!==Z||t[51]!==ne||t[52]!==ee||t[53]!==te?(le=J!=null&&Z!=null&&ee!=null&&te!=null?d.jsx(r("CometPoliticalInfosheetDialogSelector.react"),{adID:J,dialogTriggerFunc:ie,isInstream:!0,storyID:ee,verifiedVoiceContext:te}):ee!=null?d.jsx(r("CometEntryPointDialogTrigger.react"),{dialogEntryPoint:r("StoryLocationTransparencyDialog.entrypoint"),otherProps:{},preloadParams:{storyID:ee},children:function(t){return d.jsx(r("FDSLink.react"),{color_DEPRECATED:"secondary",onClick:t,weight_DEPRECATED:"bold",children:ne})}}):null,t[48]=J,t[49]=ie,t[50]=Z,t[51]=ne,t[52]=ee,t[53]=te,t[54]=le):le=t[54],M=le;var se=l.clickToPlayVideo;t[55]!==h||t[56]!==C?(q={0:{className:"x1obq294 x5a5i1n xde0f50 x15x8krk x9f619 xjp8j0k xw7yly9 x1ys307a x1yztbdb xyqm7xq x1n2onr6 x1lku1pv"},4:{className:"x1obq294 x5a5i1n xde0f50 x15x8krk x9f619 xjp8j0k x1ys307a xyqm7xq x1y1aw1k x1n2onr6 x1lku1pv"},2:{className:"x1obq294 x5a5i1n xde0f50 x15x8krk x9f619 xjp8j0k xw7yly9 x1ys307a x1yztbdb xyqm7xq x1n2onr6 x1lku1pv xmjcpbm"},6:{className:"x1obq294 x5a5i1n xde0f50 x15x8krk x9f619 xjp8j0k x1ys307a xyqm7xq x1y1aw1k x1n2onr6 x1lku1pv xmjcpbm"},1:{className:"x1obq294 x5a5i1n xde0f50 x15x8krk x9f619 xjp8j0k xw7yly9 x1ys307a x1yztbdb xyqm7xq x1n2onr6 x1lku1pv xrmyhay"},5:{className:"x1obq294 x5a5i1n xde0f50 x15x8krk x9f619 xjp8j0k x1ys307a xyqm7xq x1y1aw1k x1n2onr6 x1lku1pv xrmyhay"},3:{className:"x1obq294 x5a5i1n xde0f50 x15x8krk x9f619 xjp8j0k xw7yly9 x1ys307a x1yztbdb xyqm7xq x1n2onr6 x1lku1pv xrmyhay"},7:{className:"x1obq294 x5a5i1n xde0f50 x15x8krk x9f619 xjp8j0k x1ys307a xyqm7xq x1y1aw1k x1n2onr6 x1lku1pv xrmyhay"}}[(C===!0)<<2|!h<<1|!!h<<0],t[55]=h,t[56]=C,t[57]=q):q=t[57],x=r("BaseRow.react"),F="center",O=C===!0?m.watchTabContainer:m.container,t[58]!==re||t[59]!==a||t[60]!==se||t[61]!==l.callback||t[62]!==l.clientToken||t[63]!==oe?(B=oe?d.jsx(r("BaseRowItem.react"),{xstyle:m.videoContainer,children:d.jsx("div",{className:"x15x8krk x1obq294 x6ikm8r x10wlt62 xjp8j0k x13oubkp",children:se?d.jsx(r("VideoPlayerRelay.react"),{adClientToken:l.clientToken,canAutoplay:"do_not_autoplay",loggingConfig:o("CometVideoPlayerLoggingConfigForFBWeb").createCometVideoPlayerLoggingConfigForFBWeb(),portalingEnabled:!1,subOrigin:"inline",video:se,children:d.jsx(r("VideoPlayerSurface.react"),{children:d.jsx(y,{adCompletedPercentage:re,adPlaytime:a,callback:l.callback})})}):null})}):null,t[58]=re,t[59]=a,t[60]=se,t[61]=l.callback,t[62]=l.clientToken,t[63]=oe,t[64]=B):B=t[64],t[65]!==l.profilePicURI||t[66]!==oe?(W=!oe&&l.profilePicURI!==null&&l.profilePicURI!==void 0&&l.profilePicURI.length>0?d.jsx(r("BaseRowItem.react"),{children:d.jsx(r("FDSProfilePhoto.react"),{shape:"circle",size:48,source:{uri:l.profilePicURI}})}):null,t[65]=l.profilePicURI,t[66]=oe,t[67]=W):W=t[67],D=r("BaseRowItem.react"),K=!0,w=!0,A=oe?m.snapshotDesc:m.item,j={0:{className:"x4vbgl9 x1rdy4ex x6ikm8r x10wlt62 xjkvuk6 x1iorvi4"},2:{className:"x6ikm8r x10wlt62 x9f619 x1lkfr7t x4vbgl9 x1rdy4ex xd183bf xjkvuk6 x1iorvi4"},1:{className:"x4vbgl9 x1rdy4ex x6ikm8r x10wlt62 xjkvuk6 x1iorvi4 xgujvf1"},3:{className:"x6ikm8r x10wlt62 x9f619 x1lkfr7t x4vbgl9 x1rdy4ex xd183bf xjkvuk6 x1iorvi4 xgujvf1"}}[(Y!=null)<<1|(Y!=null&&Y.length>0&&$!=null&&$.length>0)<<0],T=r("FDSTextPairing.react"),t[68]!==Y||t[69]!==P||t[70]!==M||t[71]!==S?(H=P&&S===!0?M:Y!=null&&Y.length>0?d.jsx("span",{"data-testid":void 0,children:d.jsx(r("CometTextWithEntities.react"),{text:Y,transforms:f})}):null,t[68]=Y,t[69]=P,t[70]=M,t[71]=S,t[72]=H):H=t[72],G=h?"secondaryOnMedia":"secondary",z=1,t[73]===Symbol.for("react.memo_cache_sentinel")?(V={className:"x1lliihq x1120s5i"},t[73]=V):V=t[73],I=r("CometTextWithEntities.react"),U=$.toString(),t[2]=n,t[3]=a,t[4]=l.adId,t[5]=l.brandName,t[6]=l.callback,t[7]=l.clickToPlayVideo,t[8]=l.clientToken,t[9]=l.feedObjectID,t[10]=l.profilePicURI,t[11]=l.scmeLabel,t[12]=l.source,t[13]=l.storyId,t[14]=l.title,t[15]=l.trackingCode,t[16]=l.verifiedVoiceContext,t[17]=c,t[18]=h,t[19]=C,t[20]=S,t[21]=I,t[22]=T,t[23]=D,t[24]=x,t[25]=$,t[26]=P,t[27]=N,t[28]=M,t[29]=w,t[30]=A,t[31]=F,t[32]=O,t[33]=B,t[34]=W,t[35]=q,t[36]=U,t[37]=V,t[38]=H,t[39]=G,t[40]=z,t[41]=j,t[42]=K,t[43]=Q}else I=t[21],T=t[22],D=t[23],x=t[24],$=t[25],P=t[26],N=t[27],M=t[28],w=t[29],A=t[30],F=t[31],O=t[32],B=t[33],W=t[34],q=t[35],U=t[36],V=t[37],H=t[38],G=t[39],z=t[40],j=t[41],K=t[42],Q=t[43];var ue;t[74]!==I||t[75]!==U?(ue=d.jsx(I,{text:U,transforms:_}),t[74]=I,t[75]=U,t[76]=ue):ue=t[76];var ce;t[77]!==ue||t[78]!==V?(ce=d.jsx("span",babelHelpers.extends({},V,{children:ue})),t[77]=ue,t[78]=V,t[79]=ce):ce=t[79];var de=h?"white":"primary",me;t[80]!==T||t[81]!==ce||t[82]!==de||t[83]!==H||t[84]!==G||t[85]!==z?(me=d.jsx(T,{body:H,bodyColor:G,bodyLineLimit:z,headline:ce,headlineColor:de,headlineLineLimit:2,level:3}),t[80]=T,t[81]=ce,t[82]=de,t[83]=H,t[84]=G,t[85]=z,t[86]=me):me=t[86];var pe;t[87]!==me||t[88]!==j?(pe=d.jsx("div",babelHelpers.extends({},j,{children:me})),t[87]=me,t[88]=j,t[89]=pe):pe=t[89];var _e;t[90]!==n||t[91]!==c||t[92]!==h||t[93]!==P||t[94]!==N||t[95]!==v||t[96]!==M||t[97]!==S?(_e=S===!0?d.jsx("div",{className:"x1anpbxc",children:v?d.jsx(r("CometPressable.react"),{display:"inline",onPress:v,children:d.jsxs(r("FDSText.react"),{color:h?"secondaryOnMedia":"secondary",numberOfLines:1,type:"body3",children:[s._(/*BTDS*/"Play Full"),g(n)]})}):null}):N!=null&&N.length>0?d.jsx("div",{className:"x1anpbxc","data-testid":void 0,children:d.jsxs(r("FDSText.react"),{color:h?"secondaryOnMedia":"secondary",numberOfLines:2,type:"body3",children:[c?null:s._(/*BTDS*/"Sponsored"),P?d.jsx(r("BaseMiddot.react"),{className:"xnnr8r xwklpps"}):null,P?M:null,c?null:d.jsx(r("BaseMiddot.react"),{className:"xnnr8r xwklpps"}),N]})}):null,t[90]=n,t[91]=c,t[92]=h,t[93]=P,t[94]=N,t[95]=v,t[96]=M,t[97]=S,t[98]=_e):_e=t[98];var fe;t[99]!==D||t[100]!==w||t[101]!==A||t[102]!==pe||t[103]!==_e||t[104]!==K?(fe=d.jsxs(D,{expanding:K,useDeprecatedStyles:w,xstyle:A,children:[pe,_e]}),t[99]=D,t[100]=w,t[101]=A,t[102]=pe,t[103]=_e,t[104]=K,t[105]=fe):fe=t[105];var ge;t[106]!==l.ctaButton||t[107]!==c||t[108]!==h?(ge=h&&c?d.jsx("div",{className:"x1ok221b",children:l.ctaButton}):null,t[106]=l.ctaButton,t[107]=c,t[108]=h,t[109]=ge):ge=t[109];var he;t[110]!==ge?(he=d.jsx(r("BaseRowItem.react"),{children:ge}),t[110]=ge,t[111]=he):he=t[111];var ye;t[112]!==c||t[113]!==b?(ye=c?null:d.jsx("div",{className:"xdzw4kq xafmxuu",children:d.jsx(r("FDSCircleButton.react"),{"aria-label":s._(/*BTDS*/"Close ad"),color_DEPRECATED:"tertiary",icon:o("fbicon")._(u("478233"),20),onPress:b,size:24,type_DEPRECATED:"deemphasized"})}),t[112]=c,t[113]=b,t[114]=ye):ye=t[114];var Ce;t[115]!==c?(Ce={0:{},1:{className:"x1anpbxc x10l6tqk"}}[!c<<0],t[115]=c,t[116]=Ce):Ce=t[116];var be;t[117]!==i||t[118]!==l.menuButton?(be=d.jsx(o("InstreamAdsHideAdBehaviorContext").InstreamAdsHideAdBehaviorContext.Provider,{value:i,children:l.menuButton}),t[117]=i,t[118]=l.menuButton,t[119]=be):be=t[119];var ve;t[120]!==Ce||t[121]!==be?(ve=d.jsx("div",babelHelpers.extends({},Ce,{children:be})),t[120]=Ce,t[121]=be,t[122]=ve):ve=t[122];var Se;t[123]!==ye||t[124]!==ve?(Se=d.jsxs(r("BaseRowItem.react"),{children:[ye,ve]}),t[123]=ye,t[124]=ve,t[125]=Se):Se=t[125];var Re;t[126]!==x||t[127]!==F||t[128]!==O||t[129]!==B||t[130]!==W||t[131]!==fe||t[132]!==he||t[133]!==Se?(Re=d.jsxs(x,{verticalAlign:F,xstyle:O,children:[B,W,fe,he,Se]}),t[126]=x,t[127]=F,t[128]=O,t[129]=B,t[130]=W,t[131]=fe,t[132]=he,t[133]=Se,t[134]=Re):Re=t[134];var Le;t[135]!==q||t[136]!==Re?(Le=d.jsx("div",babelHelpers.extends({},q,{children:Re})),t[135]=q,t[136]=Re,t[137]=Le):Le=t[137];var Ee=Le,ke;return t[138]!==Ee||t[139]!==$||t[140]!==l.adUrl||t[141]!==k||t[142]!==C||t[143]!==E||t[144]!==Q?(ke=l.adUrl!=null&&k===!1?d.jsx(r("CometTrackingCodeContext").Provider,{value:Q,children:d.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:15,children:d.jsx(r("CometPressable.react"),{display:"inline",label:$,linkProps:E,overlayDisabled:!0,xstyle:C===!0?m.watchTabPressable:m.pressable,children:Ee})})}):null,t[138]=Ee,t[139]=$,t[140]=l.adUrl,t[141]=k,t[142]=C,t[143]=E,t[144]=Q,t[145]=ke):ke=t[145],ke}function y(e){var t=o("react-compiler-runtime").c(25),n=e.adCompletedPercentage,a=e.adPlaytime,i=e.callback,l=(c||(c=o("VideoPlayerHooks"))).useController(),s=c.usePaused(),u=c.usePlaying(),p=r("useDebouncedValue")(u,5),_=s&&!p,f;t[0]!==l?(f=function(){l.getCurrentState().paused&&(l.play("user_initiated"),l.setMuted(!0,null))},t[0]=l,t[1]=f):f=t[1];var h=f,y;t[2]!==l?(y=function(){l.getCurrentState().playing&&(l.pause("product_initiated"),l.seek(0))},t[2]=l,t[3]=y):y=t[3];var C=y,b;t[4]!==i?(b=function(){i&&i("PLAY_LONGER_AD")},t[4]=i,t[5]=b):b=t[5];var v=b,S;t[6]===Symbol.for("react.memo_cache_sentinel")?(S={className:"x5yr21d x10l6tqk xh8yej3"},t[6]=S):S=t[6];var R;t[7]!==_?(R=_?d.jsx(r("PlayButtonItemOverlay.react"),{}):null,t[7]=_,t[8]=R):R=t[8];var L;t[9]!==h||t[10]!==C||t[11]!==R?(L=d.jsx("div",babelHelpers.extends({},S,{onMouseEnter:h,onMouseLeave:C,children:R})),t[9]=h,t[10]=C,t[11]=R,t[12]=L):L=t[12];var E;t[13]!==a?(E=a!=null&&a>=1?d.jsx("div",{className:"xal61yo xjwep3j x1t39747 x1wcsgtt x1pczhz8 xqo3gd x1txq2hj x1qx5ct2 xxx7yvo x10l6tqk x1n7h9c3",children:d.jsx("div",{className:"x14ctfv x1pg5gke x1fb7gu6 x9otpla x10l6tqk xwa60dl xuxw1ft",children:g(a)})}):null,t[13]=a,t[14]=E):E=t[14];var k,I,T;t[15]===Symbol.for("react.memo_cache_sentinel")?(I={className:"x1ey2m1c x10l6tqk xh8yej3"},T={className:"xobhos8 xqu0tyb xh8yej3"},k="x1wbbese xqu0tyb",t[15]=k,t[16]=I,t[17]=T):(k=t[15],I=t[16],T=t[17]);var D=n+"%",x;t[18]!==D?(x=d.jsx("div",babelHelpers.extends({},I,{children:d.jsx("div",babelHelpers.extends({},T,{children:d.jsx("div",{className:k,style:{width:D}})}))})),t[18]=D,t[19]=x):x=t[19];var $;return t[20]!==v||t[21]!==x||t[22]!==L||t[23]!==E?($=d.jsxs(r("CometPressable.react"),{onPress:v,xstyle:m.niVideoPressable,children:[L,E,x]}),t[20]=v,t[21]=x,t[22]=L,t[23]=E,t[24]=$):$=t[24],$}l.default=h}),226);
__d("InstreamAdsFeedContextCardSurface.react",["CometVideoPlayerInstreamAdsFeedContextCardContext","InstreamAdsExtraFieldsContext","InstreamAdsFeedNIContextCardImpl.react","InstreamAdsFeedVideoContextCardImpl.react","InstreamAdsHideAdBehaviorContext","InstreamAdsPalmStateContext","InstreamPalmStateManagerContext","VideoPlayerInstreamAdsStateHooks","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useEffect,m=u.useRef,p=u.useState;function _(){var e=c(o("InstreamAdsHideAdBehaviorContext").InstreamAdsHideAdBehaviorContext),t=c(o("CometVideoPlayerInstreamAdsFeedContextCardContext").CometVideoPlayerInstreamAdsFeedContextCardContext),n=o("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),a=o("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),i=o("VideoPlayerInstreamAdsStateHooks").useInstreamAdsFeedContextCardStateValue(),l=p(null),u=l[0],_=l[1],f=m(null),g=m(!1),h=o("VideoPlayerInstreamAdsStateHooks").useInstreamAdsFullScreenContextCardState(),y=h[0],C=h[1],b=o("InstreamAdsExtraFieldsContext").useInstreamAdsExtraFieldsContext();return d(function(){var n={onClose:function(){e!=null&&e.onClose&&e.onClose(),g.current=!0,f.current=null,t!=null&&t.onNodeChangeFunc&&t.onNodeChangeFunc(null),C(null)},onOpen:function(){e!=null&&e.onOpen&&e.onOpen()}};_(n)},[e,t,C]),d(function(){if(u)if(n==="START_AD"||n==="START_NI_AD"||(n==="FETCH"||n==="INIT")&&y!==null||n==="END"&&!g.current){var e=n==="START_AD"||n==="START_NI_AD",o=n==="START_AD"&&(b==null?void 0:b.isTruncated),l=b==null?void 0:b.adDuration,c=b==null?void 0:b.adPlaytime,d=function(){g.current=!0,f.current=null,t!=null&&t.onNodeChangeFunc&&t.onNodeChangeFunc(null),C(null)},m=function(){a.setExtraFields(babelHelpers.extends({},b,{isTruncated:!1}))},p=(i==null?void 0:i.isNIAd)!==!0?r("InstreamAdsFeedVideoContextCardImpl.react"):r("InstreamAdsFeedNIContextCardImpl.react"),_={adDuration:l,adPlaytime:c,contextCardHideAdBehavior:u,instreamAdsContextCardData:i,isAdsPlaying:e,onDismiss:d,onPlayFullLength:m,showPlayFullBtn:o},h=s.jsx(p,babelHelpers.extends({},_,{isFullScreen:!1,isWatchTab:t.isWatchTab})),v=s.jsx(p,babelHelpers.extends({},_,{isFullScreen:!0}));g.current=!1,f.current=h,t!=null&&t.onNodeChangeFunc&&t.onNodeChangeFunc(h),C(v)}else f.current===null&&(t!=null&&t.onNodeChangeFunc&&t.onNodeChangeFunc(null),C(null))},[u,n,i,t,C,b==null?void 0:b.isTruncated,b==null?void 0:b.adDuration,b==null?void 0:b.adClientToken,b==null?void 0:b.isNIAd,b==null?void 0:b.watchTillEnd,a,b]),null}_.displayName=_.name+" [from "+i.id+"]",l.default=_}),98);
__d("InstreamAdsIsEmptyContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c=s.createContext(!0);function d(){return u(c)}l.InstreamAdsIsEmptyContext=c,l.useInstreamAdsIsEmptyContext=d}),98);
__d("InstreamAdsStartIndicator.react",["fbt","DateConsts","FDSProgressRing.react","InstreamAdsCurrentInsertionContext","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=e,m=d.useEffect,p=d.useRef,_="x3euffx-B";function f(){var e,t=o("react-compiler-runtime").c(25),n=p(null),a=p(null),i=p(null),l=(u||(u=o("VideoPlayerHooks"))).useController(),d=l.getPlayheadPosition(),_=u.usePaused(),f=o("VideoPlayerInstreamAdsStateHooks").useStartIndicatorBeginningTimeState(),g=f[0],h=f[1],y=o("VideoPlayerInstreamAdsStateHooks").useAdBreaksTimeOffsetBeginningState(),C=y[0],b=y[1],v=(e=o("InstreamAdsCurrentInsertionContext").useInstreamAdsCurrentInsertion())==null?void 0:e.timeOffsetInMs,S=(v!=null?v:0)/o("DateConsts").MS_PER_SEC,R;t[0]===Symbol.for("react.memo_cache_sentinel")?(R=function(){a!=null&&a.current&&n!=null&&n.current&&a.current.style.setProperty("width",(n.current.clientWidth+38).toString()+"px")},t[0]=R):R=t[0],m(R,void 0);var L,E;if(t[1]!==S||t[2]!==C||t[3]!==d||t[4]!==b||t[5]!==h||t[6]!==g?(L=function(){(g===null||d-(g!=null?g:0)>(C!=null?C:0))&&(h(d),b(S))},E=[d,S,h,g,b,C],t[1]=S,t[2]=C,t[3]=d,t[4]=b,t[5]=h,t[6]=g,t[7]=L,t[8]=E):(L=t[7],E=t[8]),m(L,E),v==null||d-(g!=null?g:0)>(C!=null?C:0)){var k;return t[9]===Symbol.for("react.memo_cache_sentinel")?(k=c.jsx(c.Fragment,{}),t[9]=k):k=t[9],k}var I=S-d,T=g==null?0:(d-g)/(S-g)*100,D;t[10]===Symbol.for("react.memo_cache_sentinel")?(D=s._(/*BTDS*/"Ad starting soon"),t[10]=D):D=t[10];var x=D,$;t[11]===Symbol.for("react.memo_cache_sentinel")?($=function(){i.current&&(i.current.style.visibility="hidden")},t[11]=$):$=t[11];var P=$,N;t[12]===Symbol.for("react.memo_cache_sentinel")?(N={className:"x4afe7t x10e4vud xu5i820 xa3vuyk x1r4y97 x10l6tqk"},t[12]=N):N=t[12];var M,w,A;t[13]===Symbol.for("react.memo_cache_sentinel")?(M=c.jsx("div",{className:"xal61yo xjwep3j x1t39747 x1wcsgtt x1pczhz8 x1ey2m1c x1txq2hj xd7y6wv x1o0tod x10l6tqk",ref:a}),w={className:"x1ey2m1c xd7y6wv x1o0tod x1hc1fzr x10l6tqk"},A={className:"xrotz4w x9otpla x1n2onr6 xwa60dl"},t[13]=M,t[14]=w,t[15]=A):(M=t[13],w=t[14],A=t[15]);var F;t[16]===Symbol.for("react.memo_cache_sentinel")?(F=s._(/*BTDS*/"Progress indicator for upcoming advertisement"),t[16]=F):F=t[16];var O=Date.now()-T/100*(I*1e3),B;t[17]!==_||t[18]!==I||t[19]!==T||t[20]!==O?(B=c.jsx("div",babelHelpers.extends({},A,{children:c.jsx(r("FDSProgressRing.react"),{"aria-label":F,beginningPercentage:T,color:"light",duration:I,explicitStartTime:O,onComplete:P,pause:_,size:16,type:"default"})})),t[17]=_,t[18]=I,t[19]=T,t[20]=O,t[21]=B):B=t[21];var W;t[22]===Symbol.for("react.memo_cache_sentinel")?(W=c.jsx("div",{className:"x14ctfv x1pg5gke x18hw5r0 x132q4wb x9otpla x10l6tqk xwa60dl xuxw1ft",ref:n,children:x}),t[22]=W):W=t[22];var q;return t[23]!==B?(q=c.jsxs("div",babelHelpers.extends({},N,{ref:i,children:[M,c.jsxs("div",babelHelpers.extends({},w,{children:[B,W]}))]})),t[23]=B,t[24]=q):q=t[24],q}l.default=f}),226);
__d("useInstreamAdsFetcherQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="26291326370456975"}),null);
__d("useInstreamAdsFetcherQuery.graphql",["useInstreamAdsFetcherQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"adTriggerSource"},t={defaultValue:null,kind:"LocalArgument",name:"first"},r={defaultValue:null,kind:"LocalArgument",name:"hostVideoId"},o={defaultValue:null,kind:"LocalArgument",name:"insertionPointOrigin"},a={defaultValue:null,kind:"LocalArgument",name:"instreamPlacement"},i={defaultValue:null,kind:"LocalArgument",name:"instreamVideoAdBreakIndex"},l={defaultValue:null,kind:"LocalArgument",name:"instreamVideoAdType"},s={defaultValue:null,kind:"LocalArgument",name:"isSponsorHostVideo"},u={defaultValue:null,kind:"LocalArgument",name:"playerFormat"},c={defaultValue:null,kind:"LocalArgument",name:"playerSubOrigin"},d={defaultValue:null,kind:"LocalArgument",name:"renderLocation"},m={defaultValue:null,kind:"LocalArgument",name:"requestedAdFormat"},p={defaultValue:null,kind:"LocalArgument",name:"scale"},_={defaultValue:null,kind:"LocalArgument",name:"storyIdentifier"},f={defaultValue:null,kind:"LocalArgument",name:"tracePolicy"},g=[{kind:"Variable",name:"ad_trigger_source",variableName:"adTriggerSource"},{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"host_video_id",variableName:"hostVideoId"},{kind:"Variable",name:"insertion_point_origin",variableName:"insertionPointOrigin"},{kind:"Variable",name:"instream_placement",variableName:"instreamPlacement"},{kind:"Variable",name:"instream_video_ad_break_index",variableName:"instreamVideoAdBreakIndex"},{kind:"Variable",name:"instream_video_ad_type",variableName:"instreamVideoAdType"},{kind:"Variable",name:"is_sponsored_host_video",variableName:"isSponsorHostVideo"},{kind:"Variable",name:"player_format",variableName:"playerFormat"},{kind:"Variable",name:"player_sub_origin",variableName:"playerSubOrigin"},{kind:"Variable",name:"requested_ad_format",variableName:"requestedAdFormat"},{kind:"Variable",name:"story_identifier",variableName:"storyIdentifier"},{kind:"Variable",name:"trace_policy",variableName:"tracePolicy"}],h={alias:null,args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_token",storageKey:null}],storageKey:null},y=[{kind:"Variable",name:"location",variableName:"renderLocation"}],C={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},b={args:null,documentName:"useInstreamAdsFetcherQuery",fragmentName:"InstreamAdsStory_story",fragmentPropName:"story",kind:"ModuleImport"},v={alias:null,args:null,kind:"ScalarField",name:"query_refetch_interval_s",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"should_show_ad_pod",storageKey:null},R={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},L=[R];return{fragment:{argumentDefinitions:[e,t,r,o,a,i,l,s,u,c,d,m,p,_,f],kind:"Fragment",metadata:null,name:"useInstreamAdsFetcherQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:g,concreteType:"InstreamVideoAdsConnection",kind:"LinkedField",name:"instream_video_ads",plural:!1,selections:[{alias:null,args:null,concreteType:"InstreamVideoAdsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:[h,{alias:null,args:y,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[C],storageKey:null}],storageKey:null},b],storageKey:null}],storageKey:null},v,S],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[m,t,r,l,i,a,f,c,u,s,d,_,o,p,e],kind:"Operation",name:"useInstreamAdsFetcherQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:g,concreteType:"InstreamVideoAdsConnection",kind:"LinkedField",name:"instream_video_ads",plural:!1,selections:[{alias:null,args:null,concreteType:"InstreamVideoAdsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:[h,{alias:null,args:y,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[C,{kind:"InlineFragment",selections:L,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:L,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:L,type:"GenericAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:L,type:"MontageImage",abstractKey:null},{kind:"InlineFragment",selections:L,type:"MontageVideo",abstractKey:null}],storageKey:null}],storageKey:null},R,b],storageKey:null}],storageKey:null},v,S],storageKey:null}],storageKey:null}]},params:{id:n("useInstreamAdsFetcherQuery_facebookRelayOperation"),metadata:{},name:"useInstreamAdsFetcherQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useInstreamAdsFetcher",["CometFeedStoryContext","CometRelay","InstreamAdsConfig","InstreamAdsCurrentInsertionContext","InstreamAdsExtraFieldsContext","InstreamAdsPalmStateContext","InstreamPalmStateManagerContext","VideoPlayerHooks","VideoPlayerTracePolicyContext","WebPixelRatio","createVideoStateHook","react","useInstreamAdsFetcherQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=c.useEffect,m=c.useRef,p=o("createVideoStateHook").createVideoStateHook(),_=p.stateHook,f=o("createVideoStateHook").createVideoStateHook(),g=f.stateHook,h=o("createVideoStateHook").createVideoStateHook(),y=h.stateHook,C=o("createVideoStateHook").createVideoStateHook(),b=C.valueHook,v=o("createVideoStateHook").createVideoStateHook(),S=v.stateHook,R=o("createVideoStateHook").createVideoStateHook(),L=R.stateHook,E=e!==void 0?e:e=n("useInstreamAdsFetcherQuery.graphql");function k(e){return e==="GenericAttachmentMedia"||e==="PHOTO"}function I(e){var t,n=e.playerFormat,r=e.subOrigin,a=e.videoFBID,i=o("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),l=o("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),s=o("CometRelay").useRelayEnvironment(),c=_(null),p=c[0],f=c[1],h=g(null),C=h[0],v=h[1],R=y(null),I=R[0],T=R[1],D=b({current:null}),x=o("InstreamAdsCurrentInsertionContext").useInstreamAdsCurrentInsertion(),$=o("VideoPlayerTracePolicyContext").useVideoPlayerTracePolicy(),P=$.initialTracePolicy,N=$.routeTracePolicy,M=P!=null?P:N,w=(u||(u=o("VideoPlayerHooks"))).useAdClientToken(),A=S([null,null]),F=A[0],O=A[1],B=L(),W=B[0],q=B[1],U=(t=o("CometFeedStoryContext").useCometFeedStoryContext())==null?void 0:t.storyID,V=u.useBroadcastStatus(),H=o("InstreamAdsExtraFieldsContext").useInstreamAdsExtraFieldsContext(),G=m({playerFormat:null});return d(function(){G.current.playerFormat=n},[n]),d(function(){(i==="INIT"||i==="END")&&(D.current=null,f(null),O([null,null]))},[D,i,O,f]),d(function(){if(U!==null&&q(U),x!=null&&D.current===null&&!(V!=="LIVE"&&x.index===o("InstreamAdsConfig").UNIFIED_SCHEDULER_AD_INDEX)){var e;V==="VOD_READY"?e="VOD":V==="LIVE"?e="LIVE":e="NONLIVE";var t=o("CometRelay").fetchQuery(s,E,{adTriggerSource:x.adTriggerSource,first:10,hostVideoId:a,insertionPointOrigin:x.insertionPointOrigin,instreamPlacement:x.instreamPlacement,instreamVideoAdBreakIndex:x.index,instreamVideoAdType:e,isSponsorHostVideo:w!=null,playerFormat:G.current.playerFormat,playerSubOrigin:r,renderLocation:"feed_mobile",requestedAdFormat:x.adFormat,scale:o("WebPixelRatio").get(),storyIdentifier:W,tracePolicy:M}),n=t.subscribe({error:function(t){},next:function(t){var e,n,r=t.viewer.instream_video_ads.edges,o=t.viewer.instream_video_ads.query_refetch_interval_s,a=(e=(n=t.viewer)==null||(n=n.instream_video_ads)==null?void 0:n.should_show_ad_pod)!=null?e:!1;if((r.length===0||a&&r.length===1)&&l.setExtraFields(Object.assign(H||{},{unifiedSchedulerRefetchIntervalSec:o})),(!a&&r.length>0||r.length>1)&&D.current===null){var i,s,u=r[0].node,c=u.attachments[0].media.__typename,d=k(c),m=x.instreamPlacement==="NON_INTERRUPTIVE"||d,p=(i=x.adFormat)==null?void 0:i.startsWith("SKIPPABLE_VIDEO"),_=null;if(a){var g,h=r[1].node;_=h==null||(g=h.sponsored_data)==null?void 0:g.client_token,f([u,h]),D.current=[u,h]}else f([u]),D.current=[u];l.setExtraFields(Object.assign(H||{},{adClientToken:(s=u.sponsored_data)==null?void 0:s.client_token,adClientTokenSecond:_,adPodIndex:0,isAdPod:a,isNIAd:m,isSkippableAd:p,unifiedSchedulerRefetchIntervalSec:o})),l.setIsEmpty(!1),m?(T(null),v(u)):(v(null),T(u))}}});return function(){n.unsubscribe(),D.current=null}}},[s,l,r,a,x,w,G,M,D,f,W,U,q,V,v,T]),{NIAdStory:C,adPorableVideoID:F,instreamAdsStory:p,palmState:i,setAdPortableVideoID:O,videoAdStory:I}}l.default=I}),98);
__d("PMVCometInterruptionsCounterResetMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29218678391114089"}),null);
__d("PMVCometInterruptionsCounterResetMutation.graphql",["PMVCometInterruptionsCounterResetMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"pmv_comet_interruptions_counter_reset",storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PMVCometInterruptionsCounterResetMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"PMVCometInterruptionsCounterResetMutation",selections:e},params:{id:n("PMVCometInterruptionsCounterResetMutation_facebookRelayOperation"),metadata:{},name:"PMVCometInterruptionsCounterResetMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("PMVCometInterruptionsCounterReset",["CometRelay","PMVCometInterruptionsCounterResetMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("PMVCometInterruptionsCounterResetMutation.graphql");function u(e,t){var n={mutation:s,onCompleted:t&&t.onSuccess,onError:t&&t.onFailure,variables:{}};return o("CometRelay").commitMutation(e,n)}l.default=u}),98);
__d("PMVMonetizationUtils",["PMVCometInterruptionsCounterReset"],(function(t,n,r,o,a,i,l){"use strict";function e(e){r("PMVCometInterruptionsCounterReset")(e,{onFailure:function(t){},onSuccess:function(t){}})}l.PMVCometCounterReset=e}),98);
__d("useInstreamAdsOrganicVideoControl",["CometRelay","InstreamAdsConfig","InstreamAdsExtraFieldsContext","InstreamAdsPalmStateContext","PMVMonetizationUtils","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","createVideoStateHook","react","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useRef,m=r("requireDeferred")("CommercialBreakClickFalcoEvent").__setRef("useInstreamAdsOrganicVideoControl"),p=r("requireDeferred")("CommercialBreakEndFalcoEvent").__setRef("useInstreamAdsOrganicVideoControl"),_=o("createVideoStateHook").createVideoStateHook(""),f=_.valueHook;function g(){var e=o("react-compiler-runtime").c(16),t=o("CometRelay").useRelayEnvironment(),n=o("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),r=(s||(s=o("VideoPlayerHooks"))).useController(),a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={current:null},e[0]=a):a=e[0];var i=f(a),l=o("InstreamAdsExtraFieldsContext").useInstreamAdsExtraFieldsContext(),u=(l==null?void 0:l.isAdPod)===!0&&(l==null?void 0:l.adPodIndex)===1,_=n==="END"&&u?l==null?void 0:l.adClientTokenSecond:l==null?void 0:l.adClientToken,g=l==null?void 0:l.isNIAd,h=s.useIsPremiumMusicVideo(),y=s.useIsNCSR(),C=(l==null?void 0:l.isSkippableAd)||n==="END"&&u,b=d(""),v=d(null),S=l==null?void 0:l.watchTillEnd,R=(l==null?void 0:l.adPlaytime)||0,L=o("VideoPlayerInstreamAdsStateHooks").useInstreamAdsPostRollEndedOrSkippedStateSetter(),E,k;return e[1]!==_||e[2]!==R||e[3]!==t||e[4]!==i||e[5]!==u||e[6]!==y||e[7]!==g||e[8]!==h||e[9]!==C||e[10]!==r||e[11]!==n||e[12]!==L||e[13]!==S?(E=function(){if((n==="END"||u)&&(g===!0||v.current==="PLAY_LONGER_AD"||b.current!==_||!_)){if(n==="END"){var e=i.current;if(e&&r.unfreeze(e),i.current=null,r.getCurrentState().ended)L(!0);else{var a=r.getCurrentState(),l=a.paused;l&&r.play("commercial_break")}}if(v.current==="START_AD"&&(S===!0&&R<o("InstreamAdsConfig").DEFAULT_AD_COMPLETION_DURATION||R>=o("InstreamAdsConfig").DEFAULT_AD_COMPLETION_DURATION||C===!0)){var s=S!==!0&&C===!0;p.onReady(function(e){e.log(function(){return{commercial_break_ad_client_token:_,ending_reason:s?"skip_ad":"playback_finished"}})}),s&&m.onReady(function(e){e.log(function(){return{ad_break_click_source:"skip_button_click",commercial_break_ad_client_token:_}})}),(h||y)&&o("PMVMonetizationUtils").PMVCometCounterReset(t)}b.current=_}v.current=n},k=[_,t,h,r,n,L,i,S,g,y,R,C,u],e[1]=_,e[2]=R,e[3]=t,e[4]=i,e[5]=u,e[6]=y,e[7]=g,e[8]=h,e[9]=C,e[10]=r,e[11]=n,e[12]=L,e[13]=S,e[14]=E,e[15]=k):(E=e[14],k=e[15]),c(E,k),i}l.default=g}),98);
__d("useLiveInstreamAdsScheduler",["InstreamAdsConfig","InstreamAdsExtraFieldsContext","InstreamAdsIsEmptyContext","InstreamAdsPalmStateContext","InstreamPalmStateManagerContext","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","gkx","react","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useRef,m=200,p=2e4,_=2e4;function f(){var e=o("VideoPlayerInstreamAdsStateHooks").useUnifiedSchedulerLastFetchTimeState(),t=e[0],n=e[1],a=o("VideoPlayerInstreamAdsStateHooks").useWaitingForAdFetchState(),i=a[0],l=a[1],u=d(i),f=(s||(s=o("VideoPlayerHooks"))).useController(),g=o("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),h=o("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),y=o("InstreamAdsIsEmptyContext").useInstreamAdsIsEmptyContext(),C=d(y),b=s.useWatchTime(),v=s.useLastPlayedTime(),S=s.useIsLive(),R=o("InstreamAdsExtraFieldsContext").useInstreamAdsExtraFieldsContext(),L=d(0),E=o("InstreamAdsConfig").DEFAULT_FETCH_TIME_INTERVAL_MS;c(function(){C.current=y},[y]),c(function(){if(!S)return;function e(){if(g==="INIT"){var e={adFormat:null,adTriggerSource:o("InstreamAdsConfig").UNIFIED_SCHEDULER_TIGGER_SOURCE,index:o("InstreamAdsConfig").UNIFIED_SCHEDULER_AD_INDEX,insertionPointOrigin:null,instreamPlacement:"NON_INTERRUPTIVE",timeOffsetInMs:null};h.setCurrentInsertion(e),h.setState("FETCH")}}function a(){if(C.current===!0&&u.current===!0){r("setTimeout")(function(){a()},E);return}if(g==="FETCH"&&C.current===!1){(R==null?void 0:R.isNIAd)===!0&&(h.setState("START_NI_AD"),r("setTimeout")(function(){h.setState("INIT")},m)),u.current=!1,l(!1);var e=b+(Date.now()-v);n(e)}}var i=f.subscribe(function(){if(r("gkx")("24376")){var i;if(v===0)return;var s=b+(Date.now()-v);g==="END"&&h.setState("INIT"),L.current=(i=R==null?void 0:R.unifiedSchedulerRefetchIntervalSec)!=null?i:o("InstreamAdsConfig").getUnifiedSchedulerFrequencyMs()/1e3,g==="INIT"&&s>p&&s-t>=L.current*1e3&&e(),s>o("InstreamAdsConfig").getUnifiedSchedulerFrequencyMs()&&g==="FETCH"&&u.current===!1&&(u.current=!0,l(!0),a(),r("setTimeout")(function(){g==="FETCH"&&(h.setState("INIT"),u.current===!0&&(n(b+(Date.now()-v)),l(!1),u.current=!1))},_))}});return function(){i.remove()}},[f,h,b,v,t,n,R,i,l,S,y,g])}l.default=f}),98);
__d("useLiveInstreamPreRollAdsScheduler",["InstreamAdsConfig","InstreamAdsExtraFieldsContext","InstreamAdsIsEmptyContext","InstreamAdsPalmStateContext","InstreamPalmStateManagerContext","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","gkx","react","react-compiler-runtime","requireDeferred","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useRef,m=r("requireDeferred")("CommercialBreakEndFalcoEvent").__setRef("useLiveInstreamPreRollAdsScheduler"),p=200;function _(e){var t=o("react-compiler-runtime").c(29),n=(s||(s=o("VideoPlayerHooks"))).useController(),a=o("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),i=o("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),l=o("InstreamAdsIsEmptyContext").useInstreamAdsIsEmptyContext(),u=d(l),_=s.useLastPlayedTime(),g=s.useIsLive(),h=o("InstreamAdsExtraFieldsContext").useInstreamAdsExtraFieldsContext(),y=d(null),C=d(!1),b=d(!1),v;t[0]===Symbol.for("react.memo_cache_sentinel")?(v=o("InstreamAdsConfig").getIsLivePrerollMaxFetchTimeMS(),t[0]=v):v=t[0];var S=v,R=o("InstreamAdsConfig").DEFAULT_FETCH_TIME_INTERVAL_MS,L=s.useWatchTime(),E=o("VideoPlayerInstreamAdsStateHooks").useUnifiedSchedulerLastFetchTimeState(),k=E[1],I,T;t[1]!==h?(I=function(){y.current=h},T=[h],t[1]=h,t[2]=I,t[3]=T):(I=t[2],T=t[3]),c(I,T);var D,x;t[4]!==l?(D=function(){u.current=l},x=[l],t[4]=l,t[5]=D,t[6]=x):(D=t[5],x=t[6]),c(D,x);var $;t[7]!==(h==null?void 0:h.hasScheduledPrerollOnce)||t[8]!==g||t[9]!==_||t[10]!==a||t[11]!==i||t[12]!==e.subOrigin||t[13]!==k||t[14]!==n||t[15]!==L?($=function(){if(!g||e.subOrigin!=="topic_live"&&e.subOrigin!=="channel_tab")return;var t=function(){a!=="FETCH"&&i.setState("END"),b.current=!0},l=function(){var e={adFormat:null,adTriggerSource:o("InstreamAdsConfig").UNIFIED_SCHEDULER_TIGGER_SOURCE,index:o("InstreamAdsConfig").IS_LIVE_PREROLL_INDEX,insertionPointOrigin:null,instreamPlacement:"PRE_ROLL",timeOffsetInMs:null};i.setCurrentInsertion(e),i.setState("FETCH")};function s(){if((u.current===!0||y.current===null)&&b.current===!1){r("setTimeout")(function(){s()},R);return}if(u.current===!1&&b.current===!1){var e;if(((e=y.current)==null?void 0:e.isNIAd)===!0)i.setState("START_NI_AD"),r("setTimeout")(function(){a!=="FETCH"&&i.setState("END")},p);else{var t;((t=y.current)==null?void 0:t.isNIAd)===!1&&i.setState("START_AD")}b.current=!0;var n=L+(Date.now()-_);k(n)}}var c=function(){r("setTimeout")(function(){u.current===!0&&b.current===!1&&(m.onReady(f),t())},S),s()},d=function(){b.current===!1&&C.current===!1&&(C.current=!0,c())},v=n.subscribe(function(){r("gkx")("24376")&&(h==null?void 0:h.hasScheduledPrerollOnce)!==!0&&(a==="INIT"&&b.current===!1&&(i.setExtraFields({hasScheduledPrerollOnce:!0}),l()),d())});return(function(){v.remove()})},t[7]=h==null?void 0:h.hasScheduledPrerollOnce,t[8]=g,t[9]=_,t[10]=a,t[11]=i,t[12]=e.subOrigin,t[13]=k,t[14]=n,t[15]=L,t[16]=$):$=t[16];var P;t[17]!==h||t[18]!==l||t[19]!==g||t[20]!==_||t[21]!==a||t[22]!==i||t[23]!==e.playerFormat||t[24]!==e.subOrigin||t[25]!==k||t[26]!==n||t[27]!==L?(P=[n,i,L,_,h,g,l,a,R,S,k,e.playerFormat,e.subOrigin],t[17]=h,t[18]=l,t[19]=g,t[20]=_,t[21]=a,t[22]=i,t[23]=e.playerFormat,t[24]=e.subOrigin,t[25]=k,t[26]=n,t[27]=L,t[28]=P):P=t[28],c($,P)}function f(e){e.log(g)}function g(){return{ad_break_index:String(o("InstreamAdsConfig").IS_LIVE_PREROLL_INDEX),ending_reason:"timed_out"}}l.default=_}),98);
__d("useVodInstreamAdsScheduler",["DateConsts","InstreamAdsConfig","InstreamAdsIsEmptyContext","InstreamAdsPalmStateContext","InstreamPalmStateManagerContext","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","clearTimeout","createVideoStateHook","react","react-compiler-runtime","setTimeout","useLocalStorage__UNSAFE"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useRef,m=o("createVideoStateHook").createVideoStateHook(),p=m.stateHook,_=200;function f(){var e=o("react-compiler-runtime").c(15),t=h(-1),n=(s||(s=o("VideoPlayerHooks"))).useController(),a=d(null),i=d(null),l=d(null),u=o("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),m=o("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),p=o("InstreamAdsIsEmptyContext").useInstreamAdsIsEmptyContext(),f=d(p),y=d(null),C=d(null),b=o("VideoPlayerInstreamAdsStateHooks").useInstreamAdsMidRollsValue(),v=r("useLocalStorage__UNSAFE")("instream_ads_vod_gap_rule",null),S=v[0],R=v[1],L,E;e[0]!==p?(L=function(){f.current=p},E=[p],e[0]=p,e[1]=L,e[2]=E):(L=e[1],E=e[2]),c(L,E);var k,I;e[3]!==m||e[4]!==u||e[5]!==R?(k=function(){return m==="START"&&(l.current!==null&&r("clearTimeout")(l.current),l.current=r("setTimeout")(function(){u.setState("START_AD");var e=Date.now();R(e)},o("InstreamAdsConfig").getNonLiveBeginningTransitionTimeMS())),(function(){l.current!==null&&r("clearTimeout")(l.current)})},I=[m,u,R],e[3]=m,e[4]=u,e[5]=R,e[6]=k,e[7]=I):(k=e[6],I=e[7]),c(k,I);var T,D;e[8]!==t||e[9]!==S||e[10]!==b||e[11]!==u||e[12]!==n?(T=function(){var e=function(){a.current!==null&&r("clearTimeout")(a.current),i.current!==null&&r("clearTimeout")(i.current),a.current=null,i.current=null,t.current=-1};function l(e){var t=n.getPlayheadPosition()*o("DateConsts").MS_PER_SEC,i=b[e],s=i.timeOffsetInMs;if(s!=null){var c=s-t-o("InstreamAdsConfig").getPreFetchTimeMs();if(c>o("InstreamAdsConfig").getPreFetchTimeDeltaMs()){a.current!==null&&r("clearTimeout")(a.current);var d=c/2;a.current=r("setTimeout")(function(){l(e)},d);return}f.current!==!1&&u.setState("INIT");var m=Date.now();S!==null&&m-S<=o("InstreamAdsConfig").getNonLiveMidrollGapRuleMS()?u.setState("INIT"):(u.setCurrentInsertion(b[e]),u.setState("FETCH")),a.current!==null&&(r("clearTimeout")(a.current),a.current=null)}}function s(a){var l=n.getPlayheadPosition()*o("DateConsts").MS_PER_SEC,c=b[a].timeOffsetInMs;if(c!=null){var m=c-l;if(f.current===!1&&b[a].instreamPlacement==="MID_ROLL"&&u.setState("STARTING_INDICATOR"),m=Math.min(m,o("InstreamAdsConfig").getRecheckStartMs()),m>o("InstreamAdsConfig").getStartDeltaMs()){i.current!==null&&r("clearTimeout")(i.current),i.current=r("setTimeout")(function(){s(a)},m);return}f.current===!1?(b[a].instreamPlacement==="MID_ROLL"?u.setState("START"):b[a].instreamPlacement==="NON_INTERRUPTIVE"&&(u.setState("START_NI_AD"),e(),r("setTimeout")(function(){u.setState("END"),e(),d()},_)),t.current=a):(u.setState("INIT"),e(),d())}}var c=function(t,n){if(!(t>=b.length)){var e=b[t],u=e.timeOffsetInMs;if(u!=null){var c=u-n;c=c/2;var m=c-o("InstreamAdsConfig").getPreFetchTimeMs();if(c<0){d();return}m<=o("InstreamAdsConfig").getPreFetchTimeDeltaMs()?l(t):(a.current!==null&&r("clearTimeout")(a.current),a.current=r("setTimeout")(function(){l(t)},m)),c=c-o("InstreamAdsConfig").getStartingIndicatorMs(),c<=o("InstreamAdsConfig").getStartDeltaMs()?s(t):(i.current!==null&&r("clearTimeout")(i.current),i.current=r("setTimeout")(function(){s(t)},c))}}};function d(){var e=n.getPlayheadPosition()*o("DateConsts").MS_PER_SEC,r=g(e,b);r===t.current&&(r=r+1),c(r,e)}var m=(b==null?void 0:b.length)>0?n.subscribe(function(){var t=n.getCurrentState(),r=t.paused,o=t.playing;o&&o!==y.current?d():r&&r!==C.current&&e(),y.current=o,C.current=r}):null;return(function(){m&&m.remove(),e()})},D=[n,t,b,u,S],e[8]=t,e[9]=S,e[10]=b,e[11]=u,e[12]=n,e[13]=T,e[14]=D):(T=e[13],D=e[14]),c(T,D)}function g(e,t){for(var n=t.length,r=n,a=n-1;a>=0;a--){var i=t[a].timeOffsetInMs;if(i!==null&&Number(i)>e+o("InstreamAdsConfig").getStartDeltaMs())r=a;else break}return r}function h(e){var t=o("react-compiler-runtime").c(2),n;t[0]!==e?(n={current:e},t[0]=e,t[1]=n):n=t[1];var r=p(n),a=r[0];return a}l.default=f}),98);
__d("useVodInstreamPostRollAdsScheduler",["DateConsts","InstreamAdsConfig","InstreamAdsIsEmptyContext","InstreamAdsPalmStateContext","InstreamPalmStateManagerContext","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useRef;function m(){var e=o("react-compiler-runtime").c(16),t=d(!1),n=o("InstreamAdsIsEmptyContext").useInstreamAdsIsEmptyContext(),r=d(n),a=(s||(s=o("VideoPlayerHooks"))).useDuration(),i=o("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),l=o("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),u=o("VideoPlayerInstreamAdsStateHooks").useInstreamAdsPostRollValue(),m=d(!1),p=s.useController(),_=o("VideoPlayerInstreamAdsStateHooks").useInstreamAdsPostRollEndedOrSkippedStateSetter(),f,g;e[0]!==n?(f=function(){r.current=n},g=[n],e[0]=n,e[1]=f,e[2]=g):(f=e[1],g=e[2]),c(f,g);var h;e[3]!==a||e[4]!==l||e[5]!==u||e[6]!==_||e[7]!==p?(h=function(){var e=function(){var e=p.getPlayheadPosition()*o("DateConsts").MS_PER_SEC,t=a*o("DateConsts").MS_PER_SEC-e;return t<=o("InstreamAdsConfig").getPostRollPreFetchTimeMs()&&t>=o("InstreamAdsConfig").getPostRollPreFetchEndTimeMs()},n=function(){l.setCurrentInsertion(u),l.setState("FETCH_POST_ROLL"),_(!1),t.current=!0},i=function(){r.current===!1?l.setState("START_AD"):(l.setState("INIT"),_(!0)),m.current=!0},s=u!==null?p.subscribe(function(){var r=p.getCurrentState(),o=r.ended,a=r.playing;a&&t.current===!1&&e()&&n(),o&&t.current===!0&&m.current===!1&&i()}):null;return(function(){s&&s.remove()})},e[3]=a,e[4]=l,e[5]=u,e[6]=_,e[7]=p,e[8]=h):h=e[8];var y;e[9]!==a||e[10]!==i||e[11]!==l||e[12]!==u||e[13]!==_||e[14]!==p?(y=[a,i,l,u,_,p],e[9]=a,e[10]=i,e[11]=l,e[12]=u,e[13]=_,e[14]=p,e[15]=y):y=e[15],c(h,y)}l.default=m}),98);
__d("useVodInstreamPreRollAdsScheduler",["InstreamAdsConfig","InstreamAdsIsEmptyContext","InstreamPalmStateManagerContext","VideoPlayerHooks","react","react-compiler-runtime","setTimeout","useVideoPlayerHasStartedPlayingAtLeastOnce"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useRef;function m(e){var t=o("react-compiler-runtime").c(21),n=(s||(s=o("VideoPlayerHooks"))).useController(),a=d(null),i=o("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),l=o("InstreamAdsIsEmptyContext").useInstreamAdsIsEmptyContext(),u=d(l),m=d(!1),p=d(!1),_=d(0),f=r("useVideoPlayerHasStartedPlayingAtLeastOnce")(),g;t[0]!==e.isPMV?(g=e.isPMV?o("InstreamAdsConfig").getPMVInterruptionsPreRollFetchTimeMs():o("InstreamAdsConfig").getNonPmvMaxFetchTimeMS(),t[0]=e.isPMV,t[1]=g):g=t[1];var h=g,y=e.isPMV?1e3:o("InstreamAdsConfig").DEFAULT_FETCH_TIME_INTERVAL_MS,C,b;t[2]!==l?(C=function(){u.current=l},b=[l],t[2]=l,t[3]=C,t[4]=b):(C=t[3],b=t[4]),c(C,b);var v;t[5]!==y||t[6]!==f||t[7]!==h||t[8]!==i||t[9]!==e.preRoll||t[10]!==n?(v=function(){var t=function(){i.setState("INIT"),a.current=null;var e=n.getCurrentState(),t=e.paused;t&&n.play("commercial_break"),m.current=!0};function o(){if(u.current===!0&&m.current===!1){a.current=r("setTimeout")(function(){_.current=_.current+y,o()},y);return}u.current===!1&&m.current===!1&&(i.setState("START_AD"),m.current=!0)}var l=function(){r("setTimeout")(function(){u.current===!0&&t()},h),i.setState("FETCH_PRE_ROLL"),i.setCurrentInsertion(e.preRoll),o()},s=n.subscribe(function(){var t=n.getCurrentState(),r=t.paused,o=t.playing;o&&m.current===!1&&e.preRoll!=null&&!f&&n.pause("commercial_break"),r&&m.current===!1&&e.preRoll!=null&&p.current===!1&&!f&&(l(),p.current=!0)});return(function(){s.remove()})},t[5]=y,t[6]=f,t[7]=h,t[8]=i,t[9]=e.preRoll,t[10]=n,t[11]=v):v=t[11];var S;t[12]!==y||t[13]!==f||t[14]!==h||t[15]!==i||t[16]!==e.isPMV||t[17]!==e.preRoll||t[18]!==e.videoFBID||t[19]!==n?(S=[n,e.preRoll,i,e.videoFBID,h,f,y,e.isPMV],t[12]=y,t[13]=f,t[14]=h,t[15]=i,t[16]=e.isPMV,t[17]=e.preRoll,t[18]=e.videoFBID,t[19]=n,t[20]=S):S=t[20],c(v,S)}l.default=m}),98);
__d("InstreamAdsPalmPlayer.react",["CometErrorBoundary.react","InstreamAdsCurrentInsertionContext","InstreamAdsDisplay.react","InstreamAdsExtraFieldsContext","InstreamAdsFeedContextCardSurface.react","InstreamAdsHideAdBehaviorContext","InstreamAdsIsEmptyContext","InstreamAdsPalmStateContext","InstreamAdsStartIndicator.react","InstreamPalmStateManagerContext","VideoPlayerDebugInstreamAdsAPI","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","cr:1341999","gkx","react","react-compiler-runtime","requireDeferred","useInstreamAdsFetcher","useInstreamAdsOrganicVideoControl","useLiveInstreamAdsScheduler","useLiveInstreamPreRollAdsScheduler","useVodInstreamAdsScheduler","useVodInstreamPostRollAdsScheduler","useVodInstreamPreRollAdsScheduler"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.useEffect,m=c.useRef,p=r("requireDeferred")("CommercialBreakStartingIndicatorFalcoEvent").__setRef("InstreamAdsPalmPlayer.react"),_=40,f={location:"bottom",size:_};function g(e){var t=e.midRolls,a=e.playerFormat,i=e.preRoll,l=e.subOrigin,c=e.videoFBID,m=o("VideoPlayerInstreamAdsStateHooks").useInstreamAdsFullScreenContextCardStateValue(),p=(s||(s=o("VideoPlayerHooks"))).useVideoPlayerCaptionsReservationActions(),_=p.release,g=p.reserve,C=m!==null;return d(function(){(a==="tahoe"||a==="full_screen")&&m!==null?g(f):_(f)},[C,a,g,_]),r("gkx")("16208")&&(a==="full_screen"||a==="in_content_vod_chaining")?null:u.jsx(r("CometErrorBoundary.react"),{children:u.jsxs(h,{children:[n("cr:1341999")&&u.jsx(n("cr:1341999"),{}),a==="tahoe"||a==="full_screen"?u.jsx("div",{className:"x1qqjqyx xzql1tr x10l6tqk xbwjon8",children:m}):null,r("InstreamAdsFeedContextCardSurface.react")?u.jsx(r("InstreamAdsFeedContextCardSurface.react"),{}):null,u.jsx(y,{midRolls:t,playerFormat:a,preRoll:i,subOrigin:l,videoFBID:c})]})})}g.displayName=g.name+" [from "+i.id+"]";function h(e){var t,n=e.children,r=(t=o("VideoPlayerInstreamAdsStateHooks")).useInstreamAdsState(),a=r[0],i=r[1],l=t.useInstreamAdsIsEmptyState(),s=l[0],c=l[1],_=t.useInstreamAdsCurrentInsertionState(),f=_[0],g=_[1],h=t.useInstreamAdsExtraFieldsState(),y=h[0],C=h[1],b=t.useInstreamAdsHideAdBehaviorState(),v=b[0],S=b[1],R=m({setCurrentInsertion:g,setExtraFields:C,setHideAdBehavior:S,setIsEmpty:c,setState:i}),L=y==null?void 0:y.adClientToken,E=(y==null?void 0:y.isAdPod)===!0?y==null?void 0:y.adClientTokenSecond:null;return d(function(){function e(){g(null),c(!0)}(a==="INIT"||a==="END"||a==="START_NI_AD")&&e()},[g,c,a]),d(function(){a==="STARTING_INDICATOR"&&(p.onReady(function(e){e.log(function(){return{commercial_break_ad_client_token:L}})}),E!==null&&p.onReady(function(e){e.log(function(){return{commercial_break_ad_client_token:E}})}))},[a,L,E]),u.jsx(o("InstreamAdsExtraFieldsContext").InstreamAdsExtraFieldsContext.Provider,{value:y,children:u.jsx(o("InstreamAdsPalmStateContext").InstreamAdsPalmStateContext.Provider,{value:a,children:u.jsx(o("InstreamAdsIsEmptyContext").InstreamAdsIsEmptyContext.Provider,{value:s,children:u.jsx(o("InstreamPalmStateManagerContext").InstreamPalmStateManagerContext.Provider,{value:R.current,children:u.jsx(o("InstreamAdsCurrentInsertionContext").InstreamAdsCurrentInsertionContext.Provider,{value:f,children:u.jsx(o("InstreamAdsHideAdBehaviorContext").InstreamAdsHideAdBehaviorContext.Provider,{value:v,children:n})})})})})})}h.displayName=h.name+" [from "+i.id+"]";function y(e){var t=o("react-compiler-runtime").c(29),n=e.midRolls,a=e.playerFormat,i=e.preRoll,l=e.subOrigin,c=e.videoFBID,d=(s||(s=o("VideoPlayerHooks"))).useIsPremiumMusicVideo(),m;t[0]!==d||t[1]!==i||t[2]!==c?(m={isPMV:d,preRoll:i,videoFBID:c},t[0]=d,t[1]=i,t[2]=c,t[3]=m):m=t[3],r("useVodInstreamPreRollAdsScheduler")(m),r("useVodInstreamPostRollAdsScheduler")(),r("useVodInstreamAdsScheduler")();var p;t[4]!==a||t[5]!==l?(p={playerFormat:a,subOrigin:l},t[4]=a,t[5]=l,t[6]=p):p=t[6],r("useLiveInstreamPreRollAdsScheduler")(p),r("useLiveInstreamAdsScheduler")();var _=r("useInstreamAdsOrganicVideoControl")(),f;t[7]!==a||t[8]!==l||t[9]!==c?(f={playerFormat:a,subOrigin:l,videoFBID:c},t[7]=a,t[8]=l,t[9]=c,t[10]=f):f=t[10];var g=r("useInstreamAdsFetcher")(f),h=g.NIAdStory,y=g.adPorableVideoID,C=g.instreamAdsStory,b=g.palmState,v=g.setAdPortableVideoID,S=g.videoAdStory,R;t[11]!==_||t[12]!==n?(R={midRolls:n,organicVideoFreezeTokenRef:_},t[11]=_,t[12]=n,t[13]=R):R=t[13],r("VideoPlayerDebugInstreamAdsAPI").useVideoPlayerDebugAPIDefinition(R);var L;t[14]!==b?(L=b==="STARTING_INDICATOR"&&u.jsx(r("InstreamAdsStartIndicator.react"),{}),t[14]=b,t[15]=L):L=t[15];var E;t[16]!==h||t[17]!==y||t[18]!==_||t[19]!==C||t[20]!==b||t[21]!==a||t[22]!==v||t[23]!==l||t[24]!==S?(E=u.jsx(r("InstreamAdsDisplay.react"),{NIAdStory:h,adPorableVideoID:y,freezeTokenRef:_,instreamAdsStory:C,palmState:b,playerFormat:a,setAdPortableVideoID:v,subOrigin:l,videoAdStory:S}),t[16]=h,t[17]=y,t[18]=_,t[19]=C,t[20]=b,t[21]=a,t[22]=v,t[23]=l,t[24]=S,t[25]=E):E=t[25];var k;return t[26]!==L||t[27]!==E?(k=u.jsxs(u.Fragment,{children:[L,E]}),t[26]=L,t[27]=E,t[28]=k):k=t[28],k}l.default=g}),98);
__d("InstreamVideoAdBreaksPlayerImpl_adBreaks.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"instream_placement",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"InstreamVideoAdBreaksPlayerImpl_adBreaks",selections:[{alias:null,args:null,concreteType:"InstreamVideoAdBreak",kind:"LinkedField",name:"mid_rolls",plural:!0,selections:[e,t,{alias:null,args:null,kind:"ScalarField",name:"time_offset_in_ms",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"InstreamVideoAdBreak",kind:"LinkedField",name:"pre_roll",plural:!1,selections:[e,t],storageKey:null}],type:"InstreamVideoAdBreaks",abstractKey:null}})();a.exports=e}),null);
__d("useInstreamAdsHaloFetcherQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9825028987610490"}),null);
__d("useInstreamAdsHaloFetcherQuery.graphql",["useInstreamAdsHaloFetcherQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"hostVideoId"},t={defaultValue:null,kind:"LocalArgument",name:"instreamVideoAdType"},r={defaultValue:null,kind:"LocalArgument",name:"isSponsorHostVideo"},o={defaultValue:null,kind:"LocalArgument",name:"playerFormat"},a={defaultValue:null,kind:"LocalArgument",name:"playerSubOrigin"},i={defaultValue:null,kind:"LocalArgument",name:"storyIdentifier"},l={defaultValue:null,kind:"LocalArgument",name:"tracePolicy"},s={alias:null,args:null,kind:"ScalarField",name:"ad_format",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"instream_placement",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"insertion_point_origin",storageKey:null},m=[{alias:null,args:[{fields:[{kind:"Variable",name:"comet_video_player_trace_policy",variableName:"tracePolicy"},{kind:"Variable",name:"host_video_id",variableName:"hostVideoId"},{kind:"Variable",name:"instream_video_ad_type",variableName:"instreamVideoAdType"},{kind:"Variable",name:"is_sponsored_host_video",variableName:"isSponsorHostVideo"},{kind:"Variable",name:"player_format",variableName:"playerFormat"},{kind:"Variable",name:"player_sub_origin",variableName:"playerSubOrigin"},{kind:"Variable",name:"story_identifier",variableName:"storyIdentifier"}],kind:"ObjectValue",name:"params"}],concreteType:"Scrubber",kind:"LinkedField",name:"scrubber",plural:!1,selections:[{alias:null,args:null,concreteType:"InstreamVideoAdBreak",kind:"LinkedField",name:"instream_video_ad_breaks",plural:!0,selections:[s,u,{alias:null,args:null,kind:"ScalarField",name:"time_offset_in_ms",storageKey:null},c,d],storageKey:null},{alias:null,args:null,concreteType:"InstreamVideoAdBreak",kind:"LinkedField",name:"post_roll_ad_break",plural:!1,selections:[s,u,c,d],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,t,r,o,a,i,l],kind:"Fragment",metadata:null,name:"useInstreamAdsHaloFetcherQuery",selections:m,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,a,o,l,t,i,r],kind:"Operation",name:"useInstreamAdsHaloFetcherQuery",selections:m},params:{id:n("useInstreamAdsHaloFetcherQuery_facebookRelayOperation"),metadata:{},name:"useInstreamAdsHaloFetcherQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useInstreamAdsHaloFetcher",["CometFeedStoryContext","CometRelay","InstreamAdsConfig","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","VideoPlayerTracePolicyContext","createVideoStateHook","react","react-compiler-runtime","useInstreamAdsHaloFetcherQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=c.useEffect,m=c.useRef,p=c.useState,_=o("createVideoStateHook").createVideoStateHook(),f=_.stateHook,g=e!==void 0?e:e=n("useInstreamAdsHaloFetcherQuery.graphql");function h(e,t,n,r,a){var i,l=o("react-compiler-runtime").c(55),s=(u||(u=o("VideoPlayerHooks"))).useAdClientToken(),c=o("CometRelay").useRelayEnvironment(),_=o("VideoPlayerTracePolicyContext").useVideoPlayerTracePolicy(),h=_.initialTracePolicy,C=_.routeTracePolicy,b=h!=null?h:C,v=p(!1),S=v[0],R=v[1],L=p(),E=L[0],k=L[1],I=p(!1),T=I[0],D=I[1],x=p(),$=x[0],P=x[1],N=p(!e),M=N[0],w=N[1],A=u.usePaused(),F=m(c),O=u.useCurrentTimeThrottled(500),B=m(n),W=m(r),q=m(a),U=o("VideoPlayerInstreamAdsStateHooks").useInstreamAdsMidRollsState(),V=U[0],H=U[1],G=o("VideoPlayerInstreamAdsStateHooks").useInstreamAdsPostRollState(),z=G[0],j=G[1],K=f(),Q=K[0],X=K[1],Y=(i=o("CometFeedStoryContext").useCometFeedStoryContext())==null?void 0:i.storyID,J=u.useBroadcastStatus(),Z=o("InstreamAdsConfig").getHaloStartFetchTimeMS(),ee,te;l[0]!==c?(ee=function(){F.current=c},te=[c],l[0]=c,l[1]=ee,l[2]=te):(ee=l[1],te=l[2]),d(ee,te);var ne,re;l[3]!==O||l[4]!==t?(ne=function(){O*1e3>(t!=null?t:0)&&D(!0)},re=[O,t],l[3]=O,l[4]=t,l[5]=ne,l[6]=re):(ne=l[5],re=l[6]),d(ne,re);var oe,ae;l[7]!==n?(oe=function(){B.current=n},ae=[n],l[7]=n,l[8]=oe,l[9]=ae):(oe=l[8],ae=l[9]),d(oe,ae);var ie,le;l[10]!==r?(ie=function(){W.current=r},le=[r],l[10]=r,l[11]=ie,l[12]=le):(ie=l[11],le=l[12]),d(ie,le);var se,ue;l[13]!==a?(se=function(){q.current=a},ue=[a],l[13]=a,l[14]=se,l[15]=ue):(se=l[14],ue=l[15]),d(se,ue);var ce;l[16]!==X||l[17]!==Y?(ce=function(){Y!==null&&X(Y)},l[16]=X,l[17]=Y,l[18]=ce):ce=l[18];var de;l[19]!==X||l[20]!==Q||l[21]!==Y?(de=[Q,Y,X],l[19]=X,l[20]=Q,l[21]=Y,l[22]=de):de=l[22],d(ce,de);var me,pe;l[23]!==O?(me=function(){O*1e3<=Z&&w(!0)},pe=[O,Z],l[23]=O,l[24]=me,l[25]=pe):(me=l[24],pe=l[25]),d(me,pe);var _e;l[26]!==s||l[27]!==J||l[28]!==S||l[29]!==T||l[30]!==M||l[31]!==V||l[32]!==A||l[33]!==z||l[34]!==Q||l[35]!==b?(_e=function(){if(!(!M||V.length>0||S||A||z||!T)){var e=o("CometRelay").fetchQuery(F.current,g,{hostVideoId:q.current,instreamVideoAdType:J==="VOD_READY"?"VOD":"NONLIVE",isSponsorHostVideo:s!=null,playerFormat:B.current,playerSubOrigin:W.current,storyIdentifier:Q,tracePolicy:b}),t=e.subscribe({error:function(t){R(!0)},next:function(t){var e,n,r=t==null||(e=t.scrubber)==null?void 0:e.instream_video_ad_breaks,o=t==null||(n=t.scrubber)==null?void 0:n.post_roll_ad_break;r&&r.length>0&&k(r.map(y)),o&&P({adFormat:o.ad_format,index:o.index,insertionPointOrigin:o.insertion_point_origin,instreamPlacement:o.instream_placement,timeOffsetInMs:null}),R(!0)}});return(function(){t.unsubscribe()})}},l[26]=s,l[27]=J,l[28]=S,l[29]=T,l[30]=M,l[31]=V,l[32]=A,l[33]=z,l[34]=Q,l[35]=b,l[36]=_e):_e=l[36];var fe;l[37]!==s||l[38]!==J||l[39]!==S||l[40]!==T||l[41]!==M||l[42]!==V||l[43]!==A||l[44]!==z||l[45]!==H||l[46]!==j||l[47]!==Q||l[48]!==b?(fe=[s,V,M,H,j,Q,S,A,z,b,J,T],l[37]=s,l[38]=J,l[39]=S,l[40]=T,l[41]=M,l[42]=V,l[43]=A,l[44]=z,l[45]=H,l[46]=j,l[47]=Q,l[48]=b,l[49]=fe):fe=l[49],d(_e,fe);var ge;l[50]!==E?(ge=E||[],l[50]=E,l[51]=ge):ge=l[51];var he;return l[52]!==$||l[53]!==ge?(he={midRolls:ge,postRoll:$,preRoll:null},l[52]=$,l[53]=ge,l[54]=he):he=l[54],he}function y(e){return{adFormat:e.ad_format,index:e.index,insertionPointOrigin:e.insertion_point_origin,instreamPlacement:e.instream_placement,timeOffsetInMs:e.time_offset_in_ms}}l.default=h}),98);
__d("InstreamVideoAdBreaksPlayerImpl.react",["CometRelay","InstreamAdsPalmPlayer.react","InstreamVideoAdBreaksPlayerImpl_adBreaks.graphql","VideoPlayerInstreamAdsStateHooks","react","react-compiler-runtime","useInstreamAdsHaloFetcher"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useEffect,m=c.useMemo,p=["entry_point","inline_end_screen"],_=102;function f(e){var t=o("react-compiler-runtime").c(21),n=e.instreamExtraConfig,a=e.instreamVideoAdBreaksComet,i=e.playerFormat,l=e.subOrigin,s=e.videoFBID,c=g(a,i,l),m=c.preRoll!==null,p=r("useInstreamAdsHaloFetcher")(m,n==null?void 0:n.instreamHaloDelayTimeSeconds,i,l,s),_=o("VideoPlayerInstreamAdsStateHooks").useInstreamAdsMidRollsState(),f=_[0],h=_[1],y=o("VideoPlayerInstreamAdsStateHooks").useInstreamAdsPostRollState(),C=y[0],b=y[1],v;t[0]!==p||t[1]!==f.length||t[2]!==h?(v=function(){var e;f.length<=0&&p!=null&&p.midRolls&&((e=p.midRolls)==null?void 0:e.length)>0&&h(p.midRolls)},t[0]=p,t[1]=f.length,t[2]=h,t[3]=v):v=t[3];var S;t[4]!==p||t[5]!==f||t[6]!==h?(S=[p,f,h],t[4]=p,t[5]=f,t[6]=h,t[7]=S):S=t[7],d(v,S);var R,L;t[8]!==p||t[9]!==C||t[10]!==b?(R=function(){C===null&&p!=null&&p.postRoll&&b(p.postRoll)},L=[p,C,b],t[8]=p,t[9]=C,t[10]=b,t[11]=R,t[12]=L):(R=t[11],L=t[12]),d(R,L);var E;t[13]!==(p==null?void 0:p.midRolls)?(E=(p==null?void 0:p.midRolls)||[],t[13]=p==null?void 0:p.midRolls,t[14]=E):E=t[14];var k;return t[15]!==c.preRoll||t[16]!==i||t[17]!==l||t[18]!==E||t[19]!==s?(k=u.jsx(r("InstreamAdsPalmPlayer.react"),{midRolls:E,playerFormat:i,preRoll:c.preRoll,subOrigin:l,videoFBID:s}),t[15]=c.preRoll,t[16]=i,t[17]=l,t[18]=E,t[19]=s,t[20]=k):k=t[20],k}function g(t,r,a){var i=o("react-compiler-runtime").c(9),l=o("CometRelay").useFragment(e!==void 0?e:e=n("InstreamVideoAdBreaksPlayerImpl_adBreaks.graphql"),t),s;i[0]!==l.mid_rolls?(s=l.mid_rolls.map(C).filter(y).sort(h),i[0]=l.mid_rolls,i[1]=s):s=i[1];var u=s,c=null;if(r==="tahoe"&&l.pre_roll!=null){var d;i[2]!==l.pre_roll.index||i[3]!==l.pre_roll.instream_placement?(d={adFormat:null,index:l.pre_roll.index,instreamPlacement:l.pre_roll.instream_placement,timeOffsetInMs:null},i[2]=l.pre_roll.index,i[3]=l.pre_roll.instream_placement,i[4]=d):d=i[4],c=d}else if(p.includes(a)){var m;i[5]===Symbol.for("react.memo_cache_sentinel")?(m={adFormat:null,index:_,insertionPointOrigin:"VIDEO",instreamPlacement:"PRE_ROLL",timeOffsetInMs:null},i[5]=m):m=i[5],c=m}var f;return i[6]!==u||i[7]!==c?(f={midRolls:u,postRoll:null,preRoll:c},i[6]=u,i[7]=c,i[8]=f):f=i[8],f}function h(e,t){return Number(e.timeOffsetInMs)-Number(t.timeOffsetInMs)}function y(e){return e.instreamPlacement==="MID_ROLL"}function C(e){return{adFormat:null,index:e.index,insertionPointOrigin:"VIDEO",instreamPlacement:e.instream_placement,timeOffsetInMs:e.time_offset_in_ms}}l.default=f}),98);/*FB_PKG_DELIM*/
__d("E2EEBackupSecretRestoreModule",["E2EEBackupCommon","QuickPerformanceLogger","Random","VestaClient","VestaClientError","VestaClientV2","gkx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("qpl")._(235874858,"168");function u(){return o("Random").uint32()}async function c(t,n,a){var i=u();(e||(e=r("QuickPerformanceLogger"))).markerStart(s,i),e.markerAnnotate(s,{string:{product_use_case:n.productUseCase}},{instanceKey:i});try{var l=r("gkx")("13570");(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(s,{bool:{is_wasm_vesta_client_v2:l}},{instanceKey:i});var c=await t.initLogin({clientId:n.clientId,productUseCase:n.productUseCase},a),d=c.islandRsaPub,m=c.islandRsaPubSig,p=c.islandEd25519Pub,_=c.islandEd25519PubSig,f=c.isRegistered;if(e.markerPoint(s,"init_login_network_end",{instanceKey:i}),!f)throw(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(s,{string:{failure_reason:"NOT_REGISTERED"}},{instanceKey:i}),e.markerEnd(s,3,i),new(o("E2EEBackupCommon")).BackupError(o("E2EEBackupCommon").BackupErrorType.NOT_REGISTERED);var g,h;if(l){var y=await Promise.all([o("VestaClientV2").validateHsmKey(d,m),o("VestaClientV2").validateHsmKey(p,_)]);if(g=y[0],h=y[1],!g.success)throw g.error;if(!h.success)throw h.error;g=g.value,h=h.value}else{var C=await Promise.all([o("VestaClient").validateHsmKey(d,m),o("VestaClient").validateHsmKey(p,_)]);g=C[0],h=C[1]}if(!g)throw(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(s,{string:{failure_reason:"ISLAND_PUB_RSA_KEY_INVALID"}},{instanceKey:i}),e.markerEnd(s,3,i),new(o("E2EEBackupCommon")).BackupError(o("E2EEBackupCommon").BackupErrorType.ISLAND_PUB_RSA_KEY_INVALID);if(!h)throw(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(s,{string:{failure_reason:"ISLAND_PUB_ED25519_KEY_INVALID"}},{instanceKey:i}),e.markerEnd(s,3,i),new(o("E2EEBackupCommon")).BackupError(o("E2EEBackupCommon").BackupErrorType.ISLAND_PUB_ED25519_KEY_INVALID);e.markerPoint(s,"validate_hsm_keys_client_end",{instanceKey:i});var b=n.vestaAccountPin;if(b==null)throw new(o("E2EEBackupCommon")).BackupError(o("E2EEBackupCommon").BackupErrorType.MISSING_PIN_INPUT);var v=new TextEncoder,S;if(l){if(S=await o("VestaClientV2").beginLogin(v.encode(b)),!S.success)throw S.error;S=S.value}else S=await o("VestaClient").beginLogin(v.encode(b));var R=S,L=R.clientState,E=R.l1Message;(e||(e=r("QuickPerformanceLogger"))).markerPoint(s,"begin_login_client_end",{instanceKey:i});var k=await t.beginLogin({clientId:n.clientId,productUseCase:n.productUseCase,opaqueL1:E},a),I=k.opaqueL2,T=k.opaqueL2Sig;e.markerPoint(s,"begin_login_network_end",{instanceKey:i});var D;if(l){if(D=await o("VestaClientV2").finishLogin(I,T,p,L),!D.success)throw D.error;D=D.value}else D=await o("VestaClient").finishLogin(I,T,p,L);var x=D,$=x.exportKey,P=x.l3Message,N=x.sessionKey;e.markerPoint(s,"finish_login_client_end",{instanceKey:i});var M=await t.finishLogin({clientId:n.clientId,productUseCase:n.productUseCase,opaqueL3:P},a),w=M.loginSuccess,A=M.loginPayload;if(e.markerPoint(s,"finish_login_network_end",{instanceKey:i}),!w)throw(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(s,{string:{failure_reason:"VESTA_SERVER_ERROR"}},{instanceKey:i}),e.markerEnd(s,3,i),new(o("E2EEBackupCommon")).BackupError(o("E2EEBackupCommon").BackupErrorType.VESTA_SERVER_ERROR);if(A!=null){var F;if(l){if(F=await o("VestaClientV2").unpackLoginPayload(A,N,$),!F.success)throw F.error;F=F.value}else F=await o("VestaClient").unpackLoginPayload(A,N,$);var O=F,B=O.userSecret;return(e||(e=r("QuickPerformanceLogger"))).markerPoint(s,"unpack_login_payload",{instanceKey:i}),e.markerEnd(s,2,i),B}throw e.markerAnnotate(s,{string:{failure_reason:"VESTA_SERVER_ERROR"}},{instanceKey:i}),e.markerEnd(s,3,i),new(o("E2EEBackupCommon")).BackupError(o("E2EEBackupCommon").BackupErrorType.VESTA_SERVER_ERROR)}catch(t){throw t instanceof o("E2EEBackupCommon").BackupError?t:t instanceof r("VestaClientError")?((e||(e=r("QuickPerformanceLogger"))).markerAnnotate(s,{string:{failure_reason:"VestaClientException: "+t.name}},{instanceKey:i}),e.markerEnd(s,3,i),t.name==="InvalidUserPassword"?new(o("E2EEBackupCommon")).BackupError(o("E2EEBackupCommon").BackupErrorType.INVALID_PASSWORD,t):new(o("E2EEBackupCommon")).BackupError(o("E2EEBackupCommon").BackupErrorType.VESTA_CLIENT_ERROR,t)):((e||(e=r("QuickPerformanceLogger"))).markerAnnotate(s,{string:{failure_reason:t.message}},{instanceKey:i}),e.markerEnd(s,3,i),new(o("E2EEBackupCommon")).BackupError(o("E2EEBackupCommon").BackupErrorType.NETWORK_PROVIDER_ERROR,t))}}l.restoreBackupSecret=c}),98);
__d("MAWEncryptedBackupsClearRecoveryCode",["Promise","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return(e||(e=n("Promise"))).all([o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.secure_recovery_code_data)),o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.secure_encrypted_backups_recovery_code_status))]).then(function(r){var o=r[0],a=r[1];if(o!=null||a!=null)return t.runInTransaction(function(t){return(e||(e=n("Promise"))).all([(o==null?void 0:o.taskId)!=null?t.secure_recovery_code_data.delete(o.taskId):(e||(e=n("Promise"))).resolve(),(a==null?void 0:a.pk)!=null?t.secure_encrypted_backups_recovery_code_status.delete(a.pk):(e||(e=n("Promise"))).resolve()])},"readwrite",void 0,void 0,i.id+":27")})}l.encryptedBackupsClearRecoveryCode=s}),98);
__d("MWChatEBPinCodeVerifyIndicator.react",["fbt","MWXRow.react","MWXRowItem.react","MWXSpinner.react","MWXText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(5),n=e.isMessenger,a=n?"disabled_DEPRECATED":"blue",i;t[0]!==a?(i=u.jsx(r("MWXRowItem.react"),{verticalAlign:"center",children:u.jsx(r("MWXSpinner.react"),{color:a,size:12})}),t[0]=a,t[1]=i):i=t[1];var l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l=u.jsx(r("MWXRowItem.react"),{verticalAlign:"center",children:u.jsx(r("MWXText.react"),{color:"secondary",testid:void 0,type:"meta3",children:s._(/*BTDS*/"Verifying your PIN")})}),t[2]=l):l=t[2];var c;return t[3]!==i?(c=u.jsxs(r("MWXRow.react"),{align:"center",paddingTop:8,spacing:8,children:[i,l]}),t[3]=i,t[4]=c):c=t[4],c}l.default=c}),226);
__d("MWChatEncryptedBackupsForgotPINDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24783313654667152"}),null);
__d("MWChatEncryptedBackupsForgotPINDialogQuery$Parameters",["MWChatEncryptedBackupsForgotPINDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWChatEncryptedBackupsForgotPINDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatEncryptedBackupsForgotPINDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWChatEncryptedBackupsForgotPINDialog.entrypoint",["JSResourceForInteraction","MWChatEncryptedBackupsForgotPINDialogQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{queryReference:{parameters:r("MWChatEncryptedBackupsForgotPINDialogQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("MWChatEncryptedBackupsForgotPINDialog.react").__setRef("MWChatEncryptedBackupsForgotPINDialog.entrypoint")};l.default=e}),98);
__d("MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWChatEncryptedBackupsForgotPinStepDialogPage.react").__setRef("MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint")};l.default=e}),98);
__d("UserMobileEBState",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["UNKNOWN","NO_MOBILE","UNTRUSTED_MOBILE","TRUSTED_MOBILE"]);i.UserMobileEBState=e}),66);
__d("useWAInfraMobileDeviceList",["cr:8431","react","react-compiler-runtime","useWAInfraDeviceList"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(){var e=o("react-compiler-runtime").c(3),t=r("useWAInfraDeviceList")(),a;e[0]!==t?(a=t.filter(c),e[0]=t,e[1]=a):a=e[1];var i=a;if(n("cr:8431")){var l;return e[2]===Symbol.for("react.memo_cache_sentinel")?(l=[n("cr:8431")],e[2]=l):l=e[2],l}return i}function c(e){var t;return e.platform==="Messenger"&&!["Mac OS X","Windows"].includes(e.manufacturer)&&!["Chrome","Safari","Firefox","Edge","System Product Name"].includes(e.model)&&!(e.manufacturer==="Apple"&&(t=e.model)!=null&&t.includes("Mac"))}l.default=u}),98);
__d("useGetUserMobileEBState",["MAWOneTimeCodeGating","UserMobileEBState","cr:12343","gkx","react-compiler-runtime","useWAInfraMobileDeviceList"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(7),t=r("useWAInfraMobileDeviceList")(),a=n("cr:12343")(),i=a.hasOtcEligibleDevices;if(i){var l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l={state:o("UserMobileEBState").UserMobileEBState.TRUSTED_MOBILE},e[0]=l):l=e[0],l}var u=o("MAWOneTimeCodeGating").isOneTimeCodeEnabled()&&i,c=t.length===0&&r("gkx")("14456");if(c){var d;return e[1]===Symbol.for("react.memo_cache_sentinel")?(d={state:o("UserMobileEBState").UserMobileEBState.NO_MOBILE},e[1]=d):d=e[1],d}var m=t.length>0&&!u,p=m&&r("gkx")("14456");if(p){var _;e[2]!==t?(_=t.map(s),e[2]=t,e[3]=_):_=e[3];var f;return e[4]!==_?(f={deviceInfoList:_,state:o("UserMobileEBState").UserMobileEBState.UNTRUSTED_MOBILE},e[4]=_,e[5]=f):f=e[5],f}var g;return e[6]===Symbol.for("react.memo_cache_sentinel")?(g={state:o("UserMobileEBState").UserMobileEBState.UNKNOWN},e[6]=g):g=e[6],g}function s(e){return{lastSeen:e.lastSeen,model:e.model,platform:e.platform}}l.default=e}),98);
__d("MWEncryptedBackupsForgotPinStep",["fbt","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsForgotPINDialog.entrypoint","MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEBVirtualDevicesContext.react","MWJewelPopoverDialogContext.react","QPLUserFlow","UserMobileEBState","cr:12326","cr:12327","emptyFunction","gkx","react","react-compiler-runtime","useGetUserMobileEBState","useMWXEntryPointDialog","usePushPage"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["onHighIntent"],u=["onHighIntent"],c=["onHighIntent"],d,m=d||(d=o("react")),p=d.useContext,_=s._(/*BTDS*/"Forgot PIN?"),f=s._(/*BTDS*/"Need help?"),g="https://www.facebook.com/help/messenger-app/431055522328649?ref=learn_more",h=r("gkx")("14456"),y=function(t){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,t===_?"PIN_CODE_RESTORE_FORGOT_PIN_CLICK":"PIN_CODE_RESTORE_NEED_HELP_CLICK")},C=h?_:f,b=function(){y(C)},v={children:C,href:g,onClick:b,rel:"noreferrer",target:"_blank"};function S(t){var a=o("react-compiler-runtime").c(39),i=t.offlineDevicesCount,l=t.onClose,s=t.onComplete,d=t.pushPage,m=r("useGetUserMobileEBState")(),p;a[0]===Symbol.for("react.memo_cache_sentinel")?(p={},a[0]=p):p=a[0];var g=r("usePushPage")(n("cr:12326"),p),h=g[0],C=g[1],b;if(a[1]!==C){var S=C.onHighIntent,R=babelHelpers.objectWithoutPropertiesLoose(C,e);b=R,a[1]=C,a[2]=b}else b=a[2];var L;a[3]===Symbol.for("react.memo_cache_sentinel")?(L={},a[3]=L):L=a[3];var E=r("usePushPage")(n("cr:12327"),L),k=E[0],I=E[1],T;if(a[4]!==I){var D=I.onHighIntent,x=babelHelpers.objectWithoutPropertiesLoose(I,u);T=x,a[4]=I,a[5]=T}else T=a[5];var $;a[6]===Symbol.for("react.memo_cache_sentinel")?($={},a[6]=$):$=a[6];var P=r("usePushPage")(r("MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint"),$),N=P[0],M=P[1],w;if(a[7]!==M){var A=M.onHighIntent,F=babelHelpers.objectWithoutPropertiesLoose(M,c);w=F,a[7]=M,a[8]=w}else w=a[8];if(m.state===o("UserMobileEBState").UserMobileEBState.UNTRUSTED_MOBILE){var O;a[9]!==l||a[10]!==s||a[11]!==d||a[12]!==k?(O=function(){y(_),k({onClose:l,onComplete:s,pushPage:d})},a[9]=l,a[10]=s,a[11]=d,a[12]=k,a[13]=O):O=a[13];var B;return a[14]!==O||a[15]!==T.onHoverIn||a[16]!==T.onHoverOut||a[17]!==T.onPressIn?(B={children:_,onClick:O,onHoverEnd:T.onHoverOut,onHoverStart:T.onHoverIn,onPressStart:T.onPressIn},a[14]=O,a[15]=T.onHoverIn,a[16]=T.onHoverOut,a[17]=T.onPressIn,a[18]=B):B=a[18],B}if(m.state===o("UserMobileEBState").UserMobileEBState.NO_MOBILE){var W;a[19]!==l||a[20]!==s||a[21]!==h?(W=function(){y(_),h({onClose:l,onComplete:s})},a[19]=l,a[20]=s,a[21]=h,a[22]=W):W=a[22];var q;return a[23]!==b.onHoverIn||a[24]!==b.onHoverOut||a[25]!==b.onPressIn||a[26]!==W?(q={children:_,onClick:W,onHoverEnd:b.onHoverOut,onHoverStart:b.onHoverIn,onPressStart:b.onPressIn},a[23]=b.onHoverIn,a[24]=b.onHoverOut,a[25]=b.onPressIn,a[26]=W,a[27]=q):q=a[27],q}var U=i>0||!0;if(U){var V;a[28]!==U||a[29]!==l||a[30]!==s||a[31]!==N||a[32]!==d?(V=function(){y(f),N({isRCDeviceEnabled:U,onClose:l,onComplete:s,pushPage:d},{})},a[28]=U,a[29]=l,a[30]=s,a[31]=N,a[32]=d,a[33]=V):V=a[33];var H;return a[34]!==w.onHoverIn||a[35]!==w.onHoverOut||a[36]!==w.onPressIn||a[37]!==V?(H={children:f,onClick:V,onHoverEnd:w.onHoverOut,onHoverStart:w.onHoverIn,onPressStart:w.onPressIn},a[34]=w.onHoverIn,a[35]=w.onHoverOut,a[36]=w.onPressIn,a[37]=V,a[38]=H):H=a[38],H}else return v}function R(e){var t=o("react-compiler-runtime").c(18),n=e.onDismiss,a=n===void 0?r("emptyFunction"):n,i=r("useGetUserMobileEBState")(),l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={},t[0]=l):l=t[0];var s=r("useMWXEntryPointDialog")(r("MAWEncryptedBackupsRestoreDialog.entrypoint"),l),u=s[0],c=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),d=c.virtualDeviceInfo,m=d.offlineDevicesCount,g=p(r("MWJewelPopoverDialogContext.react")),h=g.setIsOpenForDialog,C;t[1]===Symbol.for("react.memo_cache_sentinel")?(C={},t[1]=C):C=t[1];var b=r("useMWXEntryPointDialog")(r("MWChatEncryptedBackupsForgotPINDialog.entrypoint"),C),S,R;if(t[2]!==b?(R=b[0],S=babelHelpers.arrayLikeToArray(b).slice(1),t[2]=b,t[3]=S,t[4]=R):(S=t[3],R=t[4]),i.state===o("UserMobileEBState").UserMobileEBState.UNTRUSTED_MOBILE||i.state===o("UserMobileEBState").UserMobileEBState.NO_MOBILE){var L;return t[5]!==h||t[6]!==u||t[7]!==i.state?(L={children:_,onClick:function(){y(_),h(!0),u({onDismissUpsell:r("emptyFunction"),skipToEOTRForgotPINStep:i.state,source:r("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP})}},t[5]=h,t[6]=u,t[7]=i.state,t[8]=L):L=t[8],L}var E=m>0;if(E){var k=S,I=k[0],T=k[1],D=k[2],x;t[9]!==a||t[10]!==h||t[11]!==R?(x=function(){y(f),h(!0),R({onDismiss:a})},t[9]=a,t[10]=h,t[11]=R,t[12]=x):x=t[12];var $;return t[13]!==T||t[14]!==I||t[15]!==D||t[16]!==x?($={children:f,onClick:x,onHoverEnd:T,onHoverStart:I,onPressStart:D},t[13]=T,t[14]=I,t[15]=D,t[16]=x,t[17]=$):$=t[17],$}else return v}l.STATIC_HELP_CENTER_LINK_PROPS=v,l.useForgotPinLinkPushPageProps=S,l.useForgotPinLinkShowDialogProps=R}),226);
__d("MWChatEncryptedBackupsRestoreJewelForgotPinButtonSuspender.react",["MWEncryptedBackupsForgotPinStep","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","href","onClick","onHoverEnd","onHoverStart","onPressStart","rel","target"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(5),r=t.children,a=t.dismissSoftblock,i;n[0]!==a?(i={onDismiss:a},n[0]=a,n[1]=i):i=n[1];var l=o("MWEncryptedBackupsForgotPinStep").useForgotPinLinkShowDialogProps(i),s;if(n[2]!==r||n[3]!==l){var u=l.children,c=l.href,d=l.onClick,m=l.onHoverEnd,p=l.onHoverStart,_=l.onPressStart,f=l.rel,g=l.target,h=babelHelpers.objectWithoutPropertiesLoose(l,e),y=babelHelpers.extends({},h,{label:u,linkProps:c!=null?{rel:f,target:g,url:c}:void 0,onHoverIn:p,onHoverOut:m,onPress:d,onPressIn:_});s=r({buttonProps:y,linkProps:l}),n[2]=r,n[3]=l,n[4]=s}else s=n[4];return s}l.default=c}),98);
__d("MWChatEncryptedBackupsSetIsDialogPersistedContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({setIsDialogPersisted:function(){}});l.default=u}),98);
__d("MWChatEncryptedBackupsSettingsDialogQuery.graphql",["MWChatEncryptedBackupsSettingsDialogQuery_facebookRelayOperation","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:!1,kind:"LocalArgument",name:"labyrinthOnePointOneSecurityUX"}],t={alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null},r={alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'},o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MWChatEncryptedBackupsSettingsDialogQuery",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MWEBVestaUserInfoContextProvider_viewer"},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[t],storageKey:null}],storageKey:null},action:"THROW",path:"viewer"},{args:[{kind:"Variable",name:"labyrinthOnePointOneSecurityUX",variableName:"labyrinthOnePointOneSecurityUX"}],kind:"FragmentSpread",name:"MWChatEncryptedBackupsSettingsDialogStep_query"},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[r,{args:null,kind:"FragmentSpread",name:"useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MWChatEncryptedBackupsSettingsDialogQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[t,o],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"encrypted_backup_encryption_management_delegator_id",storageKey:null}],type:"User",abstractKey:null},o],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[a,o,{alias:null,args:null,kind:"ScalarField",name:"last_sync_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backup_creation_time",storageKey:null},{condition:"labyrinthOnePointOneSecurityUX",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"allow_sender_backup",storageKey:null}]},r,{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null},o],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"logout_whitelist",storageKey:null}]},params:{id:n("MWChatEncryptedBackupsSettingsDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatEncryptedBackupsSettingsDialogQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("MWEBNoMobileEOTRInformationalDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWEBNoMobileEOTRInformationalDialogForEntrypoint.react").__setRef("MWEBNoMobileEOTRInformationalDialog.entrypoint")};l.default=e}),98);
__d("MWEBOTCDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWEBOTCDialog.react").__setRef("MWEBOTCDialog.entrypoint")};l.default=e}),98);
__d("MWEBQPWithPinState.enum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({INITIAL:0,RESTORE_IN_PROGRESS:1}),l=e;i.default=l}),66);
__d("MWEBRestoreQPWithPin_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEBRestoreQPWithPin_viewer",selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_viewer"},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null}],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"qp_with_pin_state",storageKey:null}]}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("useMWChatEncryptedBackupsAddDevice",["EBMainThreadEBDBApiDeferred","EBSMAPI","FBLogger","getErrorSafe","react","react-compiler-runtime","requireDeferred","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e=["onStart"],s,u=s||(s=o("react")),c=u.useCallback,d=u.useRef,m=u.useState,p=r("requireDeferred")("MAWEncryptedBackupsClearRecoveryCode").__setRef("useMWChatEncryptedBackupsAddDevice"),_=r("requireDeferred")("mwEBAddDevice").__setRef("useMWChatEncryptedBackupsAddDevice");function f(t){var n=o("react-compiler-runtime").c(12),a=t.environment,i=t.hsmFleetMigrationResetPIN,l=t.onComplete,s=t.onFailure,u=t.onInvalidRecoveryCode,c=t.onStart,f=m(!1),C=f[0],b=f[1],v;n[0]===Symbol.for("react.memo_cache_sentinel")?(v=function(){b(!1)},n[0]=v):v=n[0];var S=v,R=r("useAsyncReStore")(),L=d(""),E;n[1]!==R||n[2]!==a||n[3]!==i||n[4]!==l||n[5]!==s||n[6]!==u||n[7]!==c?(E=async function(n,o){L.current=o||"";try{var t=await Promise.all([R,p.load(),_.load()]),d=t[0],m=t[1],f=t[2],C=m.encryptedBackupsClearRecoveryCode,v=f.EBAddDevice;await C(d);var E={onFailure:function(t){S(),s(t)},onInvalidRecoveryCode:function(){S(),u()},onStart:function(){b(!0),c==null||c()},onSuccess:function(){r("EBSMAPI").fetchBackupIds("useMWChatEncryptedBackupsAddDevice").catch(y),S(),l(),i&&L.current!==""&&i(L.current)},recoveryCode:n,storage:d};E.onStart();var k=E.onStart,I=babelHelpers.objectWithoutPropertiesLoose(E,e);await v(babelHelpers.extends({},I,{environment:a,trackAddingDevice:h,trackOverprompting:g}))}catch(e){var T=e,D=r("getErrorSafe")(T);r("FBLogger")("wmi_eb").tags(["pin_restore","add_device_error"]).catching(D).warn("Error in addDevice"),S(),s("add_device_error")}},n[1]=R,n[2]=a,n[3]=i,n[4]=l,n[5]=s,n[6]=u,n[7]=c,n[8]=E):E=n[8];var k=E,I;return n[9]!==C||n[10]!==k?(I=[k,C],n[9]=C,n[10]=k,n[11]=I):I=n[11],I}function g(e){return o("EBMainThreadEBDBApiDeferred").trackOverprompting(e)}function h(){return o("EBMainThreadEBDBApiDeferred").addNewDevice()}function y(e){var t=r("getErrorSafe")(e);r("FBLogger")("wmi_eb").tags(["pin_restore","fetch_backup_ids_error"]).catching(t).warn("Error in fetchBackupIds")}l.default=f}),98);
__d("useMWChatEncryptedBackupsPinCodeRestore",["CometRelay","EBSMGatingUI","JSResourceForInteraction","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsSetIsDialogPersistedContext","MWEBODSEntityName.enum","MWEBPinCodeSize","MWEBUpsellDismissedEnum.facebook","MWEncryptedBackupsLocalStorageEntryEnum","QPLUserFlow","promiseDone","react","react-compiler-runtime","requireDeferred","useLabyrinthLogging","useMWChatEncryptedBackupsAddDevice","useMWChatEncryptedBackupsNumericCode","useMWEBFlowSourceContext","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useContext,m=u.useEffect,p=u.useRef,_=u.useState,f=r("requireDeferred")("MWEBUseLocalStorage").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),g=r("requireDeferred")("MWEncryptedBackupsSharedState").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),h=r("requireDeferred")("mwEBGetPINSecretFromVesta").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),y=r("requireDeferred")("updateUpsellsStateInRelayStore").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),C=r("JSResourceForInteraction")("MWEncryptedBackupsHsmFleetMigrationGated").__setRef("useMWChatEncryptedBackupsPinCodeRestore");function b(t){var n=o("react-compiler-runtime").c(47),a=t.clientID,i=t.focusRegionId,l=t.onSubmitPin,s=t.onSubmitPinFailure,u=t.onVestaComplete,c=o("CometRelay").useRelayEnvironment(),b=_(!1),S=b[0],R=b[1],L=_(!1),E=L[0],k=L[1],I=_(!1),T=I[0],D=I[1],x=p(!1),$=o("useLabyrinthLogging").useLabyrinthLoggingFlow(),P=$.startFlow,N=(e||(e=r("useReStore")))(),M=r("useMWEBFlowSourceContext")(),w=_(!1),A=w[0],F=w[1],O=d(r("MWChatEncryptedBackupsSetIsDialogPersistedContext")).setIsDialogPersisted,B;n[0]!==N||n[1]!==c||n[2]!==P?(B=function(t){r("promiseDone")(C.load().then(function(e){e({db:N,environment:c,pinCode:t,startFlow:P})}))},n[0]=N,n[1]=c,n[2]=P,n[3]=B):B=n[3];var W=B,q;n[4]!==N||n[5]!==c||n[6]!==u?(q=function(){var e;r("QPLUserFlow").addPoint((e=o("MWChatEncryptedBackupsQPLEvents")).restoreDeviceAuthQplEvent,"add_device_success"),r("QPLUserFlow").addPoint(e.restoreQplEvent,"restore_auth_finished_and_dismissed"),g.onReady(function(e){var t=e.upsertEBSharedStateEntry;r("promiseDone")(t({db:N,stateKey:r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY}))}),f.onReady(v),o("MWChatEncryptedBackupsLogging").endSuccess({annotations:{bool:{is_backend_setup:o("EBSMGatingUI").isBackendSetupSuccessfulForEBSM()}},event:e.restoreQplEvent}),o("MWChatEncryptedBackupsLogging").endSuccess({event:e.restoreDeviceAuthQplEvent,odsEntityName:r("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),u(),F(!1),r("promiseDone")(y.load(),function(e){e({environment:c,updateValue:o("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.UPSELLS_DISMISSED})})},n[4]=N,n[5]=c,n[6]=u,n[7]=q):q=n[7];var U=q,V;n[8]!==c||n[9]!==s||n[10]!==O?(V=function(t){s==null||s(),x.current=!0,k(!0),F(!1),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,t),o("MWChatEncryptedBackupsLogging").endFailure({errorName:t,event:o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:r("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),r("promiseDone")(y.load(),function(e){e({environment:c,updateValue:o("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.NOT_DISMISSED})}),O==null||O(!1)},n[8]=c,n[9]=s,n[10]=O,n[11]=V):V=n[11];var H=V,G;n[12]!==c||n[13]!==s||n[14]!==O?(G=function(){s==null||s(),x.current=!0,k(!0),F(!1),o("MWChatEncryptedBackupsLogging").endFailure({errorName:"pin_code_restore_wrong_recovery_code",event:o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:r("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"pin_code_restore_wrong_recovery_code"),r("promiseDone")(y.load(),function(e){e({environment:c,updateValue:o("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.NOT_DISMISSED})}),O==null||O(!1)},n[12]=c,n[13]=s,n[14]=O,n[15]=G):G=n[15];var z=G,j;n[16]!==c||n[17]!==W||n[18]!==U||n[19]!==H||n[20]!==z?(j={environment:c,hsmFleetMigrationResetPIN:W,onComplete:U,onFailure:H,onInvalidRecoveryCode:z},n[16]=c,n[17]=W,n[18]=U,n[19]=H,n[20]=z,n[21]=j):j=n[21];var K=r("useMWChatEncryptedBackupsAddDevice")(j),Q=K[0],X;n[22]===Symbol.for("react.memo_cache_sentinel")?(X=function(){k(!1),D(!1),R(!1)},n[22]=X):X=n[22];var Y;n[23]!==Q||n[24]!==a||n[25]!==c||n[26]!==M||n[27]!==l||n[28]!==s||n[29]!==O||n[30]!==P?(Y=async function(t){var e=await h.load();await e({addDevice:Q,clientID:a,environment:c,getSourceFromContext:M,onSubmitPin:l,onSubmitPinFailure:s,onVestaSecretFetch:function(){O==null||O(!0)},pinCode:t,productUseCase:"MSGR_ENC_BACKUP",setIsInProgress:F,setIsPinCodeIncorrect:R,setIsVestaError:D,startFlow:P})},n[23]=Q,n[24]=a,n[25]=c,n[26]=M,n[27]=l,n[28]=s,n[29]=O,n[30]=P,n[31]=Y):Y=n[31];var J;n[32]!==i||n[33]!==Y?(J={enableMasking:!0,focusRegionId:i,inputSize:o("MWEBPinCodeSize").EB_PIN_CODE_SIZE,onChange:X,onComplete:Y,type:"pin"},n[32]=i,n[33]=Y,n[34]=J):J=n[34];var Z=o("useMWChatEncryptedBackupsNumericCode").useMWChatEncryptedBackupsNumericCode(J),ee=Z[0],te=Z[1],ne=te.clearNumericInput,re=te.disabled,oe=te.focusOnInput,ae=te.invalidKeyPressedError,ie,le;n[35]!==ne?(ie=function(){x.current&&(ne(),x.current=!1)},le=[ne],n[35]=ne,n[36]=ie,n[37]=le):(ie=n[36],le=n[37]),m(ie,le);var se=re!=null?re:!1,ue;return n[38]!==oe||n[39]!==ee||n[40]!==ae||n[41]!==A||n[42]!==E||n[43]!==S||n[44]!==T||n[45]!==se?(ue={focusOnInput:oe,inputProps:ee,invalidKeyPressedError:ae,isDisabled:se,isInProgress:A,isLabyrinthError:E,isPinCodeIncorrect:S,isVestaError:T},n[38]=oe,n[39]=ee,n[40]=ae,n[41]=A,n[42]=E,n[43]=S,n[44]=T,n[45]=se,n[46]=ue):ue=n[46],ue}function v(e){var t=e.mwEBCreateLocalStorageEntry,n=e.mwEBDeleteLocalStorageEntry;t(r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION),t(r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION_2),n(r("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE)}l.useMWChatEncryptedBackupsPinCodeRestore=b}),98);
__d("useMWEBSetHasSeenNoticeMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9618790408209960"}),null);
__d("useMWEBSetHasSeenNoticeMutation.graphql",["useMWEBSetHasSeenNoticeMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,concreteType:"SetHasSeenEbAutoRestoreNoticeResponsePayload",kind:"LinkedField",name:"set_has_seen_eb_auto_restore_notice",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWEBSetHasSeenNoticeMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useMWEBSetHasSeenNoticeMutation",selections:e},params:{id:n("useMWEBSetHasSeenNoticeMutation_facebookRelayOperation"),metadata:{},name:"useMWEBSetHasSeenNoticeMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("useMWEBSetHasSeenNotice",["CometRelay","react","react-compiler-runtime","useMWEBSetHasSeenNoticeMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback;function c(){var t=o("react-compiler-runtime").c(3),r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=e!==void 0?e:e=n("useMWEBSetHasSeenNoticeMutation.graphql"),t[0]=r):r=t[0];var a=o("CometRelay").useMutation(r),i=a[0],l;return t[1]!==i?(l=function(){i({variables:{}})},t[1]=i,t[2]=l):l=t[2],l}l.default=c}),98);
__d("useMWEBAutoRestoreNoticeDialog",["JSResourceForInteraction","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum","QPLUserFlow","ReQL","ReQLSuspense","react","react-compiler-runtime","useLabyrinthLogging","useMWEBSetHasSeenNotice","useMWXLazyDialog","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback,c=r("JSResourceForInteraction")("MWEBAutoRestoreNoticeDialog.react").__setRef("useMWEBAutoRestoreNoticeDialog");function d(){var t=o("react-compiler-runtime").c(9),n=o("useLabyrinthLogging").useLabyrinthLoggingFlow(),a=n.startFlow,l=r("useMWXLazyDialog")(c),s=l[0],u=(e||(e=r("useReStore")))(),d;t[0]!==u.tables.auto_restore_opt_out?(d=function(){return o("ReQL").fromTableAscending(u.tables.auto_restore_opt_out)},t[0]=u.tables.auto_restore_opt_out,t[1]=d):d=t[1];var p;t[2]!==u?(p=[u],t[2]=u,t[3]=p):p=t[3];var _=o("ReQLSuspense").useArray(d,p,i.id+":45"),f=r("useMWEBSetHasSeenNotice")(),g;return t[4]!==_||t[5]!==f||t[6]!==s||t[7]!==a?(g=function(t){var e=t.hasSeenNotice,n=t.source,i=_.filter(m).length>0;if(a({event:o("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,source:n}),i){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,"AUTO_RESTORE_NOTICE_SCREEN_OPTED_OUT"),o("MWChatEncryptedBackupsLogging").endSuccess({event:o("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent});return}if(r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,"AUTO_RESTORE_NOTICE_SCREEN_OPTED_IN"),o("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_REMEMBER_BROWSER_CONSENT),e){o("MWChatEncryptedBackupsLogging").endSuccess({event:o("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent});return}f(),s({})},t[4]=_,t[5]=f,t[6]=s,t[7]=a,t[8]=g):g=t[8],g}function m(e){return e.optOutKey===r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE}l.default=d}),98);
__d("MWEBRestoreQPWithPin.react",["fbt","CometPlaceholder.react","CometRelay","CometVisualCompletionAttributes","EncryptedBackupsSupportedPlatformUtils","FBLogger","FocusRegion.react","JSResourceForInteraction","MWChatEBPinCodeVerifyIndicator.react","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsNumericCodeErrorWrapper.react","MWChatEncryptedBackupsNumericCodeInput.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWChatEncryptedBackupsRestoreJewelForgotPinButtonSuspender.react","MWEBFlowSourceContextProvider.react","MWEBOTCDialog.entrypoint","MWEBQPWithPinState.enum","MWEBRestoreQPWithPin_viewer.graphql","MWEncryptedBackupsForgotPinStep","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWJewelPopoverDialogContext.react","MWLogInboxFiltersInteraction","MWLogInteraction","MWXCircleButton.react","MWXColumn.react","MWXColumnItem.react","MWXIconCross","MWXImage.react","MWXLink.react","MWXRow.react","MWXRowItem.react","MWXText.react","QPLUserFlow","focusScopeQueries","getMWEBRestoreQPCautionCircleProperties","gkx","promiseDone","react","react-compiler-runtime","useAsyncReStore","useLabyrinthLogging","useMWChatEncryptedBackupsPinCodeRestore","useMWChatEncryptedBackupsVestaUserInfo","useMWEBAutoRestoreNoticeDialog","useMWEBFlowSourceContext","useMWXEntryPointDialog","useMWXLazyDialog","useVisibilityObserver"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useContext,_=d.useEffect,f=d.useMemo,g=d.useRef,h=d.useState,y=r("JSResourceForInteraction")("MWChatEncryptedBackupsPinCodeBlockedDialog.react").__setRef("MWEBRestoreQPWithPin.react"),C="chat-encrypted-backups-jewel-qp-with-pin-input",b={icon:{paddingTop:"x889kno",$$css:!0}};function v(t){var a,i,l=o("react-compiler-runtime").c(82),u=t.clientID,d=t.doesUserHaveOtcEligibleDevices,m=t.fragmentKey,f=t.isInbox,v=t.setClosed,k=t.setDismissed,I=o("CometRelay").useFragment(e!==void 0?e:e=n("MWEBRestoreQPWithPin_viewer.graphql"),m),T=o("CometRelay").useRelayEnvironment(),D;l[0]!==T?(D=function(t){return o("CometRelay").commitLocalUpdate(T,function(e){var n=e.getRoot().getLinkedRecord("viewer");if(n==null){r("FBLogger")("wmi_eb").mustfix("[labyrinth][jewel_softblock_state] A viewer record does not exist when propagating EB restore qp with pin state");return}n.setValue(t,"qp_with_pin_state")})},l[0]=T,l[1]=D):D=l[1];var x=D,$;l[2]!==I?($={viewer$key:I},l[2]=I,l[3]=$):$=l[3];var P=r("useMWChatEncryptedBackupsVestaUserInfo")($),N=P.attemptsRemaining===0||P.loginTimeoutRemainingSecs!=null,M=h(!1),w=M[0],A=M[1],F=g(!1),O=r("useMWXLazyDialog")(y),B=O[0],W,q;l[4]!==N||l[5]!==B||l[6]!==w||l[7]!==P.attemptsRemaining||l[8]!==P.loginTimeoutRemainingSecs||l[9]!==P.refetchVestaClientInfo?(W=function(){N&&w===!0&&F.current!==!0&&(F.current=!0,B({attemptsRemaining:P.attemptsRemaining,loginTimeoutRemainingSecs:P.loginTimeoutRemainingSecs,onDismiss:E,refetchVestaClientInfo:P.refetchVestaClientInfo}))},q=[N,B,w,P.attemptsRemaining,P.loginTimeoutRemainingSecs,P.refetchVestaClientInfo],l[4]=N,l[5]=B,l[6]=w,l[7]=P.attemptsRemaining,l[8]=P.loginTimeoutRemainingSecs,l[9]=P.refetchVestaClientInfo,l[10]=W,l[11]=q):(W=l[10],q=l[11]),_(W,q);var U=o("useLabyrinthLogging").useLabyrinthLoggingFlow(),V=U.startFlow,H=r("useAsyncReStore")(),G=r("useMWEBFlowSourceContext")(),z;l[12]!==G?(z=G(),l[12]=G,l[13]=z):z=l[13];var j=z,K;l[14]!==H||l[15]!==d||l[16]!==N||l[17]!==j||l[18]!==V?(K=function(t){r("promiseDone")(H.then(function(e){o("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:e,onFetch:function(n){var e=n.ebsmWiped,a=n.firstUpsellTime,i=n.hasEbKeysLocally,l=n.hasEBSM,s=n.hasPDB,u=n.hasUserRestoredBefore,c=n.hasUserRestoredBeforeTemp;V({additionalAnnotations:{eb_session_identifier:a,ebsm_wiped:e,has_eb_keys_locally:i,has_ebsm:l,has_pdb:s,has_user_restored_before:u,has_user_restored_before_temp:c,is_otc_eligible:d.toString(),is_pin_locked_blocked:N.toString(),is_pin_set:"true",restore_upsell_first_impression_time:a},event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:j}),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,t)}})}))},l[14]=H,l[15]=d,l[16]=N,l[17]=j,l[18]=V,l[19]=K):K=l[19];var Q=K,X;l[20]!==f||l[21]!==v||l[22]!==k||l[23]!==Q?(X=function(){var e=f?"RESTORE_QP_WITH_PIN_INBOX_DISMISSED":"RESTORE_QP_WITH_PIN_JEWEL_DISMISSED";Q(e),o("MWChatEncryptedBackupsLogging").cancelFlow({cancelEndPoint:"thread_list_qp_with_pin",event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent}),v(),k()},l[20]=f,l[21]=v,l[22]=k,l[23]=Q,l[24]=X):X=l[24];var Y=X,J=p(r("MWJewelPopoverDialogContext.react")),Z=J.setIsOpenForDialog,ee=r("useMWEBAutoRestoreNoticeDialog")(),te;if(l[25]!==ee||l[26]!==(I==null||(a=I.encrypted_backup)==null?void 0:a.has_seen_eb_auto_restore_notice)||l[27]!==j||l[28]!==v||l[29]!==Z||l[30]!==x){var ne;te=function(){var e,t;v(),ee({hasSeenNotice:(e=I==null||(t=I.encrypted_backup)==null?void 0:t.has_seen_eb_auto_restore_notice)!=null?e:!1,source:j}),Z(!0),x(r("MWEBQPWithPinState.enum").INITIAL)},l[25]=ee,l[26]=I==null||(ne=I.encrypted_backup)==null?void 0:ne.has_seen_eb_auto_restore_notice,l[27]=j,l[28]=v,l[29]=Z,l[30]=x,l[31]=te}else te=l[31];I==null||(i=I.encrypted_backup)==null||i.has_seen_eb_auto_restore_notice;var re=te,oe,ae;l[32]!==x?(ae=function(){A(!0),o("MWLogInteraction").logPopoverOpenCancel("initiate_restore"),o("MWLogInboxFiltersInteraction").logInboxFiltersNavigationCancel("initiate_restore"),x(r("MWEBQPWithPinState.enum").RESTORE_IN_PROGRESS)},oe=function(){x(r("MWEBQPWithPinState.enum").INITIAL)},l[32]=x,l[33]=oe,l[34]=ae):(oe=l[33],ae=l[34]);var ie;l[35]!==u||l[36]!==re||l[37]!==oe||l[38]!==ae?(ie={clientID:u,focusRegionId:C,onSubmitPin:ae,onSubmitPinFailure:oe,onVestaComplete:re},l[35]=u,l[36]=re,l[37]=oe,l[38]=ae,l[39]=ie):ie=l[39];var le=o("useMWChatEncryptedBackupsPinCodeRestore").useMWChatEncryptedBackupsPinCodeRestore(ie),se=le.inputProps,ue=le.invalidKeyPressedError,ce=le.isInProgress,de=le.isLabyrinthError,me=le.isPinCodeIncorrect,pe=le.isVestaError,_e=r("gkx")("23219"),fe=(I==null?void 0:I.qp_with_pin_state)===r("MWEBQPWithPinState.enum").RESTORE_IN_PROGRESS||ce,ge=_e||!r("gkx")("19484"),he;l[40]!==f||l[41]!==Q?(he={onVisible:function(){ge&&o("FocusRegion.react").focusRegionById(C,o("focusScopeQueries").tabbableScopeQuery);var e=f?"RESTORE_QP_WITH_PIN_INBOX_IMPRESSION":"RESTORE_QP_WITH_PIN_JEWEL_IMPRESSION";Q(e)}},l[40]=f,l[41]=Q,l[42]=he):he=l[42];var ye=r("useVisibilityObserver")(he),Ce;l[43]===Symbol.for("react.memo_cache_sentinel")?(Ce={},l[43]=Ce):Ce=l[43];var be=r("useMWXEntryPointDialog")(r("MWEBOTCDialog.entrypoint"),Ce),ve=be[0],Se;l[44]!==f||l[45]!==ve?(Se=function(){ve({source:f?r("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_QP:r("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP},L)},l[44]=f,l[45]=ve,l[46]=Se):Se=l[46];var Re=Se,Le;l[47]!==ue||l[48]!==de||l[49]!==me||l[50]!==pe?(Le=ue!=null?ue:me?s._(/*BTDS*/"Incorrect PIN. Try again."):de||pe?s._(/*BTDS*/"There was an error while using the PIN Code, please try again"):void 0,l[47]=ue,l[48]=de,l[49]=me,l[50]=pe,l[51]=Le):Le=l[51];var Ee=Le;if(N===!0)return v(),null;var ke;l[52]===Symbol.for("react.memo_cache_sentinel")?(ke={0:{className:"xlhe6ec x1obq294 x5a5i1n xde0f50 x15x8krk xe4pinz x14vqqas x1ys307a xod5an3 xyqm7xq xz9dl7a xpdmqnj xsag5q8 x1g0dm76"},1:{className:"x1obq294 x5a5i1n xde0f50 x15x8krk xe4pinz x14vqqas x1ys307a xod5an3 xyqm7xq xz9dl7a xpdmqnj xsag5q8 x1g0dm76 x1jx94hy"}}[!!_e<<0],l[52]=ke):ke=l[52];var Ie;l[53]===Symbol.for("react.memo_cache_sentinel")?(Ie=c.jsx(r("MWXRowItem.react"),{xstyle:b.icon,children:c.jsx(r("MWXImage.react"),{src:r("getMWEBRestoreQPCautionCircleProperties")()})}),l[53]=Ie):Ie=l[53];var Te;l[54]===Symbol.for("react.memo_cache_sentinel")?(Te=c.jsx(r("MWXColumnItem.react"),{children:c.jsx(r("MWXText.react"),{align:"start",isSemanticHeading:!0,numberOfLines:2,type:"headlineEmphasized4",children:s._(/*BTDS*/"Chat history is missing")})}),l[54]=Te):Te=l[54];var De;l[55]===Symbol.for("react.memo_cache_sentinel")?(De=c.jsx(r("MWXRowItem.react"),{expanding:!0,children:c.jsxs(r("MWXColumn.react"),{paddingTop:8,spacing:12,children:[Te,c.jsx(r("MWXColumnItem.react"),{children:c.jsx(r("MWXText.react"),{align:"start",color:_e?"secondary":"primary",numberOfLines:2,type:"body4",children:s._(/*BTDS*/"Enter your PIN to restore chat history.")})})]})}),l[55]=De):De=l[55];var xe;l[56]===Symbol.for("react.memo_cache_sentinel")?(xe=s._(/*BTDS*/"Close chat history restore notification"),l[56]=xe):xe=l[56];var $e;l[57]!==Y?($e=c.jsx(r("MWXColumnItem.react"),{children:c.jsxs(r("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,spacing:12,children:[Ie,De,c.jsx(r("MWXRowItem.react"),{children:c.jsx(r("MWXCircleButton.react"),{"aria-label":xe,color:"primary",icon:r("MWXIconCross"),onPress:Y,size:_e?24:32,testid:void 0})})]})}),l[57]=Y,l[58]=$e):$e=l[58];var Pe;l[59]!==se||l[60]!==fe?(Pe=c.jsx(r("MWChatEncryptedBackupsNumericCodeInput.react"),babelHelpers.extends({},se,{color:_e?"primary":"secondary",disabled:fe,inputSize:"small",testid:void 0,withAutoFocus:ge})),l[59]=se,l[60]=fe,l[61]=Pe):Pe=l[61];var Ne;l[62]!==Ee||l[63]!==Pe?(Ne=c.jsx(r("MWXColumnItem.react"),{paddingTop:16,children:c.jsx(r("MWChatEncryptedBackupsNumericCodeErrorWrapper.react"),{error:Ee,inputSize:"small",children:Pe})}),l[62]=Ee,l[63]=Pe,l[64]=Ne):Ne=l[64];var Me;l[65]!==fe?(Me=fe&&c.jsx(r("MWXColumnItem.react"),{align:"center",children:c.jsx("div",{className:"xfitlp5 x9otpla",children:c.jsx(r("MWChatEBPinCodeVerifyIndicator.react"),{isMessenger:_e})})}),l[65]=fe,l[66]=Me):Me=l[66];var we;l[67]!==d||l[68]!==Ee||l[69]!==fe||l[70]!==Re||l[71]!==Z?(we=!fe&&c.jsx(r("MWXColumnItem.react"),{align:"center",children:c.jsx("div",babelHelpers.extends({},{0:{},2:{className:"xod5an3"},1:{className:"x12nagc x1iorvi4"},3:{className:"x12nagc x1iorvi4"}}[(Ee==null)<<1|(Ee!=null)<<0],{children:c.jsx(r("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:d===!0?c.jsx(r("MWXLink.react"),{onClick:function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_USE_ONE_TIME_CODE_CLICK"),Z(!0),Re()},children:s._(/*BTDS*/"Use a one-time code instead")}):c.jsx("div",babelHelpers.extends({},r("CometVisualCompletionAttributes").IGNORE,{children:c.jsx(r("CometPlaceholder.react"),{fallback:c.jsx(r("MWXLink.react"),babelHelpers.extends({testid:void 0},o("MWEncryptedBackupsForgotPinStep").STATIC_HELP_CENTER_LINK_PROPS,{onClick:R})),name:"mw-chat-encrypted-backups-jewel-forgot-pin-fallback-link",children:c.jsx(r("MWChatEncryptedBackupsRestoreJewelForgotPinButtonSuspender.react"),{children:S})})}))})}))}),l[67]=d,l[68]=Ee,l[69]=fe,l[70]=Re,l[71]=Z,l[72]=we):we=l[72];var Ae;l[73]!==ye||l[74]!==$e||l[75]!==Ne||l[76]!==Me||l[77]!==we?(Ae=c.jsxs(r("MWXColumn.react"),{ref:ye,testid:void 0,children:[$e,Ne,Me,we]}),l[73]=ye,l[74]=$e,l[75]=Ne,l[76]=Me,l[77]=we,l[78]=Ae):Ae=l[78];var Fe;return l[79]!==ke||l[80]!==Ae?(Fe=c.jsx("div",babelHelpers.extends({},ke,{children:Ae})),l[79]=ke,l[80]=Ae,l[81]=Fe):Fe=l[81],Fe}function S(e){var t=e.linkProps;return c.jsx(r("MWXLink.react"),babelHelpers.extends({testid:void 0},t,{onClick:function(n){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_FORGOT_PIN_CLICK"),t.onClick==null||t.onClick(n)}}))}S.displayName=S.name+" [from "+i.id+"]";function R(e){r("FBLogger")("wmi_eb").tags(["jewel_restore_qp"]).warn("User clicked on the placeholder Forgot PIN button"),o("MWEncryptedBackupsForgotPinStep").STATIC_HELP_CENTER_LINK_PROPS.onClick==null||o("MWEncryptedBackupsForgotPinStep").STATIC_HELP_CENTER_LINK_PROPS.onClick(e)}function L(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_CLOSE_DIALOG_CLICK")}function E(){}function k(e){var t=o("react-compiler-runtime").c(10),n=e.clientID,a=e.currentSupportedPlatform,i=e.doesUserHaveOtcEligibleDevices,l=e.fragmentKey,s=e.setClosed,u=e.setDismissed,d=a!==o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM,m=d?r("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_QP_WITH_PIN:r("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP_WITH_PIN,p;t[0]!==n||t[1]!==i||t[2]!==l||t[3]!==d||t[4]!==s||t[5]!==u?(p=c.jsx(v,{clientID:n,doesUserHaveOtcEligibleDevices:i,fragmentKey:l,isInbox:d,setClosed:s,setDismissed:u}),t[0]=n,t[1]=i,t[2]=l,t[3]=d,t[4]=s,t[5]=u,t[6]=p):p=t[6];var _;return t[7]!==m||t[8]!==p?(_=c.jsx(r("MWEBFlowSourceContextProvider.react"),{source:m,children:p}),t[7]=m,t[8]=p,t[9]=_):_=t[9],_}l.default=k}),226);
__d("MWEBUntrustedMobileEOTRInformationalDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWEBUntrustedMobileEOTRInformationalDialogForEntrypoint.react").__setRef("MWEBUntrustedMobileEOTRInformationalDialog.entrypoint")};l.default=e}),98);
__d("MWEncryptedBackupsThreadListPersistentBanner.react",["fbt","EncryptedBackupsSupportedPlatformUtils","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWJewelPopoverDialogContext.react","MWXLink.react","MWXText.react","QPLUserFlow","promiseDone","react","react-compiler-runtime","requireDeferred","useLabyrinthLogging","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useContext,p=d.useRef,_=r("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEncryptedBackupsThreadListPersistentBanner.react");function f(t){var n=o("react-compiler-runtime").c(23),a=t.onDismissUpsell,i;n[0]===Symbol.for("react.memo_cache_sentinel")?(i={},n[0]=i):i=n[0];var l=r("useMWXEntryPointDialog")(r("MAWEncryptedBackupsRestoreDialog.entrypoint"),i),u=l[0],d=o("EncryptedBackupsSupportedPlatformUtils").useMWEncryptedBackupsGetCurrentSupportedPlatform(),f=d!==o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM,g=m(r("MWJewelPopoverDialogContext.react")),h=g.setIsOpenForDialog,y=(e||(e=r("useReStore")))(),C=o("useLabyrinthLogging").useLabyrinthLoggingFlow(),b=C.startFlow,v=p(!1),S=f?r("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_PERSISTENT_BANNER:r("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_PERSISTENT_BANNER,R;n[1]!==y||n[2]!==S||n[3]!==b?(R=function(t){o("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:y,onFetch:function(n){var e=n.ebsmWiped,a=n.firstUpsellTime,i=n.hasEbKeysLocally,l=n.hasEBSM,s=n.hasPDB,u=n.hasUserRestoredBefore,c=n.hasUserRestoredBeforeTemp;b({additionalAnnotations:{eb_session_identifier:a,ebsm_wiped:e,has_eb_keys_locally:i,has_ebsm:l,has_pdb:s,has_user_restored_before:u,has_user_restored_before_temp:c,restore_upsell_first_impression_time:a},event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:S}),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,t),v.current===!1&&(v.current=!0,r("promiseDone")(_.load(),function(e){return e(i)}))}})},n[1]=y,n[2]=S,n[3]=b,n[4]=R):R=n[4];var L=R,E;n[5]!==f||n[6]!==L?(E={onVisible:function(){L(f?"RESTORE_THREAD_LIST_PERSISTENT_BANNER_IMPRESSION_INBOX":"RESTORE_THREAD_LIST_PERSISTENT_BANNER_IMPRESSION")}},n[5]=f,n[6]=L,n[7]=E):E=n[7];var k=r("useVisibilityObserver")(E),I;n[8]===Symbol.for("react.memo_cache_sentinel")?(I={className:"xlhe6ec x1obq294 x5a5i1n xde0f50 x15x8krk x1xmf6yo x1e56ztr xyqm7xq x1ys307a x6ikm8r x10wlt62 xyamay9 x1l90r2v xf7dkkf xv54qhq"},n[8]=I):I=n[8];var T;n[9]===Symbol.for("react.memo_cache_sentinel")?(T=s._(/*BTDS*/"Missing chat history."),n[9]=T):T=n[9];var D;n[10]!==f||n[11]!==a||n[12]!==h||n[13]!==u||n[14]!==S||n[15]!==L?(D=function(){h(!0),L(f?"RESTORE_THREAD_LIST_PERSISTENT_BANNER_CTA_CLICKED_INBOX":"RESTORE_THREAD_LIST_PERSISTENT_BANNER_CTA_CLICKED"),u({onDismissUpsell:a,source:S})},n[10]=f,n[11]=a,n[12]=h,n[13]=u,n[14]=S,n[15]=L,n[16]=D):D=n[16];var x;n[17]===Symbol.for("react.memo_cache_sentinel")?(x=s._(/*BTDS*/"Restore now"),n[17]=x):x=n[17];var $;n[18]!==D?($=c.jsx(r("MWXText.react"),{color:"primary",type:"body4",children:c.jsxs(c.Fragment,{children:[T," ",c.jsx(r("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:c.jsx(r("MWXLink.react"),{onClick:D,target:"_blank",testid:void 0,children:x})})]})}),n[18]=D,n[19]=$):$=n[19];var P;return n[20]!==k||n[21]!==$?(P=c.jsx("div",babelHelpers.extends({},I,{ref:k,children:$})),n[20]=k,n[21]=$,n[22]=P):P=n[22],P}l.default=f}),226);
__d("MWEncryptedBackupsThreadListRestoreQPWrapper_query.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListRestoreQPWrapper_query",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsThreadListRestoreQPWrapper_viewer"}],storageKey:null}],type:"Query",abstractKey:null};a.exports=e}),null);
__d("MWEncryptedBackupsThreadListRestoreQPWrapper_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListRestoreQPWrapper_viewer",selections:[{args:null,kind:"FragmentSpread",name:"MWEBRestoreQPWithPin_viewer"}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("MWEncryptedBackupsVerifyDeviceNux.react",["fbt","EncryptedBackupsSupportedPlatformUtils","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWJewelPopoverDialogContext.react","MWXQPCard.react","QPLUserFlow","getMWEBRestoreQPCautionCircleProperties","promiseDone","react","react-compiler-runtime","requireDeferred","useLabyrinthLogging","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useContext,p=d.useRef,_=r("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEncryptedBackupsVerifyDeviceNux.react");function f(t){var n=o("react-compiler-runtime").c(47),a=t.children,i=t.currentSupportedPlatform,l=t.setClosed,u=t.setDismissed,d=o("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),f;n[0]===Symbol.for("react.memo_cache_sentinel")?(f={},n[0]=f):f=n[0];var g=r("useMWXEntryPointDialog")(r("MAWEncryptedBackupsRestoreDialog.entrypoint"),f),h=g[0],y=(e||(e=r("useReStore")))(),C=i!==o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM,b=C?r("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_QP:r("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP,v=o("useLabyrinthLogging").useLabyrinthLoggingFlow(),S=v.startFlow,R=p(!1),L=m(r("MWJewelPopoverDialogContext.react")),E=L.setIsOpenForDialog,k=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),I=k.virtualDeviceInfo,T=I.vestaClientID!=null,D=I.offlineDevicesCount>0,x=I.doesUserHaveOtcEligibleDevices,$=!T&&x,P;n[1]!==y||n[2]!==x||n[3]!==d||n[4]!==T||n[5]!==b||n[6]!==S?(P=function(t){o("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:y,onFetch:function(n){var e=n.ebsmWiped,a=n.firstUpsellTime,i=n.hasEbKeysLocally,l=n.hasEBSM,s=n.hasPDB,u=n.hasUserRestoredBefore,c=n.hasUserRestoredBeforeTemp;S({additionalAnnotations:{eb_session_identifier:a,ebsm_wiped:e,has_eb_keys_locally:i,has_ebsm:l,has_pdb:s,has_user_restored_before:u,has_user_restored_before_temp:c,is_otc_eligible:x.toString(),is_pin_locked_blocked:d.toString(),is_pin_set:T.toString(),restore_upsell_first_impression_time:a},event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:b}),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,t),R.current===!1&&(R.current=!0,r("promiseDone")(_.load(),function(e){return e(i)}))}})},n[1]=y,n[2]=x,n[3]=d,n[4]=T,n[5]=b,n[6]=S,n[7]=P):P=n[7];var N=P,M;n[8]!==C||n[9]!==N?(M={onVisible:function(){var e=C?"VERIFY_DEVICE_INBOX_QP_THREAD_LIST_IMPRESSION":"VERIFY_DEVICE_QP_THREAD_LIST_IMPRESSION";N(e)}},n[8]=C,n[9]=N,n[10]=M):M=n[10];var w=r("useVisibilityObserver")(M),A;n[11]!==C||n[12]!==l||n[13]!==E||n[14]!==N?(A=function(){var e=C?"USER_CLICKED_INBOX_THREAD_LIST_VERIFY_DEVICE":"USER_CLICKED_FB_THREAD_LIST_VERIFY_DEVICE";N(e),E(!0),l()},n[11]=C,n[12]=l,n[13]=E,n[14]=N,n[15]=A):A=n[15];var F=A,O,B;if(n[16]!==C||n[17]!==l||n[18]!==u||n[19]!==N?(O=function(){var e=C?"USER_CLOSED_INBOX_THREAD_LIST_VERIFY_DEVICE_NUX":"USER_CLOSED_FB_THREAD_LIST_VERIFY_DEVICE_NUX";N(e),o("MWChatEncryptedBackupsLogging").cancelFlow({cancelEndPoint:"thread_list_nux",event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent}),B()},B=function(){u(),l()},n[16]=C,n[17]=l,n[18]=u,n[19]=N,n[20]=O,n[21]=B):(O=n[20],B=n[21]),!T&&!D&&!x)return a;var W;n[22]===Symbol.for("react.memo_cache_sentinel")?(W=s._(/*BTDS*/"Chat history is missing"),n[22]=W):W=n[22];var q=W,U;n[23]!==x||n[24]!==d||n[25]!==T||n[26]!==$?(U=d&&x?s._(/*BTDS*/"Restore now"):T?s._(/*BTDS*/"Enter PIN"):$?s._(/*BTDS*/"Restore now"):s._(/*BTDS*/"Enter 40-character code"),n[23]=x,n[24]=d,n[25]=T,n[26]=$,n[27]=U):U=n[27];var V;n[28]!==B||n[29]!==F||n[30]!==b||n[31]!==h?(V=function(){F(),h({onDismissUpsell:B,source:b})},n[28]=B,n[29]=F,n[30]=b,n[31]=h,n[32]=V):V=n[32];var H;n[33]!==U||n[34]!==V?(H={label:U,onPress:V,testid:"mw-encrypted-backups-in-thread-verify-device-nux-verify-now-button"},n[33]=U,n[34]=V,n[35]=H):H=n[35];var G;n[36]!==x||n[37]!==d||n[38]!==T||n[39]!==$?(G=d&&x?s._(/*BTDS*/"Send a one-time code to restore your chat history"):T?s._(/*BTDS*/"Enter your PIN to see messages that aren't loaded on this device."):$?s._(/*BTDS*/"Send a one-time code to restore your chat history"):s._(/*BTDS*/"Enter your 40-character code to see messages that aren't loaded on this device."),n[36]=x,n[37]=d,n[38]=T,n[39]=$,n[40]=G):G=n[40];var z;n[41]===Symbol.for("react.memo_cache_sentinel")?(z={props:{src:r("getMWEBRestoreQPCautionCircleProperties")()},type:"image"},n[41]=z):z=n[41];var j;return n[42]!==O||n[43]!==w||n[44]!==H||n[45]!==G?(j=c.jsx(r("MWXQPCard.react"),{addOnPrimary:H,body:G,headline:q,icon:z,onClose:O,ref:w}),n[42]=O,n[43]=w,n[44]=H,n[45]=G,n[46]=j):j=n[46],j}l.default=f}),226);
__d("MWEncryptedBackupsThreadListRestoreQPWrapper.react",["CometRelay","EncryptedBackupsSupportedPlatformUtils","MWEBEntrypointsKillswitch.enum","MWEBRestoreQPWithPin.react","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsThreadListPersistentBanner.react","MWEncryptedBackupsThreadListQPWrapper.react","MWEncryptedBackupsThreadListRestoreQPWrapper_query.graphql","MWEncryptedBackupsThreadListRestoreQPWrapper_viewer.graphql","MWEncryptedBackupsVerifyDeviceNux.react","react","react-compiler-runtime","useHasRestoreInterstitialSoftblockBeenDismissed","useMWEBBackupState","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react"));function m(t){var a=o("react-compiler-runtime").c(32),i=t.backupState,l=t.children,s=t.currentSupportedPlatform,c=t.fragmentKey,m=t.setHasDismissedQp,p=t.setHasDismissedQpWithPin,_=o("CometRelay").useFragment(e!==void 0?e:e=n("MWEncryptedBackupsThreadListRestoreQPWrapper_viewer.graphql"),c),f=(u||(u=r("useReStore")))(),g=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),h=g.virtualDeviceInfo,y=s===o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM,C=h.doesUserHaveOtcEligibleDevices,b=o("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),v;a[0]!==i||a[1]!==b?(v={backupState:i,isCooldownOrLockOutState:b},a[0]=i,a[1]=b,a[2]=v):v=a[2];var S=r("useHasRestoreInterstitialSoftblockBeenDismissed")(v);if(!C&&b&&S)return null;if(b&&S){var R;a[3]!==m?(R=function(){m(!0)},a[3]=m,a[4]=R):R=a[4];var L;a[5]!==f?(L=function(){return o("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:f,upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_JEWEL})},a[5]=f,a[6]=L):L=a[6];var E;return a[7]!==l||a[8]!==s||a[9]!==R||a[10]!==L?(E=d.jsx(r("MWEncryptedBackupsVerifyDeviceNux.react"),{children:l,currentSupportedPlatform:s,setClosed:R,setDismissed:L}),a[7]=l,a[8]=s,a[9]=R,a[10]=L,a[11]=E):E=a[11],E}else if(y&&h.vestaClientID!=null&&r("MWEBRestoreQPWithPin.react")){var k;a[12]!==p?(k=function(){p(!0)},a[12]=p,a[13]=k):k=a[13];var I;a[14]!==f?(I=function(){return o("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:f,upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_WITH_PIN_JEWEL})},a[14]=f,a[15]=I):I=a[15];var T;return a[16]!==s||a[17]!==_||a[18]!==k||a[19]!==I||a[20]!==h.doesUserHaveOtcEligibleDevices||a[21]!==h.vestaClientID?(T=d.jsx(r("MWEBRestoreQPWithPin.react"),{clientID:h.vestaClientID,currentSupportedPlatform:s,doesUserHaveOtcEligibleDevices:h.doesUserHaveOtcEligibleDevices,fragmentKey:_,setClosed:k,setDismissed:I}),a[16]=s,a[17]=_,a[18]=k,a[19]=I,a[20]=h.doesUserHaveOtcEligibleDevices,a[21]=h.vestaClientID,a[22]=T):T=a[22],T}else{var D;a[23]!==m?(D=function(){m(!0)},a[23]=m,a[24]=D):D=a[24];var x;a[25]!==f?(x=function(){return o("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:f,upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_JEWEL})},a[25]=f,a[26]=x):x=a[26];var $;return a[27]!==l||a[28]!==s||a[29]!==D||a[30]!==x?($=d.jsx(r("MWEncryptedBackupsVerifyDeviceNux.react"),{children:l,currentSupportedPlatform:s,setClosed:D,setDismissed:x}),a[27]=l,a[28]=s,a[29]=D,a[30]=x,a[31]=$):$=a[31],$}}function p(e){var t=o("react-compiler-runtime").c(12),a=e.children,i=e.currentSupportedPlatform,l=e.fragmentKey,c=e.hasDismissedQps,p=e.setHasDismissedBanner,_=e.setHasDismissedQp,f=e.setHasDismissedQpWithPin,g=e.trigger,h=o("CometRelay").useFragment(s!==void 0?s:s=n("MWEncryptedBackupsThreadListRestoreQPWrapper_query.graphql"),l),y=(u||(u=r("useReStore")))(),C;t[0]===Symbol.for("react.memo_cache_sentinel")?(C={entrypoint:r("MWEBEntrypointsKillswitch.enum").INBOX_THREADLIST},t[0]=C):C=t[0];var b=r("useMWEBBackupState")(C),v;return t[1]!==b||t[2]!==a||t[3]!==i||t[4]!==(h==null?void 0:h.viewer)||t[5]!==y||t[6]!==c||t[7]!==p||t[8]!==_||t[9]!==f||t[10]!==g?(v=c?d.jsx(o("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsThreadListQPWrapper,{trigger:g,children:d.jsx(r("MWEncryptedBackupsThreadListPersistentBanner.react"),{onDismissUpsell:function(){p(!0),o("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:y,upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.PERSISTENT_BANNER_JEWEL})}})}):d.jsx(o("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsThreadListQPWrapper,{trigger:g,children:d.jsx(m,{backupState:b,children:a,currentSupportedPlatform:i,fragmentKey:h==null?void 0:h.viewer,setHasDismissedQp:_,setHasDismissedQpWithPin:f})}),t[1]=b,t[2]=a,t[3]=i,t[4]=h==null?void 0:h.viewer,t[5]=y,t[6]=c,t[7]=p,t[8]=_,t[9]=f,t[10]=g,t[11]=v):v=t[11],v}l.default=p}),98);
__d("VestaServerGraphQLLoginProviderBeginLoginMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9747954008656745"}),null);
__d("VestaServerGraphQLLoginProviderBeginLoginMutation.graphql",["VestaServerGraphQLLoginProviderBeginLoginMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"begin_login_request",variableName:"input"}],concreteType:"VestaBeginLoginResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_begin_login",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_l2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_l2_sig",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"VestaServerGraphQLLoginProviderBeginLoginMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"VestaServerGraphQLLoginProviderBeginLoginMutation",selections:t},params:{id:n("VestaServerGraphQLLoginProviderBeginLoginMutation_facebookRelayOperation"),metadata:{},name:"VestaServerGraphQLLoginProviderBeginLoginMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("VestaServerGraphQLLoginProviderFinishLoginMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9611648865601020"}),null);
__d("VestaServerGraphQLLoginProviderFinishLoginMutation.graphql",["VestaServerGraphQLLoginProviderFinishLoginMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"finish_login_request",variableName:"input"}],concreteType:"VestaFinishLoginResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_finish_login",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_login_payload",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_success",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"VestaServerGraphQLLoginProviderFinishLoginMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"VestaServerGraphQLLoginProviderFinishLoginMutation",selections:t},params:{id:n("VestaServerGraphQLLoginProviderFinishLoginMutation_facebookRelayOperation"),metadata:{},name:"VestaServerGraphQLLoginProviderFinishLoginMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("VestaServerGraphQLLoginProviderInitQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9285801411531503"}),null);
__d("VestaServerGraphQLLoginProviderInitQuery.graphql",["VestaServerGraphQLLoginProviderInitQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"request"}],t=[{alias:null,args:[{kind:"Variable",name:"vesta_init_request",variableName:"request"}],concreteType:"VestaInitIqResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_login_init",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_rsa_pub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_rsa_pub_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_pub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_pub_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_ed25519_pub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_ed25519_pub_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"VestaServerGraphQLLoginProviderInitQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"VestaServerGraphQLLoginProviderInitQuery",selections:t},params:{id:n("VestaServerGraphQLLoginProviderInitQuery_facebookRelayOperation"),metadata:{},name:"VestaServerGraphQLLoginProviderInitQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("VestaServerGraphQLLoginProvider",["E2EEBackupUtil","RelayHooks","RelayModern","VestaServerGraphQLLoginProviderBeginLoginMutation.graphql","VestaServerGraphQLLoginProviderFinishLoginMutation.graphql","VestaServerGraphQLLoginProviderInitQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;async function c(t,r){var a=r.environment,i=await o("RelayHooks").fetchQuery(a,e!==void 0?e:e=n("VestaServerGraphQLLoginProviderInitQuery.graphql"),{request:{fbid:t.clientId,product_use_case:t.productUseCase,vesta_client_api_version:6}}).toPromise(),l=i==null?void 0:i.fbid_based_auth_layer_vesta_login_init,s=l==null?void 0:l.base64url_encoded_island_rsa_pub,u=l==null?void 0:l.base64url_encoded_island_rsa_pub_signature,c=l==null?void 0:l.base64url_encoded_opaque_pub,d=l==null?void 0:l.base64url_encoded_opaque_pub_signature,m=l==null?void 0:l.base64url_encoded_island_ed25519_pub,p=l==null?void 0:l.base64url_encoded_island_ed25519_pub_signature,_=l==null?void 0:l.is_registered,f=l==null?void 0:l.attempts_remaining;if(s!=null&&u!=null&&c!=null&&d!=null&&m!=null&&p!=null&&_!=null){var g;return{islandRsaPub:(g=o("E2EEBackupUtil")).decodeBase64Url(s),islandRsaPubSig:g.decodeBase64Url(u),opaquePub:g.decodeBase64Url(c),opaquePubSig:g.decodeBase64Url(d),islandEd25519Pub:g.decodeBase64Url(m),islandEd25519PubSig:g.decodeBase64Url(p),isRegistered:_,loginAttemptsRemaining:f}}throw new Error("GraphQL Response is Null")}function d(e,t){var r=t.environment,a=s!==void 0?s:s=n("VestaServerGraphQLLoginProviderBeginLoginMutation.graphql"),i={input:{fbid:e.clientId,product_use_case:e.productUseCase,base64url_encoded_opaque_l1:o("E2EEBackupUtil").encodeBase64Url(e.opaqueL1)}};return new Promise(function(e,t){o("RelayModern").commitMutation(r,{mutation:a,variables:i,onCompleted:function(r){var n=r.fbid_based_auth_layer_vesta_begin_login,a=n==null?void 0:n.base64url_encoded_opaque_l2,i=n==null?void 0:n.base64url_encoded_opaque_l2_sig;if(a!=null&&i!=null){e({opaqueL2:o("E2EEBackupUtil").decodeBase64Url(a),opaqueL2Sig:o("E2EEBackupUtil").decodeBase64Url(i)});return}t(new Error("GraphQL Response is Null"))},onError:function(n){t(n)}})})}function m(e,t){var r=t.environment,a=t.updater;return new Promise(function(t,i){o("RelayModern").commitMutation(r,{mutation:u!==void 0?u:u=n("VestaServerGraphQLLoginProviderFinishLoginMutation.graphql"),variables:{input:{fbid:e.clientId,product_use_case:e.productUseCase,base64url_encoded_opaque_l3:o("E2EEBackupUtil").encodeBase64Url(e.opaqueL3)}},onCompleted:function(n){var e=n.fbid_based_auth_layer_vesta_finish_login,r=e==null?void 0:e.base64url_encoded_login_payload,a=e==null?void 0:e.login_success,l=e==null?void 0:e.attempts_remaining;if(a!=null){t({loginSuccess:a,loginPayload:r==null?r:o("E2EEBackupUtil").decodeBase64Url(r),attemptsRemaining:l});return}i(new Error("GraphQL Response is Null"))},onError:function(t){i(t)},updater:a})})}l.initLogin=c,l.beginLogin=d,l.finishLogin=m}),98);
__d("mwEBAddDevice",["EBSMAPI","MAWCurrentUser","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsInitializeRestoreDeferred","QPLUserFlow","isInstamadilloEB"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.environment,n=e.onFailure,a=e.onInvalidRecoveryCode,i=e.onSuccess,l=e.recoveryCode,s=e.storage;return r("EBSMAPI").addDeviceWithRecoveryCode({environment:t,recoveryCode:l,userId:o("MAWCurrentUser").getID()}).then(function(e){e.success?(i(),r("isInstamadilloEB")()?r("QPLUserFlow").endSuccess(o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent):o("MWEncryptedBackupsInitializeRestoreDeferred").encryptedBackupsInitializeRestoreDeferred({db:s,onFailure:function(){},onSuccess:function(){}})):e.error==="INVALID_RECOVERY_CODE"?a():n(e.error)})}l.EBAddDevice=e}),98);
__d("vestaBackupSecretRestore",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("E2EEBackupSecretRestoreModule").__setRef("vestaBackupSecretRestore"),s=r("requireDeferred")("VestaServerGraphQLLoginProvider").__setRef("vestaBackupSecretRestore");async function u(t){var n=t.input,r=t.environment,o=await Promise.all([s.load(),e.load()]),a=o[0],i=a.beginLogin,l=a.finishLogin,u=a.initLogin,c=o[1].restoreBackupSecret;return c({beginLogin:i,finishLogin:l,initLogin:u},n,{environment:r})}l.default=u}),98);
__d("mwEBGetPINSecretFromVesta",["CometRelay","E2EEBackupCommon","FBLogger","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsSettingsDialogQuery.graphql","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","QPLUserFlow","getErrorSafe","promiseDone","vestaBackupSecretRestore"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){var t=e.addDevice,n=e.clientID,a=e.environment,i=e.getSourceFromContext,l=e.onSubmitPin,s=e.onSubmitPinFailure,u=e.onVestaSecretFetch,c=e.pinCode,d=e.productUseCase,m=e.setIsInProgress,p=e.setIsPinCodeIncorrect,_=e.setIsVestaError,f=e.startFlow;m(!0),l==null||l();var g=i();r("QPLUserFlow").addAnnotations(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{restore_type:"pin_code",source:g}});var h=new TextDecoder,y;f({additionalAnnotations:{device_type:"HSM"},event:o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:r("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH,source:g});try{r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"vesta_login_begin"),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"PIN_CODE_RESTORE_SUBMIT"),y=h.decode(await r("vestaBackupSecretRestore")({environment:a,input:{clientId:n,productUseCase:d,vestaAccountPin:c}})),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"vesta_login_success")}catch(e){var C=r("getErrorSafe")(e),b=typeof e=="object"&&e!=null&&"errorType"in e&&typeof e.errorType=="string"?e.errorType:void 0;if(s==null||s(),r("promiseDone")(o("CometRelay").fetchQuery(a,r("MWChatEncryptedBackupsSettingsDialogQuery.graphql"),{}).toPromise()),b===o("E2EEBackupCommon").BackupErrorType.INVALID_PASSWORD)m(!1),p(!0),o("MWChatEncryptedBackupsLogging").endFailure({errorName:"incorrect_pin_code",event:o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityKey:r("MWEBODSEntityKey.enum").INCORRECT_PIN_CODE,odsEntityName:r("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),r("QPLUserFlow").markError(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"incorrect_pin_code");else{o("MWChatEncryptedBackupsLogging").endFailure({annotations:{string:{errorMessage:C.message,errorType:b}},errorName:"vesta_login_failure",event:o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:r("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),r("QPLUserFlow").markError(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"pin_code_error"),m(!1),_(!0);var v="Error when restoring using PIN: "+C.message;r("FBLogger")("wmi_eb").mustfix(v)}throw e}y!=null&&(u==null||u(),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"add_device_begin"),t(y,c))}l.default=e}),98);
__d("updateUpsellsStateInRelayStore",["CometRelay","FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.environment,n=e.updateValue;o("CometRelay").commitLocalUpdate(t,function(e){var t=e.getRoot().getLinkedRecord("viewer");if(t==null){r("FBLogger")("wmi_eb").mustfix("[labyrinth][upsells] A viewer record does not exist when updating upsell state.");return}t.setValue(n,"is_eb_restore_upsells_dismissed")})}l.default=e}),98);/*FB_PKG_DELIM*/
__d("CrossWindowEventEmitter",["CacheStorage","EventEmitter","cr:8958"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var o;return o=e.call(this)||this,o.$CrossWindowEventEmitter$p_2=t,o.$CrossWindowEventEmitter$p_1=new(r("CacheStorage"))("localstorage",t+":"),o.$CrossWindowEventEmitter$p_1.addValueChangeCallback(function(t,r,a){var i=t.split(":")[1],l;try{l=n("cr:8958").parse(a)}catch(e){l=void 0}if(l&&l.__v){var s;(s=e.prototype.emit).call.apply(s,[o,i].concat(l.__v))}}),o}babelHelpers.inheritsLoose(t,e);var o=t.prototype;return o.emit=function(n){for(var t,r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];this.emitRemote.apply(this,[n].concat(o)),(t=e.prototype.emit).call.apply(t,[this,n].concat(o))},o.emitRemote=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.$CrossWindowEventEmitter$p_1.set(t,n)},t})(r("EventEmitter"));l.default=e}),98);
__d("IrisSubscribeCheckerUtils",[],(function(t,n,r,o,a,i){"use strict";function e(){if(typeof window!="undefined"){var e,t=(e=window.location)==null?void 0:e.hostname;if(t==="m.facebook.com"||t==="mobile.facebook.com"||t==="mtouch.facebook.com")return!1}return!0}i.getIrisSubscribeCheckerInitialRunningState=e}),66);
__d("MqttEnvWebSocket",[],(function(t,n,r,o,a,i){"use strict";function e(e){return new WebSocket(e)}i.createWebSocket=e}),66);
__d("MqttEnv",["MqttEnvWebSocket","clearTimeout","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.freeze({mqtt_waterfall_log_client_sampling:1,mqtt_ws_polling_enabled:3,mqtt_lp_use_fetch:9,mqtt_fast_lp:11,mqtt_lp_no_delay:12,mqtt_enable_publish_over_polling:13,mqttweb_global_connection_counter:15}),s=(function(){function e(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null,this.$10=null,this.$11=null}var t=e.prototype;return t.random=function(){return this.$1!=null?this.$1():Math.random()},t.isUserLoggedInNow=function(){return this.$2!=null?this.$2():!0},t.setIsUserLoggedInNow=function(t){this.$2=t},t.clearTimeout=function(t){if(this.$3!=null){this.$3(t);return}r("clearTimeout")(t)},t.setTimeout=function(t,n){for(var e=arguments.length,o=new Array(e>2?e-2:0),a=2;a<e;a++)o[a-2]=arguments[a];return this.$4!=null?this.$4.apply(null,arguments):r("setTimeout").apply(null,arguments)},t.getLoggerInstance=function(){return this.$5!=null?this.$5():u.getInstance()},t.genGk=function(t){return this.$6!=null?this.$6(t):!1},t.createSocket=function(t,n){return this.$7!=null?this.$7(t,n):o("MqttEnvWebSocket").createWebSocket(t)},t.scheduleCallback=function(t){return this.$8!=null?this.$8(t):t()},t.scheduleLoggingCallback=function(t){return this.$9!=null?this.$9(t):t()},t.configRead=function(t,n){return this.$10!=null?this.$10(t,n):n},t.configWrite=function(t,n){this.$11!=null&&this.$11(t,n)},t.initialize=function(t,n,r,o,a,i,l,s,u,c,d){this.$1=t,this.$2=n,this.$3=r,this.$4=o,this.$5=a,this.$6=i,this.$7=l,this.$8=s,this.$9=u,this.$10=c,this.$11=d},e})(),u=(function(){function e(){}e.getInstance=function(){return new e};var t=e.prototype;return t.setAppId=function(t){},t.eventLogConnect=function(t){},t.eventLogPull=function(t){},t.eventLogPullFinish=function(t){},t.eventLogDisconnect=function(t){},t.eventLogOutgoingPublish=function(t){},t.eventLogIncomingPublish=function(t){},t.eventLogPublishTimeout=function(t){},t.eventLogMiscellaneousError=function(t){},t.logIfLoggedOut=function(){},t.logError=function(t){},t.logErrorWarn=function(t){},t.logWarn=function(t){},t.debugTrace=function(t){},t.bumpCounter=function(t){},t.getBrowserConnectivity=function(){return!0},e})(),c=new s;function d(e){c.setIsUserLoggedInNow(e)}l.MqttGkNames=e,l.Env=c,l.setIsUserLoggedInNow=d}),98);
__d("IrisSubscribeChecker",["IrisSubscribeCheckerUtils","MqttEnv"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=o("MqttEnv").Env.getLoggerInstance(),this.$2=null,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=o("IrisSubscribeCheckerUtils").getIrisSubscribeCheckerInitialRunningState(),this.$7=0,this.$8=e}var t=e.prototype;return t.start=function(){this.$6=!0},t.stop=function(){this.$6=!1,this.$9()},t.onConnectAttempt=function(){},t.onConnectFailure=function(){this.$9()},t.onConnected=function(){var e=this;this.$7++,this.$9(),this.$3=!1,this.$4=!1,this.$5=!1,this.$6&&(this.$2=o("MqttEnv").Env.setTimeout(function(){e.$10()},8e3))},t.onConnectSuccess=function(){},t.onConnectionLost=function(){this.$9()},t.onConnectionDisconnect=function(){},t.onSubscribe=function(t){t==="/t_ms"&&(this.$3=!0)},t.onUnsubscribe=function(t){},t.onPublish=function(t){(t==="/messenger_sync_get_diffs"||t==="/messenger_sync_create_queue")&&(this.$4=!0,this.$3&&(this.$5=!0,this.$9()))},t.onMessage=function(t){},t.onWSFatal=function(){},t.$9=function(){this.$2&&(o("MqttEnv").Env.clearTimeout(this.$2),this.$2=null)},t.$10=function(){if(this.$4===!1){var e=this.$7==1?"no_iris_session_initialConnect":"no_iris_session";this.$1.bumpCounter(e),this.$8()?this.$1.bumpCounter(e+".withProvider"):this.$1.bumpCounter(e+".withoutProvider"),this.$3===!0?this.$1.bumpCounter(e+".withTopicSubscribe"):this.$1.bumpCounter(e+".withoutTopicSubscribe")}this.$3===!1&&this.$1.bumpCounter("no_iris_topic_subscribe"),this.$3===!0&&this.$4===!0&&this.$5===!1&&this.$1.bumpCounter("session_before_topic_subscribe")},e})();l.default=e}),98);
__d("MqttGlobalStreamCounter",["CrossWindowEventEmitter","MqttEnv","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){var e=this;this.isTabClosed=!1,this.otherTabs=new Map,this.thisTab={totalConnectionStreams:0},this.broadcastChannel=new(r("CrossWindowEventEmitter"))("MqttGlobalStreamCounter"),this.broadcastChannel.addListener("count-updated",function(t){var n=JSON.parse(String(t)),r=!1;e.otherTabs.has(n.key)||(r=!0),n.event==="DELETE"?e.otherTabs.delete(n.key):n.event==="UPDATE"&&n.value!=null&&(e.otherTabs.set(n.key,n.value),r&&e.$1())}),this.tabID=r("uuidv4")()}var t=e.prototype;return t.streamRequested=function(){this.thisTab.totalConnectionStreams++,this.$1()},t.streamClosed=function(){this.thisTab.totalConnectionStreams>0&&(this.thisTab.totalConnectionStreams--,this.$1())},t.tabClosed=function(){if(!this.isTabClosed){this.isTabClosed=!0;var e={key:this.tabID,event:"DELETE"};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(e))}},t.getGlobalState=function(){var e={totalConnectionStreams:this.thisTab.totalConnectionStreams};return this.otherTabs.forEach(function(t){e.totalConnectionStreams+=t.totalConnectionStreams}),e},t.$1=function(){var e={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(e))},t.isEnabled=function(){return!0},e})(),s=o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqttweb_global_connection_counter)?new e:{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{totalConnectionStreams:-1}},isEnabled:function(){return!1}},u=function(){return s};l.getInstance=u}),98);
__d("MqttAnalyticsHook",["MqttEnv","MqttGlobalStreamCounter"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=o("MqttEnv").Env.getLoggerInstance(),this.$2=o("MqttGlobalStreamCounter").getInstance(),this.$3=0,this.$4=0,this.$5=0,this.$6=0,this.$1.bumpCounter("session_start"),o("MqttEnv").Env.isUserLoggedInNow()||this.$1.bumpCounter("session_start.logout")}var t=e.prototype;return t.onConnectAttempt=function(){this.$1.bumpCounter("ws_connect_attempt"),this.$2.streamRequested()},t.onConnectFailure=function(){this.$4++,this.$1.bumpCounter("ws_connect_failure"),this.$1.debugTrace("connect","Connect failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()},t.onConnected=function(){this.$1.bumpCounter("ws_connect_connected")},t.onConnectSuccess=function(){this.$3===0&&this.$1.bumpCounter("ws_connect_first_success"),this.$3++,this.$1.bumpCounter("ws_connect_success")},t.onConnectionLost=function(){this.$1.bumpCounter("ws_disconnect")},t.onConnectionDisconnect=function(){this.$2.streamClosed()},t.onSubscribe=function(t){},t.onUnsubscribe=function(t){},t.onPublish=function(t){this.$1.bumpCounter("ws_publish."+t)},t.onMessage=function(t){this.$1.bumpCounter("message_arrived."+t)},t.onWSFatal=function(){this.$1.bumpCounter("ws_fatal")},t.onPollRequestSent=function(){this.$1.bumpCounter("polling_request_send"),this.$2.streamRequested()},t.onPollRequestSuccess=function(){this.$1.bumpCounter("polling_request_succeed"),this.$5===0&&this.$1.bumpCounter("polling_first_success"),this.$5++},t.onPollResponse=function(t){this.$1.bumpCounter("lp.message_arrived."+t)},t.onPollFinish=function(){this.$1.bumpCounter("polling_request_finish"),this.$2.streamRequested()},t.onPollRequestFailed=function(t){this.$1.bumpCounter("polling_request_failed"),this.$1.bumpCounter("polling_request_failed_"+t),this.$6++,this.$1.debugTrace("PollRequest","Request failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()},t.onPollShutdownAbort=function(){this.$2.streamClosed()},t.onTabClose=function(){this.$2.tabClosed()},e})();l.default=e}),98);
__d("MqttConnectionHookCollection",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Set}var t=e.prototype;return t.addHook=function(t){this.$1.add(t)},t.removeHook=function(t){this.$1.delete(t)},t.onConnectAttempt=function(){this.$1.forEach(function(e){e.onConnectAttempt==null||e.onConnectAttempt()})},t.onConnectFailure=function(){this.$1.forEach(function(e){e.onConnectFailure==null||e.onConnectFailure()})},t.onConnected=function(){this.$1.forEach(function(e){e.onConnected==null||e.onConnected()})},t.onConnectSuccess=function(){this.$1.forEach(function(e){e.onConnectSuccess==null||e.onConnectSuccess()})},t.onConnectionLost=function(){this.$1.forEach(function(e){e.onConnectionLost==null||e.onConnectionLost()})},t.onConnectionDisconnect=function(){this.$1.forEach(function(e){e.onConnectionDisconnect==null||e.onConnectionDisconnect()})},t.onSubscribe=function(t){this.$1.forEach(function(e){e.onSubscribe==null||e.onSubscribe(t)})},t.onUnsubscribe=function(t){this.$1.forEach(function(e){e.onUnsubscribe==null||e.onUnsubscribe(t)})},t.onPublish=function(t){this.$1.forEach(function(e){e.onPublish==null||e.onPublish(t)})},t.onMessage=function(t){this.$1.forEach(function(e){e.onMessage==null||e.onMessage(t)})},t.onWSFatal=function(){this.$1.forEach(function(e){e.onWSFatal==null||e.onWSFatal()})},e})();i.default=e}),66);
__d("MqttProtocolUtils",["MqttEnv"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){if(e==null)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function s(e,t){var n=t,r=0,o=1,a;do{if(n===e.length)return null;a=e[n++],r+=(a&127)*o,o*=128}while((a&128)!==0);return{offset:n,value:r}}function u(e){for(var t=e,n=new Array(1),r=0;r<4;r++){var o=t%128;if(t>>=7,t>0)n[r]=o|128;else{n[r]=o;break}}return n}function c(e,t,n){var r=n;return t[r++]=e>>8,t[r++]=e%256,r}function d(e,t){return 256*e[t]+e[t+1]}function m(e){for(var t=0,n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);o<128?t+=1:o<2048?t+=2:o>=55296&&o<=56319?(t+=4,n++):t+=3}return t}function p(e,t,n,r){var o=c(t,n,r);return _(e,n,o),o+t}function _(e,t,n){for(var r=n,o=0,a=e.length;o<a;o++){var i=e.charCodeAt(o);i<128?t[r++]=i:i<2048?(t[r++]=192|i>>6,t[r++]=128|i&63):i<55296||i>=57344?(t[r++]=224|i>>12,t[r++]=128|i>>6&63,t[r++]=128|i&63):(i=65536+((i&1023)<<10|e.charCodeAt(++o)&1023),t[r++]=240|i>>18,t[r++]=128|i>>12&63,t[r++]=128|i>>6&63,t[r++]=128|i&63)}}function f(e,t,n){for(var r=[],o=t,a=0;o<t+n;){var i=e[o++];if(i<128)r[a++]=String.fromCharCode(i);else if(i>191&&i<224){var l=e[o++];r[a++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){var s=e[o++],u=e[o++],c=e[o++],d=((i&7)<<18|(s&63)<<12|(u&63)<<6|c&63)-65536;r[a++]=String.fromCharCode(55296+(d>>10)),r[a++]=String.fromCharCode(56320+(d&1023))}else{var m=e[o++],p=e[o++];r[a++]=String.fromCharCode((i&15)<<12|(m&63)<<6|p&63)}}return r.join("")}var g=(function(){function e(e,t,n,r){this.$1=e,this.$2=t,this.$5=n,this.$6=r,this.$4=!1}var t=e.prototype;return t.$7=function(){var e=this;this.$4?(this.$4=!1,this.$5(),this.$3=o("MqttEnv").Env.setTimeout(function(){e.$7()},this.$2()*1e3)):this.$6()},t.reset=function(){var e=this;this.$4=!0,this.$3&&(o("MqttEnv").Env.clearTimeout(this.$3),this.$3=null);var t=this.$1()*1e3;t>0&&(this.$3=o("MqttEnv").Env.setTimeout(function(){e.$7()},t))},t.cancel=function(){this.$3&&(o("MqttEnv").Env.clearTimeout(this.$3),this.$3=null)},e})();l.UTF8Length=m,l.convertStringToUTF8=_,l.concatBuffers=e,l.decodeMultiByteInt=s,l.convertUTF8ToString=f,l.encodeMultiByteInt=u,l.writeUInt16BE=c,l.readUInt16BE=d,l.writeString=p,l.Pinger=g}),98);
__d("MqttUtils",["MqttEnv"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return u(e,"sid",t.toString())}function s(e,t){var n=e;return t.forEach(function(e,t){n=u(n,t,e)}),n}function u(e,t,n){return e.indexOf("?")>0?e+"&"+t+"="+n:e+"?"+t+"="+n}function c(){return Math.floor(o("MqttEnv").Env.random()*Number.MAX_SAFE_INTEGER)}function d(e,t,n){var r=arguments.length>1?e.then(t,n):e;r.then(null,function(e){o("MqttEnv").Env.setTimeout(function(){throw e instanceof Error?e:new Error("promiseDone")},0)})}function m(e,t,n,r){var a=!1;o("MqttEnv").Env.setTimeout(function(){a||(a=!0,n(new Error("promise timeout")))},r),d(e,function(e){a||(a=!0,t(e))},function(e){a||(a=!0,n(e))})}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0;return e.replace(/%s/g,function(){return String(n[o++])})}l.endpointWithSessionId=e,l.endpointWithExtraParameters=s,l.endpointWithExtraParameter=u,l.generateSessionId=c,l.promiseDone=d,l.promiseDoneWithTimeout=m,l.sprintf=p}),98);
__d("MqttProtocolCodec",["MqttProtocolUtils","MqttUtils","err"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.freeze({CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14}),s=[0,6,77,81,73,115,100,112,3];function u(t,n){var a=n,i=a,l=t[a],s=l>>4;a+=1;var u=o("MqttProtocolUtils").decodeMultiByteInt(t,a);if(u==null)return{position:i,wireMessage:null};a=u.offset;var c=a+u.value;if(c>t.length)return{position:i,wireMessage:null};var d;switch(s){case e.CONNACK:{var p=t[a++],h=!!(p&1),y=t[a++];d=new f(h,y);break}case e.PUBLISH:{var v=l&15,S=v>>1&3,R=o("MqttProtocolUtils").readUInt16BE(t,a);a+=2;var L=o("MqttProtocolUtils").convertUTF8ToString(t,a,R);a+=R;var E=null;S===1&&(E=o("MqttProtocolUtils").readUInt16BE(t,a),a+=2);var k=C.createWithBytes(t.subarray(a,c)),I=(v&1)===1,T=(v&8)===8;d=new b(L,k,S,E,I,T);break}case e.PINGREQ:d=new m("PINGREQ");break;case e.PINGRESP:d=new m("PINGRESP");break;case e.PUBACK:case e.UNSUBACK:{var D=o("MqttProtocolUtils").readUInt16BE(t,a);d=new g(s===e.PUBACK?"PUBACK":"UNSUBACK",D);break}case e.SUBACK:{var x=o("MqttProtocolUtils").readUInt16BE(t,a);a+=2;var $=t.subarray(a,c);d=new _(x,$);break}default:throw r("err")(o("MqttUtils").sprintf("Invalid MQTT message type %s.",s))}return{position:c,wireMessage:d}}function c(e){for(var t=[],n=0;n<e.length;){var r=u(e,n),o=r.wireMessage;if(n=r.position,o)t.push(o);else break}var a=null;return n<e.length&&(a=e.subarray(n)),{messages:t,remaining:a}}var d=(function(){function t(t){this.messageType=e[t]}var n=t.prototype;return n.encode=function(){throw new TypeError("Cannot abstract class WireMessage")},t})(),m=(function(e){function t(t){return e.call(this,t)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=new ArrayBuffer(2),t=new Uint8Array(e);return t[0]=(this.messageType&15)<<4,e},t})(d),p=(function(e){function t(){return e.call(this,"DISCONNECT")||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=(this.messageType&15)<<4,t=new ArrayBuffer(2),n=new Uint8Array(t);return n[0]=e,n.set(o("MqttProtocolUtils").encodeMultiByteInt(0),1),t},t})(d),_=(function(e){function t(t,n){var r;return r=e.call(this,"SUBACK")||this,r.messageIdentifier=t,r.returnCode=n,r}return babelHelpers.inheritsLoose(t,e),t})(d),f=(function(e){function t(t,n){var r;return r=e.call(this,"CONNACK")||this,r.sessionPresent=t,r.returnCode=n,r}return babelHelpers.inheritsLoose(t,e),t})(d),g=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.messageIdentifier=n,r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=(this.messageType&15)<<4,t=2,n=o("MqttProtocolUtils").encodeMultiByteInt(t),r=n.length+1,a=new ArrayBuffer(t+r),i=new Uint8Array(a);return i[0]=e,i.set(n,1),r=o("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,i,r),a},t})(d),h=(function(e){function t(t,n){var r;return r=e.call(this,"CONNECT")||this,r.clientId=t,r.connectOptions=n,r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e,t=(this.messageType&15)<<4,n=s.length+3;n+=(e=o("MqttProtocolUtils")).UTF8Length(this.clientId)+2,n+=e.UTF8Length(this.connectOptions.userName)+2;var r=e.encodeMultiByteInt(n),a=new ArrayBuffer(1+r.length+n),i=new Uint8Array(a);i[0]=t;var l=1;i.set(r,1),l+=r.length,i.set(s,l),l+=s.length;var u=130;return i[l++]=u,l=e.writeUInt16BE(this.connectOptions.getKeepAliveIntervalSeconds(),i,l),l=e.writeString(this.clientId,e.UTF8Length(this.clientId),i,l),l=e.writeString(this.connectOptions.userName,e.UTF8Length(this.connectOptions.userName),i,l),a},t})(d),y=(function(t){function n(e,n,r,a){var i;if(i=t.call(this,e)||this,i.topic=n,r<0&&r>1||r===1&&a==null)throw new TypeError(o("MqttUtils").sprintf("Argument Invalid. qos: %s messageType: %s.",r,e));return i.qos=r,i.messageIdentifier=a,i}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.encode=function(){var t=(this.messageType&15)<<4;t|=2;var n=o("MqttProtocolUtils").UTF8Length(this.topic),r=2+n+2;this.messageType===e.SUBSCRIBE&&(r+=1);var a=o("MqttProtocolUtils").encodeMultiByteInt(r),i=new ArrayBuffer(1+a.length+r),l=new Uint8Array(i);l[0]=t;var s=1;return l.set(a,1),s+=a.length,this.messageIdentifier!=null&&(s=o("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,l,s)),s=o("MqttProtocolUtils").writeString(this.topic,n,l,s),this.messageType===e.SUBSCRIBE&&this.qos!=null&&(l[s++]=this.qos),i},n})(d),C=(function(){function e(e,t){this.payloadString=e,this.payloadBytes=t}e.createWithString=function(n){var t=new Uint8Array(new ArrayBuffer(o("MqttProtocolUtils").UTF8Length(n)));return o("MqttProtocolUtils").convertStringToUTF8(n,t,0),new e(n,t)},e.createWithBytes=function(n){var t=o("MqttProtocolUtils").convertUTF8ToString(n,0,n.length);return new e(t,n)};var t=e.prototype;return t.string=function(){return this.payloadString},t.bytes=function(){return this.payloadBytes},e})(),b=(function(e){function t(t,n,r,o,a,i){var l;if(l=e.call(this,"PUBLISH")||this,l.topic=t,l.payloadMessage=n,l.qos=r,l.messageIdentifier=o,l.retained=a!=null?a:!1,l.duplicate=i!=null?i:!1,l.qos===1&&l.messageIdentifier==null)throw new TypeError("Argument Invalid. messageIdentifier: null and qos: 1");return l}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=(this.messageType&15)<<4;this.duplicate&&(e|=8),e=e|=this.qos<<1,this.retained&&e!=1;var t=o("MqttProtocolUtils").UTF8Length(this.topic),n=t+2,r=this.qos===0?0:2;n+=r;var a=this.payloadMessage.bytes();n+=a.byteLength;var i=o("MqttProtocolUtils").encodeMultiByteInt(n),l=new ArrayBuffer(1+i.length+n),s=new Uint8Array(l);s[0]=e,s.set(i,1);var u=1+i.length;return u=o("MqttProtocolUtils").writeString(this.topic,t,s,u),this.qos!==0&&this.messageIdentifier!=null&&(u=o("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,s,u)),s.set(a,u),l},t})(d),v=C.createWithString,S=C.createWithBytes,R={Base:d,ConnAck:f,Connect:h,Disconnect:p,Ping:m,PubAckUnsubAck:g,Publish:b,Subscription:y};l.MESSAGE_TYPE=e,l.decodeMessage=u,l.decodeByteMessages=c,l.Message=C,l.createMessageWithString=v,l.createMessageWithBytes=S,l.WireMessage=R}),98);
__d("MqttTypes",[],(function(t,n,r,o,a,i){"use strict";var e=function(t,n,r){this.errorCode=t,this.errorName=n,this.errorMessage=r},l=Object.freeze({APP_DISCONNECT:new e(7,"APP_DISCONNECT","Disconnect initiated by app"),BROWSER_CLOSE:new e(11,"BROWSER_CLOSE","Browser closed"),CONNACK_FAILURE:new e(5,"CONNACK_FAILURE","Connection failure due to connack"),CONNECT_TIMEOUT:new e(4,"CONNECT_TIMEOUT","Connect timed out"),INVALID_DATA_TYPE:new e(3,"INVALID_DATA_TYPE","Received non-arraybuffer from socket."),PING_TIMEOUT:new e(6,"PING_TIMEOUT","Ping timeout"),RECONNECT:new e(10,"RECONNECT","Reconnecting"),SERVER_DISCONNECT:new e(8,"SERVER_DISCONNECT","Disconnect message sent my server"),SOCKET_CLOSE:new e(9,"SOCKET_CLOSE","Socket connection closed"),SOCKET_ERROR:new e(1,"SOCKET_ERROR","Socket error"),SOCKET_MESSAGE:new e(2,"SOCKET_MESSAGE","Unable to parse invalid socket message")}),s=function(t,n){this.mqttError=t,this.connAck=n},u=(function(e){function t(t,n,r){var o;return r===void 0&&(r=null),o=e.call(this,n)||this,o.isRecoverable=t,o.originalError=r,o}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.MqttError=e,i.MqttErrors=l,i.ConnectFailure=s,i.MqttChannelError=u}),66);
__d("MqttProtocolClient",["ErrorSerializer","MqttEnv","MqttProtocolCodec","MqttProtocolUtils","MqttTypes","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=20,s=6e4,u=(function(){function t(e){var t=this;this.$12=function(e,n,r){n===void 0&&(n=null),t.$9.bumpCounter("protocol.debug.disconnect.internal."+e.errorName),t.$9.bumpCounter("protocol.debug.disconnect.internal");var a=t.$5,i=t.$2,l=i.onConnectFailure,s=i.onConnectionLost;t.setConnected(!1),t.$14(),a?o("MqttEnv").Env.scheduleCallback(function(){s(e,n)}):o("MqttEnv").Env.scheduleCallback(function(){l(t.$11,new(o("MqttTypes")).ConnectFailure(e,r!=null?r:-1),n)})},this.$13=function(e){var n=t.$6;if(n==null)return t.$9.bumpCounter("protocol.socket_send.failed.socket_null.<message type>"),0;if(n.readyState!==n.OPEN)return t.$9.bumpCounter("protocol.socket_send.failed.socket_not_open.<message type>"),0;var r=e.encode(),o=r.byteLength;return n.send(r),o},this.$3=e,this.$2={getKeepAliveIntervalSeconds:function(){return 10},getKeepAliveTimeoutSeconds:function(){return 10},ignoreSubProtocol:!1,mqttVersion:3,onConnectFailure:function(t,n,r){},onConnection:function(){},onConnectionLost:function(t,n){},onConnectSuccess:function(t){},onMessageArrived:function(t,n,r){},onMessageDelivered:function(t){},userName:""},this.$1="mqttwsclient",this.$4=0,this.$5=!1,this.$9=o("MqttEnv").Env.getLoggerInstance(),this.$11=0}var n=t.prototype;return n.connect=function(n){var t=this;if(this.$5)throw r("err")("Invalid state: connect - already connected");this.$2=n,this.setConnected(!1),this.$7!=null&&(o("MqttEnv").Env.clearTimeout(this.$7),this.$7=null),this.$7=o("MqttEnv").Env.setTimeout(function(){t.$9.bumpCounter("protocol.error.connect.timeout"),t.$12(o("MqttTypes").MqttErrors.CONNECT_TIMEOUT)},e*1e3),this.$6=o("MqttEnv").Env.createSocket(this.$3),this.$6.binaryType="arraybuffer",this.$6.onopen=function(){t.setConnected(!0),t.$9.debugTrace("Socket-Open","MQTTProtocolClient Socket Open"),t.$11=t.$13(new(o("MqttProtocolCodec")).WireMessage.Connect(t.$1,n)),n.onConnection()},this.$6.onmessage=function(e){var n=e.data;if(!(n instanceof ArrayBuffer)){t.$9.bumpCounter("protocol.error.onmessage.type"),t.$12(o("MqttTypes").MqttErrors.INVALID_DATA_TYPE);return}try{var a=new Uint8Array(n);t.$10!=null&&(a=o("MqttProtocolUtils").concatBuffers(t.$10,a),t.$9.bumpCounter("protocol.debug.usingMessagesBuffer"),delete t.$10,t.$10=null);var i=o("MqttProtocolCodec").decodeByteMessages(a),l=i.messages;t.$10=i.remaining;for(var s=0;s<l.length;s++)t.handleMessage(l[s])}catch(e){var u=r("getErrorSafe")(e);t.$10=null,t.$9.logError(u,o("MqttTypes").MqttErrors.SOCKET_MESSAGE.errorMessage),t.$9.bumpCounter("protocol.error.onmessage.parse"),t.$12(o("MqttTypes").MqttErrors.SOCKET_MESSAGE,u.message)}},this.$6.onerror=function(e){t.$9.bumpCounter("protocol.error.socket"),t.$9.debugTrace("Socket-Error","MQTTProtocolClient Socket Error");var n=typeof e=="object"&&e!=null&&"error"in e&&!("message"in e)?e.error:e;t.$12(o("MqttTypes").MqttErrors.SOCKET_ERROR,r("ErrorSerializer").toReadableMessage(r("getErrorSafe")(n)))},this.$6.onclose=function(e){t.$9.bumpCounter("protocol.socket.close"),e.wasClean||t.$9.debugTrace("Socket-Unclean-Close","MQTTProtocolClient error code: "+e.code+" reason: "+e.reason),t.$12(o("MqttTypes").MqttErrors.SOCKET_CLOSE,e.code+" : "+e.reason)},this.$8!=null&&this.$8.cancel(),this.$8=new(o("MqttProtocolUtils")).Pinger(n.getKeepAliveIntervalSeconds,n.getKeepAliveTimeoutSeconds,this.$13.bind(this,new(o("MqttProtocolCodec")).WireMessage.Ping("PINGREQ")),function(e,n){return t.$12(o("MqttTypes").MqttErrors.PING_TIMEOUT,e,n)})},n.$14=function(){var e=this;this.setConnected(!1),this.$8!=null&&this.$8.cancel(),this.$7!=null&&(o("MqttEnv").Env.clearTimeout(this.$7),this.$7=null),this.$6!=null&&(this.$6.onopen=function(t){e.$9.debugTrace("Socket Open After Teardown","Socket opening after teardown")},this.$6.onmessage=function(e){},this.$6.onerror=function(e){},this.$6.onclose=function(t){e.$9.debugTrace("Socket Close After Teardown","code: "+t.code+", reason: "+t.reason)},this.$6.close(),this.$6=null),this.$2.onConnectSuccess=function(e){},this.$2.onConnectFailure=function(e,t){},this.$2.onConnection=function(){},this.$2.onConnectionLost=function(e){},this.$2.onMessageArrived=function(e,t,n){},this.$2.onMessageDelivered=function(e){}},n.disconnect=function(t){if(this.$6==null||this.$6.readyState!==this.$6.OPEN||!this.$5){this.$14();return}this.$13(new(o("MqttProtocolCodec")).WireMessage.Disconnect),this.$9.bumpCounter("protocol.debug.disconnect"),this.$12(t)},n.isConnected=function(){return this.$5},n.setConnected=function(t){this.$5=t},n.subscribe=function(t){if(!this.$5)throw this.$9.bumpCounter("protocol.error.subscribe.notconnected"),r("err")("Invalid state: subscribe - not connected");this.$9.bumpCounter("protocol.subscribe."+t);var e=new(o("MqttProtocolCodec")).WireMessage.Subscription("SUBSCRIBE",t,0,this.$15());this.$13(e)},n.unsubscribe=function(t){if(!this.$5)throw this.$9.bumpCounter("protocol.error.unsubscribe.notconnected"),r("err")("Invalid state: unsubscribe - not connected");this.$9.bumpCounter("protocol.unsubscribe."+t);var e=new(o("MqttProtocolCodec")).WireMessage.Subscription("UNSUBSCRIBE",t,0,this.$15());this.$13(e)},n.publish=function(t,n,r){return this.$16(t,o("MqttProtocolCodec").createMessageWithString(n),r)},n.publishBinary=function(t,n,r){return this.$16(t,o("MqttProtocolCodec").createMessageWithBytes(n),r)},n.$16=function(t,n,r){this.$5||this.$9.bumpCounter("protocol.error.publish.notconnected"),this.$9.bumpCounter("protocol.publish."+t);var e=this.$15(),a=new(o("MqttProtocolCodec")).WireMessage.Publish(t,n,r,e);return this.$13(a),e},n.$15=function(){return++this.$4===s&&(this.$4=1),this.$4},n.handleMessage=function(t){var e=this;switch(t.messageType){case o("MqttProtocolCodec").MESSAGE_TYPE.CONNACK:if(this.$7!=null&&(o("MqttEnv").Env.clearTimeout(this.$7),this.$7=null),t instanceof o("MqttProtocolCodec").WireMessage.ConnAck){var n=t;if(n.returnCode!==0){this.$9.bumpCounter("protocol.error.connack.invalidreturncode"),this.setConnected(!1),this.$12(o("MqttTypes").MqttErrors.CONNACK_FAILURE,"connack code="+n.returnCode,n.returnCode);return}o("MqttEnv").Env.scheduleCallback(function(){e.$2.onConnectSuccess(e.$11)}),this.$8!=null&&this.$8.reset()}break;case o("MqttProtocolCodec").MESSAGE_TYPE.PUBLISH:if(t instanceof o("MqttProtocolCodec").WireMessage.Publish){var a=t;o("MqttEnv").Env.scheduleCallback(function(){e.$2.onMessageArrived(a.topic,a.payloadMessage,a.qos)});var i=a.messageIdentifier;if(this.$9.bumpCounter("protocol.publish.received"),a.qos===1&&i!=null){var l=new(o("MqttProtocolCodec")).WireMessage.PubAckUnsubAck("PUBACK",i);this.$13(l)}}break;case o("MqttProtocolCodec").MESSAGE_TYPE.PUBACK:if(t instanceof o("MqttProtocolCodec").WireMessage.PubAckUnsubAck){var s=t,u=s.messageIdentifier;this.$9.bumpCounter("protocol.puback.received"),o("MqttEnv").Env.scheduleCallback(function(){e.$2.onMessageDelivered(u)})}break;case o("MqttProtocolCodec").MESSAGE_TYPE.PINGRESP:this.$8!=null&&this.$8.reset();break;case o("MqttProtocolCodec").MESSAGE_TYPE.DISCONNECT:this.$12(o("MqttTypes").MqttErrors.SERVER_DISCONNECT);break;case o("MqttProtocolCodec").MESSAGE_TYPE.SUBACK:this.$9.bumpCounter("protocol.suback.received");break;case o("MqttProtocolCodec").MESSAGE_TYPE.UNSUBACK:this.$9.bumpCounter("protocol.unsuback.received");break;default:this.$9.logError(r("err")("MqttProtocolClient: Received unhandled message type: "+t.messageType),"Received unhandled message type"),this.$9.bumpCounter("protocol.error.handlemessage.unsupportedtype");break}},t})();l.default=u}),98);
__d("MqttPublishListener",[],(function(t,n,r,o,a,i){"use strict";var e=Object.freeze({NOT_CONNECTED:"NOT_CONNECTED",PUBLISH_ERROR:"PUBLISH_ERROR",QUEUED:"QUEUED",SENT:"SENT",ACKED:"ACKED",NOT_ACKED:"NOT_ACKED"});i.MqttPublishEvent=e}),66);
__d("MqttUserNameUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e!=null?e:typeof document=="object"&&document!=null&&"hasFocus"in document&&document.hasFocus()}function l(){return navigator.userAgent}i.getMqttForegroundStatus=e,i.getUserAgent=l}),66);
__d("MqttUserName",["MqttUserNameUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,r,a,i,l,s,u,c,d,m){l===void 0&&(l=null),s===void 0&&(s=""),u===void 0&&(u="websocket"),c===void 0&&(c=null),d===void 0&&(d=null),m===void 0&&(m=null),this.$1=e,this.$2=t,this.$3=n,this.$4=r,this.$5=a,this.$6=i,this.$7=o("MqttUserNameUtils").getMqttForegroundStatus(),this.$8=l,this.$9=s,this.$10=u,this.$11=c,this.$12=d,this.$13=m}var t=e.prototype;return t.gen=function(t,n,r,a){a===void 0&&(a=[]);var e=o("MqttUserNameUtils").getMqttForegroundStatus(this.$7),i=r.map(function(e){var t={isBase64Publish:!1,messageId:e.messageId,payload:e.payload,qos:e.qos,topic:e.topic};return typeof t.payload!="string"&&(t.payload=btoa(String.fromCharCode.apply(null,t.payload)),t.isBase64Publish=!0),t}),l={a:o("MqttUserNameUtils").getUserAgent(),asi:this.$13,aid:this.$5,aids:this.$12!=null?Object.fromEntries(this.$12):null,chat_on:this.$6,cp:this.$3,ct:this.$10,d:this.$4,dc:"",ecp:this.$2,fg:e,gas:this.$8,mqtt_sid:"",no_auto_fg:!0,p:this.$11,pack:a,php_override:this.$9,pm:i,s:t,st:n,u:this.$1};return JSON.stringify(l)},t.setForegroundState=function(t){this.$7=t},t.setChatVisibility=function(t){this.$6=t},t.getEndpointCapabilities=function(){return this.$2},t.getDeviceId=function(){return this.$4},t.setEndpointCapabilities=function(t){this.$2=t},t.getIsGuestAuthStringPresent=function(){return this.$8!==null},e})();l.default=e}),98);
__d("MqttConnection",["MqttConnectionHookCollection","MqttEnv","MqttProtocolClient","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils","Promise","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=15,u=15,c=1,d=1,m=64,p="publish",_="subscribe",f="unsubscribe",g=function(t){},h=18e4,y=5*1e3,C=15,b=21,v=(function(){function t(){var e=this;this.$38=function(){return e.$20},this.$39=function(){return e.$21},this.$8=!1,this.$10=o("MqttEnv").Env.getLoggerInstance(),this.$11="Disconnected",this.$17=new Set,this.$24=new Map,this.$12=0,this.$13=0,this.$14=0,this.$15=0,this.$16=0,this.$8=!1,this.$5="",this.$6=new(r("MqttUserName"))("",0,1,"",0,!0),this.$9=0,this.$18=0,this.$19=!1,this.$7=null;var t=function(){};this.$1=t,this.$2=t,this.$3=t,this.$25=!1,this.$26=!1,this.$27=new(r("MqttConnectionHookCollection")),this.$4=function(){return[]},this.$20=s,this.$21=u,this.$22=null,this.$23=0}var a=t.prototype;return a.run=function(t){var e=this,n=t.endpoint,r=t.extraConnectMessageProvider,o=t.mqttUserName,a=t.onJSError,i=t.onMessageReceived,l=t.onStateChange,c=t.subscribedTopics;if(this.$8){this.$10.debugTrace("run","Run called while in running state.");return}this.$1=l,this.$3=i,this.$5=n,this.$6=o,this.$8=!0,this.$18=Date.now(),this.$12=0,this.$13=0,this.$2=a||g,c&&c.forEach(function(t){return e.$17.add(t)}),this.$4=r,this.$20=s,this.$21=u,this.$28()},a.shutdown=function(t){this.$29(t),this.$30("shutdown"),this.$8=!1,this.$10.debugTrace("shutdown","Shutdown")},a.subscribe=function(t){return this.$17.add(t),this.ensureConnected(_)&&this.$31(t),!0},a.publish=function(t,n,r,o){return this.$32(t,n,r,o)},a.publishBinary=function(t,n,r,o){return this.$32(t,n,r,o)},a.$32=function(a,i,l,s){var t={reject:function(t){},resolve:function(){}};s!=null&&(t.listener=s);var u=new(e||(e=n("Promise")))(function(e,n){t.resolve=e,t.reject=n}),c=this.ensureConnected(p);return c?this.$33(a,i,l,t):(s==null||s.onEvent(o("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED),t.reject(r("err")("Client disconnected"))),u},a.unsubscribe=function(t){return this.$17.delete(t),this.ensureConnected(f)&&this.$34(t),!0},a.addHook=function(t){this.$27.addHook(t)},a.removeHook=function(t){this.$27.removeHook(t)},a.isRunning=function(){return this.$8},a.getSessionId=function(){return this.$9},a.hasFatal=function(){return this.$25},a.hasConnectSuccess=function(){return this.$26},a.canPublish=function(){return this.ensureConnected("canPublish")},a.ensureConnected=function(t){return!(!this.$8||this.$7==null||!this.$7.isConnected())},a.connectionState=function(){return this.$11},a.mqttStateFromConnectionState=function(t){switch(t){case"Connecting":case"TransportConnected":return"Connecting";case"Connected":return"Connected";case"Disconnected":return"Disconnected"}throw r("err")("Unknown state "+t)},a.testOnlyGetSubscribedTopics=function(){return this.$17},a.getDisconnectCount=function(){return this.$23},a.$29=function(t){this.$8&&this.$7!=null&&(this.$35("Disconnected"),this.$7!=null&&(this.$7.disconnect(t),this.$27.onConnectionDisconnect()),this.$7=null)},a.$36=function(t){if(this.$11==="Connected"&&t==="Disconnected"&&this.$18===0){this.$18=Date.now();return}if(t==="Connecting"&&this.$18!==0&&!this.$19){this.$10.bumpCounter("protocol.reconnectstarted"),this.$19=!0;return}if(t==="Connected"&&this.$18!==0){var e=Date.now()-this.$18;switch(Math.floor(e/3e4)){case 0:this.$10.bumpCounter("protocol.reconnectedwithin30s");break;case 1:this.$10.bumpCounter("protocol.reconnectedwithin60s");break;case 2:this.$10.bumpCounter("protocol.reconnectedwithin90s");break;case 3:this.$10.bumpCounter("protocol.reconnectedwithin120s");break;default:this.$10.bumpCounter("protocol.reconnectedmorethan120s");break}this.$18=0,this.$19=!1;return}},a.$35=function(t){t!==this.$11&&(this.$10.debugTrace("MQTTConnection-updateState","State changed to: "+t),this.$36(t),this.$11=t,this.$1(t))},a.$28=function(){var e=this;if(this.$8){this.$11!=="Disconnected"&&this.$10.debugTrace("Reconnect","Current State not disconnected: "+this.$11),this.$35("Connecting");var t=Date.now(),n=this.$10.getBrowserConnectivity();this.$9=o("MqttUtils").generateSessionId();var a=Array.from(this.$17),i=o("MqttUtils").endpointWithSessionId(this.$5,this.$9),l=o("MqttUtils").endpointWithExtraParameter(i,"cid",this.$6.getDeviceId());try{this.$7=new(r("MqttProtocolClient"))(l);var s=this.$37(),u=s.map(function(e){return e.topic}),c=this.$6.gen(this.$9,a,s);this.$7!=null&&(this.$13+=1,this.$7.connect({getKeepAliveIntervalSeconds:this.$38,getKeepAliveTimeoutSeconds:this.$39,ignoreSubProtocol:!0,mqttVersion:3,onConnectFailure:function(o,i,l){return e.$40(i,t,e.$18,a,u,n,o,l)},onConnection:function(){return e.$41(s,a)},onConnectionLost:function(n,r){return e.$42(n,r)},onConnectSuccess:function(o){return e.$43(t,e.$18,a,u,n,o)},onMessageArrived:function(n,r,o){return e.$44(n,r,o)},onMessageDelivered:function(n){return e.$45(n)},userName:c}),this.$10.bumpCounter("protocol.connectattempt"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.connectattempt"),this.$27.onConnectAttempt())}catch(e){var d=r("getErrorSafe")(e);this.$10.bumpCounter("js_error_in_init_exception"),this.$35("Disconnected"),this.$46(!1,!1,t,this.$18,a,[],n,null,14,"init error - "+d.message),e!=null&&this.$10.logErrorWarn(d,"ws_js_error"),this.$27.onWSFatal(),this.$47(new(o("MqttTypes")).MqttChannelError(!1,"ws_js_error",d),"client_init")}}},a.$37=function(){var e=this.$4(),t=65536;return e.map(function(e){return e.messageId=t--,e})},a.$31=function(t){try{if(this.$7!=null)return this.$7.subscribe(t),this.$10.debugTrace("#doSubscribe","Subscribing to "+t),this.$27.onSubscribe(t),this.$10.bumpCounter("protocol.subscribe"),!0}catch(n){var e=r("getErrorSafe")(n);this.$10.logError(e,"Exception subscribing"),this.$10.bumpCounter("subscribe_exception."+t),this.$10.bumpCounter("protocol.subscribe.error")}return!1},a.$34=function(t){try{if(this.$7!=null)return this.$7.unsubscribe(t),this.$10.debugTrace("#doUnsubscribe","Unsubscribing to "+t),this.$27.onUnsubscribe(t),this.$10.bumpCounter("protocol.unsubscribe"),!0}catch(n){var e=r("getErrorSafe")(n);this.$10.logError(e,"Exception unsubscribing"),this.$10.bumpCounter("unsubscribe_exception."+t),this.$10.bumpCounter("protocol.unsubscribe.error")}return!1},a.$33=function(t,n,a,i){if(this.$7!=null)try{var e,l;typeof n=="string"?l=this.$7.publish(t,n,a):l=this.$7.publishBinary(t,n,a),this.$10.bumpCounter("protocol.publish");var s=l!=null?l:"null";return this.$10.debugTrace("#doPublish","publish "+t+" with messageId:"+s+" qos:"+a),this.$27.onPublish(t),(e=i.listener)==null||e.onEvent(o("MqttPublishListener").MqttPublishEvent.SENT),l!=null?(this.$10.bumpCounter("publish.ack_expected"),this.$24.set(l,i)):i.resolve(),!0}catch(e){var u=r("getErrorSafe")(e);return this.$10.logError(u,"Exception publishing"),this.$10.bumpCounter("publish_exception."+t),i.reject(u),this.$10.bumpCounter("protocol.publish.error"),!1}else return!1},a.$48=function(t){var e=this;if(t===void 0&&(t=null),!!this.$8){this.$29(o("MqttTypes").MqttErrors.RECONNECT),this.$30("reconnect"),this.$49(),this.$9=-1,this.$16=0;var n=t;n==null&&(n=c*Math.pow(2,this.$12)),n=Math.max(n,d),n=Math.min(n,m);var r=n*(1e3+o("MqttEnv").Env.random()*200);this.$10.debugTrace("#scheduleReconnect","Reconnect in "+r+" ms"),this.$22=o("MqttEnv").Env.setTimeout(function(){e.$28()},r),this.$12+=1}},a.$49=function(){var e=Date.now()-this.$16,t=this.$16!==0&&e>y,n=this.$12>C;(t||n)&&(this.$12=0),this.$16!==0&&e<=y&&this.$10.bumpCounter("short_lived_session"),n&&this.$10.bumpCounter("connection_attempt_limit")},a.$46=function(t,n,r,o,a,i,l,s,u,c){t?this.$14++:this.$15++;var e=Date.now();this.$10.eventLogConnect({ackReceived:n,attemptNumber:this.$13,connectionState:this.mqttStateFromConnectionState(this.$11),connectionStatus:t,disconnectCount:this.$23,duration:e-r,errorCode:u,errorMessage:c,failTotal:this.$15,hostname:this.$5,messageSizeBytes:s,osConnectivity:l,publishes:i,sessionID:this.$9,subscribedTopics:a,successTotal:this.$14,total_duration:e-o}),t&&(this.$13=0)},a.$40=function(t,n,r,o,a,i,l,s){var e=t.mqttError,u=s!=null?e.errorMessage+" - "+s:e.errorMessage;if(this.$10.debugTrace("connect","Connect failed "+u),this.$10.bumpCounter("protocol.onconnectfailure"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectfailure"),this.$27.onConnectFailure(),this.$46(!1,t.connAck!==-1,n,r,o,a,i,l,e.errorCode,u),t.connAck!=null&&(this.$10.bumpCounter("protocol.connect_failure."+t.connAck),t.connAck===b)){this.$48(h);return}this.$48()},a.$41=function(t,n){var e=this;this.$10.bumpCounter("protocol.onconnection"),this.$10.debugTrace("Connect","Socket established"),this.$27.onConnected(),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnection"),n.forEach(function(t){e.$27.onSubscribe(t)}),t.forEach(function(t){e.$27.onPublish(t.topic)}),this.$35("TransportConnected")},a.$43=function(t,n,r,o,a,i){this.$10.bumpCounter("protocol.onconnectsuccess"),this.$10.debugTrace("connect","Connect success"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectsucess"),this.$27.onConnectSuccess(),this.$26=!0,this.$35("Connected"),this.$46(!0,!0,t,n,r,o,a,i),this.$50(r),this.$16=Date.now()},a.$42=function(t,n){if(this.$10.bumpCounter("protocol.onconnectionlost"),this.$23++,t.errorCode){var e=n!=null?t.errorMessage+" - "+n:t.errorMessage;this.$10.eventLogDisconnect({disconnectCount:this.$23,duration:Date.now()-this.$16,errorCode:t.errorCode,errorMessage:e,sessionID:this.$9})}this.$10.debugTrace("connect","connection lost"),this.$27.onConnectionLost(),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectionlost"),this.$48()},a.$44=function(t,n,o){this.$10.bumpCounter("protocol.onmessagearrived"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onmessagearrived"),this.$10.debugTrace("onMessageArrived","Message received on "+t),this.$27.onMessage(t);try{this.$3(t,n,o)}catch(n){var e=r("getErrorSafe")(n);this.$10.logError(e,"Listener threw error"),this.$10.bumpCounter("listener_error."+t)}},a.$45=function(t){var e;this.$10.bumpCounter("protocol.onmessagedelivered");var n=t!=null?t:"null";if(this.$10.debugTrace("onMessageDelivered","Delivered Message {ID: "+n+"}"),t!=null){var r=this.$24.get(t);if(r==null){this.$10.bumpCounter("protocol.message_with_unknown_id");return}this.$24.delete(t),(e=r.listener)==null||e.onEvent(o("MqttPublishListener").MqttPublishEvent.ACKED),r.resolve(),this.$10.bumpCounter("publish.ack_received")}},a.$30=function(t){this.$10.bumpCounter("protocol.fail_all_unacked_publishes."+t),this.$24.forEach(function(e,n,a){var i;(i=e.listener)==null||i.onEvent(o("MqttPublishListener").MqttPublishEvent.NOT_ACKED),e.reject(r("err")(t))}),this.$24.clear()},a.$50=function(t){var e=this,n=new Set(t);n.forEach(function(t){e.$17.has(t)||e.unsubscribe(t)});var r=new Set(this.$17);r.forEach(function(t){n.has(t)||e.subscribe(t)})},a.$47=function(t,n){try{this.$10.bumpCounter("js_error_in_init"),this.$10.bumpCounter(n+".error"),this.$25=!0;var e=t?t.message:"error";this.$10.debugTrace("onError",n+": "+e),this.$2(t)}catch(e){var o=r("getErrorSafe")(e);this.$10.bumpCounter("js_error_in_error_logging"),this.$10.logError(o,"JS error while trying to log previous error")}},a.setRunning_OnlyForTests=function(t){this.$8=t},t})();l.default=v}),98);
__d("MqttWebSocketUtils",[],(function(t,n,r,o,a,i){"use strict";function e(){return"WebSocket"in t&&t.WebSocket!=null&&"CLOSING"in t.WebSocket.prototype}i.hasWSSupport=e}),66);
__d("MqttChannel",["ChannelClientID","IrisSubscribeChecker","MetaConfig","MqttAnalyticsHook","MqttConnection","MqttEnv","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils","MqttWebSocketUtils","Promise","Run","err","getErrorSafe","isFastRefreshEnabledForCurrentDomain","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=29125,u=(function(){function t(e){var t=this,n=e.endpoint,a=e.pollingEndpoint,i=e.userFbid,l=e.appId,s=e.initialSubscribedTopics,u=e.capabilities,c=e.clientCapabilities,d=e.chatVisibility,m=d===void 0?!0:d,p=e.guestAuthString,_=p===void 0?null:p,f=e.phpOverride,g=f===void 0?"":f,h=e.clientType,y=h===void 0?"websocket":h,C=e.deviceId,b=C===void 0?r("ChannelClientID").getID():C,v=e.pageId,S=v===void 0?null:v,R=e.assetIds,L=R===void 0?null:R,E=e.appSpecificInfo,k=E===void 0?null:E;if(this.$11=o("MqttEnv").Env.getLoggerInstance(),this.$11.setAppId(l),this.$12=new(r("MqttUserName"))(i,u,c,b,l,m,_,g,y,S,L,k),this.$1=n,this.$2=a,this.$5="Disconnected",this.$7="LPInactive",this.$6="Disconnected",this.$3=[],this.$4=new Set,this.$8=new Map,this.$9=new Map,this.$10=new(r("MqttConnection")),this.$13=null,this.$16=new(r("MqttAnalyticsHook")),this.$15=new Map,this.$14=[],!o("MqttEnv").Env.isUserLoggedInNow()&&!r("isFastRefreshEnabledForCurrentDomain")()&&(_==null||_=="")){this.$11.bumpCounter("logged_out_init");return}this.$10.addHook(this.$16),this.$10.addHook(new(r("IrisSubscribeChecker"))(function(){return t.$4.size>0})),this.$17(s),this.$18()}var a=t.prototype;return a.$17=function(t){var e=this;if(this.$10.isRunning()){this.$19("run","Connection started calling run again");return}if(o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){if(r("MetaConfig")._("15")){this.$19("MqttChannel","Websocket disabled, will do long polling only");return}else if(!o("MqttWebSocketUtils").hasWSSupport()){this.$19("MqttChannel","Websocket Unavailable, will do long polling only"),this.$11.bumpCounter("ws_unavailable_polling");return}}this.$10.run({endpoint:this.$1,extraConnectMessageProvider:function(){return e.$20()},mqttUserName:this.$12,onJSError:function(n){e.$21(n)},onMessageReceived:function(n,r,o){e.$22(n,r,o)},onStateChange:function(n){e.$23(n)},subscribedTopics:t}),this.$24()},a.$24=function(){var e=this,t=o("Run").onUnload(function(){e.$25(o("MqttTypes").MqttErrors.BROWSER_CLOSE)})},a.shutdown=function(){this.$25(o("MqttTypes").MqttErrors.APP_DISCONNECT)},a.$25=function(t){this.$10&&this.$10.shutdown(t),this.$13&&this.$13.shutdown(),this.$16.onTabClose()},a.publish=function(t,n,r){return this.$26(t,n,r!=null?r:{qos:1,skipBuffer:!1})},a.publishBinary=function(t,n,r){return r===void 0&&(r={qos:1,skipBuffer:!1}),this.$26(t,n,r)},a.$26=function(t,n,r){r===void 0&&(r={qos:1,skipBuffer:!1});var e;return r.qos===0?e=this.$27(t,n,r.listener):e=this.$28(t,n,r),o("MqttUtils").promiseDone(e,function(){},function(e){var t;(t=r.listener)==null||t.onEvent(o("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR)}),e},a.$27=function(t,n,r){return this.$29(t,n,0,r,1,null)},a.$28=function(r,a,i){var t={reject:function(t){},resolve:function(){}},l=new(e||(e=n("Promise")))(function(e,n){t.resolve=e,t.reject=n}),s=o("MqttEnv").Env.random(),u={ack:t,attempt:0,options:i,payload:a,publishToken:s,startTime:Date.now(),timeoutId:null,topic:r};if(i.skipBuffer)if(this.$10.connectionState()==="Connecting"){var c;this.$14.push(u),(c=i.listener)==null||c.onEvent(o("MqttPublishListener").MqttPublishEvent.QUEUED)}else this.$30(u);else{var d;u.timeoutId=this.$31(s),this.$15.set(s,u),(d=i.listener)==null||d.onEvent(o("MqttPublishListener").MqttPublishEvent.QUEUED),this.$32(u)}return l},a.$30=function(t){t.attempt+=1,o("MqttUtils").promiseDone(this.$29(t.topic,t.payload,t.options.qos,t.options.listener,t.attempt,t.startTime),function(){t.ack.resolve()},function(e){t.ack.reject(e)})},a.$32=function(t){var e=this;t.attempt+=1,o("MqttUtils").promiseDone(this.$29(t.topic,t.payload,t.options.qos,t.options.listener,t.attempt,t.startTime),function(){return e.$33(t)},function(e){})},a.$29=function(t,n,a,i,l,s){var e=this,u,c,d=this.getConnectionState(),m=Date.now();return!this.$10.canPublish()&&this.$13&&this.$13.canPublish()?(typeof n=="string"?u=this.$13.publish(t,n,a):u=this.$13.publishBinary(t,n,a),c="lp",i!=null&&(u=u.then(function(){return i.onEvent(o("MqttPublishListener").MqttPublishEvent.SENT)})),this.$11.bumpCounter("try_publish_lp")):(typeof n=="string"?u=this.$10.publish(t,n,a,i):u=this.$10.publishBinary(t,n,a,i),c="ws",this.$11.bumpCounter("try_publish_ws")),r("promiseDone")(u,function(){e.$11.eventLogOutgoingPublish({attempt:l,connectionState:d,disconnectCount:e.$10.getDisconnectCount(),errorMessage:null,firstAttemptStartTime:s,payloadSizeBytes:n.length*2,protocol:c,qos:a,sessionID:e.$10.getSessionId(),success:!0,thisAttemptStartTime:m,topic:t})},function(r){e.$11.eventLogOutgoingPublish({attempt:l,connectionState:d,disconnectCount:e.$10.getDisconnectCount(),errorMessage:r!=null?r.toString():null,firstAttemptStartTime:s,payloadSizeBytes:n.length*2,protocol:c,qos:a,sessionID:e.$10.getSessionId(),success:!1,thisAttemptStartTime:m,topic:t})}),u},a.subscribe=function(t,n){var e=this;this.$10.subscribe(t);var r=this.$8.get(t);return r?r.push(n):(r=[n],this.$8.set(t,r)),function(){var r=e.$8.get(t)||[],o=r.filter(function(e){return e!==n});e.$8.set(t,o),o.length===0&&e.unsubscribeAll(t)}},a.subscribeBinary=function(t,n){var e=this;this.$10.subscribe(t);var r=this.$9.get(t);return r?r.push(n):(r=[n],this.$9.set(t,r)),function(){var r=e.$9.get(t)||[],o=r.filter(function(e){return e!==n});e.$9.set(t,o),o.length===0&&e.unsubscribeAll(t)}},a.subscribeChannelEvents=function(t){var e=this;return this.$3.push(t),function(){e.unsubscribeChannelEvents(t)}},a.unsubscribeChannelEvents=function(t){var e=this.$3.indexOf(t);e>-1&&this.$3.splice(e,1)},a.registerExtraConnectPayloadProvider=function(t){var e=this;if(this.$19("MqttChannel","registerExtraConnectPayloadProvider called"),this.$4.add(t),this.$10.isRunning()){var n=t.getPublishMessages();n.forEach(function(t){typeof t.payload=="string"?e.publish(t.topic,t.payload,{qos:t.qos,skipBuffer:!0}):e.publishBinary(t.topic,t.payload,{qos:t.qos,skipBuffer:!0})})}},a.unregisterExtraConnectPayloadProvider=function(t){this.$4.delete(t)},a.unsubscribeAll=function(t){this.$10.unsubscribe(t),this.$8.delete(t),this.$9.delete(t)},a.getConnectionState=function(){return this.$5},a.getLongPollingStatus=function(){return this.$7},a.getEndpoint=function(){return this.$1},a.addHook=function(t){this.$10.addHook(t)},a.removeHook=function(t){this.$10.removeHook(t)},a.testOnlyMessageReceived=function(t,n){this.$22(t,n,-1)},a.$34=function(t){var e=this.$15.get(t);e!=null&&e.timeoutId!=null&&o("MqttEnv").Env.clearTimeout(e.timeoutId),this.$15.delete(t)},a.$31=function(t){var e=this;return o("MqttEnv").Env.setTimeout(function(t){var n=e.$15.get(t);if(n){var o=n.topic;e.$11.bumpCounter("publish_timeout."+o),e.$11.debugTrace("publish_timeout","Timeout publishing topic: "+o+" publishToken: "+t),e.$34(t),n.ack.reject(r("err")("Publish Timed Out"))}},s,t)},a.$33=function(t){var e=t.publishToken,n=this.$15.get(e);n&&(this.$34(e),t.ack.resolve(),this.$11.debugTrace("publish_success","Topic: "+t.topic+" publishToken: "+t.publishToken),this.$11.bumpCounter("publish_success."+t.topic))},a.$22=function(t,n,o){var e=this.$8.get(t);if(this.$11.eventLogIncomingPublish({connectionState:this.getConnectionState(),disconnectCount:this.$10.getDisconnectCount(),payloadSizeBytes:n.payloadString.length*2,qos:o,sessionID:this.$10.getSessionId(),topic:t}),!e)this.$11.debugTrace("_onMessageReceived",t+" being dropped, no listeners");else for(var a of e)try{a(n.payloadString)}catch(e){this.$11.logError(r("getErrorSafe")(e),"Listener exception"),this.$11.bumpCounter("listener_error")}var i=this.$9.get(t);if(this.$11.eventLogIncomingPublish({connectionState:this.getConnectionState(),disconnectCount:this.$10.getDisconnectCount(),payloadSizeBytes:n.payloadBytes.length,qos:o,sessionID:this.$10.getSessionId(),topic:t}),!i)this.$11.debugTrace("_onMessageReceived",t+" being dropped, no binary listeners");else for(var l of i)try{l(n.payloadBytes)}catch(e){this.$11.logError(r("getErrorSafe")(e),"Binary Listener exception"),this.$11.bumpCounter("listener_error")}},a.$21=function(t){if(o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){t.isRecoverable?this.$11.bumpCounter("recoverable_error_skipped"):this.$11.bumpCounter("unrecoverable_error_skipped");return}t.isRecoverable?this.$11.bumpCounter("recoverable_error_not_skipped"):this.$11.bumpCounter("unrecoverable_error_not_skipped"),this.$35(t)},a.$36=function(t){this.$35(t)},a.$35=function(t){for(var e of this.$3)e.onJSError&&e.onJSError(t)},a.$37=function(){var e=this;this.$14.forEach(function(t){e.$30(t),e.$11.bumpCounter("publish_from_temp_buffer."+t.topic)}),this.$14=[],this.$15.forEach(function(t,n,r){e.$32(t),e.$11.bumpCounter("publish_from_buffer."+t.topic)})},a.$23=function(t){t==="Connecting"?(this.$14.forEach(function(e){e.ack.reject(r("err")("Client Reconnecting - "+e.topic))}),this.$14=[]):t==="TransportConnected"&&this.$37(),this.$19("_changeState","Connection state = "+t),this.$38(t,this.$7)},a.$39=function(t,n){this.$13&&this.$13.canPublish()&&this.$37(),this.$19("_changeLPStatus","LP status = "+t+", LP Request status = "+n),this.$38(this.$6,t)},a.$38=function(t,n){var e=this.$10.mqttStateFromConnectionState(t);this.$13&&this.$13.canPublish()&&(e="Connected"),this.$6=t,(e!==this.$5||n!=this.$7)&&(this.$5=e,this.$7=n,this.$40(e))},a.$40=function(t){for(var e of this.$3)e.onMQTTStateChanged(t)},a.$20=function(){var e=this,t=[];return this.$4.forEach(function(n){try{var o=n.getPublishMessages();t.push.apply(t,o)}catch(t){e.$11.logError(r("getErrorSafe")(t),"ConnectPayload provider exception"),e.$11.bumpCounter("connectPayloadProvider_error")}}),t},a.$18=function(){var e=this;o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)&&!r("MetaConfig")._("262")&&this.$2&&this.$2!=""&&r("requireDeferred")("MqttLongPollingRunner").__setRef("MqttChannel").onReady(function(t){var n=new t(e.$2,e.$12,e.$10.hasFatal(),e.$10.hasConnectSuccess(),function(t,n,r){return e.$22(t,n,r)},function(){var t=Array.from(e.$8.keys()),n=Array.from(e.$9.keys());return Array.from(new Set(t.concat(n)))},function(){return e.$20()},function(t){e.$36(t)},function(t,n){e.$39(t,n)});n.start(),e.$10.addHook(n),n.addHook(e.$16),e.$13=n,e.$11.debugTrace("MqttChannel","longPollingRunner loaded")})},a.$19=function(t,n){this.$11.debugTrace(t,"Mqtt channel: "+n)},a.setForegroundState=function(t){this.$12&&this.$12.setForegroundState(t)},a.setChatVisibility=function(t){this.$12&&this.$12.setChatVisibility(t)},a.getEndpointCapabilities=function(){return this.$12.getEndpointCapabilities()},a.setEndpointCapabilities=function(t){this.$12.setEndpointCapabilities(t)},a.getConnection_OnlyForTests=function(){return this.$10},t})();l.default=u}),98);
__d("MqttEnvConfigStorage",["WebStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="mqtt:";function u(t,n){var o=(e||(e=r("WebStorage"))).getLocalStorage();if(o){var a=o.getItem(s+t);if(a!=null)return a}return n}function c(t,n){var o=(e||(e=r("WebStorage"))).getLocalStorage();if(o)if(n==null)o.removeItem(s+t);else var a=(e||(e=r("WebStorage"))).setItemGuarded(o,s+t,n)}l.configRead=u,l.configWrite=c}),98);
__d("MqttUnifiedClientConnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744057"),s=o("FalcoLoggerInternal").create("mqtt_unified_client_connect",e),u=s;l.default=u}),98);
__d("MqttUnifiedClientDisconnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744058"),s=o("FalcoLoggerInternal").create("mqtt_unified_client_disconnect",e),u=s;l.default=u}),98);
__d("MqttUnifiedClientIncomingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744059"),s=o("FalcoLoggerInternal").create("mqtt_unified_client_incoming_publish",e),u=s;l.default=u}),98);
__d("MqttUnifiedClientOutgoingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744060"),s=o("FalcoLoggerInternal").create("mqtt_unified_client_outgoing_publish",e),u=s;l.default=u}),98);
__d("MqttWsClientTypedLoggerLite",["generateLiteTypedLogger"],(function(t,n,r,o,a,i){"use strict";a.exports=n("generateLiteTypedLogger")("logger:MqttWsClientLoggerConfig")}),null);
__d("MqttLogger",["ChannelClientID","FBLogger","LogHistory","MetaConfig","MqttEnv","MqttGlobalStreamCounter","MqttUnifiedClientConnectFalcoEvent","MqttUnifiedClientDisconnectFalcoEvent","MqttUnifiedClientIncomingPublishFalcoEvent","MqttUnifiedClientOutgoingPublishFalcoEvent","MqttWsClientTypedLoggerLite","NetworkStatus","ODS","Random"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("MetaConfig")._("99"),u="mqtt_client",c=100,d="WEBSOCKET",m=typeof window!="undefined"?window:self,p=null,_={CLIENT_ERROR:"mqtt_client_error",CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish",PUBLISH_TIMEOUT:"mqtt_qos1_publish_timeout",SOCKET_DISCONNECT:"mqtt_protocol_error"},f={CONNECT:"connect",DISCONNECT:"disconnect",INCOMING_PUBLISH:"incoming_publish",OUTGOING_PUBLISH:"outgoing_publish"},g=(function(){function t(e){this.$1=o("LogHistory").getInstance(u),this.$2=0,this.$3=Date.now(),this.$4=r("ChannelClientID").getID(),this.$7(),this.$5=o("MqttGlobalStreamCounter").getInstance(),this.$5.isEnabled()||(this.$5=null),this.$6=e}t.getInstance=function(n){return p||(p=new t(n)),p};var n=t.prototype;return n.setAppId=function(t){this.$2===0&&(this.$2=t)},n.eventLogConnect=function(t){var e,n,o=t.ackReceived,a=t.attemptNumber,i=t.connectionState,l=t.connectionStatus,s=t.disconnectCount,u=t.duration,c=t.errorMessage,m=t.failTotal,p=t.hostname,g=t.messageSizeBytes,h=t.osConnectivity,y=t.sessionID,C=t.successTotal,b=t.total_duration,v=l?"success":"failed";this.bumpCounter(_.CONNECT+"."+v);var S=C/(C+m),R=h&&this.getBrowserConnectivity(),L={acked:o,attempt_number:a.toString(),client_type:d,connection_state:i,disconnect_count:s.toString(),duration:u.toString(),error:c,event_type:f.CONNECT,extra_data:{connect_success_rate:S.toString(),device_id:this.$4,hostname:p,connectionStatus:l.toString(),exposure:(e=this.$6)!=null?e:""},os_connectivity:R,payload_size:g==null?void 0:g.toString(),session_id:y.toString(),total_duration:b.toString(),ws_count:(n=this.$5)==null?void 0:n.getGlobalState().totalConnectionStreams.toString()};this.$8(function(){r("MqttUnifiedClientConnectFalcoEvent").log(function(){return L})})},n.eventLogPull=function(t){var e=t.duration,n=t.errorMessage,r=t.hostname,a=t.pullEventName,i=t.sessionID,l=t.status,s={connection_status:l,device_id:this.$4,duration:e,error_message:n,hostname:r,href:m.location.hostname,logged_in:o("MqttEnv").Env.isUserLoggedInNow(),session_id:i};this.$9(a,s)},n.eventLogPullFinish=function(t){var e=t.duration,n=t.errorMessage,r=t.publishReceived,a=t.publishSent,i=t.pullEventName,l=t.sessionID,s={device_id:this.$4,duration:e,error_message:n,href:m.location.hostname,logged_in:o("MqttEnv").Env.isUserLoggedInNow(),publish_received:r,publish_sent:a,session_id:l};this.$9(i,s)},n.eventLogDisconnect=function(t){var e,n,o=t.disconnectCount,a=t.duration,i=t.errorMessage,l=t.sessionID;this.bumpCounter(_.DISCONNECT);var s={client_type:d,connection_state:"Disconnected",disconnect_count:o.toString(),duration:a.toString(),error:i,event_type:f.DISCONNECT,extra_data:{device_id:this.$4,exposure:(e=this.$6)!=null?e:""},os_connectivity:this.getBrowserConnectivity(),session_id:l.toString(),ws_count:(n=this.$5)==null?void 0:n.getGlobalState().totalConnectionStreams.toString()};this.$8(function(){r("MqttUnifiedClientDisconnectFalcoEvent").log(function(){return s})})},n.eventLogOutgoingPublish=function(t){var e=t.attempt,n=t.connectionState,o=t.disconnectCount,a=t.errorMessage,i=t.firstAttemptStartTime,l=t.payloadSizeBytes,s=t.protocol,u=t.qos,c=t.sessionID,m=t.success,p=t.thisAttemptStartTime,g=t.topic;this.bumpCounter(_.PUBLISH+"."+g);var h=Date.now(),y={acked:u===1?m:null,attempt_number:e.toString(),client_type:d,connection_state:n,disconnect_count:o.toString(),duration:(h-p).toString(),error:a,event_type:f.OUTGOING_PUBLISH,extra_data:{device_id:this.$4,protocol:s},os_connectivity:this.getBrowserConnectivity(),payload_size:l.toString(),qos:u.toString(),session_id:c.toString(),topic:g,total_duration:i!=null?(h-i).toString():null};this.$8(function(){r("MqttUnifiedClientIncomingPublishFalcoEvent").log(function(){return y})})},n.eventLogIncomingPublish=function(t){var e=t.connectionState,n=t.disconnectCount,o=t.payloadSizeBytes,a=t.qos,i=t.sessionID,l=t.topic,s={client_type:d,connection_state:e,disconnect_count:n.toString(),event_type:f.INCOMING_PUBLISH,extra_data:{device_id:this.$4},os_connectivity:this.getBrowserConnectivity(),payload_size:o.toString(),qos:a.toString(),session_id:i.toString(),topic:l},u=l=="/webrtc"||l=="/rtc_multi";this.$10(function(){r("MqttUnifiedClientOutgoingPublishFalcoEvent").log(function(){return s})},50,u)},n.logError=function(t,n){o("MqttEnv").Env.scheduleLoggingCallback(function(){try{r("FBLogger")(u).catching(t).mustfix(n)}catch(e){}})},n.logErrorWarn=function(t,n){o("MqttEnv").Env.scheduleLoggingCallback(function(){try{r("FBLogger")(u).catching(t).warn(n)}catch(e){}})},n.logWarn=function(t,n){var e=this;o("MqttEnv").Env.scheduleLoggingCallback(function(){try{e.$1.warn(t,n)}catch(e){}})},n.debugTrace=function(t,n){var e=this;o("MqttEnv").Env.scheduleLoggingCallback(function(){try{e.$1.debug(t,n)}catch(e){}})},n.bumpCounter=function(n){var t=this;o("Random").coinflip(c)&&o("MqttEnv").Env.scheduleLoggingCallback(function(){t.$2!==0&&(e||(e=o("ODS"))).bumpEntityKey(2966,"mqtt_ws_client",t.$2+"."+n,c),(e||(e=o("ODS"))).bumpEntityKey(2966,"mqtt_ws_client",n,c)})},n.$9=function(t,n,a){var e=this;o("MqttEnv").Env.scheduleLoggingCallback(function(){n.event_type=t,n.app_id=e.$2,n.online=e.$11();var o=JSON.stringify(n);e.$1.log(t,o,{weight:a}),t!==_.DISCONNECT&&r("MqttWsClientTypedLoggerLite").log(n)})},n.$10=function(t,n,r){var e;s&&n!==0?e=r||o("Random").coinflip(n):e=!0,e&&o("MqttEnv").Env.scheduleCallback(t)},n.$8=function(t){this.$10(t,0,!1)},n.$11=function(){return m.navigator&&m.navigator.onLine!==void 0?m.navigator.onLine:!1},n.getBrowserConnectivity=function(){return r("NetworkStatus").isOnline()},n.$7=function(){var e=this;if(m.navigator&&m.navigator.onLine!==void 0){var t=function(n){var t=n.online;t||e.bumpCounter("browser_disconnect")};r("NetworkStatus").onChange(t)}},t})();l.default=g}),98);
__d("MqttEnvGk",["MqttEnv","MqttLogger","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case o("MqttEnv").MqttGkNames.mqtt_waterfall_log_client_sampling:return r("gkx")("21119");case o("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled:return!0;case o("MqttEnv").MqttGkNames.mqtt_lp_use_fetch:return r("gkx")("21120");case o("MqttEnv").MqttGkNames.mqtt_fast_lp:return!1;case o("MqttEnv").MqttGkNames.mqtt_lp_no_delay:return r("gkx")("21122");case o("MqttEnv").MqttGkNames.mqtt_enable_publish_over_polling:return r("gkx")("21123");case o("MqttEnv").MqttGkNames.mqttweb_global_connection_counter:return r("gkx")("21124");default:return r("MqttLogger").getInstance().logError(new Error("unknown gk"),"Unknown GK value "+e),!1}}l.default=e}),98);
__d("MqttEnvInitializer",["CurrentMessengerUser","MqttEnv","MqttEnvConfigStorage","MqttEnvGk","MqttLogger","Random","clearTimeout","setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){"use strict";function e(e){o("MqttEnv").Env.initialize(r("Random").random,o("CurrentMessengerUser").isLoggedInNow,r("clearTimeout"),r("setTimeoutAcrossTransitions"),function(){return r("MqttLogger").getInstance()},r("MqttEnvGk"),e!=null?e:null,null,null,o("MqttEnvConfigStorage").configRead,o("MqttEnvConfigStorage").configWrite)}var s={genGk:r("MqttEnvGk"),initialize:e};l.default=s}),98);
__d("FBMqttChannel",["MqttChannel","MqttConfig","MqttEnvInitializer"],(function(t,n,r,o,a,i,l){"use strict";var e;r("MqttEnvInitializer").initialize();var s=new(r("MqttChannel"))({appId:(e=r("MqttConfig")).appID,capabilities:e.capabilities,chatVisibility:!1,clientCapabilities:e.clientCapabilities,endpoint:e.endpoint,initialSubscribedTopics:e.subscribedTopics,phpOverride:e.hostNameOverride,pollingEndpoint:e.pollingEndpoint,userFbid:e.fbid});l.default=s}),98);
__d("TWriteBuffer",[],(function(t,n,r,o,a,i){var e=(function(){function e(t){t===void 0&&(t=e.DEFAULT_BYTE_BUFFER_SIZE),this.$1=new DataView(new ArrayBuffer(t)),this.$2=0}var t=e.prototype;return t.write=function(t){this.$2+t.length>this.$1.byteLength&&this.$3(this.$2+t.length);for(var e=0;e<t.length;e++)this.$1.setUint8(this.$2+e,t[e]);return this.$2+=t.length,t.length},t.writeByte=function(t){return this.$2+1>this.$1.byteLength&&this.$3(this.$2+1),this.$1.setUint8(this.$2,t),this.$2++,1},t.writeFloatBE=function(t){return this.$2+Float32Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float32Array.BYTES_PER_ELEMENT),this.$1.setFloat32(this.$2,t),this.$2+=Float32Array.BYTES_PER_ELEMENT,Float32Array.BYTES_PER_ELEMENT},t.writeDoubleBE=function(t){return this.$2+Float64Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float64Array.BYTES_PER_ELEMENT),this.$1.setFloat64(this.$2,t),this.$2+=Float64Array.BYTES_PER_ELEMENT,Float64Array.BYTES_PER_ELEMENT},t.toByteArray=function(){var e=new Uint8Array(this.$1.buffer,0,this.$2);return e},t.currentSize=function(){return this.$2},t.getUnderlyingDataView=function(){return this.$1},t.$3=function(t){var e=t*2;if(!Number.isSafeInteger(e))throw new Error("unable to resize");for(var n=new DataView(new ArrayBuffer(e)),r=0;r<this.$2;r++)n.setUint8(r,this.$1.getUint8(r));this.$1=n},t.readByte=function(){throw new Error("operation not supported")},t.readBytes=function(t){throw new Error("operation not supported")},t.readFloatBE=function(){throw new Error("operation not supported")},t.readDoubleBE=function(){throw new Error("operation not supported")},e})();e.DEFAULT_BYTE_BUFFER_SIZE=16,i.default=e}),66);
__d("StringToUtf8",["TWriteBuffer"],(function(t,n,r,o,a,i,l){var e=function(t){for(var e=new(r("TWriteBuffer"))(t.length),n,o=0;o<t.length;o++)if(n=t.charCodeAt(o),n<128)e.writeByte(n);else if(n<2048)e.writeByte(n>>6|192),e.writeByte(n&63|128);else if((n&64512)==55296){if(o+1>=t.length)throw new Error("UTF-16 string is truncated: ["+n.toString(16)+"]");if((t.charCodeAt(o+1)&64512)!==56320)throw new Error("Invalid UTF-16 string: ["+n.toString(16)+", "+t.charCodeAt(o+1).toString(16)+"]");n=65536+((n&1023)<<10)+(t.charCodeAt(++o)&1023),e.writeByte(n>>18|240),e.writeByte(n>>12&63|128),e.writeByte(n>>6&63|128),e.writeByte(n&63|128)}else e.writeByte(n>>12|224),e.writeByte(n>>6&63|128),e.writeByte(n&63|128);return e.toByteArray()};l.StringToUtf8=e}),98);
__d("TNoOpWriteBuffer",[],(function(t,n,r,o,a,i){var e=(function(){function e(){this.$1=0}var t=e.prototype;return t.write=function(t){return this.$1+=t.length,t.length},t.writeByte=function(t){return this.$1++,1},t.writeFloatBE=function(t){return this.$1+=Float32Array.BYTES_PER_ELEMENT,Float32Array.BYTES_PER_ELEMENT},t.writeDoubleBE=function(t){return this.$1+=Float64Array.BYTES_PER_ELEMENT,Float64Array.BYTES_PER_ELEMENT},t.toByteArray=function(){throw new Error("operation not supported")},t.currentSize=function(){return this.$1},t.readByte=function(){throw new Error("operation not supported")},t.readBytes=function(t){throw new Error("operation not supported")},t.readFloatBE=function(){throw new Error("operation not supported")},t.readDoubleBE=function(){throw new Error("operation not supported")},e})();i.default=e}),66);
__d("TReadBuffer",[],(function(t,n,r,o,a,i){var e=(function(){function e(e){this.$1=e,this.$2=0}var t=e.prototype;return t.readByte=function(){if(this.$2<this.$1.length)return this.$1[this.$2++];throw new Error("no available byte to read")},t.readBytes=function(t){if(t<0)throw new Error("cannot readBytes of negative length: "+t);if(t+this.$2>this.$1.length)throw new Error("not enough bytes to read");var e=new Uint8Array(this.$1.buffer,this.$3(),t);return this.$2+=t,e},t.readFloatBE=function(){if(Float32Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var e=new DataView(this.$1.buffer).getFloat32(this.$3());return this.$2+=Float32Array.BYTES_PER_ELEMENT,e},t.readDoubleBE=function(){if(Float64Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var e=new DataView(this.$1.buffer).getFloat64(this.$3());return this.$2+=Float64Array.BYTES_PER_ELEMENT,e},t.$3=function(){return this.$2+this.$1.byteOffset},t.getCurrentCursor=function(){return this.$2},t.writeByte=function(t){throw new Error("operation not supported")},t.write=function(t){throw new Error("operation not supported")},t.toByteArray=function(){throw new Error("operation not supported")},t.writeFloatBE=function(t){throw new Error("operation not supported")},t.writeDoubleBE=function(t){throw new Error("operation not supported")},e})();i.default=e}),66);
__d("ThriftTypes",[],(function(t,n,r,o,a,i){var e=Object.freeze({STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,STRUCT:12,MAP:13,SET:14,LIST:15,FLOAT:19}),l=e;i.default=l}),66);
__d("Utf8ToString",[],(function(t,n,r,o,a,i){var e=function(t,n){throw new Error(t+": ["+n.map(function(e){return e.toString(16)}).toString()+"]")},l=function(n){e("Invalid UTF-8 sequence",n)},s=function(n,r){e("Not enough bytes for "+n+"-byte sequence",r)},u=function(t){for(var e=0,n=[];e<t.length;){var r=t[e++];if(r<128)n.push(String.fromCharCode(r));else if(r>=128&&r<194)l([r]);else if(r>=194&&r<224){e>=t.length&&s(2,[r]);var o=t[e++];(o&192)!==128&&l([r,o]),n.push(String.fromCharCode((r&31)<<6|o&63))}else if(r>=240&&r<245){e+2>=t.length&&s(4,[r]);var a=t[e++],i=t[e++],u=t[e++];(r==240&&(!(a>=144&&a<192)||(i&192)!==128||(u&192)!==128)||r>=241&&r<244&&((a&192)!==128||(i&192)!==128||(u&192)!==128)||r==244&&(!(a>=128&&a<144)||(i&192)!==128||(u&192)!==128))&&l([r,a,i,u]);var c=((r&7)<<18|(a&63)<<12|(i&63)<<6|u&63)-65536;n.push(String.fromCharCode(55296+(c>>10))),n.push(String.fromCharCode(56320+(c&1023)))}else if(r>=245)l([r]);else{e+1>=t.length&&s(3,[r]);var d=t[e++],m=t[e++];r==224?d>=160&&d<192||l([r,d,m]):r>=225&&r<237?d>=128&&d<192||l([r,d,m]):r==237?d>=128&&d<160||l([r,d,m]):r>=238&&r<240&&(d>=128&&d<192||l([r,d,m])),m>=128&&m<192||l([r,d,m]),n.push(String.fromCharCode((r&15)<<12|(d&63)<<6|m&63))}}return n.join("")};i.Utf8ToString=u}),66);/*FB_PKG_DELIM*/
__d("LSSetLoadingAfterOnMessageRanges",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sortBy(t.db.table(13).fetch([[[e[0]]]]),[["maxTimestampMs","DESC"]]).next().then(function(e,n){var r=e.done,o=e.value;return r?0:(n=o.item,t.forEach(t.filter(t.db.table(13).fetch([[[n.threadKey,n.minTimestampMs,n.minMessageId]]]),function(e){return t.i64.eq(e.threadKey,n.threadKey)&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(e.minTimestampMs,n.minTimestampMs)&&e.minMessageId===n.minMessageId}),function(e){var t=e.update,n=e.item;return t({isLoadingAfter:!0})}))})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxSetLoadingAfterOnMessageRangesStoredProcedure",e.__tables__=["messages_ranges_v2__generated"],a.exports=e}),null);
__d("LSReportThreadViewOpen",["LSIssueNewTaskWithExtraOperations","LSSetLoadingAfterOnMessageRanges"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[0]=n[0],r[1]=n[1],n):(t=i.item,o=[t.syncGroup,t.threadType],r[0]=o[0],r[1]=o[1])})},function(e){return t.i64.neq(r[0],void 0)?t.sequence([function(e){return t.db.table(1).fetch([[[r[0]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[14]=void 0:(t=o.item,r[14]=t.syncParams)})},function(e){return r[3]=r[14]}]):t.resolve(r[3]=void 0)},function(n){return t.islc(t.db.table(12).fetch([[[e[0],t.i64.cast([0,80])]],"messageDisplayOrderAuthority"]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,t){var n=e.done,o=e.value;return n?r[4]=void 0:(t=o.item,r[4]=t.timestampMs)})},function(n){return t.db.table(294).fetch([[[e[0]]]]).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[!1,t.i64.cast([0,0]),void 0],r[6]=o[0],r[7]=o[1],r[8]=o[2],o):(n=l.item,a=[n.isStale,n.threadQueueSequenceId,n.lastSelectiveSyncTimestampMs],r[6]=a[0],r[7]=a[1],r[8]=a[2])})},function(e){return r[6]?r[10]=!0:r[10]=!1,t.i64.neq(r[8],void 0)&&(t.i64.eq(r[1],t.i64.cast([0,152]))?r[14]=t.i64.cast([0,0]):r[14]=t.i64.cast([0,0]),r[15]=t.i64.of_float(Date.now())),t.resolve()},function(o){return r[11]=new t.Map,r[11].set("thread_key",e[0]),r[11].set("is_stale",r[10]),r[11].set("client_seq_id",r[7]),r[11].set("sync_params_encoded",r[3]),r[11].set("client_last_sync_timestamp_ms",r[8]),r[11].set("sync_group",r[0]),r[11].set("last_message_timestamp_ms",r[4]),r[12]=r[11].get("thread_key"),r[13]=t.toJSON(r[11]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),["report_thread_view_open","_",t.i64.to_string(r[12])].join(""),t.i64.cast([0,605]),r[13],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxReportThreadViewOpenStoredProcedure",e.__tables__=["threads","sync_groups","messages","community_thread_sync_info"],a.exports=e}),null);
__d("LSReportThreadViewOpenStoredProcedure",["LSReportThreadViewOpen","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSReportThreadViewOpen"),a.threadKey);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSThreadPointQueryTTRCStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({COMPLETED:1,SKIPPED:2});i.default=e}),66);
__d("useLSComputedThreadName",["CometTextWithEntities.react","react","react-compiler-runtime","useLSGetThreadTitle.react"],(function(t,n,r,o,a,i,l){"use strict";var e=["threadTitle"],s,u=s||(s=o("react"));function c(t,n){var a=o("react-compiler-runtime").c(12),i=r("useLSGetThreadTitle.react")(t),l,s;if(a[0]!==i?(s=i.threadTitle,l=babelHelpers.objectWithoutPropertiesLoose(i,e),a[0]=i,a[1]=l,a[2]=s):(l=a[1],s=a[2]),s==null){var c;a[3]===Symbol.for("react.memo_cache_sentinel")?(c=u.jsx(r("CometTextWithEntities.react"),{text:""}),a[3]=c):c=a[3];var d;return a[4]!==l?(d=babelHelpers.extends({threadNameElement:c},l),a[4]=l,a[5]=d):d=a[5],d}var m;a[6]!==s||a[7]!==n?(m=u.jsx(r("CometTextWithEntities.react"),{text:s,transforms:n}),a[6]=s,a[7]=n,a[8]=m):m=a[8];var p;return a[9]!==l||a[10]!==m?(p=babelHelpers.extends({threadNameElement:m},l),a[9]=l,a[10]=m,a[11]=p):p=a[11],p}l.default=c}),98);
__d("LSThreadTitle.react",["CometTextWithEntities.react","FBLogger","MWChatTextTransform","mwCMIsAnyCMThread","react","react-compiler-runtime","useLSComputedThreadName"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.thread,n=e.transforms;return r("useLSComputedThreadName")(t,n).threadNameElement}function c(e){var t=o("react-compiler-runtime").c(7),n=e.thread,a=e.transforms,i=a===void 0?o("MWChatTextTransform").textTransforms:a,l=n.threadName;if(l!=null){var c;return t[0]!==l||t[1]!==i?(c=s.jsx(r("CometTextWithEntities.react"),{text:l,transforms:i}),t[0]=l,t[1]=i,t[2]=c):c=t[2],c}if(r("mwCMIsAnyCMThread")(n.threadType)){r("FBLogger")("messenger_comet").mustfix("community message should not use computed thread title");var d;return t[3]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(r("CometTextWithEntities.react"),{text:""}),t[3]=d):d=t[3],d}var m;return t[4]!==n||t[5]!==i?(m=s.jsx(u,{thread:n,transforms:i}),t[4]=n,t[5]=i,t[6]=m):m=t[6],m}l.default=c}),98);
__d("MWInboxMessageSearchJumpToResultQPL",["FBLogger","I64","MAWLoggerUtils","QPLUserFlow","getErrorSafe","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("justknobx")._("3865"),u=r("justknobx")._("3867"),c=null;function d(){c=null}function m(e,t,n){return c={key:o("MAWLoggerUtils").getInstanceKey(),messageId:t,messageOtid:n,threadKey:e},c.key}function p(e,t){if(!(c==null||(t==null?void 0:t.messageId)!==c.messageId&&(t==null?void 0:t.offlineThreadingId)!==c.messageOtid)){var n=c.key;r("QPLUserFlow").addPoint(r("qpl")._(25306290,"2811"),e,{instanceKey:n})}}function _(t,n){if(!(!u||c==null||!(e||(e=o("I64"))).equal(n.threadKey,c.threadKey)))try{var a=c.key,i=t.msgs,l=i.some(function(e){var t,n;return e.msgId===((t=c)==null?void 0:t.messageId)||e.externalId===((n=c)==null?void 0:n.messageOtid)});r("QPLUserFlow").addPoint(r("qpl")._(25306290,"2811"),l?"jumped_message_fetched":"message_fetch_checkpoint",{data:{string:{rangeMaxTimestamp:n.maxTimestampMs!=null?(e||(e=o("I64"))).to_string(n.maxTimestampMs):"null",rangeMinTimestamp:n.minTimestampMs!=null?(e||(e=o("I64"))).to_string(n.minTimestampMs):"null"}},instanceKey:a})}catch(e){var s=r("getErrorSafe")(e);r("FBLogger")("messenger_web_search").mustfix("Failed to check if jumped message are fetched: %s",s.message)}}function f(e){if(!(c==null||(e==null?void 0:e.messageId)!==c.messageId&&(e==null?void 0:e.offlineThreadingId)!==c.messageOtid)){var t=c.key;r("QPLUserFlow").endSuccess(r("qpl")._(25306290,"2811"),{instanceKey:t}),d()}}function g(e){if(c!=null){var t=c.key;r("QPLUserFlow").endCancel(r("qpl")._(25306290,"2811"),{annotations:{string:{cancelReason:e}},instanceKey:t}),d()}}function h(e,t,n){var o=m(e,t.messageId,t.offlineThreadingId);r("QPLUserFlow").start(r("qpl")._(25306290,"2811"),babelHelpers.extends({annotations:{string:{messageId:t==null?void 0:t.messageId,messageOtid:t==null?void 0:t.offlineThreadingId}},instanceKey:o,timeoutInMs:s},n))}l.addPointIfJumpedToMessage=p,l.checkIfJumpedMessageAreFetched=_,l.endSuccessIfJumpedToMessage=f,l.endCancelIfAny=g,l.start=h}),98);
__d("MAWFetchMessagesForMLv2",["DateConsts","MAWMessagesDirection","MAWMessagesPaginationUtils","MAWSecureLocalDBFetch","MWInboxMessageSearchJumpToResultQPL"],(function(t,n,r,o,a,i,l){"use strict";var e=10*o("DateConsts").MS_PER_SEC;async function s(t){var n=t.chatJid,a=t.direction,i=t.includeOriginalMsg,l=t.pageSize,s=t.range,u=o("MAWMessagesDirection").getRangeMsgIdForDirection(a,s),c=await o("MAWMessagesPaginationUtils").getRangeExternalIdForDirection(a,s),d=await r("MAWSecureLocalDBFetch")({actionType:"user",chatJid:n,config:{admin:!0,editMsgHistory:!0,media:!0,polls:!0,reactions:!0,receiverFetch:!0,xma:!0},count:l,direction:o("MAWMessagesDirection").translateMwpDirectionToMawDirection(a),offsetMsg:{externalId:c,includeOriginalMsg:i,messageId:u},timestampMs:o("MAWMessagesDirection").getI64RangeTimestampForDirection(a,s)},{timeoutMs:e});return d.success===!0&&(o("MAWMessagesPaginationUtils").populateExternalIdCache(d.value.msgs),o("MWInboxMessageSearchJumpToResultQPL").checkIfJumpedMessageAreFetched(d.value,s)),d}l.fetchMessagesFromMAW=s}),98);
__d("MAWFindMsgsWithMinAndMaxTimestamp",["MAWMessagesCompare","qex"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e.length===0)return[null,null];if(r("qex")._("18"))return u(e);var t=e.toSorted(function(e,t){var n,r;return((n=e.sortOrderMs)!=null?n:0)-((r=t.sortOrderMs)!=null?r:0)});return[t[0],t[t.length-1]]}function s(e){var t=e.filter(function(e){return e.sortOrderMs!=null});if(t.length===0)return[null,null];if(r("qex")._("18"))return u(t);var n=null,o=null;for(var a of t){var i,l;a.sortOrderMs!=null&&((((i=n)==null?void 0:i.sortOrderMs)==null||n.sortOrderMs<a.sortOrderMs)&&(n=a),(((l=o)==null?void 0:l.sortOrderMs)==null||o.sortOrderMs>a.sortOrderMs)&&(o=a))}return[o,n]}function u(e){if(e.length===0)return[null,null];var t=o("MAWMessagesCompare").getSortComparisonFunctionForDirection("asc"),n=e.filter(function(e){return e.sortOrderMs!=null}).sort(t);return[n[0],n[n.length-1]]}l.findEBMsgsWithMinAndMaxTimestamp=e,l.findMsgsWithMinAndMaxTimestamp=s}),98);
__d("ReplayLastSubjectWithMapper",["relay-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.freeze({}),s=(function(){function t(t,n){var r=this;t===void 0&&(t=e),this.$1=!1,this.$5=new Set,this.$3=t,this.$6=n,this.$4=o("relay-runtime").Observable.create(function(t){if(r.$1){r.$2!=null?t.error(r.$2):t.complete();return}return r.$5.add(t),r.$3!==e&&t.next(r.$6(r.$3)),function(){r.$5.delete(t)}})}var n=t.prototype;return n.next=function(t){this.$1||this.$3!==t&&(this.$3=t,this.$5.forEach(function(e){return e.next(t)}))},n.error=function(t){this.$1||(this.$1=!0,this.$2=t,this.$5.forEach(function(e){return e.error(t)}))},n.complete=function(){this.$1||(this.$1=!0,this.$5.forEach(function(e){return e.complete()}))},n.subscribe=function(t){return this.$4.subscribe(t)},t})();l.ReplayLastSubjectWithMapper=s}),98);
__d("MAWMessageRangeDataExternalObservables",["ReplayLastSubjectWithMapper","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=[]}var t=e.prototype;return t.getOrCreateExternalObservableForRange=function(t,n){var e=this.$1.find(function(e){var n=e[0],r=e[1];return t===n});if(e!=null)return e[1];var r=new(o("ReplayLastSubjectWithMapper")).ReplayLastSubjectWithMapper({range:t.value,rangeExternalIds:n},function(e){var t=e.range,n=e.rangeExternalIds;return{range:t,rangeExternalIds:n}});return this.$1.push([t,r]),r},t.updateExternalObservableWithRange=function(t,n){var e=r("nullthrows")(this.$1.find(function(e){var n=e[0],r=e[1];return r===t}));e[0]!==n&&(e[0]=n)},e})();l.MAWMessageRangeDataExternalObservables=e}),98);
__d("MAWMessagesRangesUtils",["I64","MAWFindMsgsWithMinAndMaxTimestamp","MAWMessagesDirection"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return{hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:"",maxTimestampMs:(e||(e=o("I64"))).max_int,minMessageId:"",minTimestampMs:e.min_int,threadKey:t}}function u(){return{maxExternalId:null,minExternalId:null}}function c(t,n,r,a){var i,l,s=o("MAWFindMsgsWithMinAndMaxTimestamp").findMsgsWithMinAndMaxTimestamp(r.msgs),u=s[0],c=s[1],m=babelHelpers.extends({},t,o("MAWMessagesDirection").switchOnMWPMessagesDirection(a,{asc:{hasMoreAfter:r.hasMoreAfter,isLoadingAfter:!1,maxMessageId:(i=c==null?void 0:c.msgId)!=null?i:t.maxMessageId,maxTimestampMs:(e||(e=o("I64"))).max(t.maxTimestampMs,(c==null?void 0:c.sortOrderMs)!=null?(e||(e=o("I64"))).of_float(c==null?void 0:c.sortOrderMs):t.maxTimestampMs)},desc:{hasMoreBefore:r.hasMoreBefore,isLoadingBefore:!1,minMessageId:(l=u==null?void 0:u.msgId)!=null?l:t.minMessageId,minTimestampMs:e.min(t.minTimestampMs,(u==null?void 0:u.sortOrderMs)!=null?(e||(e=o("I64"))).of_float(u==null?void 0:u.sortOrderMs):t.minTimestampMs)}})),p=d(a,u,c,n);return[m,p]}function d(e,t,n,r){var a,i;return babelHelpers.extends({},o("MAWMessagesDirection").switchOnMWPMessagesDirection(e,{asc:{maxExternalId:(a=n==null?void 0:n.externalId)!=null?a:r.maxExternalId,minExternalId:r.minExternalId},desc:{maxExternalId:r.maxExternalId,minExternalId:(i=t==null?void 0:t.externalId)!=null?i:r.minExternalId}}))}l.getRangeForFailure=s,l.getRangeExternalIdsForFailure=u,l.mergeMoreMessagesResponseIntoRange=c,l.getNewMsgsRangesExternalIds=d}),98);
__d("MAWMpsM3RangeExtension",["MAWFetchMessagesForMLv2","MAWTimedBridge","WATagsLogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=async function(n){var t=n.chatJid,a=n.count,i=n.direction,l=n.logger,s=n.oldRange,u=await o("MAWFetchMessagesForMLv2").fetchMessagesFromMAW({chatJid:t,direction:i,includeOriginalMsg:!0,pageSize:a,range:s});if(u.success===!1){var c,d=u.payload,m=d==null?"unknown":"["+d.name+"]: "+d.message;if(o("WATagsLogger").TAGS(["maw_message_core","MAWMessageRangeDataSource"]).ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MAWMpsM3RangeExtension: Failed to fetch messages from worker due to ",". Error: ",""])),u.error,m),u.payload instanceof o("MAWTimedBridge").MAWBridgeTimeoutError)return{status:"try_again"};throw(c=u.payload)!=null?c:r("err")("Failed to fetch messages from worker")}return l==null||l.addQPLAnnotations({string:{mps_status:"m3"}}),{extension:u.value,status:"continue"}};l.mpsM3RangeExtension=s}),98);
__d("MAWWaitForACTThreadReadyForMLv2",["MAWMiActGetThreadLifecycleState__DO_NOT_USE","MAWMiActOnActThreadReady"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n,r){var a=await o("MAWMiActGetThreadLifecycleState__DO_NOT_USE").getThreadLifecycleStateByThreadKey(e,t,n);r==null||r.addQPLAnnotations({string:{initial_mi_act_thread_state:a.type}});var i=await o("MAWMiActOnActThreadReady").waitForACTThreadReady(e,t,n);return i}l.waitForACTThreadReadyForMLv2=e}),98);
__d("MLV2DataSourceLogger",["I64","MAWQPLLogger","MWChatInteraction","mergeDeep","performanceNow","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(){return u==null&&(u=r("MAWQPLLogger")(r("qpl")._(25303796,"1974"))),u}var d=new Map;function m(e,t){return(s||(s=o("I64"))).to_string(e)+t}function p(e){var t=e.getTrace(),n=(t==null?void 0:t.completed)!=null,o=(t==null?void 0:t.qplEvent)===r("qpl")._(30605380,"18")||(t==null?void 0:t.qplEvent)===r("qpl")._(30609204,"1682");return!n&&o}function _(t,n,a,i){var l=m(t,n),u=d.get(l);u!=null&&u.markQPLCancel("restart_logger");var _=c().markQPLStart(),f=o("MWChatInteraction").getInteractionTraceForThreadKey((s||(s=o("I64"))).to_string(t)),g=(e||(e=r("performanceNow")))();f==null||f.addMarkerPoint("MLV2_fetch_start","AppTiming",g);var h=function(n,o){var t=(e||(e=r("performanceNow")))(),a={action:n,full_duration:(t-g)/1e3};if(o!=null&&(a=r("mergeDeep")(a,o)),f!=null){var i=p(f),l=n==="CANCEL"&&t-g<50;!i||l||f.addMarkerPoint("MLV2_fetch_end","AppTiming",t,a)}},y=new Set,C={addQPLAnnotations:function(t){c().addQPLAnnotations(_,t)},annotateMessageRangesDataSource:function(t){y.add(t),c().addQPLAnnotations(_,{string_array:{message_ranges_source:Array.from(y.keys())}})},getInstanceKey:function(){return _},markQPLCancel:function(t){c().addQPLAnnotations(_,{string:{cancel_reason:t}}),c().markQPLCancel(_),h("CANCEL"),d.delete(l)},markQPLFailure:function(t){c().markQPLFailure(_,t),h("FAIL"),d.delete(l)},markQPLFailureWithMsg:function(t){c().markQPLFailureWithMsg(_,t),h("FAIL"),d.delete(l)},markQPLPoint:function(t){c().markQPLPoint(_,t)},markQPLSuccess:function(t){c().markQPLSuccess(_),h("SUCCESS",{num_msgs_fetched:t}),d.delete(l)}},b=!1;return f!=null&&p(f)&&(b=!0),C.addQPLAnnotations({bool:{during_chat_open:b},int:{queried_count:a},string:{direction:n,thread_id:s.to_string(t),thread_type:s.to_string(i)}}),d.set(l,C),C}function f(e,t){var n=m(e,t);return d.get(n)}l.startMLV2LoggerForThread=_,l.getMLV2LoggerForThread=f}),98);
__d("MLV2RangeExtensionLogger",["I64","MAWQPLLogger","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){return s==null&&(s=r("MAWQPLLogger")(r("qpl")._(1056843758,"1768"))),s}var c=new Map;function d(t,n){return(e||(e=o("I64"))).to_string(t)+n}function m(t,n,r,a){var i=d(t,n),l=c.get(i);l!=null&&l.markQPLCancel("restart_logger");var s=u().markQPLStart(),m=new Set,p={addQPLAnnotations:function(t){u().addQPLAnnotations(s,t)},annotateMessageRangesDataSource:function(t){m.add(t),u().addQPLAnnotations(s,{string_array:{message_ranges_source:Array.from(m.keys())}})},getInstanceKey:function(){return s},markQPLCancel:function(t){u().addQPLAnnotations(s,{string:{cancel_reason:t}}),u().markQPLCancel(s),c.delete(i)},markQPLFailure:function(t){u().markQPLFailure(s,t),c.delete(i)},markQPLFailureWithMsg:function(t){u().markQPLFailureWithMsg(s,t),c.delete(i)},markQPLPoint:function(t){u().markQPLPoint(s,t)},markQPLSuccess:function(){u().markQPLSuccess(s),c.delete(i)}};return p.addQPLAnnotations({bool:{is_initial_range:(e||(e=o("I64"))).equal(r.minTimestampMs,(e||(e=o("I64"))).max_int)&&(e||(e=o("I64"))).equal(r.maxTimestampMs,(e||(e=o("I64"))).max_int)},int:{page_size:a},string:{direction:n,start_range:JSON.stringify(babelHelpers.extends({},r,{maxTimestampMs:r.maxTimestampMs==null?null:(e||(e=o("I64"))).to_string(r.maxTimestampMs),minTimestampMs:r.minTimestampMs==null?null:(e||(e=o("I64"))).to_string(r.minTimestampMs)})),thread_id:(e||(e=o("I64"))).to_string(t)}}),c.set(i,p),p}function p(e,t){var n=d(e,t);return c.get(n)}l.startRangeExtensionLoggerForThread=m,l.getRangeExtensionLoggerForThread=p}),98);
__d("MessageRangeSet",["I64","ReplayLastSubject","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.value=t,n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.next=function(n){this.value=n,e.prototype.next.call(this,n)},t})(o("ReplayLastSubject").ReplayLastSubject),u=(function(e){function t(t){var n;n=e.call(this,t)||this;for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return o.forEach(function(e){n.subscribe({complete:function(){return e.complete()},error:function(n){return e.error(n)},next:function(n){return e.next(n)}})}),n.next(t),n}return babelHelpers.inheritsLoose(t,e),t})(s),c=(function(){function t(){this.$1=new Set}var n=t.prototype;return n.$2=function(n){for(var t of this.$1){var r=t.value;if((e||(e=o("I64"))).le(r.minTimestampMs,n)&&((e||(e=o("I64"))).ge(r.maxTimestampMs,n)||!r.hasMoreAfter))return t}return null},n.getRangeForTimestamp=function(t){return this.$2(t)},n.upsertRange=function(t){var e=Array.from(this.$1.values()).filter(function(e){return m(e.value,t)});if(e.length===0){var n=new s(t);return this.$1.add(n),n}var r=d.apply(void 0,e.map(function(e){return e.value}).concat([t]));if(e.length===1){var o=e[0];return o.next(r),o}for(var a of e)this.$1.delete(a);var i=babelHelpers.construct(u,[r].concat(e));return this.$1.add(i),i},t})();function d(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(n.length===0)throw r("err")("Cannot merge 0 ranges");for(var i=n[0].threadKey,l=n[0].minTimestampMs,s=n[0].hasMoreAfter,u=n[0].hasMoreBefore,c=n[0].maxMessageId,d=n[0].minMessageId,m=n[0].maxTimestampMs,p=1;p<n.length;p++){var _=n[p];(e||(e=o("I64"))).le(_.minTimestampMs,l)&&((e||(e=o("I64"))).equal(_.minTimestampMs,l)?u=u&&_.hasMoreBefore:u=_.hasMoreBefore,l=_.minTimestampMs,d=_.minMessageId),(e||(e=o("I64"))).ge(_.maxTimestampMs,m)&&((e||(e=o("I64"))).equal(_.maxTimestampMs,m)?s=s&&_.hasMoreAfter:s=_.hasMoreAfter,m=_.maxTimestampMs,c=_.maxMessageId)}return{hasMoreAfter:s,hasMoreBefore:u,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:c,maxTimestampMs:m,minMessageId:d,minTimestampMs:l,threadKey:i}}function m(t,n){var r=(e||(e=o("I64"))).le(n.minTimestampMs,t.minTimestampMs),a=r?n:t,i=r?t:n;return!!p(a,i.minTimestampMs)}function p(t,n){return(e||(e=o("I64"))).ge(n,t.minTimestampMs)&&(e||(e=o("I64"))).le(n,t.maxTimestampMs)}l.MessageRangeSet=c,l.Subject=s}),98);
__d("MpsLoadMessagesStep",["I64","MAWAckLevel","MAWLocalizationType","MAWMessagesDirection","MpsMessageToLoadResponse","MpsOverBridge","MpsToBridgeMessageId","MpsTypes","WATimeUtils","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){var r=e+"CUTOVER",a=o("MpsTypes").toMessageId(r),i=o("MpsTypes").toThreadId(r),l={ack:o("MAWAckLevel").ACK.received,adminContent:[],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE,adminVersion:1,chatJid:e,externalId:r,forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:o("MpsToBridgeMessageId").mpsToBridgeMsgId(i,a),sender:"",sortOrderMs:0,ts:o("WATimeUtils").castToUnixTime(0),type_:"Admin"};t.msgs=[l].concat(t.msgs),n.endCursor=[o("MpsTypes").toTimestamp(0),a]}async function u(t){var n=t.chatJid,a=t.count,i=t.direction,l=t.logger,u=t.oldRange,c=t.oldRangeExternalIds;l==null||l.addQPLAnnotations({bool:{use_mps:!0}});var d=[o("MpsTypes").toTimestamp((e||(e=o("I64"))).to_float(o("MAWMessagesDirection").getI64RangeTimestampForDirection(i,u))),o("MpsTypes").toMessageId(o("MAWMessagesDirection").getRangeMsgIdForDirection(i,u))];l==null||l.markQPLPoint("mps_load_messages_start");var m=await o("MpsOverBridge").mps().loadMessages({debug:{purpose:"load-more"},direction:i,from:d,numMessages:a,threadId:o("MpsTypes").toThreadId(n)});if(m.success===!1)throw l==null||l.markQPLPoint("mps_load_messages_failure"),r("err")("Failed to fetch messages from MPS");var p=o("MAWMessagesDirection").switchOnMWPMessagesDirection(i,{asc:m.value.cursorInfo.hasNext,desc:m.value.cursorInfo.hasPrevious}),_=o("MAWMessagesDirection").switchOnMWPMessagesDirection(i,{asc:m.value.cursorInfo.hasPrevious,desc:m.value.cursorInfo.hasNext}),f=babelHelpers.extends({},o("MpsMessageToLoadResponse").messageToLoadMsgsResponse(m.value.messages,l),{hasMoreAfter:p,hasMoreBefore:_});_===!1&&i==="desc"&&s(n,f,m.value.cursorInfo);var g=u,h=c,y=m.value.cursorInfo.endCursor;return y!=null?(g=babelHelpers.extends({},u,o("MAWMessagesDirection").switchOnMWPMessagesDirection(i,{asc:{hasMoreAfter:p,isLoadingAfter:!1,maxMessageId:y[1],maxTimestampMs:(e||(e=o("I64"))).of_float(y[0])},desc:{hasMoreBefore:_,isLoadingBefore:!1,minMessageId:y[1],minTimestampMs:e.of_float(y[0])}})),h=o("MAWMessagesDirection").switchOnMWPMessagesDirection(i,{asc:{maxExternalId:y[1],minExternalId:c.minExternalId},desc:{maxExternalId:c.maxExternalId,minExternalId:y[1]}})):g=babelHelpers.extends({},u,o("MAWMessagesDirection").switchOnMWPMessagesDirection(i,{asc:{hasMoreAfter:p,isLoadingAfter:!1},desc:{hasMoreBefore:_,isLoadingBefore:!1}})),l==null||l.markQPLPoint("mps_load_messages_end"),{extension:f,status:"complete_with_range_override",updatedRange:g,updatedRangeExternalIds:h}}l.addCutoverAdminMessage=s,l.MpsLoadMessagesStep=u}),98);
__d("switchMap",["relay-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("relay-runtime").Observable.create(function(n){var r,o=e.subscribe({complete:n.complete,error:n.error,next:function(o){var e;(e=r)==null||e.unsubscribe(),r=t(o).subscribe(n)}});return function(){var e;(e=r)==null||e.unsubscribe(),o.unsubscribe()}})}l.default=e}),98);
__d("MAWMessageRangeDataSourceV2",["I64","LSDatabaseSingleton","MAWEBCombinedSwitch","MAWMessageIntegrityTruncateStatus","MAWMessageRangeDataExternalObservables","MAWMessagesPaginationUtils","MAWMessagesRangesUtils","MAWMpsGating","MAWMpsM3RangeExtension","MAWPutMessagesToDB","MAWSubscribeToLSTruncateMetadataThreads","MAWWaitForACTThreadReadyForMLv2","MLV2DataSourceLogger","MLV2RangeExtensionLogger","MessageRangeSet","MpsLoadMessagesStep","err","gkx","nullthrows","relay-runtime","switchMap"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=5,c=(function(){function t(t,n){var a=this;this.$2=new(o("MessageRangeSet")).MessageRangeSet,this.$3=u,this.$4=new(o("MAWMessageRangeDataExternalObservables")).MAWMessageRangeDataExternalObservables,this.getOrCreateMessageRangeCoveringCursor=function(t,n){var r,i;n==null||n.annotateMessageRangesDataSource("MAWMessageRangeDataSourceV2"),n==null||n.markQPLPoint("maw_get_or_create_range_start");var l=a.$2.getRangeForTimestamp(t.timestampMs);if(l!=null){n==null||n.markQPLPoint("maw_preexisting_range"),n==null||n.markQPLPoint("maw_get_or_create_range_end");var s={maxExternalId:null,minExternalId:null};return a.$4.getOrCreateExternalObservableForRange(l,s)}var u=(e||(e=o("I64"))).equal(t.timestampMs,e.max_int),c={hasMoreAfter:!u,hasMoreBefore:!0,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:(r=t.messageId)!=null?r:"",maxTimestampMs:t.timestampMs,minMessageId:(i=t.messageId)!=null?i:"",minTimestampMs:t.timestampMs,threadKey:a.$1},d=a.$2.upsertRange(c);return o("MAWMessageIntegrityTruncateStatus").setThreadLastUpsertedRange(a.$1,c,{maxExternalId:t==null?void 0:t.externalId,minExternalId:t==null?void 0:t.externalId}),n==null||n.markQPLPoint("maw_range_created"),n==null||n.markQPLPoint("maw_get_or_create_range_end"),a.$4.getOrCreateExternalObservableForRange(d,{maxExternalId:t==null?void 0:t.externalId,minExternalId:t==null?void 0:t.externalId})},this.$5=function(e){var t=o("MLV2DataSourceLogger").getMLV2LoggerForThread(a.$1,e),n=o("MLV2RangeExtensionLogger").getRangeExtensionLoggerForThread(a.$1,e),r={addQPLAnnotations:function(r){t==null||t.addQPLAnnotations(r),n==null||n.addQPLAnnotations(r)},annotateMessageRangesDataSource:function(r){t==null||t.annotateMessageRangesDataSource(r),n==null||n.annotateMessageRangesDataSource(r)},getInstanceKey:function(){var e;return(e=t==null?void 0:t.getInstanceKey())!=null?e:0},markQPLCancel:function(r){t==null||t.markQPLCancel(r),n==null||n.markQPLCancel(r)},markQPLFailure:function(r){t==null||t.markQPLFailure(r),n==null||n.markQPLFailure(r)},markQPLFailureWithMsg:function(r){t==null||t.markQPLFailureWithMsg(r),n==null||n.markQPLFailureWithMsg(r)},markQPLPoint:function(r,o){t==null||t.markQPLPoint(r,o),n==null||n.markQPLPoint(r,o)},markQPLSuccess:function(r){t==null||t.markQPLSuccess(r),n==null||n.markQPLSuccess()}};return r},this.extendRange=async function(t,n,r,i){var l=a.$5(r);l.annotateMessageRangesDataSource("MAWMessageRangeDataSourceV2"),l.markQPLPoint("maw_v2_extend_range_start");var s=a.$2.getRangeForTimestamp(t.minTimestampMs);if(s==null)return l.markQPLPoint("extend_range_invalid"),Promise.resolve();var u=s.value;l.markQPLPoint("get_range_external_ids_start");var c=await o("MAWMessagesPaginationUtils").getMessagesRangesV2ExternalIdsIfChanged(t,u,n);if(l.markQPLPoint("get_range_external_ids_end"),r==="asc"&&(!u.hasMoreAfter||u.isLoadingAfter)||r==="desc"&&(!u.hasMoreBefore||u.isLoadingBefore))return l.markQPLPoint("extend_range_skipped"),Promise.resolve();var d=a.$4.getOrCreateExternalObservableForRange(s,c);d.next({range:babelHelpers.extends({},u,{isLoadingAfter:u.isLoadingAfter||r==="asc",isLoadingBefore:u.isLoadingBefore||r==="desc"}),rangeExternalIds:c});var m={maxMessageId:s.value.maxMessageId,maxTimestampMs:s.value.maxTimestampMs,minMessageId:s.value.minMessageId,minTimestampMs:s.value.minTimestampMs};return l.markQPLPoint("perf_range_extension_start"),a.$6(s.value,c,d,r,i).then(function(){var t=(e||(e=o("I64"))).equal(m.maxTimestampMs,s.value.maxTimestampMs)&&(e||(e=o("I64"))).equal(m.minTimestampMs,s.value.minTimestampMs)&&s.value.maxMessageId===m.maxMessageId&&s.value.minMessageId===m.minMessageId;l.markQPLPoint("perf_range_extension_end"),l.addQPLAnnotations({bool:{extended_range_is_identical:t}})}).catch(function(e){throw l.markQPLPoint("extend_range_failed"),l.addQPLAnnotations({string:{range_extension_error:e instanceof Error?e.message:"unknown_error"}}),e})},this.$6=async function(e,t,n,r,i){var l=await(s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton,u=a.$5(r);u==null||u.markQPLPoint("maw_wait_act_thread_start");var c=await o("MAWWaitForACTThreadReadyForMLv2").waitForACTThreadReadyForMLv2(l.tables,a.$1,"MAWMessageRangeDataSourceV2",u).then(function(e){return e.chatJid});u==null||u.markQPLPoint("maw_wait_act_thread_end");var d=a.$7(),m=null;for(var p of d){var _=p.name,f=p.step,g=await a.$8(f,_,{chatJid:c,count:i,db:l,direction:r,logger:u,oldRange:e,oldRangeExternalIds:t,prevResponse:m},n);if(g.shouldTerminate)return;m=g.extension}},this.$8=async function(e,t,n,i){var l=n.db,s=n.direction,u=n.logger,c=n.oldRange,d=n.oldRangeExternalIds;u==null||u.markQPLPoint("maw_range_"+t+"_start");var m=await e(n);if(u==null||u.markQPLPoint("maw_range_"+t+"_end"),m.status==="try_again"){if(u==null||u.markQPLPoint("maw_range_"+t+"_retry"),r("gkx")("7409")&&a.$3>0)return u==null||u.markQPLPoint("maw_range_"+t+"_timed_out"),a.$3-=1,i.next({range:babelHelpers.extends({},c,{isLoadingAfter:!1,isLoadingBefore:!1}),rangeExternalIds:d}),{shouldTerminate:!0};throw r("err")("Timed out for step: "+t)}return m.status==="complete"?(u==null||u.markQPLPoint("insert_msgs_to_lsdb_start"),u==null||u.addQPLAnnotations({int:{num_msgs_to_insert:m.extension.msgs.length}}),await o("MAWPutMessagesToDB").insertMessageResponseIntoDatabase(l,m.extension,u==null?void 0:u.getInstanceKey()),u==null||u.markQPLPoint("insert_msgs_to_lsdb_end"),u==null||u.markQPLPoint("maw_upsert_range_start"),a.$9(c,d,i,s,m.extension),u==null||u.markQPLPoint("maw_upsert_range_end"),{shouldTerminate:!0}):m.status==="complete_with_range_override"?(u==null||u.markQPLPoint("insert_msgs_to_lsdb_start"),u==null||u.addQPLAnnotations({int:{num_msgs_to_insert:m.extension.msgs.length}}),await o("MAWPutMessagesToDB").insertMessageResponseIntoDatabase(l,m.extension,u==null?void 0:u.getInstanceKey()),u==null||u.markQPLPoint("insert_msgs_to_lsdb_end"),u==null||u.markQPLPoint("maw_upsert_range_start"),a.$10(i,m.updatedRange,m.updatedRangeExternalIds),u==null||u.markQPLPoint("maw_upsert_range_end"),{shouldTerminate:!0}):{extension:m.extension,shouldTerminate:!1}},this.$9=function(e,t,n,r,i){var l=o("MAWMessagesRangesUtils").mergeMoreMessagesResponseIntoRange(e,t,i,r),s=l[0],u=l[1];a.$10(n,s,u)},this.$1=t,this.isEBEnabled=n}var n=t.prototype;return n.$7=function(){var e={name:"fallback",step:function(t){var e=t.prevResponse;return Promise.resolve({extension:r("nullthrows")(e),status:"complete"})}};return o("MAWMpsGating").isMpsMessageRendering()?[{name:"mps_load_messages",step:o("MpsLoadMessagesStep").MpsLoadMessagesStep},e]:[{name:"mps_m3_fetch_data",step:o("MAWMpsM3RangeExtension").mpsM3RangeExtension},e]},n.$10=function(t,n,r){var e=this.$2.upsertRange(n);o("MAWMessageIntegrityTruncateStatus").setThreadLastUpsertedRange(this.$1,n,r),t.next({range:e.value,rangeExternalIds:r})},t})();function d(){return o("relay-runtime").Observable.create(function(e){var t=o("MAWEBCombinedSwitch").MAWEBCombinedSwitch.onSet(function(t){e.next(t===!0)});return e.next(o("MAWEBCombinedSwitch").MAWEBCombinedSwitch.isEnabled()),function(){t()}})}var m=(function(){function t(t){var n=this;this.$1=new Map,this.$3=null,this.getOrCreateMessageRangeCoveringCursor=function(e,t){var o=e.threadKey;return r("switchMap")(n.$2,function(r){return n.$4(o,r).getOrCreateMessageRangeCoveringCursor(e,t)})},this.extendRange=function(t,a,i,l){var s=t.threadKey,u=o("MLV2RangeExtensionLogger").startRangeExtensionLoggerForThread(s,i,t,l);return n.$1.has((e||(e=o("I64"))).to_string(s))?r("nullthrows")(n.$1.get((e||(e=o("I64"))).to_string(s))).extendRange(t,a,i,l).then(function(){u.markQPLSuccess()}).catch(function(e){throw u.markQPLFailure(e),e}):(u.markQPLFailure(r("err")("thread range not found in cache")),Promise.resolve())},this.$2=d(),this.$3=o("MAWSubscribeToLSTruncateMetadataThreads").subscribeToLSTruncateMetadataThreads(t,function(t,r){var a=(e||(e=o("I64"))).to_string(r);n.$1.delete(a)&&o("MAWMessageIntegrityTruncateStatus").setThreadThuncated(r)})}var n=t.prototype;return n.$4=function(n,a){var t=(e||(e=o("I64"))).to_string(n);if(!this.$1.has(t)){var i=new c(n,a);this.$1.set(t,i)}var l=r("nullthrows")(this.$1.get(t));return l.isEBEnabled!==a&&(l=new c(n,a),this.$1.set(t,l)),l},t})(),p,_;function f(e){return(p==null||_!==e)&&(_=e,p=new m(e)),p}l.default=f}),98);
__d("MAWPreloadSecureMessagesRangeDataSource",["MAWMessageRangeDataSourceV2"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("MAWMessageRangeDataSourceV2")}),98);
__d("MAWPreloadSecureMessages",["I64","LSAuthorityLevel","LSIntEnum","LSResult","MAWMessagesDirection","MAWPreloadSecureMessagesRangeDataSource","MWV2OnAuthoritativeThreadInsert","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=async function(n,a,i,l){var t;if(!(e||(e=o("I64"))).equal(l,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE)))return Promise.resolve();var u=r("MAWPreloadSecureMessagesRangeDataSource")(n),c,d=await new Promise(function(t,n){c=u.getOrCreateMessageRangeCoveringCursor({externalId:null,messageId:null,threadKey:a,timestampMs:(e||(e=o("I64"))).max_int}).subscribe({complete:t,error:n,next:function(n){t(n)}})});if((t=c)==null||t.unsubscribe(),d&&o("MAWMessagesDirection").isFirstPageRange(d.range,"desc"))return u.extendRange(d.range,{maxExternalId:null,minExternalId:null},"desc",i)},c=async function(n,a){var t=await o("ReQL").firstAsync(o("ReQL").fromTableDescending(n.tables.threads).getKeyRange(a));if(t==null)return null;if((e||(e=o("I64"))).equal(t.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE)))return t;var i=t.clientThreadKey;return i!=null?new Promise(function(e){o("MWV2OnAuthoritativeThreadInsert").onAuthoritativeThreadInsert(r("LSResult")(i),n,function(t){return e(t)})}):null},d=async function(t,n,r){var e=await c(t,n);return e==null?Promise.resolve():u(t,e.threadKey,r,e.authorityLevel)};l.preloadSecureMessages=u,l.preloadSecureMessagesByThreadKey=d}),98);
__d("MWCMInboxHeaderCommunityGroupName.react",["fbt","CometPageletWithDiv.react","MWCMThreadTypes.react","Promise","react","react-compiler-runtime","useCommunityFolder"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react"));function d(e){return e}function m(t){var a=o("react-compiler-runtime").c(11),i=t.renderWrapper,l=t.thread,u=i!=null?i:d,m=r("useCommunityFolder")(l);if(m==null)throw(e||(e=n("Promise"))).resolve();var p=l.cannotReplyReason==="broadcast_chat_read_only",_;a[0]!==p||a[1]!==l.threadType?(_=o("MWCMThreadTypes.react").isBroadcastThread(l.threadType)&&!p?s._(/*BTDS*/"Broadcast"):o("MWCMThreadTypes.react").isPrivateThread(l.threadType)?s._(/*BTDS*/"Invite only"):null,a[0]=p,a[1]=l.threadType,a[2]=_):_=a[2];var f=_,g;a[3]!==f||a[4]!==m.name||a[5]!==p||a[6]!==l.threadType?(g=o("MWCMThreadTypes.react").isBroadcastThread(l.threadType)&&!p?c.jsxs(c.Fragment,{children:[f," ",f!=null?"\u2022":null," ",m.name]}):c.jsxs(c.Fragment,{children:[m.name," ",f!=null?"\u2022":null," ",f]}),a[3]=f,a[4]=m.name,a[5]=p,a[6]=l.threadType,a[7]=g):g=a[7];var h;return a[8]!==u||a[9]!==g?(h=u(g),a[8]=u,a[9]=g,a[10]=h):h=a[10],h}function p(e){return c.jsx(o("CometPageletWithDiv.react").Placeholder,{className:"x193iq5w",fallback:null,name:"MWCMInboxHeaderCommunityGroupName",children:c.jsx(m,babelHelpers.extends({},e))})}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),226);
__d("MWCMSelectiveSyncTTRCQPLLoggingUtils",["I64","QPLUserFlow","ReQL","ReQLSuspense","qpl","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e=["text"],s=["text"],u,c,d=r("qpl")._(25310806,"1365");function m(e){var t,n=(c||(c=r("useReStore")))(),a=(t=o("ReQLSuspense").useArray(function(){return o("ReQL").fromTableAscending(n.tables.messages.index("messageDisplayOrder")).getKeyRange(e).take(20)},[n,e],i.id+":35"))!=null?t:[];return a}function p(e){var t=o("react-compiler-runtime").c(6),n=(c||(c=r("useReStore")))(),a;t[0]!==n.tables.thread_point_query_ttrc||t[1]!==e?(a=function(){return o("ReQL").fromTableAscending(n.tables.thread_point_query_ttrc).getKeyRange(e)},t[0]=n.tables.thread_point_query_ttrc,t[1]=e,t[2]=a):a=t[2];var l;t[3]!==n||t[4]!==e?(l=[n,e],t[3]=n,t[4]=e,t[5]=l):l=t[5];var s=o("ReQLSuspense").useFirst(a,l,i.id+":48");if(s!=null)return s}function _(e,t,n){r("QPLUserFlow").endSuccess(d,{annotations:{string:{hasMessageDataChanged:t,status:"completed"}},instanceKey:e,timestamp:n!=null?n:void 0})}function f(e,t,n,a){r("QPLUserFlow").start(d,{annotations:{string:{thread_id:(u||(u=o("I64"))).to_string(t),thread_subtype:a?(u||(u=o("I64"))).to_string(a):null,thread_type:u.to_string(n)}},instanceKey:e})}function g(e,t){r("QPLUserFlow").addPoint(d,t,{instanceKey:e})}function h(e){r("QPLUserFlow").addPoint(d,"selective_sync_remediation_end",{instanceKey:e}),r("QPLUserFlow").endSuccess(d,{annotations:{string:{status:"skipped"}},instanceKey:e})}function y(t,n){return t.length!==n.length?!1:!t.some(function(t,r){var o=n[r],a=o.text,i=babelHelpers.objectWithoutPropertiesLoose(o,e),l=t.text,u=babelHelpers.objectWithoutPropertiesLoose(t,s);if(JSON.stringify(i)!==JSON.stringify(u))return!0})}l.useLast20Messages=m,l.useTPQEntry=p,l.logCompleteEndSuccess=_,l.logEventStreamStart=f,l.logPoint=g,l.logSkippedEndSuccess=h,l.isMessageDataUnchanged=y}),98);
__d("MWChatTypingIndicator.react",["MessengerWebUXLogger","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u="x1h06q2e-B",c="x1yitzd3-B",d={dot:{alignItems:"x6s0dn4",animationDuration:"xmg6eyc",animationIterationCount:"xa4qsjk",animationName:"xwnhzmj",animationTimingFunction:"x4hg4is",backgroundColor:"x1iuwi03",borderStartStartRadius:"xr9e8f9",borderStartEndRadius:"x1e4oeot",borderEndEndRadius:"x1ui04y5",borderEndStartRadius:"x6en5u8",display:"x78zum5",height:"xqu0tyb",marginInlineStart:"xm2jcoa",marginInlineEnd:"x1mpyi22",marginLeft:null,marginRight:null,width:"x51ohtg",$$css:!0},dot1:{animationDelay:"x1t83zlg",$$css:!0},dot1Opacity:{animationDelay:"x1uzojwf",$$css:!0},dot2:{animationDelay:"x1x1c4bx",$$css:!0},dot2Opacity:{animationDelay:"xfjzax6",$$css:!0},dot3:{animationDelay:"x1xwhvez",$$css:!0},dot3Opacity:{animationDelay:"x1la68h3",$$css:!0},dotOpacity:{animationDuration:"xmg6eyc",animationIterationCount:"xa4qsjk",animationName:"x1bcwpiy",animationTimingFunction:"x4hg4is",opacity:"x1hc1fzr",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",height:"x1ta3ar0",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(10),n=e.threadType,a;t[0]!==n?(a={eventName:"show_typing_indicators",threadType:n},t[0]=n,t[1]=a):a=t[1];var i=r("MessengerWebUXLogger").useImpressionLoggerRef(a),l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l=[d.dotOpacity,d.dot1Opacity],t[2]=l):l=t[2];var u;t[3]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx(o("react-strict-dom").html.div,{style:l,children:s.jsx(o("react-strict-dom").html.div,{style:[d.dot,d.dot1]})}),t[3]=u):u=t[3];var c;t[4]===Symbol.for("react.memo_cache_sentinel")?(c=[d.dotOpacity,d.dot2Opacity],t[4]=c):c=t[4];var m;t[5]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx(o("react-strict-dom").html.div,{style:c,children:s.jsx(o("react-strict-dom").html.div,{style:[d.dot,d.dot2]})}),t[5]=m):m=t[5];var p;t[6]===Symbol.for("react.memo_cache_sentinel")?(p=[d.dotOpacity,d.dot3Opacity],t[6]=p):p=t[6];var _;t[7]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(o("react-strict-dom").html.div,{style:p,children:s.jsx(o("react-strict-dom").html.div,{style:[d.dot,d.dot3]})}),t[7]=_):_=t[7];var f;return t[8]!==i?(f=s.jsxs(o("react-strict-dom").html.div,{ref:i,style:d.root,children:[u,m,_]}),t[8]=i,t[9]=f):f=t[9],f}l.default=m}),98);
__d("MWCreatorMessagingUtils",["I64","LSIntEnum","LSThreadBitOffset","MWLSThread","MessagingFolderTag","MessagingThreadSubtype"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){if(t.metadata==null||t.threadSubtype==null)return!1;var n=JSON.parse(t.metadata),a=n.thread_initiator_id;return a!=null&&t.threadSubtype!=null&&(e||(e=o("I64"))).equal(t.threadSubtype,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingThreadSubtype").PAGE_TO_USER))&&(e||(e=o("I64"))).equal((e||(e=o("I64"))).of_string(a),t.threadKey)}function c(e){return _(e)&&o("LSThreadBitOffset").has(21,e)}function d(e){return e.folderName===r("MessagingFolderTag").INBOX?"inbox":e.folderName===r("MessagingFolderTag").PENDING?"message_requests_ymk":e.folderName===r("MessagingFolderTag").SPAM?"message_requests_spam":"unknown"}function m(e){var t=o("MWLSThread").useThread(e,p);return t!=null?t:!1}function p(e){return c(e)}var _=function(t){return(s||(s=o("LSIntEnum"))).equal(t.threadSubtype,r("MessagingThreadSubtype").PAGE_TO_PAGE)||(s||(s=o("LSIntEnum"))).equal(t.threadSubtype,r("MessagingThreadSubtype").PAGE_TO_USER)};l.isAPPlusInitiatedThread=u,l.isAPPlusMessageRequest=c,l.fetchQPLEntrypoint=d,l.useIsAPPlusMessageRequestFromThreadKey=m,l.isPageToAnyThread=_}),98);
__d("MWEnsureCutoverOpenThreadExists",["Int64Hooks","LSFactory","LSIntEnum","LSVerifyThreadRowExistsStoredProcedure","MAWThreadCutover","MWGetChatTabOpenQPLEventTrace","ReQL","ReQLSuspense","promiseDone","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(e,t){var n=await o("ReQL").firstAsync(o("MAWThreadCutover").getMiActMappings(e,t));if(n!=null){var a=await o("ReQL").firstAsync(o("MAWThreadCutover").getCutoverThreadsByJid(e,n.jid));if(a!=null){var l=a.openThreadId,u=await o("ReQL").firstAsync(o("MAWThreadCutover").getThreadByCutoverThread(e,a));if(u==null)return e.runInTransaction(function(e){return r("LSVerifyThreadRowExistsStoredProcedure")(r("LSFactory")(e),{syncGroup:(s||(s=o("LSIntEnum"))).ofNumber(1),threadKey:l})},"readwrite",void 0,void 0,i.id+":54")}}}function c(t){var n=o("react-compiler-runtime").c(10),a=(e||(e=r("useReStore")))(),l=o("MAWThreadCutover").useGetCutoverOpenThreadKey(t),u,c;n[0]!==a||n[1]!==l?(u=function(){return l==null?o("ReQL").empty():o("ReQL").fromTableAscending(a.tables.threads).getKeyRange(l)},c=[a,l],n[0]=a,n[1]=l,n[2]=u,n[3]=c):(u=n[2],c=n[3]);var m=o("ReQLSuspense").useFirst(u,c,i.id+":68"),p,_;n[4]!==m||n[5]!==a||n[6]!==l||n[7]!==t?(p=function(){m==null&&l!=null&&r("promiseDone")(a.runInTransaction(function(e){return r("LSVerifyThreadRowExistsStoredProcedure")(r("LSFactory")(e),{syncGroup:(s||(s=o("LSIntEnum"))).ofNumber(1),threadKey:l})},"readwrite",void 0,void 0,i.id+":78"),function(){r("MWGetChatTabOpenQPLEventTrace")(t,d)})},_=[m,a,l,t],n[4]=m,n[5]=a,n[6]=l,n[7]=t,n[8]=p,n[9]=_):(p=n[8],_=n[9]),o("Int64Hooks").useEffectInt64(p,_)}function d(e){e.addMarkerPoint("requested_cutover_open_thread","AppTiming")}l.ensureCutoverOpenThreadExists=u,l.useMWEnsureCutoverOpenThreadExists=c}),98);
__d("withCometPlaceholder",["CometPlaceholder.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=function(t,n,o){return n===void 0&&(n=null),(function(e){return s.jsx(r("CometPlaceholder.react"),{fallback:n,name:o,children:s.jsx(t,babelHelpers.extends({},e))})})};l.withCometPlaceholder=u}),98);
__d("MWPPresenceBadge.react",["fbt","BaseStyledBadge.react","MessengerMSplitFlag","react","react-compiler-runtime","withCometPlaceholder"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=o("withCometPlaceholder").withCometPlaceholder(m,null,"MWPPresenceBadge"),d={border:{borderTopColor:"x6zyg47",borderInlineEndColor:"x1lu4ftm",borderBottomColor:"xpn8fn3",borderInlineStartColor:"x114g2xr",$$css:!0},green:{backgroundColor:"xv9rvxn",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(4),n=e.borderThemeColor,a=e.isActiveStatePresence,i=e.size,l;return t[0]!==n||t[1]!==a||t[2]!==i?(l=!r("MessengerMSplitFlag").is_msplit_account&&a?u.jsx(r("BaseStyledBadge.react"),{accessibilityText:s._(/*BTDS*/"Active now"),border:!0,colorXStyle:d.green,size:i,xstyle:n!=null?n:d.border}):null,t[0]=n,t[1]=a,t[2]=i,t[3]=l):l=t[3],l}l.default=c}),226);
__d("MWPReQLPresenceBadge.react",["MWPPresenceBadge.react","cr:7905","react","react-compiler-runtime","withCometPlaceholder"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=o("withCometPlaceholder").withCometPlaceholder(c,null,"MWPReQLPresenceBadge");function c(e){var t=o("react-compiler-runtime").c(4),a=e.borderThemeColor,i=e.size,l=e.threadKey,u=n("cr:7905")(l),c;return t[0]!==a||t[1]!==u||t[2]!==i?(c=s.jsx(r("MWPPresenceBadge.react"),{borderThemeColor:a,isActiveStatePresence:u,size:i}),t[0]=a,t[1]=u,t[2]=i,t[3]=c):c=t[3],c}l.default=u}),98);
__d("MWFacepileBadge.react",["CometPlaceholder.react","MWPReQLPresenceBadge.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),n=e.borderThemeColor,a=e.size,i=e.threadKey,l;return t[0]!==n||t[1]!==a||t[2]!==i?(l=s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWFacepileBadge",children:s.jsx(r("MWPReQLPresenceBadge.react"),{borderThemeColor:n,size:a,threadKey:i})}),t[0]=n,t[1]=a,t[2]=i,t[3]=l):l=t[3],l}l.default=u}),98);
__d("MWPContactContext.react",["react","react-compiler-runtime","shallowEqualI64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useMemo,m=u.useRef,p=s.createContext({authorName:void 0,contact:void 0,nickname:void 0}),_=s.createContext({authorName:void 0,contact:void 0,nickname:void 0});function f(){return c(p)}function g(){return c(_)}function h(e){var t=o("react-compiler-runtime").c(14),n=e.children,r=e.contact,a=e.nickname,i;if(a!=null)i=a;else if(r!=null){var l=r.firstName;i=l!=null?l:r.name}else i=void 0;var u=i,c;t[0]!==u||t[1]!==r||t[2]!==a?(c={authorName:u,contact:r,nickname:a},t[0]=u,t[1]=r,t[2]=a,t[3]=c):c=t[3];var d=c,m=y(r),f;t[4]!==u||t[5]!==a||t[6]!==m?(f={authorName:u,contact:m,nickname:a},t[4]=u,t[5]=a,t[6]=m,t[7]=f):f=t[7];var g=f,h;t[8]!==n||t[9]!==g?(h=s.jsx(_.Provider,{value:g,children:n}),t[8]=n,t[9]=g,t[10]=h):h=t[10];var C;return t[11]!==d||t[12]!==h?(C=s.jsx(p.Provider,{value:d,children:h}),t[11]=d,t[12]=h,t[13]=C):C=t[13],C}function y(e){var t=m(),n=e?{blockedByViewerStatus:e.blockedByViewerStatus,capabilities:e.capabilities,capabilities2:e.capabilities2,contactTypeExact:e.contactTypeExact,name:e.name,profilePictureFallbackUrl:e.profilePictureFallbackUrl,profilePictureUrl:e.profilePictureUrl,profilePictureUrlExpirationTimestampMs:e.profilePictureUrlExpirationTimestampMs,secondaryName:e.secondaryName}:void 0;return o("shallowEqualI64").shallowEqualI64(t.current,n)||(t.current=n),t.current}l.useMWPContactFullContext=f,l.useMWPContactStableContext=g,l.MWPContactContextProvider=h}),98);
__d("MWGroupBlockingProtectionUtils",["fbt","FBLogger","I64","LSContactBlockedByViewerStatus","LSIntEnum","MWPContactContext.react","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c;function d(t){var n=o("react-compiler-runtime").c(8),a=(c||(c=r("useReStore")))(),l;n[0]!==a.tables.threads||n[1]!==t?(l=function(){return o("ReQL").fromTableAscending(a.tables.threads,["threadType"]).getKeyRange(t).map(m)},n[0]=a.tables.threads,n[1]=t,n[2]=l):l=n[2];var s;n[3]!==a||n[4]!==t?(s=[a,t],n[3]=a,n[4]=t,n[5]=s):s=n[5];var d=o("ReQLSuspense").useFirst(l,s,i.id+":30");if(d==null)return!1;var p;return n[6]!==d?(p=(e||(e=o("I64"))).equal(d,(u||(u=o("LSIntEnum"))).ofNumber(2))||(e||(e=o("I64"))).equal(d,(u||(u=o("LSIntEnum"))).ofNumber(16))||(e||(e=o("I64"))).equal(d,(u||(u=o("LSIntEnum"))).ofNumber(18)),n[6]=d,n[7]=p):p=n[7],p}function m(e){return e.threadType}function p(t){var n=o("react-compiler-runtime").c(3),a=d(t),i=o("MWPContactContext.react").useMWPContactStableContext(),l=i.contact,s;return n[0]!==l||n[1]!==a?(s=a&&l?!(e||(e=o("I64"))).equal(l.blockedByViewerStatus,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED)):!1,n[0]=l,n[1]=a,n[2]=s):s=n[2],s}function _(t,n){var a=o("react-compiler-runtime").c(7),l=(c||(c=r("useReStore")))(),s,m;a[0]!==l||a[1]!==t?(s=function(){return t!=null?o("ReQL").fromTableAscending(l.tables.contacts).getKeyRange(t):o("ReQL").empty()},m=[l,t],a[0]=l,a[1]=t,a[2]=s,a[3]=m):(s=a[2],m=a[3]);var p=o("ReQLSuspense").useFirst(s,m,i.id+":69"),_=d(n),f;return a[4]!==p||a[5]!==_?(f=_&&p?!(e||(e=o("I64"))).equal(p.blockedByViewerStatus,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED)):!1,a[4]=p,a[5]=_,a[6]=f):f=a[6],f}function f(t,n){var a,l,d=o("react-compiler-runtime").c(8),m=(c||(c=r("useReStore")))(),p=(a=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableDescending(m.tables.messages).getKeyRange(t)},[m,t],i.id+":92"))==null?void 0:a.senderId,_;d[0]!==m.tables.contacts||d[1]!==p?(_=function(){return p!=null?o("ReQL").fromTableAscending(m.tables.contacts).getKeyRange(p):o("ReQL").empty()},d[0]=m.tables.contacts,d[1]=p,d[2]=_):_=d[2];var f;d[3]!==m||d[4]!==p?(f=[m,p],d[3]=m,d[4]=p,d[5]=f):f=d[5];var g=o("ReQLSuspense").useFirst(_,f,i.id+":96"),h=g==null?!1:!(e||(e=o("I64"))).equal(g.blockedByViewerStatus,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED)),y=(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(2))||(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(16))||(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(18));if(!(y&&h))return null;var C=(l=g==null?void 0:g.firstName)!=null?l:g==null?void 0:g.name;if(C==null)return r("FBLogger")("mwb_prevention_care").mustfix("Empty first name for blocked contact"),null;var b;return d[6]!==C?(b=s._(/*BTDS*/"{blocked contact's name} sent a message.",[s._param("blocked contact's name",C)]).toString(),d[6]=C,d[7]=b):b=d[7],b}l.useShouldEnableBlockingProtection=d,l.useMWGetSnippetForBlockingProtection=f,l.useMWIsContactBlocked=p,l.useMWIsMessageSentByBlockedContact=_}),226);
__d("XCometCommunityThreadsControllerRouteBuilder",["jsExtraRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsExtraRouteBuilder")("/messages/c/{folder_id}/t/{thread_key}/",Object.freeze({}),["/messages/c/{folder_id}/"],void 0),s=e;l.default=s}),98);
__d("XMessengerDotComCometCommunityThreadsControllerRouteBuilder",["jsExtraRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsExtraRouteBuilder")("/c/{folder_id}/t/{thread_key}/",Object.freeze({}),["/c/{folder_id}/"],void 0),s=e;l.default=s}),98);
__d("MWInboxCommunityThreadsRouteBuilder",["CurrentEnvironment","XCometCommunityThreadsControllerRouteBuilder","XMessengerDotComCometCommunityThreadsControllerRouteBuilder"],(function(t,n,r,o,a,i,l){"use strict";var e=r("CurrentEnvironment").facebookdotcom?{buildUriForMessage:function(t){var e=t.folder_id,n=t.thread_key;return r("XCometCommunityThreadsControllerRouteBuilder").buildUri({folder_id:e,thread_key:n})},buildURL:function(t){var e=t.folder_id,n=t.thread_key;return r("XCometCommunityThreadsControllerRouteBuilder").buildURL({folder_id:e,thread_key:n})},buildURLWithoutThread:function(t){var e=t.folder_id;return r("XCometCommunityThreadsControllerRouteBuilder").buildExtraURL("/messages/c/{folder_id}/",{folder_id:e})}}:{buildUriForMessage:function(t){var e=t.folder_id,n=t.thread_key;return r("XMessengerDotComCometCommunityThreadsControllerRouteBuilder").buildUri({folder_id:e,thread_key:n})},buildURL:function(t){var e=t.folder_id,n=t.thread_key;return r("XMessengerDotComCometCommunityThreadsControllerRouteBuilder").buildURL({folder_id:e,thread_key:n})},buildURLWithoutThread:function(t){var e=t.folder_id;return r("XMessengerDotComCometCommunityThreadsControllerRouteBuilder").buildExtraURL("/c/{folder_id}/",{folder_id:e})}},s=e.buildURL,u=e.buildURLWithoutThread;l.buildURL=s,l.buildURLWithoutThread=u}),98);
__d("SelectiveSyncTTRCLogger.react",["CometPlaceholder.react","I64","Int64Hooks","LSIntEnum","LSThreadPointQueryTTRCStatus","MWCMSelectiveSyncTTRCQPLLoggingUtils","Random","ReQL","ReQLSuspense","areEqual","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=d||(d=o("react")),p=d.useRef;function _(t){var n=o("react-compiler-runtime").c(40),a=t.instanceKey,l=t.isReportThreadViewOpenSprocCalled,d=t.reportThreadViewOpenCalledTimestamp,m=t.setInstanceKey,_=t.threadKey,f=t.threadSubtype,g=t.threadType,h=p(!1),y=(e||(e=r("useReStore")))(),C;n[0]!==y.tables.messages||n[1]!==_?(C=o("ReQLSuspense").toArray(o("ReQL").fromTableDescending(y.tables.messages.index("messageDisplayOrder")).getKeyRange(_).take(20),i.id+":56"),n[0]=y.tables.messages,n[1]=_,n[2]=C):C=n[2];var b=C,v;n[3]!==y.tables.reactions||n[4]!==_?(v=o("ReQLSuspense").toArray(o("ReQL").fromTableDescending(y.tables.reactions).getKeyRange(_).take(20),i.id+":61"),n[3]=y.tables.reactions,n[4]=_,n[5]=v):v=n[5];var S=v,R;n[6]!==y.tables.reactions_v2||n[7]!==_?(R=o("ReQLSuspense").toArray(o("ReQL").fromTableDescending(y.tables.reactions_v2).getKeyRange(_).take(20),i.id+":64"),n[6]=y.tables.reactions_v2,n[7]=_,n[8]=R):R=n[8];var L=R,E;n[9]!==a||n[10]!==l||n[11]!==_||n[12]!==f||n[13]!==g?(E=function(){l===!1&&(h.current=!0,o("MWCMSelectiveSyncTTRCQPLLoggingUtils").logEventStreamStart(a,_,g,f))},n[9]=a,n[10]=l,n[11]=_,n[12]=f,n[13]=g,n[14]=E):E=n[14];var k;n[15]!==a||n[16]!==l||n[17]!==d||n[18]!==_||n[19]!==f||n[20]!==g?(k=[a,l,d,_,f,g],n[15]=a,n[16]=l,n[17]=d,n[18]=_,n[19]=f,n[20]=g,n[21]=k):k=n[21],o("Int64Hooks").useEffectInt64(E,k);var I=p(b),T=p(S),D=p(L),x=o("MWCMSelectiveSyncTTRCQPLLoggingUtils").useTPQEntry(_),$;n[22]!==a||n[23]!==b||n[24]!==S||n[25]!==L||n[26]!==d||n[27]!==m||n[28]!==(x==null?void 0:x.dasmExecutionTimestampMs)||n[29]!==(x==null?void 0:x.deltaInsertionTimestampMs)||n[30]!==(x==null?void 0:x.status)?($=function(){var e=x==null?void 0:x.status,t=x==null?void 0:x.deltaInsertionTimestampMs,n=x==null?void 0:x.dasmExecutionTimestampMs;if(h.current===!0&&d!==0){if(e!=null&&(u||(u=o("I64"))).equal(e,(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadPointQueryTTRCStatus").SKIPPED)))o("MWCMSelectiveSyncTTRCQPLLoggingUtils").logSkippedEndSuccess(a),h.current=!1,m(r("Random").uint32());else if(e!=null&&(u||(u=o("I64"))).equal(e,(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadPointQueryTTRCStatus").COMPLETED))&&t!=null&&(u||(u=o("I64"))).to_float(t)>d){o("MWCMSelectiveSyncTTRCQPLLoggingUtils").logPoint(a,"selective_sync_remediation_end");var i=!o("MWCMSelectiveSyncTTRCQPLLoggingUtils").isMessageDataUnchanged(I.current,b),l=!(s||(s=r("areEqual")))(T.current,S),p=!s(D.current,L);i||l||p?o("MWCMSelectiveSyncTTRCQPLLoggingUtils").logCompleteEndSuccess(a,"true",n!=null?(u||(u=o("I64"))).to_float(n):void 0):o("MWCMSelectiveSyncTTRCQPLLoggingUtils").logCompleteEndSuccess(a,"false",t!=null?(u||(u=o("I64"))).to_float(t):void 0),I.current=b,T.current=S,D.current=L,h.current=!1,m(r("Random").uint32())}}},n[22]=a,n[23]=b,n[24]=S,n[25]=L,n[26]=d,n[27]=m,n[28]=x==null?void 0:x.dasmExecutionTimestampMs,n[29]=x==null?void 0:x.deltaInsertionTimestampMs,n[30]=x==null?void 0:x.status,n[31]=$):$=n[31];var P;return n[32]!==a||n[33]!==b||n[34]!==S||n[35]!==L||n[36]!==d||n[37]!==m||n[38]!==x?(P=[a,b,S,L,d,m,x],n[32]=a,n[33]=b,n[34]=S,n[35]=L,n[36]=d,n[37]=m,n[38]=x,n[39]=P):P=n[39],o("Int64Hooks").useEffectInt64($,P),null}function f(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=m.jsx(r("CometPlaceholder.react"),{fallback:null,name:"SelectiveSyncTTRCLogger",children:m.jsx(_,babelHelpers.extends({},e))}),t[0]=e,t[1]=n):n=t[1],n}l.default=f}),98);
__d("XGroupsC4GThreadViewControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/groups/{idorvanity}/chats/{thread_id}/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("useGetContactsToShow",["FBLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","getLSMediaContactProfilePictureUrl","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a){var i,l=o("react-compiler-runtime").c(40),s;l[0]!==a?(s=function(n){return n.filter(function(t){return!(e||(e=o("I64"))).equal(t.id,a)})},l[0]=a,l[1]=s):s=l[1];var d=s,m=n.length,p,_,f,g;if(l[2]!==a||l[3]!==n||l[4]!==d||l[5]!==m||l[6]!==t.threadType){var h=[];if(p=[],m!==0){var y=n[0],C=n[1];p=d(n.filter(Boolean).filter(c));e:switch(m){case 1:{if(y!=null&&r("getLSMediaContactProfilePictureUrl")(y)!==""){var b;l[11]!==y?(b=[y],l[11]=y,l[12]=b):b=l[12],h=b}break e}case 2:{if(o("LSMessagingThreadTypeUtil").isOneToOne(t.threadType)&&p.length===1&&r("getLSMediaContactProfilePictureUrl")(p[0])!==""){var v=p,S;l[13]!==v[0]?(S=[v[0]],l[13]=v[0],l[14]=S):S=l[14],h=S}else if(o("LSMessagingThreadTypeUtil").isGroup(t.threadType)&&y!=null&&C!=null&&r("getLSMediaContactProfilePictureUrl")(y)!==""&&r("getLSMediaContactProfilePictureUrl")(C)!==""){var R;l[15]!==y||l[16]!==C?(R=[y,C],l[15]=y,l[16]=C,l[17]=R):R=l[17],h=R}break e}default:p.length>=2&&(h=p)}}var L;l[18]!==p||l[19]!==t.threadType?(L=o("LSMessagingThreadTypeUtil").isOneToOne(t.threadType)&&p.length===0,l[18]=p,l[19]=t.threadType,l[20]=L):L=l[20],_=L;var E;if(l[21]!==a||l[22]!==n){var k;l[24]!==a?(k=function(n){return n!=null&&(e||(e=o("I64"))).equal(n.id,a)},l[24]=a,l[25]=k):k=l[25],E=n.find(k),l[21]=a,l[22]=n,l[23]=E}else E=l[23];f=E,g=h.sort(u).slice(0,2),l[2]=a,l[3]=n,l[4]=d,l[5]=m,l[6]=t.threadType,l[7]=p,l[8]=_,l[9]=f,l[10]=g}else p=l[7],_=l[8],f=l[9],g=l[10];var I=g,T;if(l[26]!==p.length||l[27]!==_||l[28]!==m||l[29]!==I||l[30]!==((i=f)==null?void 0:i.id)||l[31]!==t.threadType){var D;T=function(){var n,a;m===2&&!_&&o("LSMessagingThreadTypeUtil").isOneToOne(t.threadType)&&I.length===1&&(e||(e=o("I64"))).equal(I[0].id,(n=(a=f)==null?void 0:a.id)!=null?n:(e||(e=o("I64"))).minus_one)&&r("FBLogger")("messenger_web").mustfix("One to one thread with participants is showing self contact. Num contacts without self: %s",p.length)},l[26]=p.length,l[27]=_,l[28]=m,l[29]=I,l[30]=(D=f)==null?void 0:D.id,l[31]=t.threadType,l[32]=T}else T=l[32];var x;return l[33]!==p.length||l[34]!==_||l[35]!==m||l[36]!==I||l[37]!==f||l[38]!==t.threadType?(x=[m,_,t.threadType,I,f,p.length],l[33]=p.length,l[34]=_,l[35]=m,l[36]=I,l[37]=f,l[38]=t.threadType,l[39]=x):x=l[39],o("Int64Hooks").useEffectInt64(T,x),I}function u(e,t){return t.rank-e.rank}function c(e){return r("getLSMediaContactProfilePictureUrl")(e)!==""}l.default=s}),98);
__d("useMWFacepileGetContactsToShow",["I64","LSAuthorityLevel","LSGroupParticipantJoinState","LSIntEnum","MWPActor.react","ReQL","ReQLSuspense","react-compiler-runtime","useGetContactsToShow","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,n,a){var l=o("react-compiler-runtime").c(14),c=a===void 0?!1:a,m=o("MWPActor.react").useActor(),p=(u||(u=r("useReStore")))(),_;l[0]!==p.tables.contacts||l[1]!==p.tables.participants||l[2]!==c||l[3]!==t?(_=function(){return o("ReQL").leftJoin(o("ReQL").fromTableAscending(p.tables.participants,["groupParticipantJoinState"]).getKeyRange(t),o("ReQL").fromTableAscending(p.tables.contacts,["rank","profilePictureFallbackUrl","profilePictureUrl","profilePictureUrlExpirationTimestampMs","id","name","authorityLevel"])).filter(function(t){var n=t[0],a=t[1];return(e||(e=o("LSIntEnum"))).toNumber(n.groupParticipantJoinState)!==r("LSGroupParticipantJoinState").MEMBER?!1:!c||a!=null&&c&&(s||(s=o("I64"))).to_int32(a.authorityLevel)>=r("LSAuthorityLevel").AUTHORITATIVE}).take(3)},l[0]=p.tables.contacts,l[1]=p.tables.participants,l[2]=c,l[3]=t,l[4]=_):_=l[4];var f;l[5]!==p||l[6]!==c||l[7]!==t?(f=[p,t,c],l[5]=p,l[6]=c,l[7]=t,l[8]=f):f=l[8];var g=o("ReQLSuspense").useArray(_,f,i.id+":61"),h;l[9]!==g?(h=g.map(d),l[9]=g,l[10]=h):h=l[10];var y=h,C;return l[11]!==t||l[12]!==n?(C={threadKey:t,threadType:n},l[11]=t,l[12]=n,l[13]=C):C=l[13],r("useGetContactsToShow")(C,y,m)}function d(e){var t=e[1];return t}l.default=c}),98);
__d("useReportThreadViewOpenDebounced",["LSFactory","LSReportThreadViewOpenStoredProcedure","promiseDone","react-compiler-runtime","useDebouncedComet","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){var a=o("react-compiler-runtime").c(5),l=(e||(e=r("useReStore")))(),s;a[0]!==l||a[1]!==t?(s=function(){r("promiseDone")(l.runInTransaction(function(e){return r("LSReportThreadViewOpenStoredProcedure")(r("LSFactory")(e),{threadKey:t})},"readwrite",void 0,void 0,i.id+":33"))},a[0]=l,a[1]=t,a[2]=s):s=a[2];var u;return a[3]!==n?(u={leading:!0,wait:n},a[3]=n,a[4]=u):u=a[4],r("useDebouncedComet")(s,u)}l.default=s}),98);
__d("useMWReportThreadOpenOnMountAndFocusWithLogger",["GroupsCometChatsEngagementLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","MWCMSelectiveSyncTTRCQPLLoggingUtils","MetaConfig","Random","SelectiveSyncTTRCLogger.react","ServerTime","VisibilityAPI","mwCMIsAnyCMThread","react","useReStore","useReportThreadViewOpenDebounced"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=u,m=d.useRef,p=d.useState,_=r("MetaConfig")._("43");function f(t,n){var a=(e||(e=r("useReStore")))(),i=p(0),l=i[0],u=i[1],d=p(o("Random").uint32()),f=d[0],g=d[1],h=r("mwCMIsAnyCMThread")(t.threadType),y=m(!1),C=h||r("MetaConfig")._("55")&&(o("LSMessagingThreadTypeUtil").isSocialChannelV2(t.threadType)||o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(t.threadType)),b=r("useReportThreadViewOpenDebounced")(t.threadKey,n!=null?n:_);return o("Int64Hooks").useEffectInt64(function(){var e=null;return C&&(e=o("VisibilityAPI").onVisibilityChange(function(){o("VisibilityAPI").isVisibilityHidden()||b()}),h&&o("GroupsCometChatsEngagementLogger").log({action:"background_effect",community_id:(s||(s=o("I64"))).to_string(t.parentThreadKey),event:"report_thread_view_open",source:"blended_threadlist_community_tab",surface:"thread_view",thread_id:(s||(s=o("I64"))).to_string(t.threadKey)}),y.current===!1&&(u(o("ServerTime").getMillis()),y.current=!0,o("MWCMSelectiveSyncTTRCQPLLoggingUtils").logPoint(f,"selective_sync_remediation_start"),b())),function(){e!=null&&o("VisibilityAPI").removeVisibiltyChangeListener(e)}},[a,t.parentThreadKey,t.threadKey,t.threadType,h,f,C,b]),C?c.jsx(r("SelectiveSyncTTRCLogger.react"),{instanceKey:f,isReportThreadViewOpenSprocCalled:y.current,reportThreadViewOpenCalledTimestamp:l,setInstanceKey:g,threadKey:t.threadKey,threadSubtype:t.threadSubtype,threadType:t.threadType}):null}f.displayName=f.name+" [from "+i.id+"]",l.default=f}),98);
__d("usePresenceUnifiedIsThreadActive",["FBLogger","I64","Int64Hooks","MWPActor.react","PresenceCommonPresenceCommonTypes","ReQL","promiseDone","react","useAsyncReStore","usePresenceUnifiedClientContext","usePresenceUnifiedMapContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useState;function m(e){var t=r("useAsyncReStore")(),n=o("MWPActor.react").useActor(),a=o("usePresenceUnifiedMapContext").usePresenceUnifiedMapContext(),i=o("usePresenceUnifiedClientContext").usePresenceUnifiedClientContext(),l=d(!1),u=l[0],m=l[1],p=o("Int64Hooks").useCallbackInt64(async function(){var r=await t;return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(r.tables.participants,["contactId"]).getKeyRange(e).filter(function(e){var t=e.contactId;return!(s||(s=o("I64"))).equal(t,n)}).map(function(e){var t=e.contactId;return(s||(s=o("I64"))).to_string(t)}))},[n,t,e]);return c(function(){var e=async function(){var e=await p();i==null||i.addAdditionalContacts(e)};r("promiseDone")(e())},[]),c(function(){var e=async function(){if(i==null){r("FBLogger")("messenger_presence_web").warn("usePresenceUnifiedIsThreadActive must have a backing PresenceUnifiedClient");return}var e=await p(),t=e.some(function(e){var t;return((t=a.get(e))==null?void 0:t.presenceStatus)===o("PresenceCommonPresenceCommonTypes").PresenceStatus.Active});m(t)};r("promiseDone")(e())},[p,i,a]),u}l.default=m}),98);/*FB_PKG_DELIM*/
/**
 *
 * This file is generated from fbsource. Please do not modify it directly.
 *
 *
 * @nolint
 * @generated
 * @nopackage
 * @fullSyntaxTransform
 * @preserve-whitespace
 */__d("ls_voprf_utils_v2",["Promise"],(function $module_ls_voprf_utils_v2(global,require,requireDynamic,requireLazy,module,exports){var _require_closure_Promise;


var Module=function(){
var _scriptDir=typeof document!=='undefined'&&document.currentScript?document.currentScript.src:undefined;

return(
function(moduleArg){if(moduleArg===void 0){moduleArg={};}

var Module=moduleArg;var readyPromiseResolve,readyPromiseReject;Module["ready"]=new(_require_closure_Promise||(_require_closure_Promise=require("Promise")))(function(resolve,reject){readyPromiseResolve=resolve;readyPromiseReject=reject;});["_main","getExceptionMessage","___get_exception_message","_free","_memory","_curve_create","_curve_free","_curve_init_ristretto","_get_curve_element_bytes","_get_curve_scalar_bytes","_kdf_create","_kdf_free","_kdf_init_naor_reingold","_sodiumInit","_voprf_create","_voprf_free","_voprf_init_exp_twohashdh","_blind","_verifiable_unblind","_voprf_client_finalize","_voprf_setup","_voprf_evaluate","_voprf_server_finalize","_get_voprf_final_evaluation_bytes","___indirect_function_table","__embind_initialize_bindings","_fflush","___start_em_asm","___stop_em_asm","onRuntimeInitialized"].forEach(function(prop){if(!Object.getOwnPropertyDescriptor(Module["ready"],prop)){Object.defineProperty(Module["ready"],prop,{get:function get(){return abort("You are getting "+prop+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js");},set:function set(){return abort("You are setting "+prop+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js");}});}});var moduleOverrides=Object.assign({},Module);var arguments_=[];var thisProgram="./this.program";var quit_=function quit_(status,toThrow){throw toThrow;};var ENVIRONMENT_IS_WEB=true;var ENVIRONMENT_IS_WORKER=false;var ENVIRONMENT_IS_NODE=false;var ENVIRONMENT_IS_SHELL=false;if(Module["ENVIRONMENT"]){throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");}var scriptDirectory="";function locateFile(path){if(Module["locateFile"]){return Module["locateFile"](path,scriptDirectory);}return scriptDirectory+path;}var read_,readAsync,readBinary,setWindowTitle;if(typeof document!="undefined"&&document.currentScript){scriptDirectory=document.currentScript.src;}if(_scriptDir){scriptDirectory=_scriptDir;}if(scriptDirectory.indexOf("blob:")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1);}else{scriptDirectory="";}if(!(typeof window=="object"||typeof importScripts=="function"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");{read_=function read_(url){var xhr=new XMLHttpRequest();xhr.open("GET",url,false);xhr.send(null);return xhr.responseText;};readAsync=function readAsync(url,onload,onerror){var xhr=new XMLHttpRequest();xhr.open("GET",url,true);xhr.responseType="arraybuffer";xhr.onload=function(){if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return;}onerror();};xhr.onerror=onerror;xhr.send(null);};}setWindowTitle=function setWindowTitle(title){return document.title=title;};var out=Module["print"]||console.log.bind(console);var err=Module["printErr"]||console.error.bind(console);Object.assign(Module,moduleOverrides);moduleOverrides=null;checkIncomingModuleAPI();if(Module["arguments"])arguments_=Module["arguments"];legacyModuleProp("arguments","arguments_");if(Module["thisProgram"])thisProgram=Module["thisProgram"];legacyModuleProp("thisProgram","thisProgram");if(Module["quit"])quit_=Module["quit"];legacyModuleProp("quit","quit_");assert(typeof Module["memoryInitializerPrefixURL"]=="undefined","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead");assert(typeof Module["pthreadMainPrefixURL"]=="undefined","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead");assert(typeof Module["cdInitializerPrefixURL"]=="undefined","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead");assert(typeof Module["filePackagePrefixURL"]=="undefined","Module.filePackagePrefixURL option was removed, use Module.locateFile instead");assert(typeof Module["read"]=="undefined","Module.read option was removed (modify read_ in JS)");assert(typeof Module["readAsync"]=="undefined","Module.readAsync option was removed (modify readAsync in JS)");assert(typeof Module["readBinary"]=="undefined","Module.readBinary option was removed (modify readBinary in JS)");assert(typeof Module["setWindowTitle"]=="undefined","Module.setWindowTitle option was removed (modify setWindowTitle in JS)");assert(typeof Module["TOTAL_MEMORY"]=="undefined","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY");legacyModuleProp("asm","wasmExports");legacyModuleProp("read","read_");legacyModuleProp("readAsync","readAsync");legacyModuleProp("readBinary","readBinary");legacyModuleProp("setWindowTitle","setWindowTitle");assert(!ENVIRONMENT_IS_WORKER,"worker environment detected but not enabled at build time.  Add 'worker' to `-sENVIRONMENT` to enable.");assert(!ENVIRONMENT_IS_NODE,"node environment detected but not enabled at build time.  Add 'node' to `-sENVIRONMENT` to enable.");assert(!ENVIRONMENT_IS_SHELL,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable.");var wasmBinary;if(Module["wasmBinary"])wasmBinary=Module["wasmBinary"];legacyModuleProp("wasmBinary","wasmBinary");var noExitRuntime=Module["noExitRuntime"]||true;legacyModuleProp("noExitRuntime","noExitRuntime");if(typeof WebAssembly!="object"){abort("no native wasm support detected");}var wasmMemory;var wasmExports;var ABORT=false;var EXITSTATUS;function assert(condition,text){if(!condition){abort("Assertion failed"+(text?": "+text:""));}}var HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateMemoryViews(){var b=wasmMemory.buffer;Module["HEAP8"]=HEAP8=new Int8Array(b);Module["HEAP16"]=HEAP16=new Int16Array(b);Module["HEAP32"]=HEAP32=new Int32Array(b);Module["HEAPU8"]=HEAPU8=new Uint8Array(b);Module["HEAPU16"]=HEAPU16=new Uint16Array(b);Module["HEAPU32"]=HEAPU32=new Uint32Array(b);Module["HEAPF32"]=HEAPF32=new Float32Array(b);Module["HEAPF64"]=HEAPF64=new Float64Array(b);}assert(!Module["STACK_SIZE"],"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time");assert(typeof Int32Array!="undefined"&&typeof Float64Array!=="undefined"&&Int32Array.prototype.subarray!=undefined&&Int32Array.prototype.set!=undefined,"JS engine does not provide full typed array support");assert(!Module["wasmMemory"],"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally");assert(!Module["INITIAL_MEMORY"],"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");var wasmTable;function writeStackCookie(){var max=_emscripten_stack_get_end2();assert((max&3)==0);if(max==0){max+=4;}HEAPU32[max>>2]=34821223;HEAPU32[max+4>>2]=2310721022;HEAPU32[0>>2]=1668509029;}function checkStackCookie(){if(ABORT)return;var max=_emscripten_stack_get_end2();if(max==0){max+=4;}var cookie1=HEAPU32[max>>2];var cookie2=HEAPU32[max+4>>2];if(cookie1!=34821223||cookie2!=2310721022){abort("Stack overflow! Stack cookie has been overwritten at "+ptrToString(max)+", expected hex dwords 0x89BACDFE and 0x2135467, but received "+ptrToString(cookie2)+" "+ptrToString(cookie1));}if(HEAPU32[0>>2]!=1668509029){abort("Runtime error: The application has corrupted its heap memory area (address zero)!");}}(function(){var h16=new Int16Array(1);var h8=new Int8Array(h16.buffer);h16[0]=25459;if(h8[0]!==115||h8[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)";})();var __ATPRERUN__=[];var __ATINIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;var runtimeKeepaliveCounter=0;function preRun(){if(Module["preRun"]){if(typeof Module["preRun"]=="function")Module["preRun"]=[Module["preRun"]];while(Module["preRun"].length){addOnPreRun(Module["preRun"].shift());}}callRuntimeCallbacks(__ATPRERUN__);}function initRuntime(){assert(!runtimeInitialized);runtimeInitialized=true;checkStackCookie();callRuntimeCallbacks(__ATINIT__);}function postRun(){checkStackCookie();if(Module["postRun"]){if(typeof Module["postRun"]=="function")Module["postRun"]=[Module["postRun"]];while(Module["postRun"].length){addOnPostRun(Module["postRun"].shift());}}callRuntimeCallbacks(__ATPOSTRUN__);}function addOnPreRun(cb){__ATPRERUN__.unshift(cb);}function addOnInit(cb){__ATINIT__.unshift(cb);}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb);}assert(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");assert(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");assert(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");assert(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;var runDependencyTracking={};function addRunDependency(id){runDependencies++;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies);}if(id){assert(!runDependencyTracking[id]);runDependencyTracking[id]=1;if(runDependencyWatcher===null&&typeof setInterval!="undefined"){runDependencyWatcher=setInterval(function(){if(ABORT){clearInterval(runDependencyWatcher);runDependencyWatcher=null;return;}var shown=false;for(var dep in runDependencyTracking){if(!shown){shown=true;err("still waiting on run dependencies:");}err("dependency: "+dep);}if(shown){err("(end of list)");}},1e4);}}else{err("warning: run dependency added without ID");}}function removeRunDependency(id){runDependencies--;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies);}if(id){assert(runDependencyTracking[id]);delete runDependencyTracking[id];}else{err("warning: run dependency removed without ID");}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null;}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback();}}}function abort(what){if(Module["onAbort"]){Module["onAbort"](what);}what="Aborted("+what+")";err(what);ABORT=true;EXITSTATUS=1;var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e;}var FS={error:function error(){abort("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM");},init:function init(){FS.error();},createDataFile:function createDataFile(){FS.error();},createPreloadedFile:function createPreloadedFile(){FS.error();},createLazyFile:function createLazyFile(){FS.error();},open:function open(){FS.error();},mkdev:function mkdev(){FS.error();},registerDevice:function registerDevice(){FS.error();},analyzePath:function analyzePath(){FS.error();},ErrnoError:function ErrnoError(){FS.error();}};Module["FS_createDataFile"]=FS.createDataFile;Module["FS_createPreloadedFile"]=FS.createPreloadedFile;var dataURIPrefix="data:application/octet-stream;base64,";function isDataURI(filename){return filename.startsWith(dataURIPrefix);}function isFileURI(filename){return filename.startsWith("file://");}function createExportWrapper(name){return function(){assert(runtimeInitialized,"native function `"+name+"` called before runtime initialization");var f=wasmExports[name];assert(f,"exported native function `"+name+"` not found");return f.apply(null,arguments);};}var _EmscriptenEH3=function(_Error){"use strict";function EmscriptenEH(){return _Error.apply(this,arguments)||this;}babelHelpers.inheritsLoose(EmscriptenEH,_Error);return EmscriptenEH;}(babelHelpers.wrapNativeSuper(Error));var _EmscriptenSjLj=function(_EmscriptenEH){"use strict";function EmscriptenSjLj(){return _EmscriptenEH.apply(this,arguments)||this;}babelHelpers.inheritsLoose(EmscriptenSjLj,_EmscriptenEH);return EmscriptenSjLj;}(_EmscriptenEH3);var _CppException=function(_EmscriptenEH2){"use strict";function CppException(excPtr){var _this;_this=_EmscriptenEH2.call(this,excPtr)||this;_this.excPtr=excPtr;var excInfo=getExceptionMessage(excPtr);_this.name=excInfo[0];_this.message=excInfo[1];return _this;}babelHelpers.inheritsLoose(CppException,_EmscriptenEH2);return CppException;}(_EmscriptenEH3);var wasmBinaryFile;wasmBinaryFile="crypto_utils_v2.wasm";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile);}function getBinarySync(file){if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary);}if(readBinary){return readBinary(file);}throw"both async and sync fetching of the wasm failed";}function getBinaryPromise(binaryFile){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"){return fetch(binaryFile,{credentials:"same-origin"}).then(function(response){if(!response["ok"]){throw"failed to load wasm binary file at '"+binaryFile+"'";}return response["arrayBuffer"]();})["catch"](function(){return getBinarySync(binaryFile);});}}return(_require_closure_Promise||(_require_closure_Promise=require("Promise"))).resolve().then(function(){return getBinarySync(binaryFile);});}function instantiateArrayBuffer(binaryFile,imports,receiver){return getBinaryPromise(binaryFile).then(function(binary){return WebAssembly.instantiate(binary,imports);}).then(function(instance){return instance;}).then(receiver,function(reason){err("failed to asynchronously prepare wasm: "+reason);if(isFileURI(wasmBinaryFile)){err("warning: Loading from a file URI ("+wasmBinaryFile+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing");}abort(reason);});}function instantiateAsync(binary,binaryFile,imports,callback){if(!binary&&typeof WebAssembly.instantiateStreaming=="function"&&!isDataURI(binaryFile)&&typeof fetch=="function"){return fetch(binaryFile,{credentials:"same-origin"}).then(function(response){var result=WebAssembly.instantiateStreaming(response,imports);return result.then(callback,function(reason){err("wasm streaming compile failed: "+reason);err("falling back to ArrayBuffer instantiation");return instantiateArrayBuffer(binaryFile,imports,callback);});});}return instantiateArrayBuffer(binaryFile,imports,callback);}function createWasm(){var info={"env":wasmImports,"wasi_snapshot_preview1":wasmImports};function receiveInstance(instance,module){var exports=instance.exports;wasmExports=exports;wasmMemory=wasmExports["memory"];Module["wasmMemory"]=wasmMemory;assert(wasmMemory,"memory not found in wasm exports");updateMemoryViews();wasmTable=wasmExports["__indirect_function_table"];assert(wasmTable,"table not found in wasm exports");addOnInit(wasmExports["__wasm_call_ctors"]);removeRunDependency("wasm-instantiate");return exports;}addRunDependency("wasm-instantiate");var trueModule=Module;function receiveInstantiationResult(result){assert(Module===trueModule,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?");trueModule=null;receiveInstance(result["instance"]);}if(Module["instantiateWasm"]){try{return Module["instantiateWasm"](info,receiveInstance);}catch(e){err("Module.instantiateWasm callback failed with error: "+e);readyPromiseReject(e);}}instantiateAsync(wasmBinary,wasmBinaryFile,info,receiveInstantiationResult)["catch"](readyPromiseReject);return{};}function legacyModuleProp(prop,newName,incomming){if(incomming===void 0){incomming=true;}if(!Object.getOwnPropertyDescriptor(Module,prop)){Object.defineProperty(Module,prop,{configurable:true,get:function get(){var extra=incomming?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":"";abort("`Module."+prop+"` has been replaced by `"+newName+"`"+extra);}});}}function ignoredModuleProp(prop){if(Object.getOwnPropertyDescriptor(Module,prop)){abort("`Module."+prop+"` was supplied but `"+prop+"` not included in INCOMING_MODULE_JS_API");}}function isExportedByForceFilesystem(name){return name==="FS_createPath"||name==="FS_createDataFile"||name==="FS_createPreloadedFile"||name==="FS_unlink"||name==="addRunDependency"||name==="FS_createLazyFile"||name==="FS_createDevice"||name==="removeRunDependency";}function missingGlobal(sym,msg){if(typeof globalThis!=="undefined"){Object.defineProperty(globalThis,sym,{configurable:true,get:function get(){_warnOnce("`"+sym+"` is not longer defined by emscripten. "+msg);return undefined;}});}}missingGlobal("buffer","Please use HEAP8.buffer or wasmMemory.buffer");function missingLibrarySymbol(sym){if(typeof globalThis!=="undefined"&&!Object.getOwnPropertyDescriptor(globalThis,sym)){Object.defineProperty(globalThis,sym,{configurable:true,get:function get(){var msg="`"+sym+"` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line";var librarySymbol=sym;if(!librarySymbol.startsWith("_")){librarySymbol="$"+sym;}msg+=" (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='"+librarySymbol+"')";if(isExportedByForceFilesystem(sym)){msg+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you";}_warnOnce(msg);return undefined;}});}unexportedRuntimeSymbol(sym);}function unexportedRuntimeSymbol(sym){if(!Object.getOwnPropertyDescriptor(Module,sym)){Object.defineProperty(Module,sym,{configurable:true,get:function get(){var msg="'"+sym+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)";if(isExportedByForceFilesystem(sym)){msg+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you";}abort(msg);}});}}var ASM_CONSTS={50356:function _(){return Module.getRandomValue();},50392:function _(){if(Module.getRandomValue===undefined){try{var window_="object"===typeof window?window:self;var crypto_=typeof window_.crypto!=="undefined"?window_.crypto:window_.msCrypto;var randomValuesStandard=function randomValuesStandard(){var buf=new Uint32Array(1);crypto_.getRandomValues(buf);return buf[0]>>>0;};randomValuesStandard();Module.getRandomValue=randomValuesStandard;}catch(e){{throw"No secure random number generator found";}}}}};function ExitStatus(status){this.name="ExitStatus";this.message="Program terminated with exit("+status+")";this.status=status;}var callRuntimeCallbacks=function callRuntimeCallbacks(callbacks){while(callbacks.length>0){callbacks.shift()(Module);}};var withStackSave=function withStackSave(f){var stack=stackSave();var ret=f();stackRestore(stack);return ret;};var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):undefined;var UTF8ArrayToString=function UTF8ArrayToString(heapOrArray,idx,maxBytesToRead){var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr));}var str="";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue;}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue;}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2;}else{if((u0&248)!=240)_warnOnce("Invalid UTF-8 leading byte "+ptrToString(u0)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!");u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63;}if(u0<65536){str+=String.fromCharCode(u0);}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023);}}return str;};var UTF8ToString=function UTF8ToString(ptr,maxBytesToRead){assert(typeof ptr=="number");return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):"";};var getExceptionMessageCommon=function getExceptionMessageCommon(ptr){return withStackSave(function(){var type_addr_addr=stackAlloc(4);var message_addr_addr=stackAlloc(4);___get_exception_message(ptr,type_addr_addr,message_addr_addr);var type_addr=HEAPU32[type_addr_addr>>2];var message_addr=HEAPU32[message_addr_addr>>2];var type=UTF8ToString(type_addr);_free(type_addr);var message;if(message_addr){message=UTF8ToString(message_addr);_free(message_addr);}return[type,message];});};function getExceptionMessage(ptr){return getExceptionMessageCommon(ptr);}Module["getExceptionMessage"]=getExceptionMessage;function getValue(ptr,type){if(type===void 0){type="i8";}if(type.endsWith("*"))type="*";switch(type){case"i1":return HEAP8[ptr>>0];case"i8":return HEAP8[ptr>>0];case"i16":return HEAP16[ptr>>1];case"i32":return HEAP32[ptr>>2];case"i64":abort("to do getValue(i64) use WASM_BIGINT");case"float":return HEAPF32[ptr>>2];case"double":return HEAPF64[ptr>>3];case"*":return HEAPU32[ptr>>2];default:abort("invalid type for getValue: "+type);}}var ptrToString=function ptrToString(ptr){assert(typeof ptr==="number");ptr>>>=0;return"0x"+ptr.toString(16).padStart(8,"0");};var _warnOnce=function warnOnce(text){if(!_warnOnce.shown)_warnOnce.shown={};if(!_warnOnce.shown[text]){_warnOnce.shown[text]=1;err(text);}};var ___assert_fail=function ___assert_fail(condition,filename,line,func){abort("Assertion failed: "+UTF8ToString(condition)+", at: "+[filename?UTF8ToString(filename):"unknown filename",line,func?UTF8ToString(func):"unknown function"]);};var exceptionCaught=[];var uncaughtExceptionCount=0;function ___cxa_begin_catch(ptr){var info=new ExceptionInfo(ptr);if(!info.get_caught()){info.set_caught(true);uncaughtExceptionCount--;}info.set_rethrown(false);exceptionCaught.push(info);___cxa_increment_exception_refcount(info.excPtr);return info.get_exception_ptr();}var exceptionLast=0;function ExceptionInfo(excPtr){this.excPtr=excPtr;this.ptr=excPtr-24;this.set_type=function(type){HEAPU32[this.ptr+4>>2]=type;};this.get_type=function(){return HEAPU32[this.ptr+4>>2];};this.set_destructor=function(destructor){HEAPU32[this.ptr+8>>2]=destructor;};this.get_destructor=function(){return HEAPU32[this.ptr+8>>2];};this.set_caught=function(caught){caught=caught?1:0;HEAP8[this.ptr+12>>0]=caught;};this.get_caught=function(){return HEAP8[this.ptr+12>>0]!=0;};this.set_rethrown=function(rethrown){rethrown=rethrown?1:0;HEAP8[this.ptr+13>>0]=rethrown;};this.get_rethrown=function(){return HEAP8[this.ptr+13>>0]!=0;};this.init=function(type,destructor){this.set_adjusted_ptr(0);this.set_type(type);this.set_destructor(destructor);};this.set_adjusted_ptr=function(adjustedPtr){HEAPU32[this.ptr+16>>2]=adjustedPtr;};this.get_adjusted_ptr=function(){return HEAPU32[this.ptr+16>>2];};this.get_exception_ptr=function(){var isPointer=___cxa_is_pointer_type(this.get_type());if(isPointer){return HEAPU32[this.excPtr>>2];}var adjusted=this.get_adjusted_ptr();if(adjusted!==0)return adjusted;return this.excPtr;};}function ___resumeException(ptr){if(!exceptionLast){exceptionLast=new _CppException(ptr);}throw exceptionLast;}var findMatchingCatch=function findMatchingCatch(args){var thrown=exceptionLast&&exceptionLast.excPtr;if(!thrown){setTempRet0(0);return 0;}var info=new ExceptionInfo(thrown);info.set_adjusted_ptr(thrown);var thrownType=info.get_type();if(!thrownType){setTempRet0(0);return thrown;}for(var arg in args){var caughtType=args[arg];if(caughtType===0||caughtType===thrownType){break;}var adjusted_ptr_addr=info.ptr+16;if(___cxa_can_catch(caughtType,thrownType,adjusted_ptr_addr)){setTempRet0(caughtType);return thrown;}}setTempRet0(thrownType);return thrown;};var ___cxa_find_matching_catch_2=function ___cxa_find_matching_catch_2(){return findMatchingCatch([]);};var ___cxa_find_matching_catch_3=function ___cxa_find_matching_catch_3(arg0){return findMatchingCatch([arg0]);};function __embind_register_bigint(primitiveType,name,size,minRange,maxRange){}function getShiftFromSize(size){switch(size){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+size);}}function embind_init_charCodes(){var codes=new Array(256);for(var i=0;i<256;++i){codes[i]=String.fromCharCode(i);}embind_charCodes=codes;}var embind_charCodes=undefined;function readLatin1String(ptr){var ret="";var c=ptr;while(HEAPU8[c]){ret+=embind_charCodes[HEAPU8[c++]];}return ret;}var awaitingDependencies={};var registeredTypes={};var typeDependencies={};var BindingError=undefined;function throwBindingError(message){throw new BindingError(message);}var InternalError=undefined;function throwInternalError(message){throw new InternalError(message);}function sharedRegisterType(rawType,registeredInstance,options){if(options===void 0){options={};}var name=registeredInstance.name;if(!rawType){throwBindingError("type \""+name+"\" must have a positive integer typeid pointer");}if(Object.prototype.hasOwnProperty.call(registeredTypes,rawType)){if(options.ignoreDuplicateRegistrations){return;}else{throwBindingError("Cannot register type '"+name+"' twice");}}registeredTypes[rawType]=registeredInstance;delete typeDependencies[rawType];if(Object.prototype.hasOwnProperty.call(awaitingDependencies,rawType)){var callbacks=awaitingDependencies[rawType];delete awaitingDependencies[rawType];callbacks.forEach(function(cb){return cb();});}}function registerType(rawType,registeredInstance,options){if(options===void 0){options={};}if(!("argPackAdvance"in registeredInstance)){throw new TypeError("registerType registeredInstance requires argPackAdvance");}return sharedRegisterType(rawType,registeredInstance,options);}function __embind_register_bool(rawType,name,size,trueValue,falseValue){var shift=getShiftFromSize(size);name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":function fromWireType(wt){return!!wt;},"toWireType":function toWireType(destructors,o){return o?trueValue:falseValue;},"argPackAdvance":8,"readValueFromPointer":function readValueFromPointer(pointer){var heap;if(size===1){heap=HEAP8;}else if(size===2){heap=HEAP16;}else if(size===4){heap=HEAP32;}else{throw new TypeError("Unknown boolean type size: "+name);}return this["fromWireType"](heap[pointer>>shift]);},destructorFunction:null});}function handleAllocatorInit(){Object.assign(HandleAllocator.prototype,{get:function get(id){assert(this.allocated[id]!==undefined,"invalid handle: "+id);return this.allocated[id];},has:function has(id){return this.allocated[id]!==undefined;},allocate:function allocate(handle){var id=this.freelist.pop()||this.allocated.length;this.allocated[id]=handle;return id;},free:function free(id){assert(this.allocated[id]!==undefined);this.allocated[id]=undefined;this.freelist.push(id);}});}function HandleAllocator(){this.allocated=[undefined];this.freelist=[];}var emval_handles=new HandleAllocator();function __emval_decref(handle){if(handle>=emval_handles.reserved&&0===--emval_handles.get(handle).refcount){emval_handles.free(handle);}}function count_emval_handles(){var count=0;for(var i=emval_handles.reserved;i<emval_handles.allocated.length;++i){if(emval_handles.allocated[i]!==undefined){++count;}}return count;}function init_emval(){emval_handles.allocated.push({value:undefined},{value:null},{value:true},{value:false});emval_handles.reserved=emval_handles.allocated.length;Module["count_emval_handles"]=count_emval_handles;}var Emval={toValue:function toValue(handle){if(!handle){throwBindingError("Cannot use deleted val. handle = "+handle);}return emval_handles.get(handle).value;},toHandle:function toHandle(value){switch(value){case undefined:return 1;case null:return 2;case true:return 3;case false:return 4;default:{return emval_handles.allocate({refcount:1,value:value});}}}};function simpleReadValueFromPointer(pointer){return this["fromWireType"](HEAP32[pointer>>2]);}function __embind_register_emval(rawType,name){name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":function fromWireType(handle){var rv=Emval.toValue(handle);__emval_decref(handle);return rv;},"toWireType":function toWireType(destructors,value){return Emval.toHandle(value);},"argPackAdvance":8,"readValueFromPointer":simpleReadValueFromPointer,destructorFunction:null});}function embindRepr(v){if(v===null){return"null";}var t=typeof v;if(t==="object"||t==="array"||t==="function"){return v.toString();}else{return""+v;}}function floatReadValueFromPointer(name,shift){switch(shift){case 2:return function(pointer){return this["fromWireType"](HEAPF32[pointer>>2]);};case 3:return function(pointer){return this["fromWireType"](HEAPF64[pointer>>3]);};default:throw new TypeError("Unknown float type: "+name);}}function __embind_register_float(rawType,name,size){var shift=getShiftFromSize(size);name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":function fromWireType(value){return value;},"toWireType":function toWireType(destructors,value){if(typeof value!="number"&&typeof value!="boolean"){throw new TypeError("Cannot convert "+embindRepr(value)+" to "+this.name);}return value;},"argPackAdvance":8,"readValueFromPointer":floatReadValueFromPointer(name,shift),destructorFunction:null});}function integerReadValueFromPointer(name,shift,signed){switch(shift){case 0:return signed?function readS8FromPointer(pointer){return HEAP8[pointer];}:function readU8FromPointer(pointer){return HEAPU8[pointer];};case 1:return signed?function readS16FromPointer(pointer){return HEAP16[pointer>>1];}:function readU16FromPointer(pointer){return HEAPU16[pointer>>1];};case 2:return signed?function readS32FromPointer(pointer){return HEAP32[pointer>>2];}:function readU32FromPointer(pointer){return HEAPU32[pointer>>2];};default:throw new TypeError("Unknown integer type: "+name);}}function __embind_register_integer(primitiveType,name,size,minRange,maxRange){name=readLatin1String(name);if(maxRange===-1){maxRange=4294967295;}var shift=getShiftFromSize(size);var fromWireType=function fromWireType(value){return value;};if(minRange===0){var bitshift=32-8*size;fromWireType=function fromWireType(value){return value<<bitshift>>>bitshift;};}var isUnsignedType=name.includes("unsigned");var checkAssertions=function checkAssertions(value,toTypeName){if(typeof value!="number"&&typeof value!="boolean"){throw new TypeError("Cannot convert \""+embindRepr(value)+"\" to "+toTypeName);}if(value<minRange||value>maxRange){throw new TypeError("Passing a number \""+embindRepr(value)+"\" from JS side to C/C++ side to an argument of type \""+name+"\", which is outside the valid range ["+minRange+", "+maxRange+"]!");}};var toWireType;if(isUnsignedType){toWireType=function toWireType(destructors,value){checkAssertions(value,this.name);return value>>>0;};}else{toWireType=function toWireType(destructors,value){checkAssertions(value,this.name);return value;};}registerType(primitiveType,{name:name,"fromWireType":fromWireType,"toWireType":toWireType,"argPackAdvance":8,"readValueFromPointer":integerReadValueFromPointer(name,shift,minRange!==0),destructorFunction:null});}function __embind_register_memory_view(rawType,dataTypeIndex,name){var typeMapping=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];var TA=typeMapping[dataTypeIndex];function decodeMemoryView(handle){handle=handle>>2;var heap=HEAPU32;var size=heap[handle];var data=heap[handle+1];return new TA(heap.buffer,data,size);}name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":decodeMemoryView,"argPackAdvance":8,"readValueFromPointer":decodeMemoryView},{ignoreDuplicateRegistrations:true});}var stringToUTF8Array=function stringToUTF8Array(str,heap,outIdx,maxBytesToWrite){assert(typeof str==="string");if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023;}if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u;}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6;heap[outIdx++]=128|u&63;}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63;}else{if(outIdx+3>=endIdx)break;if(u>1114111)_warnOnce("Invalid Unicode code point "+ptrToString(u)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF).");heap[outIdx++]=240|u>>18;heap[outIdx++]=128|u>>12&63;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63;}}heap[outIdx]=0;return outIdx-startIdx;};var stringToUTF8=function stringToUTF8(str,outPtr,maxBytesToWrite){assert(typeof maxBytesToWrite=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!");return stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite);};var lengthBytesUTF8=function lengthBytesUTF8(str){var len=0;for(var i=0;i<str.length;++i){var c=str.charCodeAt(i);if(c<=127){len++;}else if(c<=2047){len+=2;}else if(c>=55296&&c<=57343){len+=4;++i;}else{len+=3;}}return len;};function __embind_register_std_string(rawType,name){name=readLatin1String(name);var stdStringIsUTF8=name==="std::string";registerType(rawType,{name:name,"fromWireType":function fromWireType(value){var length=HEAPU32[value>>2];var payload=value+4;var str;if(stdStringIsUTF8){var decodeStartPtr=payload;for(var i=0;i<=length;++i){var currentBytePtr=payload+i;if(i==length||HEAPU8[currentBytePtr]==0){var maxRead=currentBytePtr-decodeStartPtr;var stringSegment=UTF8ToString(decodeStartPtr,maxRead);if(str===undefined){str=stringSegment;}else{str+=String.fromCharCode(0);str+=stringSegment;}decodeStartPtr=currentBytePtr+1;}}}else{var a=new Array(length);for(var i=0;i<length;++i){a[i]=String.fromCharCode(HEAPU8[payload+i]);}str=a.join("");}_free(value);return str;},"toWireType":function toWireType(destructors,value){if(value instanceof ArrayBuffer){value=new Uint8Array(value);}var length;var valueIsOfTypeString=typeof value=="string";if(!(valueIsOfTypeString||value instanceof Uint8Array||value instanceof Uint8ClampedArray||value instanceof Int8Array)){throwBindingError("Cannot pass non-string to std::string");}if(stdStringIsUTF8&&valueIsOfTypeString){length=lengthBytesUTF8(value);}else{length=value.length;}var base=_malloc(4+length+1);var ptr=base+4;HEAPU32[base>>2]=length;if(stdStringIsUTF8&&valueIsOfTypeString){stringToUTF8(value,ptr,length+1);}else{if(valueIsOfTypeString){for(var i=0;i<length;++i){var charCode=value.charCodeAt(i);if(charCode>255){_free(ptr);throwBindingError("String has UTF-16 code units that do not fit in 8 bits");}HEAPU8[ptr+i]=charCode;}}else{for(var i=0;i<length;++i){HEAPU8[ptr+i]=value[i];}}}if(destructors!==null){destructors.push(_free,base);}return base;},"argPackAdvance":8,"readValueFromPointer":simpleReadValueFromPointer,destructorFunction:function destructorFunction(ptr){_free(ptr);}});}var UTF16Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf-16le"):undefined;var UTF16ToString=function UTF16ToString(ptr,maxBytesToRead){assert(ptr%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");var endPtr=ptr;var idx=endPtr>>1;var maxIdx=idx+maxBytesToRead/2;while(!(idx>=maxIdx)&&HEAPU16[idx])++idx;endPtr=idx<<1;if(endPtr-ptr>32&&UTF16Decoder)return UTF16Decoder.decode(HEAPU8.subarray(ptr,endPtr));var str="";for(var i=0;!(i>=maxBytesToRead/2);++i){var codeUnit=HEAP16[ptr+i*2>>1];if(codeUnit==0)break;str+=String.fromCharCode(codeUnit);}return str;};var stringToUTF16=function stringToUTF16(str,outPtr,maxBytesToWrite){assert(outPtr%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!");assert(typeof maxBytesToWrite=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!");if(maxBytesToWrite===undefined){maxBytesToWrite=2147483647;}if(maxBytesToWrite<2)return 0;maxBytesToWrite-=2;var startPtr=outPtr;var numCharsToWrite=maxBytesToWrite<str.length*2?maxBytesToWrite/2:str.length;for(var i=0;i<numCharsToWrite;++i){var codeUnit=str.charCodeAt(i);HEAP16[outPtr>>1]=codeUnit;outPtr+=2;}HEAP16[outPtr>>1]=0;return outPtr-startPtr;};var lengthBytesUTF16=function lengthBytesUTF16(str){return str.length*2;};var UTF32ToString=function UTF32ToString(ptr,maxBytesToRead){assert(ptr%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");var i=0;var str="";while(!(i>=maxBytesToRead/4)){var utf32=HEAP32[ptr+i*4>>2];if(utf32==0)break;++i;if(utf32>=65536){var ch=utf32-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023);}else{str+=String.fromCharCode(utf32);}}return str;};var stringToUTF32=function stringToUTF32(str,outPtr,maxBytesToWrite){assert(outPtr%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!");assert(typeof maxBytesToWrite=="number","stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!");if(maxBytesToWrite===undefined){maxBytesToWrite=2147483647;}if(maxBytesToWrite<4)return 0;var startPtr=outPtr;var endPtr=startPtr+maxBytesToWrite-4;for(var i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);if(codeUnit>=55296&&codeUnit<=57343){var trailSurrogate=str.charCodeAt(++i);codeUnit=65536+((codeUnit&1023)<<10)|trailSurrogate&1023;}HEAP32[outPtr>>2]=codeUnit;outPtr+=4;if(outPtr+4>endPtr)break;}HEAP32[outPtr>>2]=0;return outPtr-startPtr;};var lengthBytesUTF32=function lengthBytesUTF32(str){var len=0;for(var i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);if(codeUnit>=55296&&codeUnit<=57343)++i;len+=4;}return len;};var __embind_register_std_wstring=function __embind_register_std_wstring(rawType,charSize,name){name=readLatin1String(name);var decodeString,encodeString,getHeap,lengthBytesUTF,shift;if(charSize===2){decodeString=UTF16ToString;encodeString=stringToUTF16;lengthBytesUTF=lengthBytesUTF16;getHeap=function getHeap(){return HEAPU16;};shift=1;}else if(charSize===4){decodeString=UTF32ToString;encodeString=stringToUTF32;lengthBytesUTF=lengthBytesUTF32;getHeap=function getHeap(){return HEAPU32;};shift=2;}registerType(rawType,{name:name,"fromWireType":function fromWireType(value){var length=HEAPU32[value>>2];var HEAP=getHeap();var str;var decodeStartPtr=value+4;for(var i=0;i<=length;++i){var currentBytePtr=value+4+i*charSize;if(i==length||HEAP[currentBytePtr>>shift]==0){var maxReadBytes=currentBytePtr-decodeStartPtr;var stringSegment=decodeString(decodeStartPtr,maxReadBytes);if(str===undefined){str=stringSegment;}else{str+=String.fromCharCode(0);str+=stringSegment;}decodeStartPtr=currentBytePtr+charSize;}}_free(value);return str;},"toWireType":function toWireType(destructors,value){if(!(typeof value=="string")){throwBindingError("Cannot pass non-string to C++ string type "+name);}var length=lengthBytesUTF(value);var ptr=_malloc(4+length+charSize);HEAPU32[ptr>>2]=length>>shift;encodeString(value,ptr+4,length+charSize);if(destructors!==null){destructors.push(_free,ptr);}return ptr;},"argPackAdvance":8,"readValueFromPointer":simpleReadValueFromPointer,destructorFunction:function destructorFunction(ptr){_free(ptr);}});};function __embind_register_void(rawType,name){name=readLatin1String(name);registerType(rawType,{isVoid:true,name:name,"argPackAdvance":0,"fromWireType":function fromWireType(){return undefined;},"toWireType":function toWireType(destructors,o){return undefined;}});}var _abort=function _abort(){abort("native code called abort()");};var readEmAsmArgsArray=[];var readEmAsmArgs=function readEmAsmArgs(sigPtr,buf){assert(Array.isArray(readEmAsmArgsArray));assert(buf%16==0);readEmAsmArgsArray.length=0;var ch;buf>>=2;while(ch=HEAPU8[sigPtr++]){var chr=String.fromCharCode(ch);var validChars=["d","f","i"];assert(validChars.includes(chr),"Invalid character "+ch+"(\""+chr+"\") in readEmAsmArgs! Use only ["+validChars+"], and do not specify \"v\" for void return argument.");buf+=ch!=105&buf;readEmAsmArgsArray.push(ch==105?HEAP32[buf]:HEAPF64[buf++>>1]);++buf;}return readEmAsmArgsArray;};var runEmAsmFunction=function runEmAsmFunction(code,sigPtr,argbuf){var args=readEmAsmArgs(sigPtr,argbuf);if(!Object.prototype.hasOwnProperty.call(ASM_CONSTS,code))abort("No EM_ASM constant found at address "+code);return ASM_CONSTS[code].apply(null,args);};var _emscripten_asm_const_int=function _emscripten_asm_const_int(code,sigPtr,argbuf){return runEmAsmFunction(code,sigPtr,argbuf);};var getHeapMax=function getHeapMax(){return 1048576;};var _emscripten_get_heap_max=function _emscripten_get_heap_max(){return getHeapMax();};var growMemory=function growMemory(size){var b=wasmMemory.buffer;var pages=size-b.byteLength+65535>>>16;try{wasmMemory.grow(pages);updateMemoryViews();return 1;}catch(e){err("growMemory: Attempted to grow heap from "+b.byteLength+" bytes to "+size+" bytes, but got error: "+e);}};var _emscripten_resize_heap=function _emscripten_resize_heap(requestedSize){var oldSize=HEAPU8.length;requestedSize>>>=0;assert(requestedSize>oldSize);var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){err("Cannot enlarge memory, asked to go up to "+requestedSize+" bytes, but the limit is "+maxHeapSize+" bytes!");return false;}var alignUp=function alignUp(x,multiple){return x+(multiple-x%multiple)%multiple;};for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=growMemory(newSize);if(replacement){return true;}}err("Failed to grow the heap from "+oldSize+" bytes to "+newSize+" bytes, not enough memory!");return false;};var SYSCALLS={varargs:undefined,get:function get(){assert(SYSCALLS.varargs!=undefined);SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret;},getStr:function getStr(ptr){var ret=UTF8ToString(ptr);return ret;}};var _fd_close=function _fd_close(fd){abort("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM");};function convertI32PairToI53Checked(lo,hi){assert(lo==lo>>>0||lo==(lo|0));assert(hi===(hi|0));return hi+2097152>>>0<4194305-!!lo?(lo>>>0)+hi*4294967296:NaN;}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){var offset=convertI32PairToI53Checked(offset_low,offset_high);return 70;}var printCharBuffers=[null,[],[]];var printChar=function printChar(stream,curr){var buffer=printCharBuffers[stream];assert(buffer);if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer,0));buffer.length=0;}else{buffer.push(curr);}};var flush_NO_FILESYSTEM=function flush_NO_FILESYSTEM(){_fflush(0);if(printCharBuffers[1].length)printChar(1,10);if(printCharBuffers[2].length)printChar(2,10);};var _fd_write=function _fd_write(fd,iov,iovcnt,pnum){var num=0;for(var i=0;i<iovcnt;i++){var ptr=HEAPU32[iov>>2];var len=HEAPU32[iov+4>>2];iov+=8;for(var j=0;j<len;j++){printChar(fd,HEAPU8[ptr+j]);}num+=len;}HEAPU32[pnum>>2]=num;return 0;};var getWasmTableEntry=function getWasmTableEntry(funcPtr){return wasmTable.get(funcPtr);};var writeArrayToMemory=function writeArrayToMemory(array,buffer){assert(array.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)");HEAP8.set(array,buffer);};embind_init_charCodes();BindingError=Module["BindingError"]=function(_Error2){"use strict";function BindingError(message){var _this2;_this2=_Error2.call(this,message)||this;_this2.name="BindingError";return _this2;}babelHelpers.inheritsLoose(BindingError,_Error2);return BindingError;}(babelHelpers.wrapNativeSuper(Error));InternalError=Module["InternalError"]=function(_Error3){"use strict";function InternalError(message){var _this3;_this3=_Error3.call(this,message)||this;_this3.name="InternalError";return _this3;}babelHelpers.inheritsLoose(InternalError,_Error3);return InternalError;}(babelHelpers.wrapNativeSuper(Error));handleAllocatorInit();init_emval();function checkIncomingModuleAPI(){ignoredModuleProp("fetchSettings");}var wasmImports={__assert_fail:___assert_fail,__cxa_begin_catch:___cxa_begin_catch,__cxa_find_matching_catch_2:___cxa_find_matching_catch_2,__cxa_find_matching_catch_3:___cxa_find_matching_catch_3,__resumeException:___resumeException,_embind_register_bigint:__embind_register_bigint,_embind_register_bool:__embind_register_bool,_embind_register_emval:__embind_register_emval,_embind_register_float:__embind_register_float,_embind_register_integer:__embind_register_integer,_embind_register_memory_view:__embind_register_memory_view,_embind_register_std_string:__embind_register_std_string,_embind_register_std_wstring:__embind_register_std_wstring,_embind_register_void:__embind_register_void,abort:_abort,emscripten_asm_const_int:_emscripten_asm_const_int,emscripten_get_heap_max:_emscripten_get_heap_max,emscripten_resize_heap:_emscripten_resize_heap,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,invoke_ii:invoke_ii,invoke_iii:invoke_iii,invoke_iiii:invoke_iiii,invoke_v:invoke_v,invoke_vi:invoke_vi,invoke_vii:invoke_vii,invoke_viii:invoke_viii,invoke_viiii:invoke_viiii};var asm=createWasm();var ___wasm_call_ctors=createExportWrapper("__wasm_call_ctors");var _curve_create=Module["_curve_create"]=createExportWrapper("curve_create");var _malloc=Module["_malloc"]=createExportWrapper("malloc");var _curve_free=Module["_curve_free"]=createExportWrapper("curve_free");var _free=Module["_free"]=createExportWrapper("free");var _curve_init_ristretto=Module["_curve_init_ristretto"]=createExportWrapper("curve_init_ristretto");var _get_curve_element_bytes=Module["_get_curve_element_bytes"]=createExportWrapper("get_curve_element_bytes");var _get_curve_scalar_bytes=Module["_get_curve_scalar_bytes"]=createExportWrapper("get_curve_scalar_bytes");var _kdf_create=Module["_kdf_create"]=createExportWrapper("kdf_create");var _kdf_free=Module["_kdf_free"]=createExportWrapper("kdf_free");var _kdf_init_naor_reingold=Module["_kdf_init_naor_reingold"]=createExportWrapper("kdf_init_naor_reingold");var _sodiumInit=Module["_sodiumInit"]=createExportWrapper("sodiumInit");var _voprf_create=Module["_voprf_create"]=createExportWrapper("voprf_create");var _voprf_free=Module["_voprf_free"]=createExportWrapper("voprf_free");var _voprf_init_exp_twohashdh=Module["_voprf_init_exp_twohashdh"]=createExportWrapper("voprf_init_exp_twohashdh");var _blind=Module["_blind"]=createExportWrapper("blind");var _verifiable_unblind=Module["_verifiable_unblind"]=createExportWrapper("verifiable_unblind");var _voprf_client_finalize=Module["_voprf_client_finalize"]=createExportWrapper("voprf_client_finalize");var _voprf_setup=Module["_voprf_setup"]=createExportWrapper("voprf_setup");var _voprf_evaluate=Module["_voprf_evaluate"]=createExportWrapper("voprf_evaluate");var _voprf_server_finalize=Module["_voprf_server_finalize"]=createExportWrapper("voprf_server_finalize");var _get_voprf_final_evaluation_bytes=Module["_get_voprf_final_evaluation_bytes"]=createExportWrapper("get_voprf_final_evaluation_bytes");var ___errno_location=createExportWrapper("__errno_location");var ___getTypeName=createExportWrapper("__getTypeName");var __embind_initialize_bindings=Module["__embind_initialize_bindings"]=createExportWrapper("_embind_initialize_bindings");var _fflush=Module["_fflush"]=createExportWrapper("fflush");var _emscripten_builtin_memalign=createExportWrapper("emscripten_builtin_memalign");var _setThrew=createExportWrapper("setThrew");var setTempRet0=createExportWrapper("setTempRet0");var _emscripten_stack_init2=function _emscripten_stack_init(){return(_emscripten_stack_init2=wasmExports["emscripten_stack_init"])();};var _emscripten_stack_get_free2=function _emscripten_stack_get_free(){return(_emscripten_stack_get_free2=wasmExports["emscripten_stack_get_free"])();};var _emscripten_stack_get_base2=function _emscripten_stack_get_base(){return(_emscripten_stack_get_base2=wasmExports["emscripten_stack_get_base"])();};var _emscripten_stack_get_end2=function _emscripten_stack_get_end(){return(_emscripten_stack_get_end2=wasmExports["emscripten_stack_get_end"])();};var stackSave=createExportWrapper("stackSave");var stackRestore=createExportWrapper("stackRestore");var stackAlloc=createExportWrapper("stackAlloc");var _emscripten_stack_get_current2=function _emscripten_stack_get_current(){return(_emscripten_stack_get_current2=wasmExports["emscripten_stack_get_current"])();};var ___cxa_free_exception=createExportWrapper("__cxa_free_exception");var ___cxa_increment_exception_refcount=createExportWrapper("__cxa_increment_exception_refcount");var ___cxa_decrement_exception_refcount=createExportWrapper("__cxa_decrement_exception_refcount");var ___get_exception_message=Module["___get_exception_message"]=createExportWrapper("__get_exception_message");var ___cxa_can_catch=createExportWrapper("__cxa_can_catch");var ___cxa_is_pointer_type=createExportWrapper("__cxa_is_pointer_type");var dynCall_iiiji=Module["dynCall_iiiji"]=createExportWrapper("dynCall_iiiji");var dynCall_iiij=Module["dynCall_iiij"]=createExportWrapper("dynCall_iiij");var dynCall_iijii=Module["dynCall_iijii"]=createExportWrapper("dynCall_iijii");var dynCall_iiijiji=Module["dynCall_iiijiji"]=createExportWrapper("dynCall_iiijiji");var dynCall_iiijiii=Module["dynCall_iiijiii"]=createExportWrapper("dynCall_iiijiii");var dynCall_jiji=Module["dynCall_jiji"]=createExportWrapper("dynCall_jiji");function invoke_v(index){var sp=stackSave();try{getWasmTableEntry(index)();}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_vii(index,a1,a2){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_viiii(index,a1,a2,a3,a4){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2,a3,a4);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_ii(index,a1){var sp=stackSave();try{return getWasmTableEntry(index)(a1);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_iii(index,a1,a2){var sp=stackSave();try{return getWasmTableEntry(index)(a1,a2);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_viii(index,a1,a2,a3){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2,a3);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_vi(index,a1){var sp=stackSave();try{getWasmTableEntry(index)(a1);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}function invoke_iiii(index,a1,a2,a3){var sp=stackSave();try{return getWasmTableEntry(index)(a1,a2,a3);}catch(e){stackRestore(sp);if(!(e instanceof _EmscriptenEH3))throw e;_setThrew(1,0);}}Module["wasmMemory"]=wasmMemory;Module["getValue"]=getValue;Module["stringToUTF8"]=stringToUTF8;Module["lengthBytesUTF8"]=lengthBytesUTF8;Module["writeArrayToMemory"]=writeArrayToMemory;var missingLibrarySymbols=["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertU32PairToI53","zeroMemory","exitJS","isLeapYear","ydayFromDate","arraySum","addDays","setErrNo","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","getHostByName","initRandomFill","randomFill","getCallstack","emscriptenLog","convertPCtoSourceLocation","runMainThreadEmAsm","jstoi_q","jstoi_s","getExecutableName","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","setWasmTableEntry","handleException","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","safeSetTimeout","asmjsMangle","asyncLoad","alignMemory","mmapAlloc","getNativeTypeSize","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","getCFunc","ccall","cwrap","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","stringToNewUTF8","stringToUTF8OnStack","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","demangle","demangleAll","jsStackTrace","stackTrace","getEnvStrings","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","createDyncallWrapper","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","getPromise","makePromise","idsToPromises","makePromiseCallback","setMainLoop","getSocketFromFD","getSocketAddress","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar","_setNetworkCallback","heapObjectForWebGLType","heapAccessShiftForWebGLHeap","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","__glGenObject","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","SDL_unicode","SDL_ttfContext","SDL_audio","GLFW_Window","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","getTypeName","heap32VectorToArray","requireRegisteredType","init_embind","throwUnboundTypeError","ensureOverloadTable","exposePublicSymbol","replacePublicSymbol","extendError","createNamedFunction","getBasestPointer","registerInheritedInstance","unregisterInheritedInstance","getInheritedInstance","getInheritedInstanceCount","getLiveInheritedInstances","enumReadValueFromPointer","runDestructors","craftInvokerFunction","embind__requireFunction","genericPointerToWireType","constNoSmartPtrRawPointerToWireType","nonConstNoSmartPtrRawPointerToWireType","init_RegisteredPointer","RegisteredPointer","RegisteredPointer_getPointee","RegisteredPointer_destructor","RegisteredPointer_deleteObject","RegisteredPointer_fromWireType","runDestructor","releaseClassHandle","detachFinalizer","attachFinalizer","makeClassHandle","init_ClassHandle","ClassHandle","ClassHandle_isAliasOf","throwInstanceAlreadyDeleted","ClassHandle_clone","ClassHandle_delete","ClassHandle_isDeleted","ClassHandle_deleteLater","flushPendingDeletes","setDelayFunction","RegisteredClass","shallowCopyInternalPointer","downcastPointer","upcastPointer","validateThis","char_0","char_9","makeLegalFunctionName","getStringOrSymbol","craftEmvalAllocator","emval_get_global","emval_lookupTypes","emval_allocateDestructors","emval_addMethodCaller"];missingLibrarySymbols.forEach(missingLibrarySymbol);var unexportedSymbols=["run","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","FS_createFolder","FS_createPath","FS_createDataFile","FS_createLazyFile","FS_createLink","FS_createDevice","FS_unlink","out","err","callMain","abort","keepRuntimeAlive","wasmTable","wasmExports","stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0","writeStackCookie","checkStackCookie","convertI32PairToI53Checked","ptrToString","getHeapMax","growMemory","ENV","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","ERRNO_CODES","ERRNO_MESSAGES","DNS","Protocols","Sockets","timers","warnOnce","UNWIND_CACHE","readEmAsmArgsArray","readEmAsmArgs","runEmAsmFunction","getWasmTableEntry","handleAllocatorInit","HandleAllocator","freeTableIndexes","functionsInTableMap","setValue","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","JSEvents","specialHTMLTargets","currentFullscreenStrategy","restoreOldWindowedStyle","ExitStatus","flush_NO_FILESYSTEM","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","findMatchingCatch","getExceptionMessageCommon","incrementExceptionRefcount","decrementExceptionRefcount","getExceptionMessage","Browser","wget","SYSCALLS","preloadPlugins","FS_stdin_getChar_buffer","FS","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","emscripten_webgl_power_preferences","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","GLFW","allocateUTF8","allocateUTF8OnStack","InternalError","BindingError","throwInternalError","throwBindingError","registeredTypes","awaitingDependencies","typeDependencies","tupleRegistrations","structRegistrations","sharedRegisterType","whenDependentTypesAreResolved","embind_charCodes","embind_init_charCodes","readLatin1String","UnboundTypeError","PureVirtualError","embindRepr","registeredInstances","registeredPointers","registerType","getShiftFromSize","integerReadValueFromPointer","floatReadValueFromPointer","simpleReadValueFromPointer","finalizationRegistry","detachFinalizer_deps","deletionQueue","delayFunction","emval_handles","emval_symbols","init_emval","count_emval_handles","Emval","emval_newers","emval_methodCallers","emval_registeredMethods"];unexportedSymbols.forEach(unexportedRuntimeSymbol);var calledRun;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller;};function stackCheckInit(){_emscripten_stack_init2();writeStackCookie();}function run(){if(runDependencies>0){return;}stackCheckInit();preRun();if(runDependencies>0){return;}function doRun(){if(calledRun)return;calledRun=true;Module["calledRun"]=true;if(ABORT)return;initRuntime();readyPromiseResolve(Module);if(Module["onRuntimeInitialized"])Module["onRuntimeInitialized"]();assert(!Module["_main"],'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]');postRun();}if(Module["setStatus"]){Module["setStatus"]("Running...");setTimeout(function(){setTimeout(function(){Module["setStatus"]("");},1);doRun();},1);}else{doRun();}checkStackCookie();}if(Module["preInit"]){if(typeof Module["preInit"]=="function")Module["preInit"]=[Module["preInit"]];while(Module["preInit"].length>0){Module["preInit"].pop()();}}run();


return moduleArg.ready;
});


}();
if(typeof exports==='object'&&typeof module==='object')
module.exports=Module;else
if(typeof define==='function'&&define['amd'])
define([],function(){return Module;});}),null);/*FB_PKG_DELIM*/
__d("VideoControlsContainerFocusedContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(!1);l.default=u}),98);
__d("VideoPlayerControlsContainerOverlay.react",["CometErrorBoundary.react","FocusWithinHandler.react","VideoControlsContainerFocusedContext","VideoPlayerControlsBottomRowAddOnContext","VideoPlayerControlsHiddenContext","VideoPlayerHooks","react","react-compiler-runtime","stylex","useResizeObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s,m=d.useEffect,p=d.useState,_=44,f={backgroundGradient:{backgroundImage:"x11v4dcs",bottom:"x1ey2m1c",position:"x10l6tqk",transitionDuration:"x1d8287x",transitionProperty:"x6o7n8i",transitionTimingFunction:"xl405pv",width:"xh8yej3",zIndex:"x8knxv4",$$css:!0},hidden:{opacity:"xg01cxk",pointerEvents:"x47corl",visibility:"xlshs6z",$$css:!0},visible:{opacity:"x1hc1fzr",$$css:!0}};function g(t){var n=o("react-compiler-runtime").c(18),a=t.children,i=t.height,l=t.initialBottomRowAddOn,s=t.isBackgroundVisible,d=t.isVisible,g=t.xstyle,h=l===void 0?null:l,y=p(0),C=y[0],b=y[1],v;n[0]===Symbol.for("react.memo_cache_sentinel")?(v=function(t){b(t.height)},n[0]=v):v=n[0];var S=r("useResizeObserver")(v),R=o("VideoPlayerControlsBottomRowAddOnContext").useVideoPlayerControlsBottomRowAddOn(h),L=(u||(u=o("VideoPlayerHooks"))).useVideoPlayerCaptionsReservationActions(),E=L.release,k=L.reserve,I=i!=null?i:_,T,D;n[1]!==I||n[2]!==s||n[3]!==d||n[4]!==E||n[5]!==k?(T=function(){if(d||s){var e=k({location:"bottom",size:I});return(function(){E(e)})}},D=[d,s,k,E,I],n[1]=I,n[2]=s,n[3]=d,n[4]=E,n[5]=k,n[6]=T,n[7]=D):(T=n[6],D=n[7]),m(T,D);var x=s===!1||d===!1,$=s===!0||d===!0,P;return n[8]!==R||n[9]!==C||n[10]!==S||n[11]!==a||n[12]!==I||n[13]!==x||n[14]!==$||n[15]!==d||n[16]!==g?(P=c.jsx(r("FocusWithinHandler.react"),{children:function(n,o){return c.jsx(r("VideoControlsContainerFocusedContext").Provider,{value:o,children:c.jsxs("div",babelHelpers.extends({},{0:{className:"x1ey2m1c x1q0g3np x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h"},4:{className:"x1ey2m1c x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x6s0dn4 xzt5al7 x78zum5 x1q0g3np"},2:{className:"x1ey2m1c x1q0g3np x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h xg01cxk x47corl xlshs6z"},6:{className:"x1ey2m1c x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x6s0dn4 xzt5al7 x78zum5 x1q0g3np xg01cxk x47corl xlshs6z"},1:{className:"x1ey2m1c x1q0g3np x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x1hc1fzr"},5:{className:"x1ey2m1c x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x6s0dn4 xzt5al7 x78zum5 x1q0g3np x1hc1fzr"},3:{className:"x1ey2m1c x1q0g3np x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x47corl xlshs6z x1hc1fzr"},7:{className:"x1ey2m1c x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x6s0dn4 xzt5al7 x78zum5 x1q0g3np x47corl xlshs6z x1hc1fzr"}}[(R==null)<<2|(d===!1)<<1|(d===!0)<<0],{"data-testid":void 0,children:[c.jsx("div",{className:(e||(e=r("stylex")))(f.backgroundGradient,x&&f.hidden,$&&f.visible,g),style:{height:I+C}}),c.jsx(r("VideoPlayerControlsHiddenContext").Provider,{value:x,children:R==null?a:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"x6s0dn4 xzt5al7 x78zum5 x1q0g3np",children:a}),c.jsx(r("CometErrorBoundary.react"),{children:c.jsx("div",{ref:S,children:R})})]})})]}))})}}),n[8]=R,n[9]=C,n[10]=S,n[11]=a,n[12]=I,n[13]=x,n[14]=$,n[15]=d,n[16]=g,n[17]=P):P=n[17],P}l.default=g}),98);
__d("VideoPlayerControlsGroups.react",["VideoControlsContainerFocusedContext","VideoPlayerControlsHiddenContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext;function c(e){var t=o("react-compiler-runtime").c(10),n=e.children,a=e.isVisible,i=e.noPaddingEnd,l=e.noPaddingStart,c=a===void 0?!0:a,d=i===void 0?!1:i,m=l===void 0?!1:l,p=u(r("VideoControlsContainerFocusedContext")),_=c||p,f=u(r("VideoPlayerControlsHiddenContext")),g;t[0]!==_||t[1]!==d||t[2]!==m?(g={0:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x1gabggj x18d9i69 xaso8d8 x1fmh03i x47corl"},4:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x18d9i69 xaso8d8 xyri2b x1fmh03i x47corl"},2:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x1gabggj x18d9i69 x1c1uobl x1fmh03i x47corl"},6:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x18d9i69 xyri2b x1c1uobl x1fmh03i x47corl"},1:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x1gabggj x18d9i69 xaso8d8 x1hc1fzr"},5:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x18d9i69 xaso8d8 xyri2b x1hc1fzr"},3:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x1gabggj x18d9i69 x1c1uobl x1hc1fzr"},7:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x18d9i69 xyri2b x1c1uobl x1hc1fzr"}}[!!d<<2|!!m<<1|!!_<<0],t[0]=_,t[1]=d,t[2]=m,t[3]=g):g=t[3];var h=f||!_,y;t[4]!==n||t[5]!==h?(y=s.jsx(r("VideoPlayerControlsHiddenContext").Provider,{value:h,children:n}),t[4]=n,t[5]=h,t[6]=y):y=t[6];var C;return t[7]!==g||t[8]!==y?(C=s.jsx("div",babelHelpers.extends({},g,{children:y})),t[7]=g,t[8]=y,t[9]=C):C=t[9],C}function d(e){var t=o("react-compiler-runtime").c(8),n=e.children,a=e.isVisible,i=a===void 0?!0:a,l=u(r("VideoControlsContainerFocusedContext")),c=i||l,d=u(r("VideoPlayerControlsHiddenContext")),m;t[0]!==c?(m={0:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 x1iyjqo2 x1fmh03i x47corl"},1:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 x1iyjqo2 x1hc1fzr"}}[!!c<<0],t[0]=c,t[1]=m):m=t[1];var p=d||!c,_;t[2]!==n||t[3]!==p?(_=s.jsx(r("VideoPlayerControlsHiddenContext").Provider,{value:p,children:n}),t[2]=n,t[3]=p,t[4]=_):_=t[4];var f;return t[5]!==m||t[6]!==_?(f=s.jsx("div",babelHelpers.extends({},m,{children:_})),t[5]=m,t[6]=_,t[7]=f):f=t[7],f}l.Contracted=c,l.Expanded=d}),98);
__d("VideoPlayerLiveRewindControlContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({cachedLiveRewindTimestamp:null,onLiveRewindControlEvent:function(){}});l.default=u}),98);
__d("VideoPlayerPlaybackControlBase.react",["fbt","ix","FBLogger","VideoPlayerControlIcon.react","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react"));function d(e){var t=o("react-compiler-runtime").c(14),n=e.onPress,a=e.playbackIcon,i=e.showTooltip,l=e.useOutlineIcons,d=i===void 0?!0:i,m,p;e:switch(a){case"pause":{var _;t[0]===Symbol.for("react.memo_cache_sentinel")?(_=s._(/*BTDS*/"Pause"),t[0]=_):_=t[0],m=_;var f;t[1]!==l?(f=l===!0?o("fbicon")._(u("497677"),20):o("fbicon")._(u("497675"),20),t[1]=l,t[2]=f):f=t[2],p=f;break e}case"replay":{var g;t[3]===Symbol.for("react.memo_cache_sentinel")?(g=s._(/*BTDS*/"Replay"),t[3]=g):g=t[3],m=g;var h;t[4]!==l?(h=l===!0?o("fbicon")._(u("534222"),20):o("fbicon")._(u("534219"),20),t[4]=l,t[5]=h):h=t[5],p=h;break e}case"play":{var y;t[6]===Symbol.for("react.memo_cache_sentinel")?(y=s._(/*BTDS*/"Play"),t[6]=y):y=t[6],m=y;var C;t[7]!==l?(C=l===!0?o("fbicon")._(u("484866"),20):o("fbicon")._(u("484863"),20),t[7]=l,t[8]=C):C=t[8],p=C;break e}default:throw r("FBLogger")("comet_video_player").mustfixThrow("The playback icon is unsupported %s",a)}var b=d?m:null,v;return t[9]!==p||t[10]!==m||t[11]!==n||t[12]!==b?(v=c.jsx(r("VideoPlayerControlIcon.react"),{icon:p,label:m,onPress:n,tooltip:b}),t[9]=p,t[10]=m,t[11]=n,t[12]=b,t[13]=v):v=t[13],v}l.default=d}),226);
__d("VideoPlayerPlaybackControl.react",["CometTrackingNodeProvider.react","VideoHomeTypedLiteLogger","VideoPlayerHooks","VideoPlayerPlaybackControlBase.react","react","react-compiler-runtime","useFeedClickEventHandler","useMinifiedProductAttribution","useVideoPlayerControllerSubscription"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useEffect;function d(e){var t=o("react-compiler-runtime").c(14),n=e.isNPC,a=e.showTooltip,i=e.unmuteOnPlay,l=e.useOutlineIcons,d=n===void 0?!1:n,p=a===void 0?!0:a,_=i===void 0?!1:i,f,g;t[0]!==d?(f=function(){d&&r("VideoHomeTypedLiteLogger").log({event:"npc_control_playback_button_impression"})},g=[d],t[0]=d,t[1]=f,t[2]=g):(f=t[1],g=t[2]),c(f,g);var h=r("useVideoPlayerControllerSubscription")(m),y=h.showPauseButton,C=h.showReplayButton,b=(s||(s=o("VideoPlayerHooks"))).useController(),v=r("useMinifiedProductAttribution")(),S;t[3]!==b||t[4]!==d||t[5]!==v||t[6]!==y||t[7]!==_?(S=function(){d&&r("VideoHomeTypedLiteLogger").log({attribution_id_v2:v,click_point:"npc_control_playback_button",event:"click",event_target:"video"}),y?b.pause("user_initiated"):(_&&b.setMuted(!1,"user_initiated"),b.play("user_initiated"))},t[3]=b,t[4]=d,t[5]=v,t[6]=y,t[7]=_,t[8]=S):S=t[8];var R=r("useFeedClickEventHandler")(S),L=y?"pause":C?"replay":"play",E;return t[9]!==R||t[10]!==L||t[11]!==p||t[12]!==l?(E=u.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:592,children:u.jsx(r("VideoPlayerPlaybackControlBase.react"),{onPress:R,playbackIcon:L,showTooltip:p,useOutlineIcons:l})}),t[9]=R,t[10]=L,t[11]=p,t[12]=l,t[13]=E):E=t[13],E}function m(e,t){var n=e.getCurrentState(),r=n.ended,o=n.paused,a=n.playing,i=n.stalling,l=e.getPlayheadPosition(),s=n.duration,u=!o&&(a||i),c=!a&&r&&l>=s;return t!=null&&t.showPauseButton===u&&t.showReplayButton===c?t:{showPauseButton:u,showReplayButton:c}}l.default=d}),98);
__d("getFormattedTimestamp",["DateConsts"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t="",n=e;isNaN(n)?n=0:n<0&&(n*=-1,t="-");var r=Math.floor(n/o("DateConsts").SEC_PER_HOUR),a=Math.floor((n-r*o("DateConsts").SEC_PER_HOUR)/o("DateConsts").SEC_PER_MIN),i=Math.round(n-r*o("DateConsts").SEC_PER_HOUR-a*o("DateConsts").SEC_PER_MIN);i===o("DateConsts").SEC_PER_MIN&&(i=0,a++),a===o("DateConsts").MIN_PER_HOUR&&(a=0,r++);var l=("0"+i).slice(-2);if(r===0)return""+t+a+":"+l;var s=("0"+a).slice(-2);return""+t+r+":"+s+":"+l}l.default=e}),98);
__d("VideoPlayerPlaybackTimerBase.react",["getFormattedTimestamp","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(11),n=e.currentTime,a=e.duration,i,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={className:"x14ctfv x1rg5ohu x1pg5gke xss6m8b x7h9g57 xf6vk7d xpcyujq x9hgts1 x2b8uid x27saw0 x3ajldb"},l={className:"x1s688f x15hfatp"},t[0]=i,t[1]=l):(i=t[0],l=t[1]);var u;t[2]!==n?(u=r("getFormattedTimestamp")(n),t[2]=n,t[3]=u):u=t[3];var c;t[4]!==u?(c=s.jsx("span",babelHelpers.extends({},l,{children:u})),t[4]=u,t[5]=c):c=t[5];var d;t[6]!==a?(d=a!=null&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:" / "}),s.jsx("span",{children:r("getFormattedTimestamp")(a)})]}),t[6]=a,t[7]=d):d=t[7];var m;return t[8]!==c||t[9]!==d?(m=s.jsxs("div",babelHelpers.extends({},i,{children:[c,d]})),t[8]=c,t[9]=d,t[10]=m):m=t[10],m}l.default=u}),98);
__d("useLiveRewindUtils",["VideoPlayerHooks","VideoPlayerLiveRewindControlContext","react","react-compiler-runtime","useVideoPlayerControllerSubscription"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useCallback,d=u.useContext,m=10,p=10;function _(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){var e,r=t.getCurrentState().seekableRanges,o=r!=null&&(e=r.end(r.length()-1))!=null?e:0,a=Math.min(t.getPlayheadPosition()+m,o);a===o?(t.setIsLiveRewindActive(!1),t.seek(o)):t.seek(a),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function f(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){var e,r=t.getCurrentState().seekableRanges,o=(e=r==null?void 0:r.start(0))!=null?e:0,a=Math.max(t.getPlayheadPosition()-p,o);t.seek(a),t.setIsLiveRewindActive(!0),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function g(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){var e,r=t.getCurrentState().seekableRanges,o=r!=null&&(e=r.end(r.length()-1))!=null?e:0;t.seek(o),t.play("user_initiated"),t.setIsLiveRewindActive(!1),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function h(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){var e,r=t.getCurrentState().seekableRanges,o=(e=r==null?void 0:r.start(0))!=null?e:0;t.seek(o),t.setIsLiveRewindActive(!0),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function y(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){t.play("user_initiated"),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function C(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){t.pause("user_initiated"),t.setIsLiveRewindActive(!0),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function b(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){var e,r=t.getCurrentState().seekableRanges,o=(e=r==null?void 0:r.start(0))!=null?e:0;t.seek(o),t.setIsLiveRewindActive(!0),t.play("user_initiated"),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function v(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(r){var e,o,a=t.getCurrentState().seekableRanges,i=(e=a==null?void 0:a.start(0))!=null?e:0,l=a!=null&&(o=a.end(a.length()-1))!=null?o:0,s=Math.min(i+r,l);t.scrubEnd(s),s===l?t.setIsLiveRewindActive(!1):t.setIsLiveRewindActive(!0),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function S(){return r("useVideoPlayerControllerSubscription")(R)}function R(e){var t,n;return(t=(n=e.getCurrentState().seekableRanges)==null?void 0:n.start(0))!=null?t:0}l.useLiveRewindForward=_,l.useLiveRewindBack=f,l.useLiveRewindLive=g,l.useLiveRewindStart=h,l.useLiveRewindPlay=y,l.useLiveRewindPause=C,l.useLiveRewindReplay=b,l.useLiveRewindScrub=v,l.useLiveRewindSeekableStartTime=S}),98);
__d("VideoPlayerPlaybackTimer.react",["VideoPlayerHooks","VideoPlayerPlaybackTimerBase.react","react","react-compiler-runtime","useLiveRewindUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=_,d=function(t,n){return t-n.duration};function m(){var e=o("react-compiler-runtime").c(2),t=o("useLiveRewindUtils").useLiveRewindSeekableStartTime(),n=(s||(s=o("VideoPlayerHooks"))).useCurrentTimeThrottled(200),a=s.useCurrentTimeThrottled(1e3,d),i=s.useIsLiveRewindActive(),l=i?a:n-t,c;return e[0]!==l?(c=u.jsx(r("VideoPlayerPlaybackTimerBase.react"),{currentTime:l,duration:null}),e[0]=l,e[1]=c):c=e[1],c}function p(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useDuration(),n=s.useCurrentTimeThrottled(200),a;return e[0]!==n||e[1]!==t?(a=u.jsx(r("VideoPlayerPlaybackTimerBase.react"),{currentTime:n,duration:t}),e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function _(){var e=o("react-compiler-runtime").c(2),t=(s||(s=o("VideoPlayerHooks"))).useIsLive();if(t){var n;return e[0]===Symbol.for("react.memo_cache_sentinel")?(n=u.jsx(m,{}),e[0]=n):n=e[0],n}else{var r;return e[1]===Symbol.for("react.memo_cache_sentinel")?(r=u.jsx(p,{}),e[1]=r):r=e[1],r}}var f=c;l.default=f}),98);
__d("VideoPlayerPointerDrag",["react","react-compiler-runtime","useResizeObserver","useStable"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef,d=s.useState;function m(){var e=o("react-compiler-runtime").c(5),t=c(null),n=c(null),a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=function(r,o){t.current=o.getBoundingClientRect(),n.current=o},e[0]=a):a=e[0];var i=r("useResizeObserver")(a),l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=function(){return function(){var e=n.current;e?t.current=e.getBoundingClientRect():t.current=null}},e[1]=l):l=e[1];var s=r("useStable")(l),u;return e[2]!==s||e[3]!==i?(u={invalidateRootRect:s,rootRectRef:t,rootSizeRefCallback:i},e[2]=s,e[3]=i,e[4]=u):u=e[4],u}function p(e,t){if(t==null)return null;var n=Math.max(0,Math.min(t.width,e.clientX-t.left)),r=Math.max(0,Math.min(t.height,e.clientY-t.top));return{ratioX:t.width>0?n/t.width:0,ratioY:t.height>0?r/t.height:0}}function _(e,t){var n=e.changedTouches;if(t==null||!n)return null;for(var r=0;r<n.length;++r){var o=n[r];if(o.identifier===t)return{clientX:o.clientX,clientY:o.clientY}}return null}function f(e,t){var n=e;switch(t.type){case"start":n=babelHelpers.extends({},e,{clientX:t.clientX,clientY:t.clientY,dragState:"dragging",lastEffect:e.dragState==="idle"?"start":e.lastEffect});break;case"move":if(e.dragState!=="dragging")break;n={clientX:t.clientX,clientY:t.clientY,dragState:"dragging",lastEffect:e.dragState==="idle"?"start":"move"};break;case"end":if(e.dragState!=="dragging")break;n={clientX:t.clientX,clientY:t.clientY,dragState:"idle",lastEffect:e.dragState==="idle"?e.lastEffect:"end"};break;case"cancel":if(e.dragState!=="dragging")break;n={clientX:e.clientX,clientY:e.clientY,dragState:"idle",lastEffect:e.dragState==="idle"?e.lastEffect:"cancel"};break;default:break}return n.dragState!==e.dragState||n.lastEffect!==e.lastEffect||n.clientX!==e.clientX||n.clientY!==e.clientY?n:e}var g={clientX:0,clientY:0,dragState:"idle",lastEffect:null},h=function(){return window.navigator.userAgent.indexOf("MSIE")>=0};function y(e,t,n){var r=g,o=null,a=null,i=function(n){r=f(r,n),e(r)},l=function(n){i({clientX:n.clientX,clientY:n.clientY,type:"move"});var e=t.current.onDragMoveSync;e==null||e(r)},s=function(n){o&&o(),i({clientX:n.clientX,clientY:n.clientY,type:"end"});var e=t.current.onDragEndSync;e==null||e(r)},u=function(){o&&o(),i({type:"cancel"});var e=t.current.onDragCancelSync;e==null||e(r)},c=function(o){var e=_(o,n.current);if(e!=null){i({clientX:e.clientX,clientY:e.clientY,type:"move"});var a=t.current.onDragMoveSync;a==null||a(r)}},d=function(o){var e=_(o,n.current);if(e!=null){a&&a(),i({clientX:e.clientX,clientY:e.clientY,type:"end"});var l=t.current.onDragEndSync;l==null||l(r)}},m=d;return{destroy:function(){o&&o(),a&&a()},onMouseDown:function(n){h()||n.preventDefault(),i({clientX:n.clientX,clientY:n.clientY,type:"start"});var e=t.current.onDragStartSync;e==null||e(r),o||(window.addEventListener("mousemove",l),window.addEventListener("mouseup",s),window.addEventListener("blur",u),window.addEventListener("mouseleave",u),o=function(){o=null,window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",s),window.removeEventListener("blur",u),window.removeEventListener("mouseleave",u)})},onTouchStart:function(o){o.preventDefault();var e=o.changedTouches[0];e!=null&&(n.current=e.identifier);var l=_(o,n.current);if(l!=null){i({clientX:l.clientX,clientY:l.clientY,type:"start"});var s=t.current.onDragStartSync;s==null||s(r),a||(window.addEventListener("touchmove",c),window.addEventListener("touchend",d),window.addEventListener("touchcancel",m),window.addEventListener("blur",u),a=function(){a=null,window.removeEventListener("touchmove",c),window.removeEventListener("touchend",d),window.removeEventListener("touchcancel",m),window.removeEventListener("blur",u)})}}}}function C(e,t){var n=o("react-compiler-runtime").c(4),r,a;n[0]!==t||n[1]!==e?(r=function(){var n=t.current,r=n.onDragCancel,o=n.onDragEnd,a=n.onDragMove,i=n.onDragStart;switch(e.lastEffect){case"start":{i(e);return}case"move":{a(e);return}case"end":{o(e);return}case"cancel":{r(e);return}}},a=[e,t],n[0]=t,n[1]=e,n[2]=r,n[3]=a):(r=n[2],a=n[3]),u(r,a)}function b(e,t,n){var a=o("react-compiler-runtime").c(13),i=d(g),l=i[0],s=i[1],c;a[0]!==e||a[1]!==t?(c=function(){return y(s,e,t)},a[0]=e,a[1]=t,a[2]=c):c=a[2];var m=r("useStable")(c),p=m.destroy,_=m.onMouseDown,f=m.onTouchStart,h,C;a[3]!==p?(h=function(){return p},C=[p],a[3]=p,a[4]=h,a[5]=C):(h=a[4],C=a[5]),u(h,C);var b;a[6]!==_||a[7]!==f||a[8]!==(n==null?void 0:n.hasTouchEvents)?(b={onClick:function(t){t.stopPropagation(),t.preventDefault()},onMouseDown:_,onTouchStart:(n==null?void 0:n.hasTouchEvents)===!0?f:void 0},a[6]=_,a[7]=f,a[8]=n==null?void 0:n.hasTouchEvents,a[9]=b):b=a[9];var v;return a[10]!==l||a[11]!==b?(v={dragState:l,rootProps:b},a[10]=l,a[11]=b,a[12]=v):v=a[12],v}function v(e,t){var n=o("react-compiler-runtime").c(7),r=c(e),a=c(null),i,l;n[0]!==e?(i=function(){r.current=e},l=[e],n[0]=e,n[1]=i,n[2]=l):(i=n[1],l=n[2]),u(i,l);var s=b(r,a,t),d=s.dragState,m=s.rootProps;C(d,r);var p=d.dragState==="dragging",_;return n[3]!==d||n[4]!==m||n[5]!==p?(_={dragState:d,isDragging:p,rootProps:m},n[3]=d,n[4]=m,n[5]=p,n[6]=_):_=n[6],_}l.usePointerDragResizeObserver=m,l.computePointerOffsetRatio=p,l.usePointerDrag=v}),98);
__d("VideoPlayerSliderNub.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),n=e.isVisible,r;t[0]!==n?(r={0:{className:"x14hiurz x1g7gg9k x16h6fyj x1eoefnw x10eyzkn x1c9tyrk xeusxvb x1pahc9y x1ertn4p x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu xamhcws x1alpsbp xlxy82 xyumdvf x1nqv1ya x1s85apg xdk7pt x1x862rh x1rdy4ex x10l6tqk x3m8u43 x1xc55vz x1vjfegm"},1:{className:"x14hiurz x1g7gg9k x16h6fyj x1eoefnw x10eyzkn x1c9tyrk xeusxvb x1pahc9y x1ertn4p x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu xamhcws x1alpsbp xlxy82 xyumdvf x1nqv1ya xdk7pt x1x862rh x1rdy4ex x10l6tqk x3m8u43 x1xc55vz x1vjfegm x1lliihq"}}[!!n<<0],t[0]=n,t[1]=r):r=t[1];var a;return t[2]!==r?(a=s.jsx("div",babelHelpers.extends({},r,{"data-testid":void 0})),t[2]=r,t[3]=a):a=t[3],a}l.default=u}),98);
__d("VideoPlayerScrubberBaseContentDefault.react",["CometVisualCompletionAttributes","VideoPlayerSliderNub.react","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={liveRewindTimePlayed:{backgroundColor:"xh1tjdi",$$css:!0},liveTimePlayed:{backgroundColor:"x1ciooss",$$css:!0},timelineBackground:{backgroundColor:"x1rwy58d",borderStartStartRadius:"xr9e8f9",borderStartEndRadius:"x1e4oeot",borderEndEndRadius:"x1ui04y5",borderEndStartRadius:"x6en5u8",boxShadow:"xpdb0fs",height:"xuoj239",textShadow:"xd9u3wd",userSelect:"x87ps6o",$$css:!0},timelineBuffered:{height:"xuoj239",position:"x10l6tqk",$$css:!0},timelineBufferedBackground:{backgroundColor:"x17j41np",$$css:!0},timelinePlayed:{backgroundColor:"x1evw4sf",borderStartStartRadius:"xr9e8f9",borderStartEndRadius:"x1e4oeot",borderEndEndRadius:"x1ui04y5",borderEndStartRadius:"x6en5u8",height:"xuoj239",position:"x10l6tqk",userSelect:"x87ps6o",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(30),a=t.bufferedRatio,i=t.isLive,l=t.isLiveRewindActive,s=t.isNubVisible,d=t.playedRatio,m=t.timelineBackgroundXStyle,p=t.timelineBufferedXStyle,_=t.timelinePlayedXStyle,f;n[0]!==m?(f=(e||(e=r("stylex"))).props(c.timelineBackground,m),n[0]=m,n[1]=f):f=n[1];var g;n[2]!==i||n[3]!==p?(g=(e||(e=r("stylex")))(c.timelineBuffered,!i&&c.timelineBufferedBackground,p),n[2]=i,n[3]=p,n[4]=g):g=n[4];var h=100*a,y;n[5]!==h?(y=h.toFixed(5),n[5]=h,n[6]=y):y=n[6];var C=y+"%",b;n[7]!==C?(b={width:C},n[7]=C,n[8]=b):b=n[8];var v;n[9]!==g||n[10]!==b?(v=u.jsx("div",babelHelpers.extends({className:g},r("CometVisualCompletionAttributes").IGNORE,{style:b})),n[9]=g,n[10]=b,n[11]=v):v=n[11];var S;n[12]!==i||n[13]!==l||n[14]!==_?(S=(e||(e=r("stylex")))(c.timelinePlayed,i&&!l&&c.liveTimePlayed,i&&l&&c.liveRewindTimePlayed,_),n[12]=i,n[13]=l,n[14]=_,n[15]=S):S=n[15];var R=100*d,L;n[16]!==R?(L=R.toFixed(5),n[16]=R,n[17]=L):L=n[17];var E=L+"%",k;n[18]!==E?(k={width:E},n[18]=E,n[19]=k):k=n[19];var I;n[20]!==s?(I=u.jsx(r("VideoPlayerSliderNub.react"),{isVisible:s}),n[20]=s,n[21]=I):I=n[21];var T;n[22]!==k||n[23]!==I||n[24]!==S?(T=u.jsx("div",babelHelpers.extends({className:S},r("CometVisualCompletionAttributes").IGNORE,{style:k,children:I})),n[22]=k,n[23]=I,n[24]=S,n[25]=T):T=n[25];var D;return n[26]!==f||n[27]!==T||n[28]!==v?(D=u.jsxs("div",babelHelpers.extends({},f,{children:[v,T]})),n[26]=f,n[27]=T,n[28]=v,n[29]=D):D=n[29],D}l.default=d}),98);
__d("useVideoPlayerScrubberState",["VideoPlayerPointerDrag","react","react-compiler-runtime","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(e,t){return Math.min(e>0?t/e:0,1)}function m(e){var t=o("react-compiler-runtime").c(41),n=e.bufferEnd,a=e.currentTime,i=e.duration,l=e.onScrubCancel,s=e.onScrubEnd,m=e.onScrubStart,p=e.supportsTouch,_=o("VideoPlayerPointerDrag").usePointerDragResizeObserver(),f=_.invalidateRootRect,g=_.rootRectRef,h=_.rootSizeRefCallback,y=c(0),C=y[0],b=y[1],v=c(!1),S=v[0],R=v[1],L=r("usePrevious")(a),E,k;t[0]!==a||t[1]!==L?(E=function(){a!==L&&R(!1)},k=[a,L],t[0]=a,t[1]=L,t[2]=E,t[3]=k):(E=t[2],k=t[3]),u(E,k);var I;t[4]!==l?(I=function(t){l()},t[4]=l,t[5]=I):I=t[5];var T;t[6]!==i||t[7]!==l||t[8]!==s||t[9]!==g?(T=function(t){var e=o("VideoPlayerPointerDrag").computePointerOffsetRatio(t,g.current);if(!e){l();return}b(e.ratioX);var n=e.ratioX*i;s(n)},t[6]=i,t[7]=l,t[8]=s,t[9]=g,t[10]=T):T=t[10];var D;t[11]===Symbol.for("react.memo_cache_sentinel")?(D=function(){R(!0)},t[11]=D):D=t[11];var x;t[12]!==g?(x=function(t){var e=o("VideoPlayerPointerDrag").computePointerOffsetRatio(t,g.current);e&&b(e.ratioX)},t[12]=g,t[13]=x):x=t[13];var $;t[14]!==f||t[15]!==m||t[16]!==g?($=function(t){f();var e=o("VideoPlayerPointerDrag").computePointerOffsetRatio(t,g.current);e&&(b(e.ratioX),m())},t[14]=f,t[15]=m,t[16]=g,t[17]=$):$=t[17];var P;t[18]!==I||t[19]!==T||t[20]!==x||t[21]!==$?(P={onDragCancel:I,onDragEnd:T,onDragEndSync:D,onDragMove:x,onDragStart:$},t[18]=I,t[19]=T,t[20]=x,t[21]=$,t[22]=P):P=t[22];var N=p===!0,M;t[23]!==N?(M={hasTouchEvents:N},t[23]=N,t[24]=M):M=t[24];var w=o("VideoPlayerPointerDrag").usePointerDrag(P,M),A=w.isDragging,F=w.rootProps,O;t[25]!==n||t[26]!==i?(O=d(i,n),t[25]=n,t[26]=i,t[27]=O):O=t[27];var B=O,W;t[28]!==a||t[29]!==i?(W=d(i,a),t[28]=a,t[29]=i,t[30]=W):W=t[30];var q=W,U;return t[31]!==B||t[32]!==q||t[33]!==f||t[34]!==A||t[35]!==S||t[36]!==C||t[37]!==F||t[38]!==g||t[39]!==h?(U={bufferedRatio:B,currentPlayedRatio:q,invalidateRootRect:f,isDragging:A,isWaitingForSeek:S,pointerOffsetRatio:C,rootProps:F,rootRectRef:g,rootSizeRefCallback:h},t[31]=B,t[32]=q,t[33]=f,t[34]=A,t[35]=S,t[36]=C,t[37]=F,t[38]=g,t[39]=h,t[40]=U):U=t[40],U}l.default=m}),98);
__d("VideoPlayerScrubberBase.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","VideoPlayerScrubberBaseContentDefault.react","VideoPlayerUserInteractionCounter","react","react-compiler-runtime","useVideoPlayerScrubberState"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useMemo,p=c.useState;function _(e){var t=o("react-compiler-runtime").c(86),n=e.bufferEnd,a=e.currentTime,i=e.disableKeyCommands,l=e.duration,c=e.hideNub,d=e.isLive,m=e.isLiveRewindActive,_=e.keyLeftDescription,f=e.keyRightDescription,g=e.onScrubCancel,h=e.onScrubEnd,y=e.onScrubStart,C=e.onUserInteraction,b=e.playFromBeginningImpl,v=e.renderScrubber,S=e.renderTooltip,R=e.skipBackwardImpl,L=e.skipForwardImpl,E=e.skipToEndImpl,k=e.supportsTouch,I=e.timelineBackgroundXStyle,T=e.timelineBufferedXStyle,D=e.timelinePlayedXStyle,x=e.withoutVerticalPadding,$=c===void 0?!1:c,P=x===void 0?!1:x,N=p(!1),M=N[0],w=N[1],A=p(0),F=A[0],O=A[1],B=p(null),W=B[0],q=B[1],U;t[0]!==n||t[1]!==a||t[2]!==l||t[3]!==g||t[4]!==h||t[5]!==y||t[6]!==k?(U={bufferEnd:n,currentTime:a,duration:l,onScrubCancel:g,onScrubEnd:h,onScrubStart:y,supportsTouch:k},t[0]=n,t[1]=a,t[2]=l,t[3]=g,t[4]=h,t[5]=y,t[6]=k,t[7]=U):U=t[7];var V=r("useVideoPlayerScrubberState")(U),H=V.bufferedRatio,G=V.currentPlayedRatio,z=V.invalidateRootRect,j=V.isDragging,K=V.isWaitingForSeek,Q=V.pointerOffsetRatio,X=V.rootProps,Y=V.rootRectRef,J=V.rootSizeRefCallback,Z;t[8]===Symbol.for("react.memo_cache_sentinel")?(Z=function(){w(!0)},t[8]=Z):Z=t[8];var ee=Z,te;t[9]===Symbol.for("react.memo_cache_sentinel")?(te=function(){w(!1)},t[9]=te):te=t[9];var ne=te,re;t[10]!==l||t[11]!==z||t[12]!==Y?(re=function(t){if(z(),Y.current!=null){var e=Y.current.left,n=Y.current.width,r=Math.max(0,Math.min(n,t.clientX-e)),o=n>0?r/n:0,a=Number.isFinite(l)&&l>0?l*o:null;O(t.clientX-e),q(a)}},t[10]=l,t[11]=z,t[12]=Y,t[13]=re):re=t[13];var oe=re,ae=M||j;o("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_scrubber",ae,C);var ie=M||j||K,le=j||K?Q:d&&!m?1:G,se;t[14]!==i||t[15]!==_||t[16]!==f||t[17]!==b||t[18]!==R||t[19]!==L||t[20]!==E?(se=i===!0?[]:[{command:{key:r("CometKeys").RIGHT},description:f,handler:L},{command:{key:r("CometKeys").LEFT},description:_,handler:R},{command:{key:r("CometKeys").HOME},description:s._(/*BTDS*/"Play from beginning"),handler:b},{command:{key:r("CometKeys").END},description:s._(/*BTDS*/"Skip to end"),handler:E}],t[14]=i,t[15]=_,t[16]=f,t[17]=b,t[18]=R,t[19]=L,t[20]=E,t[21]=se):se=t[21];var ue=se,ce=!$&&ie,de,me,pe,_e,fe,ge,he,ye,Ce,be,ve,Se,Re,Le,Ee,ke,Ie;if(t[22]!==H||t[23]!==ue||t[24]!==a||t[25]!==l||t[26]!==M||t[27]!==d||t[28]!==m||t[29]!==oe||t[30]!==le||t[31]!==v||t[32]!==X||t[33]!==J||t[34]!==ce||t[35]!==I||t[36]!==T||t[37]!==D||t[38]!==W||t[39]!==P){var Te={bufferedRatio:H,duration:l,hoveringPositionSec:W,isHovering:M,isLive:d,isLiveRewindActive:m,isNubVisible:ce,playedRatio:le,timelineBackgroundXStyle:I,timelineBufferedXStyle:T,timelinePlayedXStyle:D};de=r("CometComponentWithKeyCommands.react"),ke=ue,Ie=X,t[57]===Symbol.for("react.memo_cache_sentinel")?(me=s._(/*BTDS*/"Change Position"),t[57]=me):me=t[57],pe="horizontal",_e=l,fe="0",ge=a,t[58]!==P?(he={0:"x1ypdohk x1y1aw1k xyri2b xwib8y2 x1c1uobl x1n2onr6 x87ps6o xh8yej3",1:"x1ypdohk xyri2b x1c1uobl x1n2onr6 x87ps6o xh8yej3 x18d9i69 xexx8yu"}[!!P<<0],t[58]=P,t[59]=he):he=t[59],ye="video_player_scrubber",Ce=ee,be=ne,ve=oe,Se=J,Re="slider",Le=0,Ee=v!=null?v(Te):u.jsx(r("VideoPlayerScrubberBaseContentDefault.react"),babelHelpers.extends({},Te)),t[22]=H,t[23]=ue,t[24]=a,t[25]=l,t[26]=M,t[27]=d,t[28]=m,t[29]=oe,t[30]=le,t[31]=v,t[32]=X,t[33]=J,t[34]=ce,t[35]=I,t[36]=T,t[37]=D,t[38]=W,t[39]=P,t[40]=de,t[41]=me,t[42]=pe,t[43]=_e,t[44]=fe,t[45]=ge,t[46]=he,t[47]=ye,t[48]=Ce,t[49]=be,t[50]=ve,t[51]=Se,t[52]=Re,t[53]=Le,t[54]=Ee,t[55]=ke,t[56]=Ie}else de=t[40],me=t[41],pe=t[42],_e=t[43],fe=t[44],ge=t[45],he=t[46],ye=t[47],Ce=t[48],be=t[49],ve=t[50],Se=t[51],Re=t[52],Le=t[53],Ee=t[54],ke=t[55],Ie=t[56];var De;t[60]!==M||t[61]!==S||t[62]!==F||t[63]!==W?(De=S!=null&&W!=null&&M&&u.jsx("div",{className:"xfqi8uc x10l6tqk",style:{left:F},children:S(W)}),t[60]=M,t[61]=S,t[62]=F,t[63]=W,t[64]=De):De=t[64];var xe;t[65]!==me||t[66]!==pe||t[67]!==_e||t[68]!==fe||t[69]!==ge||t[70]!==he||t[71]!==ye||t[72]!==Ce||t[73]!==be||t[74]!==ve||t[75]!==Se||t[76]!==Re||t[77]!==Le||t[78]!==Ee||t[79]!==De||t[80]!==Ie?(xe=u.jsxs("div",babelHelpers.extends({},Ie,{"aria-label":me,"aria-orientation":pe,"aria-valuemax":_e,"aria-valuemin":fe,"aria-valuenow":ge,className:he,"data-testid":void 0,onMouseEnter:Ce,onMouseLeave:be,onMouseMove:ve,ref:Se,role:Re,tabIndex:Le,children:[Ee,De]})),t[65]=me,t[66]=pe,t[67]=_e,t[68]=fe,t[69]=ge,t[70]=he,t[71]=ye,t[72]=Ce,t[73]=be,t[74]=ve,t[75]=Se,t[76]=Re,t[77]=Le,t[78]=Ee,t[79]=De,t[80]=Ie,t[81]=xe):xe=t[81];var $e;return t[82]!==de||t[83]!==ke||t[84]!==xe?($e=u.jsx(de,{commandConfigs:ke,children:xe}),t[82]=de,t[83]=ke,t[84]=xe,t[85]=$e):$e=t[85],$e}l.default=_}),226);
__d("VideoPlayerScrubber.react",["fbt","VideoPlayerHooks","VideoPlayerScrubberBase.react","react","react-compiler-runtime","useLiveRewindUtils"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=e.useCallback;function m(){return(u||(u=o("VideoPlayerHooks"))).useCurrentTimeThrottled(200)}function p(e){var t=o("react-compiler-runtime").c(48),n=e.onUserInteraction,a=e.renderScrubber,i=e.renderTooltip,l=m(),d=(u||(u=o("VideoPlayerHooks"))).useDuration(),p=u.useController(),_=u.useBufferEnd(),f=u.useIsLive(),g=u.useIsLiveRewindActive(),h=o("useLiveRewindUtils").useLiveRewindScrub(),y=o("useLiveRewindUtils").useLiveRewindForward(),C=o("useLiveRewindUtils").useLiveRewindBack(),b=o("useLiveRewindUtils").useLiveRewindStart(),v=o("useLiveRewindUtils").useLiveRewindLive(),S=o("useLiveRewindUtils").useLiveRewindSeekableStartTime();f&&(d=d-S,l=l-S);var R;t[0]!==p||t[1]!==d||t[2]!==f||t[3]!==y?(R=function(){if(f)y();else{var e=p.getPlayheadPosition()+5;e>=d?p.seek(d-.01):p.seek(e)}},t[0]=p,t[1]=d,t[2]=f,t[3]=y,t[4]=R):R=t[4];var L=R,E;t[5]!==f?(E=f?s._(/*BTDS*/"Fast forward 10 seconds"):s._(/*BTDS*/"Fast forward 5 seconds"),t[5]=f,t[6]=E):E=t[6];var k=E,I;t[7]!==p||t[8]!==f||t[9]!==C?(I=function(){if(f)C();else{var e=p.getPlayheadPosition()-5;e<0?p.seek(0):p.seek(e)}},t[7]=p,t[8]=f,t[9]=C,t[10]=I):I=t[10];var T=I,D;t[11]!==f?(D=f?s._(/*BTDS*/"Rewind 10 seconds"):s._(/*BTDS*/"Rewind 5 seconds"),t[11]=f,t[12]=D):D=t[12];var x=D,$;t[13]!==p||t[14]!==f||t[15]!==b?($=function(){f?b():p.seek(0)},t[13]=p,t[14]=f,t[15]=b,t[16]=$):$=t[16];var P=$,N;t[17]!==p||t[18]!==d||t[19]!==f||t[20]!==v?(N=function(){f?v():p.seek(d-.01)},t[17]=p,t[18]=d,t[19]=f,t[20]=v,t[21]=N):N=t[21];var M=N,w;t[22]!==p?(w=function(){p.scrubEnd(null)},t[22]=p,t[23]=w):w=t[23];var A=w,F;t[24]!==p?(F=function(){p.scrubBegin()},t[24]=p,t[25]=F):F=t[25];var O=F,B;t[26]!==p||t[27]!==f||t[28]!==h?(B=function(t){f?h(t):p.scrubEnd(t)},t[26]=p,t[27]=f,t[28]=h,t[29]=B):B=t[29];var W=B,q;return t[30]!==_||t[31]!==l||t[32]!==d||t[33]!==f||t[34]!==g||t[35]!==M||t[36]!==x||t[37]!==k||t[38]!==n||t[39]!==P||t[40]!==a||t[41]!==i||t[42]!==A||t[43]!==W||t[44]!==O||t[45]!==T||t[46]!==L?(q=c.jsx(r("VideoPlayerScrubberBase.react"),{bufferEnd:_,currentTime:l,duration:d,isLive:f,isLiveRewindActive:g,keyLeftDescription:x,keyRightDescription:k,onScrubCancel:A,onScrubEnd:W,onScrubStart:O,onUserInteraction:n,playFromBeginningImpl:P,renderScrubber:a,renderTooltip:i,skipBackwardImpl:T,skipForwardImpl:L,skipToEndImpl:M}),t[30]=_,t[31]=l,t[32]=d,t[33]=f,t[34]=g,t[35]=M,t[36]=x,t[37]=k,t[38]=n,t[39]=P,t[40]=a,t[41]=i,t[42]=A,t[43]=W,t[44]=O,t[45]=T,t[46]=L,t[47]=q):q=t[47],q}l.default=p}),226);
__d("VideoPlayerScrubberBaseContentSegmented_renderer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerScrubberBaseContentSegmented_renderer",selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoVideoChaptersConnection",kind:"LinkedField",name:"video_chapters",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoChapter",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"start_time",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"XFBVideoPlayerScrubberBaseContentSegmentedRenderer",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerScrubberBaseContentSegmented.react",["CometRelay","CometVisualCompletionAttributes","VideoPlayerScrubberBaseContentSegmented_renderer.graphql","VideoPlayerSliderNub.react","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=2,m={hoveredChapter:{height:"x1hagigm",marginTop:"xwt3t8n",$$css:!0},liveRewindTimePlayed:{backgroundColor:"xh1tjdi",$$css:!0},liveTimePlayed:{backgroundColor:"x1ciooss",$$css:!0},timelineBackground:{backgroundColor:"x1rwy58d",borderStartStartRadius:"xr9e8f9",borderStartEndRadius:"x1e4oeot",borderEndEndRadius:"x1ui04y5",borderEndStartRadius:"x6en5u8",boxShadow:"xpdb0fs",height:"xuoj239",marginTop:"xzx6vk8",position:"x10l6tqk",textShadow:"xd9u3wd",userSelect:"x87ps6o",$$css:!0},timelineBuffered:{borderStartStartRadius:"xr9e8f9",borderStartEndRadius:"x1e4oeot",borderEndEndRadius:"x1ui04y5",borderEndStartRadius:"x6en5u8",height:"x5yr21d",position:"x10l6tqk",$$css:!0},timelineBufferedBackground:{backgroundColor:"x17j41np",$$css:!0},timelinePlayed:{backgroundColor:"x1evw4sf",borderStartStartRadius:"xr9e8f9",borderStartEndRadius:"x1e4oeot",borderEndEndRadius:"x1ui04y5",borderEndStartRadius:"x6en5u8",height:"x5yr21d",position:"x10l6tqk",userSelect:"x87ps6o",$$css:!0}};function p(t){var a,i=o("react-compiler-runtime").c(33),l=t.renderer,u=t.videoChapters,p=t.bufferedRatio,f=t.duration,g=t.hoveringPositionSec,h=t.isHovering,y=t.isLive,C=t.isLiveRewindActive,b=t.isNubVisible,v=t.playedRatio,S=t.timelineBackgroundXStyle,R=t.timelineBufferedXStyle,L=t.timelinePlayedXStyle,E=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerScrubberBaseContentSegmented_renderer.graphql"),l),k;if(i[0]!==(E==null||(a=E.video)==null||(a=a.video_chapters)==null?void 0:a.nodes)||i[1]!==u){var I,T,D,x;k=(I=(T=E==null||(D=E.video)==null||(D=D.video_chapters)==null?void 0:D.nodes)!=null?T:u)!=null?I:[],i[0]=E==null||(x=E.video)==null||(x=x.video_chapters)==null?void 0:x.nodes,i[1]=u,i[2]=k}else k=i[2];var $=k,P;if(i[3]!==p||i[4]!==$||i[5]!==f||i[6]!==g||i[7]!==h||i[8]!==y||i[9]!==C||i[10]!==b||i[11]!==v||i[12]!==S||i[13]!==R||i[14]!==L||i[15]!==u){var N;i[17]!==f?(N=function(t){var e=t.start_time;return{left:(e!=null?e:0)/(f*1e3),right:-1}},i[17]=f,i[18]=N):N=i[18];var M=$.map(N).sort(_);M[0].left!==0&&M.unshift({left:0,right:-1});for(var w=0;w<M.length-1;w++)M[w].right=M[w+1].left;M[M.length-1].right=1;var A=g!=null?g/f:-1,F;i[19]!==p||i[20]!==A||i[21]!==h||i[22]!==y||i[23]!==C||i[24]!==b||i[25]!==v||i[26]!==S||i[27]!==R||i[28]!==L||i[29]!==u?(F=function(t){var e=t.right-t.left,n=h&&t.left<A&&A<t.right;return c.jsxs("div",{className:(s||(s=r("stylex")))(m.timelineBackground,S,n&&m.hoveredChapter),style:{left:(100*t.left).toFixed(5)+"%",width:"calc("+(100*e).toFixed(5)+"% - "+d+"px)"},children:[p>t.left&&c.jsx("div",babelHelpers.extends({className:(s||(s=r("stylex")))(m.timelineBuffered,!y&&m.timelineBufferedBackground,R)},r("CometVisualCompletionAttributes").IGNORE,{style:{width:p>t.right?"100%":(100*(p-t.left)/e).toFixed(5)+"%"}})),(v>t.left||t.left===0)&&c.jsx("div",babelHelpers.extends({className:(s||(s=r("stylex")))(m.timelinePlayed,y&&!C&&m.liveTimePlayed,y&&C&&m.liveRewindTimePlayed,L)},r("CometVisualCompletionAttributes").IGNORE,{style:{width:v>t.right?"100%":(100*(v-t.left)/e).toFixed(5)+"%"},children:v<=t.right&&c.jsx("div",babelHelpers.extends({},{0:{},1:{className:"xr9ek0c"}}[!!n<<0],{children:c.jsx(r("VideoPlayerSliderNub.react"),{isVisible:b})}))}))]},u!=null?t.left.toString()+t.right.toString():t.left)},i[19]=p,i[20]=A,i[21]=h,i[22]=y,i[23]=C,i[24]=b,i[25]=v,i[26]=S,i[27]=R,i[28]=L,i[29]=u,i[30]=F):F=i[30],P=M.map(F),i[3]=p,i[4]=$,i[5]=f,i[6]=g,i[7]=h,i[8]=y,i[9]=C,i[10]=b,i[11]=v,i[12]=S,i[13]=R,i[14]=L,i[15]=u,i[16]=P}else P=i[16];var O;return i[31]!==P?(O=c.jsx(c.Fragment,{children:P}),i[31]=P,i[32]=O):O=i[32],O}function _(e,t){return e.left-t.left}l.default=p}),98);
__d("VideoPlayerScrubberChapterPreview_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerScrubberChapterPreview_video",selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoVideoChaptersConnection",kind:"LinkedField",name:"video_chapters",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoChapter",kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"headline",storageKey:null},action:"LOG",path:"video.video_chapters.nodes.headline"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"start_time",storageKey:null},action:"LOG",path:"video.video_chapters.nodes.start_time"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"XFBVideoPlayerScrubberChapterPreviewRenderer",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerScrubberChapterPreview.react",["CometRelay","DateConsts","FDSText.react","VideoPlayerScrubberChapterPreview_video.graphql","formatDurationSeconds","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(e,t){if(e[0].start_time!==0&&t*o("DateConsts").MS_PER_SEC<e[0].start_time)return"";for(var n=1;n<e.length;n++)if(t*o("DateConsts").MS_PER_SEC<e[n].start_time)return e[n-1].headline;return e[e.length-1].headline}function d(t){var a,i,l=o("react-compiler-runtime").c(18),s=t.timestampSec,d=t.video,m=t.videoChapters,p=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerScrubberChapterPreview_video.graphql"),d);if((p==null||(a=p.video)==null||(a=a.video_chapters)==null?void 0:a.nodes)==null&&m==null)return null;var _;if(l[0]!==m||l[1]!==(p==null||(i=p.video)==null||(i=i.video_chapters)==null?void 0:i.nodes)){var f,g,h,y;_=(f=(g=p==null||(h=p.video)==null||(h=h.video_chapters)==null?void 0:h.nodes.filter(Boolean))!=null?g:m)!=null?f:[],l[0]=m,l[1]=p==null||(y=p.video)==null||(y=y.video_chapters)==null?void 0:y.nodes,l[2]=_}else _=l[2];var C=_,b;l[3]!==C||l[4]!==s?(b=c(C,s),l[3]=C,l[4]=s,l[5]=b):b=l[5];var v=b,S,R;l[6]===Symbol.for("react.memo_cache_sentinel")?(S={className:"xjwep3j x1t39747 x1wcsgtt x1pczhz8 x78zum5 xl56j7k x1n2onr6 xdzyupr"},R={className:"xjwep3j x1t39747 x1wcsgtt x1pczhz8 x10l6tqk x2b8uid xijtgcl xuuh30 xh8yej3 xjnlgov"},l[6]=S,l[7]=R):(S=l[6],R=l[7]);var L;l[8]!==v?(L=u.jsx("div",babelHelpers.extends({},R,{children:u.jsx(r("FDSText.react"),{color:"primaryOnMedia",type:"body3",children:v})})),l[8]=v,l[9]=L):L=l[9];var E;l[10]===Symbol.for("react.memo_cache_sentinel")?(E={className:"xjwep3j x1t39747 x1wcsgtt x1pczhz8 x10l6tqk x2b8uid xijtgcl xuuh30 xh8yej3 x1ey2m1c"},l[10]=E):E=l[10];var k;l[11]!==s?(k=r("formatDurationSeconds")(Math.round(s)),l[11]=s,l[12]=k):k=l[12];var I;l[13]!==k?(I=u.jsx("div",babelHelpers.extends({},E,{children:u.jsx(r("FDSText.react"),{color:"primaryOnMedia",type:"body4",children:k})})),l[13]=k,l[14]=I):I=l[14];var T;return l[15]!==L||l[16]!==I?(T=u.jsxs("div",babelHelpers.extends({},S,{children:[L,I]})),l[15]=L,l[16]=I,l[17]=T):T=l[17],T}l.default=d}),98);
__d("VideoPlayerScrubberPreview_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerScrubberPreview_video",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"video_player_scrubber_preview_renderer",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"VideoPlayerScrubberPreview_video",fragmentName:"VideoPlayerScrubberChapterPreview_video",fragmentPropName:"video",kind:"ModuleImport"}],type:"XFBVideoPlayerScrubberChapterPreviewRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"VideoPlayerScrubberPreview_video",fragmentName:"VideoPlayerScrubberDefaultPreview_video",fragmentPropName:"video",kind:"ModuleImport"}],type:"XFBVideoPlayerScrubberDefaultPreviewRenderer",abstractKey:null}],storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerScrubberPreview.react",["CometRelay","VideoPlayerScrubberChapterPreview.react","VideoPlayerScrubberPreview_video.graphql","VideoPlayerTimeIndicator.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a=o("react-compiler-runtime").c(11),i=t.timestampSec,l=t.video,s=t.videoChapters,c=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerScrubberPreview_video.graphql"),l);if(c==null){if(s!=null){var d;return a[0]!==i||a[1]!==s?(d=u.jsx(r("VideoPlayerScrubberChapterPreview.react"),{timestampSec:i,video:null,videoChapters:s}),a[0]=i,a[1]=s,a[2]=d):d=a[2],d}var m;return a[3]!==i?(m=u.jsx(r("VideoPlayerTimeIndicator.react"),{shouldCenterSelf:!0,timestampSec:i}),a[3]=i,a[4]=m):m=a[4],m}var p=c==null?void 0:c.video_player_scrubber_preview_renderer,_;a[5]!==i||a[6]!==c?(_={timestampSec:i,video:c},a[5]=i,a[6]=c,a[7]=_):_=a[7];var f;return a[8]!==p||a[9]!==_?(f=u.jsx(o("CometRelay").MatchContainer,{match:p,props:_}),a[8]=p,a[9]=_,a[10]=f):f=a[10],f}l.default=c}),98);
__d("VideoPlayerScrubberRenderer_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerScrubberRenderer_video",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"video_player_scrubber_base_content_renderer",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"VideoPlayerScrubberRenderer_video",fragmentName:"VideoPlayerScrubberBaseContentSegmented_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBVideoPlayerScrubberBaseContentSegmentedRenderer",abstractKey:null}],storageKey:null}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerScrubberRenderer.react",["CometRelay","VideoPlayerScrubberBaseContentDefault.react","VideoPlayerScrubberBaseContentSegmented.react","VideoPlayerScrubberRenderer_video.graphql","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a=o("react-compiler-runtime").c(11),i=t.scrubberProps,l=t.video,s=t.videoChapters,c=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerScrubberRenderer_video.graphql"),l);if((c==null?void 0:c.video_player_scrubber_base_content_renderer)==null){if(s!=null){var d;return a[0]!==i||a[1]!==s?(d=u.jsx(r("VideoPlayerScrubberBaseContentSegmented.react"),babelHelpers.extends({},i,{videoChapters:s})),a[0]=i,a[1]=s,a[2]=d):d=a[2],d}var m;return a[3]!==i?(m=u.jsx(r("VideoPlayerScrubberBaseContentDefault.react"),babelHelpers.extends({},i)),a[3]=i,a[4]=m):m=a[4],m}var p=c==null?void 0:c.video_player_scrubber_base_content_renderer,_;a[5]!==i||a[6]!==s?(_=babelHelpers.extends({},i,{videoChapters:s}),a[5]=i,a[6]=s,a[7]=_):_=a[7];var f;return a[8]!==p||a[9]!==_?(f=u.jsx(o("CometRelay").MatchContainer,{match:p,props:_}),a[8]=p,a[9]=_,a[10]=f):f=a[10],f}l.default=c}),98);
__d("VideoPlayerVolumeControlBase.react",["fbt","ix","FocusWithinHandler.react","VideoPlayerControlIcon.react","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=e.useState,m=.33,p=.66;function _(e){var t=o("react-compiler-runtime").c(18),n=e.audioAvailabilityUI,a=e.isMuted,i=e.onMouseEnter,l=e.onMouseLeave,_=e.onSetMuted,f=e.onUserInteraction,g=e.renderVolumeSlider,h=e.useOutlineIcons,y=e.volume,C=h===void 0?!1:h,b=!a&&y>0,v;t[0]!==n||t[1]!==b||t[2]!==C||t[3]!==y?(n!=null&&n.shouldShowNullIcon?v=C?o("fbicon")._(u("944795"),20):o("fbicon")._(u("944792"),20):b?y<=m?v=C?o("fbicon")._(u("1146252"),20):o("fbicon")._(u("1104387"),20):y<=p?v=C?o("fbicon")._(u("1104392"),20):o("fbicon")._(u("1104390"),20):v=C?o("fbicon")._(u("564393"),20):o("fbicon")._(u("564390"),20):v=C?o("fbicon")._(u("564399"),20):o("fbicon")._(u("564396"),20),t[0]=n,t[1]=b,t[2]=C,t[3]=y,t[4]=v):v=t[4];var S=d(!1),R=S[0],L=S[1],E;t[5]!==a?(E=a?s._(/*BTDS*/"Unmute"):s._(/*BTDS*/"Mute"),t[5]=a,t[6]=E):E=t[6];var k=E,I;return t[7]!==n||t[8]!==v||t[9]!==a||t[10]!==R||t[11]!==k||t[12]!==i||t[13]!==l||t[14]!==_||t[15]!==f||t[16]!==g?(I=c.jsx(r("FocusWithinHandler.react"),{children:function(t,o){return c.jsxs("div",{className:"x1ypdohk x1rg5ohu xhsvlbd xyamay9 x1icxu4v x10b6aqq x25sj25 x1n2onr6",onMouseEnter:i,onMouseLeave:l,children:[n!=null&&n.shouldDisableVolumeControl?null:c.jsx("div",{className:"xk7dvq3 x9f619 x1o0tod x1yrsyyn x1icxu4v x10b6aqq x25sj25 x10l6tqk xh8yej3",children:g({focusVisible:o,onVisibilityChange:L})}),c.jsx(r("VideoPlayerControlIcon.react"),{icon:v,label:k,onPress:function(){n&&n.onVolumeControlPress(),n!=null&&n.shouldDisableVolumeControl||_(!a,"user_initiated"),f&&f({name:"video_mute_button",type:"happened"})},tooltip:n!=null?n.tooltipContent:null,tooltipAlign:"end",tooltipImpl:n!=null?n.tooltipImpl:null,tooltipOffsetY:R?-80:0})]})}}),t[7]=n,t[8]=v,t[9]=a,t[10]=R,t[11]=k,t[12]=i,t[13]=l,t[14]=_,t[15]=f,t[16]=g,t[17]=I):I=t[17],I}l.default=_}),226);
__d("VideoPlayerVolumeSliderBase.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","VideoPlayerPointerDrag","VideoPlayerSliderNub.react","VideoPlayerUserInteractionCounter","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useEffect,m=c.useMemo,p=c.useRef,_=c.useState;function f(e){var t=o("react-compiler-runtime").c(65),n=e.isHovering,a=e.isMuted,i=e.onChangeVolumeDown,l=e.onChangeVolumeUp,c=e.onSetMuted,m=e.onSetVolume,f=e.onUserInteraction,g=e.onVisibilityChange,h=e.showBackgroundOverlay,y=e.volume,C=h===void 0?!1:h,b=o("VideoPlayerPointerDrag").usePointerDragResizeObserver(),v=b.invalidateRootRect,S=b.rootRectRef,R=b.rootSizeRefCallback,L=p(y),E=p(a),k=a?0:y,I=_(k),T=I[0],D=I[1],x;t[0]!==a||t[1]!==c||t[2]!==m||t[3]!==S?(x=function(t){var e=o("VideoPlayerPointerDrag").computePointerOffsetRatio(t,S.current);if(e){var n=Math.max(0,Math.min(1,1-e.ratioY));D(n),m(n),a&&c(!1,"user_initiated")}},t[0]=a,t[1]=c,t[2]=m,t[3]=S,t[4]=x):x=t[4];var $=x,P;t[5]!==c||t[6]!==m?(P=function(t){D(L.current),m(L.current),c(E.current,"user_initiated")},t[5]=c,t[6]=m,t[7]=P):P=t[7];var N,M;t[8]!==$?(N=function(t){$(t)},M=function(t){$(t)},t[8]=$,t[9]=N,t[10]=M):(N=t[9],M=t[10]);var w;t[11]!==v||t[12]!==a||t[13]!==$||t[14]!==y||t[15]!==k?(w=function(t){v(),L.current=y,E.current=a,D(k),$(t)},t[11]=v,t[12]=a,t[13]=$,t[14]=y,t[15]=k,t[16]=w):w=t[16];var A;t[17]!==P||t[18]!==N||t[19]!==M||t[20]!==w?(A={onDragCancel:P,onDragEnd:N,onDragMove:M,onDragStart:w},t[17]=P,t[18]=N,t[19]=M,t[20]=w,t[21]=A):A=t[21];var F=o("VideoPlayerPointerDrag").usePointerDrag(A),O=F.isDragging,B=F.rootProps,W=O?T:k,q=n||O,U=p(q),V,H;t[22]!==q||t[23]!==g?(V=function(){U.current!==q&&g&&g(q),U.current=q},H=[g,q],t[22]=q,t[23]=g,t[24]=V,t[25]=H):(V=t[24],H=t[25]),d(V,H);var G=q;o("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_volume_slider",G,f);var z,j;t[26]===Symbol.for("react.memo_cache_sentinel")?(z={key:r("CometKeys").UP},j=s._(/*BTDS*/"Increase volume"),t[26]=z,t[27]=j):(z=t[26],j=t[27]);var K;t[28]!==l?(K={command:z,description:j,handler:function(){l()}},t[28]=l,t[29]=K):K=t[29];var Q,X;t[30]===Symbol.for("react.memo_cache_sentinel")?(Q={key:r("CometKeys").DOWN},X=s._(/*BTDS*/"Decrease volume"),t[30]=Q,t[31]=X):(Q=t[30],X=t[31]);var Y;t[32]!==i?(Y={command:Q,description:X,handler:function(){i()}},t[32]=i,t[33]=Y):Y=t[33];var J;t[34]!==K||t[35]!==Y?(J=[K,Y],t[34]=K,t[35]=Y,t[36]=J):J=t[36];var Z=J,ee;t[37]===Symbol.for("react.memo_cache_sentinel")?(ee=s._(/*BTDS*/"Change volume"),t[37]=ee):ee=t[37];var te;t[38]!==q?(te={0:"x1ypdohk xng8ra xg01cxk x47corl x1n2onr6 x1d8287x x19991ni xl405pv x1td3qas x1ja2u2z",1:"x1ypdohk xng8ra x1n2onr6 x1d8287x x19991ni xl405pv x1td3qas x1ja2u2z x1hc1fzr x67bb7w"}[!!q<<0],t[38]=q,t[39]=te):te=t[39];var ne;t[40]!==q||t[41]!==C?(ne=q&&C&&u.jsx("div",{className:"x1f4ngb1 x1obq294 x5a5i1n xde0f50 x15x8krk xi2lk0m x1f889gz xaoy8p5 x1iorvi4 xjkvuk6 x135b78x x11lfxj5 x10l6tqk x1v4kod4"}),t[40]=q,t[41]=C,t[42]=ne):ne=t[42];var re;t[43]===Symbol.for("react.memo_cache_sentinel")?(re={className:"x18fn2jl xjwep3j x1t39747 x1wcsgtt x1pczhz8 x1ey2m1c xng8ra xi5uv41 x10l6tqk x1xc55vz"},t[43]=re):re=t[43];var oe;t[44]!==C?(oe={0:"xjwep3j x1t39747 x1wcsgtt x1pczhz8 x1ey2m1c x10l6tqk xh8yej3 x1spa7qu",1:"xjwep3j x1t39747 x1wcsgtt x1pczhz8 x1ey2m1c x10l6tqk xh8yej3 x14hiurz"}[!!C<<0],t[44]=C,t[45]=oe):oe=t[45];var ae=W*100+"%",ie;t[46]!==ae?(ie={height:ae},t[46]=ae,t[47]=ie):ie=t[47];var le;t[48]===Symbol.for("react.memo_cache_sentinel")?(le={className:"x1c7jfne x1f4buv5 x1n2onr6"},t[48]=le):le=t[48];var se;t[49]!==q?(se=u.jsx("div",babelHelpers.extends({},le,{children:u.jsx(r("VideoPlayerSliderNub.react"),{isVisible:q})})),t[49]=q,t[50]=se):se=t[50];var ue;t[51]!==oe||t[52]!==ie||t[53]!==se?(ue=u.jsx("div",babelHelpers.extends({},re,{children:u.jsx("div",{className:oe,style:ie,children:se})})),t[51]=oe,t[52]=ie,t[53]=se,t[54]=ue):ue=t[54];var ce;t[55]!==B||t[56]!==R||t[57]!==te||t[58]!==ne||t[59]!==ue||t[60]!==y?(ce=u.jsxs("div",babelHelpers.extends({},B,{"aria-label":ee,"aria-orientation":"vertical","aria-valuemax":1,"aria-valuemin":0,"aria-valuenow":y,className:te,ref:R,role:"slider",tabIndex:0,children:[ne,ue]})),t[55]=B,t[56]=R,t[57]=te,t[58]=ne,t[59]=ue,t[60]=y,t[61]=ce):ce=t[61];var de;return t[62]!==Z||t[63]!==ce?(de=u.jsx(r("CometComponentWithKeyCommands.react"),{commandConfigs:Z,children:ce}),t[62]=Z,t[63]=ce,t[64]=de):de=t[64],de}l.default=f}),226);
__d("VideoPlayerVolumeSlider.react",["VideoPlayerHooks","VideoPlayerVolumeSliderBase.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useCallback;function d(e){var t=o("react-compiler-runtime").c(21),n=e.isHovering,a=e.onUserInteraction,i=e.onVisibilityChange,l=e.showBackgroundOverlay,c=l===void 0?!1:l,d=(s||(s=o("VideoPlayerHooks"))).useController(),m=s.useMuted(),p=s.useVolume(),_;t[0]!==d?(_=function(t){d.setVolume(t)},t[0]=d,t[1]=_):_=t[1];var f=_,g;t[2]!==d?(g=function(t,n){d.setMuted(t,n)},t[2]=d,t[3]=g):g=t[3];var h=g,y;t[4]!==d?(y=function(t){var e=d.getCurrentState(),n=Math.max(0,Math.min(1,e.volume+t));d.setVolume(n),n===0?d.setMuted(!0,"user_initiated"):e.muted&&d.setMuted(!1,"user_initiated")},t[4]=d,t[5]=y):y=t[5];var C=y,b;t[6]!==C?(b=function(){C(.05)},t[6]=C,t[7]=b):b=t[7];var v=b,S;t[8]!==C?(S=function(){C(-.05)},t[8]=C,t[9]=S):S=t[9];var R=S,L;return t[10]!==R||t[11]!==v||t[12]!==n||t[13]!==m||t[14]!==a||t[15]!==i||t[16]!==h||t[17]!==f||t[18]!==c||t[19]!==p?(L=u.jsx(r("VideoPlayerVolumeSliderBase.react"),{isHovering:n,isMuted:m,onChangeVolumeDown:R,onChangeVolumeUp:v,onSetMuted:h,onSetVolume:f,onUserInteraction:a,onVisibilityChange:i,showBackgroundOverlay:c,volume:p}),t[10]=R,t[11]=v,t[12]=n,t[13]=m,t[14]=a,t[15]=i,t[16]=h,t[17]=f,t[18]=c,t[19]=p,t[20]=L):L=t[20],L}l.default=d}),98);
__d("VideoPlayerVolumeControl.react",["VideoPlayerHooks","VideoPlayerVolumeControlBase.react","VideoPlayerVolumeSlider.react","cr:1826284","react","react-compiler-runtime","useEmptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s,m=d.useCallback,p=d.useState,_=(e=n("cr:1826284"))!=null?e:r("useEmptyFunction");function f(e){var t=o("react-compiler-runtime").c(16),n=e.onUserInteraction,a=e.showBackgroundOverlay,i=e.useOutlineIcons,l=a===void 0?!1:a,s=i===void 0?!1:i,d=p(!1),m=d[0],f=d[1],g=(u||(u=o("VideoPlayerHooks"))).useController(),h=u.useMuted(),y=u.useVolume(),C;t[0]===Symbol.for("react.memo_cache_sentinel")?(C=function(){f(!0)},t[0]=C):C=t[0];var b=C,v;t[1]===Symbol.for("react.memo_cache_sentinel")?(v=function(){f(!1)},t[1]=v):v=t[1];var S=v,R;t[2]!==g?(R=function(t,n){g.setMuted(t,n)},t[2]=g,t[3]=R):R=t[3];var L=R,E=!h&&y>0,k=_({canPlayerProduceSound:E,isHovering:m})||null,I;t[4]!==m||t[5]!==n||t[6]!==l?(I=function(t){var e=t.focusVisible,o=t.onVisibilityChange;return c.jsx(r("VideoPlayerVolumeSlider.react"),{isHovering:m||e,onUserInteraction:n,onVisibilityChange:o,showBackgroundOverlay:l})},t[4]=m,t[5]=n,t[6]=l,t[7]=I):I=t[7];var T;return t[8]!==k||t[9]!==h||t[10]!==n||t[11]!==L||t[12]!==I||t[13]!==s||t[14]!==y?(T=c.jsx(r("VideoPlayerVolumeControlBase.react"),{audioAvailabilityUI:k,isMuted:h,onMouseEnter:b,onMouseLeave:S,onSetMuted:L,onUserInteraction:n,renderVolumeSlider:I,useOutlineIcons:s,volume:y}),t[8]=k,t[9]=h,t[10]=n,t[11]=L,t[12]=I,t[13]=s,t[14]=y,t[15]=T):T=t[15],T}l.default=f}),98);
__d("useVideoPlayerVolumeControlAudioAvailabilityUI",["fbt","CometTooltipImpl.react","VideoPlayerControlsHiddenContext","clearTimeout","emptyFunction","react","setTimeout","useAudioAvailabilityAtPlayhead","usePrevious","useStable"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useContext,m=c.useEffect,p=c.useRef,_=c.useState,f=3e3;function g(e){var t=e.canPlayerProduceSound,n=e.isHovering,o=r("useAudioAvailabilityAtPlayhead")(),a=o.isSilentAtPlayhead,l=o.volumeControlState,c=null;switch(l){case"VOLUME_SILENT":c=s._(/*BTDS*/"Video has no sound");break;case"VOLUME_COPYRIGHT_FULL":c=s._(/*BTDS*/"Muted due to copyright claim");break;case"VOLUME_COPYRIGHT_PARTIAL_SILENCED":c=s._(/*BTDS*/"Partially muted due to copyright claim");break;case"VOLUME_COPYRIGHT_PARTIAL_NOT_SILENCED":break;case"VOLUME_DEFAULT":break;default:}var g=r("usePrevious")(a),h=_(!1),y=h[0],C=h[1],b=p(r("emptyFunction")),v=p(!1),S=_(!1),R=S[0],L=S[1],E=r("useStable")(function(){return function(e){v.current=e,L(e),b.current(e),e||C(!1)}}),k=d(r("VideoPlayerControlsHiddenContext"));m(function(){k||c==null?E(!1):(n||y||a!==g&&a&&t)&&E(!0)},[c,t,k,n,y,a,g,E]),m(function(){if(R){var e=r("setTimeout")(function(){E(!1)},f);return function(){r("clearTimeout")(e)}}},[R,E]);var I=r("useStable")(function(){return function(){C(function(e){return!e})}}),T=r("useStable")(function(){function e(e){var t=_(!1),n=t[0],o=t[1];return m(function(){return b.current=o,function(){b.current=r("emptyFunction")}},[o]),m(function(){e.isVisible||E(!1)},[e.isVisible]),u.jsx(r("CometTooltipImpl.react"),babelHelpers.extends({},e,{isVisible:n}))}return e.displayName=e.name+" [from "+i.id+"]",e}),D=l==="VOLUME_COPYRIGHT_FULL"||l==="VOLUME_SILENT",x=t?a:D;return c==null?null:{onVolumeControlPress:I,shouldDisableVolumeControl:D,shouldShowNullIcon:x,tooltipContent:c,tooltipImpl:T,volumeControlState:l}}l.default=g}),226);/*FB_PKG_DELIM*/
__d("LSDeleteThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.sequence([function(r){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,r){var o,a,i=e.done,l=e.value;return i?(o=[t.i64.cast([0,0]),void 0],n[0]=o[0],n[1]=o[1],o):(r=l.item,a=[r.parentThreadKey,r.disappearingThreadKey],n[0]=a[0],n[1]=a[1])})},function(e){return t.count(t.db.table(9).fetch([[[n[0]]],"parentThreadKeyLastActivityTimestampMs"])).then(function(e){return n[3]=e})},function(r){return e[1]&&t.i64.neq(n[0],t.i64.cast([0,0]))&&t.i64.eq(n[3],t.i64.cast([0,1]))?t.sequence([function(r){return t.forEach(t.db.table(9).fetch([[[e[0]],[n[0]]]]),function(e){return e.delete()})},function(e){return t.i64.neq(n[1],void 0),0}]):t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(e){return e.delete()})},function(e){return t.i64.neq(n[1],void 0),0}])}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteThreadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSMoveThreadToArchivedFolder",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(n,r){var o=n.done,a=n.value;return o?0:(r=a.item,t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(e){var n=e.update,r=e.item;return n({folderName:"",parentThreadKey:t.i64.cast([-1,4294967286]),capabilities2:t.i64.or_(r.capabilities2,t.i64.cast([0,2]))})}))})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxMoveThreadToArchivedFolderStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSOptimisticRemoveThread",["LSDeleteThread","LSIssueNewTaskAndGetTaskID","LSMoveThreadToArchivedFolder"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,1]):(n=a.item,r[4]=n.syncGroup,t.i64.neq(r[4],void 0)?r[3]=r[4]:r[3]=t.i64.cast([0,1]),r[0]=r[3])})},function(r){return[t.i64.cast([0,1]),t.i64.cast([0,2])].some(function(n){return t.i64.eq(e[1],n)})?t.storedProcedure(n("LSMoveThreadToArchivedFolder"),e[0]):t.storedProcedure(n("LSDeleteThread"),e[0],!1)},function(o){return t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),t.i64.to_string(e[0]),t.i64.cast([0,146]),"",void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),r[0],void 0,t.i64.cast([0,0]),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[2]=t[0],t})},function(n){return t.db.table(32).add({taskId:r[2],threadKey:e[0],removeType:e[1],syncGroup:r[0]})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticRemoveThreadStoredProcedure",e.__tables__=["threads","threads_optimistic_context"],a.exports=e}),null);
__d("LSOptimisticRemoveThreadStoredProcedure",["LSOptimisticRemoveThread","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticRemoveThread"),a.threadKey,a.removeType);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSThreadRemoveType",[],(function(t,n,r,o,a,i){var e=Object.freeze({DELETE_THREAD:0,ARCHIVE_THREAD:1,IGNORE_THREAD:2});i.default=e}),66);
__d("MDSTextConfig",["UserAgent","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e={blueLink:{color:"x1fey0fg",$$css:!0},disabled:{color:"x1dntmbh",$$css:!0},highlight:{color:"x1qq9wsj",$$css:!0},negative:{color:"x1a1m0xk",$$css:!0},positive:{color:"x6u5lvz",$$css:!0},primary:{color:"xzsf02u",$$css:!0},secondary:{color:"xi81zsa",$$css:!0},secondaryOnMedia:{color:"xkxfvhb",$$css:!0},tertiary:{color:"x12scifz",$$css:!0},white:{color:"x14ctfv",$$css:!0}},s={disabledButton:{color:"x1x80s81",$$css:!0},primaryButton:{color:"xtk6v10",$$css:!0},primaryDeemphasizedButton:{color:"x1mvi0mv",$$css:!0},secondaryButton:{color:"x1dem4cn",$$css:!0}},u={blueLink:{color:"x15k1xyk",$$css:!0},disabled:{color:"xc7hbz8",$$css:!0},highlight:{color:"x16uf79r",$$css:!0},negative:{color:"x1unwjcu",$$css:!0},positive:{color:"xxmynsg",$$css:!0},primary:{color:"xw2npq5",$$css:!0},primaryOnMedia:{color:"x8w7gz1",$$css:!0},secondary:{color:"xhgddhk",$$css:!0},secondaryOnMedia:{color:"xzutexd",$$css:!0},tertiary:{color:"xerl464",$$css:!0},white:{color:"xnba3h0",$$css:!0}},c={apple:{MozOsxFontSmoothing:"xlh3980",WebkitFontSmoothing:"xvmahel",fontFamily:"x1n0sxbx",$$css:!0},default:{fontFamily:"x10flsy6",$$css:!0},segoe:{fontFamily:"x1xmvt09",$$css:!0}},d={default:function(t){switch(t){case"body1":return[4,5];case"body2":return[3,5];case"body3":return[4,5];case"body4":return[3,4];case"bodyLink1":return[4,5];case"bodyLink2":return[3,5];case"bodyLink3":return[4,5];case"bodyLink4":return[3,4];case"button1":return[3,5];case"button2":return[4,5];case"entityHeaderHeadline1":return[7,8];case"entityHeaderHeadline2":return[5,7];case"entityHeaderMeta1":return[4,5];case"entityHeaderMeta2":return[4,5];case"entityHeaderMeta3":return[4,3];case"headline3":return[3,5];case"headline4":return[4,5];case"headlineDeemphasized3":return[3,5];case"headlineDeemphasized4":return[4,5];case"headlineEmphasized1":return[5,6];case"headlineEmphasized2":return[4,5];case"headlineEmphasized3":return[3,4];case"headlineEmphasized4":return[4,5];case"headlineEmphasized5":return[3,4];case"meta1":return[3,4];case"meta2":return[3,4];case"meta3":return[3,4];case"meta4":return[3,4]}},segoe:function(t){switch(t){case"body1":return[6,4,1];case"body2":return[5,3,1];case"body3":return[5,4];case"body4":return[4,3,1];case"bodyLink1":return[6,4,1];case"bodyLink2":return[5,3,1];case"bodyLink3":return[5,4];case"bodyLink4":return[4,3,1];case"button1":return[5,3,1];case"button2":return[5,4];case"entityHeaderHeadline1":return[10,6,2];case"entityHeaderHeadline2":return[8,5,3];case"entityHeaderMeta1":return[5,4,1];case"entityHeaderMeta2":return[5,4,1];case"entityHeaderMeta3":return[4,3];case"headline3":return[5,3,1];case"headline4":return[5,4];case"headlineDeemphasized3":return[5,3,1];case"headlineDeemphasized4":return[5,4];case"headlineEmphasized1":return[7,4,2];case"headlineEmphasized2":return[6,4,2];case"headlineEmphasized3":return[5,3,1];case"headlineEmphasized4":return[5,4];case"headlineEmphasized5":return[5,3,1];case"meta1":return[4,3,1];case"meta2":return[4,3,1];case"meta3":return[4,3,1];case"meta4":return[4,3]}},sfGecko:function(t){switch(t){case"body1":return[5,5];case"body2":return[4,4];case"body3":return[5,4];case"body4":return[4,3];case"bodyLink1":return[6,4];case"bodyLink2":return[4,3];case"bodyLink3":return[5,4];case"bodyLink4":return[4,3];case"button1":return[4,3];case"button2":return[5,4];case"entityHeaderHeadline1":return[8,7];case"entityHeaderHeadline2":return[7,5];case"entityHeaderMeta1":return[5,4];case"entityHeaderMeta2":return[5,4];case"entityHeaderMeta3":return[4,3];case"headline3":return[5,3];case"headline4":return[5,4];case"headlineDeemphasized3":return[5,3];case"headlineDeemphasized4":return[5,4];case"headlineEmphasized1":return[6,5];case"headlineEmphasized2":return[6,4];case"headlineEmphasized3":return[4,3];case"headlineEmphasized4":return[5,4];case"headlineEmphasized5":return[4,3];case"meta1":return[4,3];case"meta2":return[4,3];case"meta3":return[4,3];case"meta4":return[4,3]}},sfWebkit:function(t){switch(t){case"body1":return[5,5];case"body2":return[4,4];case"body3":return[4,4];case"body4":return[4,3];case"bodyLink1":return[5,5];case"bodyLink2":return[4,4];case"bodyLink3":return[4,4];case"bodyLink4":return[4,3];case"button1":return[4,4];case"button2":return[4,4];case"entityHeaderHeadline1":return[8,7];case"entityHeaderHeadline2":return[6,6];case"entityHeaderMeta1":return[4,4];case"entityHeaderMeta2":return[4,4];case"entityHeaderMeta3":return[4,3];case"headline3":return[4,4];case"headline4":return[4,4];case"headlineDeemphasized3":return[4,4];case"headlineDeemphasized4":return[4,4];case"headlineEmphasized1":return[6,5];case"headlineEmphasized2":return[5,5];case"headlineEmphasized3":return[4,4];case"headlineEmphasized4":return[4,4];case"headlineEmphasized5":return[4,3];case"meta1":return[4,3];case"meta2":return[4,3];case"meta3":return[4,3];case"meta4":return[3,3]}}},m=(function(){return r("UserAgent").isPlatform("Windows >= 6")?[c.segoe,d.segoe]:r("UserAgent").isPlatform("Mac OS X >= 10.11")&&!r("UserAgent").isBrowser("Firefox < 55")||r("UserAgent").isPlatform("iOS >= 9")?[c.apple,r("UserAgent").isEngine("Gecko")?d.sfGecko:d.sfWebkit]:[c.default,d.default]})(),p=m[0],_=m[1],f={body1:{fontSize:"x1603h9y",fontWeight:"x1fcty0u",$$css:!0},body2:{fontSize:"x1lkfr7t",fontWeight:"x1fcty0u",$$css:!0},body2ForDenseMode:{fontSize:"x1jchvi3",fontWeight:"x1fcty0u",$$css:!0},body3:{fontSize:"x6prxxf",fontWeight:"x1fcty0u",$$css:!0},body3ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"x1fcty0u",$$css:!0},body4:{fontSize:"x1nxh6w3",fontWeight:"x1fcty0u",$$css:!0},body4ForDenseMode:{fontSize:"x1pg5gke",fontWeight:"x1fcty0u",$$css:!0},bodyLink1:{fontSize:"x1603h9y",fontWeight:"x1s688f",$$css:!0},bodyLink2:{fontSize:"x1lkfr7t",fontWeight:"x1s688f",$$css:!0},bodyLink2ForDenseMode:{fontSize:"x1jchvi3",fontWeight:"x1s688f",$$css:!0},bodyLink3:{fontSize:"x6prxxf",fontWeight:"x1s688f",$$css:!0},bodyLink3ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"x1s688f",$$css:!0},bodyLink4:{fontSize:"x1nxh6w3",fontWeight:"x1s688f",$$css:!0},bodyLink4ForDenseMode:{fontSize:"x1pg5gke",fontWeight:"x1s688f",$$css:!0},button1:{fontSize:"x1lkfr7t",fontWeight:"x1s688f",$$css:!0},button1ForDenseMode:{fontSize:"x1jchvi3",fontWeight:"x1s688f",$$css:!0},button2:{fontSize:"x6prxxf",fontWeight:"x1s688f",$$css:!0},button2ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"x1s688f",$$css:!0},entityHeaderHeadline1:{fontSize:"x579bpy",fontWeight:"x1xlr1w8",$$css:!0},entityHeaderHeadline2:{fontSize:"x1q74xe4",fontWeight:"x1xlr1w8",$$css:!0},entityHeaderMeta1:{fontSize:"x6prxxf",fontWeight:"x1xlr1w8",$$css:!0},entityHeaderMeta1ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"x1xlr1w8",$$css:!0},entityHeaderMeta2:{fontSize:"x6prxxf",fontWeight:"x1xlr1w8",$$css:!0},entityHeaderMeta2ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"x1xlr1w8",$$css:!0},entityHeaderMeta3:{fontSize:"x1nxh6w3",fontWeight:"x1xlr1w8",$$css:!0},headline3:{fontSize:"x1lkfr7t",fontWeight:"xk50ysn",$$css:!0},headline3ForDenseMode:{fontSize:"x1jchvi3",fontWeight:"xk50ysn",$$css:!0},headline4:{fontSize:"x6prxxf",fontWeight:"xk50ysn",$$css:!0},headline4ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"xk50ysn",$$css:!0},headlineEmphasized1:{fontSize:"xngnso2",fontWeight:"x1xlr1w8",$$css:!0},headlineEmphasized2:{fontSize:"x1603h9y",fontWeight:"x1xlr1w8",$$css:!0},headlineEmphasized3:{fontSize:"x1lkfr7t",fontWeight:"x1s688f",$$css:!0},headlineEmphasized3ForDenseMode:{fontSize:"x1jchvi3",fontWeight:"x1s688f",$$css:!0},headlineEmphasized4:{fontSize:"x6prxxf",fontWeight:"x1s688f",$$css:!0},headlineEmphasized4ForDenseMode:{fontSize:"x1f6kntn",fontWeight:"x1s688f",$$css:!0},headlineEmphasized5:{fontSize:"x6prxxf",fontWeight:"xk50ysn",$$css:!0},meta1:{fontSize:"x1nxh6w3",fontWeight:"x1s688f",$$css:!0},meta1ForDenseMode:{fontSize:"x1pg5gke",fontWeight:"x1s688f",$$css:!0},meta2:{fontSize:"x1nxh6w3",fontWeight:"x1s688f",$$css:!0},meta2ForDenseMode:{fontSize:"x1pg5gke",fontWeight:"x1s688f",$$css:!0},meta3:{fontSize:"x1nxh6w3",fontWeight:"x1fcty0u",$$css:!0},meta3ForDenseMode:{fontSize:"x1pg5gke",fontWeight:"x1fcty0u",$$css:!0},meta4:{fontSize:"x1pg5gke",fontWeight:"x1fcty0u",$$css:!0},meta4ForDenseMode:{fontSize:"x1pg5gke",fontWeight:"x1fcty0u",$$css:!0}},g=r("gkx")("5751"),h={colors:{blueLink:g?u.blueLink:e.blueLink,disabled:g?u.disabled:e.disabled,disabledButton:s.disabledButton,highlight:g?u.highlight:e.highlight,negative:g?u.negative:e.negative,positive:g?u.positive:e.positive,primary:g?u.primary:e.primary,primaryButton:s.primaryButton,primaryDeemphasizedButton:s.primaryDeemphasizedButton,primaryOnMedia:g?u.primaryOnMedia:void 0,secondary:g?u.secondary:e.secondary,secondaryButton:s.secondaryButton,secondaryOnMedia:g?u.secondaryOnMedia:e.secondaryOnMedia,tertiary:g?u.tertiary:e.tertiary,white:g?u.white:e.white},defaultFontFamily:p,offsets:_,styles:{body1:{lineHeight:24,style:f.body1},body2:{lineHeight:20,style:f.body2},body3:{lineHeight:19.9995,style:f.body3},body4:{lineHeight:16,style:f.body4},bodyLink1:{lineHeight:24,style:f.bodyLink1},bodyLink2:{lineHeight:20,style:f.bodyLink2},bodyLink3:{lineHeight:19.9995,style:f.bodyLink3},bodyLink4:{lineHeight:16,style:f.bodyLink4},button1:{lineHeight:20,style:f.button1},button2:{lineHeight:19.9995,style:f.button2},entityHeaderHeadline1:{lineHeight:38,style:f.entityHeaderHeadline1},entityHeaderHeadline2:{lineHeight:32,style:f.entityHeaderHeadline2},entityHeaderMeta1:{lineHeight:19,style:f.entityHeaderMeta1},entityHeaderMeta2:{lineHeight:19,style:f.entityHeaderMeta2},entityHeaderMeta3:{lineHeight:17,style:f.entityHeaderMeta3},headline3:{lineHeight:20,style:f.headline3},headline4:{lineHeight:19.9995,style:f.headline4},headlineEmphasized1:{lineHeight:28,style:f.headlineEmphasized1},headlineEmphasized2:{lineHeight:24,style:f.headlineEmphasized2},headlineEmphasized3:{lineHeight:20,style:f.headlineEmphasized3},headlineEmphasized4:{lineHeight:19.9995,style:f.headlineEmphasized4},headlineEmphasized5:{lineHeight:20,style:f.headlineEmphasized5},meta1:{lineHeight:16,style:f.meta1},meta2:{lineHeight:16,style:f.meta2},meta3:{lineHeight:16,style:f.meta3},meta4:{lineHeight:15,style:f.meta4}},stylesForDenseMode:{body2:{lineHeight:20,style:f.body2ForDenseMode},body3:{lineHeight:20,style:f.body3ForDenseMode},body4:{lineHeight:16,style:f.body4ForDenseMode},bodyLink2:{lineHeight:20,style:f.bodyLink2ForDenseMode},bodyLink3:{lineHeight:20,style:f.bodyLink3ForDenseMode},bodyLink4:{lineHeight:16,style:f.bodyLink4ForDenseMode},button1:{lineHeight:18,style:f.button1ForDenseMode},button2:{lineHeight:18,style:f.button2ForDenseMode},entityHeaderMeta1:{lineHeight:18,style:f.entityHeaderMeta1ForDenseMode},entityHeaderMeta2:{lineHeight:18,style:f.entityHeaderMeta2ForDenseMode},headline3:{lineHeight:20,style:f.headline3ForDenseMode},headline4:{lineHeight:20,style:f.headline4ForDenseMode},headlineEmphasized3:{lineHeight:20,style:f.headlineEmphasized3ForDenseMode},headlineEmphasized4:{lineHeight:20,style:f.headlineEmphasized4ForDenseMode},meta1:{lineHeight:14,style:f.meta1ForDenseMode},meta2:{lineHeight:14,style:f.meta2ForDenseMode},meta3:{lineHeight:14,style:f.meta3ForDenseMode},meta4:{lineHeight:15,style:f.meta4ForDenseMode}}},y=h;l.default=y}),98);
__d("useXPlatReactTranslationKeyForTextParent",["cr:2099"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){}var u=(e=n("cr:2099"))!=null?e:{useTranslationKeyForTextParent:s},c=u.useTranslationKeyForTextParent;function d(){return c()}l.default=d}),98);
__d("MDSTextImpl.react",["BaseHeading.react","BaseText.react","BaseTextContext","CometDensityModeContext","JSResourceForInteraction","MDSTextConfig","react","react-compiler-runtime","useXPlatReactTranslationKeyForTextParent","xplatToDOMRef"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useMemo,m=r("JSResourceForInteraction")("MDSTooltipImpl.react").__setRef("MDSTextImpl.react"),p=o("BaseText.react").createBaseTextComponent(r("MDSTextConfig"),m),_={heading:{maxWidth:"x193iq5w",minWidth:"xeuugli",$$css:!0},text:{whiteSpace:"xq9mrsl",$$css:!0}},f={disabled:"disabledButton",highlight:"primaryDeemphasizedButton",secondary:"secondaryButton",white:"primaryButton"};function g(e,t){var n;return t&&(n=f[e])!=null?n:e}var h=["entityHeaderMeta1","entityHeaderMeta2","meta1","meta2","meta3","meta4"];function y(e){var t=o("react-compiler-runtime").c(25),n=e.ref,a=e.align,i=e.children,l=e.color,u=e.dir,d=e.id,m=e.isPrimaryHeading,f=e.isSemanticHeading,y=e.numberOfLines,C=e.showTruncationTooltip,b=e.testid,v=e.truncationTooltip,S=e.type,R=a===void 0?"auto":a,L=u===void 0?"auto":u,E=m===void 0?!1:m,k=f===void 0?!1:f,I=C===void 0?!0:C,T=h.includes(S)?"secondary":"primary",D=l!=null?l:T,x=S==="button1"||S==="button2",$;t[0]!==D||t[1]!==x?($=g(D,x),t[0]=D,t[1]=x,t[2]=$):$=t[2];var P=$,N=r("useXPlatReactTranslationKeyForTextParent")(),M=o("BaseTextContext").useBaseTextContext(),w=c(r("CometDensityModeContext")),A=w[0],F=(M==null?void 0:M.nested)===!0,O=R!=null?R:void 0,B=F?void 0:L,W=y||0,q;t[3]!==n?(q=o("xplatToDOMRef").xplatToDOMRef(n),t[3]=n,t[4]=q):q=t[4];var U;t[5]!==i||t[6]!==I||t[7]!==v?(U=I?{tooltip:v!=null?v:i}:void 0,t[5]=i,t[6]=I,t[7]=v,t[8]=U):U=t[8];var V;t[9]!==i||t[10]!==P||t[11]!==d||t[12]!==A||t[13]!==N||t[14]!==B||t[15]!==W||t[16]!==q||t[17]!==U||t[18]!==O||t[19]!==b||t[20]!==S?(V=s.jsx(p,{alignment:O,colorName:P,dir:B,id:d,isDenseModeEnabled:A,lines:W,ref:q,styleName:S,testid:void 0,truncationTooltip:U,xstyle:_.text,children:i},N),t[9]=i,t[10]=P,t[11]=d,t[12]=A,t[13]=N,t[14]=B,t[15]=W,t[16]=q,t[17]=U,t[18]=O,t[19]=b,t[20]=S,t[21]=V):V=t[21];var H=V;if(k||E){var G;return t[22]!==E||t[23]!==H?(G=s.jsx(r("BaseHeading.react"),{isPrimaryHeading:E,xstyle:_.heading,children:H}),t[22]=E,t[23]=H,t[24]=G):G=t[24],G}return H}y.displayName="MDSText",l.default=y}),98);
__d("MDSText.react",["MDSTextImpl.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(6),a,i;n[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l;return n[3]!==a||n[4]!==i?(l=u.jsx(r("MDSTextImpl.react"),babelHelpers.extends({ref:i},a)),n[3]=a,n[4]=i,n[5]=l):l=n[5],l}l.default=c}),98);
__d("MDSButtonImpl.react",["BaseStyledButton.react","BaseTheme.react","CometContainerPressableContext","FDSIcon.react","MDSText.react","emptyFunction","gkx","mergeRefs","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["addOnStart","disabled","icon","isContainerTarget","label","labelIsHidden","linkProps","onFocusIn","onFocusOut","onHoverIn","onHoverOut","onPress","onPressIn","onPressOut","padding","reduceEmphasis","size","suppressHydrationWarning","testid","type"],u,c=u||(u=o("react")),d=u,m=d.useContext,p=d.useEffect,_=d.useRef,f={destructive:{backgroundColor:"xb4tp27",$$css:!0},disabled:{backgroundColor:"xwcfey6",$$css:!0},primary:{backgroundColor:"xtvsq51",$$css:!0},primaryDeemphasized:{backgroundColor:"x1hr4nm9",$$css:!0},secondary:{backgroundColor:"x1qhmfi1",$$css:!0},secondaryDeemphasized:{backgroundColor:"x1f3278h",$$css:!0},secondaryDeemphasized_DEPRECATED:{backgroundColor:"xjbqb8w",$$css:!0},sizeLarge:{height:"xc9qbxq",$$css:!0},sizeMedium:{height:"x10w6t97",$$css:!0},sizeSmall:{borderStartStartRadius:"xbjudin",borderStartEndRadius:"xnlwouz",borderEndEndRadius:"xpp8er5",borderEndStartRadius:"xs9wviy",height:"x1fgtraw",$$css:!0}},g={dark:{"destructive-button-background":"rgba(235, 52, 52, 100)","disabled-button-background":"var(--secondary-button-background)","disabled-button-text":"rgba(155, 160, 168, 0.5)","primary-button-background":"#429AFF","secondary-button-background":"rgba(255, 255, 255, 0.19)"},light:{"destructive-button-background":"rgba(255, 41, 41, 100)","disabled-button-background":"var(--secondary-button-background)","disabled-button-text":"rgba(134, 142, 153, 0.5)","primary-button-background":"#0A7CFF","secondary-button-background":"rgba(0, 0, 0, 0.04)"},type:"VARIABLES"},h={":deemphasized":{iconColor:"highlight",textColor:"highlight"},":disabled":{iconColor:"disabled",textColor:"disabled"},iconColor:"white",textColor:"white"},y={":deemphasized":{iconColor:"highlight",textColor:"highlight"},":disabled":{iconColor:"disabled",textColor:"disabled"},iconColor:"primary",textColor:"secondary"};function C(e){switch(e){case"secondary":return y;case"destructive":case"primary":default:return h}}function b(e,t){var n=t.disabled,r=t.reduceEmphasis,o=C(e);return(n?o[":disabled"]:null)||(r?o[":deemphasized"]:null)||o}function v(t){var n,o=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=a.addOnStart,l=a.disabled,u=l===void 0?!1:l,d=a.icon,h=a.isContainerTarget,y=h===void 0?!1:h,C=a.label,v=a.labelIsHidden,S=v===void 0?!1:v,R=a.linkProps,L=a.onFocusIn,E=a.onFocusOut,k=a.onHoverIn,I=a.onHoverOut,T=a.onPress,D=a.onPressIn,x=a.onPressOut,$=a.padding,P=$===void 0?"normal":$,N=a.reduceEmphasis,M=N===void 0?!1:N,w=a.size,A=w===void 0?32:w,F=a.suppressHydrationWarning,O=F===void 0?!1:F,B=a.testid,W=a.type,q=W===void 0?"primary":W,U=babelHelpers.objectWithoutPropertiesLoose(a,s),V=b(q,{disabled:u,reduceEmphasis:M}),H=V.iconColor,G=V.textColor,z=_(null),j=_(null),K=m(r("CometContainerPressableContext"));return p(function(){y&&K&&K.onMount({onContextMenu:r("emptyFunction"),onPress:function(t){var e=z.current;e&&e.click()},target:R==null?void 0:R.target,url:R==null?void 0:R.url},j)},[K,y,R==null?void 0:R.url,R==null?void 0:R.target]),c.jsx(r("BaseTheme.react"),{config:r("gkx")("5751")?void 0:g,style:{width:"100%"},children:c.jsx(r("BaseStyledButton.react"),babelHelpers.extends({},U,{addOnStart:i,"aria-label":(n=U["aria-label"])!=null?n:C,content:S?null:c.jsx(r("MDSText.react"),{color:G,numberOfLines:1,type:"button2",children:C}),contentXstyle:[A===28&&f.sizeSmall,A===32&&f.sizeMedium,A===36&&f.sizeLarge],disabled:u,icon:d==null?null:c.jsx(r("FDSIcon.react"),{color:H,icon:d,size:24}),linkProps:R,onFocusIn:L,onFocusOut:E,onHoverIn:k,onHoverOut:I,onPress:T,onPressIn:D,onPressOut:x,padding:P,ref:r("mergeRefs")(z,o),suppressHydrationWarning:O,testid:void 0,xstyle:[q==="primary"&&f.primary,q==="secondary"&&f.secondary,q==="destructive"&&f.destructive,q==="secondary"&&M?r("gkx")("5751")?f.secondaryDeemphasized:f.secondaryDeemphasized_DEPRECATED:null,q==="primary"&&M&&f.primaryDeemphasized,u&&f.disabled]}))})}v.displayName=v.name+" [from "+i.id+"]",l.default=v}),98);
__d("MDSButton.react",["MDSButtonImpl.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(6),a,i;n[0]!==t?(a=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l;return n[3]!==a||n[4]!==i?(l=u.jsx(r("MDSButtonImpl.react"),babelHelpers.extends({ref:a},i)),n[3]=a,n[4]=i,n[5]=l):l=n[5],l}l.default=c}),98);
__d("MDSColumn.react",["BaseView.react","MDSColumnContext","MDSColumnItem.react","MDSColumnItemContext","isIE11OrGreater","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","align","children","expanding","hasDividers","paddingHorizontal","paddingTop","paddingVertical","spacing","verticalAlign","xstyle"],s,u=s||(s=o("react")),c=s,d=c.useContext,m=c.useMemo,p={expanding:{flexBasis:"x1l7klhg",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minHeight:"x2lwn1j",$$css:!0},expandingIE11:{flexBasis:"xdl72j9",$$css:!0},inner:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",minHeight:"x2lwn1j",$$css:!0},root:{boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",maxWidth:"x193iq5w",$$css:!0}},_={0:{paddingTop:"xexx8yu",$$css:!0},4:{paddingTop:"x1iorvi4",$$css:!0},8:{paddingTop:"x1y1aw1k",$$css:!0},12:{paddingTop:"xz9dl7a",$$css:!0},16:{paddingTop:"xyamay9",$$css:!0},20:{paddingTop:"x1cnzs8",$$css:!0}},f={4:{paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6",$$css:!0},8:{paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",$$css:!0},12:{paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",$$css:!0},16:{paddingTop:"xyamay9",paddingBottom:"x1l90r2v",$$css:!0},20:{paddingTop:"x1cnzs8",paddingBottom:"xx6bls6",$$css:!0}},g={bottom:{justifyContent:"x13a6bvl",$$css:!0},center:{justifyContent:"xl56j7k",$$css:!0},"space-between":{justifyContent:"x1qughib",$$css:!0}};function h(t){var n=o("react-compiler-runtime").c(43),a,i,l,s,c,m,h,y,C,b,v,S;n[0]!==t?(s=t.ref,c=t.align,a=t.children,m=t.expanding,h=t.hasDividers,y=t.paddingHorizontal,i=t.paddingTop,C=t.paddingVertical,b=t.spacing,v=t.verticalAlign,S=t.xstyle,l=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=m,n[7]=h,n[8]=y,n[9]=C,n[10]=b,n[11]=v,n[12]=S):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],m=n[6],h=n[7],y=n[8],C=n[9],b=n[10],v=n[11],S=n[12]);var L=c===void 0?null:c,E=m===void 0?!1:m,k=h===void 0?!1:h,I=y===void 0?null:y,T=C===void 0?0:C,D=b===void 0?null:b,x=v===void 0?"top":v,$=d(r("MDSColumnContext")),P;n[13]!==L||n[14]!==k||n[15]!==I||n[16]!==D?(P={align:L,hasDividers:k,paddingHorizontal:I,spacing:D},n[13]=L,n[14]=k,n[15]=I,n[16]=D,n[17]=P):P=n[17];var N=P,M;n[18]!==E?(M=E===!0&&[p.expanding,r("isIE11OrGreater")&&p.expandingIE11],n[18]=E,n[19]=M):M=n[19];var w=f[T],A=i!=null&&_[i],F;n[20]!==w||n[21]!==A||n[22]!==M||n[23]!==S?(F=[p.root,M,w,A,S],n[20]=w,n[21]=A,n[22]=M,n[23]=S,n[24]=F):F=n[24];var O=x!=="top"&&g[x],B;n[25]!==O?(B=[p.inner,O],n[25]=O,n[26]=B):B=n[26];var W;n[27]!==a?(W=R(a),n[27]=a,n[28]=W):W=n[28];var q;n[29]!==N||n[30]!==W?(q=u.jsx(r("MDSColumnContext").Provider,{value:N,children:W}),n[29]=N,n[30]=W,n[31]=q):q=n[31];var U;n[32]!==B||n[33]!==q?(U=u.jsx(r("BaseView.react"),{xstyle:B,children:q}),n[32]=B,n[33]=q,n[34]=U):U=n[34];var V;n[35]!==l||n[36]!==s||n[37]!==F||n[38]!==U?(V=u.jsx(r("BaseView.react"),babelHelpers.extends({},l,{ref:s,xstyle:F,children:U})),n[35]=l,n[36]=s,n[37]=F,n[38]=U,n[39]=V):V=n[39];var H=V;if($!=null){var G=E!=null?E:void 0,z;return n[40]!==H||n[41]!==G?(z=u.jsx(r("MDSColumnItem.react"),{expanding:G,children:H}),n[40]=H,n[41]=G,n[42]=z):z=n[42],z}return H}var y=h,C={isFirst:!0,isLast:!1},b={isFirst:!1,isLast:!0},v={isFirst:!0,isLast:!0},S={isFirst:!1,isLast:!1};function R(e){return u.Children.toArray(e).map(function(e,t,n){var o=t===0,a=t===n.length-1,i=o&&a?v:o?C:a?b:S;return u.jsx(r("MDSColumnItemContext").Provider,{value:i,children:e},t)})}l.default=y}),98);
__d("MDSPressable.react",["CometPressable.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["overlayRadius","ref"],s,u=s||(s=o("react")),c={hover:{backgroundColor:"x1yjz2vk",$$css:!0}};function d(e){switch(e){case"normal":return 6;case"50%":return"50%";case"compact":return 4;case"inherit":default:return}}function m(t){var n=o("react-compiler-runtime").c(10),a,i,l;n[0]!==t?(i=t.overlayRadius,l=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l):(a=n[1],i=n[2],l=n[3]);var s;n[4]!==i?(s=d(i),n[4]=i,n[5]=s):s=n[5];var m;return n[6]!==a||n[7]!==l||n[8]!==s?(m=u.jsx(r("CometPressable.react"),babelHelpers.extends({overlayFocusVisibleStyle:c.hover,overlayHoveredStyle:c.hover,overlayRadius:s,ref:l},a)),n[6]=a,n[7]=l,n[8]=s,n[9]=m):m=n[9],m}l.default=m}),98);
__d("MessengerCreateVideoMeetupLinkMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9685249484907022"}),null);
__d("MessengerCreateVideoMeetupLinkMutation.graphql",["MessengerCreateVideoMeetupLinkMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"CreateVideoMeetupLinkResponsePayload",kind:"LinkedField",name:"create_video_meetup_link",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerCallInviteLink",kind:"LinkedField",name:"meetup_link",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_hash",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_audio_only",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MessengerCreateVideoMeetupLinkMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MessengerCreateVideoMeetupLinkMutation",selections:t},params:{id:n("MessengerCreateVideoMeetupLinkMutation_facebookRelayOperation"),metadata:{},name:"MessengerCreateVideoMeetupLinkMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("MessengerCreateVideoMeetupLinkMutation",["MessengerCreateVideoMeetupLinkMutation.graphql","Promise","cr:1012418","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,o,a){return new(s||(s=n("Promise")))(function(i,l){var s,u,c,d,m,p,_,f,g,h,y;n("cr:1012418").commitMutation(t,{mutation:e!==void 0?e:e=n("MessengerCreateVideoMeetupLinkMutation.graphql"),onCompleted:function(t){var e,n,r,o,a=t==null||(e=t.create_video_meetup_link)==null||(e=e.meetup_link)==null?void 0:e.is_audio_only,s=t==null||(n=t.create_video_meetup_link)==null||(n=n.meetup_link)==null?void 0:n.link_url,u=t==null||(r=t.create_video_meetup_link)==null||(r=r.meetup_link)==null?void 0:r.link_hash,c=t==null||(o=t.create_video_meetup_link)==null||(o=o.meetup_link)==null?void 0:o.id;return s!=null&&u!=null&&a!=null?i({isAudioOnly:a,linkHash:u,linkId:c,linkUrl:s}):l({error:"Failed to create linkurl."})},onError:function(t){l(t)},optimisticUpdater:null,variables:{input:{client_mutation_id:"",funnel_session_id:a,link_options:{availability_settings_options:(o==null?void 0:o.linkSurface)==="MESSENGER_V2"?{join_permission:o==null?void 0:o.joinPermission,visibility_mode:(s=o==null?void 0:o.visibilityMode)!=null?s:"NONE"}:void 0,chat_mode:(u=o==null?void 0:o.chatMode)!=null?u:null,is_audio_only:(c=o==null?void 0:o.isAudioOnly)!=null?c:null,is_live_enabled:(d=o==null?void 0:o.isLiveEnabled)!=null?d:null,is_room_join_requestable:(m=o==null?void 0:o.joinRequestable)!=null?m:null,link_surface:(p=o==null?void 0:o.linkSurface)!=null?p:r("gkx")("20836")?"WORKPLACE":void 0,revocation_behavior:(_=o==null?void 0:o.revocationBehavior)!=null?_:null,should_allow_anonymous_guests:(f=o==null?void 0:o.allowAnonymousGuests)!=null?f:!0,supports_pages:(g=o==null?void 0:o.supportsPages)!=null?g:!1,supports_profile_plus:(h=o==null?void 0:o.supportsProfilePlus)!=null?h:!1,visibility_mode:(o==null?void 0:o.linkSurface)==="MESSENGER_V2"?void 0:(y=o==null?void 0:o.visibilityMode)!=null?y:"NONE"}}}})})}l.default=u}),98);
__d("RoomsLinkUtils",["ConstUriUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=o("ConstUriUtils").getUri(e),r=n==null?void 0:n.getDomain(),a=n==null||(t=n.stripTrailingSlash())==null?void 0:t.getPath();if(a==null)return null;if(r==="msngr.com")return a.substring(1);var i=/^\/v(id)?\//;if(r==="m.me"&&i.test(a))return a.replace(i,"");var l=/^\/groupcall\/LINK:/;return l.test(a)?a.replace(l,""):null}l.getRoomsLinkHash=e}),98);
__d("VideoChatLinksUserActionsMultiplexLogger",["cr:1443591"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:1443591")}),98);
__d("XGroupCallControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/groupcall/{?call_context}/",Object.freeze({users_to_ring:[],has_video:!0,initialize_video:!0,auto_join:!1,use_joining_context:!1,has_seen_interstitial:!1,use_dapp:!1,is_e2ee_mandated:!1,use_www:!1}),void 0),s=e;l.default=s}),98);
__d("ZenonCallIdentifiersUtil",["Random"],(function(t,n,r,o,a,i,l){"use strict";function e(){return String(o("Random").uint32()+1)}l.generateZenonClientSessionID=e}),98);
__d("ZenonCallWindowErrors",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonOpeningAnotherCallError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),l=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonConferenceNameMutationFailedError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),s=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonIncompleteControllerParamsError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),u=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonUnsupportedThreadTypeError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),c=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonCannotAcceptInviteError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),d=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonInviteNotFoundError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),m=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="ZenonUninitializedError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.OpeningAnotherCallError=e,i.ConferenceNameMutationFailedError=l,i.IncompleteControllerParamsError=s,i.UnsupportedThreadTypeError=u,i.CannotAcceptInviteError=c,i.InviteNotFoundError=d,i.UninitializedError=m}),66);
__d("ZenonPeerID",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";var e="MW_PEER_ID";function u(t){return t.length>0||s(0,33504),t==="MW_PEER_ID"?e:(isNaN(t)===!1||s(0,33551,t),t)}function c(t){return isNaN(t)||t===e?null:t}l.ZenonMWPeerID=e,l.convertStringToPeerID=u,l.convertPeerIDForLogging=c}),98);
__d("randomZenonNonce",["Random"],(function(t,n,r,o,a,i,l){"use strict";var e=2,s=6,u=36,c=2176782336;function d(){for(var t="",n=0;n<e;n++){for(var r=Math.floor(o("Random").random()*c).toString(u);r.length<s;)r="0"+r;t+=r}return t}l.default=d}),98);
__d("ZenonPreCallHookBuilderHelper",["ConstUriUtils","FBLogger","MessengerCreateVideoMeetupLinkMutation","RoomsLinkUtils","VideoChatLinksUserActionsMultiplexLogger","XGroupCallControllerRouteBuilder","ZenonActorHooks","ZenonCallIdentifiersUtil","ZenonCallWindowErrors","ZenonPeerID","ZenonSignalingProtocol","getErrorSafe","gkx","nullthrows","randomZenonNonce"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){if(e===null)throw new(o("ZenonCallWindowErrors")).UninitializedError;var n=e.callInviteModel,a=e.callWindowController,i=n.getCurrentInvite();if(i===null)throw new(o("ZenonCallWindowErrors")).InviteNotFoundError;if(i.type!=="ringing"||i.context.type!=="thread")throw new(o("ZenonCallWindowErrors")).CannotAcceptInviteError;var l=r("randomZenonNonce")(),s=i.context.thread,u=a.initCall({context:{controllerParams:i.controllerParams,intent:"accept invite"},hideE2eeAttributions:t,isE2eeMandated:i.isE2eeMandated,joinContext:{thread:s!=null?s:{id:"0",type:2},type:"thread"},mediaType:i.requestingVideo?"video":"audio",nonce:l,representedID:i.receiverUserId}),c=u[0],d=u[1];n.accept(l,{isPopupBlocked:c===null}),await d}async function s(e,t,n,a,i,l){if(l===void 0&&(l={allowAnonymousGuests:!r("gkx")("20836")}),e===null)throw new(o("ZenonCallWindowErrors")).UninitializedError;p(i,n,a).setEvent("meetup_attempt_create_meetup").log();try{var s=await r("MessengerCreateVideoMeetupLinkMutation")(t,l,i),u=s.linkUrl;return u!=null?(p(i,n,a).setEvent("meetup_create_success").setVideoCallLinkURLRaw(u).log(),u):(p(i,n,a).setEvent("meetup_create_failed").log(),u)}catch(e){var c=r("getErrorSafe")(e);throw p(i,n,a).setEvent("meetup_create_failed").log(),p(i,n,a).setEvent("error").setErrorType("LinkCreationError "+c.name).setErrorDetails(c.message).log(),c}}async function u(e){var t=e.actorID,n=e.callback_users,a=e.context,i=e.forceSkipChildLobby,l=i===void 0?!1:i,s=e.funnelSessionID,u=s===void 0?null:s,c=e.hasVideo,p=c===void 0?!0:c,_=e.linkUrl,f=e.referrerContext,g=f===void 0?null:f,h=e.skipLinkUrlRewrite,y=h===void 0?!1:h,C=e.startCallImmediately,b=C===void 0?!1:C,v=e.trigger;if(a===null)throw new(o("ZenonCallWindowErrors")).UninitializedError;var S=a.callWindowController,R=a.incomingRingSDK,L=r("randomZenonNonce")(),E=o("ZenonCallIdentifiersUtil").generateZenonClientSessionID(),k=_;if(!y){var I,T=(I=o("ConstUriUtils").getUri(_))==null?void 0:I.getQueryParam("funnel_session_id"),D=d(_);k=m(D,b?L:null,n,T!=null?String(T):u,l,g,t,v,p)}if(k==null)return Promise.reject("An invalid URI was provided");var x=S.initCall({context:{existingCall:null,intent:"start or join",invitees:[],signalingID:E},joinContext:{linkUrl:k,type:"link"},mediaType:"video",nonce:L,representedID:o("ZenonActorHooks").ZenonActor.getID()}),$=x[0],P=x[1];R.startCallIntent(L,{callTrigger:v!=null?v:"meetup_join",isE2eeMandated:!1,isPopupBlocked:$===null,isVideo:p,peerID:o("ZenonPeerID").ZenonMWPeerID,protocol:r("ZenonSignalingProtocol").MW,signalingID:E}),await P}async function c(e,t){var n=t.existingCall,a=t.extra,i=t.hideE2eeAttributions,l=t.invitees,s=t.isE2eeMandated,u=t.mediaType,c=t.representedID,d=t.thread,m=t.trigger;if(e===null)throw new(o("ZenonCallWindowErrors")).UninitializedError;var p=e.callWindowController,_=e.incomingRingSDK,f=o("ZenonCallIdentifiersUtil").generateZenonClientSessionID(),g=r("randomZenonNonce")(),h=p.initCall({context:{existingCall:n,intent:"start or join",invitees:l,signalingID:f},extra:a,hideE2eeAttributions:i,isE2eeMandated:s,joinContext:{thread:d,type:"thread"},mediaType:u,nonce:g,representedID:c!=null?c:o("ZenonActorHooks").ZenonActor.getID()}),y=h[0],C=h[1];_.startCallIntent(g,{callTrigger:m,isE2eeMandated:s!=null?s:!1,isPopupBlocked:y===null,isVideo:u==="video",peerID:d.type===1?d.id:o("ZenonPeerID").ZenonMWPeerID,protocol:r("ZenonSignalingProtocol").MW,signalingID:f}),await C}function d(e){var t=o("RoomsLinkUtils").getRoomsLinkHash(e);return t==null&&r("FBLogger")("rtc_www").mustfix('Could not extract LinkHash from Video Chat Link. Link = "%s"',e),t}function m(e,t,n,o,a,i,l,s,u){if(e==null)return"";var c={call_context:"LINK:"+e,call_trigger:s!=null?s:"",has_video:u,users_to_ring:n!=null?n:[]};return t!=null&&(c.nonce=t),o!=null&&(c.funnel_session_id=o),a===!0&&(c.auto_join=!0),i!=null&&(c.referrer_context=i),l!=null&&(c.av=l),r("nullthrows")(r("XGroupCallControllerRouteBuilder").buildUri(c).getQualifiedUri()).toString()}function p(e,t,n){return new(r("VideoChatLinksUserActionsMultiplexLogger"))().setFunnelSessionIDRaw(e).setSurface(t).setComponent(n)}l.acceptCall=e,l.createMeetup=s,l.joinMeetup=u,l.startCall=c}),98);
__d("useZenonCallInvite",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(e){var t=o("react-compiler-runtime").c(5),n;t[0]!==e?(n=function(){return e?e.getCurrentInvite():null},t[0]=e,t[1]=n):n=t[1];var r=c(n),a=r[0],i=r[1],l,s;return t[2]!==e?(l=function(){if(e){var t=e.addListener("callInvite",i);return(function(){t.remove()})}else i(null)},s=[e],t[2]=e,t[3]=l,t[4]=s):(l=t[3],s=t[4]),u(l,s),a}l.default=d}),98);
__d("ZenonPreCallHookBuilder",["CometRelay","FBLogger","Promise","ZenonPreCallHookBuilderHelper","err","gkx","promiseDone","react","react-compiler-runtime","useZenonCallInvite"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useContext,m=u.useDebugValue,p=u.useEffect,_=6e4;function f(e){function t(t){var n=o("react-compiler-runtime").c(3),r=d(e),a;return n[0]!==r||n[1]!==t?(a=function(){return o("ZenonPreCallHookBuilderHelper").acceptCall(r,t)},n[0]=r,n[1]=t,n[2]=a):a=n[2],a}return t}function g(e){function t(){var t=d(e),n=r("useZenonCallInvite")(t?t.callInviteModel:null);return m(n),n}return t}function h(e,t){return function(n,a,i){function l(){var l=o("react-compiler-runtime").c(6),s=d(e),u=n(),c=a(),m=i(),p=t(),_;return l[0]!==s||l[1]!==u||l[2]!==c||l[3]!==m||l[4]!==p?(_=function(t){if(r("gkx")("24231")){var e=t.existingCall,n=t.thread;if(!s||!s.incomingRingSDK.isCallSupported({threadType:n.type,type:"thread"}))m(t);else e:switch(n.type){case 1:{r("promiseDone")(p(babelHelpers.extends({},t,{invitees:[n.id]})));break e}case 15:{if(n.secureOneToOneThreadPeerId==null)throw r("err")("secureOneToOneThreadPeerId should be defined when starting a call from a secure 1:1 thread");r("promiseDone")(p(babelHelpers.extends({},t,{invitees:[n.secureOneToOneThreadPeerId]})));break e}case 2:case 16:{e===null||e.call_state==="NO_ONGOING_CALL"?u(t,function(e){r("promiseDone")(p(babelHelpers.extends({},t,{invitees:e})))}):c(t,function(){r("promiseDone")(p(babelHelpers.extends({},t,{invitees:[]})))});break e}default:r("FBLogger")("rtc_www").blameToPreviousFrame().mustfix("Attempted to start RTC call for unsupported thread type %d",n.type)}}},l[0]=s,l[1]=u,l[2]=c,l[3]=m,l[4]=p,l[5]=_):_=l[5],_}return l}}function y(e,t){function n(){var n=o("react-compiler-runtime").c(4),r=d(e),a=t(),i,l;n[0]!==r||n[1]!==a?(i=function(){if(r&&a&&a.type==="ringing"){var e=window.setTimeout(function(){r.callInviteModel.decline("NoAnswerTimeout")},_);return(function(){window.clearTimeout(e)})}},l=[r,a],n[0]=r,n[1]=a,n[2]=i,n[3]=l):(i=n[2],l=n[3]),p(i,l)}return n}function C(t){function a(){var a=o("react-compiler-runtime").c(2),i=d(t),l;return a[0]!==i?(l=function(a){var t=a.existingCall,l=a.extra,s=a.hideE2eeAttributions,u=a.invitees,c=a.isE2eeMandated,d=a.mediaType,m=a.representedID,p=a.thread,_=a.trigger;return r("gkx")("24231")?o("ZenonPreCallHookBuilderHelper").startCall(i,{existingCall:t,extra:l,hideE2eeAttributions:s,invitees:u,isE2eeMandated:c,mediaType:d,representedID:m,thread:p,trigger:_}):(e||(e=n("Promise"))).resolve()},a[0]=i,a[1]=l):l=a[1],l}return a}function b(t){function a(){var a=o("react-compiler-runtime").c(3),i=d(t),l=o("CometRelay").useRelayEnvironment(),s;return a[0]!==i||a[1]!==l?(s=function(a,s,u,c){return r("gkx")("24231")?o("ZenonPreCallHookBuilderHelper").createMeetup(i,l,a,s,u,c):(e||(e=n("Promise"))).resolve(null)},a[0]=i,a[1]=l,a[2]=s):s=a[2],s}return a}function v(t){function a(){var a=o("react-compiler-runtime").c(2),i=d(t),l;return a[0]!==i?(l=function(a,l){var t=l===void 0?{}:l;if(!r("gkx")("24231"))return(e||(e=n("Promise"))).resolve();var s=t!=null?t:{},u=s.actorID,c=s.callbackUsers,d=s.mediaType,m=s.referrerContext,p=s.startCallImmediately,_=s.trigger;return o("ZenonPreCallHookBuilderHelper").joinMeetup({actorID:u,callback_users:c,context:i,forceSkipChildLobby:!1,hasVideo:d!=null?d==="video":!0,linkUrl:a,referrerContext:m,startCallImmediately:p,trigger:_})},a[0]=i,a[1]=l):l=a[1],l}return a}l.createAcceptCallCallbackHook=f,l.createCallInviteHook=g,l.createInviteAndStartCallCallbackHookFactory=h,l.createNoAnswerTimeoutHook=y,l.createStartCallCallbackHook=C,l.createCreateMeetupCallbackHook=b,l.createJoinMeetupCallbackHook=v}),98);
__d("RTWebPreCallHooks",["RTWebPreCallContext","ZenonPreCallHookBuilder"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s=o("ZenonPreCallHookBuilder")).createAcceptCallCallbackHook(e=r("RTWebPreCallContext")),c=s.createCallInviteHook(e),d=s.createNoAnswerTimeoutHook(e,c),m=s.createStartCallCallbackHook(e),p=s.createCreateMeetupCallbackHook(e),_=s.createJoinMeetupCallbackHook(e),f=s.createInviteAndStartCallCallbackHookFactory(e,m);l.useAcceptCallCallback=u,l.useCallInvite=c,l.useNoAnswerTimeout=d,l.useStartCallCallback=m,l.useCreateMeetupCallback=p,l.useJoinMeetupCallback=_,l.createInviteAndStartCallCallbackHook=f}),98);
__d("VideoChatLinksUserActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1={}}var t=e.prototype;return t.log=function(t){n("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,n("Banzai").BASIC,t)},t.logVital=function(t){n("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,n("Banzai").VITAL,t)},t.logImmediately=function(t){n("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,{signal:!0},t)},t.clear=function(){return this.$1={},this},t.getData=function(){return babelHelpers.extends({},this.$1)},t.updateData=function(t){return this.$1=babelHelpers.extends({},this.$1,t),this},t.setCallEndReason=function(t){return this.$1.call_end_reason=t,this},t.setCallID=function(t){return this.$1.call_id=t,this},t.setCameraEnabled=function(t){return this.$1.camera_enabled=t,this},t.setClientAppVersion=function(t){return this.$1.client_app_version=t,this},t.setClientLockStatus=function(t){return this.$1.client_lock_status=t,this},t.setClientMonoTimeMs=function(t){return this.$1.client_mono_time_ms=t,this},t.setClienttime=function(t){return this.$1.clienttime=t,this},t.setComponent=function(t){return this.$1.component=t,this},t.setConferenceNameRaw=function(t){return this.$1.conference_name_raw=t,this},t.setCreationAction=function(t){return this.$1.creation_action=t,this},t.setErrorDetails=function(t){return this.$1.error_details=t,this},t.setErrorType=function(t){return this.$1.error_type=t,this},t.setEvent=function(t){return this.$1.event=t,this},t.setEventDetails=function(t){return this.$1.event_details=n("GeneratedLoggerUtils").serializeMap(t),this},t.setEventFireTimestamp=function(t){return this.$1.event_fire_timestamp=t,this},t.setEventFireTimestampOnClient=function(t){return this.$1.event_fire_timestamp_on_client=t,this},t.setExceptionObject=function(t){return this.$1.exception_object=t,this},t.setExperimentsEnabled=function(t){return this.$1.experiments_enabled=n("GeneratedLoggerUtils").serializeMap(t),this},t.setFalcoBatchSequence=function(t){return this.$1.falco_batch_sequence=t,this},t.setFunnelSessionIDRaw=function(t){return this.$1.funnel_session_id_raw=t,this},t.setGroupID=function(t){return this.$1.group_id=t,this},t.setGroupSize=function(t){return this.$1.group_size=t,this},t.setGuestUserID=function(t){return this.$1.guest_user_id=t,this},t.setKickedUserID=function(t){return this.$1.kicked_user_id=t,this},t.setLinkShareTo=function(t){return this.$1.link_share_to=t,this},t.setLocalCallID=function(t){return this.$1.local_call_id=t,this},t.setMediaDevices=function(t){return this.$1.media_devices=t,this},t.setMicrophoneEnabled=function(t){return this.$1.microphone_enabled=t,this},t.setOpenLinkFrom=function(t){return this.$1.open_link_from=t,this},t.setOpenLinkFromAppVersion=function(t){return this.$1.open_link_from_app_version=t,this},t.setReason=function(t){return this.$1.reason=t,this},t.setReferralSurface=function(t){return this.$1.referral_surface=t,this},t.setRoomIDRaw=function(t){return this.$1.room_id_raw=t,this},t.setServerInfoData=function(t){return this.$1.server_info_data=t,this},t.setSource=function(t){return this.$1.source=t,this},t.setStatus=function(t){return this.$1.status=t,this},t.setSurface=function(t){return this.$1.surface=t,this},t.setTargetedUserIds=function(t){return this.$1.targeted_user_ids=n("GeneratedLoggerUtils").serializeVector(t),this},t.setThreadSyncRoomData=function(t){return this.$1.thread_sync_room_data=n("GeneratedLoggerUtils").serializeMap(t),this},t.setThreadType=function(t){return this.$1.thread_type=t,this},t.setUserIdsToBeRemoved=function(t){return this.$1.user_ids_to_be_removed=n("GeneratedLoggerUtils").serializeVector(t),this},t.setVideoCallLinkHashRaw=function(t){return this.$1.video_call_link_hash_raw=t,this},t.setVideoCallLinkIDRaw=function(t){return this.$1.video_call_link_id_raw=t,this},t.setVideoCallLinkIdentifierRaw=function(t){return this.$1.video_call_link_identifier_raw=t,this},t.setVideoCallLinkURLRaw=function(t){return this.$1.video_call_link_url_raw=t,this},t.updateExtraData=function(t){var e=n("nullthrows")(n("GeneratedLoggerUtils").serializeMap(t));return n("GeneratedLoggerUtils").checkExtraDataFieldNames(e,l),this.$1=babelHelpers.extends({},this.$1,e),this},t.addToExtraData=function(t,n){var e={};return e[t]=n,this.updateExtraData(e)},e})(),l={call_end_reason:!0,call_id:!0,camera_enabled:!0,client_app_version:!0,client_lock_status:!0,client_mono_time_ms:!0,clienttime:!0,component:!0,conference_name_raw:!0,creation_action:!0,error_details:!0,error_type:!0,event:!0,event_details:!0,event_fire_timestamp:!0,event_fire_timestamp_on_client:!0,exception_object:!0,experiments_enabled:!0,falco_batch_sequence:!0,funnel_session_id_raw:!0,group_id:!0,group_size:!0,guest_user_id:!0,kicked_user_id:!0,link_share_to:!0,local_call_id:!0,media_devices:!0,microphone_enabled:!0,open_link_from:!0,open_link_from_app_version:!0,reason:!0,referral_surface:!0,room_id_raw:!0,server_info_data:!0,source:!0,status:!0,surface:!0,targeted_user_ids:!0,thread_sync_room_data:!0,thread_type:!0,user_ids_to_be_removed:!0,video_call_link_hash_raw:!0,video_call_link_id_raw:!0,video_call_link_identifier_raw:!0,video_call_link_url_raw:!0};i.default=e}),66);
__d("ZenonProductConnectFunnel",["FBLogger","performanceNow","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){return Math.trunc((e||(e=r("performanceNow")))())},u=(function(){function e(){this.$6=null,this.$7=null,this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$8=new Map,this.$9=new Map}var t=e.prototype;return t.$10=function(t){var e=this.$8.get(t);if(e!=null)return e;e={acceptedTs:this.$3,connectedTs:null,connectingTs:null,contactingTs:null,endCallTs:null,permissionsReceivedTs:this.$5,permissionsRequestTs:this.$4,ringingTs:this.$2,triggeredTs:this.$1};var n={cameraPermission:this.$6,microphonePermission:this.$7};return this.clearPreJoinTimings(),this.$8.set(t,e),this.$9.set(t,n),e},t.$11=function(t,n){var e,o=t==null||(e=t.getLogIdentifiers())==null?void 0:e.clientSessionID;if(o==null){r("FBLogger")("rtc_www").warn("ProductConnectFunnel: could not record UI event due to missing signaling ID");return}var a=this.$10(o);a[n]==null&&(a[n]=s())},t.getTimings=function(t){return this.$8.get(t)},t.getPreJoinTimings=function(){return{acceptedTs:this.$3,ringingTs:this.$2,triggeredTs:this.$1}},t.clearPreJoinTimings=function(){this.$3=null,this.$2=null,this.$1=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null},t.setPreJoinTimings=function(t){this.$3=t.acceptedTs,this.$2=t.ringingTs,this.$1=t.triggeredTs},t.getAnnotations=function(t){return this.$9.get(t)},t.remove=function(t){this.clearPreJoinTimings(),this.$8.delete(t),this.$9.delete(t)},t.setUITriggered=function(){var e;(e=this.$1)!=null||(this.$1=s())},t.setUIPermissionsRequest=function(){var e=this;if(!(this.$4!=null||!navigator.permissions)){this.$4=s();var t=navigator.permissions;r("promiseDone")(t.query({name:"microphone"}).then(function(t){e.$7=t.state})),r("promiseDone")(t.query({name:"camera"}).then(function(t){e.$6=t.state}))}},t.setUIPermissionsReceived=function(){var e;this.$4!=null&&((e=this.$5)!=null||(this.$5=s()))},t.setUIAccepted=function(){var e;(e=this.$3)!=null||(this.$3=s())},t.setUIConnected=function(t){this.$11(t,"connectedTs")},t.setUIConnecting=function(t){this.$11(t,"connectingTs")},t.setUIRinging=function(){var e;(e=this.$2)!=null||(this.$2=s())},t.setUIContacting=function(t){this.$11(t,"contactingTs")},t.setUIEnded=function(t){this.$11(t,"endCallTs")},e})(),c=new u;l.default=c}),98);
__d("bs_curry",["bs_caml_array"],(function(t,n,r,o,a,i){"use strict";function e(t,r){for(;;){var o=r,a=t,i=a.length,l=i===0?1:i,s=o.length,u=l-s|0;if(u===0)return a.apply(null,o);if(u>=0)return(function(t,n){return function(r){return e(t,n.concat([r]))}})(a,o);r=n("bs_caml_array").sub(o,l,-u|0),t=a.apply(null,n("bs_caml_array").sub(o,0,l))}}function l(t,n){var r=t.length;if(r===1)return t(n);switch(r){case 1:return t(n);case 2:return function(e){return t(n,e)};case 3:return function(e,r){return t(n,e,r)};case 4:return function(e,r,o){return t(n,e,r,o)};case 5:return function(e,r,o,a){return t(n,e,r,o,a)};case 6:return function(e,r,o,a,i){return t(n,e,r,o,a,i)};case 7:return function(e,r,o,a,i,l){return t(n,e,r,o,a,i,l)};default:return e(t,[n])}}function s(e){var t=e.length;return t===1?e:function(t){return l(e,t)}}function u(t,n,r){var o=t.length;if(o===2)return t(n,r);switch(o){case 1:return e(t(n),[r]);case 2:return t(n,r);case 3:return function(e){return t(n,r,e)};case 4:return function(e,o){return t(n,r,e,o)};case 5:return function(e,o,a){return t(n,r,e,o,a)};case 6:return function(e,o,a,i){return t(n,r,e,o,a,i)};case 7:return function(e,o,a,i,l){return t(n,r,e,o,a,i,l)};default:return e(t,[n,r])}}function c(e){var t=e.length;return t===2?e:function(t,n){return u(e,t,n)}}function d(t,n,r,o){var a=t.length;if(a===3)return t(n,r,o);switch(a){case 1:return e(t(n),[r,o]);case 2:return e(t(n,r),[o]);case 3:return t(n,r,o);case 4:return function(e){return t(n,r,o,e)};case 5:return function(e,a){return t(n,r,o,e,a)};case 6:return function(e,a,i){return t(n,r,o,e,a,i)};case 7:return function(e,a,i,l){return t(n,r,o,e,a,i,l)};default:return e(t,[n,r,o])}}function m(e){var t=e.length;return t===3?e:function(t,n,r){return d(e,t,n,r)}}function p(t,n,r,o,a){var i=t.length;if(i===4)return t(n,r,o,a);switch(i){case 1:return e(t(n),[r,o,a]);case 2:return e(t(n,r),[o,a]);case 3:return e(t(n,r,o),[a]);case 4:return t(n,r,o,a);case 5:return function(e){return t(n,r,o,a,e)};case 6:return function(e,i){return t(n,r,o,a,e,i)};case 7:return function(e,i,l){return t(n,r,o,a,e,i,l)};default:return e(t,[n,r,o,a])}}function _(e){var t=e.length;return t===4?e:function(t,n,r,o){return p(e,t,n,r,o)}}function f(t,n,r,o,a,i){var l=t.length;if(l===5)return t(n,r,o,a,i);switch(l){case 1:return e(t(n),[r,o,a,i]);case 2:return e(t(n,r),[o,a,i]);case 3:return e(t(n,r,o),[a,i]);case 4:return e(t(n,r,o,a),[i]);case 5:return t(n,r,o,a,i);case 6:return function(e){return t(n,r,o,a,i,e)};case 7:return function(e,l){return t(n,r,o,a,i,e,l)};default:return e(t,[n,r,o,a,i])}}function g(e){var t=e.length;return t===5?e:function(t,n,r,o,a){return f(e,t,n,r,o,a)}}function h(t,n,r,o,a,i,l){var s=t.length;if(s===6)return t(n,r,o,a,i,l);switch(s){case 1:return e(t(n),[r,o,a,i,l]);case 2:return e(t(n,r),[o,a,i,l]);case 3:return e(t(n,r,o),[a,i,l]);case 4:return e(t(n,r,o,a),[i,l]);case 5:return e(t(n,r,o,a,i),[l]);case 6:return t(n,r,o,a,i,l);case 7:return function(e){return t(n,r,o,a,i,l,e)};default:return e(t,[n,r,o,a,i,l])}}function y(e){var t=e.length;return t===6?e:function(t,n,r,o,a,i){return h(e,t,n,r,o,a,i)}}function C(t,n,r,o,a,i,l,s){var u=t.length;if(u===7)return t(n,r,o,a,i,l,s);switch(u){case 1:return e(t(n),[r,o,a,i,l,s]);case 2:return e(t(n,r),[o,a,i,l,s]);case 3:return e(t(n,r,o),[a,i,l,s]);case 4:return e(t(n,r,o,a),[i,l,s]);case 5:return e(t(n,r,o,a,i),[l,s]);case 6:return e(t(n,r,o,a,i,l),[s]);case 7:return t(n,r,o,a,i,l,s);default:return e(t,[n,r,o,a,i,l,s])}}function b(e){var t=e.length;return t===7?e:function(t,n,r,o,a,i,l){return C(e,t,n,r,o,a,i,l)}}function v(t,n,r,o,a,i,l,s,u){var c=t.length;if(c===8)return t(n,r,o,a,i,l,s,u);switch(c){case 1:return e(t(n),[r,o,a,i,l,s,u]);case 2:return e(t(n,r),[o,a,i,l,s,u]);case 3:return e(t(n,r,o),[a,i,l,s,u]);case 4:return e(t(n,r,o,a),[i,l,s,u]);case 5:return e(t(n,r,o,a,i),[l,s,u]);case 6:return e(t(n,r,o,a,i,l),[s,u]);case 7:return e(t(n,r,o,a,i,l,s),[u]);default:return e(t,[n,r,o,a,i,l,s,u])}}function S(e){var t=e.length;return t===8?e:function(t,n,r,o,a,i,l,s){return v(e,t,n,r,o,a,i,l,s)}}i.app=e,i._1=l,i.__1=s,i._2=u,i.__2=c,i._3=d,i.__3=m,i._4=p,i.__4=_,i._5=f,i.__5=g,i._6=h,i.__6=y,i._7=C,i.__7=b,i._8=v,i.__8=S}),null);
__d("bs_belt_Option",["bs_caml_option","bs_curry"],(function(t,n,r,o,a,i){"use strict";function e(e,t){if(e!==void 0&&t(n("bs_caml_option").valFromOption(e)))return e}function l(t,r){return e(t,n("bs_curry").__1(r))}function s(e,t){if(e!==void 0)return t(n("bs_caml_option").valFromOption(e))}function u(e,t){return s(e,n("bs_curry").__1(t))}function c(e){if(e!==void 0)return n("bs_caml_option").valFromOption(e);throw{RE_EXN_ID:"Not_found",Error:new Error}}function d(e,t,r){return e!==void 0?r(n("bs_caml_option").valFromOption(e)):t}function m(e,t,r){return d(e,t,n("bs_curry").__1(r))}function p(e,t){if(e!==void 0)return n("bs_caml_option").some(t(n("bs_caml_option").valFromOption(e)))}function _(e,t){return p(e,n("bs_curry").__1(t))}function f(e,t){if(e!==void 0)return t(n("bs_caml_option").valFromOption(e))}function g(e,t){return f(e,n("bs_curry").__1(t))}function h(e,t){return e!==void 0?n("bs_caml_option").valFromOption(e):t}function y(e){return e!==void 0}function C(e){return e===void 0}function b(e,t,r){return e!==void 0?t!==void 0?r(n("bs_caml_option").valFromOption(e),n("bs_caml_option").valFromOption(t)):!1:t===void 0}function v(e,t,r){return b(e,t,n("bs_curry").__2(r))}function S(e,t,r){return e!==void 0?t!==void 0?r(n("bs_caml_option").valFromOption(e),n("bs_caml_option").valFromOption(t)):1:t!==void 0?-1:0}function R(e,t,r){return S(e,t,n("bs_curry").__2(r))}i.keepU=e,i.keep=l,i.forEachU=s,i.forEach=u,i.getExn=c,i.mapWithDefaultU=d,i.mapWithDefault=m,i.mapU=p,i.map=_,i.flatMapU=f,i.flatMap=g,i.getWithDefault=h,i.isSome=y,i.isNone=C,i.eqU=b,i.eq=v,i.cmpU=S,i.cmp=R}),null);
__d("useGroupCallBlockedUserWarningInterstitial",["I64","JSResourceForInteraction","MAWMiActMappingTableAPI","Promise","ReQL","WAJids","nullthrows","react","react-compiler-runtime","useBlockedUserInterstitial","useMWXLazyDialog","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c||(c=o("react"))).useCallback,m=function(t,r,a){return r===!0?t.runInTransaction(function(e){return o("MAWMiActMappingTableAPI").getThreadKeyForChatJid(e,o("WAJids").unsafeCoerceToChatJid(a+"@g.us"))},"readonly",void 0,void 0,i.id+":41"):(s||(s=n("Promise"))).resolve((u||(u=o("I64"))).of_string(a))};function p(e,t,n){return o("useBlockedUserInterstitial").getBlockedUserQuery(e,t,r("nullthrows")(n)).then(function(e){return e==null?[]:o("ReQL").toArrayAsync(e).then(function(e){return e})})}function _(){var t=o("react-compiler-runtime").c(6),n=(e||(e=r("useReStore")))(),a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=r("JSResourceForInteraction")("MWReceivedGroupCallBlockedUserInGroupInterstitialDialog.react").__setRef("useGroupCallBlockedUserWarningInterstitial"),t[0]=a):a=t[0];var i=r("useMWXLazyDialog")(a),l=i[0],s;t[1]===Symbol.for("react.memo_cache_sentinel")?(s=r("JSResourceForInteraction")("MWGroupCallBlockedUserInGroupInterstitialDialog.react").__setRef("useGroupCallBlockedUserWarningInterstitial"),t[1]=s):s=t[1];var u=r("useMWXLazyDialog")(s),c=u[0],d;return t[2]!==n||t[3]!==c||t[4]!==l?(d=function(t){var e=t.callType,o=t.isE2eeMandated,a=t.onContinue,i=t.threadID,s=t.threadType;m(n,o,i).then(function(t){return t==null?a():p(n,t,r("nullthrows")(s)).then(function(n){if(n.length===0)return a();e==="start"?c({blockedUsers:n,onContinue:a,threadKey:t}):l({blockedUsers:n,onContinue:a,threadKey:t})})})},t[2]=n,t[3]=c,t[4]=l,t[5]=d):d=t[5],d}l.fetchThreadKeyFromID=m,l.getBlockedUsers=p,l.useGroupCallBlockedUserWarningInterstitial=_}),98);/*FB_PKG_DELIM*/
__d("C4GFalcoLoggerDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("C4gEngagementFalcoEvent").__setRef("C4GFalcoLoggerDeferred");function s(t){var n=t.action,r=t.category_id,o=t.client_extras,a=t.community_id,i=t.entry_point,l=t.event,s=t.field_value,u=t.group_id,c=t.parent_surface,d=t.source,m=t.surface,p=t.thread_id;e.onReady(function(e){return e.log(function(){return{action:n,category_id:r,client_extras:o,community_id:a,entry_point:i,event:l,field_value:s,group_id:u,parent_surface:c,source:d,surface:m,thread_id:p}})})}l.logC4GEngagementFalcoEvent=s}),98);
__d("ChatMuteStore",[],(function(t,n,r,o,a,i){"use strict";var e={EightHours:288e5,FifteenMinutes:9e5,Indefinitely:-1,OneDay:864e5,OneHour:36e5},l={Both:"bothMuteScope",Call:"callMuteScope",Message:"messageMuteScope"},s={Duration:"setMuteDuration",Scope:"setMuteScope"},u={type:l.Message},c={type:l.Call},d={type:l.Both},m={duration:e.FifteenMinutes,scope:u};function p(e,t){return t.type===s.Scope?{duration:e.duration,scope:t.scope}:{duration:t.duration,scope:e.scope}}i.ChatMuteOptions=e,i.ChatMuteScopeTypes=l,i.SetMuteActionTypes=s,i.message=u,i.call=c,i.both=d,i.initialState=m,i.reducer=p}),66);
__d("CommunityMessagingEnableState",[],(function(t,n,r,o,a,i){var e=Object.freeze({ENABLED:1,DISABLE_REQUESTED:2,DISABLING:3,DISABLED:4,DISABLE_FAILED:5});i.default=e}),66);
__d("GroupsCometCMDisabledChatDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9637409876354840"}),null);
__d("GroupsCometCMDisabledChatDialogQuery$Parameters",["GroupsCometCMDisabledChatDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("GroupsCometCMDisabledChatDialogQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometCMDisabledChatDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("GroupsCometCMDisabledChatDialog.entrypoint",["GroupsCometCMDisabledChatDialogQuery$Parameters","JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.threadID;return{queries:{queryReference:{parameters:r("GroupsCometCMDisabledChatDialogQuery$Parameters"),variables:{threadID:e}}}}},root:r("JSResourceForInteraction")("GroupsCometCMDisabledChatDialog.react").__setRef("GroupsCometCMDisabledChatDialog.entrypoint")};l.default=e}),98);
__d("GroupsCometJoinChatDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9560132654105701"}),null);
__d("GroupsCometJoinChatDialogQuery$Parameters",["GroupsCometJoinChatDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("GroupsCometJoinChatDialogQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometJoinChatDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("GroupsCometJoinChatDialog.entrypoint",["GroupsCometJoinChatDialogQuery$Parameters","JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.groupID,n=t.threadID;return{queries:{myQueryReference:{parameters:r("GroupsCometJoinChatDialogQuery$Parameters"),variables:{groupID:e,threadID:n}}}}},root:r("JSResourceForInteraction")("GroupsCometJoinChatDialog.react").__setRef("GroupsCometJoinChatDialog.entrypoint")};l.default=e}),98);
__d("LSClearTables",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(e){return t.forEach(t.db.table(67).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(66).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(65).fetch(),function(e){return e.delete()})},function(n){return e[0]===void 0||e[0]===!0?t.forEach(t.db.table(69).fetch(),function(e){return e.delete()}):t.resolve()}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSSearchClearTablesStoredProcedure",e.__tables__=["search_queries","server_search_sections","server_search_results","message_search_results"],a.exports=e}),null);
__d("LSClearTablesStoredProcedure",["LSClearTables","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){a===void 0&&(a={});var i=t.storedProcedure(r("LSClearTables"),a.clearMessageResults);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSForceImmediateSync",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return n[0]=t.i64.of_float(Date.now()),t.forEach(t.db.table(1).fetch([[[e[0]]]]),function(e){var t=e.update,r=e.item;return t({minTimeToSyncTimestampMs:n[0]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreForceImmediateSyncStoredProcedure",e.__tables__=["sync_groups"],a.exports=e}),null);
__d("LSForceImmediateSyncStoredProcedure",["LSForceImmediateSync","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSForceImmediateSync"),a.dbType);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticFetchPendingGroupInvite",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=new t.Map,r[0].set("link_hash",e[0]),r[0].set("image_width",e[1]),r[0].set("image_height",e[2]),r[0].set("has_vanity_name",!1),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),"fetch_pending_group_invite",t.i64.cast([0,434]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))},function(n){return t.db.table(235).put({linkHash:e[0],threadTitle:"",lastThreadActivityMs:t.i64.cast([0,0]),groupImageUrl:"",groupImageUrlFallback:"",groupImageUrlExpirationTimestampMs:t.i64.cast([0,0]),joinExplainerText:"",numberOfMembers:t.i64.cast([0,0]),isInApprovalQueue:!1,isSubscribed:!1,canJoin:!1,fbGroupDescription:"",communityImageUrl:"",communityImageUrlFallback:"",communityImageUrlExpirationTimestampMs:t.i64.cast([0,0]),linkJoinType:t.i64.cast([0,1]),fbGroupVisibility:t.i64.cast([0,1]),communityId:t.i64.cast([0,0])})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticFetchPendingGroupInviteStoredProcedure",e.__tables__=["group_invitations_pending"],a.exports=e}),null);
__d("LSOptimisticFetchPendingGroupInviteStoredProcedure",["LSOptimisticFetchPendingGroupInvite","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticFetchPendingGroupInvite"),a.linkHash,a.imageWidth,a.imageHeight);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticMarkThreadReadV2StoredProcedure",["LSOptimisticMarkThreadReadV2","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticMarkThreadReadV2"),a.threadKey,a.readWatermarkTimestampMs);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSReadReceiptSettingState",[],(function(t,n,r,o,a,i){var e=Object.freeze({DEFAULT:0,DISABLED:1,ENABLED:2});i.default=e}),66);
__d("useMAWUnrecoverableDbError",["MAWUnrecoverableDbErrors","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(){var e=o("react-compiler-runtime").c(3),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=o("MAWUnrecoverableDbErrors").getError(),e[0]=t):t=e[0];var n=c(t),r=n[0],a=n[1],i,l;return e[1]===Symbol.for("react.memo_cache_sentinel")?(i=function(){var e=function(t){a(t)},t=o("MAWUnrecoverableDbErrors").subscribe(e);return(function(){t()})},l=[],e[1]=i,e[2]=l):(i=e[1],l=e[2]),u(i,l),r}l.default=d}),98);
__d("useWAExceededStorageQuota",["MAWUnrecoverableDbErrors","WAExceededStorageQuota","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useMemo,d=s.useState;function m(){var e=o("react-compiler-runtime").c(5),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=o("WAExceededStorageQuota").getExceededStorageQuota(),e[0]=t):t=e[0];var n=d(t),r=n[0],a=n[1],i,l;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=function(){var e=function(t){a(t)},t=o("WAExceededStorageQuota").subscribe(e);return(function(){t()})},l=[],e[1]=i,e[2]=l):(i=e[1],l=e[2]),u(i,l);var s;return e[3]!==r?(s=r?new(o("MAWUnrecoverableDbErrors")).WAExceededStorageQuotaError:null,e[3]=r,e[4]=s):s=e[4],s}l.default=m}),98);
__d("MAWUnrecoverableErrorBoundary.react",["react","react-compiler-runtime","useMAWUnrecoverableDbError","useWAExceededStorageQuota"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.children,a=e.fallback,i=r("useMAWUnrecoverableDbError")(),l=r("useWAExceededStorageQuota")(),s=i!=null?i:l;if(s!=null&&a!=null){var u;return t[0]!==s||t[1]!==a?(u=a(s),t[0]=s,t[1]=a,t[2]=u):u=t[2],u}else return n}l.default=u}),98);
__d("MWAddOnCircleContainer.react",["react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={container:{alignItems:"x6s0dn4",backgroundColor:"x1qhmfi1",borderStartStartRadius:"x1iwo8zk",borderStartEndRadius:"x1033uif",borderEndEndRadius:"x179ill4",borderEndStartRadius:"x1b60jn0",display:"x78zum5",justifyContent:"xl56j7k",$$css:!0},disabled:{backgroundColor:"x1281ex9",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(9),n=e.ariaHidden,r=e.children,a=e.disabled,i=e.size,l=n===void 0?!1:n,c=a===void 0?!1:a,d=c&&u.disabled,m;t[0]!==i?(m=[{height:i,width:i}],t[0]=i,t[1]=m):m=t[1];var p;t[2]!==d||t[3]!==m?(p=[u.container,d,m],t[2]=d,t[3]=m,t[4]=p):p=t[4];var _;return t[5]!==l||t[6]!==r||t[7]!==p?(_=s.jsx(o("react-strict-dom").html.div,{"aria-hidden":l,style:p,children:r}),t[5]=l,t[6]=r,t[7]=p,t[8]=_):_=t[8],_}l.default=c}),98);
__d("MWCMGetValidId",["FBLogger","I64"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return t===void 0&&(t=!1),u(e,t)!=null}function u(t,n){if(n===void 0&&(n=!1),t==null){n&&r("FBLogger")("cc_web").warn("FB Group ID is not defined");return}if((e||(e=o("I64"))).le(t,(e||(e=o("I64"))).zero)){n&&r("FBLogger")("cc_web").warn("FB Group ID is invalid: %s",(e||(e=o("I64"))).to_string(t));return}return t}l.MWCMHasValidFbGroupId=s,l.MWCMGetValidFbGroupIdOrUndefined=u}),98);
__d("getLSMediaCommunityFolderPictureUrl",["LSMediaUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null){var t=e.pictureUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.pictureUrlFallback:e.pictureUrl}}l.default=e}),98);
__d("MWCMThreadPictureCustomThreadCommunity.react",["BaseView.react","CometHeroHoldTrigger.react","FDSProfilePhoto_EXPERIMENTAL.react","MWXGlimmer.react","getLSMediaCommunityFolderPictureUrl","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={base:{height:"x1auzw0x",position:"x10l6tqk",width:"xqu606t",$$css:!0},circle:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",$$css:!0},community:{insetInlineEnd:"xtijo5x",left:null,right:null,top:"x13vifvy",$$css:!0},glimmer:{borderTopColor:"x6zyg47",borderInlineEndColor:"x1lu4ftm",borderBottomColor:"xpn8fn3",borderInlineStartColor:"x114g2xr",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",height:"x5yr21d",width:"xh8yej3",$$css:!0},rounded:{borderStartStartRadius:"x1fuqvrd",borderStartEndRadius:"xmvrd30",borderEndEndRadius:"xt2fmn5",borderEndStartRadius:"xkn4fgx",$$css:!0},thread:{backgroundColor:"x1jx94hy",borderTopColor:"x6zyg47",borderInlineEndColor:"x1lu4ftm",borderBottomColor:"xpn8fn3",borderInlineStartColor:"x114g2xr",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"xamhcws",borderInlineEndWidth:"x1alpsbp",borderBottomWidth:"xlxy82",borderInlineStartWidth:"xyumdvf",bottom:"x1ey2m1c",boxSizing:"x1afcbsf",insetInlineStart:"x1o0tod",left:null,right:null,marginTop:"x1kgmq87",marginInlineEnd:"x11lt19s",marginBottom:"xmgb6t1",marginInlineStart:"xe9ewy2",zIndex:"x1vjfegm",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(14),n=e.community,a=e.photoSize,i=e.threadPictureUrl,l;t[0]!==n?(l=r("getLSMediaCommunityFolderPictureUrl")(n),t[0]=n,t[1]=l):l=t[1];var c=l,d;t[2]!==a?(d={height:a,width:a},t[2]=a,t[3]=d):d=t[3];var m;t[4]===Symbol.for("react.memo_cache_sentinel")?(m=[u.base,u.community],t[4]=m):m=t[4];var p;t[5]!==c?(p=s.jsx(r("BaseView.react"),{xstyle:m,children:c==null?s.jsxs(s.Fragment,{children:[s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:[u.glimmer,u.rounded]}),s.jsx(r("CometHeroHoldTrigger.react"),{description:"MWCMThreadPictureCustomThreadCommunity",hold:!0})]}):s.jsx(r("FDSProfilePhoto_EXPERIMENTAL.react"),{shape:"rounded",size:"fill",source:c})}),t[5]=c,t[6]=p):p=t[6];var _;t[7]===Symbol.for("react.memo_cache_sentinel")?(_=[u.base,u.thread,u.circle],t[7]=_):_=t[7];var f;t[8]!==i?(f=s.jsx(r("BaseView.react"),{xstyle:_,children:s.jsx(r("FDSProfilePhoto_EXPERIMENTAL.react"),{shape:"circle",size:"fill",source:i})}),t[8]=i,t[9]=f):f=t[9];var g;return t[10]!==d||t[11]!==p||t[12]!==f?(g=s.jsxs(r("BaseView.react"),{role:"img",style:d,children:[p,f]}),t[10]=d,t[11]=p,t[12]=f,t[13]=g):g=t[13],g}l.default=c}),98);
__d("MWEBMobileOnboardingEligibility",["CometErrorBoundary.react","CometPlaceholder.react","gkx","lazyLoadComponent","react","useWAInfraDeviceList"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=e.children,n=e.fallback,o=r("useWAInfraDeviceList")(),a=o.some(d)&&r("gkx")("5255");return a?t:n}function d(e){return e.isCurrentDevice&&e.creationTime!=null&&e.creationTime.getTime()>Date.now()-6048e5}function m(e){var t=r("lazyLoadComponent")(e);return function(e){var n=e.fallback,o=e.props;return s.jsx(r("CometErrorBoundary.react"),{fallback:function(){return n},children:s.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:s.jsx(c,{fallback:n,children:s.jsx(t,babelHelpers.extends({},o))})})})}}l.requireMobileOnboardingIfEligible=m}),98);
__d("MWEBWebOnboardingPostDecisionDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWEBWebOnboardingPostDecisionDialog.react").__setRef("MWEBWebOnboardingPostDecisionDialog.entrypoint")};l.default=e}),98);
__d("MWEBWebOnboardingUpsellUtils",["$InternalEnum","WebDriverConfig","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({QP:"qp",PERSISTENT_BANNER:"persistent_banner",DISMISSED:"dismissed"}),s=r("WebDriverConfig").isJestE2ETestRun&&!r("gkx")("24058");l.UpsellState=e,l.IS_E2E_TEST_UNRELATED_TO_ENCRYPTED_BACKUPS=s}),98);
__d("MWEncryptedBackupsDetermineInitialEBState",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("gkx")("23914");function s(t){var n=t.clientStateData,r=t.hasArmadilloError,o=t.xfb_backup;return!e||r?0:o==null?2:n.length>0?3:4}l.determineInitialEBState=s}),98);
__d("MWFDSArrowRight.svg.react",["cr:21541"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21541")}),98);
__d("MWFDSBellCross.svg.react",["cr:21563"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21563")}),98);
__d("MWFDSCautionTriangle.svg.react",["cr:21594"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21594")}),98);
__d("MWFDSGroup.svg.react",["cr:21677"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21677")}),98);
__d("MWFDSPushpin.svg.react",["cr:21750"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21750")}),98);
__d("MWFacepile.react",["CometHeroHoldTrigger.react","FDSFacepilePhoto.react","MWXGlimmer.react","UNTRANSLATED_STRING_FIXME","getLSMediaContactProfilePictureUrl","react","react-compiler-runtime","translatedServerString","useMWFacepileGetContactsToShow"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={glimmer:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"x5yr21d",width:"xh8yej3",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(21),n=e.actualBadge,a=e.ariaHidden,i=e.label,l=e.onlyAuthoratitiveContacts,c=e.photoSize,d=e.threadKey,m=e.threadType,p=e.withAltText,_=c===void 0?32:c,f=p===void 0?!0:p,g=r("useMWFacepileGetContactsToShow")(d,m,l);if(g.length!==0){var h;t[0]!==i||t[1]!==f?(h=f===!0&&i!=null?r("UNTRANSLATED_STRING_FIXME")(i):void 0,t[0]=i,t[1]=f,t[2]=h):h=t[2];var y;if(t[3]!==g||t[4]!==f){var C;t[6]!==f?(C=function(t){return{alt:f?r("translatedServerString")(t.name):void 0,disabled:!1,source:r("getLSMediaContactProfilePictureUrl")(t)}},t[6]=f,t[7]=C):C=t[7],y=g.map(C),t[3]=g,t[4]=f,t[5]=y}else y=t[5];var b;return t[8]!==n||t[9]!==a||t[10]!==g.length||t[11]!==_||t[12]!==h||t[13]!==y?(b=s.jsx(r("FDSFacepilePhoto.react"),{ariaHidden:a,badge:n,label:h,size:_,sources:y,totalItems:g.length}),t[8]=n,t[9]=a,t[10]=g.length,t[11]=_,t[12]=h,t[13]=y,t[14]=b):b=t[14],b}var v;t[15]!==_?(v={height:_,width:_},t[15]=_,t[16]=v):v=t[16];var S,R;t[17]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(r("MWXGlimmer.react"),{index:1,xstyle:u.glimmer}),R=s.jsx(r("CometHeroHoldTrigger.react"),{description:"MWFacepile photo",hold:!0}),t[17]=S,t[18]=R):(S=t[17],R=t[18]);var L;return t[19]!==v?(L=s.jsxs("div",{style:v,children:[S,R]}),t[19]=v,t[20]=L):L=t[20],L}l.default=c}),98);
__d("MWGAMEThreadTakedownDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9985766314800064"}),null);
__d("MWGAMEThreadTakedownDialogQuery$Parameters",["MWGAMEThreadTakedownDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWGAMEThreadTakedownDialogQuery_facebookRelayOperation"),metadata:{},name:"MWGAMEThreadTakedownDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWGAMEThreadTakedownDialog.entrypoint",["JSResourceForInteraction","MWGAMEThreadTakedownDialogQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.threadID;return{queries:{queryReference:{parameters:r("MWGAMEThreadTakedownDialogQuery$Parameters"),variables:{threadID:e}}}}},root:r("JSResourceForInteraction")("MWGAMEThreadTakedownDialog.react").__setRef("MWGAMEThreadTakedownDialog.entrypoint")};l.default=e}),98);
__d("MWInboxFocusTarget",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({THREAD_VIEW_AND_OR_COMPOSER:0,THREAD_LIST:1,YOU_MAY_KNOW:2}),l=e;i.default=l}),66);
__d("MWLSDatabaseLazySync",["I64","Int64Hooks","LSFactory","LSForceImmediateSyncStoredProcedure","LSSyncGroupsUtils","Promise","ReQL","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){return e.runInTransaction(function(e){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.sync_groups).getKeyRange(t)).then(function(a){return a!=null&&(u||(u=o("I64"))).equal(a.minTimeToSyncTimestampMs,o("LSSyncGroupsUtils").neverSyncTimestamp)?r("LSForceImmediateSyncStoredProcedure")(r("LSFactory")(e),{dbType:t}):(s||(s=n("Promise"))).resolve()})},"readwrite",void 0,void 0,i.id+":28")}function d(t){var n=o("react-compiler-runtime").c(4),a=(e||(e=r("useReStore")))(),i,l;return n[0]!==a||n[1]!==t?(i=function(){return c(a,t)},l=[t,a],n[0]=a,n[1]=t,n[2]=i,n[3]=l):(i=n[2],l=n[3]),o("Int64Hooks").useCallbackInt64(i,l)}l.sync=c,l.useSync=d}),98);
__d("MWReQLCMThreadPictureCustomThreadCommunity.react",["MWCMThreadPictureCustomThreadCommunity.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(14),a=t.photoSize,l=t.thread,s=t.threadPictureUrl,c=(e||(e=r("useReStore")))(),d;n[0]!==c.tables.community_folders||n[1]!==l.parentThreadKey?(d=function(){return o("ReQL").fromTableAscending(c.tables.community_folders).getKeyRange(l.parentThreadKey)},n[0]=c.tables.community_folders,n[1]=l.parentThreadKey,n[2]=d):d=n[2];var m;n[3]!==c||n[4]!==l.parentThreadKey?(m=[c,l.parentThreadKey],n[3]=c,n[4]=l.parentThreadKey,n[5]=m):m=n[5];var p=o("ReQLSuspense").useFirst(d,m,i.id+":25"),_=p==null?void 0:p.pictureUrl,f=p==null?void 0:p.pictureUrlExpirationTimestampMs,g=p==null?void 0:p.pictureUrlFallback,h;n[6]!==_||n[7]!==f||n[8]!==g?(h={pictureUrl:_,pictureUrlExpirationTimestampMs:f,pictureUrlFallback:g},n[6]=_,n[7]=f,n[8]=g,n[9]=h):h=n[9];var y;return n[10]!==a||n[11]!==h||n[12]!==s?(y=u.jsx(r("MWCMThreadPictureCustomThreadCommunity.react"),{community:h,photoSize:a,threadPictureUrl:s}),n[10]=a,n[11]=h,n[12]=s,n[13]=y):y=n[13],y}l.default=c}),98);
__d("MWReQLFacepile.react",["MWFacepile.react","MWFacepileBadge.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(15),n=e.ariaHidden,a=e.badge,i=e.badgeSize,l=e.borderThemeColor,u=e.label,c=e.onlyAuthoratitiveContacts,d=e.photoSize,m=e.showBadge,p=e.thread,_=e.withAltText,f=c===void 0?!1:c,g=d===void 0?32:d,h=m===void 0?!0:m,y=_===void 0?!0:_,C;t[0]!==a||t[1]!==i||t[2]!==l||t[3]!==h||t[4]!==p.threadKey?(C=h?a!=null?a:s.jsx(r("MWFacepileBadge.react"),{borderThemeColor:l,size:i,threadKey:p.threadKey}):null,t[0]=a,t[1]=i,t[2]=l,t[3]=h,t[4]=p.threadKey,t[5]=C):C=t[5];var b=C,v;return t[6]!==b||t[7]!==n||t[8]!==u||t[9]!==f||t[10]!==g||t[11]!==p.threadKey||t[12]!==p.threadType||t[13]!==y?(v=s.jsx(r("MWFacepile.react"),{actualBadge:b,ariaHidden:n,label:u,onlyAuthoratitiveContacts:f,photoSize:g,threadKey:p.threadKey,threadType:p.threadType,withAltText:y}),t[6]=b,t[7]=n,t[8]=u,t[9]=f,t[10]=g,t[11]=p.threadKey,t[12]=p.threadType,t[13]=y,t[14]=v):v=t[14],v}l.default=u}),98);
__d("MWThreadIsMuted_DEPRECATED",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e<=-1?!0:e>Date.now()}i.getThreadIsMuted=e}),66);
__d("MWThreadPictureCustomThread.react",["FDSFacepilePhoto.react","MWFacepileBadge.react","MWPActor.react","MWPGetThreadTitle","ReQL","ReQLSuspense","react","react-compiler-runtime","translatedServerString","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(40),a=t.badge,l=t.badgeSize,s=t.borderThemeColor,c=t.photoSize,d=t.shape,m=t.showBadge,p=t.thread,_=t.threadPictureUrl,f=t.withAltText,g=(e||(e=r("useReStore")))(),h=o("MWPActor.react").useActor(),y;n[0]!==g.tables.contacts||n[1]!==g.tables.participants||n[2]!==p.threadKey?(y=function(){return o("ReQL").leftJoin(o("ReQL").fromTableAscending(g.tables.participants,["contactId","nickname","authorityLevel"]).getKeyRange(p.threadKey),o("ReQL").fromTableAscending(g.tables.contacts,["name","rank","contactType","firstName","capabilities","capabilities2"])).take(o("MWPGetThreadTitle").amountToFetchForTitle)},n[0]=g.tables.contacts,n[1]=g.tables.participants,n[2]=p.threadKey,n[3]=y):y=n[3];var C;n[4]!==g||n[5]!==p.threadKey?(C=[g,p.threadKey],n[4]=g,n[5]=p.threadKey,n[6]=C):C=n[6];var b=o("ReQLSuspense").useArray(y,C,i.id+":39"),v,S,R,L,E,k;if(n[7]!==h||n[8]!==a||n[9]!==l||n[10]!==s||n[11]!==b||n[12]!==c||n[13]!==d||n[14]!==m||n[15]!==p.threadKey||n[16]!==p.threadType||n[17]!==f){var I=o("MWPGetThreadTitle").computeThreadTitle(void 0,p.threadType,b.slice(0,o("MWPGetThreadTitle").amountToFetchForTitle),h),T;n[24]!==a||n[25]!==l||n[26]!==s||n[27]!==m||n[28]!==p.threadKey?(T=m===!0?a!=null?a:u.jsx(r("MWFacepileBadge.react"),{borderThemeColor:s,size:l,threadKey:p.threadKey}):null,n[24]=a,n[25]=l,n[26]=s,n[27]=m,n[28]=p.threadKey,n[29]=T):T=n[29];var D=T;v=r("FDSFacepilePhoto.react"),R=D,L=f===!0&&I!=null?r("translatedServerString")(I):void 0,E=d,k=c,S=f===!0&&I!=null?r("translatedServerString")(I):void 0,n[7]=h,n[8]=a,n[9]=l,n[10]=s,n[11]=b,n[12]=c,n[13]=d,n[14]=m,n[15]=p.threadKey,n[16]=p.threadType,n[17]=f,n[18]=v,n[19]=S,n[20]=R,n[21]=L,n[22]=E,n[23]=k}else v=n[18],S=n[19],R=n[20],L=n[21],E=n[22],k=n[23];var x;n[30]!==S||n[31]!==_?(x=[{alt:S,disabled:!1,source:_}],n[30]=S,n[31]=_,n[32]=x):x=n[32];var $;return n[33]!==v||n[34]!==R||n[35]!==L||n[36]!==E||n[37]!==k||n[38]!==x?($=u.jsx(v,{badge:R,label:L,shape:E,size:k,sources:x,totalItems:1}),n[33]=v,n[34]=R,n[35]=L,n[36]=E,n[37]=k,n[38]=x,n[39]=$):$=n[39],$}l.default=c}),98);
__d("MWThreadPicture.react",["MWReQLCMThreadPictureCustomThreadCommunity.react","MWReQLFacepile.react","MWThreadPictureCustomThread.react","ReQL","ReQLSuspense","getLSMediaThreadPictureUrl","mwCMIsAnyCMThread","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={borderThemeColor:{borderTopColor:"xwi95zy",borderInlineEndColor:"x1mlikqm",borderBottomColor:"xt1txi7",borderInlineStartColor:"x1uir17b",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(4),n=e.withCommunityPicture;if(n===!0){var a;return t[0]!==e?(a=u.jsx(r("MWReQLCMThreadPictureCustomThreadCommunity.react"),babelHelpers.extends({},e)),t[0]=e,t[1]=a):a=t[1],a}var i;return t[2]!==e?(i=u.jsx(r("MWThreadPictureCustomThread.react"),babelHelpers.extends({},e)),t[2]=e,t[3]=i):i=t[3],i}function m(t){var n=o("react-compiler-runtime").c(29),a=t.ariaHidden,l=t.badge,s=t.badgeSize,m=t.onlyAuthoratitiveContacts,p=t.photoSize,_=t.showBadge,f=t.showFacepiles,g=t.threadKey,h=t.threadTitle,y=t.withAltText,C=t.withCommunityPicture,b=m===void 0?!1:m,v=_===void 0?!0:_,S=f===void 0?!1:f,R=y===void 0?!0:y,L=C===void 0?!1:C,E=(e||(e=r("useReStore")))(),k;n[0]!==E.tables.threads||n[1]!==g?(k=function(){return o("ReQL").fromTableAscending(E.tables.threads,["parentThreadKey","threadPictureUrl","threadPictureUrlExpirationTimestampMs","threadPictureUrlFallback","threadKey","threadName","threadType"]).getKeyRange(g)},n[0]=E.tables.threads,n[1]=g,n[2]=k):k=n[2];var I;n[3]!==E||n[4]!==g?(I=[E,g],n[3]=E,n[4]=g,n[5]=I):I=n[5];var T=o("ReQLSuspense").useFirst(k,I,i.id+":62");if(T==null)return null;var D;n[6]!==T.threadType?(D=r("mwCMIsAnyCMThread")(T.threadType),n[6]=T.threadType,n[7]=D):D=n[7];var x=D,$=v&&!x,P;n[8]!==T?(P=r("getLSMediaThreadPictureUrl")(T),n[8]=T,n[9]=P):P=n[9];var N=P;if(N!=null&&S!==!0){var M;return n[10]!==l||n[11]!==s||n[12]!==p||n[13]!==$||n[14]!==T||n[15]!==N||n[16]!==R||n[17]!==L?(M=u.jsx(d,{badge:l,badgeSize:s,borderThemeColor:c.borderThemeColor,photoSize:p,showBadge:$,thread:T,threadPictureUrl:N,withAltText:R,withCommunityPicture:L}),n[10]=l,n[11]=s,n[12]=p,n[13]=$,n[14]=T,n[15]=N,n[16]=R,n[17]=L,n[18]=M):M=n[18],M}var w=h!=null?h:T.threadName,A;return n[19]!==a||n[20]!==l||n[21]!==s||n[22]!==b||n[23]!==p||n[24]!==$||n[25]!==w||n[26]!==T||n[27]!==R?(A=u.jsx(r("MWReQLFacepile.react"),{ariaHidden:a,badge:l,badgeSize:s,borderThemeColor:c.borderThemeColor,label:w,onlyAuthoratitiveContacts:b,photoSize:p,showBadge:$,thread:T,withAltText:R}),n[19]=a,n[20]=l,n[21]=s,n[22]=b,n[23]=p,n[24]=$,n[25]=w,n[26]=T,n[27]=R,n[28]=A):A=n[28],A}l.default=m}),98);
__d("MWVerticalRhythm",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),n=e.height,r=n,a=String(r)+"px",i;return t[0]!==a?(i=s.jsx("div",{style:{height:a}}),t[0]=a,t[1]=i):i=t[1],i}l.default=u}),98);
__d("MWXCardedDialogLoadingState.react",["cr:9908","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));l.default=n("cr:9908")}),98);
__d("MWXIconArrowRight",["MWXSvgIcon","SVGIcon","cr:22197","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22197")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconBellCross",["MWXSvgIcon","SVGIcon","cr:22224","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22224")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconGroup",["MWXSvgIcon","SVGIcon","cr:22360","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22360")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconPushpin",["MWXSvgIcon","SVGIcon","cr:22450","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22450")),r("gkx")("23219"));l.default=e}),98);
__d("MWXScrollableAreaStyles",["MDSScrollableAreaStyles"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("MDSScrollableAreaStyles")}),98);
__d("MWXTextPairing.react",["FDSTextWebUtils","cr:4853","cr:6725","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e=["bodyColor","bodyRef","headlineColor","headlineRef","metaColor","metaRef"],s,u=s||(s=o("react")),c={tetraTextWrapper:{boxSizing:"x9f619",minHeight:"x2lwn1j",minWidth:"xeuugli",position:"x1n2onr6",zIndex:"x1ja2u2z",$$css:!0}};function d(e){return function(t){e!=null&&(typeof e=="function"?e(t):e.current=t)}}function m(t){var r=o("react-compiler-runtime").c(31);if(n("cr:6725")!=null){var a,i,l,s,m,p,_;r[0]!==t?(i=t.bodyColor,l=t.bodyRef,s=t.headlineColor,m=t.headlineRef,p=t.metaColor,_=t.metaRef,a=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i,r[3]=l,r[4]=s,r[5]=m,r[6]=p,r[7]=_):(a=r[1],i=r[2],l=r[3],s=r[4],m=r[5],p=r[6],_=r[7]);var f;r[8]===Symbol.for("react.memo_cache_sentinel")?(f=[c.tetraTextWrapper],r[8]=f):f=r[8];var g;r[9]!==i?(g=o("FDSTextWebUtils").getFDSBodyColor(i),r[9]=i,r[10]=g):g=r[10];var h;r[11]!==l?(h=d(l),r[11]=l,r[12]=h):h=r[12];var y;r[13]!==s?(y=o("FDSTextWebUtils").getFDSHeadlineColor(s),r[13]=s,r[14]=y):y=r[14];var C;r[15]!==m?(C=d(m),r[15]=m,r[16]=C):C=r[16];var b;r[17]!==p?(b=o("FDSTextWebUtils").getFDSMetaColor(p),r[17]=p,r[18]=b):b=r[18];var v;r[19]!==_?(v=d(_),r[19]=_,r[20]=v):v=r[20];var S;return r[21]!==a||r[22]!==g||r[23]!==h||r[24]!==y||r[25]!==C||r[26]!==b||r[27]!==v?(S=u.jsx(o("react-strict-dom").html.div,{style:f,children:u.jsx(n("cr:6725"),babelHelpers.extends({bodyColor:g,bodyRef:h,headlineColor:y,headlineRef:C,metaColor:b,metaRef:v},a))}),r[21]=a,r[22]=g,r[23]=h,r[24]=y,r[25]=C,r[26]=b,r[27]=v,r[28]=S):S=r[28],S}if(n("cr:4853")!=null){var R;return r[29]!==t?(R=u.jsx(n("cr:4853"),babelHelpers.extends({},t)),r[29]=t,r[30]=R):R=r[30],R}return null}l.default=m}),98);
__d("MessagingCommunityChatsPauseStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({ACTIVE:1,PAUSED_BY_SOFT_ACTION:2,PAUSED_BY_ADMINLESS_STANDALONE_COMMUNITY:3,DEPRECATED:4});i.default=e}),66);
__d("MessengerMuteUtils",["fbt","ChatMuteStore","DateStrings","I64","formatDate"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(e){if(e<=0)return e===o("ChatMuteStore").ChatMuteOptions.Indefinitely?s._(/*BTDS*/"Off indefinitely"):void 0;if(!(e<86401)){var t=new Date(e*1e3).getDay(),n=t===new Date().getDay(),a=t===new Date().getDay()+1;return a?s._(/*BTDS*/"Off until {time} tomorrow",[s._param("time",r("formatDate")(e,"g:ia"))]):n?s._(/*BTDS*/"Off until {time}",[s._param("time",r("formatDate")(e,"g:ia"))]):s._(/*BTDS*/"Off until {time} {weekday name}",[s._param("time",r("formatDate")(e,"g:ia")),s._param("weekday name",o("DateStrings").getWeekdayName(t))])}}var c=s._(/*BTDS*/"Chat notifications");function d(e,t){if(e==null)return t===!0?s._(/*BTDS*/"Mute this sidechat?"):s._(/*BTDS*/"Mute conversation");switch(e.type){case"messageMuteScope":return s._(/*BTDS*/"Mute message notifications");case"callMuteScope":return s._(/*BTDS*/"Mute call notifications");case"bothMuteScope":return s._(/*BTDS*/"Mute message and call notifications")}}function m(t){var n=t.muteCallsExpireTimeMs,r=t.muteExpireTimeMs,a=Math.min((e||(e=o("I64"))).to_float(r),e.to_float(n)),i=Math.max(e.to_float(r),e.to_float(n));return a===-1?-1:i}l.mutedUntilLabel=u,l.chatNotificationActionLabel=c,l.muteDialogTitle=d,l.calcMuteUntilMs=m}),226);
__d("isFacebookMessengerInboxURI",["isFacebookURI"],(function(t,n,r,o,a,i,l){function e(e){return r("isFacebookURI")(e)&&e.getPath().startsWith("/messages")}l.default=e}),98);
__d("useDeviceAlertCountQuery.graphql",["MAWDeviceChangeState-resolver"],(function(t,n,r,o,a,i){"use strict";var e={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useDeviceAlertCountQuery",selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,fragment:null,kind:"RelayLiveResolver",name:"deviceAlertCount",resolverModule:n("MAWDeviceChangeState-resolver").deviceAlertCount,path:"deviceAlertCount"}]}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useDeviceAlertCountQuery",selections:[{kind:"ClientExtension",selections:[{name:"deviceAlertCount",args:null,fragment:null,kind:"RelayResolver",storageKey:null,isOutputType:!0}]}]},params:{cacheID:"6e4038dfa7eed674d7e97d2aca3aeb1f",id:null,metadata:{},name:"useDeviceAlertCountQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("useDeviceAlertCount",["CometRelay","react-compiler-runtime","useDeviceAlertCountQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t,r=o("react-compiler-runtime").c(2),a,i;r[0]===Symbol.for("react.memo_cache_sentinel")?(a=e!==void 0?e:e=n("useDeviceAlertCountQuery.graphql"),i={},r[0]=a,r[1]=i):(a=r[0],i=r[1]);var l=o("CometRelay").useClientQuery(a,i);return(t=l.deviceAlertCount)!=null?t:0}var u=s;l.useDeviceAlertCount=u}),98);
__d("useEBVirtualDeviceFromReStore",["ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("react-compiler-runtime").c(6),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.encrypted_backups_virtual_devices?(a=function(){return o("ReQL").fromTableAscending(n.tables.encrypted_backups_virtual_devices)},t[0]=n.tables.encrypted_backups_virtual_devices,t[1]=a):a=t[1];var l;t[2]!==n?(l=[n],t[2]=n,t[3]=l):l=t[3];var s=o("ReQLSuspense").useArray(a,l,i.id+":26"),u;return t[4]!==s?(u={virtualDevices:s},t[4]=s,t[5]=u):u=t[5],u}l.default=s}),98);
__d("useEncryptedBackupsProcessStatePreLoaded_query.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useEncryptedBackupsProcessStatePreLoaded_query",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null};a.exports=e}),null);
__d("useEncryptedBackupsProcessStatePreLoaded",["CometRelay","I64","LSAuthorityLevel","LSIntEnum","MWEncryptedBackupsDetermineInitialEBState","ReQL","ReQLSuspense","isMWEBEntrypointEnabled","react-compiler-runtime","useEncryptedBackupsProcessStatePreLoaded_query.graphql","useMAWHasUserVisibleErrors","useMAWUnsupportedBrowserNUX","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(t){var a=o("react-compiler-runtime").c(10),l=t.entrypoint,s=t.query,u=o("CometRelay").useFragment(e!==void 0?e:e=n("useEncryptedBackupsProcessStatePreLoaded_query.graphql"),s),d=(c||(c=r("useReStore")))(),p;a[0]!==d||a[1]!==(u==null?void 0:u.viewer.backup_state)?(p=function(){return(u==null?void 0:u.viewer.backup_state)==null?o("ReQL").fromTableAscending(d.tables.secure_encrypted_backups_client_state).filter(m):o("ReQL").empty()},a[0]=d,a[1]=u==null?void 0:u.viewer.backup_state,a[2]=p):p=a[2];var _=u==null?void 0:u.viewer.backup_state,f;a[3]!==d||a[4]!==_?(f=[d,_],a[3]=d,a[4]=_,a[5]=f):f=a[5];var g=o("ReQLSuspense").useArray(p,f,i.id+":57"),h=o("useMAWUnsupportedBrowserNUX").useMAWUnsupportedBrowserNUX(),y=h.shouldHideEBFlow,C=r("useMAWHasUserVisibleErrors")(),b=y||C;if(!r("isMWEBEntrypointEnabled")(l))return 0;var v;return a[6]!==g||a[7]!==b||a[8]!==u?(v=(u==null?void 0:u.viewer.backup_state)!=null?u.viewer.backup_state:o("MWEncryptedBackupsDetermineInitialEBState").determineInitialEBState({clientStateData:g,hasArmadilloError:b,xfb_backup:u==null?void 0:u.xfb_backup}),a[6]=g,a[7]=b,a[8]=u,a[9]=v):v=a[9],v}function m(e){var t=e.authorityLevel;return(s||(s=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))}l.default=d}),98);
__d("useGroupsCometCMDisabledChatEntryPointDialog",["GroupsCometCMDisabledChatDialog.entrypoint","MWGAMEThreadTakedownDialog.entrypoint","MetaConfig","gkx","logVultureJSDeadEntrypoint","react-compiler-runtime","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("react-compiler-runtime").c(4),n=e.isGeoBlocked,a=e.threadID,i;t[0]!==a?(i={threadID:a},t[0]=a,t[1]=i):i=t[1];var l=r("useMWXEntryPointDialog")(r("GroupsCometCMDisabledChatDialog.entrypoint"),i),s;t[2]!==a?(s={threadID:a},t[2]=a,t[3]=s):s=t[3];var u=r("useMWXEntryPointDialog")(r("MWGAMEThreadTakedownDialog.entrypoint"),s);return n&&r("MetaConfig")._("25")?(r("logVultureJSDeadEntrypoint")("GroupsCometCMGeoBlockedChatDialog.entrypoint"),l):r("gkx")("23433")?u:l}l.default=e}),98);
__d("useGroupsCometChatsEngagementImpressionLogger",["GroupsCometChatsEngagementLogger","react","react-compiler-runtime","usePartialViewImpression"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(12),n=e.category_id,a=e.client_extras,i=e.community_id,l=e.event,s=e.group_id,u=e.parent_surface,c=e.source,d=e.surface,m=e.thread_id,p;t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==l||t[4]!==s||t[5]!==u||t[6]!==c||t[7]!==d||t[8]!==m?(p=function(){o("GroupsCometChatsEngagementLogger").log({action:"impression",category_id:n,client_extras:a,community_id:i,event:l,group_id:s,parent_surface:u,source:c,surface:d,thread_id:m})},t[0]=n,t[1]=a,t[2]=i,t[3]=l,t[4]=s,t[5]=u,t[6]=c,t[7]=d,t[8]=m,t[9]=p):p=t[9];var _=p,f;return t[10]!==_?(f={onImpressionStart:_},t[10]=_,t[11]=f):f=t[11],r("usePartialViewImpression")(f)}l.default=u}),98);
__d("useMAWSecurityAlertsPreferences",["MAWBridgeFireAndForget","MAWBridgeSendAndReceive","promiseDone","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useState;function m(){var e=o("react-compiler-runtime").c(10),t=d(),n=t[0],a=t[1],i,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=function(){r("promiseDone")(o("MAWBridgeSendAndReceive").sendAndReceive("backend","getSecurityAlertSettingForSelfAndContact").then(function(e){a(e)}))},l=[],e[0]=i,e[1]=l):(i=e[0],l=e[1]),c(i,l);var s;e[2]!==n?(s=function(t){n!=null&&a(babelHelpers.extends({},n,{allowSecurityAlertForContact:t})),o("MAWBridgeFireAndForget").fireAndForget("backend","changeSecurityAlertSetting",{isEnableAlert:t})},e[2]=n,e[3]=s):s=e[3];var u=s,m;e[4]!==n?(m=function(t){n!=null&&a(babelHelpers.extends({},n,{allowSecurityAlertForSelf:t})),o("MAWBridgeFireAndForget").fireAndForget("backend","changeSecurityAlertSettingForSelf",{isEnableSelfAlert:t})},e[4]=n,e[5]=m):m=e[5];var p=m,_;return e[6]!==n||e[7]!==u||e[8]!==p?(_={onContactSecurityAlertsPreferencesChange:u,onSelfSecurityAlertsPreferencesChange:p,securityAlertsPreferences:n},e[6]=n,e[7]=u,e[8]=p,e[9]=_):_=e[9],_}l.default=m}),98);
__d("useMWAriaLabelForThread",["fbt","Int64Hooks","MWPActor.react","MWPGetThreadTitle","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(t){var n=o("react-compiler-runtime").c(13),a=t.threadKey,l=t.threadName,u=t.threadType,c=o("MWPActor.react").useActor(),d=(e||(e=r("useReStore")))(),m;n[0]!==d.tables.contacts||n[1]!==d.tables.participants||n[2]!==a?(m=function(){return o("ReQL").leftJoin(o("ReQL").fromTableAscending(d.tables.participants,["contactId","nickname","authorityLevel"]).getKeyRange(a),o("ReQL").fromTableAscending(d.tables.contacts,["name","rank","contactType","firstName","capabilities","capabilities2"])).take(8)},n[0]=d.tables.contacts,n[1]=d.tables.participants,n[2]=a,n[3]=m):m=n[3];var p;n[4]!==d||n[5]!==a?(p=[d,a],n[4]=d,n[5]=a,n[6]=p):p=n[6];var _=o("ReQLSuspense").useArray(m,p,i.id+":37"),f,g;return n[7]!==c||n[8]!==_||n[9]!==l||n[10]!==u?(f=function(){var e,t=l;if(t!=null)return s._(/*BTDS*/"Conversation titled {name of conversation}",[s._param("name of conversation",t)]);var n=(e=o("MWPGetThreadTitle").computeThreadTitle(void 0,u,_,c))!=null?e:"";return s._(/*BTDS*/"Conversation with {participant list}",[s._param("participant list",n)])},g=[l,u,_,c],n[7]=c,n[8]=_,n[9]=l,n[10]=u,n[11]=f,n[12]=g):(f=n[11],g=n[12]),o("Int64Hooks").useMemoInt64(f,g)}l.default=u}),226);
__d("useMWCMShouldGoToFullScreenChatHook",["getRequestConstUri","isFacebookMessengerInboxURI","isMessengerDotComURI","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(1),t;if(e[0]===Symbol.for("react.memo_cache_sentinel")){var n=r("getRequestConstUri")();t=r("isMessengerDotComURI")(n)||r("isFacebookMessengerInboxURI")(n),e[0]=t}else t=e[0];return t}l.default=e}),98);
__d("useMWChatCalculateIsMutedFromExpireTime",["MWThreadIsMuted_DEPRECATED","clearTimeout","react","react-compiler-runtime","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(e){var t=o("react-compiler-runtime").c(5),n;t[0]!==e?(n=function(){return o("MWThreadIsMuted_DEPRECATED").getThreadIsMuted(e)},t[0]=e,t[1]=n):n=t[1];var a=c(n),i=a[0],l=a[1],s,d;return t[2]!==e?(s=function(){var t=o("MWThreadIsMuted_DEPRECATED").getThreadIsMuted(e);if(l(t),!!(t&&e>-1)){var n=r("setTimeout")(function(){return l(!1)},e-Date.now());return(function(){r("clearTimeout")(n)})}},d=[e,l],t[2]=e,t[3]=s,t[4]=d):(s=t[3],d=t[4]),u(s,d),i}l.default=d}),98);
__d("useMWEBGetUpsellStateQuery.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_eb_restore_upsells_dismissed",storageKey:null}]}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWEBGetUpsellStateQuery",selections:[{kind:"RequiredField",field:e,action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useMWEBGetUpsellStateQuery",selections:[e]},params:{cacheID:"3d6b0766f42bc6a61e179528381b00b4",id:null,metadata:{},name:"useMWEBGetUpsellStateQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useMWEBGetUpsellState",["CometRelay","MWEBUpsellDismissedEnum.facebook","react-compiler-runtime","useMWEBGetUpsellStateQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("react-compiler-runtime").c(5),r,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=e!==void 0?e:e=n("useMWEBGetUpsellStateQuery.graphql"),a={},t[0]=r,t[1]=a):(r=t[0],a=t[1]);var i=o("CometRelay").useClientQuery(r,a),l=i.viewer,s=l.is_eb_restore_upsells_dismissed===o("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.ALL_DISMISSED,u=s||l.is_eb_restore_upsells_dismissed===o("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.UPSELLS_DISMISSED,c;return t[2]!==s||t[3]!==u?(c={isAllRestoreUpsellsDismissed:s,isRestoreUpsellsDismissed:u},t[2]=s,t[3]=u,t[4]=c):c=t[4],c}l.default=s}),98);
__d("useMWEncryptedBackupsListenForChangesToVirtualDevicesV2",["Base64Utils","I64","LSIntEnum","cr:12344","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=c.useEffect,m=c.useMemo,p=c.useState;function _(e){var t=o("react-compiler-runtime").c(20),r;t[0]!==e?(r=e===void 0?{}:e,t[0]=e,t[1]=r):r=t[1];var a=r,i=a.hsmCreationTimeInitialValue,l=a.offlineDevicesCountInitialValue,u=a.vestaClientIDInitialValue,c=n("cr:12344")(),m=c.virtualDevices,_;t[2]!==m?(_=m.filter(y),t[2]=m,t[3]=_):_=t[3];var C=_[0],b;t[4]!==m.length||t[5]!==i||t[6]!==C?(b=m.length===0?i:(C==null?void 0:C.creationTime)!=null?(s||(s=o("I64"))).to_float(C.creationTime):null,t[4]=m.length,t[5]=i,t[6]=C,t[7]=b):b=t[7];var v=b,S;t[8]!==C||t[9]!==u?(S=u!=null?u:C!=null?o("Base64Utils").fromArrayBuffer(C.virtualDeviceId):void 0,t[8]=C,t[9]=u,t[10]=S):S=t[10];var R=S,L;e:{if(l!=null){L=l;break e}var E;t[11]!==m?(E=m.filter(h),t[11]=m,t[12]=E):E=t[12],L=E.length}var k=L,I=p(R),T=I[0],D=I[1],x=p(k),$=x[0],P=x[1],N,M;t[13]!==m?(N=function(){if(m.length!==0){var e=m.filter(g),t=e[0],n=m.filter(f);D(t!=null?o("Base64Utils").fromArrayBuffer(t.virtualDeviceId):void 0),P(n.length)}},M=[m],t[13]=m,t[14]=N,t[15]=M):(N=t[14],M=t[15]),d(N,M);var w;return t[16]!==v||t[17]!==$||t[18]!==T?(w={hsmCreationTime:v,offlineDevicesCount:$,vestaClientID:T},t[16]=v,t[17]=$,t[18]=T,t[19]=w):w=t[19],w}function f(e){return(s||(s=o("I64"))).equal(e.virtualDeviceType,(u||(u=o("LSIntEnum"))).ofNumber(1))}function g(e){return(s||(s=o("I64"))).equal(e.virtualDeviceType,(u||(u=o("LSIntEnum"))).ofNumber(2))}function h(e){return(s||(s=o("I64"))).equal(e.virtualDeviceType,(u||(u=o("LSIntEnum"))).ofNumber(1))}function y(e){return(s||(s=o("I64"))).equal(e.virtualDeviceType,(u||(u=o("LSIntEnum"))).ofNumber(2))}l.default=_}),98);
__d("useMWGetInboxFocusTargetFromRoute",["CometRouteParams","MWInboxFocusTarget","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(2),t=o("CometRouteParams").useRouteParams(),n=t.focus_target;if(n!=null){var a=Number(n),i;if(e[0]!==a){var l;i=(l=r("MWInboxFocusTarget").cast(a))!=null?l:0,e[0]=a,e[1]=i}else i=e[1];return i}return 0}l.default=e}),98);
__d("useMWIsReadReceiptsDisabledForUser",["LSIntEnum","LSReadReceiptSettingState","MWPActor.react","MessengerWebPrivacySettings","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){var t=o("react-compiler-runtime").c(8),n=(s||(s=r("useReStore")))(),a=o("MWPActor.react").useActor(),l;t[0]!==a||t[1]!==n.tables.messaging_privacy_settings?(l=function(){return o("ReQL").fromTableAscending(n.tables.messaging_privacy_settings).getKeyRange(a)},t[0]=a,t[1]=n.tables.messaging_privacy_settings,t[2]=l):l=t[2];var u;t[3]!==a||t[4]!==n?(u=[n,a],t[3]=a,t[4]=n,t[5]=u):u=t[5];var c=o("ReQLSuspense").useFirst(l,u,i.id+":23");if(c==null)return r("MessengerWebPrivacySettings").read_receipts_disabled===r("LSReadReceiptSettingState").DISABLED;var d;t[6]!==c.readReceiptsDisabled?(d=c.readReceiptsDisabled!=null?(e||(e=o("LSIntEnum"))).toNumber(c.readReceiptsDisabled):r("LSReadReceiptSettingState").DEFAULT,t[6]=c.readReceiptsDisabled,t[7]=d):d=t[7];var m=d;return m===r("LSReadReceiptSettingState").DISABLED}l.default=u}),98);
__d("useMWIsReadReceiptsDisabledForThread",["LSIntEnum","LSReadReceiptSettingState","MWLSThread","useMWIsReadReceiptsDisabledForUser"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t=o("MWLSThread").useThread(e,u),n=r("useMWIsReadReceiptsDisabledForUser")();return t!=null&&t!==r("LSReadReceiptSettingState").DEFAULT?t===r("LSReadReceiptSettingState").DISABLED:n}function u(t){return(e||(e=o("LSIntEnum"))).toNumber(t.readReceiptsDisabledV2)}l.default=s}),98);
__d("useZenonHasActiveCall",["CacheStorage","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e="RTC_LS_CALL_SUMMARY_",s="ls_summary";function u(){var t=r("justknobx")._("4056"),n=new(r("CacheStorage"))("localstorage",e),o=n.get(s);if(!o||Object.keys(o).length===0)return!1;var a=Object.values(o)[0];if(!a||Object.keys(a).length===0)return!1;var i=Object.values(a)[0].__t;return!(i<Date.now()-t)}l.default=u}),98);
__d("useMWIsStaleCall",["DateConsts","FBLogger","I64","LSMessagingThreadTypeUtil","justknobx","react-compiler-runtime","useZenonHasActiveCall"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a){var i=o("react-compiler-runtime").c(2),l=r("useZenonHasActiveCall")();if(!n||l)return!1;if(a==null&&n)return r("FBLogger")("messenger_web_calling").info("ongoingCallTimestampMs is null but isOngoingCall is true"),!1;var s=a!=null?(e||(e=o("I64"))).to_float(a)/1e3:0;if(s!==0){var u;i[0]!==t?(u=t!=null&&o("LSMessagingThreadTypeUtil").isOneToOne(t)?r("justknobx")._("4057"):t!=null&&o("LSMessagingThreadTypeUtil").isGroup(t)?r("justknobx")._("4058"):0,i[0]=t,i[1]=u):u=i[1];var c=u,d=o("DateConsts").getCurrentTimeInSeconds(),m=d-s,p=m>c;return p}return!1}l.default=s}),98);
__d("useMWLSMarkThreadAsRead",["FBLogger","I64","LSFactory","LSOptimisticMarkThreadReadV2StoredProcedure","MWThreadKey.react","MessengerWebUXLogger","ReQL","cr:2580","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u||(u=o("react"))).useCallback;function d(t,a){var l,u=o("react-compiler-runtime").c(5),c=(e||(e=r("useReStore")))(),d=(l=o("MWThreadKey.react").useMWThreadKeyMemoized())!=null?l:a;if(d==null)throw r("FBLogger")("messenger_web").mustfixThrow("Tried to get a thread key when there was none");var m=r("MessengerWebUXLogger").useInteractionLogger(),p;return u[0]!==c||u[1]!==t||u[2]!==m||u[3]!==d?(p=function(){m==null||m({eventName:"mark_thread_as_read"}),r("promiseDone")(c.runInTransaction(async function(e){var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(d));if(a!=null){var i=a.lastActivityTimestampMs,l=a.lastReadWatermarkTimestampMs,u=a.threadType;if((s||(s=o("I64"))).gt(i,l)){n("cr:2580")&&t!=null&&n("cr:2580")({threadKey:d,threadType:u},"seen_receipt",t);var c=i;return r("LSOptimisticMarkThreadReadV2StoredProcedure")(r("LSFactory")(e),{readWatermarkTimestampMs:c,threadKey:d})}}},"readwrite",void 0,void 0,i.id+":54"))},u[0]=c,u[1]=t,u[2]=m,u[3]=d,u[4]=p):p=u[4],p}l.default=d}),98);
__d("useOpenThreadAfterJoin",["I64","MWLSThreadDisplayContext","ReQL","promiseDone","react","react-compiler-runtime","useAsyncReStore","useMWChatOpenTabForGroup","useMWNavigation"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useCallback;function c(){var e=o("react-compiler-runtime").c(5),t=r("useMWChatOpenTabForGroup")("jewel"),n=t[0],a=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),i=r("useAsyncReStore")(),l=r("useMWNavigation")(),u;return e[0]!==i||e[1]!==a||e[2]!==l||e[3]!==n?(u=function(t){if(a==="ChatTab"){n(t);return}r("promiseDone")(i,function(e){r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.threads).getKeyRange((s||(s=o("I64"))).of_string(t))),function(e){e!=null&&l.openInbox({clientThreadKey:void 0,threadKey:(s||(s=o("I64"))).of_string(t),threadType:e.threadType},"deepLink")})})},e[0]=i,e[1]=a,e[2]=l,e[3]=n,e[4]=u):u=e[4],u}l.default=c}),98);
__d("usePublicChatShortlinkCallback",["ConstUriUtils","I64","JSResourceForInteraction","LSFactory","LSIntEnum","LSOptimisticFetchPendingGroupInviteStoredProcedure","ReQL","promiseDone","react","react-compiler-runtime","useMWXLazyDialog","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=d.useCallback,p=d.useEffect,_=d.useRef,f=r("JSResourceForInteraction")("MWJoinPublicChatDialog.react").__setRef("usePublicChatShortlinkCallback");function g(e){var t=o("ConstUriUtils").getUri(e);if(t!=null&&t.isSubdomainOfDomain("m.me")){var n,r=t==null||(n=t.getPath())==null?void 0:n.split("/").filter(function(e){return e!==""});return(r==null?void 0:r.length)===2&&r[0]==="j"?r[1]:null}return null}function h(t){var n=o("react-compiler-runtime").c(6),a=t.onSuccess,l=_(!1),c=_(),d=_(),m=(e||(e=r("useReStore")))(),h=r("useMWXLazyDialog")(f),y=h[0],C,b;n[0]===Symbol.for("react.memo_cache_sentinel")?(C=function(){return(function(){c.current==null||c.current(),d.current==null||d.current()})},b=[],n[0]=C,n[1]=b):(C=n[0],b=n[1]),p(C,b);var v;return n[2]!==m||n[3]!==a||n[4]!==y?(v=function(t){var e=g(t);e!=null&&(r("promiseDone")(m.runInTransaction(function(t){return r("LSOptimisticFetchPendingGroupInviteStoredProcedure")(r("LSFactory")(t),{linkHash:e})},"readwrite",void 0,void 0,i.id+":85")),c.current=o("ReQL").fromTableAscending(m.tables.group_invitations_pending).getKeyRange(e).subscribe(function(t,n){if(n.operation!=="delete"){var r=n.value;if(r!=null&&r.isSubscribed&&(r==null?void 0:r.threadId)!=null){a==null||a((s||(s=o("I64"))).to_string(r.threadId));return}else if((r==null?void 0:r.linkJoinType)!=null&&(s||(s=o("I64"))).equal(r==null?void 0:r.linkJoinType,(u||(u=o("LSIntEnum"))).ofNumber(6))&&(r==null?void 0:r.threadId)!=null){a==null||a((s||(s=o("I64"))).to_string(r==null?void 0:r.threadId));return}(r==null?void 0:r.threadTitle.length)>0&&!l.current&&(l.current=!0,y({linkHash:e,onClick:function(){r.needsAdminApprovalForNewParticipant||(d.current=o("ReQL").fromTableAscending(m.tables.threads).subscribe(function(t,n){n.operation!=="delete"&&n.value.threadInviteLink!=null&&g(n.value.threadInviteLink)===e&&(a==null||a((s||(s=o("I64"))).to_string(n.value.threadKey)),d.current==null||d.current())}))}},function(){l.current=!1}),c.current==null||c.current())}}))},n[2]=m,n[3]=a,n[4]=y,n[5]=v):v=n[5],v}l.default=h}),98);/*FB_PKG_DELIM*/
__d("ArmadilloDataTraceCheckPoint",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_string("63"),u=e.of_string("65"),c=e.of_string("98"),d=e.of_string("504"),m=e.of_string("1000"),p=e.of_string("1001"),_=e.of_string("1204"),f=e.of_string("1210"),g=e.of_string("1224"),h=e.of_string("1234"),y=e.of_string("1225"),C=e.of_string("2220");l.traceGroupMessage=s,l.armadilloActMessageSend=u,l.traceCreated=c,l.richMediaMediaSendAttachmentType=d,l.traceTextMessage=m,l.traceMediaMessage=p,l.advancedCryptoMEMSendTaskComplete=_,l.deliveryReceiptReceived=f,l.advancedCryptoMEMEncryptionDeviceCount=g,l.advancedCryptoGroupDualSend=h,l.advancedCryptoDualSend=y,l.armadilloTlcControlOpenThread=C}),98);
__d("LSMessageRenderingType",[],(function(t,n,r,o,a,i){var e=Object.freeze({DEFAULT:0,NON_COLLAPSIBLE_ADMIN_MESSAGE:1,HIDDEN:2,RICH_TEXT_COMMON_MARK:3});i.default=e}),66);
__d("LSMessageSearchType",[],(function(t,n,r,o,a,i){var e=Object.freeze({THREAD:1,MESSAGE:2});i.default=e}),66);
__d("LSMessageUnsendabilityStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({CAN_UNSEND:0,DENY_LOG_MESSAGE:1,DENY_TOMBSTONE_MESSAGE:2,DENY_FOR_NON_SENDER:3,DENY_P2P_PAYMENT:4,DENY_STORY_REACTION:5,DENY_BLOB_ATTACHMENT:6,DENY_MESSAGE_NOT_FOUND:7,DENY_MESSAGE_INSTAGRAM_DIRECT_WRITE_RESTRICTION:8});i.default=e}),66);
__d("LSQuickReplyType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,HORIZONTAL:1,VERTICAL:2});i.default=e}),66);
__d("LSReplyMessageStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,VALID:1,DELETED:2,TEMPORARY_UNAVAILABLE:3,EXPIRED:4});i.default=e}),66);
__d("LSTransportKey",[],(function(t,n,r,o,a,i){var e=Object.freeze({ADVANCED_CRYPTO:"AdvancedCrypto",CARRIER_MESSAGING:"CarrierMessaging",FB_BROKER:"FBBroker",FB_LEGACY_BROKER:"FBLegacyBroker",TAM:"TAM",WHATS_APP:"WhatsApp",INSTAMADILLO:"Instamadillo",ENCRYPTED_BACKUPS:"EncryptedBackups",CLIENT_CONTACTS_PLACEHOLDER:"",ENCRYPTED_BACKUPS_MEDIA:"EncryptedBackupsMedia"});i.default=e}),66);
__d("MAWLocalizationEphemeralSettingSetAdminMsg",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS||e===o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF||e===o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF||e===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF||e===o("MAWLocalizationType").LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET}l.isEphemeralSettingSetAdminMsg=e}),98);
__d("MAWAdminMsgCTA",["fbt","I64","MAWAdminMsgTypesGrouped","MAWLocalizationEphemeralSettingSetAdminMsg","MAWLocalizationType","MAWMsgType","MAWTimeUtils","ReQL"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=new Set([(u=o("MAWLocalizationType")).LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL,u.LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE,u.LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL,u.LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE,u.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS,u.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES,u.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE,u.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES,u.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE,u.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES,u.LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE,u.LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE,u.LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE,u.LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE,u.LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES,u.LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES,u.LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION,u.LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION]),d=new Set([u.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME,u.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME,u.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME,u.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME]),m=s._(/*BTDS*/"Change").toString(),p=s._(/*BTDS*/"See All").toString(),_=s._(/*BTDS*/"Learn more").toString(),f=s._(/*BTDS*/"Learn more").toString(),g=s._(/*BTDS*/"actions you can take.").toString(),h=s._(/*BTDS*/"Go to other chat").toString(),y=s._(/*BTDS*/"View archived chat").toString(),C=s._(/*BTDS*/"View poll").toString(),b=s._(/*BTDS*/"Change").toString();async function v(t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.admin_message_ctas.index("ctaId")));return n!=null?(e||(e=o("I64"))).add(n.ctaId,(e||(e=o("I64"))).one):(e||(e=o("I64"))).zero}function S(e,t,n){var r=[t,n];return o("ReQL").firstAsync(o("ReQL").fromTableDescending(e.admin_message_ctas).bounds({gte:r,lte:r}))}function R(e,t,n){if(e==null)return{showAdChoiceIcon:!1};if(o("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(e))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:m};if(c.has(e))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:t,targetTitle:n,title:C};if(d.has(e))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:b};switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:_};case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:h};case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:y};case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:p};case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:return{actionUrl:"https://www.messenger.com/help/1145318292241859/?helpref=uk_lm",adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:g};case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:return{actionUrl:"https://www.facebook.com/help/messenger-app/2016594885417423?ref=ipl",adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:f};default:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:void 0}}}function L(e){if(e!=null){if(o("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(e))return"admin_msg_armadillo_ephemeral_change_duration";if(c.has(e))return"admin_msg_poll_details";if(d.has(e))return"admin_msg_change_theme";switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE:return"admin_msg_thread_level_cutover";case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION:return"admin_msg_e2ee_thread";case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:return"admin_msg_e2ee_uk_osa";case o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE:return"admin_msg_cutover_rollback";case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:return"admin_msg_dual_thread_cutover";case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:return"admin_msg_view_pin_msgs_v2";case o("MAWLocalizationType").LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE:return"admin_msg_icdc";case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:return"admin_msg_change_thread_limit_sharing_permission"}}}async function E(e,t,n,r,a){await e.admin_message_ctas.add({actionContentBlob:a.actionContentBlob,actionUrl:a.actionUrl,adClientToken:a.adClientToken,adHelpUrl:a.adHelpUrl,adminMessageNicknameParticipantId:a.adminMessageNicknameParticipantId,adPreferenceUrl:a.adPreferenceUrl,ctaId:t,messageId:r.msgId,showAdChoiceIcon:a.showAdChoiceIcon,targetId:a.targetId,targetTitle:a.targetTitle,threadKey:n,timestampMs:o("MAWTimeUtils").toTimestamp(r.ts),title:a.title})}async function k(e,t,n){var r=await Promise.all([S(e,t,n.msgId),v(e)]),o=r[0],a=r[1];if(o!=null)return{ctaId:o.ctaId,ctaType:L(n.adminType),title:o.title};var i=T(n.adminType,n),l=D(n.adminType,n),s=R(n.adminType,i,l);return await E(e,a,t,n,s),{ctaId:a,ctaType:L(n.adminType),title:s.title}}function I(e,t,n){var r=n.adminType;return r!=null&&(o("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(r)||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION||r===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED||r===o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED||r===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED||r===o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED||r!=null&&c.has(r)||r!=null&&d.has(r)||o("MAWAdminMsgTypesGrouped").dualThreadCutoverAdminMsgs.includes(r))?k(e,t,n):Promise.resolve()}function T(t,n){if(t!=null){if(n.type_===o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE)return(e||(e=o("I64"))).of_string(n.externalId);if(c.has(t)&&n.pollStanzaId!=null)return(e||(e=o("I64"))).of_string(n.pollStanzaId)}}function D(e,t){if(e!=null&&c.has(e))return t.adminContent==null||t.adminContent.length===0?void 0:t.adminContent[t.adminContent.length-1]}l.getAdminMsgCTAContentByAdminType=R,l.getCtaTypeByAdminType=L,l.getAdminMsgCtaStep=I}),226);
__d("MAWBridgeBuildAdminMsg",["MAWAdminMsg","MAWAdminMsgNormalized","MAWSubscribeToContactNames","MAWThreadCustomizationUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e==null?void 0:e.replace(/\$/g,"$$$$")}function s(t,n,r){r===void 0&&(r=0);var a=o("MAWAdminMsgNormalized").deconstructContactIdsFromAdminContent(n,t),i=a.contactIds,l=a.contents,s=o("MAWThreadCustomizationUtils").nicknameOnlyForFirstParticipantChecking(n),u=o("MAWThreadCustomizationUtils").skipNicknameCheck(n);if(r===1){var c=o("MAWSubscribeToContactNames").getContactNameModeFromLocalizationType(n);return o("MAWAdminMsg").buildLocalizedString(l.map(e),i.map(function(e,t){return s&&t>0||u?c===o("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME?"$CONTACT_FIRST_NAME("+e+")":"$CONTACT_FULL_NAME("+e+")":c===o("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME?"$PARTICIPANT_FIRST_NAME("+e+")":"$PARTICIPANT_FULL_NAME("+e+")"}),n)}return o("MAWAdminMsg").buildLocalizedString(l,i,n)}l.buildAdminMsgText=s}),98);
__d("MAWBridgeMsgUtils",["LSTransportKey"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=Object.keys(r("LSTransportKey")).find(function(t){return r("LSTransportKey")[t]===e});return t?r("LSTransportKey")[t]:"WhatsApp"}l.convertStringToLSTransportKeyType=e}),98);
__d("MAWReplyBuilder_Forward",["LSIntEnum","LSMessageReplySourceTypeV2"],(function(t,n,r,o,a,i,l){"use strict";var e,s={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){},buildReplySnippet:function(t,n,r){},buildReplySourceId:function(t){},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FORWARD)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FORWARD)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){},buildReplyType:function(t){},buildReplyUserId:function(t){}};l.MAWReplyBuilder_Forward=s}),98);
__d("MAWReplyBuilder_HighlightsTabPostReply",["fbt","EntMessageReplyType","I64","LSIntEnum","LSMessageReplySourceTypeV2"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){return""},buildReplySnippet:function(t,n,r){var e=n===r,o="$PARTICIPANT_FIRST_NAME("+n+")";return e?s._(/*BTDS*/"You replied to their post").toString():s._(/*BTDS*/"{name} replied to your post",[s._param("name",o)]).toString()},buildReplySourceId:function(t){return t.replyToMsgId},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){return t.timestampMs!=null?(u||(u=o("I64"))).of_float(t.timestampMs):void 0},buildReplyType:function(n){return(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(t){return t.replyToUserId!=null?(u||(u=o("I64"))).of_string(t.replyToUserId):void 0}};l.MAWReplyBuilder_HighlightsTabPostReply=c}),226);
__d("MAWReplyBuilder_LightweightStatus",["fbt","EntMessageReplyType","I64","LSIntEnum","LSMessageReplySourceTypeV2"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(n){return n.replyMediaExpirationTimestampMs!=null?(e||(e=o("I64"))).of_float(n.replyMediaExpirationTimestampMs):void 0},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){return t.noteContent},buildReplySnippet:function(t,n,r){var e=n===r,o="$PARTICIPANT_FIRST_NAME("+n+")";return e?s._(/*BTDS*/"You replied to their note").toString():s._(/*BTDS*/"{name} replied to your note",[s._param("name",o)]).toString()},buildReplySourceId:function(t){return t.replyToMsgId},buildReplySourceType:function(){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS)},buildReplySourceTypeV2:function(){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){},buildReplyType:function(t){return(u||(u=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(n){return n.replyToUserId!=null?(e||(e=o("I64"))).of_string(n.replyToUserId):void 0}};l.MAWReplyBuilder_LightweightStatus=c}),226);
__d("MAWBumpMessageMsgReplySnippet",["getMAWLocalizedBumpMsgReplySnippet"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.isAuthorMe,n=e.recipientName,o=e.replySenderIsMe,a=e.replySenderIsRecipient,i=e.senderName,l="participantBumpedParticipantMessage";return t&&o?l="currentUserBumpedOwnMessage":t?l="currentUserBumpedMessage":o?l="participantBumpedCurrentUserMessage":a&&(l="participantBumpedOwnMessage"),r("getMAWLocalizedBumpMsgReplySnippet")(l,i,n)}l.buildBumpMessageReplySnippet=e}),98);
__d("MAWReplyBuilder_Message",["fbt","EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWBumpMessageMsgReplySnippet","MAWImageUtils","MAWMpsGating","MessagingAttachmentType","getErrorSafe"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){return d(t)},buildReplyAttachmentPlaintextHash:function(t){return p(t)},buildReplyAttachmentType:function(t){return y(t)},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){return _(t)},buildReplyMediaPreviewWidth:function(t){return f(t)},buildReplyMessageText:function(t){var e;return(e=t.replyToLSMessage)==null?void 0:e.text},buildReplySnippet:function(t,n,r){return C(t,n,r)},buildReplySourceId:function(t){return t.replyToMsgId},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)},buildReplyStatus:function(t){return b(t)},buildReplyTimestampMs:function(t){var e;return(e=t.replyToLSMessage)==null?void 0:e.timestampMs},buildReplyType:function(n){return n.isBumpMsg?(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP):(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(t){var e;return(e=t.replyToLSMessage)==null?void 0:e.senderId}};function d(t){var n=t.replyToLSAttachment;if(n!=null&&(n.attachmentType===(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA)||n.attachmentType===(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER)&&n.receiverFetchId!=null)){var a=n.attachmentFbid;try{return(u||(u=o("I64"))).of_string(a)}catch(e){var i=r("getErrorSafe")(e);r("FBLogger")("messenger_e2ee_web").mustfix("[MAWMsgReply] getReplyAttachmentIdFromReplyContent: Error converting attachmentFbid, %s, to a big int for msg, %s. Attachment of type, %s, is likely using plaintexthash as id, please review types requiring attachment id: %s",a,n.messageId,(u||(u=o("I64"))).to_string(n.attachmentType),i.message)}}}var m=new Set([(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER),e.ofNumber(r("MessagingAttachmentType").IMAGE),e.ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE),e.ofNumber(r("MessagingAttachmentType").VIDEO),e.ofNumber(r("MessagingAttachmentType").AUDIO),e.ofNumber(r("MessagingAttachmentType").FILE)]);function p(e){var t=e.replyToLSAttachment;if(t!=null&&m.has(t.attachmentType))return t.attachmentFbid}function _(t){var n=t.replyToLSAttachment;if(n!=null)return n.attachmentType===(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER)?g(t).replyHeight:n.previewHeight}function f(t){var n=t.replyToLSAttachment;if(n!=null)return n.attachmentType===(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER)?g(t).replyWidth:n.previewWidth}function g(e){var t,n=(t=e.replyToLSAttachment)!=null?t:{},r=n.previewHeight,a=n.previewWidth;if(r==null||a==null)return{replyHeight:void 0,replyWidth:void 0};var i=o("MAWImageUtils").boundHeightWidth((u||(u=o("I64"))).to_int32(r),u.to_int32(a),96*.8),l=i.height,s=i.width;return{replyHeight:u.of_int32(l),replyWidth:u.of_int32(s)}}function h(e){var t,n=(t=e.replyToLSMessage)==null?void 0:t.text;return n!=null&&n!==""}function y(t){var n=t.replyToLSAttachment;if(n!=null)switch(n.attachmentType){case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").GIF);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").VIDEO);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").OTHER);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").OTHER);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA):return h(t)?void 0:(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").XMA);case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_IMAGE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_VIDEO):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").EPHEMERAL_RAVEN_MESSAGE);default:}}function C(e,t,n){var r=e.replyToLSMessage;if(!(r==null&&!o("MAWMpsGating").isMpsMessageRendering())){var a=t===n,i="$PARTICIPANT_FIRST_NAME("+t+")";if(r==null||r.isUnsent===!0)return a?s._(/*BTDS*/"You replied to a removed message").toString():s._(/*BTDS*/"{name} replied to a removed message",[s._param("name",i)]).toString();var l=r.senderId,c=(u||(u=o("I64"))).to_string(l)===n,d=t===u.to_string(l),m="$PARTICIPANT_FIRST_NAME("+u.to_string(l)+")";if(e.isBumpMsg){var p=o("MAWBumpMessageMsgReplySnippet").buildBumpMessageReplySnippet({isAuthorMe:a,recipientName:m,replySenderIsMe:c,replySenderIsRecipient:d,senderName:i});return p==null?void 0:p.toString()}return a&&c?s._(/*BTDS*/"You replied to yourself").toString():d?s._(/*BTDS*/"{other} replied to themself",[s._param("other",i)]).toString():a?s._(/*BTDS*/"You replied to {other_name}",[s._param("other_name",m)]).toString():c?s._(/*BTDS*/"{other_name} replied to you",[s._param("other_name",i)]).toString():s._(/*BTDS*/"{other} replied to {other_name}",[s._param("other",i),s._param("other_name",m)]).toString()}}function b(t){var n=t.replyToLSMessage;if(n==null)return o("MAWMpsGating").isMpsMessageRendering()?(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").DELETED):void 0;var a=t.replyToLSAttachment;if(n.isUnsent===!0)return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").DELETED);if(n.isExpired===!0)return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").EXPIRED);if(n.isAdminMessage===!0)return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").VALID);switch(n.displayedContentTypes){case(e||(e=o("LSIntEnum"))).ofNumber(256):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").DELETED);case(e||(e=o("LSIntEnum"))).ofNumber(1):case(e||(e=o("LSIntEnum"))).ofNumber(4):case(e||(e=o("LSIntEnum"))).ofNumber(32):case(e||(e=o("LSIntEnum"))).ofNumber(64):case(e||(e=o("LSIntEnum"))).ofNumber(1024):case(e||(e=o("LSIntEnum"))).ofNumber(536870912):case(e||(e=o("LSIntEnum"))).ofNumber(4096):case(e||(e=o("LSIntEnum"))).ofNumber(16384):case(e||(e=o("LSIntEnum"))).ofNumber(134217728):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").VALID);case(e||(e=o("LSIntEnum"))).ofNumber(2):{if(a!=null)switch(a.attachmentType){case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_IMAGE):case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_VIDEO):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").VALID)}return}case(e||(e=o("LSIntEnum"))).ofNumber(65536):case(e||(e=o("LSIntEnum"))).ofNumber(131072):case(e||(e=o("LSIntEnum"))).ofNumber(262144):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").TEMPORARY_UNAVAILABLE);case(e||(e=o("LSIntEnum"))).ofNumber(32768):return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").UNKNOWN);default:return}}l.MAWReplyBuilder_Message=c}),226);
__d("MAWReplyBuilder_PostMention",["EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","MAWPostMentionXMASnippetFbt"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){return""},buildReplySnippet:function(t,n,a){var e=t.mentionedUserId;if(e==null){r("FBLogger")("messenger_e2ee_web").mustfix("Error building reply snippet without recipient ID");return}var i="$PARTICIPANT_FIRST_NAME("+e+")",l=n===a,s=l?o("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(i):o("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(i);return s.toString()},buildReplySourceId:function(t){},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_POST_MENTION)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){return t.timestampMs!=null?(s||(s=o("I64"))).of_float(t.timestampMs):void 0},buildReplyType:function(n){return(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(t){return t.mentionedUserId!=null?(s||(s=o("I64"))).of_string(t.mentionedUserId):void 0}};l.MAWReplyBuilder_PostMention=u}),98);
__d("MAWReplyBuilder_ProducerStoryReply",["fbt","EntMessageReplyType","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWMsgType"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(n){return n.storyMediaId!=null?(e||(e=o("I64"))).of_float(n.storyMediaId):void 0},buildReplyAttachmentPlaintextHash:function(t){var e;return(e=t.storyMediaPlaintextHash)!=null?e:void 0},buildReplyAttachmentType:function(t){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO)},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){},buildReplySnippet:function(t,n,r){var e=n===r,o="$PARTICIPANT_FIRST_NAME("+n+")";return e?s._(/*BTDS*/"You replied to your story").toString():s._(/*BTDS*/"{name} replied to their story",[s._param("name",o)]).toString()},buildReplySourceId:function(t){return t.storyUrl},buildReplySourceType:function(){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY)},buildReplySourceTypeV2:function(){return(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_PRODUCER_STORY_REPLY)},buildReplyStatus:function(t){return t.storyMsgType===o("MAWMsgType").MSG_TYPE.IMAGE?(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageStatus").VALID):void 0},buildReplyTimestampMs:function(n){return n.timestampMs!=null?(e||(e=o("I64"))).of_float(n.timestampMs):void 0},buildReplyType:function(t){return(u||(u=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(n){return(e||(e=o("I64"))).of_string(n.storyOwnerId)}};l.MAWReplyBuilder_ProducerStoryReply=c}),226);
__d("MAWReplyBuilder_Story",["fbt","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){var e;return(e=t.storyMediaPlaintextHash)!=null?e:void 0},buildReplyAttachmentType:function(n){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO)},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){},buildReplySnippet:function(t,n,r){var e=t.storyOwnerId===r,o=n===r,a="$PARTICIPANT_FIRST_NAME("+n+")",i="$PARTICIPANT_FIRST_NAME("+t.storyOwnerId+")";return e?o?s._(/*BTDS*/"You replied to your story").toString():s._(/*BTDS*/"{name} replied to your story",[s._param("name",a)]).toString():o?s._(/*BTDS*/"You replied to {name}'s story",[s._param("name",i)]).toString():void 0},buildReplySourceId:function(t){return t.storyUrl},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){return t.timestampMs!=null?(u||(u=o("I64"))).of_float(t.timestampMs):void 0},buildReplyType:function(t){},buildReplyUserId:function(t){return(u||(u=o("I64"))).of_string(t.storyOwnerId)}};l.MAWReplyBuilder_StoryReply=c}),226);
__d("MAWReplyBuilder_StoryMention",["fbt","EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c={buildReplyAttachmentId:function(t){},buildReplyAttachmentPlaintextHash:function(t){},buildReplyAttachmentType:function(t){},buildReplyMediaExpirationTimestampMs:function(t){},buildReplyMediaPreviewHeight:function(t){},buildReplyMediaPreviewWidth:function(t){},buildReplyMessageText:function(t){},buildReplySnippet:function(t,n,o){var e=t.mentionedUserId;if(e==null){r("FBLogger")("messenger_e2ee_web").mustfix("Error building reply snippet without recipient ID");return}var a="$PARTICIPANT_FIRST_NAME("+e+")",i=n===o;return i?s._(/*BTDS*/"You mentioned {name} in your story",[s._param("name",a)]).toString():s._(/*BTDS*/"Mentioned you in their story").toString()},buildReplySourceId:function(t){},buildReplySourceType:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)},buildReplySourceTypeV2:function(){return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_STORY_MENTION)},buildReplyStatus:function(t){},buildReplyTimestampMs:function(t){return t.timestampMs!=null?(u||(u=o("I64"))).of_float(t.timestampMs):void 0},buildReplyType:function(n){return(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR)},buildReplyUserId:function(t){return t.mentionedUserId!=null?(u||(u=o("I64"))).of_string(t.mentionedUserId):void 0}};l.MAWReplyBuilder_StoryMention=c}),226);
__d("MAWReplyBuilder",["MAWReplyBuilder_Forward","MAWReplyBuilder_HighlightsTabPostReply","MAWReplyBuilder_LightweightStatus","MAWReplyBuilder_Message","MAWReplyBuilder_PostMention","MAWReplyBuilder_ProducerStoryReply","MAWReplyBuilder_Story","MAWReplyBuilder_StoryMention"],(function(t,n,r,o,a,i,l){"use strict";var e={FB_POST_MENTION:o("MAWReplyBuilder_PostMention").MAWReplyBuilder_PostMention,FB_PRODUCER_STORY_REPLY:o("MAWReplyBuilder_ProducerStoryReply").MAWReplyBuilder_ProducerStoryReply,FB_STORY_MENTION:o("MAWReplyBuilder_StoryMention").MAWReplyBuilder_StoryMention,FORWARD:o("MAWReplyBuilder_Forward").MAWReplyBuilder_Forward,HIGHLIGHTS_TAB_POST_REPLY:o("MAWReplyBuilder_HighlightsTabPostReply").MAWReplyBuilder_HighlightsTabPostReply,LIGHTWEIGHT_STATUS:o("MAWReplyBuilder_LightweightStatus").MAWReplyBuilder_LightweightStatus,MESSAGE:o("MAWReplyBuilder_Message").MAWReplyBuilder_Message,STORY:o("MAWReplyBuilder_Story").MAWReplyBuilder_StoryReply};function s(t){return e[t]}function u(e){var t=s(e.replyType);return t.buildReplyUserId(e)}l.getReplyBuilder=s,l.getReplyUserIdNew=u}),98);
__d("MAWMsgReply",["EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","MAWMsg","MAWMsgType","MAWReplyBuilder","MsgrWebGating","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){return e.replySourceId!=null}function c(e,t,n,a,i){o("MsgrWebGating").isQuotedMessagesInLsEnabled()&&n!=null&&n!==(t!=null?t:"")&&r("FBLogger")("messenger_e2ee_web").warn("[MAWMsgReply][%s][%s] LS derived reply field generated does not match the legacy derived version for msg, %s. Expected: %s, Actual: %s",i,e,a,t,n)}function d(t){var n=m(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyUserId(r);return c("getReplyUserId",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function m(t){var n=t.replyToUserId;return n==null?void 0:(e||(e=o("I64"))).of_string(n)}function p(t){var n=_(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplySourceTypeV2();return c("getReplySourceTypeV2",n!=null?(e||(e=o("I64"))).to_string(n):void 0,(e||(e=o("I64"))).to_string(a),t.msgId,t.type_),a}}function _(e){var t=e.isFBPostMention,n=e.isFBStoryMention,a=e.isForwarded,i=e.isMsgHighlightsTabFriendUpdatesReply,l=e.isNoteReply,c=e.isStoryProducerReply,d=e.isStoryReply,m=e.isStoryShare,p=e.replyMediaExpirationTimestampMs,_=u(e);if(t===!0)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_POST_MENTION);if(a)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FORWARD);if(m!=null&&m)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_STORY_SHARE);if(n!=null&&n)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_STORY_MENTION);if(i!=null&&i)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY);if(p!=null&&p<o("WATimeUtils").unixTime()&&l!==!0)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").EXPIRED_STORY);if(_)return d!=null&&d?c!=null&&c?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_PRODUCER_STORY_REPLY):(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY):l===!0?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS):(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)}function f(t){var n=g(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplySourceType();return c("getReplySourceType",n!=null?(e||(e=o("I64"))).to_string(n):void 0,(e||(e=o("I64"))).to_string(a),t.msgId,t.type_),a}}function g(e){var t=u(e),n=e.isMsgHighlightsTabFriendUpdatesReply,a=e.isNoteReply,i=e.isStoryReply,l=e.isStoryShare;if(l!=null&&l)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").FB_STORY_SHARE);if(n!=null&&n)return(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY);if(t)return i!=null&&i?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").STORY):a===!0?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS):(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)}function h(e){var t=y(e);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return t;var n=e.replyContent;if(n!=null){var r=o("MAWReplyBuilder").getReplyBuilder(n.replyType).buildReplySourceId(n);return n.replyType!=="FB_STORY_MENTION"&&n.replyType!=="FB_POST_MENTION"&&c("getReplySourceId",t,r,e.msgId,e.type_),r}}function y(e){if(e.replySourceId!=null)return e.replySourceId}function C(t){var n=b(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyTimestampMs(r);return c("getReplyTimestampMs",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function b(t){if(t.replySourceTimestampMs!=null)return(e||(e=o("I64"))).of_float(t.replySourceTimestampMs)}function v(e){var t=S(e);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return t;var n=e.replyContent;if(n!=null){var r=o("MAWReplyBuilder").getReplyBuilder(n.replyType).buildReplyMessageText(n);return c("getReplyMessageText",t,r,e.msgId,e.type_),r}}function S(e){if(e.replySourceId!=null)return e.replyMessageText}function R(e){if(e.replySourceId!=null)return e.replyMentionedJids}function L(t){var n=E(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyType(r);return c("getReplyType",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function E(e){return e.type_===o("MAWMsg").bumpExistingMessage?(s||(s=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP):u(e)?(s||(s=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").REGULAR):void 0}function k(e){return e.replySourceId==null?!1:I(e.replyStatusType)}function I(e){switch(e){case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.XMA:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!0;default:return!1}}function T(e){return e.replyStatusType==="XMA"&&e.replyMessageText!=null}function D(t){var n=x(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyMediaPreviewHeight(r);return c("getReplyMediaPreviewHeight",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function x(t){if(k(t))return t.replyMediaPreviewHeight!=null?(e||(e=o("I64"))).of_int32(t.replyMediaPreviewHeight):void 0}function $(t){var n=P(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyMediaPreviewWidth(r);return c("getReplyMediaPreviewWidth",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function P(t){if(k(t))return t.replyMediaPreviewWidth!=null?(e||(e=o("I64"))).of_int32(t.replyMediaPreviewWidth):void 0}function N(t){var n=M(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyAttachmentType(r);return c("getReplyAttachmentType",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function M(e){var t=e.replyStatusType;if(t!=null){var n=t==="Raven",a=k(e)||n;if(a)switch(t){case"Gif":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").GIF);case"Ptt":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").OTHER);case"Sticker":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER);case"Video":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").VIDEO);case"Image":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO);case"XMA":return e.isIGXMAPostShare===!0||e.isIGXMAStoryShare===!0||e.isStoryHighlightShare===!0||e.isPostPrivateReply===!0||e.isMsgHighlightsTabFriendUpdatesReply===!0?(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").FEED_POST):T(e)?void 0:(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").XMA);case"DocumentFile":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").OTHER);case"ReceiverFetch":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER);case"Raven":return(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").EPHEMERAL_RAVEN_MESSAGE);default:}}}function w(t){var n=A(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyAttachmentId(r);return c("getReplyAttachmentId",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function A(t){var n=t.replyMediaId,r=t.replyXMAId;if(k(t)&&n!=null)return r!=null?void 0:(e||(e=o("I64"))).of_float(n);if(!(n!=null||r==null)&&!(r!=null&&T(t)))return(e||(e=o("I64"))).of_int32(r)}function F(e){var t=O(e);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return t;var n=e.replyContent;if(n!=null){var r=o("MAWReplyBuilder").getReplyBuilder(n.replyType).buildReplyAttachmentPlaintextHash(n);return c("getReplyAttachmentPlaintextHash",t,r,e.msgId,e.type_),r}}function O(e){var t=e.replyPlaintextHash;if(k(e)&&t!=null)return""+t}function B(t){var n=W(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyMediaExpirationTimestampMs(r);return c("getReplyMediaExpirationTimestampMs",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function W(t){var n=t.isNoteReply,r=t.isStoryReply,a=t.replyMediaExpirationTimestampMs,i=t.replyMessageText,l=t.replyStatusType;if(n===!0)return a!=null?(e||(e=o("I64"))).of_float(a):void 0;var s=N(t),u=w(t);if(l!=null&&l==="XMA"&&s==null){if(u!=null)return;if(i==null)return(e||(e=o("I64"))).zero}if(!(u!=null||!(r!=null&&r)))return(e||(e=o("I64"))).zero}l.assertIfQuotedV2=c,l.getReplyUserId=d,l.getReplySourceTypeV2=p,l.getReplySourceType=f,l.getReplySourceId=h,l.getReplyTimestampMs=C,l.getReplyMessageText=v,l.getReplyMentionedJids=R,l.getReplyType=L,l.getReplyMediaPreviewHeight=D,l.getReplyMediaPreviewWidth=$,l.getReplyAttachmentType=N,l.getReplyAttachmentTypeLegacy=M,l.getReplyAttachmentId=w,l.getReplyAttachmentPlaintextHash=F,l.getReplyMediaExpirationTimestampMs=B}),98);
__d("MAWMsgReplyStatus",["I64","LSIntEnum","LSReplyMessageStatus","MAWMsgReply","MAWMsgType","MAWReplyBuilder","MsgrWebGating"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){switch(e){case o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case o("MAWMsgType").MSG_TYPE.REVOKED:return r("LSReplyMessageStatus").DELETED;case o("MAWMsgType").MSG_TYPE.TEXT:case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.XMA:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return r("LSReplyMessageStatus").VALID;case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:return r("LSReplyMessageStatus").TEMPORARY_UNAVAILABLE;case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return r("LSReplyMessageStatus").UNKNOWN;case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return r("LSReplyMessageStatus").EXPIRED;default:return}}function c(t){var n=d(t);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var r=t.replyContent;if(r!=null){var a=o("MAWReplyBuilder").getReplyBuilder(r.replyType).buildReplyStatus(r);return o("MAWMsgReply").assertIfQuotedV2("getLSReplyMessageStatus",n!=null?(e||(e=o("I64"))).to_string(n):void 0,a!=null?(e||(e=o("I64"))).to_string(a):void 0,t.msgId,t.type_),a}}function d(e){var t=u(e.replyStatusType);if(t!=null)return(s||(s=o("LSIntEnum"))).ofNumber(t)}l.getReplyMessageStatus=u,l.getLSReplyMessageStatus=c}),98);
__d("MAWMsgReplySnippet",["fbt","FBLogger","I64","LSIntEnum","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWBumpMessageMsgReplySnippet","MAWCurrentUser","MAWMpsGating","MAWMsgReply","MAWMsgReplyStatus","MAWMsgType","MAWPostMentionXMASnippetFbt","MAWReplyBuilder","MsgrWebGating","ODS"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c;function d(t){var n=t.isAuthorMe,a=t.isBumpMsg,i=a===void 0?!1:a,l=t.isDeletedMsg,c=t.isFBPostMention,d=c===void 0?!1:c,m=t.isFBStoryMention,p=m===void 0?!1:m,_=t.isIGStoryMention,f=_===void 0?!1:_,g=t.isIGXMAStoryShare,h=g===void 0?!1:g,y=t.isMsgHighlightsTabFriendUpdatesReply,C=y===void 0?!1:y,b=t.isNoteReply,v=b===void 0?!1:b,S=t.isPostPrivateReply,R=S===void 0?!1:S,L=t.isStoryHighlightShare,E=L===void 0?!1:L,k=t.isStoryProducerReply,I=t.isStoryReaction,T=I===void 0?!1:I,D=t.isStoryReply,x=D===void 0?!1:D,$=t.isStoryShare,P=$===void 0?!1:$,N=t.recipientName,M=t.replyAttachmentType,w=t.replySenderIsMe,A=w===void 0?!1:w,F=t.replySenderIsRecipient,O=F===void 0?!1:F,B=t.senderName;switch(!0){case d:return n?o("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(N):o("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(B);case i:return o("MAWBumpMessageMsgReplySnippet").buildBumpMessageReplySnippet({isAuthorMe:n,recipientName:N,replySenderIsMe:A,replySenderIsRecipient:O,senderName:B});case E:return s._(/*BTDS*/"Sent a story highlight");case(h&&M!=null&&(e||(e=o("I64"))).equal(M,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").FEED_POST))):return s._(/*BTDS*/"Sent a story");case(n&&l):return s._(/*BTDS*/"You replied to a removed message");case(n&&P):return s._(/*BTDS*/"You shared a story");case(n&&T):return s._(/*BTDS*/"You reacted to their story");case(n&&f):return N!=null?s._(/*BTDS*/"You mentioned \u0040{name} in your story",[s._param("name",N)]):s._(/*BTDS*/"You mentioned a participant in your story");case(n&&p):return N!=null?s._(/*BTDS*/"You mentioned {name} in your story",[s._param("name",N)]):s._(/*BTDS*/"You mentioned a participant in your story");case f:case p:return s._(/*BTDS*/"Mentioned you in their story");case(!n&&C):return s._(/*BTDS*/"{name} replied to your post",[s._param("name",B)]);case(n&&C):return s._(/*BTDS*/"You replied to their post");case(n&&R):return N!=null?s._(/*BTDS*/"You replied to {name}'s post",[s._param("name",N)]):s._(/*BTDS*/"You replied to a participant's post");case R:return s._(/*BTDS*/"{name} replied to your post",[s._param("name",B)]);case(!n&&v):return s._(/*BTDS*/"{name} replied to your note",[s._param("name",B)]);case(n&&v):return s._(/*BTDS*/"You replied to their note");case(n&&A):return s._(/*BTDS*/"You replied to yourself");case(n&&x):return k===!0?s._(/*BTDS*/"You replied to your story"):N!=null?s._(/*BTDS*/"You replied to {name}'s story",[s._param("name",N)]):s._(/*BTDS*/"You replied to a participant's story");case n:return N!=null?s._(/*BTDS*/"You replied to {other_name}",[s._param("other_name",N)]):s._(/*BTDS*/"You replied to a participant");case l:return s._(/*BTDS*/"{name} replied to a removed message",[s._param("name",B)]);case P:return s._(/*BTDS*/"{user} shared a story",[s._param("user",B)]);case T:return s._(/*BTDS*/"Reacted to your story");case O:return s._(/*BTDS*/"{other} replied to themself",[s._param("other",B)]);case(A&&x):return k===!0?s._(/*BTDS*/"{name} replied to their story",[s._param("name",B)]):s._(/*BTDS*/"{name} replied to your story",[s._param("name",B)]);case A:return s._(/*BTDS*/"{other_name} replied to you",[s._param("other_name",B)]);default:return N!=null?s._(/*BTDS*/"{other} replied to {other_name}",[s._param("other",B),s._param("other_name",N)]):s._(/*BTDS*/"{other} replied to participant",[s._param("other",B)])}}function m(t,n,r,a,i){if(a===void 0&&(a=!1),(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(25))){var l=t?o("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(r):o("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(i);return l==null?void 0:l.toString()}if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(22)))return t?r!=null?s._(/*BTDS*/"You mentioned {name} in your story",[s._param("name",r)]).toString():s._(/*BTDS*/"You mentioned a participant in your story").toString():s._(/*BTDS*/"Mentioned you in their story").toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(14)))return t?s._(/*BTDS*/"You replied to their post").toString():s._(/*BTDS*/"{name} replied to your post",[s._param("name",i)]).toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(13)))return t?r!=null?s._(/*BTDS*/"You replied to {name}'s post",[s._param("name",r)]).toString():s._(/*BTDS*/"You replied to a participant's post").toString():s._(/*BTDS*/"{name} replied to your post",[s._param("name",i)]).toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(18)))return t?s._(/*BTDS*/"You replied to their note").toString():s._(/*BTDS*/"{name} replied to your note",[s._param("name",i)]).toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(2))||(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(24))){var c=(e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(24));if(t)return c?s._(/*BTDS*/"You replied to your story").toString():r!=null?s._(/*BTDS*/"You replied to {name}'s story",[s._param("name",r)]).toString():s._(/*BTDS*/"You replied to a participant's story").toString();if(a)return c?s._(/*BTDS*/"{name} replied to their story",[s._param("name",i)]).toString():s._(/*BTDS*/"{name} replied to your story",[s._param("name",i)]).toString()}if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(12)))return t?s._(/*BTDS*/"You reacted to their story").toString():s._(/*BTDS*/"Reacted to your story").toString();if((e||(e=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(4)))return t?s._(/*BTDS*/"You shared a story").toString():s._(/*BTDS*/"{user} shared a story",[s._param("user",i)]).toString()}function p(t,n,a,i){var l=t.senderId,s=(e||(e=o("I64"))).to_string(t.senderId)===a,u=n===a;if(l==null||n==null)throw r("FBLogger")("messenger_e2ee_web").mustfix("Error getting reply snippet without replyToUserId or / and replying message sender");var c="$PARTICIPANT_FIRST_NAME("+e.to_string(l)+")",d="$PARTICIPANT_FIRST_NAME("+n+")",p=m(u,i,c,s,d);return p==null?void 0:p.toString()}function _(e){var t=f(e);if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return t;var n=e.replyContent,r=e.sender;if(n!=null){var a=o("MAWReplyBuilder").getReplyBuilder(n.replyType).buildReplySnippet(n,r,o("MAWCurrentUser").getID());return o("MAWMsgReply").assertIfQuotedV2("getReplySnippet",t,a,e.msgId,e.type_),a}}function f(e){var t;if(!o("MAWMpsGating").isMpsMessageRendering()){var n=e.isAuthorMe,a=e.isFBPostMention,i=a===void 0?!1:a,l=e.isFBStoryMention,s=l===void 0?!1:l,u=e.isIGStoryMention,m=u===void 0?!1:u,p=e.isIGXMAStoryShare,_=e.isMsgHighlightsTabFriendUpdatesReply,f=_===void 0?!1:_,g=e.isNoteReply,h=g===void 0?!1:g,y=e.isPostPrivateReply,C=y===void 0?!1:y,b=e.isStoryHighlightShare,v=b===void 0?!1:b,S=e.isStoryProducerReply,R=e.isStoryReaction,L=e.isStoryReply,E=e.isStoryShare,k=E===void 0?!1:E,I=e.replySenderIsMe,T=e.replySourceId,D=e.replyStatusType,x=e.replyToUserId,$=e.sender,P=e.type_,N=P===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE;if(!(T==null&&!L&&!k&&!m&&!s&&!v&&!h&&!i)){if(x==null||$==null)throw r("FBLogger")("messenger_web").mustfixThrow("Error getting reply snippet without replyToUserId or sender");return(c||(c=o("ODS"))).bumpEntityKey(3185,"armadillo_reply","creating_reply_snippet"),(t=d({isAuthorMe:n,isBumpMsg:N,isDeletedMsg:o("MAWMsgReplyStatus").getReplyMessageStatus(D)===r("LSReplyMessageStatus").DELETED,isFBPostMention:i,isFBStoryMention:s,isIGStoryMention:m,isIGXMAStoryShare:p,isMsgHighlightsTabFriendUpdatesReply:f,isNoteReply:h,isPostPrivateReply:C,isStoryHighlightShare:v,isStoryProducerReply:S,isStoryReaction:R,isStoryReply:L,isStoryShare:k,recipientName:"$PARTICIPANT_FIRST_NAME("+x+")",replySenderIsMe:I,replySenderIsRecipient:$===x,senderName:"$PARTICIPANT_FIRST_NAME("+$+")"}))==null?void 0:t.toString()}}}l.buildLocalizedReplySnippetLegacy=d,l.getReplySnippetFromLSMessage=p,l.getReplySnippet=_}),226);
__d("MAWBridgeBuildMsg",["fbt","I64","LSAuthorityLevel","LSIntEnum","LSMessageUnsendabilityStatus","MAWAckLevel","MAWBridgeBuildAdminMsg","MAWBridgeBuildMsgMentions","MAWBridgeMsg","MAWBridgeMsgUtils","MAWJids","MAWMsg","MAWMsgReply","MAWMsgReplySnippet","MAWMsgReplyStatus","MAWMsgType","MAWTimeUtils","MAWVault","MWPBumpEntityKey","isMWBumpMessage"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u;function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).reduce(function(e,t){return[].concat(e,t)},[])}function d(e){return e!=null?o("MAWVault").unvault(e):void 0}function m(e){return e!=null?o("MAWVault").vault(e):void 0}function p(e){return babelHelpers.extends({},e,{replyMessageText:m(e.replyMessageText),text:m(e.text)})}function _(e){var t=o("MAWMsgReply").getReplyMessageText(e),n=e.adminContent,r=e.adminType,a=e.adminVersion,i=e.content,l=e.isAdminMessage,u=i;l&&n!=null&&r!=null&&(u=o("MAWBridgeBuildAdminMsg").buildAdminMsgText(n,r,a));var _=o("MAWMsgReplySnippet").getReplySnippet(e);e.type_===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE&&(u=m(e.replySourceId==null?"":_!=null?_:s._(/*BTDS*/"Bumped a message").toString()));var f=c(e.mentionedJids,o("MAWMsgReply").getReplyMentionedJids(e)),g=e.commands?e.commands:[];return f.length>0||g.length>0?p(o("MAWBridgeBuildMsgMentions").buildMsgTextWithMentions(d(u),f,d(t),g.length>0?g:void 0)):{replyMessageText:t,text:u}}function f(t){var n=t.ephemeralDurationInSec;return n!=null?(e||(e=o("I64"))).of_int32(n):void 0}function g(e,t,n,a){var i,l=r("isMWBumpMessage")(t==null?void 0:t.replyType)?t==null?void 0:t.replyMessageText:t==null?void 0:t.text,s=c(n,t==null||(i=t.mentionIds)==null?void 0:i.split(",").map(o("MAWJids").toUserJid)),u=a!=null?a:[];return s.length>0||u.length>0?p(o("MAWBridgeBuildMsgMentions").buildMsgTextWithMentions(d(e),s,d(l),u)):{replyMessageText:l,text:e}}function h(t,n){var a,i,l,s,c=_(t),d=t.type_===o("MAWMsg").unsent,m=o("MAWTimeUtils").toTimestamp(d&&(a=t.originalTs)!=null?a:t.ts);if(o("MAWMsgReply").getReplyAttachmentId(t)!=null&&o("MAWMsgReply").getReplyAttachmentPlaintextHash(t)==null){var p;o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","new_message_handler_for_reply_type_"+(e||(e=o("I64"))).to_float((p=o("MAWMsgReply").getReplyAttachmentType(t))!=null?p:(e||(e=o("I64"))).zero))}var g=o("MAWBridgeMsgUtils").convertStringToLSTransportKeyType(t.transportKey);return babelHelpers.extends({},c,{adminMsgCtaId:n==null?void 0:n.ctaId,adminMsgCtaTitle:n==null?void 0:n.title,adminMsgCtaType:n==null?void 0:n.ctaType,authorityLevel:(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),cannotUnsendReason:d||!t.isAuthorMe?(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageUnsendabilityStatus").DENY_FOR_NON_SENDER):void 0,collapsibleId:t.collapsibleId!=null?(e||(e=o("I64"))).of_float(t.collapsibleId):void 0,displayedContentTypes:o("MAWMsg").getDisplayedContentTypes(t.type_,t.isForwarded,t.isExpiredXmaMsg,t.replySourceId!=null,t.unsupportedType,t.xmaMessageType,t.gifPlayback),editCount:(e||(e=o("I64"))).of_int32((i=t.editCount)!=null?i:0),ephemeralDurationInSec:f(t),groupId:(l=t.groupId)!=null?l:void 0,groupIndex:t.groupIndex!=null?(e||(e=o("I64"))).of_float(t.groupIndex):void 0,groupSize:t.groupSize!=null?(e||(e=o("I64"))).of_float(t.groupSize):void 0,hotEmojiSize:o("MAWBridgeMsg").getSpecialTextSize(t),isCollapsed:(s=t.isCollapsed)!=null?s:!1,isUnsent:d,messageId:t.msgId,primarySortKey:e.of_float(t.sortOrderMs),replyAttachmentId:o("MAWMsgReply").getReplyAttachmentId(t),replyAttachmentPlaintextHash:o("MAWMsgReply").getReplyAttachmentPlaintextHash(t),replyAttachmentType:o("MAWMsgReply").getReplyAttachmentType(t),replyMediaExpirationTimestampMs:o("MAWMsgReply").getReplyMediaExpirationTimestampMs(t),replyMediaPreviewHeight:o("MAWMsgReply").getReplyMediaPreviewHeight(t),replyMediaPreviewWidth:o("MAWMsgReply").getReplyMediaPreviewWidth(t),replySnippet:o("MAWMsgReplySnippet").getReplySnippet(t),replySourceId:o("MAWMsgReply").getReplySourceId(t),replySourceTimestampMs:o("MAWMsgReply").getReplyTimestampMs(t),replySourceType:o("MAWMsgReply").getReplySourceType(t),replySourceTypeV2:o("MAWMsgReply").getReplySourceTypeV2(t),replyStatus:o("MAWMsgReplyStatus").getLSReplyMessageStatus(t),replyToUserId:o("MAWMsgReply").getReplyUserId(t),replyType:o("MAWMsgReply").getReplyType(t),sendStatus:o("MAWAckLevel").levelToMessagingSendStatus(t.ack),sendStatusV2:o("MAWAckLevel").levelToMessagingSendStatusV2(t.ack),timestampMs:m,transportKey:g,unsentTimestampMs:d?o("MAWTimeUtils").toTimestamp(t.ts):void 0})}l.getEphemeralDurationInSec=f,l.buildOptimisticMessage=g,l.buildNewAndUpdatedMessageSharedParams=h}),226);
__d("MAWMedia",["LSIntEnum","MAWDbMedia","MessagingAttachmentType"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return t===o("MAWDbMedia").MEDIA_TYPE.IMAGE?n!=null?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_IMAGE):(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE):t===o("MAWDbMedia").MEDIA_TYPE.VIDEO?n!=null?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_VIDEO):(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO):t===o("MAWDbMedia").MEDIA_TYPE.PTT?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO):t===o("MAWDbMedia").MEDIA_TYPE.GIF?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE):t===o("MAWDbMedia").MEDIA_TYPE.STICKER?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER):t===o("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE):(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").NONE)}l.mediaTypeToMessageAttachmentType=s}),98);
__d("MAWBridgeNewMediaHandler",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSThreadMediaGalleryGroup","MAWDbMedia","MAWMedia","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","ReQL","WAMediaHdType"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a,i,l,u){var c,d,m,p,_,f,g,h=n.messagesSortOrderMs?(e||(e=o("I64"))).of_float(n.messagesSortOrderMs[a]):n.sortOrderMs!=null?(e||(e=o("I64"))).of_float(n.sortOrderMs):(e||(e=o("I64"))).of_float(n.ts*1e3);return{accessibilitySummaryText:n.accessibilitySummaryText,attachmentFbid:i,attachmentIndex:(c=t==null?void 0:t.attachmentIndex)!=null?c:(e||(e=o("I64"))).zero,attachmentType:(d=t==null?void 0:t.attachmentType)!=null?d:o("MAWMedia").mediaTypeToMessageAttachmentType(n.mediaType,n.ephemeralMediaViewMode),authorityLevel:(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),ephemeralMediaState:n.ephemeralMediaState!=null?(e||(e=o("I64"))).of_int32(n.ephemeralMediaState):t==null?void 0:t.ephemeralMediaState,ephemeralMediaViewMode:n.ephemeralMediaViewMode!=null?(e||(e=o("I64"))).of_int32(n.ephemeralMediaViewMode):t==null?void 0:t.ephemeralMediaViewMode,filename:(m=(p=n.filenames!=null?n.filenames[a]:null)!=null?p:n.defaultFilename)!=null?m:t==null?void 0:t.filename,filesize:n.filesize==null?t==null?void 0:t.filesize:(e||(e=o("I64"))).of_int32(n.filesize),gifPlayback:n.gifPlayback,hasMedia:n.hasMedia,hasXma:!1,isHd:((_=n.hdTypes)==null?void 0:_[a])===o("WAMediaHdType").HD_TYPE_HQ_4K,isSharable:!1,messageId:a,offlineAttachmentId:l,playableDurationMs:n.duration==null?t==null?void 0:t.playableDurationMs:(e||(e=o("I64"))).of_int32(n.duration),previewHeight:n.previewHeight==null?t==null?void 0:t.previewHeight:(e||(e=o("I64"))).of_int32(n.previewHeight),previewHeightLarge:n.previewHeightLarge==null?t==null?void 0:t.previewHeightLarge:(e||(e=o("I64"))).of_int32(n.previewHeightLarge),previewWidth:n.previewWidth==null?t==null?void 0:t.previewWidth:(e||(e=o("I64"))).of_int32(n.previewWidth),previewWidthLarge:n.previewWidthLarge==null?t==null?void 0:t.previewWidthLarge:(e||(e=o("I64"))).of_int32(n.previewWidthLarge),threadKey:u,timestampMs:h,titleText:n.accessibilitySummaryText,transportKey:(f=n.transportKey)!=null?f:"WhatsApp",waveformData:(g=n.waveformData)!=null?g:t==null?void 0:t.waveformData}}function c(e,t){var n=t.hasPreviewMedia!=null;return{id:e,mainMediaStatus:t.hasMedia?(s||(s=o("LSIntEnum"))).ofNumber(1):(s||(s=o("LSIntEnum"))).ofNumber(4),mainMediaStatusDetails:"initial_media_download",previewMediaStatus:n?t.hasPreviewMedia===!0?(s||(s=o("LSIntEnum"))).ofNumber(1):(s||(s=o("LSIntEnum"))).ofNumber(4):void 0,previewMediaStatusDetails:n?"initial_media_download":void 0}}async function d(t,n,r){var a=n.mediaId,i=n.msgIds,l=n.offlineAttachmentId,s=n.plaintextHash;await m(t,n);var c=p(a,s),d=l!=null?l:c,f=!1,g=_(n),h=null;if(h=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachments_ranges_v2__generated).getKeyRange(r).filter(function(t){return(e||(e=o("I64"))).equal(t.mediaGroup,g)})),await Promise.all(i.map(async function(a){var i=t.attachments,l=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(i).getKeyRange(r,a)),s=u(l,n,a,c,d,r);if(n.skipShouldUpdateHasMore!==!0&&h!=null&&(e||(e=o("I64"))).le(s.timestampMs,h.minTimestampMs)&&(f=!0),l!=null){var m;return i.upsert([l.threadKey,l.messageId,l.attachmentFbid],babelHelpers.extends({},s,{transportKey:(m=l.transportKey)!=null?m:s.transportKey}))}else return i.add(s)})),h!=null&&h.hasMoreBefore!==!0&&f){var y=babelHelpers.extends({},h,{hasMoreBefore:!0});await t.attachments_ranges_v2__generated.upsert([h.threadKey,h.mediaGroup,h.minTimestampMs],y)}}async function m(t,n){var a=n.mediaId,i=n.plaintextHash;if(i==null){r("FBLogger")("messenger_web_media").mustfix("[NewMedia] No valid media plaintextHash found in reducer %s",a);return}var l=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.client_media_status).getKeyRange(i)),u=l!=null&&!(e||(e=o("I64"))).equal(l.mainMediaStatus,(s||(s=o("LSIntEnum"))).ofNumber(4));u||await t.client_media_status.add(c(i,n))}function p(e,t){return""+(t!=null?t:e.toString())}function _(e){switch(e.mediaType){case o("MAWDbMedia").MEDIA_TYPE.IMAGE:case o("MAWDbMedia").MEDIA_TYPE.VIDEO:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS);case o("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").FILES_ONLY);default:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS)}}function f(e,t){var n=t.threadJid;return o("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,n,"MAWBridgeNewMediaHandler",function(e,n){return d(e,t,n)})}l.getAttachmentFromBridgeMedia=u,l.callWithoutWaitingForAnything=d,l.getAttachmentID=p,l.call=f}),98);
__d("MAWMsgFetchLSReplyMsgAndAttachment",["EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","MAWCurrentUser","MAWDbMsg","MAWMpsGating","MAWReplyBuilder","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(e,t){var n=t.replyContent;if(n==null||n.replyType!=="MESSAGE"||n.replyToMsgId==null)return null;var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("messageId")).getKeyRange(n.replyToMsgId));a==null&&t._META_loaded_as_quoted_msg!==!0&&r("FBLogger")("messenger_e2ee_web").mustfix("[fetchReplyLocalViaLS] Reply snippet cannot be generated as original message is not in LSDB");var i;return a!=null&&(i=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.attachments).getKeyRange(a.threadKey,a.messageId))),babelHelpers.extends({},t,{replyContent:babelHelpers.extends({},n,{replyToLSAttachment:i,replyToLSMessage:a})})}async function c(t,n){var a=o("MAWMpsGating").isMpsMessageRendering()?void 0:await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.attachments).getKeyRange(n.threadKey,n.messageId)),i=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.messages.index("replySourceIdMessageID")).getKeyRange(n.messageId));await Promise.all(i.map(function(i){var l=i.replySourceTypeV2,u=i.replyType;if(l==null||u==null){r("FBLogger")("messenger_e2ee_web").mustfix("[updateMessagesReplyingToMsg] Error getting reply snippet without replySourceTypeV2 and/or replyType");return}var c=o("MAWDbMsg").toMsgId(n.messageId);if(c==null){r("FBLogger")("messenger_e2ee_web").mustfix("[updateMessagesReplyingToMsg] Error extracting message id from replyToLSMessage");return}if(i.messageId===n.messageId){r("FBLogger")("messenger_e2ee_web").mustfix("[updateMessagesReplyingToMsg] Message replying to itself should not be updated");return}if(l===(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE)){var d={isBumpMsg:i.replyType===(e||(e=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP),replyToLSAttachment:a,replyToLSMessage:n,replyToMsgId:c,replyType:"MESSAGE"},m=o("MAWReplyBuilder").getReplyBuilder(d.replyType),p=a!=null?{replyAttachmentId:m.buildReplyAttachmentId(d),replyAttachmentPlaintextHash:m.buildReplyAttachmentPlaintextHash(d),replyAttachmentType:m.buildReplyAttachmentType(d),replyMediaPreviewHeight:m.buildReplyMediaPreviewHeight(d),replyMediaPreviewWidth:m.buildReplyMediaPreviewWidth(d)}:{},_=babelHelpers.extends({},i,p,{replyMessageText:m.buildReplyMessageText(d),replySnippet:m.buildReplySnippet(d,(s||(s=o("I64"))).to_string(i.senderId),o("MAWCurrentUser").getID()),replySourceTimestampMs:m.buildReplyTimestampMs(d),replyStatus:m.buildReplyStatus(d),replyToUserId:m.buildReplyUserId(d)});return t.messages.put(_)}}))}l.fetchReplyLocalViaLS=u,l.updateMessagesReplyingToMsg=c}),98);
__d("MAWUpdateMsg",["MAWBridgeBuildMsg","MAWMsgFetchLSReplyMsgAndAttachment","MsgrWebGating"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n,r){var a=o("MAWBridgeBuildMsg").buildNewAndUpdatedMessageSharedParams(t,r),i=babelHelpers.extends({},n,a);await e.messages.upsert([n.threadKey,n.timestampMs,n.messageId],i),o("MsgrWebGating").isQuotedMessagesInLsEnabled()&&await o("MAWMsgFetchLSReplyMsgAndAttachment").updateMessagesReplyingToMsg(e,i)}l.call=e}),98);
__d("MAWBridgeNewMsgHandler",["FBLogger","I64","LSIntEnum","LSMessageRenderingType","LSQuickReplyType","MAWAdminMsgCTA","MAWBridgeBuildMsg","MAWBridgeNewMediaHandler","MAWBridgeXMAUtils","MAWMpsGating","MAWMsgFetchLSReplyMsgAndAttachment","MAWThreadLoadingState","MAWUpdateMsg","MAWXMAUtils","MWPBumpEntityKey","MpsMessageToBridge","MpsOverBridge","MpsToBridgeMessageId","MpsTypes","MsgrWebGating","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a){return babelHelpers.extends({},o("MAWBridgeBuildMsg").buildNewAndUpdatedMessageSharedParams(n,a),{forwardScore:(e||(e=o("I64"))).of_float(n.forwardingScore),isAdminMessage:n.isAdminMessage,isForwarded:n.isForwarded,messageRenderingType:(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageRenderingType").DEFAULT),offlineThreadingId:n.externalId,quickReplyType:s.ofNumber(r("LSQuickReplyType").NONE),senderId:e.of_string(n.sender),threadKey:t,viewFlags:s.ofNumber(0)})}function c(e,t,n){var r=t.mediaId,a=t.offlineAttachmentId,i=t.plaintextHash,l=o("MAWBridgeNewMediaHandler").getAttachmentID(r,i),s=a!=null?a:l;return o("MAWBridgeNewMediaHandler").getAttachmentFromBridgeMedia(null,t,n,l,s,e)}async function d(e,t,n,r){n.unsupportedType==="stickerReceiverFetchMessage"&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_msg_handler","sticker_receiver_fetch_fallback");var a=u(t,n,r),i=a.messageId,l=a.timestampMs;await e.messages.upsert([t,l,i],a),o("MsgrWebGating").isQuotedMessagesInLsEnabled()&&await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages).getKeyRange(t,l,i)).then(function(t){if(t!=null)return o("MAWMsgFetchLSReplyMsgAndAttachment").updateMessagesReplyingToMsg(e,t)})}async function m(e,t,n,r){n.unsupportedType==="stickerReceiverFetchMessage"&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_msg_handler","sticker_receiver_fetch_fallback");var a=u(t,n,r),i=await e.messages.add(a),l=i[0],s=i[1],c=i[2];o("MsgrWebGating").isQuotedMessagesInLsEnabled()&&await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages).getKeyRange(t,s,c)).then(function(t){if(t!=null)return o("MAWMsgFetchLSReplyMsgAndAttachment").updateMessagesReplyingToMsg(e,t)})}async function p(e,t){var n=t.replyContent;if(n==null||n.replyType!=="MESSAGE")return t;var r=await o("MpsOverBridge").mps().loadMessage({config:{shouldFetchSupplementals:!0,strategy:"local-first"},debug:{purpose:"reply-fetch-local"},messageId:o("MpsToBridgeMessageId").bridgeMsgIdToMps(n.replyToMsgId).messageId,threadId:o("MpsTypes").toThreadId(t.chatJid)}),a=r.value;if(a==null)return t;var i=o("MpsMessageToBridge").mpsFullMessagetoBridge(a),l=i==null?void 0:i.topLevel,s=i==null?void 0:i.supplementals;if(l!=null&&l.kind==="bridgeMsg"){var d=s==null?void 0:s.find(function(e){return e.kind==="bridgeMedia"||e.kind==="bridgeXMA"}),m=l.value.msgId,p=(function(t){if((typeof t=="object"&&t!==null||typeof t=="function")&&t.kind==="bridgeMedia"&&"value"in t){var r=t.value;return c(e,r,n.replyToMsgId)}if((typeof t=="object"&&t!==null||typeof t=="function")&&t.kind==="bridgeXMA"&&"value"in t){var a=t.value;return o("MAWBridgeXMAUtils").composeAttachmentXMA(a,e,String(a.xmaId),m,void 0,void 0,void 0,void 0,"MAWBridgeNewMsgHandler")}if(t!==void 0)throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t)})(d);return babelHelpers.extends({},t,{replyContent:babelHelpers.extends({},n,{replyToLSAttachment:p,replyToLSMessage:u(e,l.value,void 0)})})}return t}async function _(e,t,n){var r,a;if(!o("MsgrWebGating").isQuotedMessagesInLsEnabled())return n;var i=await o("MAWMsgFetchLSReplyMsgAndAttachment").fetchReplyLocalViaLS(e,n);return i==null?n:o("MAWMpsGating").isMpsMessageRendering()&&((r=i.replyContent)==null?void 0:r.replyToLSAttachment)==null&&((a=i.replyContent)==null?void 0:a.replyToLSMessage)==null?p(t,n):i}async function f(e,t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("optimistic")).getKeyRange(t.externalId));return n!=null?Promise.resolve(n):o("MsgrWebGating").isQuotedMessagesInLsEnabled()?o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("messageId")).getKeyRange(t.msgId)):Promise.resolve(null)}async function g(t,n,a){var i=await _(t,a,n);if(!o("MAWXMAUtils").isXMAStoryReply(i.xmaMessageType)){if(i.isExpiredMsg===!0){r("FBLogger")("messenger_web").mustfix("Attempted to insert an expired message");return}var l=await o("MAWAdminMsgCTA").getAdminMsgCtaStep(t,a,i);if(o("MAWMpsGating").isMpsMessageRendering())await d(t,a,i,l);else{var s,u=await f(t,i);u==null?await m(t,a,i,l):await o("MAWUpdateMsg").call(t,i,u,l),o("MAWMpsGating").isMpsMessageRendering()&&((s=i.editCount)!=null?s:0)>0&&await h(t,i)}if(i.collapsibleId!=null){var c=(e||(e=o("I64"))).of_float(i.collapsibleId),p=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.messages.index("collapsibleId")).getKeyRange(c));if(p.length>1){var g=p[0],y=p[1];(e||(e=o("I64"))).gt(g.timestampMs,y.timestampMs)?await t.messages.put(babelHelpers.extends({},y,{isCollapsed:!0})):await t.messages.put(babelHelpers.extends({},g,{isCollapsed:!0}))}}}}async function h(e,t){var n=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.messages.index("replySourceIdMessageID")).getKeyRange(t.msgId));await Promise.all(n.map(function(n){var r=babelHelpers.extends({},n,{replyMessageText:t.content});return e.messages.put(r)}))}async function y(e,t){var n=await o("MAWThreadLoadingState").getThreadKeyIfMiThreadNotMissing(e,t.chatJid);n!=null&&await g(e,t,n)}async function C(e,t){await Promise.all(t.map(function(t){return y(e,t)}))}l.callWithoutWaitingForAnything=g,l.call=y,l.bulkCall=C}),98);
__d("MWLSContactTypeExactUtils",["I64","LSContactTypeExact","LSIntEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").IG_USER))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").IG_BUSINESS_USER))?!0:(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").IG_CREATOR_USER))}l.isIgContact=u}),98);
__d("getLSMediaContactProfilePictureUrl",["LSMediaUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.profilePictureUrlExpirationTimestampMs;if(t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)||e.profilePictureUrl===""){var n;return(n=e.profilePictureFallbackUrl)!=null?n:e.profilePictureUrl}else return e.profilePictureUrl}l.default=e}),98);
__d("getLSMediaThreadPictureUrl",["LSMediaUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.threadPictureUrl,n=e.threadPictureUrlExpirationTimestampMs,r=e.threadPictureUrlFallback,a=n;return a!=null&&o("LSMediaUrlUtils").isTimestampExpired(a)?r:t}l.default=e}),98);/*FB_PKG_DELIM*/
__d("TrustedTypesChromecastScriptURLPolicy",["TrustedTypes","err"],(function(t,n,r,o,a,i,l){"use strict";var e=["pkedcjkdefgpdelpbcmbmeomcjbeemfm","hfaagokkkhdbgiakmmlclaapfelnkoah","fmfcbgogabcbclcofgocippekhfcmgfj","enhhojjnijigcajfphajepfemndkmdlo"];function s(t){var n=e.join("|"),r=new RegExp("^chrome-extension://(?:null|"+n+")/cast_sender\\.js$");return r.test(t)}var u={createScriptURL:function(t){if(s(t))return t;throw r("err")("Violated policy TrustedTypesChromecastScriptURLPolicy: "+t+" is not a Chromecast extension URI.")}},c=r("TrustedTypes").createPolicy("chromecast-extension-uri",u),d=c;l.default=d}),98);
__d("CastingChromecastAPI",["TrustedTypesChromecastScriptURLPolicy"],(function(t,n,r,o,a,i,l){"use strict";var e=18e4,s=["pkedcjkdefgpdelpbcmbmeomcjbeemfm","hfaagokkkhdbgiakmmlclaapfelnkoah","fmfcbgogabcbclcofgocippekhfcmgfj","enhhojjnijigcajfphajepfemndkmdlo"],u=null,c=function(t){var e=t.appID,n=t.receiverListener,r=t.sessionListener;return f().then(function(t){var o=new t.ApiConfig(new t.SessionRequest(e),r,n,t.AutoJoinPolicy.ORIGIN_SCOPED,t.DefaultActionPolicy.CAST_THIS_TAB);return new Promise(function(e,n){t.initialize(o,e,n)})})},d=function(t){return f().then(function(e){e.addReceiverActionListener(function(n,r){switch(r){case e.ReceiverAction.CAST:t.onCast(n);break;case e.ReceiverAction.STOP:t.onStop();break}})})},m=function(n){return f().then(function(t){var r=new t.SessionRequest(n,[t.Capability.VIDEO_OUT,t.Capability.AUDIO_OUT],e);return new Promise(function(e,n){t.requestSession(e,n,r)})})},p=function(t){return f().then(function(e){return t===e.ReceiverAvailability.AVAILABLE})},_=function(){return f().then(function(e){return e.media.DEFAULT_MEDIA_RECEIVER_APP_ID})},f=function(){return u||(t.chrome?t.chrome.cast&&t.chrome.cast.isAvailable?(u=Promise.resolve(t.chrome.cast),u):(u=Promise.resolve().then(function(){return g()}).then(function(e){return new Promise(function(n,o){t.chrome.cast=t.chrome.cast||{},t.chrome.cast.extensionId=e,t.__onGCastApiAvailable=function(e,r){r?o(r):n(t.chrome.cast)};var a=document.createElement("script");if(a.onerror=o,e==null){o({code:"extension_not_available",description:null,details:null});return}else a.src=r("TrustedTypesChromecastScriptURLPolicy").createScriptURL(y(e));var i=document.head||document.documentElement;if(i==null){o({code:"extension_no_casting_script",description:null,details:null});return}i.appendChild(a)})}),u):(u=Promise.reject({code:"not_supported",description:null,details:null}),u))};async function g(){for(var e=0;e<s.length;e++){var t=s[e],n=await h(t);if(n)return t}return null}function h(e){return new Promise(function(t,n){var r=y(e),o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState===4&&t(o.status===200)},o.onerror=function(){t(!1)},o.open("GET",r,!0),o.send()})}function y(e){return"chrome-extension://"+e+"/cast_sender.js"}var C={addReceiverListener:d,getDefaultAppID:_,getIsAvailable:p,getSession:m,initialize:c},b=C;l.default=b}),98);
__d("CastingChromecastAPIWrapper",["cr:1885117"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:1885117")}),98);
__d("CastingChromecastSession",["FBLogger","Promise","err","removeFromArray"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e,t,n){var o=this;this.$3=null,this.$4=[],this.$5=[],this.$6=[],this.$7=[],this.$8=[],this.$9=[],this.$10=[],this.$11=[],this.$12=function(e,t){if(e===o.$2){var n=o.$4.slice();n.forEach(function(e){e(t)})}else o.$6.slice().forEach(function(t){t(r("err")("Namespace does not match. Expected "+o.$2+" but received "+e),"CastingChromecastSession._onMessageReceived")})},this.$1=e,this.$2=t,this.$3=n,n.addMessageListener(this.$2,this.$12)}var o=t.prototype;return o.destroy=function(){var e=this.$3;e!=null&&(e.status!=null&&e.status!=="disconnected"&&r("FBLogger")("comet_cast_sender").mustfix("Destroying receiver session that is not disconnected. Status, %s",e.status),e.removeMessageListener(this.$2,this.$12)),this.$3=null},o.isCasting=function(){return this.$3!=null},o.isConnected=function(){return this.$3!=null&&this.$3.status==="connected"},o.isDisconnected=function(){return this.$3!=null&&this.$3.status==="disconnected"},o.disconnect=function(){var t=this;return this.$5.slice().forEach(function(e){e()}),new(e||(e=n("Promise")))(function(e,n){t.$3!=null?t.$3.stop(e,n):e()}).catch(function(e){if(t.$3!=null&&t.$3.status!=="stopped")throw t.$6.slice().forEach(function(t){t(e,"CastingChromecastSession.disconnect")}),e}).finally(function(){var e=t.$3;t.$3=null,e&&e.removeMessageListener(t.$2,t.$12),t.$7.slice().forEach(function(e){e()})})},o.getVolume=function(){var e=this.$13();return e?e.level:null},o.getFriendlyName=function(){return this.$14()},o.setVolume=function(o){var t=this,a=this.$3;return new(e||(e=n("Promise")))(function(e,t){if(a==null){t(r("err")("Cannot set volume without a session"));return}a.setReceiverVolumeLevel(o,e,t)}).catch(function(e){throw t.$6.slice().forEach(function(t){t(e,"CastingChromecastSession.setVolume")}),e})},o.isMuted=function(){var e=this.$13();return e?e.muted:null},o.mute=function(){return this.$15(!0)},o.unmute=function(){return this.$15(!1)},o.sendMessage=function(o){var t=this;return new(e||(e=n("Promise")))(function(e,n){var a=t.$3;if(a==null){n(r("err")("The message can not be sent without a session"));return}a.sendMessage(t.$2,o,e,n)}).catch(function(e){throw t.$6.slice().forEach(function(t){t(e,"CastingChromecastSession.sendMessage")}),e})},o.$13=function(){var e,t=(e=this.$3)==null||(e=e.receiver)==null?void 0:e.volume;return t==null?null:t},o.$14=function(){var e;return((e=this.$3)==null?void 0:e.receiver.friendlyName)||null},o.$15=function(o){var t=this;return new(e||(e=n("Promise")))(function(e,n){var a=t.$3;if(a==null){n(r("err")("The muted state can not be set without a session"));return}a.setReceiverMuted(o,e,n)}).catch(function(e){throw t.$6.slice().forEach(function(t){t(e,"CastingChromecastSession._setIsMuted")}),e})},o.onMessage=function(t){var e=this.$4;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onDisconnecting=function(t){var e=this.$5;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onError=function(t){var e=this.$6;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onDisconnected=function(t){var e=this.$7;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onVideoLoading=function(t){var e=this.$8;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onVideoLoaded=function(t){var e=this.$9;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onVideoPlaying=function(t){var e=this.$10;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},o.onVideoPaused=function(t){var e=this.$11;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},t})();l.default=s}),98);
__d("CastingErrorUtils",["ErrorMetadata","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return e!=null&&typeof e=="object"&&typeof e.code=="string"&&e.code===t}function s(e){return e!=null&&typeof e=="object"&&typeof e.code=="string"?r("err")("Chromecast error: %s, keys: %s","cast.ChromecastError",JSON.stringify({code:e.code})):r("getErrorSafe")(e)}function u(e,t){e.metadata==null&&(e.metadata=new(r("ErrorMetadata")));var n=e.metadata,o=t==null?void 0:t.videoID;return o!=null&&n.addEntries(["COMET_VIDEO","VIDEO_ID",o]),e}l.isChromecastError=e,l.getCastingErrorSafe=s,l.appendCastingMetadataToExpandedError=u}),98);
__d("ConnectedTvLoggingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1843753"),s=o("FalcoLoggerInternal").create("connected_tv_logging",e),u=s;l.default=u}),98);
__d("CastingChromecastScanner",["CastingChromecastAPIWrapper","CastingChromecastSession","CastingErrorUtils","ConnectedTvLoggingFalcoEvent","Promise","err","performanceAbsoluteNow","promiseDone","removeFromArray"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e,t){this.$6=null,this.$7=[],this.$8=[],this.$9=[],this.$10=[],this.$11=[],this.$12=[],this.$13=[],this.$14=[],this.$15=[],this.$1=e,this.$2=t,this.$4=!1,this.$3=!1,this.$5=new Set}var a=t.prototype;return a.init=function(){return this.$6!=null?(s||(s=n("Promise"))).reject(r("err")("Scanner can only be initialized once.")):(this.$6=this.$16(),this.$6)},a.ready=function(){return this.$6==null?(s||(s=n("Promise"))).reject(r("err")("Scanner should be initialized.")):this.$6},a.hasSupport=function(){return this.$3},a.hasFoundReceiver=function(){return this.$4},a.getSession=function(){var e=this;return this.$4?(this.$13.slice().forEach(function(e){e()}),this.$17().then(function(t){var n=e.$18(t);return e.$5.add(n),e.$14.slice().forEach(function(e){e(n)}),n}).catch(function(t){throw e.$10.slice().forEach(function(e){e()}),e.$11.slice().forEach(function(e){e()}),t})):(s||(s=n("Promise"))).reject(r("err")("No receivers found"))},a.$16=function(){var e=this;return this.$3=!0,this.$19().then(function(t){return e.$20()}).then(function(t){e.$9.slice().forEach(function(e){e()})}).then(function(t){return e.$21()}).catch(function(t){throw!o("CastingErrorUtils").isChromecastError(t,"not_supported")&&!o("CastingErrorUtils").isChromecastError(t,"extension_not_available")&&!o("CastingErrorUtils").isChromecastError(t,"extension_no_casting_script")&&e.$8.slice().forEach(function(e){e(t,"CastingChromecastScanner._init")}),t})},a.$21=function(){var e=this,t=this.$1;if(t==null)return(s||(s=n("Promise"))).reject(r("err")("App ID is not defined"));var o=function(n){var t=e.$18(n);e.$14.slice().forEach(function(e){e(t)})},a=function(n){r("promiseDone")(r("CastingChromecastAPIWrapper").getIsAvailable(n).then(function(t){e.$4=t,e.$15.slice().forEach(function(t){t({foundReceiver:e.$4})})}))};return r("CastingChromecastAPIWrapper").initialize({appID:t,receiverListener:a,sessionListener:o}).then(function(){}).catch(function(t){throw e.$8.slice().forEach(function(e){e(t,"CastingChromecastScanner._initializeApi")}),t})},a.$19=function(){var e=this;return this.$1!=null?(s||(s=n("Promise"))).resolve():r("CastingChromecastAPIWrapper").getDefaultAppID().then(function(t){e.$1=t})},a.$17=function(){var t=this.$1;if(t==null)return(s||(s=n("Promise"))).reject(r("err")("App ID is not defined"));var o=(e||(e=r("performanceAbsoluteNow")))();return r("ConnectedTvLoggingFalcoEvent").log(function(){return{event:"sender_session_requested"}}),r("CastingChromecastAPIWrapper").getSession(t).then(function(t){return r("ConnectedTvLoggingFalcoEvent").log(function(){return{event:"sender_session_started",perf_time_ms:Math.floor((e||(e=r("performanceAbsoluteNow")))()-o)}}),t}).catch(function(t){throw r("ConnectedTvLoggingFalcoEvent").log(function(){return{event:"sender_session_failed",perf_time_ms:Math.floor((e||(e=r("performanceAbsoluteNow")))()-o),session_failure_code:typeof t.code=="string"?t.code:null,session_failure_description:t.description}}),t})},a.$18=function(t){var e=this,n=new(r("CastingChromecastSession"))(this.$1||"",this.$2||"",t),o=n.onDisconnecting(function(){e.$12.slice().forEach(function(e){e()})}),a=n.onError(function(t,n){e.$8.slice().forEach(function(e){e(t,n)})}),i=n.onDisconnected(function(){e.$11.slice().forEach(function(e){e()}),e.$5.delete(n),o.remove(),a.remove(),i.remove()});return n},a.$20=function(){var e=this;return r("CastingChromecastAPIWrapper").addReceiverListener({onCast:function(n){e.$7.slice().forEach(function(e){e(n)})},onStop:function(){e.$5.forEach(function(e){return e.disconnect()})}})},a.onCast=function(t){var e=this.$7;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onError=function(t){var e=this.$8;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onInit=function(t){var e=this.$9;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionCancelled=function(t){var e=this.$10;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionDisconnected=function(t){var e=this.$11;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionDisconnecting=function(t){var e=this.$12;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionRequested=function(t){var e=this.$13;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionStarted=function(t){var e=this.$14;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onStatusChanged=function(t){var e=this.$15;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},t})();l.default=u}),98);
__d("CastingState",[],(function(t,n,r,o,a,i){"use strict";function e(){return{isCastPending:!1,receiverExperience:null,receiverFriendlyName:null,receiverIsConnected:!1,receiverIsMuted:null,receiverVolume:null}}function l(){return{currentDuration:null,currentPlaybackState:null,currentPosition:null,currentVideoID:null,type:"video_channel"}}function s(){return{type:"photo"}}function u(){return{currentAssetID:null,currentPlaybackState:null,type:"photo_album"}}i.initialCastingState=e,i.initialVideoChannelExperienceState=l,i.initialPhotoExperienceState=s,i.initialPhotoAlbumExperienceState=u}),66);
__d("TV2PhotoAlbumReportedState",[],(function(t,n,r,o,a,i){"use strict";function e(e){return m(JSON.parse(e),y("TV2PhotoAlbumReportedState"))}function l(e){return JSON.stringify(p(e,y("TV2PhotoAlbumReportedState")),null,2)}function s(e,t,n){throw n===void 0&&(n=""),Error(n?'Invalid value for key "'+n+'". Expected type '+JSON.stringify(e)+" but got "+JSON.stringify(t):"Invalid value "+JSON.stringify(t)+" for type "+JSON.stringify(e))}function u(e){if(e.jsonToJS===void 0){var t={};e.props.forEach(function(e){return t[e.json]={key:e.js,typ:e.typ}}),e.jsonToJS=t}return e.jsonToJS}function c(e){if(e.jsToJSON===void 0){var t={};e.props.forEach(function(e){return t[e.js]={key:e.json,typ:e.typ}}),e.jsToJSON=t}return e.jsToJSON}function d(e,t,n,r){r===void 0&&(r="");function o(e,t){return typeof e==typeof t?t:s(e,t,r)}function a(e,t){for(var r=e.length,o=0;o<r;o++){var a=e[o];try{return d(t,a,n)}catch(e){}}return s(e,t)}function i(e,t){return e.indexOf(t)!==-1?t:s(e,t)}function l(e,t){return Array.isArray(t)?t.map(function(t){return d(t,e,n)}):s("array",t)}function u(e){if(e===null)return null;var t=new Date(e);return isNaN(t.valueOf())?s("Date",e):t}function c(e,t,r){if(r===null||typeof r!="object"||Array.isArray(r))return s("object",r);var o={};return Object.getOwnPropertyNames(e).forEach(function(t){var a=e[t],i=Object.prototype.hasOwnProperty.call(r,t)?r[t]:void 0;o[a.key]=d(i,a.typ,n,a.key)}),Object.getOwnPropertyNames(r).forEach(function(a){Object.prototype.hasOwnProperty.call(e,a)||(o[a]=d(r[a],t,n,a))}),o}if(t==="any")return e;if(t===null)return e===null?e:s(t,e);if(t===!1)return s(t,e);for(;typeof t=="object"&&t.ref!==void 0;)t=C[t.ref];return Array.isArray(t)?i(t,e):typeof t=="object"?Object.prototype.hasOwnProperty.call(t,"unionMembers")?a(t.unionMembers,e):Object.prototype.hasOwnProperty.call(t,"arrayItems")?l(t.arrayItems,e):Object.prototype.hasOwnProperty.call(t,"props")?c(n(t),t.additional,e):s(t,e):t===Date&&typeof e!="number"?u(e):o(t,e)}function m(e,t){return d(e,t,u)}function p(e,t){return d(e,t,c)}function _(e){return{arrayItems:e}}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{unionMembers:t}}function g(e,t){return{props:e,additional:t}}function h(e){return{props:[],additional:e}}function y(e){return{ref:e}}var C={TV2PhotoAlbumReportedState:g([{json:"media_parameters",js:"media_parameters",typ:y("MediaParameters")},{json:"media_state",js:"media_state",typ:y("MediaState")}],"any"),MediaParameters:g([{json:"album_id",js:"album_id",typ:""}],"any"),MediaState:g([{json:"photo_state",js:"photo_state",typ:f(void 0,y("PhotoMediaState"))},{json:"video_state",js:"video_state",typ:f(void 0,y("VideoMediaState"))}],"any"),PhotoMediaState:g([{json:"duration_ms",js:"duration_ms",typ:3.14},{json:"photo_id",js:"photo_id",typ:""},{json:"photo_playback_state",js:"photo_playback_state",typ:y("PhotoPlaybackState")},{json:"position_ms",js:"position_ms",typ:3.14}],"any"),VideoMediaState:g([{json:"duration_ms",js:"duration_ms",typ:3.14},{json:"position_ms",js:"position_ms",typ:3.14},{json:"video_id",js:"video_id",typ:""},{json:"video_playback_state",js:"video_playback_state",typ:y("VideoPlaybackState")}],"any"),PhotoPlaybackState:["paused","play"],VideoPlaybackState:["ended","paused","play","seeking","unknown"]};a.exports={TV2PhotoAlbumReportedStateToJson:l,toTV2PhotoAlbumReportedState:e}}),null);
__d("TV2UniqueIDs",["guid"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map;function s(t){var n,r=(n=e.get(t))!=null?n:0;return e.set(t,r+1),""+t+r.toString(36)}function u(){return s("id_tv2_vcr_")}function c(){return s("id_tv2_veqe_")}function d(){return s("id_tv2_toast_")}function m(){return s("id_tv2_rvr_")}function p(){return r("guid")()}l.makeTV2VideoCastRequestID=u,l.makeTV2VideoExperienceQueueEntryID=c,l.makeTV2ToastID=d,l.makeTV2RelatedVideosRequestID=m,l.makeTV2ChainingSessionID=p}),98);
__d("getTV2QueryStringCheatcodeValue",[],(function(t,n,r,o,a,i){"use strict";function e(e){try{var n=new RegExp("\\b"+e+"=([^&]*)"),r=n.exec(t.location.search);return!r||r[1]==null?null:r[1]}catch(e){return null}}i.default=e}),66);
__d("getTV2QueryStringCheatcode",["getTV2QueryStringCheatcodeValue"],(function(t,n,r,o,a,i,l){"use strict";function e(e){try{return r("getTV2QueryStringCheatcodeValue")(e)==="1"}catch(e){return!1}}l.default=e}),98);
__d("getTV2DebuggingEnabled",["getTV2QueryStringCheatcode"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("getTV2QueryStringCheatcode")("debugging")}l.default=e}),98);
__d("TV2CommsParseUtils",["TV2PhotoAlbumReportedState","TV2UniqueIDs","err","getErrorSafe","getTV2DebuggingEnabled"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e===null?"null":e===""?"empty string":Array.isArray(e)?"array":typeof e=="object"?"object with keys: "+JSON.stringify(Object.keys(e).sort()):typeof e}function s(t,n,o){if(typeof t!="string"||t===""){var a=r("err")("Message parse error: %s expected JSON string, got %s",o,e(t));throw a}var i;try{return i=JSON.parse(t),n(i,o)}catch(e){if(typeof e=="object"&&e!=null&&"messageFormat"in e&&typeof e.messageFormat=="string"&&"messageParams"in e&&Array.isArray(e.messageParams))throw e;var l=r("getErrorSafe")(e),s=r("err")("Message parse error: %s expected JSON string, got error: %s",o,l.message);throw s}}function u(t,n){if(typeof t!="object"||t==null){var o=r("err")("Message parse error: %s expected object, got %s",n,e(t));throw o}return t}function c(t,n){if(t==null)return null;if(typeof t!="object"||t==null){var o=r("err")("Message parse error: %s expected object, got %s",n,e(t));throw o}return t}function d(t,n){if(!Array.isArray(t)){var o=r("err")("Message parse error: %s expected array, got %s",n,e(t));throw o}return t}function m(t,n){if(!Array.isArray(t)){var o=r("err")("Message parse error: %s expected array, got %s",n,e(t));throw o}return t.map(function(e){return _(e,n)})}function p(t,n){if(!Array.isArray(t)){var o=r("err")("Message parse error: %s expected array, got %s",n,e(t));throw o}return t.filter(Boolean).map(function(e){return _(e,n)})}function _(t,n){if(typeof t!="string"||t===""){var o=r("err")("Message parse error: %s expected non-empty string, got %s",n,e(t));throw o}return t}function f(t,n){if(t==null)return null;if(typeof t!="string"||t===""){var o=r("err")("Message parse error: %s expected optional non-empty string, got %s",n,e(t));throw o}return t}function g(t,n){if(t==null)return null;if(typeof t!="string"){var o=r("err")("Message parse error: %s expected optional string, got %s",n,e(t));throw o}return t}function h(t,n){if(t==null)return null;if(!(typeof t=="number"&&Number.isFinite(t)||typeof t=="string"&&t!=="")){var o=r("err")("Message parse error: %s expected optional non-empty string or number, got %s",n,e(t));throw o}return t}function y(t,n){if(typeof t!="number"||!Number.isFinite(t)){var o=r("err")("Message parse error: %s expected finite number, got %s",n,e(t));throw o}return t}function C(t,n){if(t==null)return null;if(typeof t!="number"||!Number.isFinite(t)){var o=r("err")("Message parse error: %s expected optional finite number, got %s",n,e(t));throw o}return t}function b(e,t){return e==="true"||e===!0}function v(e,t,n){return n===void 0&&(n=!1),e==null?n:e===!0}function S(t,n){if(typeof t!="boolean"){var o=r("err")("Parse error: %s expected boolean, got %s",n,e(t));throw o}return t}function R(e,t){var n=e!=null?u(e,t):null;if(n==null)return null;var r=_(n.uri,t+".uri"),o=y(n.width,t+".width"),a=y(n.height,t+".height");return{height:a,uri:r,width:o}}function L(e,t){var n=e!=null?u(e,t):null;if(n==null)return null;var r=u(n.image,t+".image"),o=_(r.uri,t+".image.uri");return{uri:o}}function E(e,t){if(e==null)return null;var n=d(e,t);return n.map(function(e,t){return _(e,"["+t+"]")})}function k(e,t){return s(e,function(e,t){var n=d(e,t);return n.map(function(e,n){var r=t+"."+n;return T(u(e,r),r)})},t)}function I(e,t){return s(e,function(e,t){return T(u(e,t),t)},t)}function T(e,n){var a=_(e.access_token,n+".access_token"),i=String(h(e.app_id,n+".app_id")),l=g(e.app_version,n+".app_version"),s=R(e.background_image,n+".background_image"),u=f(e.channel_token,n+".channel_token"),c=f(e.channel_session_id,n+".channel_session_id"),d=g(e.end_cursor,n+".end_cursor")||null,m=v(e.from_next_video_query,n+".from_next_video_query"),y=v(e.is_ad,n+".is_ad"),C=E(e.dash_prefetched_representation_ids,n+".dash_prefetched_representation_ids"),b=f(e.entry_point,n+".entry_point"),S=f(e.player_origin===""?null:e.player_origin,n+".player_origin"),k=f(e.player_suborigin===""?null:e.player_suborigin,n+".player_suborigin"),I=L(e.preferred_thumbnail,n+".preferred_thumbnail"),T=f(e.video_channel_id,n+".video_channel_id"),D=_(e.root_video_id,n+".root_video_id"),x=r("getTV2DebuggingEnabled")()?/\bvideo_id=([0-9]+)\b/.exec(t.location.search):null,$=x&&x[1]?x[1]:_(e.video_id,n+".video_id"),P=e.tracking_codes!=null?p(e.tracking_codes,n+".tracking_codes"):null;return{accessToken:a,appID:i,appVersion:l,backgroundImage:s,chainingEnabled:!1,channelSessionID:c,channelToken:u,dashPrefetchedRepresentationIDs:C,endCursor:d,entryPoint:b,fromNextVideoQuery:m,isAd:y,playerOrigin:S,playerSuborigin:k,preferredThumbnail:I,rootVideoID:D,startTimestamp:0,trackingCodes:P,videoCastRequestID:o("TV2UniqueIDs").makeTV2VideoCastRequestID(),videoChannelID:T,videoID:$}}function D(t,n){var o=u(t,n),a=_(o.type,n+".type");switch(a){case"version_response":return o;case"version_launch_response":return o;case"experience_state":return o;case"command_result":return o;case"duration_change":return o;case"status_update":return o;case"experience_status_update":return o}var i=r("err")("Parse error: %s expected response message type, got %s","parseTV2CommsFBAppOutboundMessageFromObject",e(o));throw i}function x(e){return s(e,D,".")}function $(t){var n=x(t);switch(n.type){case"version_response":case"version_launch_response":case"experience_state":case"command_result":return n}var o=r("err")("Parse error: %s expected response message type, got %s","parseCastingReceiverResponseMessageFromJSON",e(n));throw o}function P(e){return o("TV2PhotoAlbumReportedState").toTV2PhotoAlbumReportedState(e)}l.parseJSONString=s,l.parseObject=u,l.parseOptionalObject=c,l.parseArray=d,l.parseStringArray=m,l.parseTrackingCodes=p,l.parseNonEmptyString=_,l.parseOptionalNonEmptyString=f,l.parseOptionalString=g,l.parseNumber=y,l.parseOptionalNumber=C,l.parseOptionalStringishBoolean=b,l.parseOptionalBoolean=v,l.parseBoolean=S,l.parseVideoCastingPayloadBackgroundImage=R,l.parseVideoCastingPayloadPreferredThumbnail=L,l.parseVideoCastingPayloadListJSONAsTV2VideoCastRequestArray=k,l.parseVideoCastingPayloadJSONAsTV2VideoCastRequest=I,l.parseVideoCastingPayloadAsTV2VideoCastRequest=T,l.parseTV2CommsFBAppOutboundMessageFromJSON=x,l.parseCastingReceiverResponseMessageFromJSON=$,l.parseCastingReceiverPhotoAlbumReportedState=P}),98);
__d("fetchCtvCastPayloadQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29808457688745543"}),null);
__d("fetchCtvCastPayloadQuery.graphql",["fetchCtvCastPayloadQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"castSessionID"},t={defaultValue:null,kind:"LocalArgument",name:"mediaParameters"},r={defaultValue:null,kind:"LocalArgument",name:"requestID"},o=[{alias:null,args:[{kind:"Variable",name:"cast_session_id",variableName:"castSessionID"},{kind:"Literal",name:"caster_id",value:0},{kind:"Variable",name:"media_parameters_json",variableName:"mediaParameters"},{kind:"Literal",name:"receiver_app_id",value:0x5bc08d3f803b9},{kind:"Variable",name:"request_id",variableName:"requestID"},{kind:"Literal",name:"uses_secure_connection",value:!0}],kind:"ScalarField",name:"ctv_cast_payload",storageKey:null}];return{fragment:{argumentDefinitions:[e,t,r],kind:"Fragment",metadata:null,name:"fetchCtvCastPayloadQuery",selections:o,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,r,t],kind:"Operation",name:"fetchCtvCastPayloadQuery",selections:o},params:{id:n("fetchCtvCastPayloadQuery_facebookRelayOperation"),metadata:{},name:"fetchCtvCastPayloadQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("fetchCtvCastPayload",["CometRelay","err","fetchCtvCastPayloadQuery.graphql","getErrorSafe","guid"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("fetchCtvCastPayloadQuery.graphql");function u(e){var t=e.castSessionID,n=e.environment;return o("CometRelay").fetchQuery(n,s,{castSessionID:t,mediaParameters:"{}",requestID:r("guid")()}).toPromise().then(function(e){return e!=null&&e.ctv_cast_payload!=null&&typeof e.ctv_cast_payload=="string"?{payload:e.ctv_cast_payload,type:"loaded"}:{error:r("err")("Payload was not string"),type:"error"}}).catch(function(e){var t=r("getErrorSafe")(e);return{error:t,type:"error"}})}function c(e){var t=e.albumID,n=e.castSessionID,a=e.environment;return o("CometRelay").fetchQuery(a,s,{castSessionID:n,mediaParameters:JSON.stringify({album_id:t}),requestID:r("guid")()}).toPromise().then(function(e){return typeof(e==null?void 0:e.ctv_cast_payload)=="string"?{payload:e.ctv_cast_payload,type:"loaded"}:{error:r("err")("Payload was not string"),type:"error"}}).catch(function(e){var t=r("getErrorSafe")(e);return{error:t,type:"error"}})}l.fetchPhotoCastPayload=u,l.fetchAlbumCastPayload=c}),98);
__d("fetchVideoCastPayloadQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9544699068932467"}),null);
__d("fetchVideoCastPayloadQuery.graphql",["fetchVideoCastPayloadQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"castSessionID"},t={defaultValue:null,kind:"LocalArgument",name:"playerOrigin"},r={defaultValue:null,kind:"LocalArgument",name:"playerSubOrigin"},o={defaultValue:null,kind:"LocalArgument",name:"videoID"},a=[{kind:"Variable",name:"id",variableName:"videoID"}],i={alias:null,args:[{kind:"Variable",name:"cast_session_id",variableName:"castSessionID"},{kind:"Variable",name:"player_origin",variableName:"playerOrigin"},{kind:"Variable",name:"player_suborigin",variableName:"playerSubOrigin"}],kind:"ScalarField",name:"video_cast_payload",storageKey:null};return{fragment:{argumentDefinitions:[e,t,r,o],kind:"Fragment",metadata:null,name:"fetchVideoCastPayloadQuery",selections:[{alias:null,args:a,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[i],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[o,t,r,e],kind:"Operation",name:"fetchVideoCastPayloadQuery",selections:[{alias:null,args:a,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:n("fetchVideoCastPayloadQuery_facebookRelayOperation"),metadata:{},name:"fetchVideoCastPayloadQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("fetchVideoCastPayload",["CometRelay","Promise","err","fetchVideoCastPayloadQuery.graphql","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e!==void 0?e:e=n("fetchVideoCastPayloadQuery.graphql");function c(e){var t=e.castSessionID,a=e.environment,i=e.playerOrigin,l=e.playerSubOrigin,c=e.videoID;return r("gkx")("20113")?(s||(s=n("Promise"))).resolve({type:"video_cannot_be_casted"}):o("CometRelay").fetchQuery(a,u,{castSessionID:t,playerOrigin:i,playerSubOrigin:l,videoID:c}).toPromise().then(function(e){return e==null||e.video==null||e.video.video_cast_payload==null?{type:"video_cannot_be_casted"}:typeof e.video.video_cast_payload=="string"?{payload:e.video.video_cast_payload,type:"loaded"}:{error:r("err")("Payload was not string"),type:"error"}}).catch(function(e){var t=r("getErrorSafe")(e);return{error:t,type:"error"}})}l.default=c}),98);
__d("CastingController",["CastingErrorUtils","CastingState","FBLogger","Promise","SubscriptionsHandler","TV2CommsParseUtils","err","fetchCtvCastPayload","fetchVideoCastPayload","getErrorSafe","performanceAbsoluteNow","promiseDone","removeFromArray","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u="PhotoAlbum",c="ChannelVideo",d="Photo",m=(function(){function t(e,t){var n=this;this.$5=[],this.$6=[],this.$7=[],this.$9=function(){var e=o("CastingState").initialCastingState();n.$12(e),n.$13(null)},this.$10=function(e){switch(e.type){case"status_update":n.$16(e);break;case"experience_status_update":n.$17(e);break;default:break}},this.$11=function(e,t){var a;if(o("CastingErrorUtils").isChromecastError(e,"cancel"))r("FBLogger")("fbtv").warn("ChromecastError while casting. Received ChromecastError with cancel code.");else if(((a=n.$2)==null?void 0:a.type)==="video_channel"){var i,l=(i=n.$2)==null?void 0:i.currentVideoID,s=o("CastingErrorUtils").appendCastingMetadataToExpandedError(o("CastingErrorUtils").getCastingErrorSafe(e),babelHelpers.extends({},l!=null?{videoID:l}:{}));r("FBLogger")("comet_cast_sender").catching(s).mustfix("Receiver error at %s while playing video channel",t),r("promiseDone")(n.$4.stopCasting())}else{var u,c=o("CastingErrorUtils").appendCastingMetadataToExpandedError(o("CastingErrorUtils").getCastingErrorSafe(e),{}),d=((u=n.$2)==null?void 0:u.type)||"";r("FBLogger")("comet_cast_sender").catching(c).mustfix("Receiver error at %s while playing in experience %s",t,d),r("promiseDone")(n.$4.stopCasting())}},this.$1=o("CastingState").initialCastingState(),this.$2=null,this.$3=t,this.$4=e,this.$8=new(r("SubscriptionsHandler")),this.$8.addSubscriptions(this.$4.onReceiverDisconnected(this.$9),this.$4.onSessionDisconnected(this.$9),this.$4.onSessionMessage(this.$10),this.$4.onError(this.$11))}var a=t.prototype;return a.destroy=function(){this.$8.release()},a.getCastingState=function(){return this.$1},a.getCastingExperienceState=function(){return this.$2},a.setCastingState=function(t){this.$1=t},a.setCastingExperienceState=function(t){this.$2=t},a.subscribeToCastingStateChange=function(t){var e=this;return this.$5.push(t),function(){r("removeFromArray")(e.$5,t)}},a.subscribeToCastingExperienceStateChange=function(t){var e=this;return this.$6.push(t),function(){r("removeFromArray")(e.$6,t)}},a.subscribeToCastingEvent=function(t){var e=this;return this.$7.push(t),function(){r("removeFromArray")(e.$7,t)}},a.startPlayVideoNow=function(a){var t=this,i=a.environment,l=a.origin,u=a.position,d=a.subOrigin,m=a.videoID;this.$1.isCastPending||(this.$12(babelHelpers.extends({},this.$1,{isCastPending:!0})),this.$13(null),this.$14({data:{type:"cast_requested",videoID:m},timestamp:(s||(s=r("performanceAbsoluteNow")))()}),r("promiseDone")((e||(e=n("Promise"))).all([r("fetchVideoCastPayload")({castSessionID:this.$3,environment:i,playerOrigin:l,playerSubOrigin:d,videoID:m}),this.$4.getSession().then(function(e){return t.$12(babelHelpers.extends({},t.$1,{receiverIsConnected:!0})),e})]).then(function(a){var i=a[0],l=a[1];if(i.type==="video_cannot_be_casted")return r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(r("err")("video_cannot_be_casted"),{videoID:m})).mustfix("The video is not eligible to be casted. The cast request is ignored."),(e||(e=n("Promise"))).resolve();if(i.type==="error")return r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(i.error,{videoID:m})).mustfix("There was a failure retrieving video cast payload. Video failed to play."),(e||(e=n("Promise"))).resolve();var s=t.$4.isCasting(c),d=null;return s?d=t.$4.playVideoNow({position:u},i.payload):d=t.$4.startCasting(c,{position:u},i.payload),d.then(function(){var e=babelHelpers.extends({},t.$1,t.$15());t.$12(e);var n=o("CastingState").initialVideoChannelExperienceState();t.$13(n)})}).catch(function(e){t.$14({data:{type:"cast_failed",videoID:m},timestamp:(s||(s=r("performanceAbsoluteNow")))()}),o("CastingErrorUtils").isChromecastError(e,"cancel")||r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(r("getErrorSafe")(e),{videoID:m})).mustfix("Failed to cast video.")}).finally(function(){var e=babelHelpers.extends({},t.$1,{isCastPending:!1});t.$12(e)})))},a.startPhotoCasting=function(a){var t=this,i=a.environment;this.$1.isCastPending||(this.$12(babelHelpers.extends({},this.$1,{isCastPending:!0})),this.$13(null),this.$14({data:{type:"photo_cast_requested"},timestamp:(s||(s=r("performanceAbsoluteNow")))()}),r("promiseDone")((e||(e=n("Promise"))).all([o("fetchCtvCastPayload").fetchPhotoCastPayload({castSessionID:this.$3,environment:i}),this.$4.getSession().then(function(e){return t.$12(babelHelpers.extends({},t.$1,{receiverIsConnected:!0})),e})]).then(function(a){var i=a[0],l=a[1];if(i.type==="error")return r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(i.error,{})).mustfix("There was a failure retrieving photo cast payload."),(e||(e=n("Promise"))).resolve();var s=t.$4.startCasting(d,{},i.payload);return s.then(function(){var e=babelHelpers.extends({},t.$1,t.$15());t.$12(e),t.$13(o("CastingState").initialPhotoExperienceState())})}).catch(function(e){o("CastingErrorUtils").isChromecastError(e,"cancel")||r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(r("getErrorSafe")(e),{})).mustfix("Failed to start photo casting session.")}).finally(function(){var e=babelHelpers.extends({},t.$1,{isCastPending:!1});t.$12(e)})))},a.startAlbumSlideshow=function(a){var t=this,i=a.albumID,l=a.environment;this.$1.isCastPending||(this.$12(babelHelpers.extends({},this.$1,{isCastPending:!0})),this.$13(null),r("promiseDone")((e||(e=n("Promise"))).all([o("fetchCtvCastPayload").fetchAlbumCastPayload({albumID:i,castSessionID:this.$3,environment:l}),this.$4.getSession().then(function(e){return t.$12(babelHelpers.extends({},t.$1,{receiverIsConnected:!0})),e})]).then(function(a){var i=a[0],l=a[1];if(i.type==="album_cannot_be_casted")return r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(r("err")("album_cannot_be_casted"),{})).mustfix("The album is not eligible to be casted."),(e||(e=n("Promise"))).resolve();if(i.type==="error")return r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(i.error,{})).mustfix("There was a failure retrieving album cast payload."),(e||(e=n("Promise"))).resolve();var s=t.$4.startCasting(u,{},i.payload);return s.then(function(){var e=babelHelpers.extends({},t.$1,t.$15());t.$12(e);var n=o("CastingState").initialPhotoAlbumExperienceState();t.$13(n)})}).catch(function(e){o("CastingErrorUtils").isChromecastError(e,"cancel")||r("FBLogger")("comet_cast_sender").catching(o("CastingErrorUtils").appendCastingMetadataToExpandedError(r("getErrorSafe")(e),{})).mustfix("Failed to cast album.")}).finally(function(){var e=babelHelpers.extends({},t.$1,{isCastPending:!1});t.$12(e)})))},a.disconnect=function(){r("promiseDone")(this.$4.stopCasting())},a.play=function(){r("promiseDone")(this.$4.playVideo())},a.pause=function(){r("promiseDone")(this.$4.pauseVideo())},a.setVolume=function(t){r("promiseDone")(this.$4.setVolume(t))},a.mute=function(){r("promiseDone")(this.$4.mute())},a.unmute=function(){r("promiseDone")(this.$4.unmute())},a.seek=function(t){r("promiseDone")(this.$4.seekVideo(t))},a.showSingleMedia=function(t){var e=null;switch(t.type){case"photo":e={photo_id:t.photoID};break;case"video":e={video_id:t.videoID};break;default:t.type;return}r("promiseDone")(this.$4.showPhoto({media_parameters:e,request_id:r("uuidv4")()}))},a.playAlbumSlideshow=function(){r("promiseDone")(this.$4.playAlbumSlideshow())},a.pauseAlbumSlideshow=function(){r("promiseDone")(this.$4.pauseAlbumSlideshow())},a.nextPhotoAlbumSlideshow=function(){r("promiseDone")(this.$4.nextPhotoAlbumSlideshow())},a.previousPhotoAlbumSlideshow=function(){r("promiseDone")(this.$4.previousPhotoAlbumSlideshow())},a.$12=function(t){t!==this.$1&&(this.$1=t,this.$5.slice().forEach(function(e){e(t)}))},a.$13=function(t){t!==this.$2&&(this.$2=t,this.$6.slice().forEach(function(e){e(t)}))},a.$14=function(t){this.$7.slice().forEach(function(e){e(t)})},a.$16=function(t){var e=this.$1,n=this.$2;if(n!=null&&n.type==="video_channel"){var o=t.data.video_id,a=this.$4.getVolume()||0,i=this.$4.isMuted()||!1;o!=null&&this.$14({data:{playbackState:t.data.state,playerInfo:(t==null?void 0:t.player_info)||null,receiverInfo:(t==null?void 0:t.receiver_info)||null,type:"video_status_update",videoID:o},timestamp:(s||(s=r("performanceAbsoluteNow")))()});var l={receiverIsConnected:!0,receiverIsMuted:i,receiverVolume:a};if(o==null)this.$12(babelHelpers.extends({},e,l)),this.$13(babelHelpers.extends({},n,{currentDuration:null,currentPlaybackState:null,currentPosition:null,currentVideoID:null}));else{var u=babelHelpers.extends({},e,l);this.$12(u),this.$13(babelHelpers.extends({},n,{currentDuration:t.data.duration!=null?t.data.duration:n.currentDuration,currentPlaybackState:t.data.state,currentPosition:t.data.position,currentVideoID:o}))}}},a.$17=function(t){var e=this.$2;if(e!=null&&e.type==="photo_album"&&t.data.name==="PhotoAlbum"){var n,r,a,i=o("TV2CommsParseUtils").parseCastingReceiverPhotoAlbumReportedState(t.data.payload),l=i.media_state,s=((n=(r=l.photo_state)==null?void 0:r.photo_id)!=null?n:(a=l.video_state)==null?void 0:a.video_id)||null,u=this.$18(l);this.$13(babelHelpers.extends({},e,{currentAssetID:s,currentPlaybackState:u}))}},a.$15=function(){return{receiverFriendlyName:this.$4.getFriendlyName()||null,receiverIsMuted:this.$4.isMuted()||null,receiverVolume:this.$4.getVolume()||0}},a.$18=function(t){return t.photo_state!=null?t.photo_state.photo_playback_state==="play"?"play":"paused":t.video_state!=null?["play","seeking"].includes(t.video_state.video_playback_state)?"play":"paused":null},t})();l.default=m}),98);
__d("CastingEventReporter",["ConnectedTvLoggingFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=this;this.$4=function(e){switch(e.data.type){case"cast_requested":t.logWithAvailableContext({event:"cast_requested",video_id_override:e.data.videoID}),t.$5(e);break;case"photo_cast_requested":t.logWithAvailableContext({event:"photo_cast_requested"}),t.$5(e);break;case"cast_failed":t.$5(e);break;case"video_status_update":{t.$6(e.data.receiverInfo,e.data.playerInfo),t.$5(e);break}default:break}},this.$1=null,this.$2=null,this.$3={cast_session_id:e,is_google_cast_bg:null,third_party_app_id:null,tv_os_version:null,tv_player_instance_key:null,tv_player_version:null,tv_session_id:null,tv_web_client_revision:null}}var t=e.prototype;return t.destroy=function(){this.$1!=null&&this.$1(),this.$1=null},t.bindToCastingController=function(t){this.$1=t.subscribeToCastingEvent(this.$4)},t.logWithAvailableContext=function(t){var e=this;r("ConnectedTvLoggingFalcoEvent").log(function(){return babelHelpers.extends({},e.$3,t)})},t.$5=function(t){var e=t.data;switch(e.type){case"cast_requested":this.$2={data:e,timestamp:t.timestamp};break;case"cast_failed":{var n=this.$2;this.logWithAvailableContext({event:"cast_failed",perf_time_ms:Math.floor(n!=null?t.timestamp-n.timestamp:0),video_id_override:e.videoID}),this.$2=null;break}case"video_status_update":{var r=this.$2;if(r==null)break;var o=r.data.videoID;e.videoID===o&&e.playbackState==="play"?(this.logWithAvailableContext({event:"cast_started",perf_time_ms:Math.floor(t.timestamp-r.timestamp)}),this.$2=null):e.videoID!==o&&(this.$2=null);break}}},t.$6=function(t,n){var e=(t==null?void 0:t.third_party_app_id)||null,r=(t==null?void 0:t.cast_receiver_logger_session_id)||null,o=(t==null?void 0:t.is_google_cast_bg)||null,a=(t==null?void 0:t.os_version)||null,i=(t==null?void 0:t.web_client_revision)||null,l=(n==null?void 0:n.player_instance_key)||null,s=(n==null?void 0:n.player_version)||null;this.$3=babelHelpers.extends({},this.$3,{is_google_cast_bg:o,third_party_app_id:e,tv_os_version:a,tv_player_instance_key:l,tv_player_version:s,tv_session_id:r,tv_web_client_revision:i})},e})();l.default=e}),98);
__d("TV2MessageTypes",[],(function(t,n,r,o,a,i){"use strict";var e="urn:x-cast:com.facebook.fb",l="urn:x-cast:com.google.cast.media";i.FBAPP_CAST_PROTOCOL_NAMESPACE=e,i.GOOGLE_CAST_MEDIA_PROTOCOL_NAMESPACE=l}),66);
__d("TV2PhotoShowRequest",[],(function(t,n,r,o,a,i){"use strict";function e(e){return m(JSON.parse(e),y("TV2PhotoShowRequest"))}function l(e){return JSON.stringify(p(e,y("TV2PhotoShowRequest")),null,2)}function s(e,t,n){throw n===void 0&&(n=""),Error(n?'Invalid value for key "'+n+'". Expected type '+JSON.stringify(e)+" but got "+JSON.stringify(t):"Invalid value "+JSON.stringify(t)+" for type "+JSON.stringify(e))}function u(e){if(e.jsonToJS===void 0){var t={};e.props.forEach(function(e){return t[e.json]={key:e.js,typ:e.typ}}),e.jsonToJS=t}return e.jsonToJS}function c(e){if(e.jsToJSON===void 0){var t={};e.props.forEach(function(e){return t[e.js]={key:e.json,typ:e.typ}}),e.jsToJSON=t}return e.jsToJSON}function d(e,t,n,r){r===void 0&&(r="");function o(e,t){return typeof e==typeof t?t:s(e,t,r)}function a(e,t){for(var r=e.length,o=0;o<r;o++){var a=e[o];try{return d(t,a,n)}catch(e){}}return s(e,t)}function i(e,t){return e.indexOf(t)!==-1?t:s(e,t)}function l(e,t){return Array.isArray(t)?t.map(function(t){return d(t,e,n)}):s("array",t)}function u(e){if(e===null)return null;var t=new Date(e);return isNaN(t.valueOf())?s("Date",e):t}function c(e,t,r){if(r===null||typeof r!="object"||Array.isArray(r))return s("object",r);var o={};return Object.getOwnPropertyNames(e).forEach(function(t){var a=e[t],i=Object.prototype.hasOwnProperty.call(r,t)?r[t]:void 0;o[a.key]=d(i,a.typ,n,a.key)}),Object.getOwnPropertyNames(r).forEach(function(a){Object.prototype.hasOwnProperty.call(e,a)||(o[a]=d(r[a],t,n,a))}),o}if(t==="any")return e;if(t===null)return e===null?e:s(t,e);if(t===!1)return s(t,e);for(;typeof t=="object"&&t.ref!==void 0;)t=C[t.ref];return Array.isArray(t)?i(t,e):typeof t=="object"?Object.prototype.hasOwnProperty.call(t,"unionMembers")?a(t.unionMembers,e):Object.prototype.hasOwnProperty.call(t,"arrayItems")?l(t.arrayItems,e):Object.prototype.hasOwnProperty.call(t,"props")?c(n(t),t.additional,e):s(t,e):t===Date&&typeof e!="number"?u(e):o(t,e)}function m(e,t){return d(e,t,u)}function p(e,t){return d(e,t,c)}function _(e){return{arrayItems:e}}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{unionMembers:t}}function g(e,t){return{props:e,additional:t}}function h(e){return{props:[],additional:e}}function y(e){return{ref:e}}var C={TV2PhotoShowRequest:g([{json:"media_parameters",js:"media_parameters",typ:y("MediaParameters")},{json:"request_id",js:"request_id",typ:""}],"any"),MediaParameters:g([{json:"photo_id",js:"photo_id",typ:f(void 0,"")},{json:"video_id",js:"video_id",typ:f(void 0,"")}],"any")};a.exports={TV2PhotoShowRequestToJson:l,toTV2PhotoShowRequest:e}}),null);
__d("CastingReceiverManager",["CastingChromecastScanner","FBLogger","Promise","Random","SubscriptionsHandler","TV2CommsParseUtils","TV2MessageTypes","TV2PhotoShowRequest","getErrorSafe","promiseDone","removeFromArray"],(function(t,n,r,o,a,i,l){"use strict";var e,s="1.2.0",u=(function(){function t(e){var t=this;this.$5=null,this.$6=null,this.$10=null,this.$11=[],this.$12=[],this.$13=[],this.$14=[],this.$15=[],this.$16=[],this.$17=[],this.$18=[],this.$19=[],this.$4=new(r("CastingChromecastScanner"))(e,o("TV2MessageTypes").FBAPP_CAST_PROTOCOL_NAMESPACE),this.$2=null,this.$1=!1,this.$3=0,this.$6=null,this.$9=new Map,this.$20=new(r("SubscriptionsHandler")),this.$20.addSubscriptions(this.$4.onStatusChanged(function(e){var n=e.foundReceiver;t.$15.slice().forEach(function(e){e(!!n)})}),this.$4.onSessionDisconnected(function(){t.$21(),t.$14.slice().forEach(function(e){e()})}),this.$4.onSessionStarted(function(e){t.$22(e)}),this.$4.onError(function(e,n){t.$11.slice().forEach(function(t){t(e,n)})})),this.$7=this.$4.init(),r("promiseDone")(this.$7.then(function(){t.$2=!0,t.$1=!0,t.$13.slice().forEach(function(e){e()})},function(e){t.$2=!1,t.$12.slice().forEach(function(t){t(e)})}))}var a=t.prototype;return a.ready=function(){return this.$7},a.hasSupport=function(){return this.$2},a.hasFoundReceiver=function(){return this.$4.hasFoundReceiver()},a.isCasting=function(t){var e=!!this.$5&&this.$5.isCasting();return e&&t!=null&&(e=this.$6!=null&&this.$6.indexOf(t)>=0),e},a.getSession=function(){var e=this;return this.ready().then(function(){var t=e.$5;t!=null&&!t.isConnected()&&e.$21()}).then(function(){return e.$5?e.$5:(e.$8||(e.$8=e.$23()),e.$8)}).catch(function(t){throw e.$11.slice().forEach(function(e){e(t,"CastingReceiverManager.getSession")}),t}).finally(function(){e.$8=null})},a.startCasting=function(t,n,r){var e=this;return this.$24(t,n,r).then(function(t){t.success?e.$6=t.target:e.$6=null})},a.stopCasting=function(){var t=this;return this.isCasting()?this.ready().then(function(){var e=t.$5;return e!=null&&e.isDisconnected()&&t.$21(),t.$5}).then(function(t){return t==null?(e||(e=n("Promise"))).resolve(null):t.disconnect()}).then(function(){t.$21()}):(e||(e=n("Promise"))).resolve()},a.playVideoNow=function(r,o){return this.isCasting()?this.$25("next_video",babelHelpers.extends({},r,{auto_advance:!0}),o).then(function(){}):(e||(e=n("Promise"))).resolve()},a.skipToNextVideo=function(){return this.isCasting()?this.$25("skip_video").then(function(){}):(e||(e=n("Promise"))).resolve()},a.playVideo=function(r){return this.isCasting()?this.$25("play_video",{position:r||0}).then(function(){}):(e||(e=n("Promise"))).resolve()},a.pauseVideo=function(){return this.isCasting()?this.$25("pause_video").then(function(){}):(e||(e=n("Promise"))).resolve()},a.seekVideo=function(r){return this.isCasting()?this.$25("seek_video",{position:r}).then(function(){}):(e||(e=n("Promise"))).resolve()},a.showPhoto=function(r){return this.isCasting()?this.$25("show_photo",void 0,o("TV2PhotoShowRequest").TV2PhotoShowRequestToJson(r),"Photo").then(function(){}):(e||(e=n("Promise"))).resolve()},a.stopVideo=function(){return this.isCasting()?this.$25("stop_video").then(function(){}):(e||(e=n("Promise"))).resolve()},a.playAlbumSlideshow=function(){return this.isCasting()?this.$25("play_photo",void 0,void 0,"PhotoAlbum").then(function(){}):(e||(e=n("Promise"))).resolve()},a.pauseAlbumSlideshow=function(){return this.isCasting()?this.$25("pause_photo",void 0,void 0,"PhotoAlbum").then(function(){}):(e||(e=n("Promise"))).resolve()},a.nextPhotoAlbumSlideshow=function(){return this.isCasting()?this.$25("next_photo",void 0,void 0,"PhotoAlbum").then(function(){}):(e||(e=n("Promise"))).resolve()},a.previousPhotoAlbumSlideshow=function(){return this.isCasting()?this.$25("previous_photo",void 0,void 0,"PhotoAlbum").then(function(){}):(e||(e=n("Promise"))).resolve()},a.getFriendlyName=function(){return this.$5==null?null:this.$5.getFriendlyName()},a.getVolume=function(){return this.$5==null?null:this.$5.getVolume()},a.setVolume=function(r){return!this.isCasting()||this.$5==null?(e||(e=n("Promise"))).resolve():this.$5.setVolume(r)},a.isMuted=function(){return!this.isCasting()||this.$5==null?null:this.$5.isMuted()},a.mute=function(){return!this.isCasting()||this.$5==null?(e||(e=n("Promise"))).resolve():this.$5.mute()},a.unmute=function(){return!this.isCasting()||this.$5==null?(e||(e=n("Promise"))).resolve():this.$5.unmute()},a.$26=function(){var e=this,t=this.$27();return this.$28(function(e){return{data:{client_cast_session:t,version:s},num:e,target:"version",timestamp:Date.now(),type:"version_request"}}).then(function(t){var n=t.messageNum;return e.$29(function(e){return e.response_num===n})}).then(function(e){if(e.type!=="version_response")throw r("FBLogger")("comet_cast_sender").mustfixThrow('Response message was not a "version_response"');if(e.data==null)throw r("FBLogger")("comet_cast_sender").mustfixThrow("Version response is missing data");return e.data})},a.$24=function(t,n,o){var e=this,a=this.$27();return this.$28(function(e){return{data:{client_cast_session:a,name:t,params:n,payload:o,version:s},num:e,target:"version_launch",timestamp:Date.now(),type:"version_launch"}}).then(function(t){var n=t.messageNum;return e.$29(function(e){return e.response_num===n})}).then(function(e){if(e.type!=="version_launch_response")throw r("FBLogger")("comet_cast_sender").mustfixThrow('Response message was not a "version_launch_response"');if(e.data==null)throw r("FBLogger")("comet_cast_sender").mustfixThrow("Version launch response is missing data");return e.data})},a.$30=function(){var t=this;return this.$6!=null?(e||(e=n("Promise"))).resolve(this.$6):this.getSession().then(function(e){return t.$26()}).then(function(e){var n=null;if(typeof e.currently_running_experience=="object"&&(n=e.currently_running_experience),n==null)throw r("FBLogger")("comet_cast_sender").mustfixThrow("Session has no target");return t.$6=n,t.$6})},a.$27=function(){var e=null;return localStorage&&(e=localStorage.getItem("CastingSessionKey")),e==null&&(e=r("Random").uint32().toString(16),localStorage&&localStorage.setItem("CastingSessionKey",e)),e},a.$28=function(t){var e=this.$3+=2;return this.getSession().then(function(n){if(n==null)throw r("FBLogger")("comet_cast_sender").mustfixThrow("The message can not be sent without a session");var o=t(e);return n.sendMessage(o)}).then(function(){return{messageNum:e}})},a.$29=function(a){return this.getSession().then(function(t){if(t==null)throw r("FBLogger")("comet_cast_sender").mustfixThrow("The message cannot be received without a session");return new(e||(e=n("Promise")))(function(e,n){var r=t.onMessage(function(t){try{var i=o("TV2CommsParseUtils").parseTV2CommsFBAppOutboundMessageFromJSON(t);if(i.type==="version_response"||i.type==="version_launch_response"||i.type==="experience_state"||i.type==="command_result"){var l=!a||a(i);l&&(r.remove(),e(i))}}catch(e){r.remove(),n(e)}})})})},a.$25=function(t,n,o,a){var e=this;return this.$30().then(function(r){return e.$28(function(e){return{data:{cmd:t,name:a,params:n,payload:o},num:e,target:r,timestamp:Date.now(),type:"experience_command"}})}).then(function(t){var n=t.messageNum;return e.$29(function(e){return e.response_num===n})}).then(function(e){if(e.type!=="command_result")throw r("FBLogger")("comet_cast_sender").mustfixThrow('Response message was not a "command_result"');return e.data})},a.$23=function(){var e=this;return this.$4.getSession().then(function(t){return e.$5==null&&(e.$5=t),e.$5})},a.$22=function(t){var e=this;this.$5=t;var n="extension";this.$8&&(n="site"),r("promiseDone")(this.$26().then(function(a){var i=a.success;if(i){var l=null;typeof a.currently_running_experience=="object"&&(l=a.currently_running_experience),l!=null&&(e.$6=l),e.$18.slice().forEach(function(r){r(t,{session:t,source:n,success:i,target:e.$6})}),e.$10=t.onMessage(function(t){try{var n=o("TV2CommsParseUtils").parseTV2CommsFBAppOutboundMessageFromJSON(t);e.$17.slice().forEach(function(e){e(n)})}catch(t){var a=r("getErrorSafe")(t);e.$11.slice().forEach(function(e){e(a,"CastingReceiverManager._onSessionStartedHandler")})}})}}))},a.$21=function(){this.$10!=null&&(this.$10.remove(),this.$10=null);var e=this.$5;e!=null&&e.destroy(),this.$5=null,this.$6=null},a.onError=function(t){var e=this.$11;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onExperienceNotSupported=function(t){var e=this.$12;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onExperienceReady=function(t){var e=this.$13;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onReceiverDisconnected=function(t){var e=this.$14;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onReceiverStatusChanged=function(t){var e=this.$15;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionDisconnected=function(t){var e=this.$16;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionMessage=function(t){var e=this.$17;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onSessionStarted=function(t){var e=this.$18;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},a.onStopView=function(t){var e=this.$19;return e.push(t),{remove:function(){r("removeFromArray")(e,t)}}},t})();l.default=u}),98);
__d("CastingControllerHooks",["CastingContext","CastingController","CastingEventReporter","CastingReceiverManager","CurrentUser","ExecutionEnvironment","FBLogger","Promise","guid","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=c.useContext,m=c.useEffect,p=c.useState,_=null;function f(){if(_!=null)return _;var e=new(r("CastingReceiverManager"))("AAF8F49E"),t=r("guid")(),n=new(r("CastingController"))(e,t),o=new(r("CastingEventReporter"))(t);return o.bindToCastingController(n),_={castingController:n,castingEventReporter:o,castingReceiverManager:e},_}function g(){var e=h(),t=e.castingReceiverManager;return t}function h(){var t=o("react-compiler-runtime").c(1);if((s||(s=r("ExecutionEnvironment"))).canUseDOM&&r("CurrentUser").isLoggedIn()){var a;return t[0]===Symbol.for("react.memo_cache_sentinel")?(a=f(),t[0]=a):a=t[0],a}throw new(e||(e=n("Promise")))(y)}function y(){}function C(){var e=h(),t=e.castingController;return t}function b(){var e=o("react-compiler-runtime").c(6),t=g(),n=d(o("CastingContext").SetCastingControllerContext),r=p(!1),a=r[0],i=r[1],l=p(!1),s=l[0],u=l[1],c,_;e[0]!==t?(c=function(){var e=t.onExperienceReady(function(){i(t.hasSupport()||!1)});return i(t.hasSupport()||!1),(function(){return e.remove()})},_=[t],e[0]=t,e[1]=c,e[2]=_):(c=e[1],_=e[2]),m(c,_);var f,h;return e[3]!==t?(f=function(){var e=t.onReceiverStatusChanged(function(){u(t.hasFoundReceiver()||!1)});return u(t.hasFoundReceiver()||!1),(function(){return e.remove()})},h=[t],e[3]=t,e[4]=f,e[5]=h):(f=e[4],h=e[5]),m(f,h),!(n==null||!a||!s)}function v(){var e=o("react-compiler-runtime").c(4),t=C(),n=d(o("CastingContext").SetCastingControllerContext);if(n==null)throw r("FBLogger")("comet_cast_sender").mustfixThrow("Casting has to be initialized inside CastingProvider.");var a,i;e[0]!==t||e[1]!==n?(a=function(){n(t)},i=[n,t],e[0]=t,e[1]=n,e[2]=a,e[3]=i):(a=e[2],i=e[3]),m(a,i)}l.useCastingController=C,l.useIsCastAvailable=b,l.useCastingInitializeIfNecessary=v}),98);
__d("VideoPlayerCastControlIcon.react",["fbt","ix","CastingControllerHooks","CometRelay","CometWatchAndScrollVideoContext","FBLogger","JSResourceForInteraction","VideoPlayerControlIcon.react","VideoPlayerHooks","emptyFunction","fbicon","react","react-compiler-runtime","useCometLazyDialog"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m=e,p=m.useCallback,_=m.useContext,f=r("JSResourceForInteraction")("CometCastingStopWatchAndScrollDialog.react").__setRef("VideoPlayerCastControlIcon.react");function g(e){var t,n=o("react-compiler-runtime").c(14),a=e.subOrigin;o("CastingControllerHooks").useCastingInitializeIfNecessary();var i=(t=(c||(c=o("VideoPlayerHooks"))).useVideoFbid())!=null?t:"",l=(c||(c=o("VideoPlayerHooks"))).useController(),m=o("CometRelay").useRelayEnvironment(),p=o("CastingControllerHooks").useCastingController(),g=_(r("CometWatchAndScrollVideoContext")),h=r("useCometLazyDialog")(f),y=h[0],C=g==null?void 0:g.videoID,b;n[0]!==p||n[1]!==m||n[2]!==a||n[3]!==l||n[4]!==i?(b=function(){if(i!=null){var e=l.getPlayheadPosition();p.startPlayVideoNow({environment:m,origin:"video_home",position:e,subOrigin:a,videoID:i})}else r("FBLogger")("comet_video_player").mustfix("Could not transition to Cast player because videoID was null")},n[0]=p,n[1]=m,n[2]=a,n[3]=l,n[4]=i,n[5]=b):b=n[5];var v=b,S;n[6]!==v||n[7]!==y||n[8]!==C?(S=function(){C!=null?y({onClose:r("emptyFunction"),onContinue:v,startingVideoType:"cast"},r("emptyFunction")):v()},n[6]=v,n[7]=y,n[8]=C,n[9]=S):S=n[9];var R=S,L;n[10]===Symbol.for("react.memo_cache_sentinel")?(L=s._(/*BTDS*/"Cast video to your TV"),n[10]=L):L=n[10];var E=L,k;n[11]===Symbol.for("react.memo_cache_sentinel")?(k=o("fbicon")._(u("788899"),20),n[11]=k):k=n[11];var I;return n[12]!==R?(I=d.jsx(r("VideoPlayerControlIcon.react"),{color:"white",icon:k,label:E,onPress:R,tooltip:E}),n[12]=R,n[13]=I):I=n[13],I}l.default=g}),226);
__d("VideoPlayerCastControl.react",["CastingControllerHooks","VideoPlayerCastControlIcon.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),n=e.subOrigin,a=o("CastingControllerHooks").useIsCastAvailable()&&!r("gkx")("20113");if(!a)return null;var i;return t[0]!==n?(i=s.jsx(r("VideoPlayerCastControlIcon.react"),{subOrigin:n}),t[0]=n,t[1]=i):i=t[1],i}l.default=u}),98);
__d("VideoPlayerSettingsMenuAudioTrackPaneToggle.react",["ix","CometImage.react","CometPressable.react","CometVideoPlayerAutoDubbingWWWStrings","CurrentLocale","VideoPlayerAudioTrackUtils","VideoPlayerSettingsMenu.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={pressableOption:{width:"xh8yej3",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(30),n=e.setPane,a=e.targetAudioTrack,i,l,d,m,p,_,f,g;if(t[0]!==n||t[1]!==(a==null?void 0:a.lang)||t[2]!==(a==null?void 0:a.role)){var h=o("VideoPlayerAudioTrackUtils").getIntlDisplayName(r("CurrentLocale").get(),a==null?void 0:a.lang);i=r("CometPressable.react"),t[11]!==n?(p=function(){n(o("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.AUDIO)},t[11]=n,t[12]=p):p=t[12],_="VideoPlayerSettingsMenu/mainPaneAudioTrackItem",f=c.pressableOption,t[13]===Symbol.for("react.memo_cache_sentinel")?(g=u.jsx("div",{className:"x1ypdohk x1s688f",children:o("CometVideoPlayerAutoDubbingWWWStrings").VOD_TRANSLATIONS_MENU_ITEM}),m={className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1bhwmg6 x13a6bvl x13fj5qh x450l9j xn80e1m"},t[13]=m,t[14]=g):(m=t[13],g=t[14]),l="VideoPlayerSettingsMenu/mainPaneAudioTrackItemLabelManuallySelected",d=(a==null?void 0:a.role)===null?o("CometVideoPlayerAutoDubbingWWWStrings").VOD_TRANSLATIONS_OFF:(a==null?void 0:a.role)==="dub"&&h!=null?o("CometVideoPlayerAutoDubbingWWWStrings").getLanguageLabel(h):null,t[0]=n,t[1]=a==null?void 0:a.lang,t[2]=a==null?void 0:a.role,t[3]=i,t[4]=l,t[5]=d,t[6]=m,t[7]=p,t[8]=_,t[9]=f,t[10]=g}else i=t[3],l=t[4],d=t[5],m=t[6],p=t[7],_=t[8],f=t[9],g=t[10];var y;t[15]!==l||t[16]!==d?(y=u.jsx("span",{"data-testid":void 0,children:d}),t[15]=l,t[16]=d,t[17]=y):y=t[17];var C;t[18]===Symbol.for("react.memo_cache_sentinel")?(C={className:"x3nfvp2 xmgb6t1 xwklpps"},t[18]=C):C=t[18];var b;t[19]===Symbol.for("react.memo_cache_sentinel")?(b=u.jsx("span",babelHelpers.extends({},C,{children:u.jsx(r("CometImage.react"),{src:s("480587")})})),t[19]=b):b=t[19];var v;t[20]!==m||t[21]!==y?(v=u.jsxs("div",babelHelpers.extends({},m,{children:[y,b]})),t[20]=m,t[21]=y,t[22]=v):v=t[22];var S;return t[23]!==i||t[24]!==v||t[25]!==p||t[26]!==_||t[27]!==f||t[28]!==g?(S=u.jsxs(i,{onPress:p,testid:void 0,xstyle:f,children:[g,v]}),t[23]=i,t[24]=v,t[25]=p,t[26]=_,t[27]=f,t[28]=g,t[29]=S):S=t[29],S}l.default=d}),98);/*FB_PKG_DELIM*/
__d("getPeopleTypeaheadNullStateText",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";function e(){return s._(/*BTDS*/"No people found")}l.default=e}),226);
__d("CometMediaViewerMentionsTypeaheadEmptyState.react",["FDSText.react","getPeopleTypeaheadNullStateText","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e=o("react-compiler-runtime").c(2),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={className:"x6s0dn4 x78zum5 xc9qbxq xl56j7k"},e[0]=t):t=e[0];var n;return e[1]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx("div",babelHelpers.extends({},t,{children:s.jsx(r("FDSText.react"),{align:"center",color:"secondary",type:"body2",children:r("getPeopleTypeaheadNullStateText")()})})),e[1]=n):n=e[1],n}l.default=u}),98);
__d("CometMentions.react",["baseTypeaheadFlattenEntries","cometTypeaheadKeyboardNavigationUtils","react","useBaseTypeaheadDataSourceFetch"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","context","dataSource","inputElement","layoutStrategyRenderer","loggingProvider","onAriaChange","onEntriesUpdated","onHighlightEntry","onSelectedEntry","onVisibilityChange","position","queryString","viewStrategyRenderer"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useEffect,p=c.useImperativeHandle,_=c.useRef,f=c.useState;function g(t){var n=t.ref,a=t.context,i=t.dataSource,l=t.inputElement,s=t.layoutStrategyRenderer,c=t.loggingProvider,g=t.onAriaChange,y=t.onEntriesUpdated,C=t.onHighlightEntry,b=t.onSelectedEntry,v=t.onVisibilityChange,S=t.position,R=S===void 0?"above":S,L=t.queryString,E=t.viewStrategyRenderer,k=babelHelpers.objectWithoutPropertiesLoose(t,e),I=_(null),T=f(null),D=T[0],x=T[1],$=_([]),P=f($.current),N=P[0],M=P[1],w=f(!0),A=w[0],F=w[1],O=_(null),B=_(L);m(function(){B.current=L},[L]);var W=d(function(e){C&&C(e),x(e),I.current=e},[C]),q=r("useBaseTypeaheadDataSourceFetch")({dataSource:i,onResolvePayload:d(function(e){var t,n=e.entries;$.current=n,M(n);var o=r("baseTypeaheadFlattenEntries")(n),a=o[0],i=I==null||(t=I.current)==null?void 0:t.key;a!=null&&!o.map(function(e){return e.key}).includes(i)&&W(a),y&&y(n.length>0)},[W,y])}),U=q[0].isLoading,V=q[1],H=A&&(N.length>0||U);m(function(){return H?c.startSession(B.current):c.isSessionActive()&&c.maybeEndSession(B.current,r("baseTypeaheadFlattenEntries")($.current)),v(H),function(){c.isSessionActive()&&c.maybeEndSession(B.current,r("baseTypeaheadFlattenEntries")($.current))}},[v,c,H]),m(function(){F(!0),V({query:L})},[V,L,i]),p(n,function(){return{getViewRef:function(){return O},hasSelection:function(){return h(r("baseTypeaheadFlattenEntries")($.current),D)},moveDown:function(){o("cometTypeaheadKeyboardNavigationUtils").moveDown(r("baseTypeaheadFlattenEntries")($.current),D!=null?D.key:null,W,!1)},moveUp:function(){o("cometTypeaheadKeyboardNavigationUtils").moveUp(r("baseTypeaheadFlattenEntries")($.current),D!=null?D.key:null,W,!1)},select:function(){var e=r("baseTypeaheadFlattenEntries")($.current);b&&D!=null&&h(e,D)&&(c.isSessionActive()&&c.maybeEndSession(L,e,D),b(D))}}},[D,W,b,c,L]);var G=d(function(e){var t=r("baseTypeaheadFlattenEntries")($.current);b&&h(t,e)&&(c.isSessionActive()&&c.maybeEndSession(L,t,e),b(e))},[b,c,L]);return m(function(){if(H===!1)return;function e(e,t){for(var n=e.parentElement;n!=null&&n!==t;)n=n.parentElement;return n===t}var t=function(n){var t=n.target;if(t instanceof HTMLElement){var r=O.current,o=r!==null&&(t===r||e(t,r)),a=l!==null&&(t===l||e(t,l));F(o||a)}};return document.addEventListener("click",t),function(){return document.removeEventListener("click",t)}},[l,H]),H?u.jsx(s,{ariaProps:{role:"listbox"},context:a,entries:N,highlightedEntry:D,isLoading:U,onAriaChange:g,onBlur:k.onBlur,onHighlightEntry:W,onPressEntry:G,onPressEntryIn:G,position:R,queryString:L,viewRef:O,viewStrategyRenderer:E}):null}g.displayName=g.name+" [from "+i.id+"]";function h(e,t){if(t==null)return!1;var n=t.key;return e.find(function(e){return e.key===n})!=null}l.default=g}),98);
__d("getCometComposerMentionsSearchForLexical",["Lexical"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=e.anchor;if(n.type!=="text")return null;var r=n.getNode();if(t!=null&&!t()||t==null&&!r.isSimpleText())return null;var o=n.offset;return r.getTextContent().slice(0,o)}function s(t,n){return t.getEditorState().read(function(){var t=o("Lexical").$getSelection();return o("Lexical").$isRangeSelection(t)?e(t,n):null})}l.default=s}),98);
__d("useCometMentionsBootstrapForLexical",["Lexical","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef;function d(e,t){var n=o("react-compiler-runtime").c(4),r=c(!1),a,i;n[0]!==t||n[1]!==e?(a=function(){if(!r.current){var n=e.getRootElement()===document.activeElement;if(n){t(),r.current=!0;return}var a=e.registerCommand(o("Lexical").FOCUS_COMMAND,function(){return t(),r.current=!0,a(),!1},o("Lexical").COMMAND_PRIORITY_LOW);return a}},i=[t,e,r],n[0]=t,n[1]=e,n[2]=a,n[3]=i):(a=n[2],i=n[3]),u(a,i)}l.default=d}),98);
__d("MentionsSessionEndWithoutClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("445"),s=o("FalcoLoggerInternal").create("mentions_session_end_without_click",e),u=s;l.default=u}),98);
__d("MentionsSessionStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("446"),s=o("FalcoLoggerInternal").create("mentions_session_start",e),u=s;l.default=u}),98);
__d("MentionsSuggestionClickedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("447"),s=o("FalcoLoggerInternal").create("mentions_suggestion_clicked",e),u=s;l.default=u}),98);
__d("WithTagSuggestionContinueClickedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3701"),s=o("FalcoLoggerInternal").create("with_tag_suggestion_continue_clicked",e),u=s;l.default=u}),98);
__d("CometMentionsLoggingProvider",["FBLogger","MentionsSessionEndWithoutClickFalcoEvent","MentionsSessionStartFalcoEvent","MentionsSuggestionClickedFalcoEvent","WithTagSuggestionContinueClickedFalcoEvent","guid"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$2=!1,this.$3=null,this.$1=e}var t=e.prototype;return t.getSessionID=function(){return this.$3==null&&r("FBLogger")("search").mustfix("Mentions logging sessionID does not exist."),this.$3},t.isSessionActive=function(){return this.$2},t.startSession=function(t){var e=this;if(t!=null){var n=r("guid")();this.$3=n,this.$2=!0,r("MentionsSessionStartFalcoEvent").log(function(){return babelHelpers.extends({},e.$1,{session_id:n,typed_query:t})})}},t.maybeEndSession=function(t,n,o,a){if(t!=null){var e=n!=null?JSON.stringify(n.map(function(e){return{id:e.key}})):null,i=babelHelpers.extends({},this.$1,{serialized_candidate_suggestions:e,session_id:this.getSessionID(),typed_query:t});if(o!=null){var l,s=o.key,u=(l=n==null?void 0:n.findIndex(function(e){return e.key===s}))!=null?l:null,c=isNaN(parseInt(o.key,10))?"0":o.key;if(a===!0){r("WithTagSuggestionContinueClickedFalcoEvent").log(function(){return babelHelpers.extends({},i,{selected_position:String(u),selected_result_display_text:o.label,selected_result_id:c,selected_result_id_string:o.key})});return}else r("MentionsSuggestionClickedFalcoEvent").log(function(){return babelHelpers.extends({},i,{selected_position:String(u),selected_result_display_text:o.label,selected_result_id:c,selected_result_id_string:o.key})})}else r("MentionsSessionEndWithoutClickFalcoEvent").log(function(){return i});this.$3=null,this.$2=!1}},e})();l.default=e}),98);
__d("useCometMentionsLoggingProvider",["CometMentionsLoggingProvider","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo,u={context_id:null,context_type:"unknown",surface:null,typeahead_type:null};function c(e){var t=o("react-compiler-runtime").c(2),n=e===void 0?u:e,a;return t[0]!==n?(a=new(r("CometMentionsLoggingProvider"))(n),t[0]=n,t[1]=a):a=t[1],a}l.default=c}),98);
__d("useCometMentionsResolutionForLexical",["getCometComposerMentionsSearchForLexical","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.startTransition,c=s.useEffect,d=s.useState;function m(e,t){var n=window.getSelection();if(n===null||!n.isCollapsed||e===null)return!1;var r=n.anchorNode,o=e.leadOffset,a=n.anchorOffset;try{t.setStart(r,o),t.setEnd(r,a)}catch(e){return!1}return!0}function p(e,t,n){var a=o("react-compiler-runtime").c(5),i=d(null),l=i[0],s=i[1],p,_;return a[0]!==n||a[1]!==t||a[2]!==e?(p=function(){var o=document.createRange(),a=null,i=null,l=null,c=function(){var c=o,d=r("getCometComposerMentionsSearchForLexical")(e,n);if(!(d===a||c===null)){a=d;var p=t(d),_=p.dataSource,f=p.searchResult;if(!(_===i&&f===l)){var g=m(f,c);i=_,l=f,u(!g||_===null||f===null?function(){return s(null)}:function(){s({dataSource:_,range:c,searchResult:f})})}}},d=e.registerUpdateListener(c);return c(),(function(){o=null,d()})},_=[n,t,e],a[0]=n,a[1]=t,a[2]=e,a[3]=p,a[4]=_):(p=a[3],_=a[4]),c(p,_),l}l.default=p}),98);
__d("CometMentionsForLexical.react",["CometLexicalContentEditableCommands","CometMentions.react","FBLogger","Lexical","LexicalText","LexicalUtils","emptyFunction","getCometComposerMentionsSearchForLexical","react","react-compiler-runtime","useCometMentionsBootstrapForLexical","useCometMentionsLoggingProvider","useCometMentionsResolutionForLexical"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect,m=u.useMemo,p=u.useRef,_=u.useState;function f(e){var t=e.$isValidSelection,n=e.createNodeStrategy,a=e.dataSourceResolverConfig,i=a.bootstrap,l=a.resolver,u=e.editor,m=e.layoutStrategyRenderer,_=e.mentionsHandlerForSelectedEntry,f=e.mentionsLoggerContext,h=e.onMentionsEntrySelected,b=e.position,v=b===void 0?"below":b,S=e.viewStrategyRenderer,R=r("useCometMentionsResolutionForLexical")(u,l,t),L=p(!1),E=g(u),k=E[0],I=E[1],T=p(null),D=C(u);r("useCometMentionsBootstrapForLexical")(u,i),d(function(){return u.registerCommand(o("Lexical").BLUR_COMMAND,function(){return D(),!1},o("Lexical").COMMAND_PRIORITY_LOW)},[u,D]);var x=c(function(){D()},[D]);d(function(){var e,t=[{handler:function(t){return t.hasSelection()?(t.select(),!0):!1},type:(e=o("Lexical")).KEY_ENTER_COMMAND},{handler:function(t){return t.hasSelection()?(t.select(),!0):!1},type:e.KEY_TAB_COMMAND},{handler:function(t){return t.moveUp(),!0},type:e.KEY_ARROW_UP_COMMAND},{handler:function(t){return t.moveDown(),!0},type:e.KEY_ARROW_DOWN_COMMAND},{handler:function(){return D(),I(),!0},type:e.KEY_ESCAPE_COMMAND}];return o("LexicalUtils").mergeRegister.apply(void 0,t.map(function(e){var t=e.handler,n=e.type;return u.registerCommand(n,function(e){var n=T.current,r=L.current;if(n===null||!r||k)return!1;if(t(n)){var o=e;return o.preventDefault(),o.stopPropagation(),!0}return!1},o("Lexical").COMMAND_PRIORITY_CRITICAL)}))},[I,u,D,k]);var $=c(function(e){L.current=e},[]),P=c(function(e){e||D()},[D]),N=c(function(e){var o=r("getCometComposerMentionsSearchForLexical")(u,t);if(o==null){r("FBLogger")("search").warn("Race condition where the user selected a mention but theres no text in the editor");return}var a=l(o),i=a.searchResult;if(i==null){r("FBLogger")("CometComposer").mustfix("onPressEntry was called and no search result was found for the query %s",o);return}D();var s=_==null?void 0:_(e);s!=null&&!s.shouldMentionSelectedEntry||(y(u,n,e,i,t),h==null||h(e),I())},[u,t,l,D,_,n,h,I]),M=r("useCometMentionsLoggingProvider")(f);return R===null||k?(D(),L.current=!1,null):s.jsx(r("CometMentions.react"),{context:R.range,dataSource:R.dataSource,inputElement:u.getRootElement(),layoutStrategyRenderer:m,loggingProvider:M,onAriaChange:D,onBlur:x,onEntriesUpdated:P,onFocus:r("emptyFunction"),onSelectedEntry:N,onVisibilityChange:$,position:v,queryString:R.searchResult.matchingString,ref:T,viewStrategyRenderer:S})}f.displayName=f.name+" [from "+i.id+"]";function g(e){var t=o("react-compiler-runtime").c(7),n=_(!1),r=n[0],a=n[1],i,l;t[0]!==e||t[1]!==r?(i=function(){if(r){var t=e.getEditorState().read(o("LexicalText").$rootTextContent);return e.registerTextContentListener(function(e){t!==null&&e!==t&&a(!1),t=e})}},l=[e,r],t[0]=e,t[1]=r,t[2]=i,t[3]=l):(i=t[2],l=t[3]),d(i,l);var s;t[4]===Symbol.for("react.memo_cache_sentinel")?(s=function(){return a(!0)},t[4]=s):s=t[4];var u;return t[5]!==r?(u=[r,s],t[5]=r,t[6]=u):u=t[6],u}function h(e,t,n){for(var r=n,o=r;o<=t.length;o++)e.substr(-o)===t.substr(0,o)&&(r=o);return r}function y(e,t,n,r,a){e.update(function(){var e=o("Lexical").$getSelection();if(!(!o("Lexical").$isRangeSelection(e)||!e.isCollapsed())){var i=e.anchor;if(i.type==="text"){var l=i.getNode();if(!(a!=null&&!a()||a==null&&!l.isSimpleText())){var s=i.offset,u=l.getTextContent().slice(0,s),c=n.label,d=r.replaceableString.length,m=h(u,c,d),p=s-m;p<0||t({anchorNode:l,endOffset:s,selectedEntry:n,startOffset:p})}}}})}function C(e){var t=o("react-compiler-runtime").c(2),n=p(void 0),r=p(void 0),a;return t[0]!==e?(a=function(a,i){var t=n.current,l=r.current;(t!==a||l!==i)&&(n.current=a,r.current=i,e.dispatchCommand(o("CometLexicalContentEditableCommands").COMET_LEXICAL_ARIA_COMMAND,{activeDescendantID:a,controlsID:i}))},t[0]=e,t[1]=a):a=t[1],a}l.default=f}),98);
__d("useBaseMentionsLayoutStrategyARIAProps.react",["baseTypeaheadFlattenEntries","react","react-compiler-runtime","useCometTypeaheadLayoutContextualStrategyARIAProps"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e){var t=o("react-compiler-runtime").c(9),n=e.entries,a=e.highlightedEntry,i=e.onAriaChange,l;t[0]!==n?(l=r("baseTypeaheadFlattenEntries")(n),t[0]=n,t[1]=l):l=t[1];var u;t[2]!==a||t[3]!==l?(u={activeEntries:l,helperText:"",highlightedEntry:a,inputLabel:"",isOpened:!0,viewRole:"listbox"},t[2]=a,t[3]=l,t[4]=u):u=t[4];var c=r("useCometTypeaheadLayoutContextualStrategyARIAProps")(u),d=c.ariaInputProps,m=c.ariaViewProps,p,_;return t[5]!==d||t[6]!==i?(p=function(){return i(d["aria-activedescendant"],d["aria-controls"])},_=[d,i],t[5]=d,t[6]=i,t[7]=p,t[8]=_):(p=t[7],_=t[8]),s(p,_),m}l.default=u}),98);
__d("CometSearchTypeaheadBaseLayoutMentionsStrategy.react",["CometMediaViewerMentionsTypeaheadEmptyState.react","react","react-compiler-runtime","useBaseMentionsLayoutStrategyARIAProps.react"],(function(t,n,r,o,a,i,l){"use strict";var e=["isLoading","isLoadingIndicatorEnabled","onAriaChange","viewStrategyRenderer"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(21),a,i,l,s,c;n[0]!==t?(i=t.isLoading,c=t.isLoadingIndicatorEnabled,l=t.onAriaChange,a=t.viewStrategyRenderer,s=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5]);var d=c===void 0?!1:c,m;n[6]!==l||n[7]!==s.entries||n[8]!==s.highlightedEntry?(m={entries:s.entries,highlightedEntry:s.highlightedEntry,onAriaChange:l},n[6]=l,n[7]=s.entries,n[8]=s.highlightedEntry,n[9]=m):m=n[9];var p=r("useBaseMentionsLayoutStrategyARIAProps.react")(m),_=d?i:!1,f;n[10]!==a||n[11]!==p||n[12]!==s||n[13]!==_?(f=u.jsx(a,babelHelpers.extends({},s,{ariaProps:p,isLoading:_})),n[10]=a,n[11]=p,n[12]=s,n[13]=_,n[14]=f):f=n[14];var g;n[15]!==i||n[16]!==s.entries?(g=!i&&s.entries.length===0?u.jsx(r("CometMediaViewerMentionsTypeaheadEmptyState.react"),{}):null,n[15]=i,n[16]=s.entries,n[17]=g):g=n[17];var h;return n[18]!==f||n[19]!==g?(h=u.jsxs("div",{children:[f,g]}),n[18]=f,n[19]=g,n[20]=h):h=n[20],h}l.default=c}),98);
__d("CometMentionsLayoutStrategy.react",["fbt","CometContextualLayer.react","CometSearchTypeaheadBaseLayoutMentionsStrategy.react","FDSPopover.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["ariaProps","context","entries","onBlur","position","viewRef"],u,c=u||(u=o("react"));function d(t){var n=o("react-compiler-runtime").c(21),a,i,l,u,d,m,p;if(n[0]!==t?(a=t.ariaProps,i=t.context,l=t.entries,u=t.onBlur,d=t.position,p=t.viewRef,m=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=u,n[5]=d,n[6]=m,n[7]=p):(a=n[1],i=n[2],l=n[3],u=n[4],d=n[5],m=n[6],p=n[7]),l.length===0)return null;var _;n[8]===Symbol.for("react.memo_cache_sentinel")?(_=s._(/*BTDS*/"Mentions suggestions"),n[8]=_):_=n[8];var f;n[9]!==a||n[10]!==l||n[11]!==m?(f=c.jsx(r("CometSearchTypeaheadBaseLayoutMentionsStrategy.react"),babelHelpers.extends({ariaProps:a,entries:l,isLoading:!1},m)),n[9]=a,n[10]=l,n[11]=m,n[12]=f):f=n[12];var g;n[13]!==u||n[14]!==f||n[15]!==p?(g=c.jsx(r("FDSPopover.react"),{"aria-label":_,onBlur:u,ref:p,role:"listbox",children:f}),n[13]=u,n[14]=f,n[15]=p,n[16]=g):g=n[16];var h;return n[17]!==i||n[18]!==d||n[19]!==g?(h=c.jsx(r("CometContextualLayer.react"),{align:"start",context_DEPRECATED:i,position:d,children:g}),n[17]=i,n[18]=d,n[19]=g,n[20]=h):h=n[20],h}l.default=d}),226);
__d("CometMentionsViewListStrategy.react",["CometCompositeStructureContext","FDSText.react","getItemRoleFromCompositeRole","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ariaProps","entries","extraViewProps","highlightedEntry","isLoading","onAbandonTypeahead_DO_NOT_USE","viewItemStrategyRenderer"],s,u=s||(s=o("react")),c=s.useMemo;function d(t){var n,a=o("react-compiler-runtime").c(30),i,l,s,c,d;if(a[0]!==t){var m=t.ariaProps,p=t.entries,_=t.extraViewProps,f=t.highlightedEntry,g=t.isLoading,h=t.onAbandonTypeahead_DO_NOT_USE,y=t.viewItemStrategyRenderer,C=babelHelpers.objectWithoutPropertiesLoose(t,e);l=m,s=p,c=f,i=y,d=C,a[0]=t,a[1]=i,a[2]=l,a[3]=s,a[4]=c,a[5]=d}else i=a[1],l=a[2],s=a[3],c=a[4],d=a[5];var b=l.role,v;if(b!=null){var S;a[6]!==b?(S={role:b},a[6]=b,a[7]=S):S=a[7],v=S}else{var R;a[8]===Symbol.for("react.memo_cache_sentinel")?(R={},a[8]=R):R=a[8],v=R}var L=v,E;a[9]!==b?(E=r("getItemRoleFromCompositeRole")(b),a[9]=b,a[10]=E):E=a[10];var k=E,I;a[11]===Symbol.for("react.memo_cache_sentinel")?(I="x78zum5 xdt5ytf x1iyjqo2",a[11]=I):I=a[11];var T;if(a[12]!==i||a[13]!==s||a[14]!==((n=c)==null?void 0:n.key)||a[15]!==k||a[16]!==d){var D,x,$;if(a[18]!==i||a[19]!==s.length||a[20]!==((D=c)==null?void 0:D.key)||a[21]!==k||a[22]!==d){var P;$=function(t,n){if(t.type==="section"){var e=t.entries,o=t.key,a=t.label;return e.length===0?null:u.jsxs("li",{"aria-selected":"false",role:"option",children:[u.jsx("div",{className:"x889kno x2vl965 x1a8lsjc xe2zdcy",children:u.jsx("label",{htmlFor:o,children:u.jsx(r("FDSText.react"),{color:"primary",type:"entityHeaderMeta2",children:a})})}),u.jsx("ul",{id:o,role:"listbox",children:e.map(function(e){var t;return u.createElement(i,babelHelpers.extends({},d,{entry:e,isActive:e.key===((t=c)==null?void 0:t.key),key:e.key,role:k}))})})]},"section-"+o)}else{var l;return u.createElement(i,babelHelpers.extends({},d,{entry:t,isActive:t.key===((l=c)==null?void 0:l.key),isFirstItem:n===0,isLastItem:n===s.length-1,key:t.key,role:k}))}},a[18]=i,a[19]=s.length,a[20]=(P=c)==null?void 0:P.key,a[21]=k,a[22]=d,a[23]=$}else $=a[23];T=s.map($),a[12]=i,a[13]=s,a[14]=(x=c)==null?void 0:x.key,a[15]=k,a[16]=d,a[17]=T}else T=a[17];var N;a[24]!==L||a[25]!==T?(N=u.jsx(r("CometCompositeStructureContext").Provider,{value:L,children:T}),a[24]=L,a[25]=T,a[26]=N):N=a[26];var M;return a[27]!==l||a[28]!==N?(M=u.jsx("ul",babelHelpers.extends({},l,{className:I,"data-testid":void 0,children:N})),a[27]=l,a[28]=N,a[29]=M):M=a[29],M}l.default=d}),98);
__d("CometSearchMentionsBaseViewItem.react",["CometTypeaheadViewItem.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["onPressEntryIn","queryString"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(6),a,i;if(n[0]!==t){var l=t.onPressEntryIn,s=t.queryString,c=babelHelpers.objectWithoutPropertiesLoose(t,e);a=c,i=function(t,n){n.preventDefault(),l&&l(t,n)},n[0]=t,n[1]=a,n[2]=i}else a=n[1],i=n[2];var d=i,m;return n[3]!==d||n[4]!==a?(m=u.jsx(r("CometTypeaheadViewItem.react"),babelHelpers.extends({},a,{onPressEntryIn:d})),n[3]=d,n[4]=a,n[5]=m):m=n[5],m}l.default=c}),98);
__d("DocumentMentionsRegex",[],(function(t,n,r,o,a,i){"use strict";var e="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;",l="\\b[A-Z][^\\s"+e+"]",s={PUNCTUATION:e,NAME:l},u=s;i.default=u}),66);
__d("FDSShopsFilled20Icon",["cr:15667"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:15667")}),98);
__d("FDSShopsFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("1664042"),20),u=e;l.default=u}),98);
__d("FeedComposerCometMentionsMentionTypeResetViewItem.react",["CometListCellStrict_DEPRECATED.react","CometSearchMentionsBaseViewItem.react","FDSChevronLeftFilled16Icon","FDSText.react","react","react-compiler-runtime","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={addOnIconVertical:{marginBottom:"xat24cr",marginTop:"xdj266r",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(7);r("vulture")("gGHDieg7mm2jsTrKIdPDlmejPMo=");var n=e.entry,a=n.label,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={icon:r("FDSChevronLeftFilled16Icon"),type:"icon"},t[0]=i):i=t[0];var l;t[1]===Symbol.for("react.memo_cache_sentinel")?(l={className:"x15huedd"},t[1]=l):l=t[1];var c;t[2]!==a?(c=s.jsx(r("CometListCellStrict_DEPRECATED.react"),{addOnStart:i,addOnStartOverrideVerticalStyle:u.addOnIconVertical,addOnStartVerticalAlign:"center",contentHorizontalPadding:0,headline:s.jsx("div",babelHelpers.extends({},l,{children:s.jsx(r("FDSText.react"),{type:"headlineEmphasized4",children:a})})),level:4,paddingHorizontal:0}),t[2]=a,t[3]=c):c=t[3];var d;return t[4]!==e||t[5]!==c?(d=s.jsx(r("CometSearchMentionsBaseViewItem.react"),babelHelpers.extends({},e,{children:c})),t[4]=e,t[5]=c,t[6]=d):d=t[6],d}l.default=c}),98);
__d("FeedComposerCometMentionsMentionTypeSelectionViewItem.react",["CometListCellStrict_DEPRECATED.react","CometSearchMentionsBaseViewItem.react","FBLogger","FDSChevronRightFilled16Icon","FDSShopsFilled20Icon","FDSText.react","react","react-compiler-runtime","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={addOnIcon:{marginBottom:"xat24cr",marginTop:"xdj266r",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(12);r("vulture")("Q1EDZhyn9frZO2tJJtSWGW-ofiM=");var n=e.entry,a=n.label,i=n.rawData,l=i.type==="MENTION_TYPE_SELECTION"?i.iconName:null;if(l==null)return r("FBLogger")("comet_composer").mustfix("No icon name found for mention type selection entry"),null;var c=null;e:switch(l){case"shops":{c=r("FDSShopsFilled20Icon");break e}default:}var d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d={color:"secondary",icon:r("FDSChevronRightFilled16Icon"),type:"icon"},t[0]=d):d=t[0];var m;t[1]!==c?(m=c!=null?{icon:c,size:40,type:"contained-icon"}:null,t[1]=c,t[2]=m):m=t[2];var p;t[3]===Symbol.for("react.memo_cache_sentinel")?(p={className:"xcqhk00"},t[3]=p):p=t[3];var _;t[4]!==a?(_=s.jsx("div",babelHelpers.extends({},p,{children:s.jsx(r("FDSText.react"),{type:"headlineEmphasized4",children:a})})),t[4]=a,t[5]=_):_=t[5];var f;t[6]!==m||t[7]!==_?(f=s.jsx(r("CometListCellStrict_DEPRECATED.react"),{addOnEnd:d,addOnEndVerticalAlign:"center",addOnStart:m,addOnStartOverrideVerticalStyle:u.addOnIcon,addOnStartVerticalAlign:"center",contentHorizontalPadding:0,headline:_,level:4,paddingHorizontal:0}),t[6]=m,t[7]=_,t[8]=f):f=t[8];var g;return t[9]!==e||t[10]!==f?(g=s.jsx(r("CometSearchMentionsBaseViewItem.react"),babelHelpers.extends({},e,{children:f})),t[9]=e,t[10]=f,t[11]=g):g=t[11],g}l.default=c}),98);
__d("FeedComposerCometMentionsViewItem.react",["fbt","ix","CometProfileVerificationBadge.react","CometSearchMentionsBaseViewItem.react","FBLogger","FDSIcon.react","FDSProfilePhoto.react","FDSText.react","fbicon","gkx","react","react-compiler-runtime","requireDeferred","stylex"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e=["entry"],c,d,m=d||(d=o("react")),p=d.useCallback,_=r("requireDeferred")("cometPushToast").__setRef("FeedComposerCometMentionsViewItem.react"),f={invitedName:{alignItems:"x6s0dn4",maxWidth:"x11t6kkg",$$css:!0},invitedVerifiedName:{alignItems:"x6s0dn4",maxWidth:"xw5ewwj",$$css:!0},name:{alignItems:"x6s0dn4",display:"x78zum5",$$css:!0}};function g(t){var n=o("react-compiler-runtime").c(55),a,i;n[0]!==t?(a=t.entry,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l=r("gkx")("608"),d;n[3]!==a.rawData?(d=function(){var e,t,n,r=((e=a)==null||(e=e.rawData)==null?void 0:e.isEligible)==null||((t=a)==null||(t=t.rawData)==null?void 0:t.isEligible)===!0;if(!(!l||r)){var o=((n=a)==null||(n=n.rawData)==null?void 0:n.ineligibleReason)!=null?s._(/*BTDS*/"{ineligible reason}",[s._param("ineligible reason",String(a.rawData.ineligibleReason))]):s._(/*BTDS*/"This person cannot be tagged at this time.");_.onReady(function(e){e.cometPushToast({message:o,testid:"FeedCometMentionHintToast"})})}},n[3]=a.rawData,n[4]=d):d=n[4];var p=d,g=a,y=g.rawData,C=!1,b=!1,v=null,S="circle",R=(y==null?void 0:y.isEligible)===!1&&l,L=R?"disabled":null;if(y.type==="MENTION_SEARCH_RESULT"){var E;C=!!y.isExternal,b=y.isVerified,v=y.subtext,S=(E=y.iconShape)!=null?E:"circle"}var k=a,I=k.label,T=i.addOn,D=f.name;T!=null&&(D=b?f.invitedVerifiedName:f.invitedName);var x=y.type!=="SEE_ALL_ENTRY"&&y.type!=="MENTION_TYPE_RESET"?y.photoURI:null;if(x==null)return r("FBLogger")("comet_composer").mustfix("No profile picture found for mentions entry"),null;var $;n[5]!==x?($={uri:x},n[5]=x,n[6]=$):$=n[6];var P;n[7]!==S||n[8]!==$?(P=m.jsx(r("FDSProfilePhoto.react"),{shape:S,size:40,source:$}),n[7]=S,n[8]=$,n[9]=P):P=n[9];var N=P,M;n[10]!==R||n[11]!==i.onPressEntry?(M=R?h:i.onPressEntry,n[10]=R,n[11]=i.onPressEntry,n[12]=M):M=n[12];var w="CometSearchMentionsBaseViewItem/"+I,A,F;n[13]===Symbol.for("react.memo_cache_sentinel")?(A={className:"x6s0dn4 x78zum5 x1gfrnbc x18ip3f8"},F={className:"x1vqgdyp x100vrsf"},n[13]=A,n[14]=F):(A=n[13],F=n[14]);var O;n[15]!==N?(O=m.jsx("div",babelHelpers.extends({},F,{children:N})),n[15]=N,n[16]=O):O=n[16];var B,W;n[17]===Symbol.for("react.memo_cache_sentinel")?(W={className:"x1iyjqo2 x1diwwjn x6ikm8r x10wlt62 xlyipyv xuxw1ft"},B={className:"x78zum5 x1gslohp x12nagc"},n[17]=B,n[18]=W):(B=n[17],W=n[18]);var q;n[19]!==D?(q=(c||(c=r("stylex"))).props(D),n[19]=D,n[20]=q):q=n[20];var U;n[21]!==I||n[22]!==L?(U=m.jsx(r("FDSText.react"),{color:L,numberOfLines:1,type:"headlineEmphasized4",children:I}),n[21]=I,n[22]=L,n[23]=U):U=n[23];var V;n[24]!==q||n[25]!==U?(V=m.jsx("div",babelHelpers.extends({},q,{children:U})),n[24]=q,n[25]=U,n[26]=V):V=n[26];var H;n[27]!==a.key||n[28]!==b?(H=b&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"x51ohtg"}),m.jsx("div",{className:"x1kpxq89",children:m.jsx(r("CometProfileVerificationBadge.react"),{profileID:a.key,size:"small"})}),m.jsx("div",{className:"x51ohtg"})]}),n[27]=a.key,n[28]=b,n[29]=H):H=n[29];var G;n[30]!==C?(G=C?m.jsx("span",{className:"xaso8d8",children:m.jsx(r("FDSIcon.react"),{alt:s._(/*BTDS*/"Not part of your organization"),color:"primary",icon:o("fbicon")._(u("785426"),12)})}):null,n[30]=C,n[31]=G):G=n[31];var z;n[32]!==V||n[33]!==H||n[34]!==G?(z=m.jsxs("div",babelHelpers.extends({},B,{children:[V,H,G]})),n[32]=V,n[33]=H,n[34]=G,n[35]=z):z=n[35];var j;n[36]!==v||n[37]!==L?(j=v!=null&&m.jsxs("div",{className:"x12nagc",children:[m.jsx("div",{className:"xdk7pt"}),m.jsx(r("FDSText.react"),{color:L,numberOfLines:1,type:"meta3",children:v})]}),n[36]=v,n[37]=L,n[38]=j):j=n[38];var K;n[39]!==z||n[40]!==j?(K=m.jsxs("div",babelHelpers.extends({},W,{children:[z,j]})),n[39]=z,n[40]=j,n[41]=K):K=n[41];var Q;n[42]!==T?(Q=m.jsx("div",{children:T}),n[42]=T,n[43]=Q):Q=n[43];var X;n[44]!==K||n[45]!==Q||n[46]!==O?(X=m.jsxs("div",babelHelpers.extends({},A,{children:[O,K,Q]})),n[44]=K,n[45]=Q,n[46]=O,n[47]=X):X=n[47];var Y;return n[48]!==a||n[49]!==p||n[50]!==i||n[51]!==X||n[52]!==M||n[53]!==w?(Y=m.jsx(r("CometSearchMentionsBaseViewItem.react"),babelHelpers.extends({},i,{entry:a,onPressEntry:M,onPressEntryIn:p,testid:void 0,children:X})),n[48]=a,n[49]=p,n[50]=i,n[51]=X,n[52]=M,n[53]=w,n[54]=Y):Y=n[54],Y}function h(){}l.default=g}),226);
__d("FeedComposerCometMentionsViewItemResolver.react",["FeedComposerCometMentionsMentionTypeResetViewItem.react","FeedComposerCometMentionsMentionTypeSelectionViewItem.react","FeedComposerCometMentionsViewItem.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["entry"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(12),a,i;n[0]!==t?(a=t.entry,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l=a,s=l.rawData;switch(s.type){case"MENTION_TYPE_SELECTION":{var c;return n[3]!==a||n[4]!==i?(c=u.jsx(r("FeedComposerCometMentionsMentionTypeSelectionViewItem.react"),babelHelpers.extends({entry:a},i)),n[3]=a,n[4]=i,n[5]=c):c=n[5],c}case"MENTION_TYPE_RESET":{var d;return n[6]!==a||n[7]!==i?(d=u.jsx(r("FeedComposerCometMentionsMentionTypeResetViewItem.react"),babelHelpers.extends({entry:a},i)),n[6]=a,n[7]=i,n[8]=d):d=n[8],d}default:{var m;return n[9]!==a||n[10]!==i?(m=u.jsx(r("FeedComposerCometMentionsViewItem.react"),babelHelpers.extends({entry:a},i)),n[9]=a,n[10]=i,n[11]=m):m=n[11],m}}}l.default=c}),98);
__d("TaggingSurface",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["FEED_COMPOSER","STORIES_COMPOSER","GROUP_COMPOSER","COMMENT","NOTES_COMPOSER","GROUP_ALBUM","FEED_ALBUM"]),l=e;i.default=l}),66);
__d("XFBTaggingSurfaceUtils.facebook",["$InternalEnumUtils","TaggingSurface"],(function(t,n,r,o,a,i,l){var e=o("$InternalEnumUtils").createToJSEnum(r("TaggingSurface")),s=o("$InternalEnumUtils").createFromJSEnum(r("TaggingSurface"));l.toJSEnum=e,l.fromJSEnum=s}),98);
__d("cometBaseMentionsLexicalCreateNodeStrategy",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return function(t){var n=t.anchorNode,o=t.endOffset,a=t.selectedEntry,i=t.startOffset,l;if(i===0){var s=n.splitText(o);l=s[0]}else{var u=n.splitText(i,o);l=u[1]}if(l==null){r("FBLogger")("search").mustfix("createMentionNodeFromSearchResult failed to find correct offsets. Found offsets: "+i+", "+o+".");return}var c=e(a);c.setStyle(l.getStyle()),l.replace(c),c.selectNext(0,0)}}l.default=e}),98);
__d("cometMentionsDataEntryText",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t;return(t=e.handle)!=null?t:e.label}i.default=e}),66);
__d("createCometMentionMatchStrategy",["DocumentMentionsRegex"],(function(t,n,r,o,a,i,l){"use strict";var e="(?:\\.[ |$]| |["+r("DocumentMentionsRegex").PUNCTUATION+"]|)",s=75;function u(e,t,n){var r="[^"+e+t+"\\s]",o=new RegExp("(^|\\s|\\()(["+e+"]((?:"+r+n+"){0,"+s+"}))$"),a=50,i=new RegExp("(^|\\s|\\()(["+e+"]((?:"+r+"){0,"+a+"}))$");return{regex:o,regexAlias:i}}function c(t){var n=t.minMatchLength,o=t.name,a=t.triggers,i=t.disallowedChars,l=i===void 0?r("DocumentMentionsRegex").PUNCTUATION:i,s=t.disallowedTerms,c=t.validJoins,d=c===void 0?e:c,m=u(a,l,d),p=m.regex,_=m.regexAlias;return{findMentionableString:function(t){var e=p.exec(t);if(e===null&&(e=_.exec(t)),e!==null){var r=e[1],o=e[3];if(s!=null&&s.includes(o.toLowerCase()))return null;if(o.length>=n)return{leadOffset:e.index+r.length,matchingString:o,replaceableString:e[2]}}return null},name:o}}l.default=c}),98);
__d("createCometAtSignComposerMentionsMatchStrategy",["createCometMentionMatchStrategy"],(function(t,n,r,o,a,i,l){"use strict";var e=["@","\\uff20"].join("");function s(t){var n=t.minMatchLength;return r("createCometMentionMatchStrategy")({minMatchLength:n,name:"AtSignComposerMentionStrategy("+n.toString()+")",triggers:e})}l.default=s}),98);
__d("createCometMentionsNameMatchStrategy",[],(function(t,n,r,o,a,i){"use strict";var e="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;",l="\\b[A-Z][^\\s"+e+"]",s="\\b[a-z][^\\s"+e+"]";function u(e){var t=e.commonWordsBlocklist,n=e.minMatchLength,r=e.nameCase,o=r==="capitalized"?l:s,a=new RegExp("(^|[^#])((?:"+o+"{1,})$)");return{findMentionableString:function(r){var e=a.exec(r);if(e===null)return null;var o=e[1],i=e[2];return t.includes(i)?null:i!=null&&i.length>=n?{leadOffset:e.index+o.length,matchingString:i,replaceableString:i}:null},name:"NameMentionStrategy("+n.toString()+", "+r+")"}}i.default=u}),66);
__d("getHashtagRegexStringChars",[],(function(t,n,r,o,a,i){"use strict";function e(){var e="\xC0-\xD6\xD8-\xF6\xF8-\xFF\u0100-\u024F\u0253-\u0254\u0256-\u0257\u0259\u025B\u0263\u0268\u026F\u0272\u0289\u028B\u02BB\u0300-\u036F\u1E00-\u1EFF",t="\u0400-\u04FF\u0500-\u0527\u2DE0-\u2DFF\uA640-\uA69F\u0591-\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F4\uFB12-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFB4F\u0610-\u061A\u0620-\u065F\u066E-\u06D3\u06D5-\u06DC\u06DE-\u06E8\u06EA-\u06EF\u06FA-\u06FC\u06FF\u0750-\u077F\u08A0\u08A2-\u08AC\u08E4-\u08FE\uFB50-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\u200C-\u200C\u0E01-\u0E3A\u0E40-\u0E4E\u1100-\u11FF\u3130-\u3185\uA960-\uA97F\uAC00-\uD7AF\uD7B0-\uD7FF\uFFA1-\uFFDC",n=String.fromCharCode,r="\u30A1-\u30FA\u30FC-\u30FE\uFF66-\uFF9F\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\u3041-\u3096\u3099-\u309E\u3400-\u4DBF\u4E00-\u9FFF"+n(173824)+"-"+n(177983)+n(177984)+"-"+n(178207)+n(194560)+"-"+n(195103)+"\u3003\u3005\u303B",o=e+t+r,a="A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u0241\u0250-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EE\u037A\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03CE\u03D0-\u03F5\u03F7-\u0481\u048A-\u04CE\u04D0-\u04F9\u0500-\u050F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0621-\u063A\u0640-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u076D\u0780-\u07A5\u07B1\u0904-\u0939\u093D\u0950\u0958-\u0961\u097D\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D60-\u0D61\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6A\u0F88-\u0F8B\u1000-\u1021\u1023-\u1027\u1029-\u102A\u1050-\u1055\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1159\u115F-\u11A2\u11A8-\u11F9\u1200-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u1676\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19A9\u19C1-\u19C7\u1A00-\u1A16\u1D00-\u1DBF\u1E00-\u1E9B\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2131\u2133-\u2139\u213C-\u213F\u2145-\u2149\u2C00-\u2C2E\u2C30-\u2C5E\u2C80-\u2CE4\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3006\u3031-\u3035\u303B-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312C\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FBB\uA000-\uA48C\uA800-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uAC00-\uD7A3\uF900-\uFA2D\uFA30-\uFA6A\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",i="\u0300-\u036F\u0483-\u0486\u0591-\u05B9\u05BB-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u0615\u064B-\u065E\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u0901-\u0903\u093C\u093E-\u094D\u0951-\u0954\u0962-\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7-\u09C8\u09CB-\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A70-\u0A71\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2-\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B43\u0B47-\u0B48\u0B4B-\u0B4D\u0B56-\u0B57\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C01-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C82-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5-\u0CD6\u0D02-\u0D03\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D82-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2-\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F3E-\u0F3F\u0F71-\u0F84\u0F86-\u0F87\u0F90-\u0F97\u0F99-\u0FBC\u0FC6\u102C-\u1032\u1036-\u1039\u1056-\u1059\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B6-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8-\u19C9\u1A17-\u1A1B\u1DC0-\u1DC3\u20D0-\u20DC\u20E1\u20E5-\u20EB\u302A-\u302F\u3099-\u309A\uA802\uA806\uA80B\uA823-\uA827\uFB1E\uFE00-\uFE0F\uFE20-\uFE23",l="0-9\u0660-\u0669\u06F0-\u06F9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\uFF10-\uFF19",s=a+i+o,u=l+"_",c=s+u,d="#\\uFF03";return{alpha:s,alphanumeric:c,hashChars:d}}i.default=e}),66);
__d("getHashtagRegexString",["getHashtagRegexStringChars"],(function(t,n,r,o,a,i){function e(){var e=n("getHashtagRegexStringChars")(),t=e.alpha,r=e.alphanumeric,o=e.hashChars,a="["+t+"]",i="["+r+"]",l="^|$|[^&/"+r+"]",s="["+o+"]",u="("+l+")("+s+")("+i+"*"+a+i+"*)";return u}i.default=e}),66);
__d("getUpgradedCometHashtagComposerHandler",["FBLogger","LexicalHashtag","LexicalText","LexicalUtils","getHashtagRegexString"],(function(t,n,r,o,a,i,l){"use strict";var e=new RegExp(r("getHashtagRegexString")(),"i");function s(t){if(!t.hasNodes([o("LexicalHashtag").HashtagNode]))throw r("FBLogger")("outline_ufi").mustfixThrow("HashtagPlugin: HashtagNode not registered on editor");var n=function(t){return o("LexicalHashtag").$createHashtagNode(t.getTextContent())},a=function(n){var t=e.exec(n);if(t===null)return null;var r=t[3].length+1,o=t.index+t[1].length,a=o+r;return{end:a,start:o}};return o("LexicalUtils").mergeRegister.apply(void 0,o("LexicalText").registerLexicalTextEntity(t,a,o("LexicalHashtag").HashtagNode,n))}l.default=s}),98);
__d("useCometMentionsDataSourceResolverConfig",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useLayoutEffect,d=s.useMemo;function m(e,t){var n=o("react-compiler-runtime").c(12),r;n[0]!==e?(r=function(){e.forEach(p)},n[0]=e,n[1]=r):r=n[1];var a=r,i,l;n[2]!==a||n[3]!==t?(i=function(){t&&a()},l=[t,a],n[2]=a,n[3]=t,n[4]=i,n[5]=l):(i=n[4],l=n[5]),c(i,l);var s;n[6]===Symbol.for("react.memo_cache_sentinel")?(s=new Map,n[6]=s):s=n[6];var u=s,d;n[7]!==e?(d=function(n){var t={dataSource:null,searchResult:null};if(n==null)return t;var r=u.get(n);if(r!=null)return r;for(var o=0;o<e.length;o++){var a=e[o],i=a.dataSource,l=a.matchStrategy,s=l.findMentionableString(n);if(s!=null){var c={dataSource:i,searchResult:s};return u.set(n,c),c}}return u.set(n,t),t},n[7]=e,n[8]=d):d=n[8];var m;return n[9]!==a||n[10]!==d?(m={bootstrap:a,resolver:d},n[9]=a,n[10]=d,n[11]=m):m=n[11],m}function p(e){var t=e.dataSource;t.bootstrap()}l.default=m}),98);
__d("useCometMentionsViewListStrategy",["CometMentionsViewListStrategy.react","CometTypeaheadProgressGlimmer.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["isLoading"],s,u=s||(s=o("react")),c=s.useCallback;function d(t){var n=o("react-compiler-runtime").c(2),a=t.viewItemStrategyRenderer,i;return n[0]!==a?(i=function(n){var t=n.isLoading,o=babelHelpers.objectWithoutPropertiesLoose(n,e);return u.jsxs(u.Fragment,{children:[u.jsx(r("CometMentionsViewListStrategy.react"),babelHelpers.extends({},o,{isLoading:!1,viewItemStrategyRenderer:a})),t&&u.jsx(r("CometTypeaheadProgressGlimmer.react"),{})]})},n[0]=a,n[1]=i):i=n[1],i}l.default=d}),98);/*FB_PKG_DELIM*/
__d("LSBeginHandlingSyncForSyncGroup",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.db.table(1).fetch([[[e[0]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[0]=void 0:(r=a.item,n[9]=new t.Map,n[9].set("group_id",r.groupId),n[9].set("current_cursor",r.currentCursor),n[9].set("sync_status",r.syncStatus),n[9].set("sync_params",r.syncParams),n[9].set("send_sync_params",r.sendSyncParams),n[9].set("min_time_to_sync_timestamp_ms",r.minTimeToSyncTimestampMs),n[9].set("can_ignore_timestamp",r.canIgnoreTimestamp),n[9].set("sync_channel",r.syncChannel),n[9].set("last_sync_request_timestamp_ms",r.lastSyncRequestTimestampMs),n[0]=n[9])})},function(r){var o;return n[0]?n[2]=!1:n[2]=!0,n[2]?t.resolve((o=[e[0],void 0,t.i64.cast([0,4]),void 0,!1],n[3]=o[0],n[4]=o[1],n[5]=o[2],n[6]=o[3],n[7]=o[4],o)):t.sequence([function(e){return n[9]=n[0].get("group_id"),t.filter(t.db.table(3).fetch(),function(e){return t.i64.neq(e.epochId,void 0)&&t.i64.eq(e.syncDatabaseId,n[9])}).next().then(function(e,t){var r=e.done,o=e.value;return r?n[10]=!1:(t=o.item,n[10]=!0)})},function(r){var o;return n[10]?t.resolve((n[17]=n[0].get("group_id"),o=[n[17],void 0,t.i64.cast([0,4]),void 0,!1],n[12]=o[0],n[13]=o[1],n[14]=o[2],n[15]=o[3],n[16]=o[4])):t.sequence([function(r){return n[17]=t.i64.of_float(Date.now()),n[18]=n[0].get("min_time_to_sync_timestamp_ms"),n[19]=n[0].get("last_sync_request_timestamp_ms"),n[20]=n[0].get("can_ignore_timestamp"),n[20]&&e[1]||t.i64.ge(n[17],n[18])?t.sequence([function(r){return e[1]?t.resolve(n[28]=t.i64.cast([0,0])):t.sequence([function(e){return n[29]=n[0].get("group_id"),t.db.table(3).fetch([[["",n[29]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[30]=t.i64.cast([0,0]):(r=a.item,n[30]=r.failureCount)})},function(e){return n[32]=t.i64.mul(t.i64.sub(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.lt(t.i64.cast([0,15]),n[30])?t.i64.cast([0,15]):n[30])),t.i64.cast([0,1])),t.i64.cast([0,500])),n[33]=t.i64.sub(t.i64.add(n[19]==null?t.i64.cast([0,0]):n[19],t.i64.lt(n[32],t.i64.cast([0,3e4]))?n[32]:t.i64.cast([0,3e4])),n[17]),n[28]=t.i64.gt(n[33],t.i64.cast([0,0]))?n[33]:t.i64.cast([0,0])}])},function(e){return n[21]=n[28]}]):t.resolve(n[21]=t.i64.sub(n[18],n[17]))},function(e){return n[22]=n[0].get("group_id"),t.i64.gt(n[21],t.i64.cast([0,0]))?t.sequence([function(e){return n[28]=t.i64.of_float(Date.now()),t.forEach(t.filter(t.db.table(3).fetch(),function(e){return t.i64.eq(e.syncDatabaseId,n[22])}),function(e){var t=e.update,r=e.item;return t({lastDelayedRequestTimestampMs:n[28]})})},function(e){var r;return r=[n[22],n[21],t.i64.cast([0,3]),void 0,!1],n[23]=r[0],n[24]=r[1],n[25]=r[2],n[26]=r[3],n[27]=r[4],r}]):t.sequence([function(e){return n[28]=t.i64.of_float(Date.now()),t.forEach(t.db.table(1).fetch([[[n[22]]]]),function(e){var t=e.update,r=e.item;return t({lastSyncRequestTimestampMs:n[28]})})},function(e){return n[29]=t.i64.of_float(Date.now()),t.forEach(t.filter(t.db.table(3).fetch(),function(e){return t.i64.eq(e.syncDatabaseId,n[22])}),function(e){var t=e.update,r=e.item;return t({lastSyncRequestTimestampMs:n[29]})})},function(e){return n[30]=n[0].get("group_id"),n[31]=t.i64.of_float(Date.now()),n[32]=t.i64.random(),n[45]=t.i64.and_(t.i64.or_(t.i64.lsl_(n[31],t.i64.to_int32(t.i64.cast([0,22]))),t.i64.and_(n[32],t.i64.cast([0,4194303]))),t.i64.cast([2147483647,4294967295])),t.db.table(3).fetch([[["",n[30]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?t.db.table(3).add({syncDatabaseId:n[30],taskQueueName:"",failureCount:t.i64.cast([0,0]),lastSentTimestampMs:t.i64.cast([0,0]),lastSyncRequestTimestampMs:t.i64.cast([0,0]),epochId:n[45]}):(r=a.item,t.forEach(t.db.table(3).fetch([[["",n[30]]]]),function(e){var t=e.update,r=e.item;return t({epochId:n[45]})}))})},function(e){return n[34]=n[0].get("group_id"),t.db.table(3).fetch([[["",n[34]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[35]=t.i64.cast([0,0]):(r=a.item,n[35]=r.failureCount)})},function(e){var r;return n[37]=n[0].get("send_sync_params"),n[38]=n[0].get("sync_params"),n[39]=n[0].get("current_cursor"),n[40]=new t.Map,n[40].set("database",n[34]),n[40].set("version",t.i64.cast([-1,4294967295])),n[40].set("epoch_id",n[45]),n[40].set("last_applied_cursor",n[39]),n[40].set("sync_params",n[37]?n[38]:void 0),n[40].set("failure_count",t.i64.gt(n[35],t.i64.cast([0,0]))?n[35]:void 0),n[41]=n[0].get("current_cursor"),n[41]===void 0?n[42]=t.i64.cast([0,1]):n[42]=t.i64.cast([0,2]),n[43]=new t.Map,n[43].set("type",n[42]),n[43].set("request_payload",n[40]),n[44]=n[0].get("sync_channel"),r=[n[30],void 0,t.i64.cast([0,1]),n[43],t.i64.eq(n[44],t.i64.cast([0,2]))],n[23]=r[0],n[24]=r[1],n[25]=r[2],n[26]=r[3],n[27]=r[4]}])},function(e){var t;return t=[n[23],n[24],n[25],n[26],n[27]],n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=t[3],n[16]=t[4],t}])},function(e){var t;return t=[n[12],n[13],n[14],n[15],n[16]],n[3]=t[0],n[4]=t[1],n[5]=t[2],n[6]=t[3],n[7]=t[4],t}])},function(e){return n[8]=new t.Map,n[8].set("sync_group_id",n[3]),n[8].set("next_sync_ms",n[4]),n[8].set("work_item_type",n[5]),n[8].set("network_payload",n[6]),n[8].set("skip_realtime_gateway",n[7]),r[0]=n[8]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreBeginHandlingSyncForSyncGroupStoredProcedure",e.__tables__=["sync_groups","network_requests"],a.exports=e}),null);
__d("LSBeginHandlingSync",["LSBeginHandlingSyncForSyncGroup"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.createArray(),t.forEach(t.db.table(1).fetch(),function(o){var a=o.item;return t.sequence([function(o){return t.storedProcedure(n("LSBeginHandlingSyncForSyncGroup"),a.groupId,e[0]).then(function(e){var t;return t=e,r[1]=t[0],t})},function(e){return r[2]=(r[0].push(r[1]),r[0])}])})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSCoreBeginHandlingSyncStoredProcedure",e.__tables__=["sync_groups"],a.exports=e}),null);
__d("LSBeginHandlingSyncForSyncGroupStoredProcedure",["LSBeginHandlingSyncForSyncGroup","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSBeginHandlingSyncForSyncGroup"),a.syncGroupId,a.ignoreSoftDelay);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSBeginHandlingSyncStoredProcedure",["LSBeginHandlingSync","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSBeginHandlingSync"),a.ignoreSoftDelay);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSCometSSRDatabase",["LSJSInMemoryStorage","LSMetadata"],(function(t,n,r,o,a,i,l){"use strict";var e=r("LSJSInMemoryStorage")(o("LSMetadata").schema);l.default=e}),98);
__d("LSPlatformSyncSystemMaybeEagerly",["LSEagerlyLoadOnMessenger","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LSPlatformSyncSystem").__setRef("LSPlatformSyncSystemMaybeEagerly");function s(){return o("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(e).load()}l.default=s}),98);
__d("LSPlatformClientInit",["FBLogger","LSClearEpochBeforeResumeSync","LSDataTraceFlushDeferred","LSDatabaseAfterInitSyncSingleton","LSDeleteAllAndInsertConnectivityStatusStoredProcedure","LSFactory","LSIntEnum","LSInternetConnectionState","LSPlatformHardcodedInitSync","LSPlatformLsInitLog","LSPlatformSyncSystemMaybeEagerly","MessengerLogHistory","cr:3411","cr:5083","cr:6044","cr:7528","cr:8131","emptyFunction","getErrorSafe","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("MessengerLogHistory").getInstance("client_init");function u(e){var t=r("emptyFunction");return n("cr:8131")!=null&&r("gkx")("23914")&&(t=n("cr:8131").listenForChangesToBackupState(e)),function(){t&&t()}}function c(t,n){var a=n==="Connected"?(e||(e=o("LSIntEnum"))).ofNumber(r("LSInternetConnectionState").CONNECTED):(e||(e=o("LSIntEnum"))).ofNumber(r("LSInternetConnectionState").NOT_CONNECTED);s.debug("Platform client sync connection status: ",n),r("promiseDone")(t.runInTransaction(function(e){return r("LSDeleteAllAndInsertConnectivityStatusStoredProcedure")(r("LSFactory")(e),{internetConnectionState:a})},"readwrite",void 0,void 0,i.id+":77"),function(){s.debug("Platform client sync connection status set successfully")},function(e){throw s.error("Platform client sync connection status set failed: "+(e==null?void 0:e.message)),e})}async function d(e,t,a,i,l,d){var m;s.debug("Platform client sync starting..."),(m=o("LSPlatformLsInitLog")).addPoint("onstart_callback"),i(),m.addPoint("onstart_callback_end"),s.debug("Getting datascript evaluator..."),m.addPoint("ds_eval_registration");var p=await t.getEval();s.debug("Getting datascript evaluator success");var _;try{_=n("cr:3411")!=null?n("cr:3411").registerEval(p)()(e):p()(e)}catch(t){r("FBLogger")("ls_web_init").catching(r("getErrorSafe")(t)).mustfix("fail to register datascriptEvaluator"),_=p()(e)}o("LSPlatformLsInitLog").addPoint("ds_eval_registration_end"),s.debug("Clearing epoch before resume sync..."),d.didEvaluateInitSyncEagerly||(o("LSPlatformLsInitLog").addPoint("ls_clear_epoch"),await o("LSClearEpochBeforeResumeSync").call(e),o("LSPlatformLsInitLog").addPoint("ls_clear_epoch_end"),s.debug("Clearing epoch before resume sync success"),o("LSPlatformLsInitLog").addPoint("create_client_end"),t.sendHardcodedInitSync&&(s.debug("Starting hard-coded init sync..."),await o("LSPlatformHardcodedInitSync").sendHardcodedInitSync(t,_,e,a),s.debug("Starting hard-coded init sync success"))),o("LSDatabaseAfterInitSyncSingleton").resolveInitSync(Promise.resolve(e)),s.debug("Starting realtime transport"),o("LSPlatformLsInitLog").addPoint("realtime_underlying_transport_start");var f=await t.realtimeUnderylingTransport();o("LSPlatformLsInitLog").addPoint("realtime_underlying_transport_end");var g=await Promise.all([n("cr:5083").load().then(function(e){return e.LSPlatformRealtimeTransport}),n("cr:7528").load(),n("cr:6044").load()]),h=g[0],y=g[1],C=g[2],b=h(f,t.appId,a);o("LSPlatformLsInitLog").addPoint("platform_realtime_transport_end"),s.debug("Starting task system");var v=new y(e,new C(e,b,_,t.schemaVersion));o("LSPlatformLsInitLog").addPoint("platform_task_system_end"),s.debug("Starting sync system");var S=null;r("promiseDone")(r("LSPlatformSyncSystemMaybeEagerly")(),function(n){S=n(e,b,_,t.schemaVersion,a,t.executeGraphQLLightSpeedRequest)}),s.debug("Starting backup state listeners");var R=u(e);o("LSPlatformLsInitLog").addPoint("init_listeners_backup_state_end");var L;return s.debug("Watching for expired traces"),r("promiseDone")(o("LSDataTraceFlushDeferred").watchForExpiredTraces(e).then(function(e){L=e})),s.debug("Subscribing to mqtt sync status change events"),b.onConnectionStatusChange(function(t){c(e,t)}),s.debug("Platform client sync starting sucess"),o("LSPlatformLsInitLog").endSuccess(),{cleanup:function(){var t;s.debug("Platform client sync cleaning up"),l(e),v==null||v.cleanup(),(t=S)==null||t.cleanup(),b.cleanup(),R(),L==null||L()},db:e}}l.init=d}),98);
__d("LSPlatformClient",["ExecutionEnvironment","FBLogger","LSCometSSRDatabase","LSDatabaseProviderType","LSPlatformClientInit","LSPlatformDeviceId","LSPlatformLsInitLog","MAWMIC","MAWMICSchema","cr:10018","emptyFunction","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("emptyFunction").thatReturns(Promise.resolve());function u(e,t,n){var a,i=async function(){var i=o("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral");a=await o("LSPlatformClientInit").init(e,t,i,r("emptyFunction"),r("emptyFunction"),n)};return{cleanup:function(){var e;(e=a)==null||e.cleanup()},db:e,start:i}}async function c(e,t,a){if(n("cr:10018")==null)throw r("FBLogger")("messenger_web").mustfixThrow("LSPlatformClientWithLock is null for PDB enabled");var i=await n("cr:10018").make(e,t,a);return i.isTabWithoutClient()===!0&&(o("MAWMIC").addPoint("ls_init_end"),o("MAWMIC").addPoint(o("MAWMICSchema").POINTS.thread_mapping_end),o("MAWMIC").addBoolAnnotation("LsInitSkipped",!0),o("LSPlatformLsInitLog").addPoint("no_ls_sync"),o("LSPlatformLsInitLog").endSuccess()),{cleanup:r("emptyFunction"),db:e,start:s}}async function d(t,a){if(o("LSPlatformLsInitLog").addPoint("make_client"),(e||(e=r("ExecutionEnvironment"))).canUseDOM){o("LSPlatformLsInitLog").addPoint("create_client_get_db");var i=await t.getDb();if(o("LSPlatformLsInitLog").addPoint("create_client_start"),o("LSDatabaseProviderType").isProviderPersisted(i)&&n("cr:10018")!==null)try{return c(i,t,a)}catch(e){throw o("LSPlatformLsInitLog").addAnnotations({string:{client_for_pdb_error:r("getErrorSafe")(e).message}}),o("LSPlatformLsInitLog").fail("client_for_pdb_error"),e}return u(i,t,a)}return{cleanup:r("emptyFunction"),db:r("LSCometSSRDatabase"),start:s}}l.make=d}),98);
__d("LSPlatformDGWTransport",["DGWClient","DGWLoggingContext","DGWStream","DGWStreamGroupCallbacks","FBLogger","LSIntEnum","LSLogHistory","LSPlatformDGWHostnameOverride","LSPlatformRealtimeTransport","LSStreamGroupRef","MWPBumpEntityKey","MessengerWebRegion","MqttConfig","QuickPerformanceLogger","Random","getErrorSafe","gkx","justknobx","promiseDone","qex","qpl","setTimeout","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_=r("gkx")("3218"),f=r("gkx")("12101"),g=(e=r("qex")._("2084"))!=null?e:!1,h=(s=r("qex")._("2088"))!=null?s:!1,y=(u=r("qex")._("2090"))!=null?u:!1,C=(c=r("qex")._("2092"))!=null?c:!1,b=(d=r("qex")._("2102"))!=null?d:3e4,v=r("justknobx")._("1573"),S=r("justknobx")._("3666"),R=r("qpl")._(701246226,"1285"),L=15,E=0,k=!1,I=new Map,T=null,D=!1,x=null,$={contents:function(){}},P={contents:new Promise(function(e,t){$.contents=e})};function N(e){var t=1*Math.pow(2,e);return t=Math.max(t,1),t=Math.min(t,64),Math.ceil(t*(1e3+o("Random").random()*200))}function M(e,t,n,a){var i;if(x!=null){var l;(l=o("LSStreamGroupRef").streamGroupRef.current)==null||l.streamGroupLoggingContext.logWarn(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"SkipReconnectAttempt","","deviceId:"+e);return}o("LSStreamGroupRef").streamGroupRef.status!=="Disconnected"&&(o("LSStreamGroupRef").streamGroupRef.status="Disconnected"),P.contents=new Promise(function(e,t){$.contents=e});var s=N(E++);h&&E>L&&(E=0);var u="deviceId:"+e+", reconnectMs:"+s+", attempt:"+E+", isClosedLocally:"+String(D);(i=o("LSStreamGroupRef").streamGroupRef.current)==null||i.streamGroupLoggingContext.logWarn(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"ScheduleReconnect","",u),o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"scheduleReconnect"),x=r("setTimeout")(function(){w(e,t,n,a)},s)}function w(e,t,n,a){var i=r("uuidv4")();o("LSStreamGroupRef").streamGroupRef.currentStreamGroupId=i;var l={authToken:n,authType:a,connectTimeoutMs:S,deviceId:e,keepAliveMs:v,loggingId:i,serviceId:"lightspeed",streamGroupAppHeaders:{},verboseLoggingEnabled:_};f&&(l.trafficTracing="dgw-"+i),o("MessengerWebRegion").regionNullable!=null&&(l.regionHint=o("MessengerWebRegion").regionNullable);var s={onStreamGroupError:function(r){var t;if(o("LSStreamGroupRef").streamGroupRef.currentStreamGroupId!==i){var l;(l=o("LSStreamGroupRef").streamGroupRef.current)==null||l.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupError_StaleCallback","Ignored stale callback","deviceId:"+e+", callbackLoggingId:"+i);return}o("LSStreamGroupRef").streamGroupRef.status!=="Disconnected"&&(o("LSStreamGroupRef").streamGroupRef.status="Disconnected",o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler&&o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler("Disconnected","Stream Group Error")),(t=o("LSStreamGroupRef").streamGroupRef.current)==null||t.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupError",o("DGWStreamGroupCallbacks").DGWStreamGroupError.getName(r),"deviceId:"+e),o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,o("DGWStreamGroupCallbacks").DGWStreamGroupError.getName(r)),o("DGWStreamGroupCallbacks").isRetryableError(r)?(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupError.isRetryableError"),M(e,"reconnect_on_streamgrouperror."+o("DGWStreamGroupCallbacks").DGWStreamGroupError.getName(r),n,a)):o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupError.isNotRetryableError")},onStreamGroupMustDrain:function(r){var t;if(o("LSStreamGroupRef").streamGroupRef.currentStreamGroupId!==i){var l;(l=o("LSStreamGroupRef").streamGroupRef.current)==null||l.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupMustDrain_StaleCallback","Ignored stale callback","deviceId:"+e+", callbackLoggingId:"+i);return}o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed","LSPlatformDGWTransport.onStreamGroupMustDrain."+r),(t=o("LSStreamGroupRef").streamGroupRef.current)==null||t.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupMustDrain",r,"deviceId:"+e),M(e,"reconnect_on_streamgroupmustdrain",n,a)},onStreamGroupTransportClose:function(){var t;if(o("LSStreamGroupRef").streamGroupRef.currentStreamGroupId!==i){var r;(r=o("LSStreamGroupRef").streamGroupRef.current)==null||r.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupTransportClose_StaleCallback","Ignored stale callback","deviceId:"+e+", callbackLoggingId:"+i);return}o("LSStreamGroupRef").streamGroupRef.status!=="Disconnected"&&(o("LSStreamGroupRef").streamGroupRef.status="Disconnected",o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler&&o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler("Disconnected","Stream Group Close")),(t=o("LSStreamGroupRef").streamGroupRef.current)==null||t.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupTransportClose","","deviceId:"+e),M(e,"onStreamGroupTransportClose",n,a)}};I.clear(),o("LSStreamGroupRef").streamGroupRef.status="Connecting";var u=r("DGWClient")().createStreamGroup(s,l),c="deviceId:"+e+", runtime_site_is_comet_fb_web:"+String(r("gkx")("2116"))+", endpoint:"+r("MqttConfig").endpoint+", reason:"+t;return u.streamGroupLoggingContext.logWarn(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"CreatingStreamGroupTransport","",c),r("promiseDone")(u.initTransport(),function(n){var r;if(x=null,o("LSStreamGroupRef").streamGroupRef.currentStreamGroupId!==i){var a;(a=o("LSStreamGroupRef").streamGroupRef.current)==null||a.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupTransportOnOpen_StaleCallback","Ignored stale callback","deviceId:"+e+", callbackLoggingId:"+i);return}o("LSLogHistory").log("StreamGroupTransport Connected","debug"),o("LSStreamGroupRef").streamGroupRef.status!=="Connected"&&(o("LSStreamGroupRef").streamGroupRef.status="Connected",o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler&&o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler("Connected")),k&&o("LSStreamGroupRef").streamGroupRef.reconnectHandler&&o("LSStreamGroupRef").streamGroupRef.reconnectHandler(3),k=!0,(r=o("LSStreamGroupRef").streamGroupRef.current)==null||r.streamGroupLoggingContext.logWarn(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupTransportOnOpen","","deviceId:"+e+", reason:"+t),E=0,$.contents()},function(t){var r;if(x=null,o("LSStreamGroupRef").streamGroupRef.currentStreamGroupId!==i){var l;(l=o("LSStreamGroupRef").streamGroupRef.current)==null||l.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupTransportOnError_StaleCallback","Ignored stale callback","deviceId:"+e+", callbackLoggingId:"+i);return}o("LSLogHistory").log("StreamGroupTransport onError","debug"),o("LSStreamGroupRef").streamGroupRef.status!=="Disconnected"&&(o("LSStreamGroupRef").streamGroupRef.status="Disconnected",o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler&&o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler("Disconnected",t)),(r=o("LSStreamGroupRef").streamGroupRef.current)==null||r.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupTransportOnError",String(t),"deviceId:"+e),o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"WebSocketOnError"),t!==o("DGWStream").StreamError.UNAUTHORIZED&&M(e,"reconnect_on_streamgrouptransportonerror."+String(t),n,a)}),o("LSStreamGroupRef").streamGroupRef.current=u,o("LSStreamGroupRef").streamGroupRef.current}async function A(e,t,n,a){n===void 0&&(n=!0);var i=o("LSStreamGroupRef").streamGroupRef.current;if(i==null)throw r("FBLogger")("ls_web_init").mustfixThrow("LS Stream Group not initialized");var l=new TextDecoder,s={};o("LSPlatformDGWHostnameOverride").useHostNameOverride&&o("LSPlatformDGWHostnameOverride").hostNameOverride!=null&&(s["javascript-sandbox"]=o("LSPlatformDGWHostnameOverride").hostNameOverride);try{var u=r("uuidv4")(),c=await i.establishStream({ackTimeoutMs:b,groupedStreamHeaders:s,loggingId:u,verboseLoggingEnabled:_},{onClose:function(){o("LSLogHistory").log("Stream closed","debug")},onDataReceived:function(t){var e=l.decode(t);e.length>0&&o("LSStreamGroupRef").streamGroupRef.subscribers.forEach(function(t){t(e)})},onError:function(t){o("LSLogHistory").log("Stream onError. Disconnected","debug")},onServerHasFinishedSendingData:function(t){o("LSLogHistory").log("Stream finished sending data","debug"),t.loggingContext().logEvent(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"onServerHasFinishedSendingData"),t.close()},onStreamMustDrain:function(t){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed","LSPlatformDGWTransport.onStreamMustDrain"),o("LSLogHistory").log("Stream must drain","debug"),t.loggingContext().logEvent(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"onStreamMustDrain"),t.close()}},t,n,a);return o("LSLogHistory").log("Stream Connected","debug"),c}catch(t){throw o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"initStreamFailure."+e),o("LSLogHistory").log("Error Establishing Stream. Disconnected","debug"),t}}var F="Disconnected",O=function(){return F};function B(e,t,n,r){return T||(T=W(e,t,"init_single_transport_instance",n,r)),T}function W(e,t,n,a,i){var l=new TextEncoder;return w(t,n,a,i),{cleanup:function(){var e;D=!0,(e=o("LSStreamGroupRef").streamGroupRef.current)==null||e.close(),o("LSStreamGroupRef").streamGroupRef.reconnectHandler=null,o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler=null,o("LSStreamGroupRef").streamGroupRef.subscribers.clear()},logEvent:function(t){var e;(e=o("LSStreamGroupRef").streamGroupRef.current)==null||e.streamGroupLoggingContext.logEvent(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,t)},onConnectionStatusChange:function(t){return o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler=t,function(){o("LSStreamGroupRef").streamGroupRef.connectionStatusChangeHandler=null}},onReconnect:function(t){return o("LSStreamGroupRef").streamGroupRef.reconnectHandler=t,function(){o("LSStreamGroupRef").streamGroupRef.reconnectHandler=null}},publish:async function(n,s,u){var e=Date.now()+(Math.round(o("Random").random()*1e4)+1e4);(p||(p=r("QuickPerformanceLogger"))).markerStart(R,e),p.markerAnnotate(R,{int:{database:u},string:{streamGroupId:o("LSStreamGroupRef").getTransportId()}},{instanceKey:e});var c=(m||(m=o("LSIntEnum"))).toNumber(s),d=o("LSStreamGroupRef").streamGroupRef.current;try{o("LSStreamGroupRef").streamGroupRef.status!=="Connected"&&(C&&o("LSStreamGroupRef").streamGroupRef.status==="Disconnected"&&((p||(p=r("QuickPerformanceLogger"))).markerPoint(R,"reconnect",{instanceKey:e}),M(t,"reconnect_when_publish",a,i)),(p||(p=r("QuickPerformanceLogger"))).markerPoint(R,"wait_for_connection",{instanceKey:e}),await P.contents.catch(function(){var e;return o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"ConnectionTimeout."+c),(e=o("LSStreamGroupRef").streamGroupRef.current)==null||e.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Publish","ConnectionTimeout",String(c)),Promise.reject({RE_EXN_ID:o("LSPlatformRealtimeTransport").NotConnected})})),(p||(p=r("QuickPerformanceLogger"))).markerPoint(R,"send_message",{instanceKey:e});var _=(m||(m=o("LSIntEnum"))).unwrapIntEnum(s)===1||(m||(m=o("LSIntEnum"))).unwrapIntEnum(s)===2;if(_&&I.has(u)){var f=I.get(u);await(f==null?void 0:f.send(l.encode(n)))}else{var h=(m||(m=o("LSIntEnum"))).unwrapIntEnum(s)!==4,b={int:{databaseType:u,requestType:c}},v=await A(c,l.encode(n),h,b);h&&(p||(p=r("QuickPerformanceLogger"))).markerPoint(R,"send_message_acked",{instanceKey:e}),(p||(p=r("QuickPerformanceLogger"))).markerEnd(R,2,e),_&&I.set(u,v)}}catch(n){var S;if(n===o("DGWStream").StreamError.ACK_TIMEOUT&&(p||(p=r("QuickPerformanceLogger"))).markerPoint(R,"ack_timeout",{instanceKey:e}),(p||(p=r("QuickPerformanceLogger"))).markerEnd(R,3,e),r("getErrorSafe")(n).message==="Max number of stream IDs reached"){var L;o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamIdLimitExceeded."+c),(L=o("LSStreamGroupRef").streamGroupRef.current)==null||L.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"initStream","StreamIdLimitExceeded",c.toString())}o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"initStreamError."+c),(S=o("LSStreamGroupRef").streamGroupRef.current)==null||S.streamGroupLoggingContext.logError(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Publish","Failed to publish payload",c.toString());var E=g&&(m||(m=o("LSIntEnum"))).unwrapIntEnum(s)===3;return E?Promise.resolve():y&&n===o("DGWStream").StreamError.ACK_TIMEOUT?(d==null||d.close(),M(t,"stream_ack_timeout",a,i),Promise.resolve()):Promise.reject(n)}},subscribe:function(t){return o("LSStreamGroupRef").streamGroupRef.subscribers.set(t,t),function(){o("LSStreamGroupRef").streamGroupRef.subscribers.delete(t)}}}}l.getStatusForDebugging=O,l.LSPlatformDGWTransport=B}),98);
__d("LSPlatformRealtimeTransportEager",["LSPlatformRealtimeTransport","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){return(e||(e=n("Promise"))).resolve({LSPlatformRealtimeTransport:o("LSPlatformRealtimeTransport").LSPlatformRealtimeTransport})};l.load=s}),98);
__d("LSPlatformSyncSystem",["FBLogger","I64","LSBeginHandlingSyncForSyncGroupStoredProcedure","LSBeginHandlingSyncStoredProcedure","LSDatabaseProviderType","LSFactory","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSPlatformGraphQLTransport","LSPlatformRealtimeTransport","LSPlatformRequestId","LSPlatformRequestScheduler","LSPlatformServerResponseHandler","LSShape","LSVec","MWPBumpEntityKey","MessengerLogHistory","ReQL","gkx","promiseDone","qex","throttle"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a,l,u,c){var d=o("MessengerLogHistory").getInstance("client_sync"),m=new(r("LSPlatformServerResponseHandler"))(a),p=o("LSDatabaseProviderType").isProviderPersisted(t),_=function(r){return t.runInTransaction(async function(t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.network_requests).getKeyRange("",r));n!=null&&await t.network_requests.put({epochId:void 0,failureCount:(e||(e=o("I64"))).add(n.failureCount,e.one),lastDelayedRequestTimestampMs:n.lastDelayedRequestTimestampMs,lastSentTimestampMs:n.lastSentTimestampMs,lastSyncRequestTimestampMs:n.lastSyncRequestTimestampMs,networkTaskIdentifier:n.networkTaskIdentifier,syncDatabaseId:n.syncDatabaseId,taskQueueName:n.taskQueueName})},"readwrite",void 0,void 0,i.id+":78")},f=new(r("LSPlatformRequestScheduler")),g=async function(d,_){var i=o("LSShape").toRecord(_),f=o("LSShape").toRecord(i.request_payload),g=i.type,h=r("LSPlatformRequestId").generate(),y=o("LSJson").stringify(o("LSShape").ofRecord({database:f.database,epoch_id:f.epoch_id,failure_count:f.failure_count,last_applied_cursor:f.last_applied_cursor,sync_params:f.sync_params,version:(e||(e=o("I64"))).of_string(l)})),C=(e||(e=o("I64"))).equal(d.sync_group_id,(s||(s=o("LSIntEnum"))).ofNumber(1))&&r("gkx")("26386")===!0;if(!C&&d.skip_realtime_gateway){var b=await o("LSPlatformGraphQLTransport").publish(u,h,g,y,c),v=b[0],S=b[1],R=b[2],L=b[3],E={experiments:R,syncScript:S,target:L};return p?m.maybeEvalInOrderReceived(v,E):a(E)}else{var k=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.sync_groups).getKeyRange(d.sync_group_id)),I=(s||(s=o("LSIntEnum"))).ofNumber(2),T=(e||(e=o("I64"))).to_int32(f.database),D=o("LSMailboxInitialSyncCursor").dgwDisabledSyncGroups.split(",").includes(String(T)),x;k!=null&&(e||(e=o("I64"))).equal(k.syncChannel,I)?x=I:x=D?(s||(s=o("LSIntEnum"))).ofNumber(1):o("LSMailboxInitialSyncCursor").syncChannel;var $=r("qex")._("2071");if(k!=null&&$!=null&&$!=="default"){var P=(s||(s=o("LSIntEnum"))).unwrapIntEnum(g);if(P===1||P===2||P===5){var N=$+"."+(s||(s=o("LSIntEnum"))).toNumber(x)+"."+s.toNumber(g)+"."+s.toNumber(k.groupId);o("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",N)}}return n.publish({databaseType:T,payload:y,queueName:void 0,requestId:h,syncChannel:x,type_:g}).then(function(){return Promise.resolve()})}},h=function(a){var n=function(n){return t.runInTransaction(function(e){return r("LSBeginHandlingSyncForSyncGroupStoredProcedure")(r("LSFactory")(e),{ignoreSoftDelay:!1,syncGroupId:n})},"readwrite",void 0,void 0,i.id+":216").then(function(e){return h(e[0])})},l=function(a,i){f.schedule(function(){r("promiseDone")(n(a))},(e||(e=o("I64"))).to_string(a),e.to_float(i))},u=o("LSShape").toRecord(a),c=u.work_item_type;if((e||(e=o("I64"))).equal(c,(s||(s=o("LSIntEnum"))).ofNumber(1))||(e||(e=o("I64"))).equal(c,(s||(s=o("LSIntEnum"))).ofNumber(5))){var m=r("qex")._("2071");if(m!=null&&m!=="default"){var p=m+"."+(s||(s=o("LSIntEnum"))).toNumber(o("LSMailboxInitialSyncCursor").syncChannel);o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",p)}var y=u.network_payload;return y!=null?g(u,y).catch(function(e){if(m!=null&&m!=="default"){var t=m+"."+(s||(s=o("LSIntEnum"))).toNumber(o("LSMailboxInitialSyncCursor").syncChannel);o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",t+".exception"),e.RE_EXN_ID===o("LSPlatformRealtimeTransport").Timeout?o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",t+".exception.timeout"):e.RE_EXN_ID===o("LSPlatformRealtimeTransport").NotConnected&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync",t+".exception.notconnected")}if(e.message===o("LSPlatformGraphQLTransport").ServerError)o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_graphql_error");else if(e.RE_EXN_ID===o("LSPlatformRealtimeTransport").Timeout||e.RE_EXN_ID===o("LSPlatformRealtimeTransport").NotConnected)o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_timeout_or_disc"),d.debug("Publish timed out");else if(o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_other_error"),e instanceof Error)r("FBLogger")("messenger_web").catching(e).mustfix("Encountered an JS error while publishing a LS sync request");else{var a="";try{a=JSON.stringify(e)}catch(e){}r("FBLogger")("messenger_web").mustfix("Encountered an JS error while publishing a LS sync request %s",a)}return o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","handleSyncFailure."+(s||(s=o("LSIntEnum"))).toNumber(o("LSShape").toRecord(y).type)+"."+s.toNumber(u.sync_group_id)),_(u.sync_group_id).then(function(){return n(u.sync_group_id)})}):(r("FBLogger")("ls_web_init").mustfix("Expected networkpayload for sync request but didn't get any"),Promise.resolve())}if(!(e||(e=o("I64"))).equal(c,(s||(s=o("LSIntEnum"))).ofNumber(3)))return(e||(e=o("I64"))).equal(c,(s||(s=o("LSIntEnum"))).ofNumber(4))||!(e||(e=o("I64"))).equal(c,(s||(s=o("LSIntEnum"))).ofNumber(2))||r("FBLogger")("ls_web_init").mustfix("Native handling for sync group not implemented yet"),Promise.resolve();var C=u.next_sync_ms;return C!=null?(l(u.sync_group_id,C),Promise.resolve()):(r("FBLogger")("ls_web_init").mustfix("Expected delay for delayed sync request but didn't get any"),Promise.resolve())},y=function(t){return Promise.all(r("LSVec").toArray(t[0]).map(function(e){return h(e)}))},C=function(){r("promiseDone")(t.runInTransaction(function(e){return r("LSBeginHandlingSyncStoredProcedure")(r("LSFactory")(e),{ignoreSoftDelay:!1})},"readwrite",void 0,void 0,i.id+":394").then(y))},b=r("throttle")(C,500),v=function(){return o("ReQL").fromTableAscending(t.tables.sync_groups).subscribe(function(){return b()})},S=function(){return n.subscribeToNonTaskResponses(function(e,t){var n=t.ex,a=t.payload,i={experiments:n,sp:t.sp,syncScript:a,target:t.target};r("promiseDone")(m.maybeEvalInOrderReceived(e,i),function(){return b()},function(e){if(o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","handle_sync_response_failure"),e instanceof Error)r("FBLogger")("messenger_web").catching(e).mustfix("JS error encountered handling response from MQTT (pdb=%s): %s",p,e.message);else{var t="";try{t=JSON.stringify(e)}catch(e){}r("FBLogger")("messenger_web").mustfix("JS error encountered handling response from MQTT (pdb=%s): %s",p,t)}})})},R=function(){return n.onReconnect(function(e){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","resume_sync_reconnect"),!(o("LSMailboxInitialSyncCursor").isWebApp&&e===1&&r("qex")._("2072")===!0&&r("qex")._("2080")===!0)&&(d.debug("Sync System reconnecting"),r("promiseDone")(t.runInTransaction(async function(e){var n,a=await(n=o("ReQL")).toArrayAsync(n.mergeJoin(n.fromTableAscending(t.tables.sync_groups),n.fromTableAscending(t.tables.network_requests).getKeyRange("")));return await Promise.all(a.map(function(t){var n=t[1];return e.network_requests.put({epochId:void 0,failureCount:n.failureCount,lastDelayedRequestTimestampMs:n.lastDelayedRequestTimestampMs,lastSentTimestampMs:n.lastSentTimestampMs,lastSyncRequestTimestampMs:n.lastSyncRequestTimestampMs,networkTaskIdentifier:n.networkTaskIdentifier,syncDatabaseId:n.syncDatabaseId,taskQueueName:n.taskQueueName})})),r("LSBeginHandlingSyncStoredProcedure")(r("LSFactory")(e),{ignoreSoftDelay:!1})},"readwrite",void 0,void 0,i.id+":488").then(y)))})},L=v(),E=S(),k=R();return b(),{cleanup:function(){L(),k(),E()}}}l.default=u}),98);
__d("LSPlatformTaskSystemTransportEager",["LSPlatformTaskSystemTransport","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){return(e||(e=n("Promise"))).resolve(r("LSPlatformTaskSystemTransport"))};l.load=s}),98);
__d("LSThreadPointQueryAndRestoreMessagesWithGroupJID",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("wa_jid",e[0]),r[0].set("tam_thread_subtype",t.i64.cast([0,0])),r[1]=r[0].get("wa_jid"),r[2]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[1]),t.i64.cast([0,1021]),r[2],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure",["LSSynchronousPromise","LSThreadPointQueryAndRestoreMessagesWithGroupJID","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSThreadPointQueryAndRestoreMessagesWithGroupJID"),a.waJid);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWFTSMergeCutoverSearchResults",["fbt","I64"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(t,n){var r,a,i,l,u=(e||(e=o("I64"))).add((r=t.matchCount)!=null?r:(e||(e=o("I64"))).of_string("1"),(a=n.matchCount)!=null?a:(e||(e=o("I64"))).of_string("1")),c=e.max((i=t.messageTimestampMs)!=null?i:(e||(e=o("I64"))).minus_one,(l=n.messageTimestampMs)!=null?l:(e||(e=o("I64"))).minus_one);return babelHelpers.extends({},t,{contextLine:s._(/*BTDS*/"_j{\"*\":\"{number} matched messages\",\"_1\":\"1 matched message\"}",[s._plural(e.to_int32(u),"number")]).toString(),matchCount:u,matchLengths:void 0,matchOffsets:void 0,messageId:void 0,messageTimestampMs:(e||(e=o("I64"))).equal(c,(e||(e=o("I64"))).minus_one)?void 0:c})}l.mergeCutoverSearchResults=u}),226);
__d("MAWFTSUniversalSearchQPLLogger",["QPLUserFlow","emptyFunction","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e={hasStarted:!1,instanceKey:5e3},s=r("qpl")._(25301522,"2409");function u(){return e.hasStarted&&c(),e.instanceKey++,e.hasStarted=!0,r("QPLUserFlow").start(s,{annotations:{bool:{isInThread:!1}},instanceKey:e.instanceKey}),e.instanceKey}function c(t){!e.hasStarted||t!=null&&e.instanceKey!==t||(e.hasStarted=!1,r("QPLUserFlow").endCancel(s,{instanceKey:e.instanceKey}))}function d(t){var n=t.annotations,o=t.instanceKey,a=t.point;!e.hasStarted||o!=null&&e.instanceKey!==o||(r("QPLUserFlow").addPoint(s,a,{instanceKey:e.instanceKey}),n!=null&&m({annotations:n,instanceKey:e.instanceKey}))}function m(t){var n=t.annotations,o=t.instanceKey;!e.hasStarted||o!=null&&e.instanceKey!==o||r("QPLUserFlow").addAnnotations(s,n,{instanceKey:e.instanceKey})}function p(t){!e.hasStarted||t!=null&&e.instanceKey!==t||(e.hasStarted=!1,r("QPLUserFlow").endSuccess(s,{annotations:{int:{result_count:e.currentResultCount}},instanceKey:e.instanceKey}))}var _={getCurrentInstanceKey:function(){return e.instanceKey},qplAddAnnotations:m,qplAddPoint:d,qplCancel:c,qplMarkFirstResultShowUp:r("emptyFunction"),qplStart:u,qplSuccess:p,updateCurrentResultCount:r("emptyFunction")},f=_;l.default=f}),98);
__d("escapeRegExp",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}i.default=e}),66);
__d("MWContentSearchUtils",["fbt","I64","LSIntEnum","LSMessageSearchType","MAWVault","escapeRegExp","gkx"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=r("gkx")("1798");function d(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function m(e,t){var n=d(e).split(" "),o=d(t),a=[],i=[];return n.forEach(function(e){var t=new RegExp(r("escapeRegExp")(e),"gi"),n=o.matchAll(t),l=Array.from(n),s=l.map(function(e){return e.index}),u=s.map(function(t){return e.length});i.push.apply(i,s),a.push.apply(a,u)}),{matchLengths:a.join(","),matchOffsets:i.join(",")}}function p(t,n,a,i){if(a!=null&&(n===1||(e||(e=o("I64"))).equal(i,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE)))){var l=o("MAWVault").isVaulted(a)?o("MAWVault").unvault(a):a,c=m(t,l);return babelHelpers.extends({contextLine:l},c)}else return{contextLine:s._(/*BTDS*/"_j{\"*\":\"{number} matched messages\",\"_1\":\"1 matched message\"}",[s._plural(n,"number")]).toString(),matchLengths:void 0,matchOffsets:void 0}}function _(e,t){return e===1&&t!=null?t:void 0}function f(e,t){return e===1&&t!=null?t:void 0}function g(t){return t!=null?(e||(e=o("I64"))).of_float(t):void 0}function h(t,n){var r=(e||(e=o("I64"))).of_float(-t);return n==null?r:e.min(r,n)}function y(t,n){return!c||t.messageTimestampMs==null||n.messageTimestampMs==null?(e||(e=o("I64"))).gt(t.globalIndex,n.globalIndex)?1:(e||(e=o("I64"))).lt(t.globalIndex,n.globalIndex)?-1:0:(e||(e=o("I64"))).lt(t.messageTimestampMs,n.messageTimestampMs)?1:(e||(e=o("I64"))).gt(t.messageTimestampMs,n.messageTimestampMs)?-1:0}l.getContextLineAndMatches=p,l.getMessageOtid=_,l.getMessageId=f,l.getMessageTimestamp=g,l.getGlobalIndex=h,l.searchResultsCompareFn=y}),226);
__d("waitForMiActMappingForUniversalSearch",["FBLogger","I64","LSAuthorityLevel","LSFactory","LSThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure","LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure","MAWCurrentUser","MAWJids","ReQL","WAJids","emptyFunction","err","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=3e4,u=3e4;async function c(t){var n=await o("ReQL").toArrayAsync(t);return n.some(function(t){return t==null||(e||(e=o("I64"))).lt(t.authorityLevel,(e||(e=o("I64"))).of_int32(r("LSAuthorityLevel").AUTHORITATIVE))})===!1}async function d(t,n,a,i){a===void 0&&(a=r("emptyFunction")),i===void 0&&(i=r("emptyFunction"));var l=(e||(e=o("I64"))).of_string(o("MAWCurrentUser").getID()),s=o("ReQL").leftJoin(o("ReQL").fromTableAscending(t.tables.participants,["contactId"]).getKeyRange(n.serverThreadKey).filter(function(t){return!(e||(e=o("I64"))).equal(t.contactId,l)}),o("ReQL").fromTableAscending(t.tables.contacts)).map(function(e){var t=e[0],n=e[1];return n}),d=null,m={contents:function(){}};function p(){a(n),m.contents()}if(await c(s))return p();m.contents=s.subscribe(async function(e,t){if(t.operation!=="delete"&&(d!=null&&window.clearTimeout(d),await c(s)))return p()}),d=window.setTimeout(function(){m.contents(),i(r("err")("Contacts timed out"))},u)}async function m(e,t){var n=o("MAWJids").convertChatJidToIntJid(t),a=o("WAJids").interpretAsGroupJid(t)!=null,l=o("ReQL").fromTableAscending(e.tables.mi_act_mapping_table.index("jid")).getKeyRange(n),u=await o("ReQL").firstAsync(l);if(u!=null)return await d(e,u),Promise.resolve(u);var c=null,m=new Promise(function(t,n){var o={contents:function(){}};function a(e){o.contents(),t(e)}function i(e){o.contents(),n(e)}o.contents=l.subscribe(async function(t,n){n.operation!=="delete"&&(c!=null&&window.clearTimeout(c),await d(e,n.value,a,i))}),c=window.setTimeout(function(){i(r("err")("MiActMapping timed out"))},s)});r("promiseDone")(e.runInTransaction(function(e){return a?r("LSThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure")(r("LSFactory")(e),{waJid:n}):r("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure")(r("LSFactory")(e),{waJid:n})},"readwrite",void 0,void 0,i.id+":150"));try{u=await m}catch(e){r("FBLogger")("messenger_web").warn("[FTS] Issue waiting for mi_act_mapping to be ready",r("getErrorSafe")(e).message)}return u}l.default=m}),98);
__d("MAWUniversalMessageSearch",["FBLogger","I64","JSResourceForInteraction","LSIntEnum","LSMessageSearchType","LSMessagingThreadTypeUtil","LSSearchRequestStatusType","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWFTSMergeCutoverSearchResults","MAWFTSUniversalSearchQPLLogger","MWContentSearchUtils","MWSearchThreadUtils","ReQL","groupBy","promiseDone","waitForMiActMappingForUniversalSearch"],(function(t,n,r,o,a,i,l){"use strict";var e=["matchedTerms","recordType"],s,u,c=(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD),d=new Map,m=r("JSResourceForInteraction")("MAWAsyncEBIssueBulkMessagesPointQuery").__setRef("MAWUniversalMessageSearch");async function p(e,t,n){await e.message_search_queries.put(babelHelpers.extends({hasNextPage:!1,query:t,threadKeyV2:(u||(u=o("I64"))).one,type_:c},n))}async function _(e,t){var n=(u||(u=o("I64"))).to_string(t.threadKey);t.matchCount!=null&&d.set(n,(u||(u=o("I64"))).to_float(t.matchCount));var r=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.message_search_results).getKeyRange(c,t.query,t.threadKey));if(r==null)await e.message_search_results.put(babelHelpers.extends({},t));else{var a=o("MAWFTSMergeCutoverSearchResults").mergeCutoverSearchResults(r,t);await e.message_search_results.upsert([c,r.query,r.threadKey,r.globalIndex],babelHelpers.extends({},a,{globalIndex:t.globalIndex}))}}function f(e,t){var n,r=(n=d.get((u||(u=o("I64"))).to_string(e)))!=null?n:0;r+=t,d.set((u||(u=o("I64"))).to_string(e),r)}function g(){d.clear()}function h(e,t){var n;return o("LSMessagingThreadTypeUtil").isArmadilloSecure(t)&&(n=d.get((u||(u=o("I64"))).to_string(e)))!=null?n:null}async function y(t,n,a){d.clear(),await t.runInTransaction(async function(e){await p(e,a,{resultCount:(u||(u=o("I64"))).zero,status:(s||(s=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").PENDING)})},"readwrite",void 0,void 0,i.id+":142"),r("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"search_local_result_start"});var l=await o("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:a,searchMode:o("MAWBridgeSearchMsg").MESSAGE_CONTENT_SEARCH}),f=l.map(function(t){if(t.recordType==="msg"){var n=t.matchedTerms,r=t.recordType,o=babelHelpers.objectWithoutPropertiesLoose(t,e);return babelHelpers.extends({},o)}}).filter(Boolean),g=r("groupBy")(f,function(e){return e.chatJid}),h=Object.values(g);r("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{int:{numResult:h.length}},point:"search_local_result_end"}),r("promiseDone")(Promise.all(h.map(async function(e,l){var s=e[0].chatJid;await r("waitForMiActMappingForUniversalSearch")(t,s);var d=await o("MWSearchThreadUtils").getThreadDataForSearchResult(t,s,n,c);if(d!=null){var p=d.profilePicUrl,f=d.secondaryProfilePicUrl,g=d.threadDisplayName,h=d.threadKey,y=d.threadType,C=e.sort(function(e,t){return t.sortOrderMs-e.sortOrderMs})[0],b=e.length===1&&C.msg==null?{id:C.externalId,sortOrderMs:C.sortOrderMs}:null,v={displayName:g,globalIndex:o("MWContentSearchUtils").getGlobalIndex(C.sortOrderMs),matchCount:(u||(u=o("I64"))).of_int32(e.length),profilePicUrl:p,query:a,secondaryProfilePicUrl:f,threadKey:h,threadType:y,type_:c};if(b==null)await t.runInTransaction(async function(t){var n,r;await _(t,babelHelpers.extends({},v,o("MWContentSearchUtils").getContextLineAndMatches(a,e.length,C==null||(n=C.msg)==null?void 0:n.content,c),{messageId:o("MWContentSearchUtils").getMessageId(e.length,C==null||(r=C.msg)==null?void 0:r.msgId),messageOtid:o("MWContentSearchUtils").getMessageOtid(e.length,C==null?void 0:C.externalId),messageTimestampMs:o("MWContentSearchUtils").getMessageTimestamp(C==null?void 0:C.sortOrderMs)}))},"readwrite",void 0,void 0,i.id+":243");else{r("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"fetch_missing_message_"+l+"_start"});var S=await m.load().then(function(e){var t=e.issueQueryAsPromiseForSearchResult;return t(s,[b])});if(S!=null&&S.length!==0){var R=S[0];r("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"fetch_missing_message_"+l+"_end"}),await t.runInTransaction(async function(t){var n;await _(t,babelHelpers.extends({},v,o("MWContentSearchUtils").getContextLineAndMatches(a,e.length,C==null||(n=C.msg)==null?void 0:n.content,c),{messageOtid:R.externalId,messageTimestampMs:R.sortOrderMs!=null?(u||(u=o("I64"))).of_float(R.sortOrderMs):void 0}))},"readwrite",void 0,void 0,i.id+":282")}else r("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{bool:{failedFetchingMissingMessage:!0}},point:"fetch_missing_message_"+l+"_end"})}}})),function(){r("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{int:{numResult:h.length}},point:"issue_secure_search_query_end"}),r("promiseDone")(t.runInTransaction(async function(e){await p(e,a,{hasNextPage:!1,resultCount:(u||(u=o("I64"))).of_int32(h.length),status:(s||(s=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").COMPLETE)})},"readwrite",void 0,void 0,i.id+":322"))},function(e){r("FBLogger")("maw_fts_search").mustfix("Error while searching in secure threads. Err: %s",e==null?void 0:e.message)})}l.updateSecureMsgMatchCountForThread=f,l.clearSecureMsgMatchCountForThread=g,l.getSecureMsgsMatchCountForThread=h,l.search=y}),98);
__d("MWEncryptedBackupsListenForChangesToBackupStateInitPathGated",["cr:8129","cr:8784"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=n("cr:8784"))!=null?e:n("cr:8129"),u=s;l.default=u}),98);
__d("isEBSearchEnabled",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("4741")}l.default=e}),98);
__d("MWInboxSecureContentSearch",["I64","JSResourceForInteraction","LSIntEnum","LSMessageSearchType","LSSearchRequestStatusType","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWChatJid","MAWFTSMergeCutoverSearchResults","MAWMiActOnActThreadReadyDeferred","MAWUniversalMessageSearch","MWContentSearchUtils","MWSearchThreadUtils","ReQL","emptyFunction","groupBy","isEBSearchEnabled","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=["matchedTerms","recordType"],s,u,c=r("JSResourceForInteraction")("MAWAsyncEBIssueBulkMessagesPointQuery").__setRef("MWInboxSecureContentSearch"),d=r("justknobx")._("2605");function m(e,t,n){var r;return Promise.all([(r=o("ReQL")).mergeJoin(r.fromTableAscending(n.tables.participants,[]).getKeyRange(e),r.fromTableAscending(n.tables.contacts)),r.firstAsync(r.fromTableAscending(n.tables.threads).getKeyRange(e))]).then(function(e){var n=e[0],r=e[1],a=n.filter(function(e){var n=e[0],r=e[1],a=(s||(s=o("I64"))).equal(r.id,t);return!a}).map(function(e){var t=e[0],n=e[1];return n});return o("ReQL").firstAsync(a)})}function p(e,t){return o("MAWChatJid").toThreadKeyMaybe(t,e.chatJid).then(function(n){return n==null?Promise.resolve([null,e]):Promise.all([o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(n)),Promise.resolve(e)])})}async function _(e,t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.contacts).getKeyRange((s||(s=o("I64"))).of_string(t)));return n}function f(e,t){var n=t.query,a=t.threadKey;return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.message_search_results).getKeyRange((u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD),n,a))}function g(e,t,n,a,l,c,d,m){m===void 0&&(m=r("LSSearchRequestStatusType").COMPLETE);var g=function(d){return p(e,d).then(function(e){var i=e[0];if(i!=null){var p=e[1],g=p.msg;if(g!=null&&p!=null)return Promise.all([o("MWSearchThreadUtils").getThreadPics(i,l,c),o("MWSearchThreadUtils").getThreadParticipants(i,c),(s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE))?_(c,g.sender):Promise.resolve(null),(s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD))?f(d,{query:n,threadKey:i.threadKey}):Promise.resolve(null)]).then(function(e){var c=e[0],_=c[0],f=c[1],h=e[1],y=e[2],C=e[3];(s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD))&&o("MAWUniversalMessageSearch").updateSecureMsgMatchCountForThread(i.threadKey,t);var b=babelHelpers.extends({},o("MWContentSearchUtils").getContextLineAndMatches(n,t,g.content,a),{displayName:o("MWSearchThreadUtils").getThreadDisplayName(l,i,h,y,a),globalIndex:(s||(s=o("I64"))).of_float(-p.sortOrderMs),matchCount:s.of_int32(t),messageId:g.msgId,messageOtid:p.externalId,messageTimestampMs:(s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD))&&t>1?void 0:(s||(s=o("I64"))).of_string(""+p.sortOrderMs),profilePicUrl:(s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE))&&y!=null?y.profilePictureUrl:_,query:n,secondaryProfilePicUrl:(s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE))&&y!=null?y.profilePictureFallbackUrl:f,threadKey:i.threadKey,threadType:i.threadType,type_:a}),v;if((s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD))||C==null)v=d.message_search_results.put(b);else{var S=o("MAWFTSMergeCutoverSearchResults").mergeCutoverSearchResults(C,b);v=d.message_search_results.upsert([a,C.query,C.threadKey,C.globalIndex],babelHelpers.extends({},S,{globalIndex:b.globalIndex}))}return Promise.all([d.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:n,resultCount:s.of_int32(t),status:(u||(u=o("LSIntEnum"))).ofNumber(m),threadKeyV2:i.threadKey,type_:a}),v]).then(r("emptyFunction"))})}})};return d!=null?g(d):c.runInTransaction(function(e){return g(e)},"readwrite",void 0,void 0,i.id+":284")}async function h(t,n,r,a){a!=null&&a.flow.qplAddPoint({instanceKey:a.instanceKey,point:"search_local_result_start"});var i=await o("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:n,searchMode:o("MAWBridgeSearchMsg").MESSAGE_CONTENT_SEARCH});return Promise.all(i.map(function(n){if(n.recordType==="msg"){var r=n.matchedTerms,a=n.recordType,i=babelHelpers.objectWithoutPropertiesLoose(n,e);return o("MAWChatJid").toThreadKeyMaybe(t.tables,i.chatJid).then(function(e){return[i,e]})}}).filter(Boolean)).then(function(e){var t=r!=null?e.filter(function(e){var t=e[0],n=e[1];return n!=null&&(s||(s=o("I64"))).equal(n,r)}):e.filter(function(e){var t=e[0],n=e[1];return n!=null}),n=null;return r!=null&&(n={int:{numResult:t.length}}),a!=null&&a.flow.qplAddPoint({annotations:babelHelpers.extends({},n),instanceKey:a.instanceKey,point:"search_local_result_end"}),t})}function y(e,t,n,a){return o("MAWUniversalMessageSearch").clearSecureMsgMatchCountForThread(),h(n,e,void 0,a).then(function(i){var l=Object.values(r("groupBy")(i,function(e){var t=e[0],n=e[1];return n==null?"":(s||(s=o("I64"))).to_string(n)}));return a!=null&&a.flow.qplAddAnnotations({annotations:{int:{numResult:l.length}}}),l.map(function(a){var i=a[0];if(i!==null){var l=i[0];return g(l,a.length,e,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").THREAD),t,n)}}).reduce(function(e,t){return Promise.all([e,t]).then(r("emptyFunction"))},Promise.resolve())})}function C(e,t,n,a,i,l){return Promise.all(a.map(function(a){return g(a,i,n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE),l,e,t)})).then(r("emptyFunction"))}function b(e,t,n,a,i){return Promise.all(n.map(function(n){return g(n,a,t,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE),i,e)})).then(r("emptyFunction"))}function v(e,t,n,a,l){return a.runInTransaction(function(n){return n.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:e,resultCount:(s||(s=o("I64"))).of_int32(0),status:(u||(u=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").PENDING),threadKeyV2:t,type_:u.ofNumber(r("LSMessageSearchType").MESSAGE)})},"readwrite",void 0,void 0,i.id+":468").then(function(n){return h(a,e,t,l)}).then(function(m){var p=m.length,_=m.filter(function(e){var t=e[0],n=e[1];return t.msg!=null}).length,f=_,h=function(){var o=m.map(function(e){var t=e[0];return t}).filter(function(e){return e.msg==null});return o.length===0?Promise.resolve():(o=o.slice(0,d),l.flow.qplAddPoint({annotations:{int:{numRequestedMessages:o.length}},instanceKey:l.instanceKey,point:"fetch_missing_messages_start"}),r("MAWMiActOnActThreadReadyDeferred")(a,t,"MWMessageSearchInput.react",function(t,r){var i=o.map(function(e){return{id:e.externalId,sortOrderMs:e.sortOrderMs}});return c.load().then(function(t){var o=t.issueQueryAsPromiseForSearchResult,s=o(r,i);return s==null?Promise.resolve():s.then(async function(t){var s=t;if(t.length!==i.length){l.flow.qplAddPoint({annotations:{int:{numRemainingMessages:i.length-t.length}},instanceKey:l.instanceKey,point:"fetch_missing_messages_partial"});var u=i.filter(function(e){return!s.some(function(t){return t.externalId===e.id})});if(u.length>0){var c=await o(r,u);c!=null&&(s=[].concat(t,c))}}return f=_+s.length,l.flow.qplAddPoint({annotations:{int:{numRespondedMessages:s.length}},instanceKey:l.instanceKey,point:"fetch_missing_messages_end"}),b(a,e,s,f,n)})})}))};return Promise.all([m.map(function(t){var i=t[0];return g(i,p,e,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE),n,a,void 0,r("LSSearchRequestStatusType").PENDING)}).reduce(function(e,t){return Promise.all([e,t]).then(r("emptyFunction"))},Promise.resolve()),r("isEBSearchEnabled")()?h():Promise.resolve()]).then(function(n){return a.runInTransaction(function(n){return n.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:e,resultCount:(s||(s=o("I64"))).of_int32(f),status:(u||(u=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").COMPLETE),threadKeyV2:t,type_:u.ofNumber(r("LSMessageSearchType").MESSAGE)})},"readwrite",void 0,void 0,i.id+":618")}).then(function(e){return Promise.resolve()})})}l.getThreadOtherParticipantContact=m,l.searchSecureDatabaseThreads=y,l.addBridgeSearchMsgsToSearchResult=C,l.addMessagesToSearchResult=b,l.searchSecureDatabaseMessages=v}),98);
__d("MWPlatformTaskSystemEager",["MWPlatformTaskSystem","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){return(e||(e=n("Promise"))).resolve(r("MWPlatformTaskSystem"))};l.load=s}),98);