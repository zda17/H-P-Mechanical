;/*FB_PKG_DELIM*/

__d("LSGetFirstAvailablePersistentMenuCTAID",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.sortBy(t.db.table(251).fetch(),[["ctaId","DESC"]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[0]=t.i64.cast([0,1]):(r=a.item,n[0]=t.i64.add(r.ctaId,t.i64.cast([0,1])))})},function(e){return r[0]=n[0]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSComposerMenusGetFirstAvailablePersistentMenuCTAIDStoredProcedure",e.__tables__=["persistent_menu_ctas"],a.exports=e}),null);
__d("LSGetFirstAvailablePersistentMenuItemsCTAID",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.sortBy(t.db.table(77).fetch(),[["ctaId","DESC"]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[0]=t.i64.cast([0,1]):(r=a.item,n[0]=t.i64.add(r.ctaId,t.i64.cast([0,1])))})},function(e){return r[0]=n[0]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsGetFirstAvailablePersistentMenuItemsCTAIDStoredProcedure",e.__tables__=["persistent_menu_items"],a.exports=e}),null);
__d("LSInsertPersistentMenuCtasForThread",["LSGetFirstAvailablePersistentMenuCTAID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.storedProcedure(n("LSGetFirstAvailablePersistentMenuCTAID")).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.count(t.db.table(9).fetch([[[e[0]]]])).then(function(e){return r[1]=e})},function(n){return t.i64.eq(r[1],t.i64.cast([0,0]))?t.resolve(0):t.db.table(251).add({threadKey:e[0],ctaId:r[0],title:e[2],actionUrl:e[3],nativeUrl:e[4],ctaType:e[5],platformToken:e[6]})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSComposerMenusInsertPersistentMenuCtasForThreadStoredProcedure",e.__tables__=["threads","persistent_menu_ctas"],a.exports=e}),null);
__d("LSInsertPersistentMenuItemsForThread",["LSGetFirstAvailablePersistentMenuItemsCTAID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.storedProcedure(n("LSGetFirstAvailablePersistentMenuItemsCTAID")).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.db.table(77).add({threadKey:e[0],ctaId:r[0],title:e[1],actionUrl:e[2],nativeUrl:e[3],ctaType:e[4],platformToken:e[5],enableExtensions:e[6],extensionHeightType:e[7]})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSOmnistoreSettingsInsertPersistentMenuItemsForThreadStoredProcedure",e.__tables__=["persistent_menu_items"],a.exports=e}),null);
__d("LSRemoveExistingPersistentMenuCtas",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(251).fetch([[[e[0]]]]),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSComposerMenusRemoveExistingPersistentMenuCtasStoredProcedure",e.__tables__=["persistent_menu_ctas"],a.exports=e}),null);
__d("LSRemoveExistingPersistentMenuItems",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(77).fetch([[[e[0]]]]),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsRemoveExistingPersistentMenuItemsStoredProcedure",e.__tables__=["persistent_menu_items"],a.exports=e}),null);